if(nexacro._Browser!="Runtime"&&!nexacro.Element){"use strict";var _process=true;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){nexacro.__createCanvasElementHandle=function(element,_doc,left,top,width,height){var handle=_doc.createElement("div");var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle,width,height);handle._linked_element=element;return handle;};nexacro.__destroyCanvasElementHandle=nexacro._desyroyElementHandle;}else if(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>=9)){nexacro.__createCanvasElementHandle=function(element,_doc,left,top,width,height){var handle=_doc.createElement("canvas");var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle,width,height);handle._linked_element=element;handle._draw_ctx=handle.getContext("2d");return handle;};nexacro.__destroyCanvasElementHandle=function(_parent_handle,handle){if(_parent_handle){_parent_handle.removeChild(handle);}handle._draw_ctx=null;handle._linked_element=null;};}nexacro.__setLastFocusedElement=function(elem){if(elem){var win=elem.linkedcontrol?elem.linkedcontrol._getWindow():(elem.parent_elem?elem.parent_elem.linkedcontrol._getWindow():null);if(win){var root_win=win;while(true){if(root_win instanceof nexacro._PopupWindow){if(root_win==root_win.parent){break;}root_win=root_win.parent;}else{break;}}if(!root_win){root_win=win;}root_win._last_focused_elem=elem;}}};nexacro.Element=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"elem");};var _pElement=nexacro._createPrototype(nexacro.Object,nexacro.Element);nexacro.Element.prototype=_pElement;_pElement._type_name="Element";_pElement.parent=null;_pElement.parent_elem=null;_pElement.id="";_pElement.status="";_pElement.userstatus="";_pElement.left=0;_pElement.top=0;_pElement.width=0;_pElement.height=0;_pElement.visible=true;_pElement.rtl=undefined;_pElement.color=null;_pElement.font=null;_pElement.textDecoration=null;_pElement.wordSpacing=null;_pElement.letterSpacing=null;_pElement.pointerEvent="";_pElement.handle=null;_pElement.dest_handle=null;_pElement.owner_elem=null;_pElement._is_nc_element=false;_pElement._is_input_element=false;_pElement.typeselector="";_pElement.classselector="";_pElement.clearContents=nexacro._emptyFn;_pElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var _doc=win._doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());this.handle=handle;handle.id=this.name;handle._linked_element=this;var handle_style=handle.style;this._refreshCommonStyleProps(handle_style);nexacro.__appendDOMNode(this._is_nc_element?owner_elem.handle:owner_elem.dest_handle,handle);}};_pElement.createCommand=function(){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this.handle){this.owner_elem=owner_elem;var handle_style=this._getCommonStyleStr();var str="<div id='"+this.name+"' class='"+this._getElementClassName()+"'";str+=(handle_style)?(" style='"+handle_style+"'>"):">";str+="</div>";return str;}return "";};_pElement.attachHandle=function(win){if(this.name&&!this.handle){this.handle=win._doc.getElementById(this.name);}};_pElement._removeElementHandle=function(){var handle=this.handle;if(handle){var dest_handle;handle._linked_element=null;if(this._is_nc_element){dest_handle=(this.owner_elem?this.owner_elem.handle:null);}else{dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);}nexacro.__removeDOMNode(dest_handle,handle);}};_pElement._destroyElementHandle=function(){var handle=this.handle;if(handle){this._removeElementHandle();this.handle=null;}};_pElement.destroy=function(){this._destroyElementHandle();this.owner_elem=null;this.parent=null;this.parent_elem=null;};_pElement.isInputElement=function(){return this._is_input_element;};_pElement.stopSysEvent=function(){this._event_stop=true;};_pElement._appendToContainer=function(owner_elem){var handle=this.handle;if(this.owner_elem==null){this.owner_elem=owner_elem;if(handle&&owner_elem.handle){nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}}};_pElement._insertToContainer=function(owner_elem,before_elem){var handle=this.handle;if(this.owner_elem==null){this.owner_elem=owner_elem;if(handle&&owner_elem.handle){nexacro.__insertDOMNode(owner_elem.dest_handle,handle,before_elem.handle);}}};_pElement._removeFromContainer=function(){var owner_elem=this.owner_elem;if(owner_elem){this.owner_elem=null;var handle=this.handle;var linkedcontrol=this.linkedcontrol;if(linkedcontrol._findOwnerElementHandle){var owner_elem_info=linkedcontrol._findOwnerElementHandle();if(owner_elem_info.is_append){if(owner_elem_info.ref_handle){nexacro.__removeDOMNode(owner_elem_info.ref_handle,handle);}else{nexacro.__removeDOMNode(owner_elem_info.owner_handle,handle);}}}else if(handle&&owner_elem.handle){if(this._is_nc_element){nexacro.__unlinkDOMNode(owner_elem.handle,handle);}else if(owner_elem.dest_handle!=handle){nexacro.__unlinkDOMNode(owner_elem.dest_handle,handle);}}}};_pElement.getContainerElement=function(){return this;};_pElement._getRootWindowHandle=function(){if(this.owner_elem){return this.owner_elem._getRootWindowHandle();}return null;};_pElement._isRtl=function(bPosition){var elem=bPosition?(this.parent_elem?this.parent_elem:this.parent.getElement()):this;while(elem){if(elem.rtl!==undefined){return elem.rtl;}if(elem.parent_elem){elem=elem.parent_elem;}else{elem=elem.parent;}}return nexacro._rtl;};_pElement._isParentRtl=function(){var elem=this.parent_elem?this.parent_elem:(this.parent?this.parent.getElement():null);while(elem){if(elem.rtl!==undefined){return elem.rtl;}if(elem.parent_elem){elem=elem.parent_elem;}else{elem=elem.parent;}}return nexacro._rtl;};_pElement._checkUpdateElementByRTL=function(handle,prop){var ret=false;var bPositionRtl=this._isParentRtl();if(handle){var handle_style=handle.style;if(typeof prop=="number"){if(!((handle_style.left==prop+"px")^bPositionRtl)){ret=true;}}else{}}return ret;};_pElement.setElementPosition=function(left,top,bforce){var handle=this.handle;if(this.left!=left||this.top!=top||bforce){this.left=left;this.top=top;if(handle){var bPositionRtl=this._isParentRtl();if(this._use_translate_move){if(this._style_left==undefined||this._style_top==undefined){this._style_left=(handle.style.left)?parseInt(handle.style.left):0;this._style_top=(handle.style.top)?parseInt(handle.style.top):0;}var translate_left=left;var translate_top=top;var style_left=this._style_left;var style_top=this._style_top;if(nexacro._Browser_Transform3d>0){translate_left-=style_left;translate_top-=style_top;}if(translate_left||translate_top){nexacro.__setDOMStyle_Translate(handle.style,translate_left,translate_top,bPositionRtl);}else{nexacro.__clearDOMStyle_Translate(handle.style);}}else{nexacro.__setDOMStyle_Pos(handle.style,left,top,bPositionRtl);}}}};_pElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){if(width&&height){nexacro.__setDOMStyle_Size(handle.style,width,height);}else{nexacro.__clearDOMStyle_Size(handle.style);}}}};if(nexacro._OS=="Android"){_pElement.setElementVisible=function(visible){if(this.visible!=visible){this.visible=visible;var handle=this.handle;if(handle){nexacro.__setDOMStyle_Visible(handle.style,visible);if(this.visible){var v=this.zindex;if(!v||v<0){v="";}nexacro.__setDOMStyle_Zindex(handle.style,v);}else{nexacro.__setDOMStyle_Zindex(handle.style,nexacro._zindex_hide);}}}};}else{_pElement.setElementVisible=function(visible){if(this.visible!=visible){this.visible=visible;var handle=this.handle;if(handle){nexacro.__setDOMStyle_Visible(handle.style,visible);}}};}_pElement.setElementRtl=function(rtl){if(this.rtl!=rtl){this.rtl=rtl;var handle=this.handle;if(handle){nexacro.__setDOMStyle_Direction(handle.style,rtl);}}};_pElement.setElementTypeCSSSelector=function(typename){if(this.typeselector!=typename){this.typeselector=typename;var handle=this.handle;if(handle){nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());}}};_pElement.setElementClassCSSSelector=function(classname){if(this.classselector!=classname){this.classselector=classname;var handle=this.handle;if(handle){nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());}}};_pElement.setElementTextAlignByClassCSSSelector=function(textalign){var classselector="nexacenteralign";{if(textalign=="left"){classselector="nexaleftalign";}else if(textalign=="right"){classselector="nexarightalign";}}this.setElementClassCSSSelector(classselector);};_pElement._getElementClassName=function(){var classname=this.typeselector;if(this.rtl){classname+=" nexartl";}if(this.classselector){classname+=" "+this.classselector;}return classname;};_pElement._getElementNexaClassName=function(type,id){var classname=type;if(this._isRtl(true)){classname+=" nexartl";}if(id){classname+=" "+id;}return classname;};_pElement.setElementStatus=function(status){if(this.status!=status){this.status=status;var handle=this.handle;if(handle){nexacro.__setDOMNode_Status(handle,status);}}};_pElement.setElementUserStatus=function(userstatus){if(this.userstatus!=userstatus){this.userstatus=userstatus;var handle=this.handle;if(handle){nexacro.__setDOMNode_UserStatus(handle,userstatus);}}};_pElement._getWindow=function(){return this.linkedcontrol._getWindow();};_pElement.setElementColor=function(color){if(this.color!=color){this.color=color;if(this.handle){nexacro.__setDOMStyle_ColorObject(this.handle.style,color);}}};_pElement.setElementFont=function(font){if(this.font!=font){this.font=font;if(this.handle){nexacro.__setDOMStyle_FontObject(this.handle.style,font);}}};_pElement.setElementTextDecoration=function(decoration){if(this.textDecoration!=decoration){this.textDecoration=decoration;if(this.handle){nexacro.__setDOMStyle_TextDecorationObject(this.handle.style,decoration);}}};_pElement.setElementWordSpacing=function(wordspacing){if(this.wordSpacing!=wordspacing){this.wordSpacing=wordspacing;if(this.handle){nexacro.__setDOMStyle_WordSpacingObject(this.handle.style,wordspacing);}}};_pElement.setElementLetterSpacing=function(letterspacing){if(this.letterSpacing!=letterspacing){this.letterSpacing=letterspacing;if(this.handle){nexacro.__setDOMStyle_LetterSpacingObject(this.handle.style,letterspacing);}}};_pElement.setElementPointerEvents=function(pointerevent){if(this.pointerEvent!=pointerevent){this.pointerEvent=pointerevent;var handle=this.handle;if(handle){nexacro.__setDOMNodeStylePointerEvents(handle.style,pointerevent);}}};_pElement._refreshCommonStyleProps=function(handle_style){var bPositionRtl=this._isParentRtl();if(!this.visible){nexacro.__setDOMStyle_Visible(handle_style,false);}if(this.display=="none"){nexacro.__setDOMStyle_Display(handle_style,"none");}{if(this._use_translate_move){nexacro.__setDOMStyle_Pos(handle_style,0,0,bPositionRtl);nexacro.__setDOMStyle_Translate(handle_style,this.left,this.top,this.rtl);}else{nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,bPositionRtl);}}var linked_control=this.linkedcontrol;if(!(linked_control&&linked_control._is_frame&&(linked_control._is_main&&!nexacro._allow_default_pinchzoom))){if(this.width&&this.height){nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);}}if(this.color){nexacro.__setDOMStyle_ColorObject(handle_style,this.color);}if(this.font){nexacro.__setDOMStyle_FontObject(handle_style,this.font);}if(this.wordSpacing){nexacro.__setDOMStyle_WordSpacingObject(handle_style,this.wordSpacing);}if(this.letterSpacing){nexacro.__setDOMStyle_LetterSpacingObject(handle_style,this.letterSpacing);}if(this.textDecoration){nexacro.__setDOMStyle_TextDecorationObject(handle_style,this.textDecoration);}if(this.rtl!==undefined){nexacro.__setDOMStyle_Direction(handle_style,this.rtl);}if(this.wordWrap){nexacro.__setDOMStyle_WordWrap(handle_style,this.wordWrap);}if(this.pointerEvent){nexacro.__setDOMNodeStylePointerEvents(handle_style,this.pointerEvent);}};_pElement._getCommonStyleStr=function(){var str="";var bPositionRtl=this._isParentRtl();if(!this.visible){str+=nexacro.__getHTMLStyle_Visible(false);}if(this.display=="none"){str+=nexacro.__getHTMLStyle_Display("none");}if(this.left>=0||this.top>=0){str+=nexacro.__getHTMLStyle_Pos(this.left,this.top,bPositionRtl);}if(this.width>=0&&this.height>=0){str+=nexacro.__getHTMLStyle_Size(this.width,this.height);}if(this.color){str+=nexacro.__getHTMLStyle_ColorObject(this.color);}if(this.font){str+=nexacro.__getHTMLStyle_FontObject(this.font);}if(this.wordSpacing){str+=nexacro.__getHTMLStyle_WordSpacingObject(this.wordSpacing);}if(this.letterSpacing){str+=nexacro.__getHTMLStyle_LetterSpacingObject(this.letterSpacing);}if(this.textDecoration){str+=nexacro.__getHTMLStyle_TextDecorationObject(this.textDecoration);}if(this.rtl!==undefined){str+=nexacro.__getHTMLStyle_Direction(this.rtl);}if(this.wordWrap){str+=nexacro.__getHTMLStyle_WordWrap(this.wordWrap);}if(this.pointerEvent){str+=nexacro.__getHTMLStyle_PointerEvents(this.pointerEvent);}return str;};_pElement._getOverflowScrollSize=function(){return 0;};_pElement._contains=function(oDescendant){while(oDescendant){if(oDescendant==this){return true;}oDescendant=oDescendant.parent_elem;}return false;};_pElement._getComputedStyle=nexacro._emptyFn;_pElement._getComputedStyleBackgroundColor=nexacro._emptyFn;_pElement.setElementAccessibilityRole=nexacro._emptyFn;_pElement.setElementAccessibilityLabel=nexacro._emptyFn;_pElement.setElementAccessibilityFlagReadOnly=nexacro._emptyFn;_pElement.getElementCaretPos=nexacro._emptyFn;_pElement._getPositionInWindow=function(){return nexacro._getElementXYInWindow(this.handle);};var __pEdgeImageElement;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=10){nexacro._EdgeImageElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.name=this.parent_elem.name+":edge";};__pEdgeImageElement=nexacro._createPrototype(nexacro.Element,nexacro._EdgeImageElement);nexacro._EdgeImageElement.prototype=__pEdgeImageElement;__pEdgeImageElement._type_name="_EdgeImageElement";__pEdgeImageElement.edgeImage=null;__pEdgeImageElement.url="";__pEdgeImageElement.edgex=0;__pEdgeImageElement.edgey=0;__pEdgeImageElement._edge_type= -1;__pEdgeImageElement._img_width=0;__pEdgeImageElement._img_height=0;__pEdgeImageElement._img_sizereq=false;__pEdgeImageElement._ready_image=false;__pEdgeImageElement._is_nc_element=true;__pEdgeImageElement.create=function(_doc){var owner_elem=this.parent_elem;if(owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;_doc=_doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexaedge"));this.handle=handle;this._applied_edge_type=0;var width=this.width;var height=this.height;if(!this._inner_command){if(this._ready_image){this._inner_command=this._create_inner_command(this._edge_type,width,height,this.url,this._img_width,this._img_height,this.edgex,this.edgey);}else{if(this.url){var imgsize=nexacro._getImageSize(this.url,this._on_notify_imgsize,this);this._img_sizereq=true;if(imgsize){this._img_sizereq=false;this._ready_image=true;this._img_width=imgsize.width;this._img_height=imgsize.height;this._inner_command=this._create_inner_command(this._edge_type,width,height,this.url,this._img_width,this._img_height,this.edgex,this.edgey);}}}}if(this._inner_command){handle.innerHTML=this._inner_command;}var dest_handle=owner_elem.handle;nexacro.__insertDOMNode(dest_handle,handle,dest_handle.firstChild);}};__pEdgeImageElement.createCommand=function(){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this.handle){this.owner_elem=owner_elem;var str="<div class='"+this._getElementNexaClassName("nexaedge")+"'>";if(!this._inner_command){if(this._ready_image){this._inner_command=this._create_inner_command(this._edge_type,this.width,this.height,this.url,this._img_width,this._img_height,this.edgex,this.edgey);}else{if(this.url){var imgsize=nexacro._getImageSize(this.url,this._on_notify_imgsize,this);this._img_sizereq=true;if(imgsize){this._img_sizereq=false;this._ready_image=true;this._img_width=imgsize.width;this._img_height=imgsize.height;this._inner_command=this._create_inner_command(this._edge_type,this.width,this.height,this.url,this._img_width,this._img_height,this.edgex,this.edgey);}}}}if(this._inner_command){str+=this._inner_command;}str+="</div>";return str;}return "";};__pEdgeImageElement.attachHandle=function(win){if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;}}};__pEdgeImageElement.attach_handle_fromparent=function(_parent){if(_parent&&!this.handle){var handle=_parent.firstChild;if(handle){this.handle=handle;}}};__pEdgeImageElement.destroy=function(){var handle=this.handle;if(handle){var dest_handle=(this.owner_elem?this.owner_elem.handle:null);nexacro.__removeDOMNode(dest_handle,handle);this.owner_elem=null;this.handle=null;}this.parent=null;this.parent_elem=null;};__pEdgeImageElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(this._ready_image){this._inner_command=this._create_inner_command(this._edge_type,width,height,this.url,this._img_width,this._img_height,this.edgex,this.edgey);}var handle=this.handle;if(handle){nexacro.__setDOMStyle_Size(handle.style,width,height);handle.innerHTML=this._inner_command;}}};__pEdgeImageElement.setElementInfo=function(edgeImage,edge_info){edgeImage=(edgeImage||edge_info);if(this.edgeImage!=edgeImage){this.edgeImage=edgeImage;this._edge_info=edge_info;var url=edgeImage._sysurl;var edgex=edgeImage.edge_x;var edgey=edgeImage.edge_y;var url_change=false;var layout_change=false;var edge_type=0;if(edgex<0){edgex=0;}if(edgey<0){edgey=0;}if(edgex>0&&edgey>0){edge_type=3;}else if(edgey>0){edge_type=2;}else if(edgex>0){edge_type=1;}if(this._edge_type!=edge_type||this.edgex!=edgex||this.edgey!=edgey){this._edge_type=edge_type;this.edgex=edgex;this.edgey=edgey;layout_change=true;}if(this.url!=url){this.url=url;url_change=true;var imgsize=nexacro._getImageSize(this.url,this._on_notify_imgsize,this);if(imgsize){this._img_sizereq=false;this._ready_image=true;if(this._img_width!=imgsize.width||this._img_height!=imgsize.height){this._img_width=imgsize.width;this._img_height=imgsize.height;layout_change=true;}}else{this._img_sizereq=true;this._ready_image=false;this._img_width=0;this._img_height=0;}}else{this._ready_image=true;}if(layout_change||url_change){this._inner_command="";if(this._ready_image){this._inner_command=this._create_inner_command(edge_type,this.width,this.height,url,this._img_width,this._img_height,edgex,edgey);}var handle=this.handle;if(handle){if(layout_change){handle.innerHTML=this._inner_command;}else{this._updateURL(handle,url);}}}}};if(nexacro._BrowserVersion<=7){nexacro._makeImageClipInfo=function(top,right,bottom,left){return "rect("+top+" "+right+" "+bottom+" "+left+")";};}else{nexacro._makeImageClipInfo=function(top,right,bottom,left){return "rect("+top+"px,"+right+"px,"+bottom+"px,"+left+"px)";};}__pEdgeImageElement._createLeftRight_command=function(img_width,height,img_offset_y,edgex,edgey,url){var _top=( -img_offset_y);var _height=height+img_offset_y+img_offset_y;var _clip_top=edgey+img_offset_y;var _clip_bottom=height-edgey+img_offset_y;var str="";str+="<img alt='' ";str+=nexacro.__getHTMLAttr_ImageUrl(url);str+=" style='left:0px;top:"+_top+"px;";str+=nexacro.__getHTMLStyle_Size(img_width,_height);str+="clip:"+nexacro._makeImageClipInfo(_clip_top,edgex,_clip_bottom,0)+";'/>";str+="<img alt='' ";str+=nexacro.__getHTMLAttr_ImageUrl(url);str+=" style='right:0px;top:"+_top+"px;";str+=nexacro.__getHTMLStyle_Size(img_width,_height);str+="clip:"+nexacro._makeImageClipInfo(_clip_top,img_width,_clip_bottom, -edgex+img_width)+";'/>";return str;};__pEdgeImageElement._createTopBottom_command=function(img_height,width,img_offset_x,edgex,edgey,url){var _left=( -img_offset_x);var _width=width+img_offset_x+img_offset_x;var _clip_left=edgex+img_offset_x;var _clip_right=width-edgex+img_offset_x;var str="";str+="<img alt='' ";str+=nexacro.__getHTMLAttr_ImageUrl(url);str+=" style='left:"+_left+"px;top:0px;";str+=nexacro.__getHTMLStyle_Size(_width,img_height);str+="clip:"+nexacro._makeImageClipInfo(0,_clip_right,edgey,_clip_left)+";'/>";str+="<img alt='' ";str+=nexacro.__getHTMLAttr_ImageUrl(url);str+=" style='left:"+_left+"px;bottom:0px;";str+=nexacro.__getHTMLStyle_Size(_width,img_height);str+="clip:"+nexacro._makeImageClipInfo( -edgey+img_height,_clip_right,img_height,_clip_left)+";'/>";return str;};__pEdgeImageElement._createCorners_command=function(edgex,edgey,url){var str="";var style_str=nexacro.__getHTMLStyle_Size(edgex,edgey);if(this.edgeImage!=this._edge_info){style_str+=nexacro.__getHTMLStyle_BKImageUrl(url);}str+="<div class='nexalefttop' style='"+style_str+"'></div>";str+="<div class='nexarighttop' style='"+style_str+"'></div>";str+="<div class='nexaleftbottom' style='"+style_str+"'></div>";str+="<div class='nexarightbottom' style='"+style_str+"'></div>";return str;};__pEdgeImageElement._create_inner_command=function(edge_type,width,height,img_url,img_width,img_height,edgex,edgey){if(edgex>img_width){edgex=img_width;}if(edgey>img_height){edgey=img_height;}var test_img_offset_x=img_width-edgex-edgex;var test_img_offset_y=img_height-edgey-edgey;var img_offset_x=0;var img_offset_y=0;var half_width=img_width/2;var half_height=img_height/2;if(edgex>half_width){if(test_img_offset_x<0){test_img_offset_x=test_img_offset_x* -1;}img_offset_x=Math.round(edgex*((width-edgex-edgex)/(test_img_offset_x))-width+edgex);}else{if(test_img_offset_x==0){img_offset_x=Math.round(edgex*((width-edgex-edgex+1)/(img_width-edgex-edgex+1))-edgex);}else{img_offset_x=Math.round(edgex*((width-edgex-edgex)/(img_width-edgex-edgex))-edgex);}}if(edgey>half_height){if(test_img_offset_y<0){test_img_offset_y=test_img_offset_y* -1;}img_offset_y=Math.round(edgey*((height-edgey-edgey)/(test_img_offset_y))-height+edgey);}else{if(test_img_offset_y==0){img_offset_y=Math.round(edgey*((height-edgey-edgey+1)/(img_height-edgey-edgey+1))-edgey);}else{img_offset_y=Math.round(edgey*((height-edgey-edgey)/(img_height-edgey-edgey))-edgey);}}var str="";str+="<img class='nexacenter' alt='' ";str+=nexacro.__getHTMLAttr_ImageUrl(img_url);str+=" style='";str+=nexacro.__getHTMLStyle_Pos(( -img_offset_x),( -img_offset_y));str+=nexacro.__getHTMLStyle_Size((width+img_offset_x+img_offset_x),(height+img_offset_y+img_offset_y));str+="clip:"+nexacro._makeImageClipInfo(edgey+img_offset_y,width-edgex+img_offset_x,height-edgey+img_offset_y,edgex+img_offset_x)+";'/>";if(edge_type==1){str+=this._createLeftRight_command(img_width,height,img_offset_y,edgex,edgey,img_url);}else if(edge_type==2){str+=this._createTopBottom_command(img_height,width,img_offset_x,edgex,edgey,img_url);}else if(edge_type==3){str+=this._createCorners_command(edgex,edgey,img_url);str+=this._createLeftRight_command(img_width,height,img_offset_y,edgex,edgey,img_url);str+=this._createTopBottom_command(img_height,width,img_offset_x,edgex,edgey,img_url);}return str;};__pEdgeImageElement._updateURL=function(handle,url){var url2="url("+url+")";var node=handle.firstChild;while(node){if(node.tagName.toLowerCase()=="img"){node.src=url;}else{node.style.backgroundImage=url2;}node=node.nextSibling;}};__pEdgeImageElement._on_notify_imgsize=function(img_url,img_width,img_height){if(this._img_sizereq){if(!(img_width&&img_height)){return;}if(img_url!=this.url){return;}var edge_type=this._edge_type;this._img_sizereq=false;this._img_width=img_width;this._img_height=img_height;if(edge_type>=0){this._inner_command=this._create_inner_command(edge_type,this.width,this.height,img_url,img_width,img_height,this.edgex,this.edgey);this._applied_edge_type=edge_type;var handle=this.handle;if(handle){handle.innerHTML=this._inner_command;}}}};}else if(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>=10)){nexacro._EdgeImageElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};__pEdgeImageElement=nexacro._createPrototype(nexacro.Element,nexacro._EdgeImageElement);nexacro._EdgeImageElement.prototype=__pEdgeImageElement;__pEdgeImageElement._type_name="_EdgeImageElement";__pEdgeImageElement.edgeImage=null;__pEdgeImageElement._is_nc_element=true;__pEdgeImageElement.create=function(_doc){var edgeProp=this.edgeImage;var edgeCss=this._edge_info;var bEdgeProp=(edgeProp&&edgeProp.value!="none");var bEdgeCss=(edgeCss&&edgeCss.value!="none");var owner_elem=this.parent_elem;if(owner_elem.handle&&!this.handle&&(bEdgeProp||bEdgeCss)){this.owner_elem=owner_elem;_doc=_doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");this.handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexaedge"));nexacro.__setDOMStyle_EdgeObject(handle.style,edgeProp?edgeProp:edgeCss);if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11){nexacro.__setDOMStyle_Direction("ltr");}var _parent_handle=owner_elem.handle;nexacro.__insertDOMNode(_parent_handle,handle,_parent_handle.firstChild);}};__pEdgeImageElement.setElementSize=function(width,height){this.width=width;this.height=height;};__pEdgeImageElement.setElementInfo=function(edgeImage,edge_info){if(this.edgeImage!=edgeImage||this._edge_info!=edge_info){this.edgeImage=edgeImage;this._edge_info=edge_info;var handle=this.handle;if(handle){nexacro.__setDOMStyle_EdgeObject(handle.style,edgeImage);}}};__pEdgeImageElement.createCommand=function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11){if(this.edgeImage){if(this.edgeImage.value!="none"){return "<div class='"+this._getElementNexaClassName("nexaedge")+"' style='"+nexacro.__getHTMLStyle_EdgeObject(this.edgeImage)+";direction:ltr;' ></div>";}}else if(this._edge_info){if(this._edge_info.value!="none"){return "<div class='"+this._getElementNexaClassName("nexaedge")+"' style='direction:ltr;'></div>";}}}else{if(this.edgeImage){if(this.edgeImage.value!="none"){return "<div class='"+this._getElementNexaClassName("nexaedge")+"' style='"+nexacro.__getHTMLStyle_EdgeObject(this.edgeImage)+"'></div>";}}else if(this._edge_info){if(this._edge_info.value!="none"){return "<div class='"+this._getElementNexaClassName("nexaedge")+"'></div>";}}}return "";};__pEdgeImageElement.attachHandle=function(win){if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;}}};__pEdgeImageElement.attach_handle_fromparent=function(_parent){if(_parent&&!this.handle){var handle=_parent.firstChild;if(handle){this.handle=handle;}}};__pEdgeImageElement.destroy=function(){var handle=this.handle;if(handle){var dest_handle=(this.owner_elem?this.owner_elem.handle:null);nexacro.__removeDOMNode(dest_handle,handle);this.owner_elem=null;this.handle=null;}this.parent=null;this.parent_elem=null;};}nexacro.TextBoxElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"text");};var _pTextBoxElement=nexacro._createPrototype(nexacro.Element,nexacro.TextBoxElement);nexacro.TextBoxElement.prototype=_pTextBoxElement;_pTextBoxElement._type_name="TextBoxElement";_pTextBoxElement.typeselector="nexacontentsbox";_pTextBoxElement.text="";_pTextBoxElement._use_decoration=false;_pTextBoxElement.padding=null;_pTextBoxElement.textAlign=null;_pTextBoxElement.verticalAlign=null;_pTextBoxElement.wordWrap=null;_pTextBoxElement._wordwrap_info=null;_pTextBoxElement._box_node=null;_pTextBoxElement._created=false;_pTextBoxElement.on_apply_imeSet=nexacro._emptyFn;_pTextBoxElement.on_apply_force_imeSet=nexacro._emptyFn;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=7){_pTextBoxElement._createTextElementHandle=function(_doc){var handle=_doc.createElement("table");handle.cellSpacing=0;handle.cellPadding=0;var _tbody_node=_doc.createElement("tbody");var _tr_node=_doc.createElement("tr");var box_node=_doc.createElement("td");handle.appendChild(_tbody_node);_tbody_node.appendChild(_tr_node);_tr_node.appendChild(box_node);this._box_node=box_node;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());return handle;};}else if(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>=8)){_pTextBoxElement._createTextElementHandle=function(_doc){var handle=_doc.createElement("div");this._box_node=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());return handle;};}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pTextBoxElement._getComputedStyle=function(prop,noflush){var handle=this._box_node;if(prop){if(handle){return handle.currentStyle[prop];}else if(!this.text){var text=this.text;this.setElementText(" ");handle=this._box_node;var val;if(handle){val=handle.currentStyle[prop];}this.setElementText(text);return val;}}};}else{_pTextBoxElement._getComputedStyle=function(prop,noflush){var style;var handle=this._box_node;if(prop){if(handle){style=window.getComputedStyle(handle,null);return style.getPropertyValue(prop);}else if(!this.text){var text=this.text;this.setElementText(" ");handle=this._box_node;var val;if(handle){style=window.getComputedStyle(handle,null);val=style.getPropertyValue(prop);}this.setElementText(text);return val;}}};}_pTextBoxElement._getComputedStyleAlign=function(noflush){var align={textAlign:"",verticalAlign:""};align.textAlign=this._getComputedStyle("text-align");align.verticalAlign=this._getComputedStyle("vertical-align");return align;};_pTextBoxElement._createElementHandle=function(owner_elem,_doc){if(this.text){_doc=_doc||owner_elem._getRootWindowHandle();var handle=this._createTextElementHandle(_doc);handle.id=this.name;handle._linked_element=this;this.handle=handle;var handle_style=handle.style;var box_node=this._box_node;var box_style=box_node.style;this._refreshCommonStyleProps(handle_style);if(this.textAlign){nexacro.__setDOMStyle_textAlign(box_style,this.textAlign,this.rtl);}if(this.verticalAlign){nexacro.__setDOMStyle_verticalAlign(box_style,this.verticalAlign);}if(this._use_decoration){nexacro.__setDOMNode_DecorateText(box_node,this.text);}else{nexacro.__setDOMNode_Text(box_node,this.text,this.wordWrap||this._wordwrap_info);}nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}};_pTextBoxElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();this._createElementHandle(owner_elem,win._doc);this._created=true;}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=7){_pTextBoxElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();if(this.text){var handle_style=this._getCommonStyleStr();var box_style="";if(this.textAlign){box_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.verticalAlign){box_style+=nexacro.__getHTMLStyle_verticalAlign(this.verticalAlign);}var classname=this._getElementClassName();var str="<table id='"+this.name+"' class='"+classname+"'";str+=(handle_style)?(" style='"+handle_style+"'>"):">";str+="<tbody><tr>";str+="<td class='"+classname+"'";str+=(box_style)?(" style='"+box_style+"'>"):">";if(this._use_decoration){str+=nexacro.__getHTMLAttr_DecorateText(this.text);}else{str+=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}str+="</td></tr></tbody></table>";return str;}}return "";};_pTextBoxElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;this._box_node=handle.firstChild.firstChild.firstChild;handle._linked_element=this;}this._created=true;}};}else{_pTextBoxElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();if(this.text){var handle_style=this._getCommonStyleStr();var box_style="";var pointereventsstyle="";if(this.textAlign){box_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.verticalAlign){box_style+=nexacro.__getHTMLStyle_verticalAlign(this.verticalAlign);}var classname=this._getElementClassName();var str="<div id='"+this.name+"' class='"+classname+"'";if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11&&this._use_decoration){pointereventsstyle="pointer-events:visiblePainted";}str+=(handle_style||box_style)?(" style='"+handle_style+box_style+pointereventsstyle+"'>"):">";if(this._use_decoration){str+=nexacro.__getHTMLAttr_DecorateText(this.text);}else{str+=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}str+="</div>";return str;}}return "";};_pTextBoxElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;this._box_node=handle;handle._linked_element=this;}this._created=true;}};}_pTextBoxElement.destroy=function(){this._destroyElementHandle();this.owner_elem=null;this._box_node=null;this.parent=null;this.parent_elem=null;this._created=false;};_pTextBoxElement.setElementPadding=function(){};_pTextBoxElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var box_node=this._box_node;if(box_node){nexacro.__setDOMStyle_textAlign(box_node.style,textalign,this.rtl);}}};_pTextBoxElement.setElementVerticalAlign=function(verticalalign){if(this.verticalAlign!=verticalalign){this.verticalAlign=verticalalign;var box_node=this._box_node;if(box_node){nexacro.__setDOMStyle_verticalAlign(box_node.style,verticalalign);}}};_pTextBoxElement.setElementText=function(text){if(this.text!=text||this._use_decoration==true){this.text=text;this._use_decoration=false;if(this._created){if(text){if(this.handle){nexacro.__setDOMNode_Text(this._box_node,text,this.wordWrap||this._wordwrap_info);}else{this._createElementHandle(this.owner_elem);}}else{if(this.handle){this._destroyElementHandle();}}}}};_pTextBoxElement.setElementDecorateText=function(text){if(this.text!=text||this._use_decoration==false){this.text=text;this._use_decoration=true;if(this._created){if(text){if(this.handle){nexacro.__setDOMNode_DecorateText(this._box_node,text);}else{this._createElementHandle(this.owner_elem);}}else{if(this.handle){this._destroyElementHandle();}}}}};_pTextBoxElement.setElementWordWrap=function(wordwrap){if(this.wordWrap!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this.wordWrap=wordwrap;var handle=this.handle;if(handle){nexacro.__setDOMNodeStyle_WordWrap(handle.style,wordwrap);if(this._created&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setDOMNode_Text(this._box_node,this.text,wordwrap);}}}};_pTextBoxElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this._wordwrap_info=wordwrap;var handle=this.handle;if(handle){if(!this.wordWrap&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setDOMNode_Text(this._box_node,this.text,wordwrap);}}}};nexacro.IconElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"icon");};var _pIconElement=nexacro._createPrototype(nexacro.Element,nexacro.IconElement);nexacro.IconElement.prototype=_pIconElement;_pIconElement._type_name="IconElement";_pIconElement.typeselector="nexacontentsbox";_pIconElement.padding=null;_pIconElement.textAlign=null;_pIconElement.verticalAlign=null;_pIconElement.icon="";_pIconElement._created=false;_pIconElement._createElementHandle=function(owner_elem,_doc){if(this.icon&&(this.icon.value!="none")){_doc=_doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");this.handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle.id=this.name;handle._linked_element=this;var handle_style=handle.style;this._refreshCommonStyleProps(handle_style);var textAlign=this.textAlign;if(textAlign){nexacro.__setDOMStyle_BKImageTextAlign(handle_style,textAlign);}if(this.verticalAlign){nexacro.__setDOMStyle_BKImageVerticalAlign(handle_style,this.verticalAlign);}nexacro.__setDOMStyle_BKImageUrl(handle_style,this.icon._sysurl);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}};_pIconElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();this._createElementHandle(owner_elem,win._doc);this._created=true;}};_pIconElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();if(this.icon&&(this.icon.value!="none")){var handle_style=this._getCommonStyleStr();var str;handle_style+=nexacro.__getHTMLStyle_BKImageUrl(this.icon._sysurl);var classname=this._getElementClassName();str="<div id='"+this.name+"' class='"+classname+"'";str+=(handle_style)?(" style='"+handle_style+"'>"):">";str+="</div>";return str;}}return "";};_pIconElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;handle._linked_element=this;}this._created=true;}};_pIconElement.destroy=function(){this._destroyElementHandle();this.owner_elem=null;this.parent=null;this.parent_elem=null;this._created=false;};_pIconElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var handle=this.handle;if(handle){if(textalign){nexacro.__setDOMStyle_BKImageTextAlign(handle.style,textalign);}else{nexacro.__clearDOMStyle_BKImageTextAlign(handle.style);}}}};_pIconElement.setElementVerticalAlign=function(verticalalign){if(this.verticalAlign!=verticalalign){this.verticalAlign=verticalalign;var handle=this.handle;if(handle){if(verticalalign){nexacro.__setDOMStyle_BKImageVerticalAlign(handle.style,verticalalign);}else{nexacro.__clearDOMStyle_BKImageVerticalAlign(handle.style);}}}};_pIconElement.setElementIcon=function(icon){if(this.icon!=icon){this.icon=icon;if(this._created){if(icon&&icon.value!="none"){var handle=this.handle;if(handle){var url=icon._sysurl;nexacro.__setDOMStyle_BKImageUrl(handle.style,url);}else{this._createElementHandle(this.owner_elem);}}else{if(this.handle){this._destroyElementHandle();}}}}};nexacro.IconTextElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"contents");};var _pIconTextElement=nexacro._createPrototype(nexacro.Element,nexacro.IconTextElement);nexacro.IconTextElement.prototype=_pIconTextElement;_pIconTextElement._type_name="IconTextElement";_pIconTextElement.typeselector="nexacontentsbox";_pIconTextElement.text="";_pIconTextElement.icon=null;_pIconTextElement.iconPos="";_pIconTextElement.textAlign=null;_pIconTextElement.verticalAlign=null;_pIconTextElement.textwidth=0;_pIconTextElement.wordWrap=null;_pIconTextElement._wordwrap_info=null;_pIconTextElement._contents_type=0;_pIconTextElement._box_node=null;_pIconTextElement._icon_node=null;_pIconTextElement._text_node=null;_pIconTextElement._created=false;_pIconTextElement._use_decoration=false;_pIconTextElement._use_newline=true;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=7){_pIconTextElement._createBoxElementHandle=function(_doc,_type){var handle;if(_type==1||_type==3){handle=_doc.createElement("table");handle.cellSpacing=0;handle.cellPadding=0;var _tbody_node=_doc.createElement("tbody");var _tr_node=_doc.createElement("tr");var _box_node=_doc.createElement("td");handle.appendChild(_tbody_node);_tbody_node.appendChild(_tr_node);_tr_node.appendChild(_box_node);this._box_node=_box_node;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());return handle;}else if(_type==2){handle=_doc.createElement("div");this._box_node=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());return handle;}return null;};}else if(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>=8)){_pIconTextElement._createBoxElementHandle=function(_doc,_type){var classname=this._getElementClassName();if(_type==1||_type==2||_type==3){var handle=_doc.createElement("div");this._box_node=handle;nexacro.__setDOMNode_ClassName(handle,classname);return handle;}return null;};}_pIconTextElement._createElementHandle=function(owner_elem,_doc){var _type=this._contents_type;if(_type){_doc=_doc||owner_elem._getRootWindowHandle();var handle=this.handle;var newhandle;if(!handle){handle=this._createBoxElementHandle(_doc,_type);handle.id=this.name;handle._linked_element=this;newhandle=this.handle=handle;}var box_node=this._box_node;var text_node=null,icon_node=null;if(box_node.getElementsByTagName("img").length){text_node=this._text_node;icon_node=this._icon_node;}else{this._text_node=this._icon_node=null;}if(_type==3){if(this._use_decoration){nexacro.__setDOMNode_DecorateText(box_node,"");}else{nexacro.__setDOMNode_Text(box_node,"");}if(!this._icon_node){icon_node=_doc.createElement("img");nexacro.__setDOMNode_ClassName(icon_node,this._getElementNexaClassName("nexaiconitem"));this._icon_node=icon_node;text_node=_doc.createElement("div");nexacro.__setDOMNode_ClassName(text_node,this._getElementNexaClassName("nexatextitem"));if(this.iconPos=="left"||this.iconPos=="right"){nexacro.__setDOMStyle_Display(text_node.style,"inline-block");}this._text_node=text_node;if(this.iconPos=="left"||this.iconPos=="top"){nexacro.__appendDOMNode(box_node,icon_node);nexacro.__appendDOMNode(box_node,text_node);}else{nexacro.__appendDOMNode(box_node,text_node);nexacro.__appendDOMNode(box_node,icon_node);}}else{nexacro.__setDOMStyle_Display(this._icon_node,"");nexacro.__setDOMStyle_Display(this._text_node,"");}}else{if(this._icon_node){nexacro.__setDOMStyle_Display(this._icon_node,"none");nexacro.__setDOMStyle_Display(this._text_node,"none");}}var handle_style=handle.style;var box_style=box_node.style;this._refreshCommonStyleProps(handle_style);if(_type==1||_type==3){if(this.textAlign){nexacro.__setDOMStyle_textAlign(box_style,this.textAlign,this.rtl);}if(this.verticalAlign){nexacro.__setDOMStyle_verticalAlign(box_style,this.verticalAlign);}}else if(_type==2){var textAlign=this.textAlign;if(textAlign){nexacro.__setDOMStyle_BKImageTextAlign(box_style,textAlign);}if(this.verticalAlign){nexacro.__setDOMStyle_BKImageVerticalAlign(box_style,this.verticalAlign);}}if(_type==1){if(this._use_decoration){nexacro.__setDOMNode_DecorateText(box_node,this.text);}else{nexacro.__setDOMNode_Text(box_node,this.text,this.wordWrap||this._wordwrap_info);}}else if(_type==2){nexacro.__setDOMStyle_BKImageUrl(box_style,this.icon._sysurl);}else if(_type==3){if(text_node&&this.textPadding){nexacro.__setDOMStyle_PaddingObject(text_node.style,this.textPadding,this.rtl);}if(this._use_decoration){nexacro.__setDOMNode_DecorateText(text_node,this.text);}else{nexacro.__setDOMNode_Text(text_node,this.text,this.wordWrap||this._wordwrap_info);}nexacro.__setDOMNode_ImageUrl(icon_node,this.icon._sysurl);}if(newhandle){nexacro.__appendDOMNode(owner_elem.dest_handle,newhandle);}}};_pIconTextElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();this._createElementHandle(owner_elem,win._doc);this._created=true;}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=7){_pIconTextElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();var _type=this._contents_type;if(_type){var handle_style=this._getCommonStyleStr();var box_style="";var text_style="";var value_str="";if(_type==1||_type==3){if(this.textAlign){box_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.verticalAlign){box_style+=nexacro.__getHTMLStyle_verticalAlign(this.verticalAlign);}}else if(_type==2){var textAlign=this.textAlign;if(textAlign||this.verticalAlign){box_style+=nexacro.__getHTMLStyle_BKImageAlign(textAlign,this.verticalAlign);}}if(_type==1){if(this._use_decoration){value_str=nexacro.__getHTMLAttr_DecorateText(this.text);}else{value_str=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}}else if(_type==2){box_style+=nexacro.__getHTMLStyle_BKImageUrl(this.icon._sysurl);}else if(_type==3){if(this.textPadding){text_style+=nexacro.__getHTMLStyle_PaddingObject(this.textPadding,this.rtl);}if(this.iconPos=="left"||this.iconPos=="right"){text_style+=nexacro.__getHTMLStyle_Display("inline-block");}if(this._use_decoration){value_str=nexacro.__getHTMLAttr_DecorateText(this.text);}else{value_str=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}}var classname=this._getElementClassName();var str="";if(_type==1){str="<table id='"+this.name+"' class='"+classname+"'";str+=handle_style?(" style='"+handle_style+"'>"):">";str+="<tbody><tr><td";str+=(box_style)?(" style='"+box_style+"'>"):">";str+=value_str;str+="</td></tr></tbody></table>";}else if(_type==2){str="<div id='"+this.name+"' class='"+classname+"'";str+=(handle_style||box_style)?(" style='"+handle_style+box_style+"'>"):">";}else if(_type==3){str="<table id='"+this.name+"' class='"+classname+"'";str+=handle_style?(" style='"+handle_style+"'>"):">";str+="<tbody><tr><td";str+=(box_style)?(" style='"+box_style+"'>"):">";if(this.iconPos=="left"||this.iconPos=="top"){str+="<img class='"+this._getElementNexaClassName("nexaiconitem")+"' src='"+this.icon._sysurl+"'/>";str+="<div class='"+this._getElementNexaClassName("nexatextitem")+"'";if(text_style){str+=" style='"+text_style+"'";}str+=">"+value_str+"</div>";}else{str+="<div class='"+this._getElementNexaClassName("nexatextitem")+"'";if(text_style){str+=" style='"+text_style+"'";}str+=">"+value_str+"</div>";str+="<img class='"+this._getElementNexaClassName("nexaiconitem")+"' src='"+this.icon._sysurl+"'/>";}str+="</td></tr></tbody></table>";}return str;}}return "";};_pIconTextElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;handle._linked_element=this;var _type=this._contents_type,box_node;if(_type==1){box_node=handle.firstChild.firstChild.firstChild;this._box_node=box_node;}else if(this._contents_type==3){box_node=handle.firstChild.firstChild.firstChild;this._box_node=box_node;if(this.iconPos=="left"||this.iconPos=="top"){this._icon_node=box_node.firstChild;this._text_node=box_node.lastChild;}else{this._text_node=box_node.firstChild;this._icon_node=box_node.lastChild;}}}this._created=true;}};}else{_pIconTextElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();var _type=this._contents_type;if(_type){var handle_style=this._getCommonStyleStr();var box_style="";var text_style="";var value_str="";if(_type==1||_type==3){if(this.textAlign){box_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.verticalAlign){box_style+=nexacro.__getHTMLStyle_verticalAlign(this.verticalAlign);}}else if(_type==2){var textAlign=this.textAlign;if(textAlign||this.verticalAlign){box_style+=nexacro.__getHTMLStyle_BKImageAlign(textAlign,this.verticalAlign);}}if(_type==1){if(this._use_decoration){value_str=nexacro.__getHTMLAttr_DecorateText(this.text);}else{value_str=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}}else if(_type==2){box_style+=nexacro.__getHTMLStyle_BKImageUrl(this.icon._sysurl);}else if(_type==3){if(this.textwidth){text_style+=nexacro.__getHTMLStyle_TextWidth(parseInt(this.textwidth));}if(this.textPadding){text_style+=nexacro.__getHTMLStyle_PaddingObject(this.textPadding,this.rtl);}if(this.iconPos=="left"||this.iconPos=="right"){text_style+=nexacro.__getHTMLStyle_Display("inline-block");}if(this._use_decoration){value_str=nexacro.__getHTMLAttr_DecorateText(this.text);}else{value_str=nexacro.__getHTMLAttr_Text(this.text,this.wordWrap||this._wordwrap_info);}}var aria_hidden="";if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){aria_hidden=" aria-hidden = 'true' ";}var classname=this._getElementClassName(),str="";if(_type==1){str="<div id='"+this.name+"' class='"+classname+"'";str+=aria_hidden;str+=(handle_style||box_style)?(" style='"+handle_style+box_style+"'>"):">";str+=value_str+"</div>";}else if(_type==2){str="<div id='"+this.name+"' class='"+classname+"'";str+=aria_hidden;str+=(handle_style||box_style)?(" style='"+handle_style+box_style+"'>"):">";str+="</div>";}else if(_type==3){str="<div id='"+this.name+"' class='"+classname+"'";str+=aria_hidden;str+=(handle_style||box_style)?(" style='"+handle_style+box_style+"'>"):">";if(this.iconPos=="left"||this.iconPos=="top"){str+="<img class='"+this._getElementNexaClassName("nexaiconitem")+"' src='"+this.icon._sysurl+"'/>";str+="<div class='"+this._getElementNexaClassName("nexatextitem")+"'";str+=(text_style)?(" style='"+text_style+"'>"):">";str+=value_str+"</div>";}else{str+="<div class='"+this._getElementNexaClassName("nexatextitem")+"'";str+=(text_style)?(" style='"+text_style+"'>"):">";str+=value_str+"</div>";str+="<img class='"+this._getElementNexaClassName("nexaiconitem")+"' src='"+this.icon._sysurl+"'/>";}str+="</div>";}return str;}}return "";};_pIconTextElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;handle._linked_element=this;this._box_node=handle;if(this._contents_type==3){var box_node=handle;if(this.iconPos=="left"||this.iconPos=="top"){this._icon_node=box_node.firstChild;this._text_node=box_node.lastChild;}else{this._text_node=box_node.firstChild;this._icon_node=box_node.lastChild;}}}this._created=true;}};}_pIconTextElement.destroy=function(){this._destroyElementHandle();this.owner_elem=null;this._box_node=null;this._text_node=null;this._icon_node=null;this.parent=null;this.parent_elem=null;this._created=false;};_pIconTextElement.setElementPadding=function(padding){if(this.padding!=padding){this.padding=padding;var handle=this.handle;if(handle){nexacro.__setDOMStyle_PaddingObject(handle.style,padding,this.rtl);}}};_pIconTextElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var box_node=this._box_node;if(box_node){var _type=this._contents_type;if(_type==1||_type==3){nexacro.__setDOMStyle_textAlign(box_node.style,textalign,this.rtl);}else{if(textalign){nexacro.__setDOMStyle_BKImageTextAlign(box_node.style,textalign);}else{nexacro.__clearDOMStyle_BKImageTextAlign(box_node.style);}}}}};_pIconTextElement.setElementVerticalAlign=function(verticalalign){if(this.verticalAlign!=verticalalign){this.verticalAlign=verticalalign;var box_node=this._box_node;if(box_node){var _type=this._contents_type;if(_type!=2){nexacro.__setDOMStyle_verticalAlign(box_node.style,verticalalign);}else{if(verticalalign){nexacro.__setDOMStyle_BKImageVerticalAlign(box_node.style,verticalalign);}else{nexacro.__clearDOMStyle_BKImageVerticalAlign(box_node.style);}}}}};_pIconTextElement.setElementTextPadding=function(textPadding){if(this.textPadding!=textPadding){this.textPadding=textPadding;var text_node=this._text_node;if(text_node){nexacro.__setDOMStyle_PaddingObject(text_node.style,textPadding,this.rtl);}}};_pIconTextElement.setElementTextWidth=function(textwidth){if(this.textwidth!=textwidth){this.textwidth=textwidth;var text_node=this._text_node;if(text_node){var _type=this._contents_type;if(_type==3){var _textwidth=parseInt(textwidth);if(_textwidth>0){nexacro.__setDOMStyle_TextWidth(text_node.style,_textwidth);}else{nexacro.__clearDOMStyle_TextWidth(text_node.style);}}}}};_pIconTextElement.setElementText=function(text){if(this.text!==text||this._use_decoration==true){this.text=text;this._use_decoration=false;var _type=0;var icon_url=this.icon?(this.icon.value=="none"?undefined:this.icon._sysurl):undefined;if(icon_url&&text){_type=3;}else if(icon_url){_type=2;}else if(text){_type=1;}if(this._contents_type!=_type){this._contents_type=_type;if(this._created){this._destroyElementHandle();this._createElementHandle(this.owner_elem);}}else{if(this._created){if(_type==1){var box_node=this._box_node;if(box_node){nexacro.__setDOMNode_Text(box_node,text,this.wordWrap||this._wordwrap_info);}}else if(_type==3){var text_node=this._text_node;if(text_node){nexacro.__setDOMNode_Text(text_node,text,this.wordWrap||this._wordwrap_info);}}}}}};_pIconTextElement.setElementDecorateText=function(text){if(this.text!=text||this._use_decoration==false){this.text=text;this._use_decoration=true;var _type=0;var icon_url=this.icon?(this.icon.value=="none"?undefined:this.icon._sysurl):undefined;if(icon_url&&text){_type=3;}else if(icon_url){_type=2;}else if(text){_type=1;}if(this._contents_type!=_type){this._contents_type=_type;if(this._created){this._destroyElementHandle();this._createElementHandle(this.owner_elem);}}else{if(this._created){if(_type==1){var box_node=this._box_node;nexacro.__setDOMNode_DecorateText(box_node,text);}else if(_type==3){var text_node=this._text_node;nexacro.__setDOMNode_DecorateText(text_node,text);}}}}};_pIconTextElement.setElementWordWrap=function(wordwrap){if(this.wordWrap!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this.wordWrap=wordwrap;var handle=this.handle;if(handle){nexacro.__setDOMNodeStyle_WordWrap(handle.style,wordwrap);if(this._created&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){var _type=this._contents_type;if(_type==1){var box_node=this._box_node;if(box_node){nexacro.__setDOMNode_Text(box_node,this.text,wordwrap);}}else if(_type==3){var text_node=this._text_node;if(text_node){nexacro.__setDOMNode_Text(text_node,this.text,wordwrap);}}}}}};_pIconTextElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this._wordwrap_info=wordwrap;var handle=this.handle;if(handle){if(!this.wordWrap&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){var _type=this._contents_type;if(_type==1){var box_node=this._box_node;if(box_node){nexacro.__setDOMNode_Text(box_node,this.text,wordwrap);}}else if(_type==3){var text_node=this._text_node;if(text_node){nexacro.__setDOMNode_Text(text_node,this.text,wordwrap);}}}}}};_pIconTextElement.setElementIcon=function(icon){if(this.icon!=icon){this.icon=icon;var icon_url=icon?(icon.value=="none"?undefined:icon._sysurl):undefined;var _type=0;if(icon_url&&this.text){_type=3;}else if(icon_url){_type=2;}else if(this.text){_type=1;}if(this._contents_type!=_type){this._contents_type=_type;if(this._created){this._createElementHandle(this.owner_elem);}}else{if(this._created){if(_type==2){var box_node=this._box_node;nexacro.__setDOMStyle_BKImageUrl(box_node.style,icon_url);}else if(_type==3){var icon_node=this._icon_node;nexacro.__setDOMNode_ImageUrl(icon_node,icon_url);}}}}};_pIconTextElement.setElementIconPos=function(icon_pos){var pos=["left","right","top","bottom"];if(pos.indexOf(icon_pos)<0){icon_pos="left";}if(this.iconPos!=icon_pos){var oldpos=this.iconPos;this.iconPos=icon_pos;if(this._created&&this._contents_type==3){var text_node=this._text_node;var icon_node=this._icon_node;var box_node=this._box_node;if(oldpos){if(icon_pos=="left"||icon_pos=="right"){if(oldpos=="top"||oldpos=="bottom"){nexacro.__setDOMStyle_Display(text_node.style,"inline-block");}}else{if(oldpos=="left"||oldpos=="right"){nexacro.__setDOMStyle_Display(text_node.style,"block");}}if(icon_pos=="left"||icon_pos=="top"){if(oldpos=="right"||oldpos=="bottom"){nexacro.__appendDOMNode(box_node,text_node);}}else{if(oldpos=="left"||oldpos=="top"){nexacro.__appendDOMNode(box_node,icon_node);}}}else{switch(icon_pos){case "left":nexacro.__setDOMStyle_Display(text_node.style,"inline-block");nexacro.__appendDOMNode(box_node,text_node);break;case "right":nexacro.__setDOMStyle_Display(text_node.style,"inline-block");break;case "top":nexacro.__appendDOMNode(box_node,text_node);break;}}}}};nexacro.ImageElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"image");};var _pImageElement=nexacro._createPrototype(nexacro.Element,nexacro.ImageElement);nexacro.ImageElement.prototype=_pImageElement;_pImageElement._type_name="ImageElement";_pImageElement.typeselector="nexaimagebox";_pImageElement.image=null;_pImageElement.padding=null;_pImageElement._created=false;_pImageElement._createElementHandle=function(owner_elem,_doc){if(this.image){_doc=_doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("img");if(handle){handle.id=this.name;handle._linked_element=this;this.handle=handle;nexacro.__setDOMNode_Alt(handle,this.parent_elem.accessibilitylabel?this.parent_elem.accessibilitylabel:this.parent_elem.linkedcontrol.id);var handle_style=handle.style;this._refreshCommonStyleProps(handle_style);nexacro.__setDOMNode_ImageUrl(handle,this.image._sysurl);nexacro.__setDOMStyle_Pos(handle.style,this.left,this.top);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}}};_pImageElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();this._createElementHandle(owner_elem,win._doc);this._created=true;}};_pImageElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();if(this.image){var handle_style=this._getCommonStyleStr();var str="<img id='"+this.name+"' class='"+this._getElementNexaClassName("nexaimagebox")+"'";str+=" src='"+this.image._sysurl+"'";str+=(handle_style)?(" style='"+handle_style+"'/>"):"/>";return str;}}return "";};_pImageElement.attachHandle=function(win){if(this.name&&!this._created){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;handle._linked_element=this;}this._created=true;}};_pImageElement.destroy=function(){this._destroyElementHandle();this.owner_elem=null;this.parent=null;this.parent_elem=null;this._created=false;};_pImageElement.setElementPadding=function(padding){if(this.padding!=padding){this.padding=padding;var handle=this.handle;if(handle){nexacro.__setDOMStyle_PaddingObject(handle.style,padding,this.rtl);}}};_pImageElement.setElementImage=function(image){if(this.image!=image){this.image=image;if(image){if(this.handle){nexacro.__setDOMNode_ImageUrl(this.handle,image._sysurl);}else if(this.owner_elem){this._createElementHandle(this.owner_elem);}}else{if(this.handle){this._destroyElementHandle();}}}_pImageElement.getImageCount=nexacro._emptyFn;_pImageElement.setImageIndex=nexacro._emptyFn;};nexacro.InputElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"input");this._composer=new nexacro._CompositionState();this._imelocale=new nexacro._ImeLocale();};var _pInputElement=nexacro._createPrototype(nexacro.Element,nexacro.InputElement);nexacro.InputElement.prototype=_pInputElement;_pInputElement._type_name="InputElement";_pInputElement.typeselector="nexainput";_pInputElement.textAlign=null;_pInputElement.padding=null;_pInputElement.caretcolor=null;_pInputElement.selectcolor=null;_pInputElement.selectbackground=null;_pInputElement.compositecolor=null;_pInputElement.enable=true;_pInputElement.useime="global";_pInputElement.imemode="auto";_pInputElement.readonly=false;_pInputElement.maxlength=0;_pInputElement.autoskip=false;_pInputElement.autoselect=false;_pInputElement.value=null;_pInputElement.defaultvalue="";_pInputElement.displaynulltext="";_pInputElement.displayinvalidtext=undefined;_pInputElement.tabindentsize=4;_pInputElement.usesoftkeyboard=true;_pInputElement.inputtype="text";_pInputElement._keypad_type="text";_pInputElement._is_focused=false;_pInputElement._is_sys_focused=false;_pInputElement._is_input_touchstart=false;_pInputElement._is_input_element=true;_pInputElement._is_invalid_value=false;_pInputElement._accept_focus_process=true;_pInputElement._accept_blur_process=true;_pInputElement._accept_keypadrestore_process=false;_pInputElement._zerolength_value=undefined;_pInputElement._input_text="";_pInputElement._disabled_color=null;_pInputElement._imedisable=false;_pInputElement._checkmax_editing_only=true;_pInputElement._last_selection_range=null;_pInputElement._BeforeinputState={};_pInputElement._BeforeinputState.PASS=0;_pInputElement._BeforeinputState.CANCEL=1;_pInputElement._BeforeinputState.CONVERT_UPPER=2;_pInputElement._BeforeinputState.CONVERT_LOWER=3;_pInputElement._BeforeinputState.REPLACE=4;_pInputElement._BeforeinputState.MAXLENGTH=5;_pInputElement._beforeinput_result_data=null;_pInputElement._beforeinput_result_pos=null;_pInputElement._beforeinput_result_insert_data=null;_pInputElement._use_propertychange_evt=false;_pInputElement._delay_pos=null;_pInputElement._forced_fire_event_list=[];_pInputElement._paste_caret_pos=null;_pInputElement._status_csspseudoclass={AUTOFILL:0};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){_pInputElement.MOUSE_LBUTTON=1;_pInputElement.MOUSE_MBUTTON=4;_pInputElement.MOUSE_RBUTTON=2;}else{_pInputElement.MOUSE_LBUTTON=0;_pInputElement.MOUSE_MBUTTON=1;_pInputElement.MOUSE_RBUTTON=2;}_pInputElement._use_html_maxlength=false;_pInputElement._skip_sys_keyinput=false;_pInputElement._skip_check_imelocale=false;_pInputElement._force_focus=false;if(nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>=60){_pInputElement._use_event_beforeinput=true;}else{_pInputElement._use_event_beforeinput=false;}if(window.AnimationEvent){_pInputElement._use_event_animation=true;}else{_pInputElement._use_event_animation=false;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<10){_pInputElement._evtorder_compositionend_is_last=true;}else{_pInputElement._evtorder_compositionend_is_last=false;}if((nexacro._Browser=="IE"&&(nexacro._BrowserType=="Edge"||nexacro._BrowserVersion==9))||nexacro._OS=="iOS"){_pInputElement._evtfire_oninput_after_compositionend=false;}else{_pInputElement._evtfire_oninput_after_compositionend=true;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_pInputElement._evtfire_oninput_only_when_cut=true;}else{_pInputElement._evtfire_oninput_only_when_cut=false;}if((nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari")||(nexacro._OS=="Mac OS"&&nexacro._Browser=="Safari")){_pInputElement._apple_default_browser=true;}else{_pInputElement._apple_default_browser=false;}if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion<=34){_pInputElement._evtfire_oninput_only_when_backspacekey=true;}else{_pInputElement._evtfire_oninput_only_when_backspacekey=false;}if(nexacro._Browser=="IE"){if(nexacro._BrowserVersion>9||nexacro._BrowserType=="Edge"){_pInputElement._use_scroll_referesh=true;}else{_pInputElement._use_scroll_referesh=false;}}else if(nexacro._OS=="iOS"){_pInputElement._use_scroll_referesh=true;}else{_pInputElement._use_scroll_referesh=false;}if(nexacro._OS=="iOS"&&(nexacro._SystemType=="iphone"||nexacro._SystemType=="ipad")){_pInputElement._NUMERIC_KEYPAD_TYPE="number";}else if(nexacro._OS=="iOS"||nexacro._OS=="Android"||nexacro._OS=="Windows Phone"){_pInputElement._NUMERIC_KEYPAD_TYPE="tel";}else{_pInputElement._NUMERIC_KEYPAD_TYPE="text";}if(nexacro._OS=="Android"){_pInputElement._INDICATOR_WIDTH=32;}else{_pInputElement._INDICATOR_WIDTH=0;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==8){_pInputElement._check_imetype_composing_status=true;}else{_pInputElement._check_imetype_composing_status=false;}if(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>8)){_pInputElement._use_node_selection_range=true;}else{_pInputElement._use_node_selection_range=false;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pInputElement._createElementHandle=function(owner_elem,_doc){owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;var handle_style=this._getCommonStyleStr();if(!this.enable){handle_style+=nexacro.__getHTMLStyle_Enable(this.enable,this._disabled_color);}if(this.textAlign){handle_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.padding){handle_style+=nexacro.__getHTMLStyle_PaddingObject(this.padding,this.rtl);}if(this.imemode){handle_style+=nexacro.__getHTMLStyle_ImeMode(this.imemode);}handle_style+=this._getElementDefaultLineHeight();var handle_attr=nexacro.__getHTMLAttr_Enable(this.enable)+nexacro.__getHTMLAttr_ReadOnly(this.readonly);if(this.maxlength>0&&this._use_html_maxlength){handle_attr+=nexacro.__getHTMLAttr_MaxLength(this.maxlength);}var str="<input id='"+this.name+"' class='"+this._getElementClassName()+"' ";str+=(handle_style)?(" style='"+handle_style+"' "):"";if(!nexacro._isNull(this.value)||this.value===""){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){str+="value ='"+nexacro._encodeXml(this.value)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType("text");}else{str+="value ='"+nexacro._encodeXml(this.value)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType(this.inputtype);}}else if(this.displaynulltext){str+="value ='"+nexacro._encodeXml(this.displaynulltext)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType("text");}else{str+="value ='"+nexacro._encodeXml(this.defaultvalue)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType(this.inputtype);}str+=handle_attr?(" "+handle_attr):"";str+=">";owner_elem.handle.innerHTML=str;var input_handle=owner_elem.handle.firstChild;this.handle=input_handle;this.handle._linked_element=this;}};}else{_pInputElement._createElementHandle=function(owner_elem,_doc){var handle=this.handle=_doc.createElement("input");var handle_style=handle.style;handle.id=this.name;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle._linked_element=this;this._refreshCommonStyleProps(handle_style);this._setElementDefaultLineHeight();if(this.textAlign){nexacro.__setDOMStyle_textAlign(handle_style,this.textAlign,this.rtl);}if(this.padding){nexacro.__setDOMStyle_PaddingObject(handle_style,this.padding,this.rtl);}if(!this.enable){nexacro.__setDOMNode_Enable(handle,false);}if(this.readonly){nexacro.__setDOMNode_ReadOnly(handle,true);}if(!nexacro._isNull(this.value)||this.value===""){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){nexacro.__setDOMNode_Value(handle,this.displayinvalidtext);nexacro.__setDOMNode_Type(handle,"text");}else{nexacro.__setDOMNode_Value(handle,this.value);nexacro.__setDOMNode_Type(handle,this.inputtype);}}else if(this.displaynulltext){nexacro.__setDOMNode_Value(handle,this.displaynulltext);nexacro.__setDOMNode_Type(handle,"text");}else if(this.inputtype){nexacro.__setDOMNode_Type(handle,this.inputtype);}if(this.imemode){nexacro.__setDOMNode_ImeMode(handle,this.imemode);}if(this.maxlength>0&&this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(handle,this.maxlength);}if(nexacro._enableaccessibility){nexacro.__setDOMAccessibility_LabelBy(handle,owner_elem.name);if(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5){nexacro.__setDOMAccessibility_Role(handle,owner_elem.name);}}nexacro.__setDOMNode_Autocomplete(handle,"off");if(this.handle){nexacro.__appendDOMNode(owner_elem.dest_handle,this.handle);}};}_pInputElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();this._createElementHandle(owner_elem,win._doc);this._bindSysEvent();this._created=true;}};_pInputElement._destroyInputHandle=function(){if(this.handle){var dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);this.handle._linked_element=null;nexacro.__removeDOMNode(dest_handle,this.handle);this.handle=null;}};_pInputElement.destroy=function(){if(this._restore_scrollpos_timer>0){clearTimeout(this._restore_scrollpos_timer);this._restore_scrollpos_timer=0;}this._unbindSysEvent();this._destroyInputHandle();return nexacro.Element.prototype.destroy.call(this);};_pInputElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();var handle_style=this._getCommonStyleStr();if(!this.enable){handle_style+=nexacro.__getHTMLStyle_Enable(this.enable,this._disabled_color);}if(this.textAlign){handle_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.padding){handle_style+=nexacro.__getHTMLStyle_PaddingObject(this.padding,this.rtl);}if(this.imemode){if(this._imedisable){handle_style+=nexacro.__getHTMLStyle_ImeMode("disabled");}else{handle_style+=nexacro.__getHTMLStyle_ImeMode(this.imemode);}}handle_style+=this._getElementDefaultLineHeight();var handle_attr=nexacro.__getHTMLAttr_Enable(this.enable)+nexacro.__getHTMLAttr_ReadOnly(this.readonly);if(this.maxlength>0&&this._use_html_maxlength){handle_attr+=nexacro.__getHTMLAttr_MaxLength(this.maxlength);}var str="<input id='"+this.name+"' class='"+this._getElementClassName()+"' ";str+=(handle_style)?(" style='"+handle_style+"' "):"";if(!nexacro._isNull(this.value)||this.value===""){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){str+="value ='"+nexacro._encodeXml(this.displayinvalidtext)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType("text");}else{str+="value ='"+nexacro._encodeXml(this.value)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType(this.inputtype);}}else if(this.displaynulltext){str+="value ='"+nexacro._encodeXml(this.displaynulltext)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType("text");}else{str+="value ='"+nexacro._encodeXml(this.defaultvalue)+"' ";handle_attr+=nexacro.__getHTMLAttr_InputType(this.inputtype);}if(nexacro._enableaccessibility){str+=nexacro.__getDOMAccessibilityStr_LabelBy(owner_elem.name);if(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5){str+=nexacro.__getDOMAccessibilityStr_Role(owner_elem.accessibilityrole);}}str+=nexacro.__getHTMLAttr_Autocomplete("off");str+=handle_attr?(" "+handle_attr):"";str+=">";return str;}return "";};_pInputElement.attachHandle=function(win){if(this.name&&!this.handle){var input_handle=win._doc.getElementById(this.name);this.handle=input_handle;this.handle._linked_element=this;this._bindSysEvent();}};if(nexacro._OS=="Android"){_pInputElement._getCommonStyleStr=function(){var str="";var bPositionRtl=this._isParentRtl();if(!this.visible){str+=nexacro.__getHTMLStyle_Visible(false);}if(this.display=="none"){str+=nexacro.__getHTMLStyle_Display("none");}if(this.left>=0||this.top>=0){str+=nexacro.__getHTMLStyle_Pos(this.left,this.top,bPositionRtl);}if(this.width>=0&&this.height>=0){str+=nexacro.__getHTMLStyle_Size(this.inputtype=="date"?this.width+this._INDICATOR_WIDTH:this.width,this.height);}if(this.color){str+=nexacro.__getHTMLStyle_ColorObject(this.color);}if(this.font){str+=nexacro.__getHTMLStyle_FontObject(this.font);}if(this.wordSpacing){str+=nexacro.__getHTMLStyle_WordSpacingObject(this.wordSpacing);}if(this.letterSpacing){str+=nexacro.__getHTMLStyle_LetterSpacingObject(this.letterSpacing);}if(this.textDecoration){str+=nexacro.__getHTMLStyle_TextDecorationObject(this.textDecoration);}if(this.rtl!=undefined){str+=nexacro.__getHTMLStyle_Direction(this.rtl);}if(this.wordWrap){str+=nexacro.__getHTMLStyle_WordWrap(this.wordWrap);}return str;};_pInputElement._refreshCommonStyleProps=function(handle_style){var bPositionRtl=this._isParentRtl();if(!this.visible){nexacro.__setDOMStyle_Visible(handle_style,false);}if(this.display=="none"){nexacro.__setDOMStyle_Display(handle_style,"none");}{if(this._use_translate_move){nexacro.__setDOMStyle_Pos(handle_style,0,0,bPositionRtl);nexacro.__setDOMStyle_Translate(handle_style,this.left,this.top,this.rtl);}else{nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,bPositionRtl);}}var linked_control=this.linkedcontrol;if(!(linked_control&&linked_control._is_frame&&(linked_control._is_main&&!nexacro._allow_default_pinchzoom))){if(this.width&&this.height){nexacro.__setDOMStyle_Size(handle_style,this.inputtype=="date"?this.width+this._INDICATOR_WIDTH:this.width,this.height);}}if(this.color){nexacro.__setDOMStyle_ColorObject(handle_style,this.color);}if(this.font){nexacro.__setDOMStyle_FontObject(handle_style,this.font);}if(this.wordSpacing){nexacro.__setDOMStyle_WordSpacingObject(handle_style,this.wordSpacing);}if(this.letterSpacing){nexacro.__setDOMStyle_LetterSpacingObject(handle_style,this.letterSpacing);}if(this.textDecoration){nexacro.__setDOMStyle_TextDecorationObject(handle_style,this.textDecoration);}if(this.rtl!==undefined){nexacro.__setDOMStyle_Direction(handle_style,this.rtl);}if(this.wordWrap){nexacro.__setDOMStyle_WordWrap(handle_style,this.wordWrap);}};}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<10){_pInputElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){if(width&&height){nexacro.__setDOMStyle_Size(handle.style,width-1,height);setTimeout(function(){nexacro.__setDOMStyle_Size(handle.style,width,height);},0);}else{nexacro.__clearDOMStyle_Size(handle.style);}this._setElementDefaultLineHeight();}}};}else if(nexacro._OS=="Android"){_pInputElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}if(this.inputtype=="date"){width+=this._INDICATOR_WIDTH;}var handle=this.handle;if(handle){if(width&&height){nexacro.__setDOMStyle_Size(handle.style,width,height);}else{nexacro.__clearDOMStyle_Size(handle.style);}this._setElementDefaultLineHeight();}}};}else{_pInputElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){if(width&&height){nexacro.__setDOMStyle_Size(handle.style,width,height);}else{nexacro.__clearDOMStyle_Size(handle.style);}this._setElementDefaultLineHeight();}}};}_pInputElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var handle=this.handle;if(handle){nexacro.__setDOMStyle_textAlign(handle.style,textalign,this.rtl);}}};_pInputElement.setElementPadding=function(padding){if(this.padding!=padding){this.padding=padding;var handle=this.handle;if(handle){nexacro.__setDOMStyle_PaddingObject(handle.style,padding,this.rtl);}}};_pInputElement.setElementCaretColor=function(color){if(this.caretcolor!=color){this.caretcolor=color;var input_handle=this.handle;if(input_handle){}}};_pInputElement.setElementSelectColor=function(color){this.selectcolor=color;};_pInputElement.setElementSelectBackgroundColor=function(color){this.selectbackground=color;};_pInputElement.setElementCompositeColor=function(color){this.compositecolor=color;};_pInputElement.setElementTabindentSize=function(indent){this.tabindentsize=indent;};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){_pInputElement._setElementDefaultLineHeight=function(){if(this.handle){nexacro.__setDOMStyle_LineHeightObject(this.handle.style,nexacro.CSSValueObject(this.height+"px"));}};_pInputElement._getElementDefaultLineHeight=function(){return nexacro.__getHTMLStyle_lineHeight(this.height+"px");};}else{_pInputElement._setElementDefaultLineHeight=function(){if(this.handle){nexacro.__setDOMStyle_LineHeightObject(this.handle.style,nexacro.CSSValueObject("100%"));}};_pInputElement._getElementDefaultLineHeight=function(){return nexacro.__getHTMLStyle_lineHeight("100%");};}_pInputElement.setElementEnable=function(enable,color){if(this.enable!=enable){this.enable=enable;if(!enable){this._disabled_color=color;}else{this._disabled_color=null;}var input_handle=this.handle;if(input_handle){nexacro.__setDOMNode_Enable(input_handle,enable);nexacro.__setDOMStyle_ColorObject(input_handle.style,this._disabled_color);}}};_pInputElement.setElementReadonly=function(readonly){if(this.readonly!=readonly){this.readonly=readonly;var input_handle=this.handle;if(input_handle){nexacro.__setDOMNode_ReadOnly(input_handle,readonly);}}};_pInputElement.setElementAutoSkip=function(v){if(this.autoskip!=v){this.autoskip=v;}};_pInputElement.setElementAutoSelect=function(v){if(this.autoselect!=v){this.autoselect=v;}};_pInputElement.setElementMaxLength=function(length){if(this.maxlength!=length){this.maxlength=length;var input_handle=this.handle;if(input_handle){if(this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(input_handle,(length>0)?length:65535);}var text=this.getElementText();if(this._is_focused||!this._checkmax_editing_only){if(this.maxlength>0&&text.length>this.maxlength){text=text.substring(0,this.maxlength);this._updateInputValue(text);}}}}};_pInputElement.setElementUseSoftKeyboard=function(usesoftkeyboard){if(this.usesoftkeyboard!=usesoftkeyboard){this.usesoftkeyboard=usesoftkeyboard;}};_pInputElement.setElementUseIme=function(useime){if(this.useime!=useime){this.useime=useime;}};_pInputElement.setElementImeMode=function(imemode){if(this.imemode!=imemode){this.imemode=imemode;var input_handle=this.handle;if(input_handle){nexacro.__setDOMNode_ImeMode(input_handle,imemode);}}};_pInputElement.setElementDisplayNullText=function(nulltext){var input_handle=this.handle;if(this.displaynulltext==nulltext){return;}this.displaynulltext=nulltext;if(input_handle){if(nexacro._isNull(this.value)&&!this._is_focused){this._updateInputValue(this.displaynulltext);}}};_pInputElement.setElementDisplayInvalidText=function(v){if(this.displayinvalidtext==v){return;}this.displayinvalidtext=v;var input_handle=this.handle;if(input_handle){if(this._is_invalid_value){this._updateInputValue(this.displayinvalidtext);}}};_pInputElement.setElementDefaultValue=function(value){if(value!=this.defaultvalue){this.defaultvalue=value;}};_pInputElement.setElementValue=function(value,bInvalidValue){var text=(nexacro._isNull(value)?this.defaultvalue:(value+""));var inputtype=this.inputtype;this._is_invalid_value=(bInvalidValue===true)?true:false;if(!bInvalidValue&&(this.value==value)&&(this._getInputValue()==text)){return;}this.value=value;this._input_text=text;var input_handle=this.handle;var comp=this.parent_elem.linkedcontrol;if(input_handle){if(bInvalidValue){if(!nexacro._isNull(this.displayinvalidtext)&&!this._is_focused){inputtype="text";this._updateInputValue(this.displayinvalidtext);}else{this._updateInputValue(text);}}else{this._setElementLastSelectionRange();if(this.value||this.value===""){if(!comp._is_killfocusing&&(this._is_focused||!this._checkmax_editing_only)){if(this.maxlength>0&&text.length>this.maxlength){text=text.substring(0,this.maxlength);}}this._updateInputValue(text);}else if(!this._is_focused&&this.displaynulltext!=""){inputtype="text";this._updateInputValue(this.displaynulltext);}else{this._updateInputValue(text);}}nexacro.__setDOMNode_Type(input_handle,inputtype);}};_pInputElement.replaceElementText=function(value,begin,end,bselect){var input_value=this._getInputValue();if(begin<0){return;}if(end<0){end=input_value.length;}if(begin>end){end=begin;}value=(value?value:"");var caretpos=begin+value.length;var text=input_value.substring(0,begin)+value+input_value.substring(end);if(bselect){this._updateInputValue(text,!this._processing_oninput,begin,caretpos);}else{this._updateInputValue(text,!this._processing_oninput,caretpos);}};_pInputElement.updateElementText=function(value,caretpos){value=(value?value:"");this._updateInputValue(value,!this._processing_oninput,caretpos);};_pInputElement._updateElementValue=function(value){if(this.value==value){return;}if(!value){value=this._zerolength_value;}this.value=value;};_pInputElement._setElementUseMaxLength=function(v){if((nexacro._Browser!="IE"&&nexacro._Browser!="Gecko"&&nexacro._BrowserExtra!="SamsungBrowser")){this._use_html_maxlength=v;}else{this._use_html_maxlength=false;}};_pInputElement.on_updateEvtOrder_process=function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<10){this._evtorder_compositionend_is_last=true;}else{this._evtorder_compositionend_is_last=false;}};if(nexacro._Browser=="IE"){if(nexacro._BrowserVersion<=8){_pInputElement._updateInputValue=function(value,fireevent,selectionStart,selectionEnd){var input_handle=this.handle;if(input_handle){if(this._composer&&this._composer.isComposing()){input_handle.blur();input_handle.focus();}var processing_flag=this._processing_oninput;if(!fireevent){this._processing_oninput=true;}if(selectionStart!=null&&selectionStart> -1){if(selectionEnd== -1){selectionEnd=value.length;}if(selectionEnd==null||selectionEnd<selectionStart){selectionEnd=selectionStart;}}this._selectstartpos_onprepertychange_afterupdate=selectionStart;this._selectendpos_onprepertychange_afterupdate=selectionEnd;this._input_text=value;nexacro.__setDOMNode_Value(input_handle,value);if(this instanceof nexacro.TextAreaElement&&!this._is_sys_focused){this._need_reset_update_value=true;}this._selectstartpos_onprepertychange_afterupdate=undefined;this._selectendpos_onprepertychange_afterupdate=undefined;if(!fireevent){this._processing_oninput=processing_flag;}}};}else{_pInputElement._updateInputValue=function(value,fireevent,selectionStart,selectionEnd){var input_handle=this.handle;if(input_handle){if(this._composer&&this._composer.isComposing()){this._accept_blur_process=false;this._accept_focus_process=false;input_handle.blur();input_handle.focus();}this._input_text=value;nexacro.__setDOMNode_Value(input_handle,value);if(selectionStart!=null&&selectionStart> -1){if(selectionEnd== -1){selectionEnd=value.length;}if(selectionEnd==null||selectionEnd<selectionStart){selectionEnd=selectionStart;}var _doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,selectionStart,selectionEnd);}this._setElementLastSelectionRange([selectionStart,selectionEnd]);}if(fireevent){this._fireHTMLEvent(input_handle,"input","oninput");}}};}}else{_pInputElement._updateInputValue=function(value,fireevent,selectionStart,selectionEnd){var input_handle=this.handle;if(input_handle){if(nexacro._Browser=="Chrome"){if(this._composer&&this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.END,selectionEnd);}}this._input_text=value;nexacro.__setDOMNode_Value(input_handle,value);if(selectionStart!=null&&selectionStart> -1){if(selectionEnd== -1){selectionEnd=value.length;}if(selectionEnd==null||selectionEnd<selectionStart){selectionEnd=selectionStart;}var _doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,selectionStart,selectionEnd);}this._setElementLastSelectionRange([selectionStart,selectionEnd]);}if(fireevent){nexacro.__fireHTMLEvent(input_handle,"input","oninput");}}};}_pInputElement.setElementInputType=function(type,bImedisable){if(type=="number"||type=="tel"){type=this._NUMERIC_KEYPAD_TYPE;}else if(type=="date"){type="date";}else if(type!="password"){type="text";}var input_handle=this.handle;var new_handle;if(this._imedisable!=bImedisable){this._imedisable=bImedisable?bImedisable:false;if(input_handle){nexacro.__setDOMNode_ImeMode(input_handle,this._imedisable?"disabled":this.imemode);}}if(this.inputtype!=type){this._keypad_type=type;var inputtype=(type=="number"?"text":type);if(nexacro._OS=="Android"&&(type=="number"||type=="tel")){inputtype="tel";}if(this.inputtype!=inputtype){this.inputtype=inputtype;if(input_handle){new_handle=nexacro.__changeInputDOMNodeType(input_handle,inputtype);if(new_handle!=input_handle){this._unbindSysEvent();new_handle._linked_element=this;input_handle=this.handle=new_handle;this._bindSysEvent();if(this._is_focused){nexacro.__setInputDOMNodeFocus(input_handle);}}}}}};if(nexacro._OS=="iOS"&&nexacro._SystemType=="iphone"){_pInputElement._change_to_keypad_type=function(){if(this.readonly||this._is_sys_focused||this.inputtype==this._keypad_type){return;}var input_handle=this.handle;if(input_handle){var text=this._inputtext_on_inputtype=this.getElementText();this._caretpos_on_inputtype=this.getElementCaretPos();var keypad_type=this._keypad_type;if(keypad_type=="number"&&text){if(nexacro.isNumeric(text)==false){keypad_type="text";}}nexacro.__changeInputDOMNodeType(input_handle,keypad_type);this._accept_keypadrestore_process=true;}};_pInputElement._change_type_on_sys_focus=function(type){var input_handle=this.handle;if(input_handle){var text=this._inputtext_on_inputtype;var pos=this._caretpos_on_inputtype;nexacro.__changeInputDOMNodeType(input_handle,type);this._updateInputValue(text?text:"");this.setElementSetSelect(pos.begin,pos.end);this._inputtext_on_inputtype="";this._caretpos_on_inputtype=null;this._restore_scrollpos_onclick=true;var cur_doc=this._getRootWindowHandle();var cur_win=cur_doc.defaultView||cur_doc.parentWindow;nexacro._observeSysEvent(cur_win,"scroll","onscroll",this._on_sys_scroll);var pThis=this;this._restore_scrollpos_timer=setTimeout(function(){clearTimeout(pThis._restore_scrollpos_timer);pThis._restore_scrollpos_timer=0;nexacro._stopSysObserving(cur_win,"scroll","onscroll",pThis._on_sys_scroll);pThis._restore_scrollpos_onclick=false;},500);}};_pInputElement._scrollintoview_on_sys_click=function(){if(this._restore_scrollpos_onclick){if(this._restore_scrollpos_timer>0){clearTimeout(this._restore_scrollpos_timer);this._restore_scrollpos_timer=0;}var cur_doc=this._getRootWindowHandle();var cur_win=cur_doc.defaultView||cur_doc.parentWindow;if(this._scoll_pos){cur_win.scrollTo(this._scoll_pos[0],this._scoll_pos[1]);}nexacro._stopSysObserving(cur_win,"scroll","onscroll",this._on_sys_scroll);this._restore_scrollpos_onclick=false;}};_pInputElement._restore_keypad_type=function(){var input_handle=this.handle;if(input_handle){if(this._keypad_type=="number"&&this._accept_keypadrestore_process){nexacro.__changeInputDOMNodeType(input_handle,"text");this._accept_keypadrestore_process=false;}}};}else{_pInputElement._change_to_keypad_type=nexacro._emptyFn;_pInputElement._change_type_on_sys_focus=nexacro._emptyFn;_pInputElement._scrollintoview_on_sys_click=nexacro._emptyFn;_pInputElement._restore_keypad_type=nexacro._emptyFn;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion>8){_pInputElement._fireHTMLEvent=function(handle,name,onname){if(!handle){return;}var doc=handle.ownerDocument||handle.document;var evt=nexacro.__createHTMLEvent(doc,name);if(evt){this._forced_fire_event_list.push(evt.timeStamp);nexacro.__despatchEvent(handle,evt);}};}else{_pInputElement._fireHTMLEvent=function(handle,name,onname){nexacro.__fireHTMLEvent(handle,name,onname);};}_pInputElement._applyElementFocus=function(){nexacro.__setInputDOMNodeFocus(this.handle);};_pInputElement._applyMaxlength=function(){var input_handle=this.handle;if(this._checkmax_editing_only){var newValue=this.value;if(!nexacro._isNull(newValue)){if(this.maxlength>0&&newValue.length>this.maxlength){newValue=newValue.substring(0,this.maxlength);}}else{newValue=this.defaultvalue;}var domValue=this._getInputValue();if(domValue!==newValue){this._updateInputValue(newValue);if(nexacro._isNull(this.value)){nexacro.__setDOMNode_Type(input_handle,this.inputtype);nexacro.__setDOMStyle_ColorObject(input_handle.style,"");}}}};_pInputElement.setElementFocus=function(trigger_type,self_flag){var _doc;var input_handle=this.handle;if(input_handle){if(!this._is_focused){this._is_focused=true;this._applyMaxlength();}if(!this._is_sys_focused){if(trigger_type=="lbutton"||trigger_type=="lbuttondown"||trigger_type=="rbuttondown"||trigger_type=="touch"||trigger_type=="tap"||trigger_type=="longpress"){if(!(nexacro._OS=="iOS"&&nexacro._enableaccessibility)){this._change_to_keypad_type();}}if(nexacro._BrowserType=="Edge"){if(self_flag!==true||trigger_type!="lbuttondown"){nexacro.__setInputDOMNodeFocus(input_handle);if(!this.autoselect&&trigger_type!=undefined&&trigger_type!="lbutton"){_doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,0);}}}}else{if(nexacro._Browser=="Chrome"){if(!trigger_type){_doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,0);}}}if(!(nexacro._OS=="iOS"&&this.inputtype=="date")){nexacro.__setInputDOMNodeFocus(input_handle,trigger_type);}this._restore_keypad_type();}}else if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"&&trigger_type=="focus"){if(this.inputtype!="date"){nexacro.__setInputDOMNodeFocus(input_handle);}}nexacro.__setLastFocusedElement(this);}};_pInputElement.setElementBlur=function(){var input_handle=this.handle;if(input_handle){var _doc=this._getRootWindowHandle();var pThis;if(_doc&&(nexacro._Browser!="IE"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>=11))){if(nexacro._BrowserType!="Edge"){if(this.inputtype!="date"){if(nexacro._Browser!="MobileSafari"){if(!(nexacro._enableaccessibility&&nexacro._accessibilitytype==5)){var end_pos=0;var caret_pos=nexacro.__getDOMNodeCaretPos(_doc,input_handle);{end_pos=caret_pos?caret_pos.end:0;}nexacro.__setDOMNode_SetSelect(_doc,input_handle,end_pos,end_pos,true);}}nexacro._removeInputDOMNodeCaret(input_handle);}}}if(this._checkmax_editing_only&&this.maxlength>0){var text=(nexacro._isNull(this.value)?this.defaultvalue:(this.value+""));var value=this._getInputValue();if(text!=value){this._updateInputValue(value);}}if(this._is_focused){this._is_focused=false;if(nexacro._BrowserType!="Edge"&&nexacro._Browser!="Gecko"){if(this._is_sys_focused){nexacro.__setDOMNode_Blur(input_handle);}}}if(this.value==null&&this.displaynulltext!=""){if(nexacro._OS=="iOS"&&nexacro._SystemType=="iphone"){pThis=this;setTimeout(function(){nexacro.__setDOMNode_Type(input_handle,"text");pThis._updateInputValue(pThis.displaynulltext,false);},0);}else{nexacro.__setDOMNode_Type(input_handle,"text");this._updateInputValue(this.displaynulltext,false);}}else{if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){if(nexacro._OS=="iOS"&&nexacro._SystemType=="iphone"){pThis=this;setTimeout(function(){nexacro.__setDOMNode_Type(input_handle,"text");pThis._updateInputValue(pThis.displayinvalidtext,false);},0);}else{nexacro.__setDOMNode_Type(input_handle,"text");this._updateInputValue(this.displayinvalidtext,false);}}}}};_pInputElement.setElementSetSelect=function(start,end){if(this.inputtype=="date"){return;}var input_handle=this.handle;if(input_handle){var _doc=this._getRootWindowHandle();var val=this.getElementText();var len=val.length;end=(typeof end=='number')?(end== -1?len:end):start;if(!this._is_focused){this._setElementLastSelectionRange([start,end]);return;}var range=end-start;if(_doc){if(range==len){if(nexacro._isTouchInteraction&&nexacro._OS=="iOS"){nexacro.__setDOMNode_SetSelect(_doc,input_handle,start,end);}else{nexacro.__setDOMNode_Select(_doc,input_handle);}}else{nexacro.__setDOMNode_SetSelect(_doc,input_handle,start,end);}}}};_pInputElement._setElementLastSelectionRange=function(range){if(range){this._last_selection_range=range;}else{this._last_selection_range=null;}};_pInputElement.getElementCaretPos=function(){var input_handle=this.handle;if(input_handle&&this.inputtype!="date"&&this._is_focused){var _doc=this._getRootWindowHandle();if(_doc){return nexacro.__getDOMNodeCaretPos(_doc,input_handle);}}return  -1;};_pInputElement.getElementSelectionRange=function(){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this._last_selection_range){return this._last_selection_range;}var _doc=this._getRootWindowHandle();if(_doc&&(this._use_node_selection_range||this._is_focused)){var sel=nexacro.__getDOMNodeSelectionRange(_doc,input_handle);return sel.splice(0,2);}}return [0,0];};_pInputElement.getElementText=function(){var input_handle=this.handle;if(input_handle){return this._getInputValue();}return this._input_text;};_pInputElement._getInputValue=function(){var input_handle=this.handle;if(input_handle){if(this._is_focused){return nexacro.__getDOMNodeValue(input_handle);}else{if(this.displaynulltext){if(this.getInputStatusPseudoClass("AUTOFILL")){return nexacro.__getDOMNodeValue(input_handle);}else{return this._input_text;}}else{if(this._is_invalid_value){return this._input_text;}else{return nexacro.__getDOMNodeValue(input_handle);}}}}return "";};_pInputElement.getElementValue=function(){return this.value;};_pInputElement.getCompositionStatus=function(){return (this._composer?this._composer.status:nexacro._CompositionState.NONE);};_pInputElement.isComposing=function(){return (this._composer?this._composer.isComposing():false);};_pInputElement.setCompositionComplete_process=function(end_pos,is_composing){var pos=this.getElementCaretPos();var value=this._getInputValue();var _is_composing=this._composer.isComposing();if(_is_composing){this._composer.setStatus(nexacro._CompositionState.END,pos.end);this._updateInputValue(value,!this._processing_oninput);}};_pInputElement.setCompositionComplete=function(end_pos,is_composing){var input_handle=this.handle;if(input_handle){this.setCompositionComplete_process.call(this,end_pos,is_composing);var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}};_pInputElement.setCompositionCancel_process=function(end_pos,is_composing){var _is_composing=this._composer.isComposing();if(_is_composing){var value=this._getInputValue();var offset=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,offset.begin);this._updateInputValue(value.substring(0,offset.begin),!this._processing_oninput);}};_pInputElement.setCompositionCancel=function(end_pos,is_composing){var input_handle=this.handle;if(input_handle){this.setCompositionCancel_process.call(this,end_pos,is_composing);var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}};_pInputElement.setInputProcess=function(v){this._processing_oninput=v;};_pInputElement.getInputProcess=function(){return this._processing_oninput;};_pInputElement.setInputStatusPseudoClass=function(pseudoclass,state){this._status_csspseudoclass[pseudoclass]=state;};_pInputElement.getInputStatusPseudoClass=function(pseudoclass){return this._status_csspseudoclass[pseudoclass];};_pInputElement.setElementAccessibilityRole=nexacro._emptyFn;_pInputElement._setElementInputRole=nexacro._emptyFn;_pInputElement._wantAccessibilityAdditionalLabel=nexacro._emptyFn;_pInputElement._checkMaxLength=function(value,caretpos,fix_composition){var maxlength=this.maxlength;if(maxlength<=0&&caretpos<=0){return;}var vlength=value.length;var _is_composing=this._composer.isComposing();if(maxlength<vlength){if(this._use_html_maxlength&&_is_composing){return;}var _has_candidate_window;if(_is_composing&&!fix_composition){_has_candidate_window=this._composer.isHasCandiateWindow(value.charAt(caretpos-1));}if(fix_composition||!_is_composing||!_has_candidate_window){return {"ismax":true,"pos":(caretpos-(vlength-maxlength))};}else{var offset=this._composer.getOffset();if(maxlength==(vlength-(offset.end-offset.begin))){return {"ismax":true,"pos":(caretpos-(vlength-maxlength))};}}}else{return {"ismax":(!_is_composing&&maxlength==vlength),"pos":caretpos};}return;};_pInputElement._go_next_focus=function(){var input_handle=this.handle;var comp=this.parent_elem.linkedcontrol;if(input_handle&&comp){var form=comp._getForm();var newfocus_comp=form._searchNextTabFocus(form._last_focused);if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0] instanceof nexacro.Form&&newfocus_comp[0]._last_focused){var win=form._getWindow();win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,0,true);if(!newfocus_comp[0].autoselect&&newfocus_comp[0]._is_editable_control){newfocus_comp[0]._setDefaultCaret();}}}};_pInputElement._bindSysEvent=function(){var input=this.handle;if(input){nexacro._observeSysEvent(input,"keydown","onkeydown",this._on_sys_keydown);nexacro._observeSysEvent(input,"keyup","onkeyup",this._on_sys_keyup);nexacro._observeSysEvent(input,"keypress","onkeypress",this._on_sys_keypress);if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8&&input.onpropertychange!=="undefined"){nexacro._observeSysEvent(input,"propertychange","onpropertychange",this._on_sys_propertychange);this._use_propertychange_evt=true;}else{if(this._use_event_beforeinput){nexacro._observeSysEvent(input,"beforeinput","onbeforeinput",this._on_sys_beforeinput_forward);}nexacro._observeSysEvent(input,"input","oninput",this._on_sys_keyinput_forward);nexacro._observeSysEvent(input,"compositionstart","oncompositionstart",this._on_sys_compositionstart);nexacro._observeSysEvent(input,"compositionupdate","oncompositionupdate",this._on_sys_compositionupdate);nexacro._observeSysEvent(input,"compositionend","oncompositionend",this._on_sys_compositionend);}nexacro._observeSysEvent(input,"cut","oncut",this._on_sys_cut);nexacro._observeSysEvent(input,"paste","onpaste",this._on_sys_paste);nexacro._observeSysEvent(input,"mousedown","onmousedown",this._on_sys_mousedown);nexacro._observeSysEvent(input,"mouseup","onmouseup",this._on_sys_mouseup);nexacro._observeSysEvent(input,"focus","onfocus",this._on_sys_focus);nexacro._observeSysEvent(input,"blur","onblur",this._on_sys_blur);nexacro._observeSysEvent(input,"select","onselect",this._on_sys_select);nexacro._observeSysEvent(input,"click","onclick",this._on_sys_click);if(nexacro._SupportTouch){nexacro._observeSysEvent(input,"touchstart","ontouchstart",this._on_sys_touchstart);nexacro._observeSysEvent(input,"touchend","ontouchend",this._on_sys_touchend);}if(this._use_event_animation){nexacro._observeSysEvent(input,"animationstart","onanimationstart",this._on_sys_animationstart);}}};_pInputElement._unbindSysEvent=function(){var input=this.handle;if(input){nexacro._stopSysObserving(input,"keydown","onkeydown",this._on_sys_keydown);nexacro._stopSysObserving(input,"keyup","onkeyup",this._on_sys_keyup);nexacro._stopSysObserving(input,"keypress","onkeypress",this._on_sys_keypress);if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8&&input.onpropertychange!=="undefined"){nexacro._stopSysObserving(input,"propertychange","onpropertychange",this._on_sys_propertychange);}else{if(this._use_event_beforeinput){nexacro._stopSysObserving(input,"beforeinput","onbeforeinput",this._on_sys_beforeinput_forward);}nexacro._stopSysObserving(input,"input","oninput",this._on_sys_keyinput_forward);nexacro._stopSysObserving(input,"compositionstart","oncompositionstart",this._on_sys_compositionstart);nexacro._stopSysObserving(input,"compositionupdate","oncompositionupdate",this._on_sys_compositionupdate);nexacro._stopSysObserving(input,"compositionend","oncompositionend",this._on_sys_compositionend);}nexacro._stopSysObserving(input,"cut","oncut",this._on_sys_cut);nexacro._stopSysObserving(input,"paste","onpaste",this._on_sys_paste);nexacro._stopSysObserving(input,"mousedown","onmousedown",this._on_sys_mousedown);nexacro._stopSysObserving(input,"mouseup","onmouseup",this._on_sys_mouseup);nexacro._stopSysObserving(input,"focus","onfocus",this._on_sys_focus);nexacro._stopSysObserving(input,"blur","onblur",this._on_sys_blur);nexacro._stopSysObserving(input,"select","onselect",this._on_sys_select);nexacro._stopSysObserving(input,"click","onclick",this._on_sys_click);if(nexacro._SupportTouch){nexacro._stopSysObserving(input,"touchstart","ontouchstart",this._on_sys_touchstart);nexacro._stopSysObserving(input,"touchend","ontouchend",this._on_sys_touchend);}if(this._use_event_animation){nexacro._stopSysObserving(input,"animationstart","onanimationstart",this._on_sys_animationstart);}}};_pInputElement.on_sys_keydown_before_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var keycode=nexacro._getSysEventKey(evt);var comp=pThis.parent_elem.linkedcontrol;var _win=comp._getWindow();var capture_comp;if(comp){capture_comp=_win._getCaptureComp(false,true,comp);}if(capture_comp&&capture_comp!=comp){nexacro._stopSysEvent(evt);return false;}var pos=pThis.getElementCaretPos();pThis._composer.setDelayStatus(undefined);if(keycode==nexacro.KeyCode_ImeInput&&nexacro._OS!="Android"){if(!pThis._composer.isComposing()){pThis._composer.setDelayStatus(nexacro._CompositionState.START,pos.begin);}else{pThis._composer.setDelayStatus(nexacro._CompositionState.COMPOSING,pos.end);}}else{var is_composing=pThis._composer.isComposing();if(is_composing){pThis._composer.setDelayStatus(nexacro._CompositionState.END,pos.end);}else{pThis._composer.setStatus(nexacro._CompositionState.NONE,pos.begin);}}return true;};_pInputElement.on_sys_keydown_specialkey_process=function(evt){if(nexacro._Browser=="IE"){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var keycode=nexacro._getSysEventKey(evt);if(nexacro._BrowserVersion==8){if(keycode==nexacro.Event.KEY_TAB){pThis.setCompositionComplete();}}else if(nexacro._BrowserVersion==9){if(input_handle.value.length>0&&(keycode==nexacro.Event.KEY_BACKSPACE||keycode==nexacro.Event.KEY_DEL||keycode==nexacro.Event.KEY_ESC)){setTimeout(function(){nexacro.__fireHTMLEvent(input_handle,"input","oninput");},0);}}else if(nexacro._BrowserVersion>9){if(keycode==nexacro.Event.KEY_ESC){setTimeout(function(){nexacro.__fireHTMLEvent(input_handle,"input","oninput");},0);}}}return true;};_pInputElement.on_sys_keydown_process=function(evt){return true;};_pInputElement._on_sys_keydown=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis.readonly){if(!pThis.on_sys_keydown_before_process.call(pThis,evt)){return;}if(!pThis.on_sys_keydown_specialkey_process.call(pThis,evt)){return;}pThis.on_sys_keydown_process.call(pThis,evt);}}};_pInputElement.on_sys_keyup_before_process=function(evt){return true;};_pInputElement.on_sys_keyup_specialkey_process=function(evt){return true;};_pInputElement.on_sys_keyup_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;pThis._composer.setDelayStatus(undefined);var value=pThis._getInputValue();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(pThis._beforeinput_result_pos&&!pThis._composer.isComposing()){var selectionStart=pThis._beforeinput_result_pos.begin;var selectionEnd=pThis._beforeinput_result_pos.end;if(selectionStart!=null&&selectionStart> -1){if(selectionEnd== -1){selectionEnd=value.length;}if(selectionEnd==null||selectionEnd<selectionStart){selectionEnd=selectionStart;}var _doc=pThis._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,selectionStart,selectionEnd);}}}}return true;};_pInputElement._on_sys_keyup=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis.readonly){if(!pThis.on_sys_keyup_before_process.call(pThis,evt)){return;}if(!pThis.on_sys_keyup_specialkey_process.call(pThis,evt)){return;}pThis.on_sys_keyup_process.call(pThis,evt);}if(pThis._use_event_beforeinput){while(pThis._beforeinput_result&&pThis._beforeinput_result.length>0){pThis._beforeinput_result.pop();}pThis._beforeinput_result_insert_data=null;pThis._beforeinput_result_data=null;pThis._beforeinput_result_pos=null;}}};_pInputElement.on_sys_keypress_before_process=function(evt){return true;};_pInputElement.on_sys_keypress_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var charcode=evt.charCode||evt.keyCode;var value=pThis._getInputValue();var _range=pThis.getElementSelectionRange();var comp=pThis.parent_elem.linkedcontrol;var _win=comp._getRootWindow();if(_win&&_win._keydown_element){if(_win._keydown_element!==pThis){return false;}}if(!evt.ctrlKey&&!evt.altKey&&charcode){var inputChar=String.fromCharCode(charcode);if(inputChar.length>0){if(pThis.autoskip&&pThis.maxlength>0&&value.length>=pThis.maxlength&&_range[0]==_range[1]){if(charcode!=nexacro.Event.KEY_RETURN){pThis._go_next_focus();}}}}if(!pThis._use_html_maxlength){if(pThis.maxlength>0&&value.length>=pThis.maxlength&&_range[0]==_range[1]){nexacro._stopSysEvent(evt);return false;}}};_pInputElement._on_sys_keypress=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(nexacro._OS=="iOS"){pThis._updateImeLocale(evt);return false;}if(!pThis.on_sys_keypress_before_process.call(pThis,evt)){return;}return pThis.on_sys_keypress_process.call(pThis,evt);}};_pInputElement._is_accept_touch=function(win){if(nexacro._OS==='iOS'&&win){var lastfocus_elem=win._last_focused_elem;if(lastfocus_elem&&lastfocus_elem.isInputElement()){if(this!==lastfocus_elem&&lastfocus_elem.isComposing()){return false;}}}return true;};_pInputElement.on_complete_composition_value_process=function(){return true;};_pInputElement.on_complete_composition_value=function(){return this.on_complete_composition_value_process.call(this);};_pInputElement.on_apply_imeSet=function(evt){var i,len;var input_handle=evt?(evt.target||evt.srcElement):null;var pThis=input_handle?input_handle._linked_element:this;var _locale=pThis._imelocale.getLocale();if(_locale&&nexacro._cache_inputelement_set[_locale]){for(var prop in nexacro._cache_inputelement_set[_locale]){pThis[prop]=nexacro._cache_inputelement_set[_locale][prop];}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(!nexacro._cache_inputelement_set[_locale][nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}}else{for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}var comp=pThis.parent_elem.linkedcontrol;if(comp.on_apply_imeSet){comp.on_apply_imeSet();}pThis.on_apply_ime_environment(evt);};_pInputElement.on_apply_ime_environment_process=function(evt){var input_handle=evt?(evt.target||evt.srcElement):this.handle;this._setElementUseMaxLength(true);nexacro.__setDOMNode_MaxLength(input_handle,this.maxlength);this.on_updateEvtOrder_process();};_pInputElement.on_apply_ime_environment=function(evt){this.on_apply_ime_environment_process.call(this,evt);};_pInputElement.on_apply_force_imeSet=function(evt){return true;};_pInputElement._updateLocale=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var comp=pThis.parent_elem.linkedcontrol;if(comp instanceof nexacro.MaskEdit){pThis._skip_check_imelocale=true;pThis._imelocale.setLocale("");pThis.on_apply_imeSet(evt);return;}var pos=pThis.getElementCaretPos();var value=pThis._getInputValue();pThis._imelocale.updateLocale((evt.data||evt.key)||value.substr(pos.end-1,1));if(pThis._imelocale.IsChangeLocale()){pThis.on_apply_imeSet(evt);}pThis.on_apply_force_imeSet.call(pThis,evt);};_pInputElement._updateImeLocale=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis._skip_check_imelocale){return true;}var comp=pThis.parent_elem.linkedcontrol;var e_data;var composing_status=pThis._composer.status;var value=pThis._getInputValue();var pos=pThis.getElementCaretPos();var prev_status=pThis._composer._prev_status;if(this._use_event_beforeinput){var beforeinput_data=evt.data;if(composing_status!=nexacro._CompositionState.END){if(beforeinput_data===null){return true;}if(!pThis.isComposing()){}else{if(comp instanceof nexacro.MaskEdit){pThis._skip_check_imelocale=true;return true;}if((prev_status==nexacro._CompositionState.NONE&&composing_status==nexacro._CompositionState.START)||(prev_status==nexacro._CompositionState.END&&composing_status==nexacro._CompositionState.START)){pThis._updateLocale(evt);}}}}else{if(this._apple_default_browser){if(pThis.isComposing()&&(comp instanceof nexacro.MaskEdit)){input_handle.blur();input_handle.focus();pThis._updateInputValue(comp.text,false,pos.begin);return false;}e_data=evt.data||evt.key;if(e_data){if(evt.key||(pThis.isComposing()&&(prev_status==nexacro._CompositionState.START&&composing_status==nexacro._CompositionState.COMPOSING))){var keycode=evt.charCode||evt.keyCode;if(evt.key&&(keycode>=33&&keycode<=126)){return true;}pThis._updateLocale(evt);}}return true;}if(pos!= -1&&composing_status!=nexacro._CompositionState.END){if(!pThis.isComposing()){}else{if(prev_status==nexacro._CompositionState.NONE&&nexacro._CompositionState.START||prev_status==nexacro._CompositionState.END&&nexacro._CompositionState.START||prev_status==nexacro._CompositionState.START&&nexacro._CompositionState.COMPOSING||(pThis._check_imetype_composing_status&&prev_status==nexacro._CompositionState.COMPOSING&&composing_status==nexacro._CompositionState.COMPOSING)){if(value){pThis._updateLocale(evt);}}}}}return true;};_pInputElement.on_sys_beforeinput_forward_before_process=function(evt){return true;};_pInputElement.on_sys_beforeinput_forward_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var comp=pThis.parent_elem.linkedcontrol;var beforeinput_data=evt.data;var beforeinput_type=evt.inputType;var input_value=pThis._getInputValue();var input_pos=pThis.getElementCaretPos();var composing_status=pThis.getCompositionStatus();var beginOffset=input_pos.begin;var endOffset=input_pos.end;var _win=comp._getWindow();var capture_comp;if(comp){capture_comp=_win._getCaptureComp(false,true,comp);}if(capture_comp&&capture_comp!=comp){pThis._beforeinput_result=[pThis._BeforeinputState.CANCEL];pThis._beforeinput_result_data=input_value;pThis._beforeinput_result_pos={begin:beginOffset,end:endOffset};return false;}if(beforeinput_data==null&&beforeinput_type=="insertLineBreak"){beforeinput_data="↵";}else if(beforeinput_type=="insertCompositionText"){pThis._composing_start=beginOffset;pThis._composing_end=endOffset;}pThis._beforeinput_result=comp._on_beforekeyinput(pThis,beforeinput_data,composing_status,beginOffset,endOffset,beforeinput_type);if(pThis._beforeinput_result){pThis._beforeinput_result.forEach(function(state){var caret_after_convert,data;switch(state){case pThis._BeforeinputState.PASS:break;case pThis._BeforeinputState.CANCEL:pThis._beforeinput_result_data=input_value;pThis._beforeinput_result_pos={begin:beginOffset,end:endOffset};break;case pThis._BeforeinputState.CONVERT_UPPER:if(beforeinput_type=="insertFromPaste"){pThis._beforeinput_result_insert_data=pThis._beforeinput_result_insert_data?pThis._beforeinput_result_insert_data.toUpperCase():"";data=pThis._beforeinput_result_data;pThis._beforeinput_result_data=data.substring(0,pThis._beforeinput_result_pos.begin-pThis._beforeinput_result_insert_data.length);pThis._beforeinput_result_data+=pThis._beforeinput_result_insert_data;pThis._beforeinput_result_data+=data.substring(pThis._beforeinput_result_pos.begin);}else if(beforeinput_type!="insertLineBreak"){caret_after_convert=beginOffset+beforeinput_data.length;pThis._beforeinput_result_data=input_value.substring(0,beginOffset)+beforeinput_data.toUpperCase()+input_value.substring(endOffset,input_value.length);pThis._beforeinput_result_pos={begin:caret_after_convert,end:caret_after_convert};}break;case pThis._BeforeinputState.CONVERT_LOWER:if(beforeinput_type=="insertFromPaste"){pThis._beforeinput_result_insert_data=pThis._beforeinput_result_insert_data?pThis._beforeinput_result_insert_data.toLowerCase():"";data=pThis._beforeinput_result_data;pThis._beforeinput_result_data=data.substring(0,pThis._beforeinput_result_pos.begin-pThis._beforeinput_result_insert_data.length);pThis._beforeinput_result_data+=pThis._beforeinput_result_insert_data;pThis._beforeinput_result_data+=data.substring(pThis._beforeinput_result_pos.begin);}else if(beforeinput_type!="insertLineBreak"){caret_after_convert=beginOffset+beforeinput_data.length;pThis._beforeinput_result_data=input_value.substring(0,beginOffset)+beforeinput_data.toLowerCase()+input_value.substring(endOffset);pThis._beforeinput_result_pos={begin:caret_after_convert,end:caret_after_convert};}break;case pThis._BeforeinputState.MAXLENGTH:break;case pThis._BeforeinputState.REPLACE:break;default:break;}},pThis);}};_pInputElement._on_sys_beforeinput_forward=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis._updateImeLocale(evt)){return false;}if(!pThis.on_sys_beforeinput_forward_before_process.call(pThis,evt)){return false;}pThis.on_sys_beforeinput_forward_process.call(pThis,evt);}};_pInputElement.on_sys_propertychange_before_process=function(evt){return true;};_pInputElement.on_sys_propertychange_process=function(evt){var ret;var input_handle=evt.srcElement;var pThis=input_handle._linked_element;if(pThis){var pos;var select_start=pThis._selectstartpos_onprepertychange_afterupdate;var select_end=pThis._selectendpos_onprepertychange_afterupdate;if(select_start!=null&&select_start> -1){var _doc=pThis._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,select_start,select_end);}pThis._selectstartpos_onprepertychange_afterupdate=undefined;pThis._selectendpos_onprepertychange_afterupdate=undefined;}if(!pThis._processing_oninput){var cur_status;var delay_status=pThis._composer._delay_status;if(delay_status!=null){if(delay_status==nexacro._CompositionState.END){pos=pThis._delay_pos=pThis.getElementCaretPos();pThis.setCompositionComplete();pThis.setElementSetSelect(pos.begin,pos.end);}else{pos=pThis.getElementCaretPos();var delay_status_pos=pThis._composer._delay_status_pos;if(delay_status==nexacro._CompositionState.START){if(delay_status_pos<0){delay_status_pos=pos.begin;}pThis._composer.setStatus(delay_status,delay_status_pos);pThis._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);}else if(delay_status==nexacro._CompositionState.COMPOSING){pThis._composer.setStatus(delay_status,pos.end);}else{if(delay_status_pos<0){delay_status_pos=pos.begin;}pThis._composer.setStatus(delay_status,delay_status_pos);}}}if(pThis._delay_pos){pThis.setElementSetSelect(pThis._delay_pos.begin,pThis._delay_pos.end);pThis._delay_pos=null;}pThis._composer.setDelayStatus(undefined);var value=pThis._getInputValue();var prev_status=pThis._composer._prev_status;cur_status=pThis._composer.status;if(prev_status==cur_status&&pThis.value==value){return;}pThis._processing_oninput=true;ret=pThis._on_sys_keyinput.call(this,evt);pThis._processing_oninput=false;}}return ret;};_pInputElement._on_sys_propertychange=function(evt){if(evt.propertyName=="value"){var input_handle=evt.srcElement;var pThis=input_handle._linked_element;if(input_handle){if(!pThis.on_sys_propertychange_before_process.call(pThis,evt)){return;}return pThis.on_sys_propertychange_process.call(pThis,evt);}}};_pInputElement.on_sys_keyinput_forward_before_process=function(evt){return true;};_pInputElement.on_sys_keyinput_forward_process=function(evt){var input_handle=(evt.target||evt.srcElement);var ret;var pThis=input_handle._linked_element;if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"){var timestamp=evt.timeStamp;var len=pThis._forced_fire_event_list.length;var idx=(len>0)?pThis._forced_fire_event_list.indexOf(timestamp): -1;if(idx>=0){pThis._forced_fire_event_list.splice(idx,1);}else{if(!nexacro._checkActiveElement(pThis)){return;}}}if(pThis&&!pThis._processing_oninput){var value=pThis._getInputValue();var prev_status=pThis._composer._prev_status;var cur_status=pThis._composer.status;if(prev_status==cur_status){if(!pThis.value&&pThis.defaultvalue==value){return;}}pThis._processing_oninput=true;ret=pThis._on_sys_keyinput.call(this,evt);pThis._processing_oninput=false;}return ret;};_pInputElement._on_sys_keyinput_forward=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis.on_sys_keyinput_forward_before_process(evt)){return false;}return pThis.on_sys_keyinput_forward_process(evt);}};if(_pInputElement._use_event_beforeinput){_pInputElement.on_sys_keyinput_before_process=function(evt){return true;};_pInputElement.on_sys_keyinput_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis._skip_sys_keyinput){pThis._skip_sys_keyinput=false;return;}var comp=pThis.parent_elem.linkedcontrol;var ismax=false;var value;var pos;if(pThis._beforeinput_result){var bcancle=false;pThis._beforeinput_result.forEach(function(state){switch(state){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:pThis._updateInputValue(pThis._beforeinput_result_data,false,pThis._beforeinput_result_pos.end,pThis._beforeinput_result_pos.end);bcancle=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(pThis._beforeinput_result_data!=null){pThis._updateInputValue(pThis._beforeinput_result_data,false,pThis._beforeinput_result_pos.begin,pThis._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:ismax=true;break;}},pThis);if(bcancle){return;}}value=pThis._getInputValue();pos=pThis.getElementCaretPos();if(pThis._composer.isComposing()){pThis._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);}var old_value=pThis.value;pThis._updateElementValue(value);if(comp._on_keyinput){comp._on_keyinput(pThis);}if(pThis.getInputStatusPseudoClass("AUTOFILL")){nexacro.__changeInputDOMNodeType(input_handle,pThis.inputtype);}if(pThis.autoskip&&ismax){if(pThis.value&&value.length>=pThis.maxlength){pThis._go_next_focus();}}var prev_status=pThis._composer._prev_status;var cur_status=pThis._composer.status;if(prev_status==cur_status&&pThis.value==old_value){if(comp._on_input_autoskip){comp._on_input_autoskip();}}pThis._composer._prev_status=cur_status;};_pInputElement._on_sys_keyinput=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis.on_sys_keyinput_before_process.call(pThis,evt)){return;}return pThis.on_sys_keyinput_process.call(pThis,evt);}};}else{_pInputElement.on_sys_keyinput_before_process=function(evt){return true;};_pInputElement.on_sys_keyinput_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var comp=pThis.parent_elem.linkedcontrol;var composing_status=pThis._composer.status;var beginOffset,endOffset;var value=pThis._getInputValue();var pos=pThis.getElementCaretPos();if(composing_status==nexacro._CompositionState.NONE){beginOffset=pThis._paste_caret_pos?pThis._paste_caret_pos.begin:pThis._composer.startOffset;endOffset=pThis._paste_caret_pos?pThis._paste_caret_pos.end:pos.end;if(beginOffset>endOffset){beginOffset=endOffset;}}else{var offsetCompose=pThis._composer.getOffset();beginOffset=offsetCompose.begin;endOffset=offsetCompose.end;if(beginOffset==endOffset&&(composing_status==3||composing_status==1)){if(pThis._last_selection_range){beginOffset=pThis._last_selection_range[0];}else{beginOffset-=1;}}if(pThis._composer.isComposing()){endOffset=pos.end;}}var bBackspace=pThis._checkBackspaceKeyInKeyInput(pThis.value,value,beginOffset,endOffset);var bSelect=pThis._checkSelectionInKeyInput(pThis.value,value,beginOffset,endOffset);if(bBackspace){nexacro.__fireHTMLEvent(input_handle,"keydown","onkeydown");}if(bSelect!==false){beginOffset=bSelect;}if(comp._on_beforekeyinput){comp._on_beforekeyinput(pThis,value,composing_status,beginOffset,endOffset);if(pThis._event_stop){nexacro._stopSysEvent(evt);pThis._event_stop=false;return false;}}var new_value=pThis._getInputValue();pos=pThis.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(comp instanceof nexacro.MaskEdit){pThis._beforeinput_result_pos={begin:pos.begin,end:pos.end};}}var ismax=false;if(pThis.maxlength>0){var caretpos=pThis._paste_caret_pos?pThis._paste_caret_pos.end-(value.length-new_value.length):pos.end;value=new_value;var check=pThis._checkMaxLength(value,caretpos);if(check){ismax=check.ismax;var newpos=check.pos;if(ismax){if(caretpos!=newpos){value=value.substring(0,newpos)+value.substring(caretpos);pThis._updateInputValue(value);pThis.setElementSetSelect(newpos,newpos);value=pThis._getInputValue();pos=pThis.getElementCaretPos();}pThis.setCompositionComplete(newpos,false);}}}else{value=new_value;}if(pThis._composer.isComposing()){pThis._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);}var old_value=pThis.value;pThis._updateElementValue(value);var prev_status=pThis._composer._prev_status;var cur_status=pThis._composer.status;if(prev_status==cur_status&&pThis.value==old_value){if(comp._on_input_autoskip){comp._on_input_autoskip();}}pThis._composer._prev_status=cur_status;if(pThis.value==old_value){if(ismax&&pThis.autoskip){if(nexacro._Browser=="Safari"){setTimeout(function(){pThis._go_next_focus();},0);}else{pThis._go_next_focus();}}return false;}if(comp._on_keyinput){comp._on_keyinput(pThis);}if(pThis._event_stop){nexacro._stopSysEvent(evt);pThis._event_stop=false;return false;}if(ismax&&pThis.autoskip){if(pThis.value&&value.length>pThis.value.length){ismax=false;}if(ismax){if(nexacro._Browser=="Safari"){setTimeout(function(){pThis._go_next_focus();},0);}else{pThis._go_next_focus();}}}return true;};_pInputElement._on_sys_keyinput=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;{if(!pThis._updateImeLocale(evt)){return false;}}if(!pThis.on_sys_keyinput_before_process.call(pThis,evt)){return false;}if(!pThis.on_sys_keyinput_process.call(pThis,evt)){return false;}}};}_pInputElement.on_sys_cut_before_process=function(evt){return true;};_pInputElement._on_sys_cut=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(!pThis.on_sys_cut_before_process.call(pThis,evt)){return false;}if(pThis._evtfire_oninput_only_when_cut){setTimeout(function(){var value=pThis._getInputValue();pThis._updateInputValue(value,true);},0);}};_pInputElement.on_sys_paste_before_process=function(evt){return true;};_pInputElement._on_sys_paste=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(!pThis.on_sys_paste_before_process.call(pThis,evt)){return false;}var data;if(evt.clipboardData&&evt.clipboardData.getData){data=evt.clipboardData.getData('text/plain');}else if(window.clipboardData&&window.clipboardData.getData){data=window.clipboardData.getData('text');}if(input_handle&&!input_handle._linked_element._use_event_beforeinput&&data){data=data.replace(/\r\n|\n/g,"");var value=pThis._getInputValue();var pos=pThis.getElementCaretPos();var begin=pos.begin;var end=pos.end;var newvalue=value.substring(0,begin)+data+value.substring(end);var newpos=begin+data.length;pos.end=newpos;nexacro._stopSysEvent(evt);setTimeout(function(){pThis._paste_caret_pos=pos;pThis._updateInputValue(newvalue,true,newpos);pThis._paste_caret_pos=null;},0);nexacro._stopSysEvent(evt);return false;}};_pInputElement.on_sys_compositionstart_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.START,pos.begin);return true;};_pInputElement._on_sys_compositionstart=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;pThis.on_sys_compositionstart_process.call(pThis,evt);}};_pInputElement.on_sys_compositionupdate_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);return true;};_pInputElement._on_sys_compositionupdate=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;pThis.on_sys_compositionupdate_process.call(pThis,evt);}};_pInputElement.on_sys_compositionend_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.END,pos.end);return true;};_pInputElement._on_sys_compositionend=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;pThis.on_sys_compositionend_process.call(pThis,evt);}};_pInputElement._on_sys_mousedown=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle&&evt.button==nexacro.InputElement.prototype.MOUSE_LBUTTON){var pThis=input_handle._linked_element;if(pThis){var sel=pThis.getElementSelectionRange();if(evt.ctrlKey&&(sel[0]==sel[1])){pThis.setElementSetSelect(0, -1);pThis.__prevent_sys_lbuttonup=true;}else{pThis._setElementLastSelectionRange();pThis.__prevent_sys_lbuttonup=false;}if(nexacro._BrowserType=="Edge"){if(!pThis._is_sys_focused&&pThis.autoselect){evt.preventDefault();}}if(nexacro._OS=="iOS"){if(pThis.inputtype=="date"){evt.preventDefault();}}}}};_pInputElement._on_sys_mouseup=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle&&evt.button==nexacro.InputElement.prototype.MOUSE_LBUTTON){var pThis=input_handle._linked_element;if(pThis){if(pThis.__prevent_sys_lbuttonup){pThis.__prevent_sys_lbuttonup=false;if(evt.preventDefault){evt.preventDefault();}else{evt.returnValue=false;}return false;}if(pThis.getElementCaretPos&&pThis._composer){var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}}}};_pInputElement._on_sys_scroll=function(evt){var target=(evt.target||evt.srcElement);if(target){if(target.nodeName=="input"||target.nodeName=="textarea"){}else if(target.nodeName=="#document"){var cur_win=target.defaultView||target.parentWindow;var scrollLeft=('pageXOffset' in cur_win)?cur_win.pageXOffset:target.documentElement.scrollLeft;var scrollTop=('pageXOffset' in cur_win)?cur_win.pageYOffset:target.documentElement.scrollTop;var focused=target.activeElement;if(focused&&focused!=target.body){var pThis=focused._linked_element;if(!pThis){return;}if(pThis._restore_scrollpos_onclick){if(pThis._restore_scrollpos_timer>0){clearTimeout(pThis._restore_scrollpos_timer);pThis._restore_scrollpos_timer=0;}pThis._scoll_pos=[scrollLeft,scrollTop];nexacro._stopSysObserving(cur_win,"scroll","onscroll",pThis._on_sys_scroll);}}}}};_pInputElement.on_sys_focus_before_process=function(evt){return true;};_pInputElement.on_sys_focus_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis._accept_focus_process===false){pThis._accept_focus_process=true;return;}if((nexacro._Browser=="IE"&&nexacro._BrowserVersion==8||nexacro._BrowserType=="Edge")&&pThis._force_focus){pThis._force_focus=false;return;}var _parent=pThis.parent;if(_parent){if(pThis._need_reset_update_value){pThis.on_reset_update_value(true);}var comp=_parent.linkedcontrol;if(comp){var _win=comp._getWindow();if(_win&&_win._is_active_window){var cur_focus_paths=_win.getCurrentFocusPaths();var focuspath_index= -1;var rootComp=comp._getRootComponent(comp);if(cur_focus_paths){focuspath_index=nexacro._indexOf(cur_focus_paths,rootComp);}if(focuspath_index== -1){var old_focused_comp=cur_focus_paths?cur_focus_paths[cur_focus_paths.length-1]:null;if(old_focused_comp){if(pThis._use_event_beforeinput){pThis._skip_sys_keyinput=true;}if(nexacro._Browser=="Chrome"||nexacro._Browser=="Opera"||nexacro._OS=="iOS"){pThis.setElementValue(comp.value,pThis._is_invalid_value);}old_focused_comp._apply_setfocus();return;}}}}}pThis._is_sys_focused=true;var _doc=pThis._getRootWindowHandle();if(pThis.autoselect&&pThis.inputtype!="date"){pThis.__prevent_sys_lbuttonup=true;if(nexacro._OS=="iOS"){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,pThis._getInputValue().length);}else{nexacro.__setDOMNode_Select(_doc,input_handle);}}else if(pThis._last_selection_range&&!(nexacro._enableaccessibility&&nexacro._accessibilitytype==5)){var sel=pThis._last_selection_range;nexacro.__setDOMNode_SetSelect(_doc,input_handle,sel[0],sel[1]);}if(pThis.value==null){pThis._zerolength_value=undefined;}else{pThis._zerolength_value="";}var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.NONE,pos.begin);return true;};_pInputElement._on_sys_focus=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis){return;}if(!pThis.on_sys_focus_before_process(evt)){return;}if(!pThis.on_sys_focus_process(evt)){return;}}};_pInputElement.on_sys_blur_before_process=function(evt){return true;};_pInputElement.on_sys_blur_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis._accept_blur_process===false){pThis._accept_blur_process=true;return;}pThis._is_sys_focused=false;pThis._restore_scrollpos_onclick=false;pThis._skip_sys_keyinput=false;if(pThis._restore_scrollpos_timer>0){clearTimeout(pThis._restore_scrollpos_timer);pThis._restore_scrollpos_timer=0;}var cur_doc=pThis._getRootWindowHandle();if(cur_doc){var cur_win=cur_doc.defaultView||cur_doc.parentWindow;nexacro._stopSysObserving(cur_win,"scroll","onscroll",pThis._on_sys_scroll);nexacro._adjustBodyScrollPos(cur_doc);}if((nexacro._Browser=="IE"&&nexacro._BrowserVersion==8||nexacro._BrowserType=="Edge")&&pThis._force_focus){input_handle.focus();}return true;};_pInputElement._on_sys_blur=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(!pThis){return;}if(!pThis.on_sys_blur_before_process(evt)){return;}if(!pThis.on_sys_blur_process(evt)){return;}}};_pInputElement.on_sys_select_before_process=function(evt){return true;};_pInputElement.on_sys_select_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis._is_focused){var sel=pThis.getElementSelectionRange();if(sel&&sel[0]!=sel[1]){pThis._setElementLastSelectionRange(sel);}}return true;};_pInputElement._on_sys_select=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(pThis){if(!pThis.on_sys_select_before_process(evt)){return;}if(!pThis.on_sys_select_process(evt)){return;}}}};_pInputElement._on_sys_click=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(pThis){if(nexacro._OS=="Android"&&pThis.inputtype=="date"){if(pThis.parent.linkedcontrol._prevent_clickevent){evt.preventDefault();}}pThis._scrollintoview_on_sys_click();}}};_pInputElement.on_sys_touchstart_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis){if(pThis.inputtype=="date"&&pThis.readonly){nexacro._stopSysEvent(evt);return false;}}var touches=evt.touches;if(touches&&touches.length>1){nexacro._stopSysEvent(evt);}return true;};_pInputElement._on_sys_touchstart=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;pThis.on_sys_touchstart_process.call(pThis,evt);}};_pInputElement.on_sys_touchend_process=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(pThis){var pos=pThis.getElementCaretPos();pThis._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}return true;};_pInputElement._on_sys_touchend=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;pThis.on_sys_touchend_process.call(pThis,evt);}};_pInputElement._on_sys_touchmove=nexacro._emptyFn;_pInputElement._on_sys_animationstart=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;var animation_name=evt.animationName;switch(animation_name){case "nexainput_autofill":{pThis.setInputStatusPseudoClass("AUTOFILL",1);if(pThis.inputtype=="password"){nexacro.__changeInputDOMNodeType(input_handle,"password");}break;}case "nexainput_notautofill":{pThis.setInputStatusPseudoClass("AUTOFILL",0);if(pThis.value==null&&pThis.displaynulltext!=""){nexacro.__changeInputDOMNodeType(input_handle,"text");}break;}}}};if(_pInputElement._evtfire_oninput_only_when_backspacekey){_pInputElement._checkBackspaceKeyInKeyInput=function(old_value,value,begin,end){var ret=false;var old_pos=this._composer.getOffset();if(old_value){if(old_value.length>value.length){if(end<old_pos.end){var idx=old_value.substring(0,end).indexOf(value.substring(0,end));if(idx==0){ret=true;}}}}return ret;};_pInputElement._checkSelectionInKeyInput=function(old_value,value,begin,end){var ret=false;if(end-begin!=1){if(old_value&&old_value.length==begin){if(begin!=end){ret=true;for(var i=0;i<old_value.length;i++ ){if(old_value.charAt(i)!=value.charAt(i)){ret=i;break;}if(i==end){ret=i;break;}}}}}return ret;};}else{_pInputElement._checkBackspaceKeyInKeyInput=function(){return false;};_pInputElement._checkSelectionInKeyInput=function(){return false;};}_pInputElement=null;nexacro.TextAreaElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"input");this._need_reset_update_value=false;this._composer=new nexacro._CompositionState();this._imelocale=new nexacro._ImeLocale();};var _pTextAreaElement=new nexacro._createPrototype(nexacro.InputElement,nexacro.TextAreaElement);nexacro.TextAreaElement.prototype=_pTextAreaElement;_pTextAreaElement._type_name="TextAreaElement";_pTextAreaElement.typeselector="nexatextarea";_pTextAreaElement.usemultiline=true;_pTextAreaElement._use_html_maxlength=false;if(nexacro._BrowserType=="Edge"){_pTextAreaElement._BROWSER_SCROLLBAR_SIZE=0;}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11){_pTextAreaElement._BROWSER_SCROLLBAR_SIZE=0;}else if(nexacro._BrowserType=="WebKit"||nexacro._BrowserType=="Opera"){_pTextAreaElement._BROWSER_SCROLLBAR_SIZE=0;}else if(nexacro._Browser=="Gecko"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9)){_pTextAreaElement._BROWSER_SCROLLBAR_SIZE=17;}else{_pTextAreaElement._BROWSER_SCROLLBAR_SIZE=undefined;}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=10){_pTextAreaElement._use_proto=false;}else{_pTextAreaElement._use_proto=true;}_pTextAreaElement._createElementHandle=function(owner_elem,_doc){var handle=this.handle=_doc.createElement("textarea");var handle_style=handle.style;handle.id=this.name;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());nexacro.__setTextAreaDOMStyle_AbsoluteTransparent(handle.style);handle._linked_element=this;this._refreshCommonStyleProps(handle_style);var wordWrap=this.wordWrap||this._wordwrap_info;if(wordWrap){nexacro.__setTextAreaDOMNode_WordWrap(handle,wordWrap);}if(this.textAlign){nexacro.__setDOMStyle_textAlign(handle_style,this.textAlign,this.rtl);}if(this.padding){nexacro.__setDOMStyle_PaddingObject(handle_style,this.padding,this.rtl);}if(!this.enable){nexacro.__setDOMNode_Enable(handle,false);}if(this.readonly){nexacro.__setDOMNode_ReadOnly(handle,true);}if(this.value){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){nexacro.__setDOMNode_Value(handle,this.displayinvalidtext);}else{nexacro.__setDOMNode_Value(handle,this.value);}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==8){this._need_reset_update_value=true;}}else if(this.displaynulltext){nexacro.__setDOMNode_Value(handle,this.displaynulltext);}if(this.imemode){nexacro.__setDOMNode_ImeMode(handle,this.imemode);}if(this.maxlength>0&&this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(handle,this.maxlength);}if(nexacro._enableaccessibility){nexacro.__setDOMAccessibility_LabelBy(handle,this.parent_elem.name);if(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5){nexacro.__setDOMAccessibility_Role(handle,this.parent_elem.name);}}if(this.handle){nexacro.__appendDOMNode(owner_elem.dest_handle,this.handle);}};_pTextAreaElement._destroyInputHandle=function(){if(this.handle){var dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);this.handle._linked_element=null;nexacro.__removeDOMNode(dest_handle,this.handle);this.handle=null;}};_pTextAreaElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.rtl=this._isParentRtl();var handle_style=this._getCommonStyleStr();handle_style+=nexacro.__getTextAreaHTMLStyle_AbsoluteTransparent();if(!this.enable){handle_style+=nexacro.__getHTMLStyle_Enable(this.enable,this._disabled_color);}if(this.padding){handle_style+=nexacro.__getHTMLStyle_PaddingObject(this.padding,this.rtl);}if(this.textAlign){handle_style+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.imemode){if(this._imedisable){handle_style+=nexacro.__getHTMLStyle_ImeMode("disabled");}else{handle_style+=nexacro.__getHTMLStyle_ImeMode(this.imemode);}}var attr_str=nexacro.__getHTMLAttr_Enable(this.enable)+nexacro.__getHTMLAttr_Wrap(this.wordWrap||this._wordwrap_info)+nexacro.__getHTMLAttr_ReadOnly(this.readonly);if(this.maxlength>0&&this._use_html_maxlength){attr_str+=nexacro.__getHTMLAttr_MaxLength(this.maxlength);}var str="<textarea id='"+this.name+"' class='"+this._getElementNexaClassName("nexatextarea")+"' ";str+=(handle_style)?(" style='"+handle_style+"'"):"";str+=attr_str?(" "+attr_str)+">":">";if(this.value){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){str+=nexacro._encodeXml(this.displayinvalidtext);}else{str+=nexacro._encodeXml(this.value);}}else if(this.displaynulltext){str+=nexacro._encodeXml(this.displaynulltext);}else{str+="";}str+="</textarea>";return str;}return "";};if((nexacro._Browser=="IE"&&nexacro._BrowserVersion<10)||nexacro._BrowserType=="IE10"||nexacro._OS=="iOS"){_pTextAreaElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){var parent_elem=this.parent_elem;var padding=parent_elem.padding?parent_elem.padding:parent_elem._padding_info;if(padding){width-=padding.left+padding.right;height-=padding.top+padding.bottom;}this.width=width+this._getOverflowScrollSize();this.height=height+this._getOverflowScrollSize();if(width<0){width=0;}if(height<0){height=0;}var input_handle=this.handle;if(input_handle){var pos_before=this.getElementCaretPos();nexacro.__setDOMStyle_Size(input_handle.style,this.width,this.height);var pos_after=this.getElementCaretPos();if((pos_before!= -1&&pos_after!= -1)&&(pos_before.begin!=pos_after.begin||pos_before.end!=pos_after.end)){this.setElementSetSelect(0,0);this.setElementSetSelect(pos_before.begin,pos_before.end);}}}};}else{_pTextAreaElement.setElementSize=function(width,height){var scrollsize=this._getOverflowScrollSize();width+=scrollsize;height+=scrollsize;if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var input_handle=this.handle;if(input_handle){var pos_before=this.getElementCaretPos();nexacro.__setDOMStyle_Size(input_handle.style,this.width,this.height);var pos_after=this.getElementCaretPos();if((pos_before!= -1&&pos_after!= -1)&&(pos_before.begin!=pos_after.begin||pos_before.end!=pos_after.end)){this.setElementSetSelect(0,0);this.setElementSetSelect(pos_before.begin,pos_before.end);}}}};}_pTextAreaElement._applyMaxlength=function(){var input_handle=this.handle;if(this._checkmax_editing_only){var newValue=this.value;if(!nexacro._isNull(newValue)){if(this.maxlength>0&&newValue.length>this.maxlength){newValue=newValue.substring(0,this.maxlength);}}else{newValue=this.defaultvalue;}var domValue=this._getInputValue();if(domValue!==newValue){this._updateInputValue(newValue);if(nexacro._isNull(this.value)){nexacro.__setDOMNode_Type(input_handle,this.inputtype);nexacro.__setDOMStyle_ColorObject(input_handle.style,"");}}}};_pTextAreaElement.setElementFocus=function(trigger_type,self_flag){var input_handle=this.handle;if(input_handle){var _doc;if(!this._is_focused){this._is_focused=true;this._applyMaxlength();}if(!this._is_sys_focused){if(trigger_type=="lbutton"||trigger_type=="lbuttondown"||trigger_type=="rbuttondown"||trigger_type=="touch"||trigger_type=="tap"||trigger_type=="longpress"){if(!(nexacro._OS=="iOS"&&nexacro._enableaccessibility)){this._change_to_keypad_type();}}if(nexacro._BrowserType=="Edge"){if(self_flag!==true||trigger_type!="lbuttondown"){nexacro.__setInputDOMNodeFocus(input_handle);if(!this.autoselect&&trigger_type!=undefined&&trigger_type!="lbutton"){_doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,0);}}}}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==8){if(self_flag!==true||trigger_type!="lbuttondown"){if(!this.autoselect){_doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,0);setTimeout(function(){nexacro.__setInputDOMNodeFocus(input_handle);},0);}}else{nexacro.__setInputDOMNodeFocus(input_handle);}}}else{if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"){if(self_flag!==true||trigger_type==undefined){_doc=this._getRootWindowHandle();if(_doc){nexacro.__setDOMNode_SetSelect(_doc,input_handle,0,0);}}}if(!(nexacro._OS=="iOS"&&this.inputtype=="date")){nexacro.__setInputDOMNodeFocus(input_handle,trigger_type);}}}nexacro.__setLastFocusedElement(this);}};_pTextAreaElement.setElementEnable=function(enable,color){if(this.enable!=enable){this.enable=enable;if(!enable){this._disabled_color=color;}else{this._disabled_color=null;}var input_handle=this.handle;if(input_handle){nexacro.__setTextAreaDOMNode_Enable(input_handle,enable);nexacro.__setDOMStyle_ColorObject(input_handle.style,this.color);}}};_pTextAreaElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this._wordwrap_info=wordwrap;var input_handle=this.handle;if(input_handle){if(!this.wordWrap&&oldwordwrap!=wordwrap){nexacro.__setTextAreaDOMNode_Wrap(input_handle,wordwrap);}}}};_pTextAreaElement.setElementWordWrap=function(wordWrap){if(this.wordWrap!=wordWrap){this.wordWrap=wordWrap;var input_handle=this.handle;if(input_handle){nexacro.__setTextAreaDOMNode_WordWrap(input_handle,wordWrap);if(!this._is_focused&&this.value==null&&this.displaynulltext){this._updateInputValue(this.displaynulltext);}else{if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){this._updateInputValue(this.displayinvalidtext);}else{this._updateInputValue(this.getElementText());}}}}};_pTextAreaElement.setElementValue=function(value){if(value){value=value.replace(/\r\n/g,"\n");}this._setElementValue(value);};_pTextAreaElement._setElementValue=function(value){var comp=this.parent.linkedcontrol;var html_position_style=nexacro._getHTMLPositionStyle();if(html_position_style){nexacro._setHTMLPositionStyle("absolute");}nexacro.InputElement.prototype.setElementValue.call(this,value);if(html_position_style){nexacro._OnceCallbackTimer.callonce(comp,function(){nexacro._setHTMLPositionStyle(html_position_style);});}};_pTextAreaElement.updateElementText=function(value,caretpos){if(value){value=value.replace(/\r\n/g,"\n");}nexacro.InputElement.prototype.updateElementText.call(this,value,caretpos);};_pTextAreaElement._updateElementValue=function(value){if(value){value=value.replace(/\r\n/g,"\n");}nexacro.InputElement.prototype._updateElementValue.call(this,value);};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pTextAreaElement._getInputValue=function(){var value=nexacro.InputElement.prototype._getInputValue.call(this);if(value){return value.replace(/\r\n/g,"\n");}return value;};}else{_pTextAreaElement._getInputValue=function(){return nexacro.InputElement.prototype._getInputValue.call(this);};}_pTextAreaElement.on_reset_update_value=function(resetpos){return true;};_pTextAreaElement.setElementInputType=function(type,bImedisable){var input_handle=this.handle;if(this._imedisable!=bImedisable){this._imedisable=bImedisable?bImedisable:false;if(input_handle){nexacro.__setDOMNode_ImeMode(input_handle,this._imedisable?"disabled":this.imemode);}}};_pTextAreaElement.setElementSetSelect=function(start,end){var input_handle=this.handle;if(input_handle){var value=this._getInputValue();end=(typeof end=='number')?(end== -1?value.length:end):start;this._setElementLastSelectionRange([start,end]);if(this._is_focused){nexacro.__setTextAreaDOMNodeSetSelect(this._getRootWindowHandle(),input_handle,start,end);}}};_pTextAreaElement.getElementCaretPos=function(){var input_handle=this.handle;if(input_handle&&this._is_focused){var _doc=this._getRootWindowHandle();if(_doc){return nexacro.__getTextAreaDOMNodeCaretPos(_doc,input_handle);}}return  -1;};_pTextAreaElement.getElementSelectionRange=function(){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this._last_selection_range){return this._last_selection_range;}var _doc=this._getRootWindowHandle();if(_doc){var sel=nexacro.__getTextAreaDOMNodeSelectionRange(_doc,input_handle);return sel.slice(0,2);}}return [0,0];};_pTextAreaElement.getElementCaretLine=function(){var input_handle=this.handle;if(input_handle&&this._is_focused){var _doc=this._getRootWindowHandle();if(_doc){return nexacro.__getTextAreaDOMNodeCaretLine(_doc,input_handle,this.wordWrap,this.font);}}return 0;};_pTextAreaElement.getElementTextLineCount=function(withwrap){var input_handle=this.handle;if(input_handle){var _doc=this._getRootWindowHandle();if(_doc){var wordWrap=withwrap?this.wordWrap:"none";return nexacro.__getTextAreaDOMNodeTextLineCount(_doc,input_handle,input_handle.value,wordWrap,this.font);}}return 0;};_pTextAreaElement.isFirstCaretLine=function(){var input_handle=this.handle;if(input_handle&&this._is_focused){var _doc=this._getRootWindowHandle();if(_doc){var sel=nexacro.__getTextAreaDOMNodeSelectionRange(_doc,input_handle);var start=sel[0],end=sel[1],direction=sel[2];var text=this._getInputValue();if(direction=="none"||direction=="backward"){text=text.slice(0,start);}else{text=text.slice(0,end);}if(text==""){return true;}if(/[\r\n]/g.test(text)){return false;}var lines=nexacro.__getTextAreaDOMNodeTextLineCount(_doc,input_handle,text,this.wordWrap,this.font);if(lines<=1){return true;}}}return false;};_pTextAreaElement.isLastCaretLine=function(){var input_handle=this.handle;if(input_handle&&this._is_focused){var _doc=this._getRootWindowHandle();if(_doc){var sel=nexacro.__getTextAreaDOMNodeSelectionRange(_doc,input_handle);var end,direction=sel[2];var text=this._getInputValue();var remain_text;if(direction=="backward"){end=sel[0];}else{end=sel[1];}remain_text=text.slice(end);if(remain_text==""){return true;}if(/[\r\n]/g.test(remain_text)){return false;}var newline=text.lastIndexOf('\n');if(newline<0){newline=text.lastIndexOf('\r');}if(newline>=0){newline+=1;}else{newline=0;}var full_text=text.slice(newline);var full_lines=nexacro.__getTextAreaDOMNodeTextLineCount(_doc,input_handle,full_text,this.wordWrap,this.font);var prev_text=text.slice(newline,end);var prev_lines=nexacro.__getTextAreaDOMNodeTextLineCount(_doc,input_handle,prev_text,this.wordWrap,this.font);if(full_lines==prev_lines){return true;}}}return false;};_pTextAreaElement.setElementScrollPos=function(hpos,vpos){if(hpos<0){hpos=0;}if(vpos<0){vpos=0;}this.setElementHScrollPos(hpos);this.setElementVScrollPos(vpos);};_pTextAreaElement.getElementHScrollPos=function(){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return 0;}if(this.rtl){return (input_handle.scrollWidth-input_handle.clientWidth-input_handle.scrollLeft);}else{return input_handle.scrollLeft;}}return 0;};_pTextAreaElement.setElementHScrollPos=function(v){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return;}if(this.rtl){input_handle.scrollLeft=(input_handle.scrollWidth-input_handle.clientWidth-v);}else{input_handle.scrollLeft=v;}}};_pTextAreaElement.getElementVScrollPos=function(){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return 0;}return input_handle.scrollTop;}return 0;};_pTextAreaElement.setElementVScrollPos=function(v){var input_handle=this.handle;if(input_handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return;}input_handle.scrollTop=v;}};_pTextAreaElement.getElementScrollWidth=function(){var input_handle=this.handle;var ret=0;if(input_handle){var scrollmax=input_handle.scrollWidth-input_handle.clientWidth;ret=this.parent_elem.client_width+scrollmax;}return ret;};_pTextAreaElement.getElementScrollHeight=function(){var input_handle=this.handle;var ret=0;if(input_handle){var scrollmax=input_handle.scrollHeight-input_handle.clientHeight;ret=this.parent_elem.client_height+scrollmax;}return ret;};_pTextAreaElement._getOverflowScrollSize=function(){if(this._BROWSER_SCROLLBAR_SIZE===undefined){nexacro.TextAreaElement.prototype._BROWSER_SCROLLBAR_SIZE=nexacro.__getOverflowScrollSize();}var ret=this._BROWSER_SCROLLBAR_SIZE;if(nexacro._Browser=="Gecko"){var ratio=window.devicePixelRatio;ret=ret/(ratio?ratio:1);}return ret;};_pTextAreaElement._bindSysEvent=function(){var input=this.handle;if(input){nexacro.InputElement.prototype._bindSysEvent.call(this);nexacro._observeSysEvent(input,"scroll","onscroll",this._on_sys_scroll);}};_pTextAreaElement._unbindSysEvent=function(){var input=this.handle;if(input){nexacro.InputElement.prototype._unbindSysEvent.call(this);nexacro._stopSysObserving(input,"scroll","onscroll",this._on_sys_scroll);}};_pTextAreaElement._on_sys_scroll=function(evt){var input_handle=(evt.target||evt.srcElement);if(input_handle){var pThis=input_handle._linked_element;if(pThis){var parent_elem=pThis.parent_elem;var comp=parent_elem.linkedcontrol;var _win=comp._getWindow();var evtid="";var scrolltype=parent_elem._scrolltype;var pos=pThis.getElementCaretPos();var bWheel=false;var bResetPos=false;var bScroll=false;if(_win&&(_win._cur_ldown_elem||_win._cur_mdown_elem)){if(_win._cur_mdown_elem){bWheel=true;}bResetPos=true;}else if(nexacro._isTouchInteraction){if(_win&&_win._cur_touch_elem||(pos&&pos!= -1&&pos.begin!=pos.end)){bResetPos=true;}}if(bResetPos){var hscroll_pos=parent_elem.scroll_left;var vscroll_pos=parent_elem.scroll_top;if(hscroll_pos!=input_handle.scrollLeft){if(scrolltype!="none"&&scrolltype!="vertical"&&!comp._is_tracking){if(pThis.rtl){var rtlhscroll_pos=(input_handle.scrollWidth-input_handle.clientWidth-input_handle.scrollLeft);if(hscroll_pos!=rtlhscroll_pos){bScroll=true;}}else{hscroll_pos=input_handle.scrollLeft;bScroll=true;}}if(bWheel){evtid="mousewheel_h";}}if(vscroll_pos!=input_handle.scrollTop){if(scrolltype!="none"&&scrolltype!="horizontal"&&!comp._is_tracking){vscroll_pos=input_handle.scrollTop;bScroll=true;}if(bWheel){evtid="mousewheel_v";}}if(bScroll){comp._scrollTo(hscroll_pos,vscroll_pos,true,false,undefined,evtid);}}}}};_pTextAreaElement._on_sys_paste=function(evt){var input_handle=(evt.target||evt.srcElement);var pThis=input_handle._linked_element;if(!pThis.on_sys_paste_before_process.call(pThis,evt)){return false;}var data;if(evt.clipboardData&&evt.clipboardData.getData){data=evt.clipboardData.getData('text/plain');}else if(window.clipboardData&&window.clipboardData.getData){data=window.clipboardData.getData('text');}if(input_handle&&!input_handle._linked_element._use_event_beforeinput&&data){var value=pThis._getInputValue();var pos=pThis.getElementCaretPos();var begin=pos.begin;var end=pos.end;data=data.replace(/&quot;/g,"\"");if(data.indexOf("\r\n")!= -1||data.indexOf("\n\r")!= -1){data=data.replace(/\r\n|\n\r/g,"\n");}if(data.indexOf("\r")!= -1){data=data.replace(/\r/g,"");}var newvalue=value.substring(0,begin)+data+value.substring(end);var newpos=begin+data.length;pos.end=newpos;nexacro._stopSysEvent(evt);pThis._paste_caret_pos=pos;pThis._updateInputValue(newvalue,true,newpos);pThis._paste_caret_pos=null;pos=pThis.getElementCaretPos();setTimeout(function(){pThis.setElementSetSelect(pos.begin,pos.end);},0);return false;}};_pTextAreaElement.on_apply_imeSet=function(evt){var i,len;var input_handle=evt?(evt.target||evt.srcElement):this.handle;var pThis=input_handle?input_handle._linked_element:this;var _locale=pThis._imelocale.getLocale();if(_locale&&nexacro._cache_inputelement_set[_locale]&&nexacro._cache_textareaelement_set[_locale]){if(this._use_proto){for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis.__proto__[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}for(var prop in nexacro._cache_inputelement_set[_locale]){pThis.__proto__[prop]=nexacro._cache_inputelement_set[_locale][prop];}}else{for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}for(var prop in nexacro._cache_inputelement_set[_locale]){pThis[prop]=nexacro._cache_inputelement_set[_locale][prop];}}for(var prop in nexacro._cache_textareaelement_set[_locale]){pThis[prop]=nexacro._cache_textareaelement_set[_locale][prop];}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(!nexacro._cache_inputelement_set[_locale][nexacro._inputelement_user_override_func[i]]&&!nexacro._cache_textareaelement_set[_locale][nexacro._inputelement_user_override_func[i]]&&pThis[nexacro._inputelement_user_override_func[i]]!==nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[i]];}}}else if(_locale&&nexacro._cache_inputelement_set[_locale]){if(this._use_proto){for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis.__proto__[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}for(var prop in nexacro._cache_inputelement_set[_locale]){pThis.__proto__[prop]=nexacro._cache_inputelement_set[_locale][prop];}}else{for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}for(var prop in nexacro._cache_inputelement_set[_locale]){pThis[prop]=nexacro._cache_inputelement_set[_locale][prop];}}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(!nexacro._cache_inputelement_set[_locale][nexacro._inputelement_user_override_func[i]]&&pThis[nexacro._inputelement_user_override_func[i]]!==nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[i]];}}}else if(_locale&&nexacro._cache_textareaelement_set[_locale]){if(this._use_proto){for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis.__proto__[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}else{pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}for(var prop in nexacro._cache_textareaelement_set[_locale]){pThis[prop]=nexacro._cache_textareaelement_set[_locale][prop];}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(!nexacro._cache_textareaelement_set[_locale][nexacro._inputelement_user_override_func[i]]&&pThis[nexacro._inputelement_user_override_func[i]]!==nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[i]];}}}else{if(this._use_proto){for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis.__proto__[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}else{for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(pThis[nexacro._inputelement_user_override_func[i]]!==nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[i]];}}}var comp=pThis.parent_elem.linkedcontrol;if(comp.on_apply_imeSet){comp.on_apply_imeSet();}pThis.on_apply_ime_environment(evt);};_pTextAreaElement=null;nexacro.ControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var _pControlElement=nexacro._createPrototype(nexacro.Element,nexacro.ControlElement);nexacro.ControlElement.prototype=_pControlElement;_pControlElement._type_name="ControlElement";_pControlElement.enable=true;_pControlElement.tabindex= -1;_pControlElement.zindex= -1;_pControlElement.color=null;_pControlElement.font=null;_pControlElement.textDecoration=null;_pControlElement.borderRadius=null;_pControlElement.border=null;_pControlElement.background=null;_pControlElement.edge=null;_pControlElement.padding=null;_pControlElement.cursor=null;_pControlElement.opacity=null;_pControlElement.boxShadow=null;_pControlElement.position_step=undefined;_pControlElement.linkedcontrol=null;_pControlElement.inner_width=0;_pControlElement.inner_height=0;_pControlElement.client_left=0;_pControlElement.client_top=0;_pControlElement.client_width=0;_pControlElement.client_height=0;_pControlElement._client_left=0;_pControlElement._client_top=0;_pControlElement._classname="";_pControlElement._is_popup=false;_pControlElement.zoom=100;_pControlElement._edge_elem=null;_pControlElement._apply_client_padding=true;_pControlElement._border_info=null;_pControlElement._padding_info=null;_pControlElement._edge_info=null;_pControlElement.accessibilityrole="";_pControlElement.accessibilityenable=true;_pControlElement.accessibilitylabel="";_pControlElement.accessibilitydesclevel="";_pControlElement.accessibilitydescription="";_pControlElement.accessibilityaction="";_pControlElement.accessibility_value=undefined;_pControlElement.accessibility_stat_disabled=undefined;_pControlElement.accessibility_stat_hidden=undefined;_pControlElement.accessibility_stat_checked=undefined;_pControlElement.accessibility_stat_pressed=undefined;_pControlElement.accessibility_stat_selected=undefined;_pControlElement.accessibility_stat_expanded=undefined;_pControlElement.accessibility_stat_autocomplete=undefined;_pControlElement.accessibility_flag_haspopup=undefined;_pControlElement.accessibility_flag_focusable=undefined;_pControlElement.accessibility_flag_readonly=undefined;_pControlElement.accessibility_flag_password=undefined;_pControlElement.accessibility_flag_multiselectable=undefined;_pControlElement.accessibility_flag_selectable=undefined;_pControlElement.accessibility_flag_defaultbutton=undefined;_pControlElement.accessibility_prop_itemcount=undefined;_pControlElement.accessibility_prop_itemindex=undefined;_pControlElement.accessibility_prop_valuemax=undefined;_pControlElement.accessibility_prop_valuemin=undefined;_pControlElement.create=nexacro._emptyFn;_pControlElement.destroy=nexacro._emptyFn;_pControlElement.clearContents=nexacro._emptyFn;_pControlElement.setElementStepCount=nexacro._emptyFn;_pControlElement.setElementStepIndex=nexacro._emptyFn;_pControlElement.borderLeftNone=false;_pControlElement.borderTopNone=false;_pControlElement.borderRightNone=false;_pControlElement.borderBottomNone=false;_pControlElement.create=function(win){var _doc,owner_elem,handle;var handle_style;if(!this._is_popup){owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;_doc=win._doc||owner_elem._getRootWindowHandle();handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;var bPositionRtl=this._isParentRtl();this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());if(!this._is_simple_control){var inner_node=_doc.createElement("div");this.dest_handle=inner_node;nexacro.__setDOMNode_ClassName(inner_node,this._getElementNexaClassName("nexasimplecontainer"));nexacro.__setDOMNode_Id(inner_node,"","nexacontainer");nexacro.__appendDOMNode(handle,inner_node);var innernodestyle=inner_node.style;nexacro.__setDOMStyle_Pos(innernodestyle,this.client_left,this.client_top,bPositionRtl);if(this.client_width&&this.client_height){nexacro.__setDOMStyle_Size(innernodestyle,this.client_width,this.client_height);}}handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,bPositionRtl);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);this._refreshControl(handle,handle_style,_doc);if(this._isMultiInnerProc()){nexacro.__appendDOMNode((this._is_nc_element)?owner_elem.handle:owner_elem._getDestHandle(this.top),handle);}else{nexacro.__appendDOMNode((this._is_nc_element)?owner_elem.handle:owner_elem.dest_handle,handle);}}}}else{_doc=this._doc=win._doc;owner_elem=win;handle=_doc.createElement("div");var linkedcontrol=this.linkedcontrol;handle._linked_element=this;handle.id=this.name;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);if(linkedcontrol._findOwnerElementHandle){var owner_elem_info=linkedcontrol._findOwnerElementHandle();if(owner_elem_info.is_append){if(owner_elem_info.ref_handle){nexacro.__appendDOMNode(owner_elem_info.ref_handle,handle);}else{nexacro.__appendDOMNode(owner_elem_info.owner_handle,handle);}this.owner_elem=owner_elem_info.owner_handle._linked_element;}else{nexacro.__insertDOMNode(owner_elem_info.owner_handle,handle,owner_elem_info.ref_handle);this.owner_elem=owner_elem.dest_handle._linked_element;}}else{nexacro.__appendDOMNode(owner_elem.dest_handle,handle);this.owner_elem=owner_elem;}this._refreshControl(handle,handle_style,_doc);this._frame_node=nexacro._createFrameNode(handle,this.left,this.top,_doc,this.width,this.height);if(this._frame_node){this._frame_node._linked_element=this;nexacro._observeSysEvent(this._frame_node,"load","onload",this._iframe_eventhandler_onload);}}};_pControlElement._iframe_eventhandler_onload=function(evt){if(window.event){evt=window.event;}var node=evt.target;if(!node){return;}try{var _doc=node.contentDocument||node.contentWindow.document;if(this._linked_element){nexacro._observeSysEvent(_doc,"contextmenu","oncontextmenu",this._linked_element._iframe_eventhandler_oncontextmenu);}}catch(e){}};_pControlElement._iframe_eventhandler_oncontextmenu=function(evt){return nexacro._stopSysEvent(evt);};_pControlElement._getControlStatusStr=function(){var str="";if(this.status){str+=nexacro.__getHTMLAttr_Status(this.status);}if(this.userstatus){str+=nexacro.__getHTMLAttr_UserStatus(this.userstatus);}return str;};_pControlElement.createCommandStart=function(){if(!this._is_popup){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this.handle){this.owner_elem=owner_elem;var str="<div id='"+this.name+"' class='"+this._getElementClassName()+"' tabindex ='"+this.tabindex+"' ";if(!nexacro._isNull(this.tooltiptext)){if(nexacro._AccessibilityUtil.isUseTooltipText()){str+=" title = '"+this.tooltiptext+"' ";}}var acc_str=this._getAccessibilityInfoStr();var style_str=this._getControlStyleStr();var status_str=this._getControlStatusStr();str+=status_str?(" "+status_str):"";str+=style_str?(" style='"+style_str+"'"):"";str+=acc_str?(" "+acc_str+">"):">";var edge_elem=this._edge_elem;if(edge_elem){str+=edge_elem.createCommand();}if(this._client_elem&&!this._is_popup){str+=this._client_elem.createCommandStart();}else if(!this._is_simple_control){style_str="";if(this.client_left||this.client_top){style_str+=nexacro.__getHTMLStyle_Pos(this.client_left,this.client_top,this._isParentRtl());}if(this.client_width&&this.client_height){style_str+=nexacro.__getHTMLStyle_Size(this.client_width,this.client_height);}str+="<div class='"+this._getElementNexaClassName("nexasimplecontainer")+"' id='nexacontainer' ";str+=style_str?(" style='"+style_str+"' >"):" >";}return str;}}return "";};_pControlElement._on_createCommandEnd=function(){return "";};_pControlElement.createCommandEnd=function(){if(!this._is_popup){var str="";if(this._client_elem&&!this._is_popup){str=this._client_elem.createCommandEnd();}else if(!this._is_simple_control){str+="</div>";}str+=this._on_createCommandEnd();str+="</div>";return str;}return "";};_pControlElement._on_attachHandle=nexacro._emptyFn;_pControlElement.attachHandle=function(win){if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){handle._linked_element=this;if(this._is_simple_control){this.handle=this.dest_handle=handle;}else if(this._client_elem){this.handle=this.dest_handle=handle;this._client_elem.attachHandle(win);}else{this.handle=handle;this.dest_handle=handle.lastChild;}var edge_elem=this._edge_elem;if(edge_elem){edge_elem.attach_handle_fromparent(handle);}this._setAccessibility_notify();this._on_attachHandle(win);}}};_pControlElement._on_destroy=nexacro._emptyFn;_pControlElement.destroy=function(){var handle=this.handle;if(handle){this._removeElementHandle();this.dest_handle=null;if(this._is_popup){nexacro._destroyFrameNode(handle,this._frame_node);this._frame_node=null;}if(this._edge_elem){this._edge_elem.destroy();this._edge_elem=null;}if(this._client_elem){this._client_elem.destroy();this._client_elem=null;}this._on_destroy();}this.owner_elem=null;this.handle=null;this.parent=null;this.parent_elem=null;this.linkedcontrol=null;};_pControlElement.initElementInfo=function(){var control=this.linkedcontrol;this.client_width=0;this.client_height=0;this._is_simple_control=control._is_simple_control;this._is_popup=control._is_popup_control;this._use_translate_move=(control._use_translate_move===false)?control._use_translate_move:nexacro._use_translate_scroll;this._use_container_move=control._use_container_move;this._apply_client_padding=control._apply_client_padding;};_pControlElement.setLinkedControl=function(control){if(!this.linkedcontrol&&control){this.parent=control;this.linkedcontrol=control;this.id=control.id;this.name=control._unique_id;}};_pControlElement.setElementPositionStep=function(position_step){if(this.position_step!=position_step||position_step== -1){this.position_step=position_step;var handle=this.handle;if(handle&&this.parent_elem){var old_owner_elem=this.owner_elem;var owner_elem=this.parent_elem.getContainerElement(position_step);if(old_owner_elem&&old_owner_elem.dest_handle&&owner_elem&&owner_elem.dest_handle){nexacro.__unlinkDOMNode(old_owner_elem.dest_handle,this.handle);nexacro.__appendDOMNode(owner_elem.dest_handle,this.handle);this.owner_elem=owner_elem;}}}};_pControlElement._on_clearContents=nexacro._emptyFn;_pControlElement.clearContents=function(){if(this.handle&&this._client_elem){this._client_elem.clearContents();this._on_clearContents();}};_pControlElement.appendChildElement=function(child_elem){if(this.handle){if(child_elem.parent_elem!=this){child_elem.parent_elem=this;}if(!child_elem.handle){child_elem.create(this._getWindow());}else{child_elem._appendToContainer(this.getContainerElement(child_elem.position_step));}}};_pControlElement.insertChildElement=function(child_elem,before_elem){if(this.handle){if(child_elem.parent_elem!=this){child_elem.parent_elem=this;}if(!child_elem.handle){child_elem.create(this._getWindow());}else{child_elem._insertToContainer(this.getContainerElement(child_elem.position_step),before_elem);}}};_pControlElement.removeChildElement=function(child_elem){if(child_elem.parent_elem==this){child_elem._removeFromContainer();}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pControlElement._getComputedStyle=function(prop,noflush){var handle=this.handle;if(handle&&prop){return handle.currentStyle[prop];}};_pControlElement._getComputedStyleBackgroundColor=function(noflush){var handle=this.handle;if(handle){return handle.currentStyle["backgroundColor"];}};}else{_pControlElement._getComputedStyle=function(prop,noflush){var handle=this.handle;if(handle&&prop){var style=window.getComputedStyle(handle,null);return style.getPropertyValue(prop);}};_pControlElement._getComputedStyleBackgroundColor=function(noflush){var handle=this.handle;if(handle){var style=window.getComputedStyle(handle,null);return style.getPropertyValue("background-color");}};}_pControlElement._flushCommand=nexacro._emptyFn;_pControlElement._getComputedStyleSubValue=nexacro._emptyFn;_pControlElement._sendToBackElement=function(elem){if(elem&&elem.owner_elem==this&&elem.handle){nexacro.__sendDOMNodeToBack(elem.handle);}};_pControlElement._bringToFrontElement=function(elem){if(elem&&elem.owner_elem==this&&elem.handle){nexacro.__bringDOMNodeToFront(elem.handle);}};_pControlElement._moveToNextElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__moveDOMNodeToNext(elem.handle,base_elem.handle);}};_pControlElement._moveToPrevElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__moveDOMNodeToPrev(elem.handle,base_elem.handle);}};_pControlElement.sendToBackElement=function(elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._sendToBackElement(elem);};_pControlElement.bringToFrontElement=function(elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._bringToFrontElement(elem);};_pControlElement.moveToNextElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._moveToNextElement(elem,base_elem);};_pControlElement.moveToPrevElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._moveToPrevElement(elem,base_elem);};_pControlElement.saveToImageFile=nexacro._emptyFn;_pControlElement.saveToImageObject=nexacro._emptyFn;_pControlElement._setElementHScrollPos=function(hpos){var handle=this.handle;if(handle){nexacro.__setDOMNode_HScrollPos(handle,hpos);}};_pControlElement._setElementVScrollPos=function(vpos){var handle=this.handle;if(handle){nexacro.__setDOMNode_VScrollPos(handle,vpos);}};_pControlElement._setElementScrollPos=function(hpos,vpos){var handle=this.handle;if(handle){nexacro.__setDOMNode_Offset(handle,hpos,vpos);}};_pControlElement.setElementTranslateStart=function(){if(this._client_elem){this._client_elem._setElementTranslateStart();}};_pControlElement.setElementTranslateEnd=function(){if(this._client_elem){this._client_elem._setElementTranslateEnd();}};_pControlElement.setElementHScrollPos=function(hpos){if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}if(this.scroll_left!=hpos||this._reset_scrollpos){this.scroll_left=hpos;if(this._use_container_move){this._client_elem._setElementHScrollPos(hpos);}if(this.linkedcontrol){this.linkedcontrol._setHscrollPos(hpos);}}};_pControlElement.setElementVScrollPos=function(vpos){if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_top!=vpos||this._reset_scrollpos){this.scroll_top=vpos;if(this._use_container_move){this._client_elem._setElementVScrollPos(vpos);}if(this.linkedcontrol){this.linkedcontrol._setVscrollPos(vpos);}}};_pControlElement.setElementScrollPos=function(hpos,vpos){if(hpos<0){hpos=0;}if(vpos<0){vpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_left!=hpos||this.scroll_top!=vpos){this.scroll_left=hpos;this.scroll_top=vpos;if(this._use_container_move){this._client_elem._setElementScrollPos(hpos,vpos);}if(this.linkedcontrol){this.linkedcontrol._setHscrollPos(hpos);this.linkedcontrol._setVscrollPos(vpos);}}};_pControlElement.getElementScrollLeft=function(){return 0;};_pControlElement.getElementScrollTop=function(){return 0;};_pControlElement.getElementScrollWidth=function(){return this.inner_width;};_pControlElement.getElementScrollHeight=function(){return this.inner_height;};_pControlElement.beginTransitionEffect=nexacro._emptyFn;_pControlElement.applyTransitionEffect=nexacro._emptyFn;_pControlElement.cancelTransitionEffect=nexacro._emptyFn;_pControlElement._getElementClassName=function(){var classname=this.typeselector;if(this.rtl){classname+=" nexartl";}if(this.idselector){classname+=" "+this.idselector;}if(this.classselector){classname+=" "+this.classselector;}if(this._use_translate_move){classname+=" nexatransform";}return classname;};_pControlElement.setElementTypeCSSSelector=function(typename){if(this.typeselector!=typename){this.typeselector=typename;var handle=this.handle;if(handle){var classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setDOMNode_ClassName(handle,classname);}}}};_pControlElement.setElementClassCSSSelector=function(classname){if(this.classselector!=classname){this.classselector=classname;var handle=this.handle;if(handle){classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setDOMNode_ClassName(handle,classname);}}}};_pControlElement.setElementIDCSSSelector=function(id){if(this.idselector!=id){this.idselector=id;var handle=this.handle;if(handle){var classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setDOMNode_ClassName(handle,classname);}}}};_pControlElement.setElementCSSMapInfo=function(border,padding,edge){var change_border=false,change_padding=false;if(this._border_info!=border){this._border_info=border;change_border=(this.border==null);}if(this._padding_info!=padding){this._padding_info=padding;change_padding=(this.padding==null);}if(this._edge_info!=edge){this._edge_info=edge;}var handle=this.handle;var change_inner=(change_border&&this._updateInnerSize());var create_edge=false;var edge_elem=this._edge_elem;if(edge_elem){if((this.edge&&this.edge.value!="none")||(this._edge_info&&this._edge_info.value!="none")){if(change_inner){edge_elem.setElementSize(this.inner_width,this.inner_height);}if(this.edge==null){edge_elem.setElementInfo(null,edge);}}else{edge_elem.destroy();this._edge_elem=null;}}else{if(this.edge){if(this.edge.value!="none"){create_edge=true;}}else if(this._edge_info){if(this._edge_info.value!="none"){create_edge=true;}}if(create_edge){edge_elem=this._edge_elem=new nexacro._EdgeImageElement(this);edge_elem.setElementSize(this.inner_width,this.inner_height);edge_elem.setElementInfo(this.edge,edge);if(handle){edge_elem.create();}}}if(change_inner||change_padding){this._updateClientRect();}};_pControlElement.setElementZIndex=function(zindex){if(this.zindex!=zindex){this.zindex=zindex;var handle=this.handle;if(handle){nexacro.__setDOMStyle_Zindex(handle.style,zindex);}}};_pControlElement.setElementToolTip=function(tooltiptext,tooltiptype){if(this.tooltiptext!=tooltiptext||this.tooltiptype!=tooltiptype){this.tooltiptext=tooltiptext;this.tooltiptype=tooltiptype;var handle=this.handle;if(handle){nexacro.__setDOMNode_ToolTip(handle,tooltiptext,tooltiptype);}}};_pControlElement.setElementFocus=function(selffocus){var handle=this.handle;if(handle){nexacro.__setDOMNode_Focus(handle,selffocus);nexacro.__setLastFocusedElement(this);}};_pControlElement.setElementSize=function(width,height){if(width<0){width=0;}if(height<0){height=0;}if(this.handle){nexacro.__setDOMStyle_Size(this.handle.style,width,height);if(width==0||height==0){var border=nexacro.BorderObject("0px none");nexacro.__setDOMStyle_BorderObject(this.handle.style,border,this.rtl);}else if(this.width==0||this.height==0){nexacro.__setDOMStyle_BorderObject(this.handle.style,this.border,this.rtl);if(this.borderLeftNone||this.borderTopNone||this.borderRightNone||this.borderBottomNone){nexacro.__setDOMStyle_BorderNone(this.handle.style,this.borderLeftNone,this.borderTopNone,this.borderRightNone,this.borderBottomNone,this.border,this.rtl);}}}this.width=width;this.height=height;if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}if(this._frame_node){nexacro.__setDOMStyle_Size(this._frame_node.style,width,height);}};_pControlElement.setElementBorderRadius=function(borderRadius){if(this.borderRadius!=borderRadius){this.borderRadius=borderRadius;if(this.handle){nexacro.__setDOMStyle_BorderRadiusObject(this.handle.style,borderRadius,this.rtl);}}};_pControlElement.setElementBorder=function(border){if(this.border!=border){this.border=border;if(this.handle){nexacro.__setDOMStyle_BorderObject(this.handle.style,border,this.rtl);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBorderLeftNone=function(borderleft){if(this.borderLeftNone!=borderleft){this.borderLeftNone=borderleft;if(this.handle){nexacro.__setDOMStyle_BorderLeftNone(this.handle.style,borderleft);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBorderTopNone=function(bordertop){if(this.borderTopNone!=bordertop){this.borderTopNone=bordertop;if(this.handle){nexacro.__setDOMStyle_BorderTopNone(this.handle.style,bordertop);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBorderRightNone=function(borderright){if(this.borderRightNone!=borderright){this.borderRightNone=borderright;if(this.handle){nexacro.__setDOMStyle_BorderRightNone(this.handle.style,borderright);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBorderBottomNone=function(borderbottom){if(this.borderBottomNone!=borderbottom){this.borderBottomNone=borderbottom;if(this.handle){nexacro.__setDOMStyle_BorderBottomNone(this.handle.style,borderbottom);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBorderNone=function(borderleft,bordertop,borderright,borderbottom){if(borderleft!=this.borderLeftNone||bordertop!=this.borderTopNone||borderright!=this.borderRightNone||borderbottom!=this.borderBottomNone){this.borderLeftNone=borderleft;this.borderTopNone=bordertop;this.borderRightNone=borderright;this.borderBottomNone=borderbottom;if(this.handle){nexacro.__setDOMStyle_BorderNone(this.handle.style,borderleft,bordertop,borderright,borderbottom,this.border,this.rtl);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBackground=function(background){if(this.background!=background){this.background=background;var handle=this.handle;if(handle){nexacro.__setDOMStyle_BackgroundObject(handle.style,background,this.rtl);}}};_pControlElement.setElementEdge=function(edge){if(this.edge!=edge){this.edge=edge;var create_edge=false;var edge_elem=this._edge_elem;if(edge_elem){if(edge){if(edge.value=="none"){edge_elem.destroy();this._edge_elem=null;}else{edge_elem.setElementInfo(edge,this._edge_info);}}else if(this._edge_info){if(this._edge_info.value=="none"){edge_elem.destroy();this._edge_elem=null;}else{edge_elem.setElementInfo(null,this._edge_info);}}else{edge_elem.destroy();this._edge_elem=null;}}else{if(edge){if(edge.value!="none"){create_edge=true;}}else if(this._edge_info){if(this._edge_info.value!="none"){create_edge=true;}}if(create_edge){edge_elem=this._edge_elem=new nexacro._EdgeImageElement(this);edge_elem.setElementSize(this.inner_width,this.inner_height);edge_elem.setElementInfo(edge,this._edge_info);if(this.handle){edge_elem.create();}}}}};_pControlElement.setElementPadding=function(padding){if(this.padding!=padding){this.padding=padding;if(this._apply_client_padding){this._updateClientRect();}}};_pControlElement.setElementCursor=function(cursor){if(this.cursor!=cursor){this.cursor=cursor;var handle=this.handle;if(handle){nexacro.__setDOMStyle_CursorObject(handle.style,cursor);}}};_pControlElement.setElementOpacity=function(opacity){if(this.opacity!=opacity){this.opacity=opacity;var handle=this.handle;if(handle){nexacro.__setDOMStyle_OpacityObject(handle.style,opacity);}}};_pControlElement.setElementBoxShadow=function(boxshadow){if(this.boxShadow!=boxshadow){this.boxShadow=boxshadow;var handle=this.handle;if(handle){nexacro.__setDOMStyle_ShadowObject(handle.style,boxshadow,this.rtl);}}};_pControlElement.setElementZoom=function(zoomfactor){var handle=this.handle;if(handle){if(zoomfactor<0){zoomfactor=0;}this.zoom=zoomfactor;nexacro.__setDOMStyle_TransformScale(handle.style,zoomfactor/100);this._updateClientRect();}};_pControlElement.setElementDisplay=function(display){if(this.display!=display){this.display=display;var handle=this.handle;if(handle){nexacro.__setDOMStyle_Display(handle.style,display);}}};_pControlElement.setElementSimpleControl=function(simplecontrol){if(this._is_simple_control!=simplecontrol){if(this.handle){if(!this._is_simple_control){nexacro.__removeDOMNode(this.handle,this.dest_handle);this.dest_handle=this.handle;}else{var owner_elem=this.owner_elem;var _doc=owner_elem._getRootWindowHandle();var inner_node=_doc.createElement("div");this.dest_handle=inner_node;nexacro.__setDOMNode_ClassName(inner_node,this._getElementNexaClassName("nexasimplecontainer"));nexacro.__setDOMNode_Id(inner_node,"","nexacontainer");nexacro.__appendDOMNode(this.handle,inner_node);var innernodestyle=inner_node.style;nexacro.__setDOMStyle_Pos(innernodestyle,this.client_left,this.client_top);if(this.client_width&&this.client_height){nexacro.__setDOMStyle_Size(innernodestyle,this.client_width,this.client_height);}}}this._is_simple_control=simplecontrol;}};_pControlElement.setElementHittestType=nexacro._emptyFn;_pControlElement.getClientLeft=function(){if(this._apply_client_padding&&!this._is_simple_control){return 0;}return this.client_left;};_pControlElement.getClientTop=function(){if(this._apply_client_padding&&!this._is_simple_control){return 0;}return this.client_top;};_pControlElement.getClientWidth=function(){return this.client_width;};_pControlElement.getClientHeight=function(){return this.client_height;};_pControlElement._updateInnerSize=function(){var inner_width=this.width;var inner_height=this.height;var border=this.border||this._border_info;if(border){var borderleft=border.left?border.left._width:0;var borderright=border.right?border.right._width:0;var bordertop=border.top?border.top._width:0;var borderbottom=border.bottom?border.bottom._width:0;if(this.borderLeftNone){borderleft=0;}if(this.borderRightNone){borderright=0;}if(this.borderTopNone){bordertop=0;}if(this.borderBottomNone){borderbottom=0;}inner_width-=(borderleft+borderright);inner_height-=(bordertop+borderbottom);if(inner_width<0){inner_width=0;}if(inner_height<0){inner_height=0;}}if(this.inner_width!=inner_width||this.inner_height!=inner_height){this.inner_width=inner_width;this.inner_height=inner_height;return true;}return false;};_pControlElement._on_updateClientRect=function(){var ret=0;if(this._apply_client_padding){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var padding=(this.padding||this._padding_info);if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}}else{if(this.client_width!=this.inner_width||this.client_height!=this.inner_height){this.client_width=this.inner_width;this.client_height=this.inner_height;ret+=2;}}return ret;};_pControlElement._updateClientRect=function(){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if(ret&2){this._on_change_clientSize(this.client_width,this.client_height);}};_pControlElement._on_change_clientPos=function(left,top){var notify=false;var client_elem=this._client_elem;if(client_elem){client_elem.setElementPosition(left,top);}else if(this._apply_client_padding){if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;nexacro.__setDOMStyle_Pos(dest_handle.style,left,top);}else{notify=true;}}var control=this.linkedcontrol;if(control&&notify){control.on_change_containerPos(left,top);}};_pControlElement._on_change_clientSize=function(width,height){var client_elem=this._client_elem;if(client_elem){client_elem.setElementSize(width,height);}else if(this._apply_client_padding||!this._is_simple_control){if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;nexacro.__setDOMStyle_Size(dest_handle.style,width,height);}}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pControlElement._refreshControl=function(handle,handle_style){if(this.tabindex>= -1){nexacro.__setDOMNode_TabIndex(handle,this.tabindex);}if(!nexacro._isNull(this.tooltiptext)){nexacro.__setDOMNode_ToolTip(handle,this.tooltiptext,this.tooltiptype);}if(this.zindex>=0){nexacro.__setDOMStyle_Zindex(handle_style,this.zindex);}this._refreshCommonStyleProps(handle_style);if(this.borderRadius){nexacro.__setDOMStyle_BorderRadiusObject(handle_style,this.borderRadius,this.rtl);}if(this.width==0||this.height==0){var border=nexacro.BorderObject("0px none");nexacro.__setDOMStyle_BorderObject(handle_style,border);}else{nexacro.__setDOMStyle_BorderObject(handle_style,this.border,this.rtl);if(this.borderLeftNone||this.borderTopNone||this.borderRightNone||this.borderBottomNone){nexacro.__setDOMStyle_BorderNone(this.handle.style,this.borderLeftNone,this.borderTopNone,this.borderRightNone,this.borderBottomNone,this.border,this.rtl);}}if(this.background){nexacro.__setDOMStyle_BackgroundObject(handle_style,this.background,this.rtl);}if(this.cursor){nexacro.__setDOMStyle_CursorObject(handle_style,this.cursor);}if(this.opacity){nexacro.__setDOMStyle_OpacityObject(handle_style,this.opacity);}if(this.boxShadow){nexacro.__setDOMStyle_ShadowObject(handle_style,this.boxShadow,this.rtl);}if(this.status){nexacro.__setDOMNode_Status(handle,this.status);}if(this.userstatus){nexacro.__setDOMNode_UserStatus(handle,this.userstatus);}if(nexacro._enableaccessibility){this._refreshAccessibilityInfo(handle,handle_style);}if(this._edge_elem){this._edge_elem.create();}};_pControlElement._getControlStyleStr=function(){var str=this._getCommonStyleStr();if(this.borderRadius){str+=nexacro.__getHTMLStyle_BorderRadiusObject(this.borderRadius,this.rtl);}if(this.width==0||this.height==0){str+="border: 0px none;";}else if(this.border){str+=nexacro.__getHTMLStyle_BorderObject(this.border,this.rtl);}if(this.borderLeftNone){str+=nexacro.__getHTMLStyle_BorderLeftNone();}if(this.borderTopNone){str+=nexacro.__getHTMLStyle_BorderTopNone();}if(this.borderRightNone){str+=nexacro.__getHTMLStyle_BorderRightNone();}if(this.borderBottomNone){str+=nexacro.__getHTMLStyle_BorderBottomNone();}if(this.background){str+=nexacro.__getHTMLStyle_BackgroundObject(this.background,this.rtl);}if(this.cursor){str+=nexacro.__getHTMLStyle_CursorObject(this.cursor);}if(this.opacity){str+=nexacro.__getHTMLStyle_OpacityObject(this.opacity);}if(this.boxShadow){str+=nexacro.__getHTMLStyle_ShadowObject(this.boxShadow,this.rtl);}return str;};_pControlElement._isMultiInnerProc=function(){var parent_elem=this.parent_elem;if(parent_elem&&parent_elem._use_container_move&&parent_elem._use_multiinner){if(this.owner_elem&&(this.owner_elem instanceof nexacro._MultiInnerContainerElement)){return true;}}return false;};_pControlElement.setElementPosition=function(left,top,bForce){if(this._isMultiInnerProc()){var owner_elem=this.owner_elem;if(this.left!=left||this.top!=top||bForce){var adjust_top=top;if(!this._is_nc_element&&owner_elem&&(this.top!=top||bForce)){adjust_top=owner_elem._changeInnerElement(top,this.handle);}nexacro.Element.prototype.setElementPosition.call(this,left,adjust_top,bForce);this.top=top;}}else{nexacro.Element.prototype.setElementPosition.call(this,left,top,bForce);}};_pControlElement._refreshAccessibilityInfo=nexacro._emptyFn;_pControlElement._getAccessibilityInfoStr=function(){return "";};_pControlElement._setAccessibility_notify=nexacro._emptyFn;_pControlElement.setElementAccessibilityRole=nexacro._emptyFn;_pControlElement.setElementAccessibilityLabel=nexacro._emptyFn;_pControlElement.setElementAccessibilityEnable=nexacro._emptyFn;_pControlElement.setElementAccessibilityDescription=nexacro._emptyFn;_pControlElement.setElementAccessibilityDescLevel=nexacro._emptyFn;_pControlElement.setElementAccessibilityAction=nexacro._emptyFn;_pControlElement.setElementAccessibilityValue=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatDisabled=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatHidden=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatChecked=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatPressed=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatSelected=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatExpanded=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatAutoComplete=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagHasPopup=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagFocusable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagReadOnly=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagPassword=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagMultiSelectable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagSelectable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagDefaultButton=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagMultiLine=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoCount=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoIndex=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueMax=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueMin=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueCur=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoLevel=nexacro._emptyFn;_pControlElement.setElementAccessibilityHotKey=nexacro._emptyFn;_pControlElement.setElementAccessibilityActiveDescendant=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatFocus=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatKillFocus=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatLive=nexacro._emptyFn;_pControlElement.notifyAccessibility=nexacro._emptyFn;_pControlElement._makeAccessibilityLabelbyReadtype=nexacro._emptyFn;_pControlElement.setElementAccessibilityParentLabel=nexacro._emptyFn;nexacro.ScrollableControlElement=function(parent_elem,use_multiinner){this.parent=parent_elem;this.parent_elem=parent_elem;this._use_multiinner=use_multiinner;if(use_multiinner){this._client_elem=new nexacro._MultiInnerContainerElement(this);}else{this._client_elem=new nexacro._ContainerElement(this);}};var _pScrollableControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.ScrollableControlElement);nexacro.ScrollableControlElement.prototype=_pScrollableControlElement;_pScrollableControlElement._type_name="ScrollableControlElement";_pScrollableControlElement.create=function(win){var owner_elem,_doc,handle,handle_style;if(!this._is_popup){owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;_doc=win._doc||owner_elem._getRootWindowHandle();handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle_style=handle.style;var bPositionRtl=this._isParentRtl();nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,bPositionRtl);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);this._refreshControl(handle,handle_style,_doc);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}}}else{_doc=win._doc;owner_elem=win;handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);this._refreshControl(handle,handle_style,_doc);this.handle=this.dest_handle=handle;if(this.linkedcontrol._findOwnerElementHandle){var owner_elem_info=this.linkedcontrol._findOwnerElementHandle();if(owner_elem_info.is_append){nexacro.__appendDOMNode(owner_elem_info.owner_handle,handle);}else{owner_elem_info.owner_handle.insertBefore(handle,owner_elem_info.ref_handle);}this.owner_elem=owner_elem_info.owner_handle._linked_element;}else{nexacro.__appendDOMNode(owner_elem.dest_handle,handle);this.owner_elem=owner_elem;}this._frame_node=nexacro._createFrameNode(handle,this.left,this.top,_doc,this.width,this.height);}if(this.handle){if(!this._client_elem.handle){this._client_elem.create(win);}var step_count=this._step_count;if(step_count>0){this._step_containers=[];for(var i=0;i<step_count;i++ ){var step_client=new nexacro._ContainerElement(this._client_elem,this._use_translate_scroll);step_client.setElementPosition(i*this.client_width,0);step_client.setElementSize(this.client_width,this.container_maxheight);step_client.create(win);this._step_containers.push(step_client);}}}};_pScrollableControlElement._on_destroy=function(){var handle=this.handle;if(handle){var step_containers=this._step_containers;if(step_containers){var step_count=step_containers.length;for(var i=0;i<step_count;i++ ){var step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}}};_pScrollableControlElement._on_clearContents=function(){if(this.handle){var step_containers=this._step_containers;if(step_containers){var step_count=step_containers.length;for(var i=0;i<step_count;i++ ){var step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}}};_pScrollableControlElement._setInnerElementScrollMaxTops=function(tops){if(!this._use_multiinner){return;}if(this._client_elem){this._client_elem._setScrollMaxTops(tops);}};_pScrollableControlElement.initElementInfo=function(){nexacro.ControlElement.prototype.initElementInfo.call(this);this._zclient_width=0;this._zclient_height=0;var control=this.linkedcontrol;if(control._is_scrollable){this._hscroll_control=null;this._vscroll_control=null;this._step_containers=null;this.zoom=100;this.scroll_left=0;this.scroll_top=0;this.container_maxwidth=0;this.container_maxheight=0;this.hscroll_limit=0;this.vscroll_limit=0;this._hscroll_size=0;this._vscroll_size=0;this._hscrollbartype="";this._vscrollbartype="";this._scrolltype="";this._scrollview_width_top=0;this._step_count=0;this._step_index= -1;if(control._use_translate_scroll_force){this._use_translate_scroll=control._use_translate_scroll;}else{this._use_translate_scroll=(control._use_translate_scroll===false)?control._use_translate_scroll:nexacro._use_translate_scroll;}this._use_container_move=control._use_container_move;this._use_native_scroll=control._use_native_scroll;this.setElementScrollbarSize(control._getHScrollBarSize(),control._getVScrollBarSize(),control._getHScrollBarType(),control._getVScrollBarType(),control.scrolltype);}else if(control._is_expandable){this._expandbarwidth=0;this._expandbarheight=0;this._expandbartype=false;this._expanddirtype="horz";this._expandvisible;this._expandarrange;this._use_translate_scroll=false;this._use_container_move=false;this._use_native_scroll=false;this._on_updateClientRect=this._on_updateClientRectExpand;this._on_change_clientPos=this._on_change_clientPosExpand;this._on_change_clientSize=this._on_change_clientSizeExpand;}var client_elemt=this._client_elem;if(client_elemt){client_elemt._use_translate_scroll=this._use_translate_scroll;client_elemt._use_container_move=this._use_container_move;client_elemt._use_native_scroll=this._use_native_scroll;}};_pScrollableControlElement.setElementStepCount=function(count){if(this._step_count!=count){var step_count=this._step_count;var step_containers=this._step_containers;var i,step_client;if(step_containers&&this._step_count){for(i=0;i<step_count;i++ ){step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}this._step_count=count;this._updateClientRect();if(this.handle&&count>0){this._step_containers=[];for(i=0;i<count;i++ ){step_client=new nexacro._ContainerElement(this._client_elem,this._use_translate_scroll);step_client.setElementPosition(i*this.client_width,0);step_client.setElementSize(this.client_width,this.client_height);step_client.create();this._step_containers.push(step_client);}}}};_pScrollableControlElement.setElementStepIndex=function(index){if(this._step_index!=index){if(this._step_count>0){if(index> -1&&this._step_count>index){this._step_index=index;}}else{this._step_index=index;}}};_pScrollableControlElement.setElementZoom=function(zoomfactor){var handle=this.handle;if(handle){if(zoomfactor<0){zoomfactor=0;}this.zoom=zoomfactor;var client=this.getContainerElement(this._step_index);if(client){client.setElementZoom(zoomfactor);}this._updateClientRect();}};_pScrollableControlElement.setElementScrollMaxSize=function(width,height){if(this.container_maxwidth!=width||this.container_maxheight!=height){this.container_maxwidth=width;this.container_maxheight=height;if(this._step_count){var client_elem=this.getContainerElement(this._step_index);if(client_elem){client_elem.setElementScrollMaxSize(this.client_width,height);}}if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}this._updateClientRect();}};_pScrollableControlElement.setElementScrollbarSize=function(hscroll_size,vscroll_size,hscrollbartype,vscrollbartype,scrolltype){var ret=false;if(this._vscroll_size!=vscroll_size||this._hscroll_size!=hscroll_size){this._vscroll_size=vscroll_size|0;this._hscroll_size=hscroll_size|0;ret=true;}if(this._hscrollbartype!=hscrollbartype||this._vscrollbartype!=vscrollbartype){this._hscrollbartype=hscrollbartype;this._vscrollbartype=vscrollbartype;ret=true;}if(this._scrolltype!=scrolltype){this._scrolltype=scrolltype;var container=this._client_elem;if(container){container._setElementScrolltype(this._getElementScrollType(scrolltype));}ret=true;}if(ret){this._updateClientRect();}return ret;};_pScrollableControlElement.setElementExpandbarSize=function(expandbarsize,expandbartype,expanddirtype,expandvisible,expandarrange){var ret=false;if(this._expandbarwidth!=expandbarsize[0]){this._expandbarwidth= +expandbarsize[0];ret=true;}if(this._expandbarheight!=expandbarsize[1]){this._expandbarheight= +expandbarsize[1];ret=true;}if(this._expandbartype!=expandbartype){this._expandbartype=expandbartype;ret=true;}if(this._expanddirtype!=expanddirtype){this._expanddirtype=expanddirtype;ret=true;}if(this._expandvisible!=expandvisible){this._expandvisible=expandvisible;ret=true;}if(this._expandarrange!=expandarrange){this._expandarrange=expandarrange;ret=true;}if(ret){this._updateClientRect();}return ret;};_pScrollableControlElement.getContainerElement=function(position_step){var step_count=this._step_count;var step_index=this._step_index;var step_containers=this._step_containers;if(step_count>0&&step_containers&&step_count>position_step){if(position_step<0||position_step==null){position_step=(step_index> -1?step_index:0);}return step_containers[position_step];}else{return this._client_elem;}};_pScrollableControlElement.getElementScrollLeft=function(){var container=this.getContainerElement(this.position_step);if(!container){return 0;}return container.getElementScrollLeft();};_pScrollableControlElement.getElementScrollTop=function(){var container=this._client_elem;if(!container){return 0;}return container.getElementScrollTop();};_pScrollableControlElement.getElementScrollWidth=function(){var container=this.getContainerElement(this.position_step);if(!container){return 0;}return container.getElementScrollWidth();};_pScrollableControlElement.getElementScrollHeight=function(){var container=this._client_elem;if(!container){return 0;}return container.getElementScrollHeight();};_pScrollableControlElement.setElementVScrollPos=function(vpos){if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_top!=vpos||this._reset_scrollpos){this.scroll_top=vpos;if(this._step_count>0){this.getContainerElement(this._step_index)._setElementVScrollPos(vpos);}if(this._use_container_move){this._client_elem._setElementVScrollPos(vpos);}if(this.linkedcontrol){this.linkedcontrol._setVscrollPos(vpos);}}};_pScrollableControlElement._updateClientRect=function(){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if(ret&2){this._on_change_clientSize(this._zclient_width,this._zclient_height);}};_pScrollableControlElement._on_change_clientPos=function(left,top){var step_count=this._step_count;var step_index=this._step_index;var step_containers=this._step_containers;var zclient_width=this._zclient_width;var i;var step_client_elem;if(this._apply_client_padding){if(this._client_elem){if(step_count>0&&step_containers){for(i=0;i<step_count;i++ ){step_client_elem=step_containers[i];step_client_elem.setElementPosition(zclient_width*i,0);if(i==step_index){step_client_elem.setElementSize(zclient_width,this.container_maxheight);}}}else{this._client_elem.setElementPosition(left,top);}}else if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;nexacro.__setDOMStyle_Pos(dest_handle.style,left,top);}}else if(this._client_elem){this._client_elem.setElementPosition(left,top);if(step_count>0&&step_containers){for(i=0;i<step_count;i++ ){step_client_elem=step_containers[i];step_client_elem.setElementPosition(zclient_width*i,0);}step_index=this._step_index;var step_scroll_left=zclient_width*step_index;if(this.scroll_left!=step_scroll_left){this.scroll_left=step_scroll_left;this._client_elem._setElementHScrollPos(step_scroll_left);}}}var control=this.linkedcontrol;if(control){control.on_change_containerPos(left,top);}};_pScrollableControlElement._on_change_clientPosExpand=function(left,top){var client_elem=this._client_elem;if(client_elem){client_elem.setElementPosition(left,top);}else{var handle=this.handle;var dest_handle=this.dest_handle;if(handle&&handle!=dest_handle&this._apply_client_padding){nexacro.__setDOMStyle_Pos(dest_handle.style,left,top);}}var control=this.linkedcontrol;if(control){control.on_change_containerPos(left,top);}};_pScrollableControlElement._on_change_clientSize=function(width,height){var handle=this.handle;var dest_handle=this.dest_handle;var client_elem=this._client_elem;var zclient_width=this._zclient_width;var max_width=Math.max(width,this.container_maxwidth);var max_height=Math.max(height,this.container_maxheight);var step_count=this._step_count;var step_containers=this._step_containers;var step_client_elem;var i;if(this._apply_client_padding){if(client_elem){client_elem.setElementSize(width,height);if(step_count>0&&step_containers){for(i=0;i<step_count;i++ ){step_client_elem=step_containers[i];if(step_client_elem){step_client_elem.setElementSize(zclient_width,max_height);dest_handle=step_client_elem.dest_handle;if(dest_handle){nexacro.__setDOMStyle_Size(dest_handle.style,width,max_height);}}}}}else if(handle&&handle!=dest_handle){nexacro.__setDOMStyle_Size(dest_handle.style,width,height);}}else{if(client_elem){if(step_count>0&&step_containers){for(i=0;i<step_count;i++ ){step_client_elem=step_containers[i];if(step_client_elem){step_client_elem.setElementSize(zclient_width,max_height);}}}else{client_elem.setElementSize(width,height);}}}if(client_elem&&client_elem._use_translate_scroll){if(this._use_multiinner){client_elem.setElementScrollMaxSize(max_width,max_height);}else{if(client_elem.dest_handle){nexacro.__setDOMStyle_Size(client_elem.dest_handle.style,max_width,max_height);}}}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pScrollableControlElement._on_change_clientSizeExpand=function(width,height){var client_elem=this._client_elem;if(client_elem){client_elem.setElementSize(width,height);}else{var handle=this.handle;var dest_handle=this.dest_handle;if(handle&&handle!=dest_handle&this._apply_client_padding){nexacro.__setDOMStyle_Size(dest_handle.style,width,height);}}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pScrollableControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var cur_client_width=this.client_width;if(this._apply_client_padding){var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}}var client_elem=this._client_elem;if(!client_elem){return 0;}var zoomfactor=this.zoom/100;var zclient_width=this._zclient_width=client_width/zoomfactor;var zclient_height=this._zclient_height=client_height/zoomfactor;var container_maxwidth=this.container_maxwidth;var container_maxheight=this.container_maxheight;var scroll_left=this.scroll_left;var scroll_top=this.scroll_top;var step_count=this._step_count;var step_containers=this._step_containers;if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width;}var reset_vlimit=false;var reset_hlimit=false;var hscroll_limit=0;var vscroll_limit=0;var hscrollbartype=this._hscrollbartype;var vscrollbartype=this._vscrollbartype;var scrolltype=this._scrolltype;if(step_count>0&&step_containers){hscrollbartype="none";}if(container_maxwidth>zclient_width){if((scrolltype!="none"&&scrolltype!="vertical")&&hscrollbartype!="none"&&hscrollbartype!="autoindicator"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;}hscroll_limit=container_maxwidth-zclient_width;}else{if(hscrollbartype=="fixed"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;}}if(container_maxheight>zclient_height){vscroll_limit=container_maxheight-zclient_height;if((scrolltype!="none"&&scrolltype!="horizontal")&&vscrollbartype!="none"&&vscrollbartype!="autoindicator"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;}if(container_maxwidth>zclient_width){if((scrolltype!="none"&&scrolltype!="vertical")&&hscrollbartype!="none"&&hscrollbartype!="autoindicator"&&hscroll_limit==0){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;vscroll_limit+=this._hscroll_size;}hscroll_limit=container_maxwidth-zclient_width;}else if(container_maxwidth>cur_client_width){hscroll_limit=container_maxwidth-cur_client_width;}}else{if(vscrollbartype=="fixed"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;if(container_maxwidth>zclient_width){hscroll_limit=container_maxwidth-zclient_width;}else if(container_maxwidth>cur_client_width){hscroll_limit=container_maxwidth-cur_client_width;}}}if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width;if(container_maxwidth>zclient_width){hscroll_limit=container_maxwidth-zclient_width;}}if(this.hscroll_limit!=hscroll_limit){reset_hlimit=true;this.hscroll_limit=hscroll_limit;if(scroll_left>hscroll_limit&&hscroll_limit>=0){this.setElementHScrollPos(hscroll_limit);}}if(this.vscroll_limit!=vscroll_limit){reset_vlimit=true;this.vscroll_limit=vscroll_limit;if(scroll_top>vscroll_limit&&vscroll_limit>=0){this.setElementVScrollPos(vscroll_limit);}}this._zclient_width=zclient_width;this._zclient_height=zclient_height;var ret=0;if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}else if(step_count>0){ret=1;}var cw=this.client_width!=client_width;var ch=this.client_height!=client_height;if(cw||ch){this.client_width=client_width;this.client_height=client_height;ret+=2;}else if(this.client_width!=zclient_width||this.client_height!=zclient_height){ret+=2;}else if(reset_hlimit||reset_vlimit){ret+=2;}return ret;};_pScrollableControlElement._on_updateClientRectExpand=function(){var ret=0;var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(!this._client_elem){return ret;}if(this._apply_client_padding){var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}}if(this._expandbartype&&this._expanddirtype=="vert"){client_height-=this._expandbarheight;}if(this._expandbartype&&this._expanddirtype=="horz"){client_width-=this._expandbarwidth;}if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=this._zclient_width=client_width;this.client_height=this._zclient_height=client_height;ret+=2;}return ret;};_pScrollableControlElement._getElementScrollType=function(scrolltype){var ret=0x11;if(scrolltype=="both"){ret=0x00;}else if(scrolltype=="horizontal"){ret=0x01;}else if(scrolltype=="vertical"){ret=0x10;}return ret;};nexacro.FrameControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._border_elems=new nexacro.Collection();this._frame_node=null;};var _pFrameControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.FrameControlElement);nexacro.FrameControlElement.prototype=_pFrameControlElement;_pFrameControlElement._type_name="FrameControlElement";_pFrameControlElement._title_control=null;_pFrameControlElement._status_control=null;_pFrameControlElement._title_height=0;_pFrameControlElement._status_height=0;_pFrameControlElement._title_top=0;_pFrameControlElement._title_width=0;_pFrameControlElement._status_top=0;_pFrameControlElement._status_width=0;_pFrameControlElement._max_child_zindex=0;_pFrameControlElement._is_window_element=false;_pFrameControlElement._resizable=false;_pFrameControlElement._doc=null;_pFrameControlElement.create=function(win){var _doc,handle,handle_style,inner_node,innernodestyle;if(!this.handle){if(this.parent_elem==null){_doc=this._doc=win._doc;this.owner_elem=win;this._is_window_element=true;this.left=0;this.top=0;if(nexacro._allow_default_pinchzoom){this.width=nexacro._getWindowHandleClientWidth(win.handle);this.height=nexacro._getWindowHandleClientHeight(win.handle);}else{this.width=win.clientWidth;this.height=win.clientHeight;}handle=win.dest_handle;handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());if(!this._is_simple_control){inner_node=_doc.createElement("div");this.dest_handle=inner_node;nexacro.__setDOMNode_ClassName(inner_node,this._getElementNexaClassName("nexasimplecontainer"));nexacro.__setDOMNode_Id(inner_node,"","nexacontainer");nexacro.__appendDOMNode(handle,inner_node);innernodestyle=inner_node.style;nexacro.__setDOMStyle_Pos(innernodestyle,this.client_left,this.client_top);nexacro.__setDOMStyle_Size(innernodestyle,this.client_width,this.client_height);}handle_style=handle.style;if(!nexacro._allow_default_pinchzoom&&nexacro._isDesktop()){nexacro.__setDOMStyle_Fixed(handle_style);}this._refreshControl(handle,handle_style,_doc);nexacro.__setDOMStyle_BorderNone(handle_style,true,true,true,true,this.border,this.rtl);}else{var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement();if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;_doc=owner_elem._getRootWindowHandle();handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());handle_style=handle.style;if(owner_elem instanceof nexacro.ModalOverlayElement){if(!nexacro._allow_default_pinchzoom&&nexacro._isDesktop()){nexacro.__setDOMStyle_Fixed(handle_style);}}if(!this._is_simple_control){inner_node=_doc.createElement("div");this.dest_handle=inner_node;nexacro.__setDOMNode_ClassName(inner_node,this._getElementNexaClassName("nexasimplecontainer"));nexacro.__setDOMNode_Id(inner_node,"","nexacontainer");nexacro.__appendDOMNode(handle,inner_node);innernodestyle=inner_node.style;nexacro.__setDOMStyle_Pos(innernodestyle,this.client_left,this.client_top);if(this.client_width&&this.client_height){nexacro.__setDOMStyle_Size(innernodestyle,this.client_width,this.client_height);}}nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top);if(this.width&&this.height){nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);}this._refreshControl(handle,handle_style,_doc);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);this._frame_node=nexacro._createFrameNode(handle,this.left,this.top,_doc,this.width,this.height);}}if(this._resizable){this._createBorderElements();this._updateBorderElementsPosition();}}else{if(this.parent_elem==null){var _win=win;if(this.handle!=_win.dest_handle){var old_handle=this.handle;_doc=this._doc=_win._doc;handle=_win.dest_handle;this.owner_elem=_win;this._is_window_element=true;this.left=0;this.top=0;this.width=_win.clientWidth;this.height=_win.clientHeight;handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;handle_style=handle.style;if(this.border){this.border=null;}this._title_height=0;this._status_height=0;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top);if(this.width&&this.height){nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);}this._refreshControl(handle,handle_style,_doc);if(old_handle.hasChildNodes()){var childs=old_handle.childNodes;for(var i=0;i<childs.length;i++ ){var child=childs[i];nexacro.__appendDOMNode(handle,child);}}}}}};_pFrameControlElement._on_destroy=function(){this._destroyBorderElements();this._title_control=null;this._status_control=null;};_pFrameControlElement.setElementCSSMapInfo=function(border,padding,edge){if(this.linkedcontrol&&this.linkedcontrol._is_window){border=null;}nexacro.ControlElement.prototype.setElementCSSMapInfo.call(this,border,null,edge);};_pFrameControlElement._getRootWindowHandle=function(){if(this._is_window_element){return this._doc;}else if(this.owner_elem){return this.owner_elem._getRootWindowHandle();}else if(this.parent&&this.parent._getRootWindowHandle){return this.parent._getRootWindowHandle();}return null;};_pFrameControlElement.setElementBorder=function(border){if(this.linkedcontrol&&this.linkedcontrol._is_window){return;}nexacro.ControlElement.prototype.setElementBorder.call(this,border);};_pFrameControlElement._updateClientRect=function(){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if(ret&2){this._on_change_clientSize(this.client_width,this.client_height);}if(ret){this._updateBorderElementsPosition();}};_pFrameControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(this._apply_client_padding){var padding=(this.padding||this._padding_info);if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}}var title_control=this._title_control;if(title_control){if(!this._is_verticalmin&&(this.client_left!=client_left||this._title_top!=client_top||this._title_width!=client_width)){this._title_top=client_top;this._title_width=client_width;title_control.move(client_left,client_top,client_width,this._title_height);}else if(this._is_verticalmin&&(this.client_top!=client_top||this._title_top!=client_top||this._title_height!=client_height)){this._title_top=client_top;this._title_width=client_width;title_control.move(client_left,client_top,client_width,client_height);}client_top+=this._title_height;client_height-=this._title_height;if(client_height<0){client_height=0;}}else{this._title_top=client_top;}var status_control=this._status_control;if(status_control){if(this._status_height>0){client_height-=this._status_height;if(client_height<0){client_height=0;}}var status_top=client_top+client_height;if(this.client_left!=client_left||this._status_top!=status_top||this._status_width!=client_width){this._status_top=status_top;this._status_width=client_width;status_control.move(client_left,status_top,client_width,this._status_height);}}else{this._status_top=client_top+client_height;}var ret=0;if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}return ret;};_pFrameControlElement.appendChildElement=function(child_elem){if(this.handle){if(!this._client_elem){return;}if(child_elem.parent_elem==this._client_elem){child_elem._is_nc_element=true;}else{if(child_elem.handle){var old_doc=child_elem._getRootWindowHandle();var new_doc=this._getRootWindowHandle();if(old_doc!=new_doc){child_elem.parent_elem=this._client_elem;child_elem._removeFromContainer();}else{child_elem.parent_elem=this._client_elem;}}else{child_elem.parent_elem=this._client_elem;}}child_elem._is_nc_element=true;child_elem.setElementPosition(0,0);child_elem.setElementSize(this.client_width,this.client_height);if(!child_elem.handle){child_elem.create();}else{child_elem._appendToContainer(this._client_elem);}}};_pFrameControlElement.removeChildElement=function(child_elem){if(child_elem.parent_elem==this){child_elem._removeFromContainer();}};_pFrameControlElement.sendToBackElement=function(elem){if(elem&&elem.owner_elem&&elem.owner_elem.owner_elem==this.owner_elem&&elem.handle){nexacro.__sendDOMNodeToBack(elem.handle);if(elem._border_elems){for(var i=0;i<elem._border_elems.length;i++ ){nexacro.__sendDOMNodeToBack(elem._border_elems[i].handle);}}}};_pFrameControlElement.bringToFrontElement=function(elem){if(this.handle){this._max_child_zindex++ ;var new_zindex=(this._max_child_zindex*10);elem.setElementZIndex(new_zindex);if(elem._border_elems){for(var i=0;i<elem._border_elems.length;i++ ){elem._border_elems[i].setElementZIndex(new_zindex+(i+1));}}}};_pFrameControlElement.moveToNextElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem.moveToNextElement(elem,base_elem);};_pFrameControlElement.moveToPrevElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem.moveToPrevElement(elem,base_elem);};_pFrameControlElement.setTitleBarControl=function(title_control,title_height){this._title_control=title_control;if(title_control){this._title_height=parseInt(title_height)|0;this._title_width=0;}else{this._title_height=0;this._title_width=0;}this._updateClientRect();};_pFrameControlElement.setStatusBarControl=function(status_control,status_height){this._status_control=status_control;if(status_control){this._status_height=parseInt(status_height)|0;this._status_width=0;}else{this._status_height=0;this._status_width=0;}this._updateClientRect();};_pFrameControlElement._createBorderElements=function(){if(this.parent==null||this.parent_elem==null){return;}if(this._border_elems.length>0){return;}var i,border_elem;var name_table=Array("lt","t","rt","l","r","lb","b","rb");for(i=0;i<8;i++ ){border_elem=new nexacro._FrameResizeBorderElement(this.parent_elem);border_elem.parent=this;this._border_elems.add_item(name_table[i],border_elem);}this._setResizable(this._resizable);var win=this.linkedcontrol._getWindow();for(i=0;i<8;i++ ){border_elem=this._border_elems[i];border_elem.linkedcontrol=this.linkedcontrol;border_elem.create(win);}};_pFrameControlElement._destroyBorderElements=function(){var cnt=this._border_elems.length;for(var i=0;i<cnt;i++ ){this._border_elems[i].destroy();this._border_elems[i]=null;}this._border_elems.clear();this._border_elems=null;};_pFrameControlElement.setElementPosition=function(x,y){nexacro.ControlElement.prototype.setElementPosition.call(this,x,y);this._updateBorderElementsPosition();};_pFrameControlElement._updateBorderElementsPosition=function(){if(this._border_elems.length==0){return;}var border=this.border||this._border_info;var lw=0,tw=0,rw=0,bw=0;if(border){if(border._single==1){lw=tw=rw=bw=border._getBorderWidth();}else{lw=border.left._width;tw=border.top._width;rw=border.right._width;bw=border.bottom._width;}}var inner_width=this.inner_width;var inner_height=this.inner_height;if(lw<5){var lx=5-lw;lw+=lx;inner_width-=lx;}if(tw<5){var tx=5-tw;tw+=tx;inner_height-=tx;}if(rw<5){var rx=5-rw;rw+=rx;inner_width-=rx;}if(bw<5){var bx=5-bw;bw+=bx;inner_height-=bx;}var left=this.left;var top=this.top;var x=left;var y=top;var i;for(i=0;i<8;i++ ){this._border_elems[i].setElementPosition(x,y);switch(i){case 0:x+=lw;break;case 1:x+=inner_width;break;case 2:x=left;y+=tw;break;case 3:x+=(lw+inner_width);break;case 4:x=left;y+=inner_height;break;case 5:x+=lw;break;case 6:x+=inner_width;break;case 7:break;}}var w,h;for(i=0;i<8;i++ ){if(i==0||i==3||i==5){w=lw;}if(i==1||i==6){w=inner_width;}if(i==2||i==4||i==7){w=rw;}if(i<3){h=tw;}else if(i<5){h=inner_height;}else{h=bw;}this._border_elems[i].setElementSize(w,h);}};_pFrameControlElement._setResizable=function(resizable){this._resizable=resizable;if(this.handle){if(this._border_elems.length==0){if(resizable){this._createBorderElements();this._updateBorderElementsPosition();}else{return;}}var cursor_table=Array("nw","n","ne","w","e","sw","s","se");for(var i=0;i<8;i++ ){var border_elem=this._border_elems[i];border_elem._is_track=resizable;var cursor;if(resizable){cursor=nexacro.CursorObject(cursor_table[i]+"-resize");}else{cursor=nexacro.CursorObject("arrow");}border_elem.setElementCursor(cursor);}}var statuscontrol=this._status_control;if(statuscontrol){statuscontrol.set_resizable(resizable);}};nexacro._FrameResizeBorderElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var __pFrameResizeBorderElement=nexacro._createPrototype(nexacro.ControlElement,nexacro._FrameResizeBorderElement);nexacro._FrameResizeBorderElement.prototype=__pFrameResizeBorderElement;__pFrameResizeBorderElement._type_name="FrameResizeBorderElement";__pFrameResizeBorderElement._is_simple_control=true;__pFrameResizeBorderElement._on_starttrack=function(){this.linkedcontrol._on_border_starttrack(this.cursor);};__pFrameResizeBorderElement._on_endtrack=function(x,y,dragdata){this.linkedcontrol._on_border_endtrack(x,y,dragdata);};__pFrameResizeBorderElement._on_movetrack=function(x,y,dragdata){this.linkedcontrol._on_border_movetrack(x,y,dragdata);};__pFrameResizeBorderElement._updateClientRect=nexacro._emptyFn;nexacro.ModalOverlayElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var _pModalOverlayElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.ModalOverlayElement);nexacro.ModalOverlayElement.prototype=_pModalOverlayElement;_pModalOverlayElement._type_name="ModalOverlayElement";_pModalOverlayElement._background_handle=null;_pModalOverlayElement.create=function(win){if(this.parent_elem&&!this.handle){var _doc=this._doc=this.parent_elem._getRootWindowHandle();var handle=_doc.createElement("div");handle._linked_element=this;this.handle=this.dest_handle=handle;var handle_style=handle.style;nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexamodaloverlay"));nexacro.__setDOMNode_Id(handle,"","nexacontainer");nexacro.__setDOMStyle_Pos(handle_style,0,0);nexacro.__setDOMStyle_Size(handle_style,win.clientWidth,win.clientHeight);var owner_elem=win.frame.getElement();var waitcomp_elem=win.frame._getWaitComponentElement();var ref_dest_handle=null;if(waitcomp_elem){ref_dest_handle=waitcomp_elem.handle;}if(ref_dest_handle){owner_elem.dest_handle.insertBefore(handle,ref_dest_handle);}else{nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}this._refreshControl(handle,handle.style,_doc);this._createBackgroundElement(_doc,handle,win.clientWidth,win.clientHeight);if(nexacro._isDesktop()&&nexacro._Browser=="Chrome"){var _window=this._getWindow();if(_window){this.setElementZoom(_window._wheelZoom);}}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){nexacro.__removeHTMLAttr_Proeprty(handle,"tabindex");}this._frame_node=nexacro._createFrameNode(handle,this.left,this.top,_doc,win.clientWidth,win.clientHeight);if(this._frame_node){this._frame_node._linked_element=this;nexacro._observeSysEvent(this._frame_node,"load","onload",this._iframe_eventhandler_onload);}}};_pModalOverlayElement._iframe_eventhandler_onload=function(evt){if(window.event){evt=window.event;}var node=evt.srcElement||evt.target;if(!node){return;}try{var _doc=node.contentDocument||node.contentWindow.document;if(this._linked_element){nexacro._observeSysEvent(_doc,"mousemove","onmousemove",this._linked_element._iframe_eventhandler_onmousemove);nexacro._observeSysEvent(_doc,"contextmenu","oncontextmenu",this._linked_element._iframe_eventhandler_oncontextmenu);nexacro._observeSysEvent(_doc,"mouseup","onmouseup",this._linked_element._iframe_eventhandler_onmouseup);}}catch(e){}};_pModalOverlayElement._iframe_eventhandler_onmouseup=function(evt){return nexacro._syshandler_onmouseup(window.nexacro_HTMLSysEvent,null,evt);};_pModalOverlayElement._iframe_eventhandler_onmousemove=function(evt){return nexacro._syshandler_onmousemove(window.nexacro_HTMLSysEvent,null,evt);};_pModalOverlayElement._iframe_eventhandler_oncontextmenu=function(evt){return nexacro._stopSysEvent(evt);};_pModalOverlayElement.destroy=function(){if(!this.handle){return;}var _win=this.linkedcontrol._getWindow();var owner_elem=_win.frame.getElement();this._destroyBackgroundElement(this.handle);nexacro.__removeDOMNode(owner_elem.dest_handle,this.handle);this.handle=null;if(this._frame_node){this._frame_node._linked_element=null;}nexacro._destroyFrameNode(this.handle,this._frame_node);this._frame_node=null;};_pModalOverlayElement.setElementSize=function(width,height,update){nexacro.Element.prototype.setElementSize.call(this,width,height,update);if(this._frame_node){nexacro.__setDOMStyle_Size(this._frame_node.style,width,height);}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pModalOverlayElement._createBackgroundElement=function(_doc,overlay_handle,width,height){var background=this.background;var background_handle=_doc.createElement("div");var bRtl=this._isRtl();nexacro.__setDOMStyle_Size(background_handle.style,width,height);if(background){nexacro.__setDOMStyle_BackgroundObject(overlay_handle.style,null,bRtl);nexacro.__setDOMStyle_BackgroundObject(background_handle.style,background,bRtl);}nexacro.__setDOMStyle_Filter(background_handle.style,50);nexacro.__appendDOMNode(overlay_handle,background_handle);this._background_handle=background_handle;};_pModalOverlayElement._destroyBackgroundElement=function(handle){var background_handle=this._background_handle;if(background_handle){nexacro.__removeDOMNode(handle,background_handle);}this._background_handle=null;};}else{_pModalOverlayElement._createBackgroundElement=nexacro._emptyFn;_pModalOverlayElement._destroyBackgroundElement=nexacro._emptyFn;}_pModalOverlayElement._getRootWindowHandle=function(){return this._doc;};nexacro._OverlayElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.background=nexacro.BackgroundObject("grey");this.opacity=nexacro.OpacityObject(0.1);};var _pOverlayElement=nexacro._createPrototype(nexacro.ModalOverlayElement,nexacro._OverlayElement);nexacro._OverlayElement.prototype=_pOverlayElement;_pOverlayElement._type_name="OverlayElement";_pOverlayElement._background_handle=null;_pOverlayElement.create=function(win){if(this.parent_elem&&!this.handle){var _doc=this._doc=this.parent_elem._getRootWindowHandle();var handle=_doc.createElement("div");handle._linked_element=this;this.handle=this.dest_handle=handle;var handle_style=handle.style;nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexamodaloverlay"));nexacro.__setDOMNode_Id(handle,"","nexacontainer");nexacro.__setDOMStyle_Pos(handle_style,0,0);var owner_elem=this.parent.getElement();nexacro.__appendDOMNode(owner_elem.dest_handle,handle);this._refreshControl(handle,handle.style,_doc);this._createBackgroundElement(_doc,handle);if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){nexacro.__removeHTMLAttr_Proeprty(handle,"tabindex");}this._frame_node=nexacro._createFrameNode(handle,this.left,this.top,_doc);if(this._frame_node){this._frame_node._linked_element=this;nexacro._observeSysEvent(this._frame_node,"load","onload",this._iframe_eventhandler_onload);}}};_pOverlayElement=null;nexacro._ContainerElement=function(parent_elem,use_translate_scroll,type,use_onscroll_inner){this.parent=parent_elem;this.parent_elem=parent_elem;this._use_translate_scroll=(use_translate_scroll===false)?use_translate_scroll:nexacro._use_translate_scroll;this.type=(type)?type:"";this._use_onscroll_inner=use_onscroll_inner;};var __pContainerElement=nexacro._createPrototype(nexacro.Element,nexacro._ContainerElement);nexacro._ContainerElement.prototype=__pContainerElement;__pContainerElement._type_name="ContainerElement";__pContainerElement._scroll_left=0;__pContainerElement._scroll_top=0;__pContainerElement._scroll_maxwidth=0;__pContainerElement._scroll_maxheight=0;__pContainerElement._cached_scrollLeft=0;__pContainerElement._cached_scrollTop=0;__pContainerElement._is_nc_element=true;__pContainerElement._use_translate_scroll=nexacro._use_translate_scroll;__pContainerElement._use_container_move=true;__pContainerElement.type="";var _bind_container_scroll_handler_after=nexacro._emptyFn;var _bind_container_scroll_handler=function(elem){return function(evt){if(!evt&&window.event){evt=window.event;}var target=evt.srcElement||evt.target;if(!target){return;}evt._node_activate_scroll=undefined;if(elem._use_translate_scroll){target.scrollLeft=0;target.scrollTop=0;}else{if((elem._scroll_top!=target.scrollTop||elem._scroll_left!=target.scrollLeft)&&elem._use_onscroll_inner!=true){evt._node_activate_scroll=true;elem._callback_func_onscroll(evt);}else{elem._scroll_left=target.scrollLeft;elem._scroll_top=target.scrollTop;elem._scroll_maxwidth=target.scrollWidth;elem._scroll_maxheight=target.scrollHeight;elem._callback_func_onscroll(evt);}_bind_container_scroll_handler_after(elem,target.scrollLeft,target.scrollTop);}};};if(nexacro._Browser=="IE"){__pContainerElement._callback_func_onscroll=function(evt){if((!evt||evt.type!="scroll")&&window.event){evt=window.event;}if(evt.type!="scroll"){return;}var target=evt.srcElement;if(!target){return;}var container=target._linked_element;if(container){var parent_elem=container.parent;var retn=false;if(parent_elem._recover_vpos!=undefined){target.scrollTop=parent_elem._recover_vpos;parent_elem._recover_vpos=undefined;retn=true;}if(parent_elem._recover_hpos!=undefined){target.scrollLeft=parent_elem._recover_hpos;parent_elem._recover_hpos=undefined;retn=true;}if(retn){return;}var elem_scroll_top=container._scroll_top|0;var elem_scroll_left=container._scroll_left|0;container._cached_scrollLeft=target.scrollLeft;container._cached_scrollTop=target.scrollTop;var hscroll_pos=container._cached_scrollLeft;var vscroll_pos=container._cached_scrollTop;var linkedcontrol=container._findScrollbarControl(container,false);var bhscroll=false;var bvscroll=false;if(linkedcontrol){if(elem_scroll_left!=container._cached_scrollLeft){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="vertical"){bhscroll=true;}}if(elem_scroll_top!=container._cached_scrollTop){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="horizontal"){bvscroll=true;}}if(bhscroll||bvscroll){linkedcontrol._scrollTo(bhscroll?hscroll_pos:null,bvscroll?vscroll_pos:null);}}}};}else{__pContainerElement._callback_func_onscroll=function(evt){};}__pContainerElement.create=function(win){var owner_elem=this.parent_elem;if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;this.name=owner_elem.name+":container"+this.type;var _doc=win?win._doc:owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");handle._linked_element=this;this.handle=handle;if(this._use_native_scroll){nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexacontainer","nexanativescroll"));nexacro.__setDOMNode_Id(handle,"","nexacontainer");}else{nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexacontainer"));nexacro.__setDOMNode_Id(handle,"","nexacontainer");}this.createInnerContainer(_doc);var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,this._isParentRtl());nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);if(this.parent._step_count>0){nexacro.__setDOMStyle_ScrollLimitX(handle.style,0);}else{nexacro.__setDOMStyle_ScrollLimitX(handle.style,this._scroll_type&0x10);}nexacro.__setDOMStyle_ScrollLimitY(handle.style,this._scroll_type&0x01);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);this._syshandler_onscroll_forward=_bind_container_scroll_handler(this);nexacro._observeSysEvent(handle,"scroll","onscroll",this._syshandler_onscroll_forward);}};__pContainerElement.createCommandStart=function(){var owner_elem=this.parent_elem;if(owner_elem&&!this.handle){this.owner_elem=owner_elem;this.name=owner_elem.name+":container"+this.type;var str="<div";str+=this._use_native_scroll?" class='"+this._getElementNexaClassName("nexacontainer","nexanativescroll")+"'":" class='"+this._getElementNexaClassName("nexacontainer")+"'";str+=" id='"+this.name+"' ";var style_str=this._getCommonStyleStr();str+=" style='";str+=style_str;var scroll_type=this._scroll_type;if(scroll_type&0x10){str+=nexacro.__getHTMLStyle_ScrollLimitX(true);}if(scroll_type&0x01){str+=nexacro.__getHTMLStyle_ScrollLimitY(true);}str+="'>";if(this._use_translate_scroll||this._use_onscroll_inner){str+="<div class='"+this._getElementNexaClassName("nexainnercontainer")+"' id='nexacontainer' style='width : "+(this._scroll_maxwidth?this._scroll_maxwidth:this.width)+"px; height : "+(this._scroll_maxheight?this._scroll_maxheight:this.height)+"px;'>";}return str;}return "";};__pContainerElement.createCommandEnd=function(){var str="";if(this._use_translate_scroll||this._use_onscroll_inner){str+="</div>";}str+="</div>";return str;};__pContainerElement.attachHandle=function(win){if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){this.handle=handle;if(this._use_translate_scroll||this._use_onscroll_inner){this.dest_handle=handle.firstChild;}else{this.dest_handle=handle;}this._syshandler_onscroll_forward=_bind_container_scroll_handler(this);nexacro._observeSysEvent(handle,"scroll","onscroll",this._syshandler_onscroll_forward);if(!this._use_translate_scroll){var tempdiv=this._tempdiv;if(!tempdiv){var _doc=this._getRootWindowHandle();tempdiv=this._tempdiv=_doc.createElement("div");nexacro.__setDOMStyle_AbsoluteTransparent(tempdiv.style);nexacro.__setDOMStyle_Size(tempdiv.style,1,1);nexacro.__setDOMStyle_Visible(tempdiv.style,false);nexacro.__appendDOMNode(this.handle,tempdiv);}nexacro.__setDOMStyle_Pos(tempdiv.style,this._scroll_maxwidth-1,this._scroll_maxheight-1);}}}};__pContainerElement.createInnerContainer=function(_doc){var handle=this.handle;var dest_handle;var scroll_maxwidth,scroll_maxheight;if(handle){if(this._use_translate_scroll){dest_handle=this.dest_handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(dest_handle,this._getElementNexaClassName("nexainnercontainer"));nexacro.__setDOMNode_Id(dest_handle,"","nexacontainer");nexacro.__appendDOMNode(handle,dest_handle);scroll_maxwidth=this._scroll_maxwidth||this.parent._scroll_maxwidth;scroll_maxheight=this._scroll_maxheight||this.parent._scroll_maxheight;if(scroll_maxwidth&&scroll_maxheight){nexacro.__setDOMStyle_Size(dest_handle.style,scroll_maxwidth,scroll_maxheight);}if(this._scroll_left!=0||this._scroll_top!=0){var bRtl=this._isRtl();nexacro.__setDOMStyle_Translate(dest_handle.style, -this._scroll_left, -this._scroll_top,bRtl);}}else{if(this._use_onscroll_inner){dest_handle=this.dest_handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(dest_handle,"nexainnercontainer");nexacro.__setDOMNode_Id(dest_handle,"","nexacontainer");nexacro.__appendDOMNode(handle,dest_handle);scroll_maxwidth=this._scroll_maxwidth||this.parent._scroll_maxwidth;scroll_maxheight=this._scroll_maxheight||this.parent._scroll_maxheight;if(scroll_maxwidth&&scroll_maxheight){nexacro.__setDOMStyle_Size(dest_handle.style,scroll_maxwidth,scroll_maxheight);}}else{this.dest_handle=handle;}var tempdiv=this._tempdiv;if(!tempdiv){tempdiv=this._tempdiv=_doc.createElement("div");nexacro.__setDOMStyle_AbsoluteTransparent(tempdiv.style);nexacro.__setDOMStyle_Size(tempdiv.style,1,1);nexacro.__setDOMStyle_Visible(tempdiv.style,false);nexacro.__appendDOMNode(handle,tempdiv);}if(this._scroll_left){nexacro.__setDOMNode_HScrollPos(handle,this._scroll_left);}if(this._scroll_top){nexacro.__setDOMNode_VScrollPos(handle,this._scroll_top);}}}};__pContainerElement._removeElementHandle=function(){var handle=this.handle;if(handle){if(this._tempdiv){nexacro.__removeDOMNode(handle,this._tempdiv);this._tempdiv=null;}var dest_handle;handle._linked_element=null;dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);nexacro.__removeDOMNode(dest_handle,handle);}};__pContainerElement._setElementTranslateStart=function(){if(!this._do_translate_scroll){var do_translate_scroll=!!this._use_translate_scroll;if(do_translate_scroll&&this._do_translate_scroll!=do_translate_scroll){this._scroll_offset_left=this._scroll_left;this._scroll_offset_top=this._scroll_top;this.dest_handle.style.willChange="transform, left";this._do_translate_scroll=do_translate_scroll;}}};__pContainerElement._setElementTranslateEnd=function(){if(this._do_translate_scroll){this._do_translate_scroll=false;var inner_handle=this.dest_handle;nexacro.__clearDOMStyle_TranslateR(inner_handle.style);this.dest_handle.style.willChange="";if(this._scroll_offset_left!=this._scroll_left||this._scroll_offset_top!=this._scroll_top){nexacro.__setDOMStyle_Pos(inner_handle.style, -this._scroll_left, -this._scroll_top);}}};__pContainerElement._setElementVScrollPos=function(vpos){if(this._scroll_top!=vpos||this.parent._reset_scrollpos||this._use_container_move){var bRtl=this._isRtl();var _old_scroll_top=this._scroll_top;this._scroll_top=vpos;if(this._use_translate_scroll){var inner_handle=this.dest_handle;if(inner_handle){if(this._do_translate_scroll){vpos=this._scroll_top-this._scroll_offset_top;nexacro.__setDOMStyle_TranslateR(inner_handle.style, -this._scroll_left, -vpos,bRtl);}else{nexacro.__setDOMStyle_Translate(inner_handle.style, -this._scroll_left, -vpos,bRtl);}}}else if(this._use_container_move){var handle=this.handle;if(handle){if(this._cached_scrollTop!=vpos||this._cached_scrollTop!=_old_scroll_top){nexacro.__setDOMNode_VScrollPos(handle,vpos);}}}}};__pContainerElement._setElementHScrollPos=function(hpos){if(this._scroll_left!=hpos||this.parent._reset_scrollpos||this._use_container_move){var bRtl=this._isRtl();var _old_scroll_left=this._scroll_left;this._scroll_left=hpos;if(this._use_translate_scroll){var inner_handle=this.dest_handle;if(inner_handle){if(this._do_translate_scroll){hpos=this._scroll_left-this._scroll_offset_left;nexacro.__setDOMStyle_TranslateR(inner_handle.style, -hpos, -this._scroll_top,bRtl);}else{nexacro.__setDOMStyle_Translate(inner_handle.style, -hpos, -this._scroll_top,bRtl);}}}else if(this._use_container_move){var handle=this.handle;if(handle){if(this._cached_scrollLeft!=hpos||this._cached_scrollLeft!=_old_scroll_left){nexacro.__setDOMNode_HScrollPos(handle,hpos,bRtl);}}}}};__pContainerElement._setElementScrolltype=function(scrolltype){this._scroll_type=scrolltype;var handle=this.handle;if(handle){if(this.parent._step_count>0){nexacro.__setDOMStyle_ScrollLimitX(handle.style,0);}else{nexacro.__setDOMStyle_ScrollLimitX(handle.style,this._scroll_type&0x10);}nexacro.__setDOMStyle_ScrollLimitY(handle.style,scrolltype&0x01);}};__pContainerElement._setElementScrollPos=function(hpos,vpos){if(this._scroll_left!=hpos||this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_left=hpos;this._scroll_top=vpos;if(this._use_translate_scroll){var inner_handle=this.dest_handle;if(inner_handle){if(this._do_translate_scroll){hpos=this._scroll_left-this._scroll_offset_left;vpos=this._scroll_top-this._scroll_offset_top;nexacro.__setDOMStyle_Translate(inner_handle.style, -hpos, -vpos);}else{nexacro.__setDOMStyle_Pos(inner_handle.style, -hpos, -vpos);}}}else if(this._use_container_move){var handle=this.handle;if(handle){if(this._cached_scrollTop!=vpos){nexacro.__setDOMNode_VScrollPos(handle,vpos);}if(this._cached_scrollLeft!=hpos){nexacro.__setDOMNode_HScrollPos(handle,hpos);}}}}};__pContainerElement.setElementScrollMaxSize=function(width,height){this._scroll_maxwidth=width;this._scroll_maxheight=height;if(this._use_translate_scroll){var inner_handle=this.dest_handle;if(inner_handle){nexacro.__setDOMStyle_Size(inner_handle.style,width,height);}}else{if(this.handle){var tempdiv=this._tempdiv;if(!tempdiv){var _doc=this._getRootWindowHandle();tempdiv=this._tempdiv=_doc.createElement("div");nexacro.__setDOMStyle_AbsoluteTransparent(tempdiv.style);nexacro.__setDOMStyle_Size(tempdiv.style,1,1);nexacro.__setDOMStyle_Visible(tempdiv.style,false);nexacro.__appendDOMNode(this.handle,tempdiv);}nexacro.__setDOMStyle_Pos(tempdiv.style,width-1,height-1);}}};__pContainerElement.getElementScrollLeft=function(){return this._scroll_left;};__pContainerElement.getElementScrollTop=function(){return this._scroll_top;};__pContainerElement.getElementScrollWidth=function(){return this._scroll_maxwidth;};__pContainerElement.getElementScrollHeight=function(){return this._scroll_maxheight;};__pContainerElement.destroy=function(){var handle=this.handle;if(handle){nexacro._stopSysObserving(handle,"scroll","onscroll",this._syshandler_onscroll_forward);}this._destroyElementHandle();this.owner_elem=null;this.dest_handle=null;this.parent=null;this.parent_elem=null;};if(nexacro._Browser=="IE"){if(nexacro._BrowserVersion<=8){__pContainerElement._syshandler_onscroll_forward=function(evt){if((!evt||evt.type!="scroll")&&window.event){evt=window.event;}if(evt.type!="scroll"){return;}var target=evt.srcElement;if(!target){return;}var container=target._linked_element;if(container){var parent_elem=container.parent;var retn=false;if(parent_elem._recover_vpos!=undefined){target.scrollTop=parent_elem._recover_vpos;retn=true;}if(parent_elem._recover_hpos!=undefined){target.scrollLeft=parent_elem._recover_hpos;retn=true;}if(retn){return;}var elem_scroll_top=container._scroll_top|0;var elem_scroll_left=container._scroll_left|0;container._cached_scrollLeft=target.scrollLeft;container._cached_scrollTop=target.scrollTop;var hscroll_pos=container._cached_scrollLeft;var vscroll_pos=container._cached_scrollTop;var linkedcontrol=container._findScrollbarControl(container,false);var bhscroll=false;var bvscroll=false;if(linkedcontrol){if(elem_scroll_left!=container._cached_scrollLeft){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="vertical"){bhscroll=true;}}if(elem_scroll_top!=container._cached_scrollTop){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="horizontal"){bvscroll=true;}}if(bhscroll||bvscroll){linkedcontrol._scrollTo(bhscroll?hscroll_pos:null,bvscroll?vscroll_pos:null);}}}};}else{__pContainerElement._syshandler_onscroll_forward=function(evt){if((!evt||evt.type!="scroll")&&window.event){evt=window.event;}if(evt.type!="scroll"){return;}var target=evt.srcElement;if(!target){return;}var container=target._linked_element;if(container){var parent_elem=container.parent;var retn=false;if(parent_elem._recover_vpos!=undefined){target.scrollTop=parent_elem._recover_vpos;parent_elem._recover_vpos=undefined;retn=true;}if(parent_elem._recover_hpos!=undefined){target.scrollLeft=parent_elem._recover_hpos;parent_elem._recover_hpos=undefined;retn=true;}if(retn){return;}var elem_scroll_top=container._scroll_top|0;var elem_scroll_left=container._scroll_left|0;container._cached_scrollLeft=target.scrollLeft;container._cached_scrollTop=target.scrollTop;var hscroll_pos=container._cached_scrollLeft;var vscroll_pos=container._cached_scrollTop;var linkedcontrol=container._findScrollbarControl(container,false);var bhscroll=false;var bvscroll=false;if(linkedcontrol){if(elem_scroll_left!=container._cached_scrollLeft){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="vertical"){bhscroll=true;}}if(elem_scroll_top!=container._cached_scrollTop){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="horizontal"){bvscroll=true;}}if(bhscroll||bvscroll){linkedcontrol._scrollTo(bhscroll?hscroll_pos:null,bvscroll?vscroll_pos:null);}}}};}}else{__pContainerElement._syshandler_onscroll_forward=function(evt){var target=evt.target;var container=target._linked_element;if(container){var parent_elem=container.parent;if(parent_elem._recover_vpos!=undefined){target.scrollTop=parent_elem._recover_vpos;parent_elem._recover_vpos=undefined;return;}if(parent_elem._recover_hpos!=undefined){target.scrollLeft=parent_elem._recover_hpos;parent_elem._recover_hpos=undefined;return;}var elem_scroll_top=container._scroll_top|0;var elem_scroll_left=container._scroll_left|0;container._cached_scrollLeft=target.scrollLeft;container._cached_scrollTop=target.scrollTop;var hscroll_pos=container._cached_scrollLeft;var vscroll_pos=container._cached_scrollTop;var linkedcontrol=container._findScrollbarControl(container,false);var bhscroll=false;var bvscroll=false;if(linkedcontrol){if(elem_scroll_left!=container._cached_scrollLeft){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="vertical"){bhscroll=true;}}if(elem_scroll_top!=container._cached_scrollTop){if(linkedcontrol.scrollbartype!="none"&&linkedcontrol.scrollbartype!="horizontal"){bvscroll=true;}}if(bhscroll||bvscroll){linkedcontrol._scrollTo(bhscroll?hscroll_pos:null,bvscroll?vscroll_pos:null);}}}};}__pContainerElement._findScrollbarControl=function(elem,is_vert){while(elem){var linkedcontrol=elem.linkedcontrol;if(linkedcontrol){return linkedcontrol;}elem=elem.parent;}return null;};__pContainerElement.clearContents=function(){var handle=this.handle;if(handle){nexacro._stopSysObserving(handle,"scroll","onscroll",this._syshandler_onscroll_forward);handle._linked_element=null;var dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);nexacro.__removeDOMNode(dest_handle,handle);this.owner_elem=null;this.handle=this.dest_handle=null;}};__pContainerElement.appendChildElement=function(child_elem){if(this.handle){if(child_elem.parent_elem!=this.parent_elem){if(child_elem.handle){var old_doc=child_elem._getRootWindowHandle();var new_doc=this._getRootWindowHandle();if(old_doc!=new_doc){child_elem.parent_elem=this.parent_elem;child_elem._removeFromContainer();}else{child_elem.parent_elem=this.parent_elem;}}else{child_elem.parent_elem=this.parent_elem;}}if(!child_elem.handle){child_elem.create();}else{child_elem._appendToContainer(this);}}};__pContainerElement.removeChildElement=function(child_elem){if(child_elem.owner_elem==this){child_elem._removeFromContainer();}};__pContainerElement._moveToNextElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__moveDOMNodeToNext(elem.handle,base_elem.handle);}};__pContainerElement._moveToPrevElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__moveDOMNodeToPrev(elem.handle,base_elem.handle);}};__pContainerElement._sendToBackElement=function(elem){if(elem&&elem.owner_elem==this&&elem.handle){nexacro.__sendDOMNodeToBack(elem.handle);}};__pContainerElement._bringToFrontElement=function(elem){if(elem&&elem.owner_elem==this&&elem.handle){nexacro.__bringDOMNodeToFront(elem.handle);}};__pContainerElement._getElementClassName=function(){return this._use_native_scroll?this._getElementNexaClassName("nexacontainer","nexanativescroll"):this._getElementNexaClassName("nexacontainer");};__pContainerElement.setElementZoom=function(zoomfactor){this.zoom=zoomfactor;var handle=this.handle;if(handle){nexacro.__setDOMStyle_TransformScale(handle.style,zoomfactor/100);}};nexacro._MultiInnerContainerElement=function(parent_elem,use_translate_scroll,type){nexacro._ContainerElement.call(this,parent_elem,use_translate_scroll,type);this._scroll_max_arr=[];this._ext_inners=[];};var __pMultiInnerContainerElement=nexacro._createPrototype(nexacro._ContainerElement,nexacro._MultiInnerContainerElement);nexacro._MultiInnerContainerElement.prototype=__pMultiInnerContainerElement;__pMultiInnerContainerElement._type_name="MultiInnerContainerElement";__pMultiInnerContainerElement.attachHandle=function(win){nexacro._ContainerElement.prototype.attachHandle.call(this,win);this.recalcInnerContainer();};__pMultiInnerContainerElement.destroy=function(){nexacro._ContainerElement.prototype.destroy.call(this);this._destroyInnerContainerPages();this._scroll_max_arr=null;};__pMultiInnerContainerElement.createInnerContainer=function(){var handle=this.handle;if(handle){if(this._use_translate_scroll){var _doc=this.owner_elem._getRootWindowHandle();var dest_handle=this.dest_handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(dest_handle,this._getElementNexaClassName("nexainnercontainer"));nexacro.__setDOMNode_Id(dest_handle,"","nexacontainer");nexacro.__appendDOMNode(handle,dest_handle);var len=this._calcInnerContainerPages();if(len>0){for(var i=0;i<len;i++ ){this.appendInnerContainer(i,_doc);}}this.updateInnerContainerSize();this.updateInnerContainerPos();if(this._scroll_left!=0||this._scroll_top!=0){nexacro.__setDOMStyle_Translate(dest_handle.style, -this._scroll_left, -this._scroll_top);}}else{this.dest_handle=handle;if(this._scroll_left){nexacro.__setDOMNode_HScrollPos(handle,this._scroll_left);}if(this._scroll_top){nexacro.__setDOMNode_VScrollPos(handle,this._scroll_top);}}}};__pMultiInnerContainerElement.recalcInnerContainer=function(){var owner_elem=this.owner_elem;if(owner_elem){var i;var _doc=this.owner_elem._getRootWindowHandle();var len=this._calcInnerContainerPages();if(len>0){for(i=0;i<len;i++ ){this.appendInnerContainer(i,_doc);}}if(len<0){for(i=len* -1;i>0;i-- ){this.removeInnerContainer();}}this.updateInnerContainerSize();this.updateInnerContainerPos();}};__pMultiInnerContainerElement.appendInnerContainer=function(index,_doc){var handle=this.handle;var dest_handle=this.dest_handle;var inner=_doc.createElement("div");nexacro.__setDOMNode_ClassName(inner,this._getElementNexaClassName("nexainnercontainer"));nexacro.__setDOMNode_Id(inner,"",dest_handle.id+"_ext_"+index);nexacro.__setDOMNode_Selectable(inner,false);var inner_style=inner.style;nexacro.__setDOMStyle_Absolute(inner_style);nexacro.__appendDOMNode(handle,inner);this._ext_inners.push(inner);};__pMultiInnerContainerElement.removeInnerContainer=function(){var handle=this.handle;if(handle){var idx=this._ext_inners.length-1;nexacro.__removeDOMNode(handle,this._ext_inners[idx]);this._ext_inners.splice(idx,1);}};__pMultiInnerContainerElement.updateInnerContainerSize=function(){var dest_handle=this.dest_handle;if(dest_handle){var scroll_maxheight=this._scroll_maxheight;var scroll_page_tops=this._scroll_max_arr;var width=this._scroll_maxwidth;var height=0;{if(scroll_maxheight>scroll_page_tops[0]){height=scroll_page_tops[0];}else{height=scroll_maxheight;}nexacro.__setDOMStyle_Size(dest_handle.style,width,height);}for(var i=1,n=scroll_page_tops.length;i<n;i++ ){dest_handle=this._ext_inners[i-1];if(dest_handle){if(scroll_maxheight>scroll_page_tops[i]){height=scroll_page_tops[i]-scroll_page_tops[i-1];}else{height=scroll_maxheight-scroll_page_tops[i-1];}nexacro.__setDOMStyle_Size(dest_handle.style,width,height);}}}};__pMultiInnerContainerElement.updateInnerContainerPos=function(){var dest_handle=this.dest_handle;if(dest_handle){var ext_vpos;var hpos=this._scroll_left;var vpos=this._scroll_top;var scroll_max_arr=this._scroll_max_arr;var bRtl=this._isRtl();nexacro.__setDOMStyle_Translate(dest_handle.style, -hpos, -vpos,bRtl);for(var i=0,n=this._ext_inners.length;i<n;i++ ){if(vpos+this.height>scroll_max_arr[i]&&vpos<scroll_max_arr[i+1]){if(nexacro._Browser_Transform3d>0){ext_vpos=vpos-(scroll_max_arr[i]-this.height);}else{ext_vpos=vpos-scroll_max_arr[i];}}else{ext_vpos= -this.height;}nexacro.__setDOMStyle_Translate(this._ext_inners[i].style, -hpos, -ext_vpos,bRtl);}}};__pMultiInnerContainerElement._calcInnerContainerPages=function(){var curr_inner=this._ext_inners.length;var post_inner=this._scroll_max_arr.length-1;return post_inner-curr_inner;};__pMultiInnerContainerElement._destroyInnerContainerPages=function(){var handle=this.handle;if(handle){for(var i=0,len=this._ext_inners.length;i<len;i++ ){nexacro.__removeDOMNode(handle,this._ext_inners[i]);}this._ext_inners=null;}};__pMultiInnerContainerElement.setElementScrollMaxSize=function(width,height){this._scroll_maxwidth=width;this._scroll_maxheight=height;if(this._use_translate_scroll){this.recalcInnerContainer();}};__pMultiInnerContainerElement._setElementVScrollPos=function(vpos){if(this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_top=vpos;this.updateInnerContainerPos();}};__pMultiInnerContainerElement._setScrollMaxTops=function(tops){this._scroll_max_arr=tops;};__pMultiInnerContainerElement._getDestHandle=function(top,idx){if(idx==undefined){idx=this._getExtInnerIdx(top);}return (idx<0)?this.dest_handle:this._ext_inners[idx];};__pMultiInnerContainerElement._getExtInnerIdx=function(top){var _scroll_max=this._scroll_max_arr;var idx= -1;if(_scroll_max){for(var i=0,n=_scroll_max.length;i<n;i++ ){if(top<_scroll_max[i]){idx=i-1;break;}}}return idx;};__pMultiInnerContainerElement._changeInnerElement=function(top,target_handle){var idx=this._getExtInnerIdx(top);var next_handle=this._getDestHandle(top,idx);var prev_handle=target_handle.parentElement;if(idx!=null&&idx> -1){top=top-this._scroll_max_arr[idx];}if(prev_handle&&(prev_handle!=next_handle)){nexacro.__removeDOMNode(prev_handle,target_handle);nexacro.__appendDOMNode(next_handle,target_handle);}return top;};nexacro.PluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var _pPluginElement=nexacro._createPrototype(nexacro.Element,nexacro.PluginElement);nexacro.PluginElement.prototype=_pPluginElement;_pPluginElement._type_name="PluginElement";_pPluginElement.license="";_pPluginElement.lpkpath="";_pPluginElement.classid="";_pPluginElement.codebase="";_pPluginElement.code="";_pPluginElement.archive="";_pPluginElement.mimetype="";_pPluginElement.pluginsrc="";_pPluginElement.plugintype="";_pPluginElement.pluginpage="";_pPluginElement.windowed=false;_pPluginElement.popupstyle=false;_pPluginElement.enable=true;_pPluginElement.font=null;_pPluginElement.color=null;_pPluginElement.cursor=null;_pPluginElement.align=null;_pPluginElement.padding=null;_pPluginElement.color=null;_pPluginElement._object_node=null;_pPluginElement._embed_node=null;_pPluginElement._params=null;_pPluginElement._events=null;_pPluginElement._object_id=null;_pPluginElement.create=function(){var owner_elem;var _doc;if(!this.parent_elem){_doc=nexacro._managerFrameDoc;owner_elem=_doc.body;this.owner_elem=_doc.body;this.owner_elem.dest_handle=_doc.body;}else{owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;_doc=owner_elem._getRootWindowHandle();}}if(owner_elem&&!this.handle){var handle=this._createObjectElementHandle(_doc,this.left,this.top,this.width,this.height,this._params);nexacro.__setDOMNode_Selectable(handle,false);var handle_style=handle.style;if(!this.visible){nexacro.__setDOMStyle_Visible(handle_style,false);}this.handle=this.dest_handle=handle;var events=this._events;var event_cnt=events.length;for(var i=0;i<event_cnt;i++ ){this.addEventHandler(events.get_id(i),events.get_item(i),null);}nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}};if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"){_pPluginElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){var handle_style=this._getCommonStyleStr();var width=this.width;var height=this.height;this.owner_elem=owner_elem;this.name=owner_elem.name+":"+this._type_name;var str="";if(this.lpkpath){str+='<object classid = "clsid:5220cb21-c88d-11cf-b347-00aa00a28331" id = "'+this.name+'">';str+='<param name="LPKPath" value="'+this.lpkpath+'">';str+='<embed src= "'+this.lpkpath+'" ></embed>';str+='</object>';}str+='<object id="'+this.name+'" ';var classid=this.classid;if(classid){str+='classid="'+classid+'" ';}var codebase=this.codebase;if(codebase){str+='codebase="'+codebase+'" ';}var code=this.code;if(code){str+='code="'+code+'" ';}var archive=this.archive;if(archive){str+='archive="'+archive+'" ';}var mimetype=this.mimetype;if(mimetype){str+='type="'+mimetype+'" ';}var data=this.data;if(data){str+='data="'+data+'" ';}str+=(handle_style)?(" style='"+handle_style+"'>"):">";var params=this._params;var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){str+='<param name="'+params.get_id(i)+'" value="'+params.get_item(i)+'" />';}if(nexacro._BrowserVersion>=9){if(this.pluginsrc||this.pluginpage){str+='<embed width="'+width+'" height="'+height+'" ';var pluginsrc=this.pluginsrc;if(pluginsrc){str+='src="'+pluginsrc+'" ';}var pluginpage=this.pluginpage;if(pluginpage){str+='pluginspage="'+pluginpage+'" ';}var plugintype=this.plugintype;if(plugintype){str+='type="'+plugintype+'" ';}for(i=0;i<param_cnt;i++ ){str+=params.get_id(i)+'="'+params.get_item(i)+'" ';}str+='/>';}}str+="</object></div>";return str;}return "";};}else{_pPluginElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this._created){this.owner_elem=owner_elem;this.name=owner_elem.name+":"+this._type_name;var handle_style=this._getCommonStyleStr();var str="<object id = '"+this.name+"'";str+=this.codebase?"codebase = '"+this.codebase+"'":"";str+=this.code?"code = '"+this.code+"'":"";str+=this.archive?"archive = '"+this.archive+"'":"";str+=this.mimetype?"mimetype = '"+this.mimetype+"'":"";str+=this.movie?"data = '"+this.movie+"'":"";str+=(handle_style)?(" style='"+handle_style+"'/>"):"/>";var params=this._params;var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){str+="<param name ='"+params.get_id(i)+"' value ='"+params.get_item(i)+"'/>";}if(this.pluginsrc||this.pluginpage){str+="<embed ";str+=this.pluginsrc?"src = '"+this.pluginsrc+"'":"";str+=this.pluginpage?"pluginpage = '"+this.pluginpage+"'":"";str+=this.plugintype?"type = '"+this.plugintype+"'":"";for(i=0;i<param_cnt;i++ ){str+=" "+params.get_id(i)+" = '"+params.get_item(i)+"' ";}str+="/></embed>";}str+="</object>";return str;}return "";};}_pPluginElement.attachHandle=function(win){var handle=this.handle=win._doc.getElementById(this.name);if(handle){this._object_node=handle;var embed_node=null;var nodes=handle.getElementsByTagName("embed");if(nodes&&nodes.length>0){embed_node=nodes[0];}this._embed_node=embed_node;}};_pPluginElement.destroy=function(){var handle=this.handle;if(handle){handle._linked_element=null;var _owner_handle=null;if(this.owner_elem&&this.owner_elem.dest_handle){_owner_handle=this.owner_elem.dest_handle;}if(!this.owner_elem||_owner_handle){nexacro.__removeDOMNode(_owner_handle,handle);}this.owner_elem=null;this.handle=this.dest_handle=null;this._object_node=null;this._embed_node=null;}this.parent=null;this.parent_elem=null;var params=this._params;if(params){params.destroy();this._params=null;}var events=this._events;if(events){events.destroy();this._events=null;}};if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"){_pPluginElement._createObjectElementHandle=function(_doc,left,top,width,height,params){var handle=_doc.createElement("div");handle._linked_element=this;var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle_style,width,height);var innerHtml="";if(this.lpkpath){innerHtml+='<object classid = "clsid:5220cb21-c88d-11cf-b347-00aa00a28331">';innerHtml+='<param name="LPKPath" value="'+this.lpkpath+'">';innerHtml+='<embed src= "'+this.lpkpath+'" ></embed>';innerHtml+='</object>';}if(this.parent_elem&&this.component){this._object_id=this.parent_elem.handle.id+'_'+this.component._type_name;innerHtml+='<object id='+this._object_id+' style="position: absolute; overflow: hidden; width: '+width+'px; height: '+height+'px;" ';}else{innerHtml+='<object style="position: absolute; overflow: hidden; width: '+width+'px; height: '+height+'px;" ';}var classid=this.classid;if(classid){innerHtml+='classid="'+classid+'" ';}var codebase=this.codebase;if(codebase){innerHtml+='codebase="'+codebase+'" ';}var code=this.code;if(code){innerHtml+='code="'+code+'" ';}var archive=this.archive;if(archive){innerHtml+='archive="'+archive+'" ';}var mimetype=this.mimetype;if(mimetype){innerHtml+='type="'+mimetype+'" ';}var data=this.data;if(data){innerHtml+='data="'+data+'" ';}innerHtml+='>';var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){innerHtml+='<param name="'+params.get_id(i)+'" value="'+params.get_item(i)+'" />';}var has_embed_node=false;if(nexacro._BrowserVersion>=9){if(this.pluginsrc||this.pluginpage){has_embed_node=true;innerHtml+='<embed width="'+width+'" height="'+height+'" ';var pluginsrc=this.pluginsrc;if(pluginsrc){innerHtml+='src="'+pluginsrc+'" ';}var pluginpage=this.pluginpage;if(pluginpage){innerHtml+='pluginspage="'+pluginpage+'" ';}var plugintype=this.plugintype;if(plugintype){innerHtml+='type="'+plugintype+'" ';}for(i=0;i<param_cnt;i++ ){innerHtml+=params.get_id(i)+'="'+params.get_item(i)+'" ';}innerHtml+='/>';}}innerHtml+="</object>";handle.innerHTML=innerHtml;var object_node=null;var child_node=handle.firstChild;while(child_node){if(child_node.nodeType==1&&child_node.tagName.toLowerCase()=="object"){object_node=child_node;}child_node=child_node.nextSibling;}this._object_node=object_node;if(object_node&&has_embed_node){var embed_node=null;var nodes=object_node.getElementsByTagName("embed");if(nodes&&nodes.length>0){embed_node=nodes[0];}this._embed_node=embed_node;}return handle;};}else{_pPluginElement._createObjectElementHandle=function(_doc,left,top,width,height,params){var handle=_doc.createElement("object");handle._linked_element=this;var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle_style,width,height);var codebase=this.codebase;if(codebase){nexacro.__setHTMLAttr_Proeprty(handle,'codebase',codebase);}var code=this.code;if(code){nexacro.__setHTMLAttr_Proeprty(handle,'code',code);}var movie=this.movie;if(movie){nexacro.__setHTMLAttr_Proeprty(handle,'data',movie);}var archive=this.archive;if(archive){nexacro.__setHTMLAttr_Proeprty(handle,'archive',archive);}if(nexacro._Browser=="Chrome"||nexacro._BrowserType=="Edge"){var mimetype=this.mimetype;if(mimetype){nexacro.__setHTMLAttr_Proeprty(handle,'mimetype',mimetype);}}var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){this._setObjectDOMParam(_doc,handle,params.get_id(i),params.get_item(i));}if(this.pluginsrc||this.pluginpage){var _embed_node=_doc.createElement("embed");var node_style=_embed_node.style;nexacro.__setDOMStyle_Absolute(node_style);nexacro.__setDOMStyle_Size(node_style,width,height);var pluginsrc=this.pluginsrc;if(pluginsrc){nexacro.__setHTMLAttr_Proeprty(_embed_node,'src',pluginsrc);}var pluginpage=this.pluginpage;if(pluginpage){nexacro.__setHTMLAttr_Proeprty(_embed_node,'pluginspage',pluginpage);}var plugintype=this.plugintype;if(plugintype){nexacro.__setHTMLAttr_Proeprty(_embed_node,'type',plugintype);}for(i=0;i<param_cnt;i++ ){nexacro.__setHTMLAttr_Proeprty(_embed_node,params.get_id(i),params.get_item(i));}this._embed_node=_embed_node;nexacro.__appendDOMNode(handle,_embed_node);}this._object_node=handle;return handle;};}_pPluginElement._setObjectDOMParam=function(_doc,target_handle,name,value){var param_node=_doc.createElement("param");nexacro.__setHTMLAttr_Proeprty(param_node,"name",name);nexacro.__setHTMLAttr_Proeprty(param_node,"value",value);nexacro.__appendDOMNode(target_handle,param_node);};_pPluginElement.on_update_position=function(resize_flag,move_flag,newleft,newtop){var handle=this._object_node;if(handle){var handle_style=handle.style;nexacro.__setDOMStyle_Absolute(handle_style);if(move_flag){nexacro.__setDOMStyle_Pos(handle_style,newleft,newtop);}if(resize_flag){nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);}}};_pPluginElement.setElementFocus=function(selffocus){var handle=this._object_node;if(handle){nexacro.__setDOMNode_Focus(handle,true);nexacro.__setLastFocusedElement(this);}};_pPluginElement.setElementLicense=function(license){if(this.license!=license){this.license=license;}};_pPluginElement.setElementLicenseFile=function(lpkpath){if(!this.handle&&this.lpkpath!=lpkpath){this.lpkpath=lpkpath;}};_pPluginElement.setElementMIMEType=function(mimetype){var object_node;if(this.mimetype!=mimetype){this.mimetype=mimetype;object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,'mimetype',mimetype);}}if(this.plugintype!=mimetype){this.plugintype=mimetype;object_node=this._object_node;if(object_node){var _embed_node=this._embed_node;if(_embed_node==null){var _doc=this._getRootWindowHandle();this._embed_node=_embed_node=_doc.createElement("embed");nexacro.__appendDOMNode(object_node,_embed_node);}nexacro.__setHTMLAttr_Proeprty(_embed_node,'type',mimetype);}}};if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"){_pPluginElement.setElementClassId=function(classid){if(classid){if(classid.charAt(0)=='{'){var clsid=classid.replace(/\{|\}/g,"");classid="clsid:"+clsid;}}if(this.classid!=classid){this.classid=classid;var object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,'classid',classid);}}};}else{_pPluginElement.setElementClassId=nexacro._emptyFn;}_pPluginElement.setElementCodebase=function(codebase){if(this.codebase!=codebase){this.codebase=codebase;var object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,'codebase',codebase);}}};_pPluginElement.setElementCode=function(code){if(this.code!=code){this.code=code;var object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,'code',code);}}};_pPluginElement.setElementArchive=function(archive){if(this.archive!=archive){this.archive=archive;var object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,'archive',archive);}}};_pPluginElement.getElementParam=function(name){var handle=this.handle;var object_node=this._object_node;if(handle&&object_node){var param=object_node.getElementsByTagName("param");for(var i in param){if(param[i].name==name){return param[i].value;}}if(object_node[name]){return this._object_node[name];}}else{var params=this._params;return params.get_item(name);}};_pPluginElement.setElementParam=function(name,value){var obj_node=this._object_node;if(this.handle&&obj_node){var _doc=this._getRootWindowHandle();var param=obj_node.getElementsByTagName("param");for(var i in param){if(param[i].name==name){param[i].value=value;this._object_node[name]=value;return;}}this._setObjectDOMParam(_doc,obj_node,name,value);this._object_node[name]=value;}else{var params=this._params;if(params.get_item(name)){params.set_item(name,value);}else{params.add_item(name,value);}}};_pPluginElement.setElementPluginSrc=function(src){if(this.pluginsrc!=src){this.pluginsrc=src;var object_node=this._object_node;if(object_node){var embed_node=this._embed_node;if(embed_node==null){var _doc=this._getRootWindowHandle();this._embed_node=embed_node=_doc.createElement("embed");var embed_node_style=embed_node.style;nexacro.__setDOMStyle_Absolute(embed_node_style);nexacro.__setDOMStyle_Pos(embed_node_style,this.left,this.top);nexacro.__setDOMStyle_Size(embed_node_style,this.width,this.height);nexacro.__setHTMLAttr_Proeprty(embed_node,'src',src);nexacro.__appendDOMNode(object_node,embed_node);}else{nexacro.__setHTMLAttr_Proeprty(embed_node,'src',src);nexacro.__removeDOMNode(object_node,embed_node);nexacro.__appendDOMNode(object_node,embed_node);}}}};_pPluginElement._setElementPluginName=nexacro._emptyFn;_pPluginElement.setElementPluginMIMEType=function(type){if(this.plugintype!=type){this.plugintype=type;var object_node=this._object_node;if(object_node){var embed_node=this._embed_node;if(embed_node==null){var _doc=this._getRootWindowHandle();this._embed_node=embed_node=_doc.createElement("embed");nexacro.__appendDOMNode(object_node,embed_node);}nexacro.__setHTMLAttr_Proeprty(embed_node,'type',type);}}};_pPluginElement.callMethod=function(){if(arguments.length<1){return;}if(this.handle&&this._object_node){var fn_name=Array.prototype.shift.call(arguments);var str;if(this._embed_node){str='this._embed_node.'+fn_name;}else if(this._object_node){str='this._object_node.'+fn_name;}else{str=this._object_id+'.'+fn_name;}str+='(';var len=arguments.length;if(len>0){str+='arguments[0]';for(var i=1;i<len;i++ ){str+=', arguments['+i+']';}}str+=');';return eval(str);}};_pPluginElement._getPluginObject=function(){if(this.handle&&this._object_node){var obj=new nexacro.PluginObject();obj.handle=this._object_node;obj._doc=this._getRootWindowHandle();return obj;}};if(nexacro._Browser=="IE"&&nexacro._BrowserType!="Edge"){_pPluginElement.addEventHandler=function(name,callback){if(this.handle&&this._object_node&&this._object_id){var _doc=this._getRootWindowHandle();var script_node=_doc.createElement("script");nexacro.__setHTMLAttr_Proeprty(script_node,'for',this._object_id);var paramsFromToStringRegex=/\(.*?\)/;var params=callback.toString().match(paramsFromToStringRegex)[0];var eventValue=name+params;var callfunc="";var frmidx,frmlen;nexacro.__setHTMLAttr_Proeprty(script_node,'event',eventValue);nexacro.__setHTMLAttr_Proeprty(script_node,'language','javascript');var parentFrame,parentFrame2;parentFrame=this.component?this.component.parent:null;if(parentFrame){callfunc="."+this.component.id+'["'+name+'"]; \n';callfunc+='if (eventFn) eventFn._firePluginEvent'+params+';';do{if(parentFrame instanceof nexacro.MainFrame){callfunc='var eventFn = nexacro.getApplication().mainframe'+callfunc;break;}if(parentFrame instanceof nexacro.ChildFrame){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2 instanceof nexacro.FrameSet||parentFrame2 instanceof nexacro.VFrameSet||parentFrame2 instanceof nexacro.HFrameSet||parentFrame2 instanceof nexacro.ChildFrame){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}else if(parentFrame2 instanceof nexacro.MainFrame){callfunc='.frame'+callfunc;}else if(parentFrame2 instanceof nexacro.Form){callfunc='.'+parentFrame.id+callfunc;}}}else if(parentFrame instanceof nexacro.FrameSet||parentFrame instanceof nexacro.VFrameSet||parentFrame instanceof nexacro.HFrameSet){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}}else if(parentFrame instanceof nexacro.Div){callfunc='.'+parentFrame.id+callfunc;}else if(parentFrame instanceof nexacro.Form){callfunc='.form'+callfunc;}parentFrame=parentFrame.parent;}while(parentFrame)}nexacro.__setDOMNode_Text(script_node,callfunc);var owner_elem=this.parent_elem.getContainerElement(this.position_step);nexacro.__appendDOMNode(owner_elem.dest_handle,script_node);return true;}else{this._events.add_item(name,callback);}return false;};_pPluginElement.removeEventHandler=function(name,callback){if(this.handle){var paramsFromToStringRegex=/\(.*?\)/;var params=callback.toString().match(paramsFromToStringRegex)[0];var eventValue=name+params;var i;var owner_elem=this.parent_elem.getContainerElement(this.position_step);var _scripts=owner_elem.dest_handle.getElementsByTagName("script");var length=_scripts.length;for(i=0;i<length;i++ ){var script=_scripts[i];if(script){var eventAttribute=nexacro.__getHTMLAttr_Proeprty(script,'event');if(eventAttribute===eventValue){var parentNode=script.parentNode;nexacro.__unlinkDOMNode(parentNode,script);break;}}}}};_pPluginElement.setElementMovie=function(movie){this.setElementParam("movie",movie);};_pPluginElement.setElementPluginPage=function(pluginpage){if(this.pluginpage!=pluginpage){this.pluginpage=pluginpage;var object_node=this._object_node;if(object_node){var embed_node=this._embed_node;if(embed_node==null){var _doc=this._getRootWindowHandle();this._embed_node=embed_node=_doc.createElement("embed");nexacro.__appendDOMNode(object_node,embed_node);}nexacro.__setHTMLAttr_Proeprty(embed_node,'pluginspage',pluginpage);}}};_pPluginElement._play=function(movie){var obj_node=this._object_node;if(obj_node){obj_node.Play();}};_pPluginElement._stopPlay=function(movie){var obj_node=this._object_node;if(obj_node){obj_node.StopPlay();}};}else{_pPluginElement.addEventHandler=function(name,callback){if(this.handle&&this._object_node){var object_node=this._object_node;nexacro.__setHTMLAttr_Proeprty(object_node,name,name);var doc=this._getRootWindowHandle();var script_node=doc.createElement("script");var paramsFromToStringRegex=/\(.*?\)/;var params=callback.toString().match(paramsFromToStringRegex)[0];var eventValue=name+params;nexacro.__setHTMLAttr_Proeprty(script_node,'event',eventValue);var parentFrame,parentFrame2;var callfunc="";var frmidx,frmlen;parentFrame=this.component?this.component.parent:null;if(parentFrame){callfunc="."+this.component.id+'["'+name+'"]; \n';callfunc+='\tif (eventFn) eventFn._firePluginEvent'+params+';'+"\n};";do{if(parentFrame instanceof nexacro.MainFrame){callfunc='\tvar eventFn = nexacro.getApplication().mainframe'+callfunc;break;}if(parentFrame instanceof nexacro.ChildFrame){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2 instanceof nexacro.FrameSet||parentFrame2 instanceof nexacro.VFrameSet||parentFrame2 instanceof nexacro.HFrameSet||parentFrame2 instanceof nexacro.ChildFrame){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}else if(parentFrame2 instanceof nexacro.MainFrame){callfunc='.frame'+callfunc;}else if(parentFrame2 instanceof nexacro.Form){callfunc='.'+parentFrame.id+callfunc;}}}else if(parentFrame instanceof nexacro.FrameSet||parentFrame instanceof nexacro.VFrameSet||parentFrame instanceof nexacro.HFrameSet){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}}else if(parentFrame instanceof nexacro.Div){callfunc='.'+parentFrame.id+callfunc;}else if(parentFrame instanceof nexacro.Form){callfunc='.form'+callfunc;}parentFrame=parentFrame.parent;}while(parentFrame)}if(callfunc){callfunc='function '+eventValue+'\n{\n'+callfunc;}script_node.text=callfunc;this.handle.appendChild(script_node);return true;}else{this._events.add_item(name,callback);}return false;};_pPluginElement.removeEventHandler=function(name,callback){if(this.handle&&this._object_node){var object_node=this._object_node;nexacro.__removeHTMLAttr_Proeprty(object_node,name);object_node.removeAttribute(name);var paramsFromToStringRegex=/\(.*?\)/;var params=callback.toString().match(paramsFromToStringRegex)[0];var eventValue=name+params;var i;var scripts=this.handle.getElementsByTagName("script");var length=scripts.length;for(i=0;i<length;i++ ){var script=scripts[i];if(script){var eventAttribute=nexacro.__getHTMLAttr_Proeprty(script,'event');if(eventAttribute===eventValue){var parentNode=script.parentNode;nexacro.__unlinkDOMNode(parentNode,script);break;}}}}};if(nexacro._Browser=="Chrome"){_pPluginElement.setElementMovie=function(movie){if(this.movie){nexacro.__removeDOMNode(this.owner_elem.handle,this._object_node);var handle=this._createObjectElementHandle(document,this.left,this.top,this.width,this.height,this._params);nexacro.__appendDOMNode(this.owner_elem.dest_handle,handle);}this.movie=movie;var obj_node=this._object_node;if(obj_node){nexacro.__setHTMLAttr_Proeprty(obj_node,"data",movie);}};}else if(nexacro._BrowserType=="Edge"){_pPluginElement.setElementMovie=function(movie){this.movie=movie;var obj_node=this._object_node;if(obj_node){nexacro.__removeDOMNode(this.owner_elem.handle,obj_node);var handle=this._createObjectElementHandle(document,this.left,this.top,this.width,this.height,this._params);nexacro.__appendDOMNode(this.owner_elem.handle,handle);}};}else{_pPluginElement.setElementMovie=function(movie){this.movie=movie;var obj_node=this._object_node;if(obj_node){nexacro.__setHTMLAttr_Proeprty(obj_node,"data",movie);}};}_pPluginElement.setElementPluginPage=nexacro._emptyFn;_pPluginElement._play=function(){var obj_node=this._object_node;if(obj_node){obj_node.Play();}};_pPluginElement._stopPlay=function(){var obj_node=this._object_node;if(obj_node){obj_node.StopPlay();}};}_pPluginElement.getProperty=_pPluginElement.getElementParam;_pPluginElement.setProperty=_pPluginElement.setElementParam;_pPluginElement.install=nexacro._emptyFn;_pPluginElement.isInstalled=nexacro._emptyFn;_pPluginElement.isLoaded=nexacro._emptyFn;_pPluginElement.setElementVisible=nexacro._emptyFn;_pPluginElement.setElementAdjustAlpha=nexacro._emptyFn;_pPluginElement.setElementWindowed=nexacro._emptyFn;_pPluginElement.setElementEnable=nexacro._emptyFn;_pPluginElement.setElementPopupStyle=nexacro._emptyFn;_pPluginElement.initEvent=nexacro._emptyFn;_pPluginElement.updateWindow=nexacro._emptyFn;_pPluginElement.setElementAdjustAlpha=nexacro._emptyFn;_pPluginElement.setElementUsePersistData=nexacro._emptyFn;_pPluginElement.setElementClassId64=nexacro._emptyFn;nexacro.PluginObject=function(){};var __pPluginObject=nexacro._createPrototype(nexacro.Object,nexacro.PluginObject);nexacro.PluginObject.prototype=__pPluginObject;__pPluginObject._type_name="PluginObject";__pPluginObject.handle=null;__pPluginObject._doc=null;__pPluginObject._window=null;__pPluginObject.getProperty=function(name){var handle=this.handle;if(handle!==undefined){if(name){var property=handle[name];if(property!==undefined){if(property===null||(typeof property!="object"&&typeof property!="function")){return property;}var pobject=new nexacro.PluginObject();pobject.handle=property;pobject._window=this._window;return pobject;}var param=this.handle.getElementsByTagName("param");for(var i in param){if(param[i].name==name){return param[i].value;}}}}};__pPluginObject.setProperty=function(name,value){if(this.handle&&name){this.handle[name]=value;var param=this.handle.getElementsByTagName("param");for(var i in param){if(param[i].name==name){param[i].value=value;return;}}if(this._doc){var param_node=this._doc.createElement("param");nexacro.__setHTMLAttr_Proeprty(param_node,"name",name);nexacro.__setHTMLAttr_Proeprty(param_node,"value",value);nexacro.__appendDOMNode(this.handle,param_node);}}};__pPluginObject._delete_property=function(name){if(this.handle&&name){if(this.handle[name]){this.handle[name]="";return;}var param=this.handle.getElementsByTagName("param");for(var i in param){if(param[i].name==name){nexacro.__unlinkDOMNode(this.handle,param[i]);return;}}}};__pPluginObject.callMethod=function(){if(arguments.length<1){return;}if(this.handle||this.handle!==undefined){var fn_name=Array.prototype.shift.call(arguments);var str='this.handle.'+fn_name;str+='(';var len=arguments.length;if(len>0){str+='arguments[0]';for(var i=1;i<len;i++ ){str+=', arguments['+i+']';}}str+=');';var value=eval(str);if(value!=null&&typeof (value)=="object"){var pobject=new nexacro.PluginObject();pobject.handle=value;return pobject;}return value;}};__pPluginObject.destroy=nexacro._emptyFn;nexacro._WebBrowserPluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.parent_elem.windowed=true;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var __pWebBrowserPluginElement=nexacro._createPrototype(nexacro.PluginElement,nexacro._WebBrowserPluginElement);nexacro._WebBrowserPluginElement.prototype=__pWebBrowserPluginElement;__pWebBrowserPluginElement._type_name="WebBrowserPluginElement";__pWebBrowserPluginElement.initEvent=nexacro._emptyFn;__pWebBrowserPluginElement._object_node=null;__pWebBrowserPluginElement._embed_node=null;__pWebBrowserPluginElement._params=null;__pWebBrowserPluginElement._events=null;__pWebBrowserPluginElement._window=null;__pWebBrowserPluginElement._document=null;__pWebBrowserPluginElement._block_node=null;__pWebBrowserPluginElement._prev_outfocus_message_elem=null;__pWebBrowserPluginElement._next_outfocus_message_elem=null;var _iframe_eventhandler_onmousemove=function(evt){var target;if(nexacro._Browser=="IE"){target=evt.srcElement;}else{target=evt.target;}try{if(target){var _doc=target.ownerDocument;var ct=_doc._nexacro_iframe_contaniner;if(nexacro._cur_track_info){var win=nexacro._findWindow(window.nexacro_HTMLSysEvent._win_win);var elem=nexacro.__findParentElement(ct);var wb=_doc._nexacro_iframe_contaniner._linked_element.linkedcontrol;var pos=wb._getWindowPosition();win._on_sys_mousemove(elem,"lbutton",evt.altKey,evt.ctrlKey,evt.shiftKey,evt.clientX+pos.x,evt.clientY+pos.y,evt.screenX,evt.screenY,evt.offsetX,evt.offsetY);}}}catch(e){}};var _iframe_eventhandler_ontouchmove=function(evt){var target;var scroll_target;function getDirection(tInfo1,tInfo2){var gap_x=tInfo2[2]-tInfo1[2];var gap_y=tInfo2[3]-tInfo1[3];if(Math.abs(gap_y)>=Math.abs(gap_x)){if(gap_y>0){return 1;}else{return 2;}}else{if(gap_x<0){return 4;}else{return 8;}}}if(nexacro._Browser=="IE"){target=evt.srcElement;}else{target=evt.target;}if(target){var _doc=target.ownerDocument;var _body=_doc.body;var ct=_doc._nexacro_iframe_contaniner;if(_doc._nexacro_bInnerScroll){return;}if(nexacro._OS=="iOS"){scroll_target=_doc._nexacro_iframe;}else{scroll_target=_body;}if(_doc._nexacro_preTouchInfo){var touchlen=evt.changedTouches?evt.changedTouches.length:1;var touch={};for(var i=0;i<touchlen;i++ ){touch=evt.changedTouches?evt.changedTouches[i]:(evt.touches?evt.touches[0]:evt);}var clientX=touch.pageX||touch.clientX;var clientY=touch.pageY||touch.clientY;var screenX=touch.screenX||clientX;var screenY=touch.screenY||clientY;var touchInfo=[clientX,clientY,screenX,screenY];var pNode=target.parentNode;var dir=getDirection(_doc._nexacro_preTouchInfo,touchInfo);var bNexacroScroll;var _win=_doc.defaultView||_doc.parentWindow;if(_doc._nexacro_bInnerScroll===false){if(dir!=_doc._nexacro_bInnerScrollDir){_doc._nexacro_bInnerScroll=undefined;}}if(dir<3){while(pNode&&_doc._nexacro_bInnerScroll!==false&&pNode!=scroll_target){if(dir==1){if(pNode.scrollTop>0){_doc._nexacro_bInnerScroll=true;return;}}else{if(pNode.scrollTop&&(pNode.scrollTop+pNode.clientHeight)<pNode.scrollHeight){_doc._nexacro_bInnerScroll=true;return;}}pNode=pNode.parentNode;}var clientHeight;if(nexacro._OS=="iOS"){clientHeight=parseInt(scroll_target.style.height);}else{clientHeight=_win.innerHeight;}var scrollHeight=scroll_target.scrollHeight||_doc.documentElement.scrollHeight;var scrollTop=scroll_target.scrollTop||_doc.documentElement.scrollTop;if(dir==1){if(scrollTop==0){bNexacroScroll=true;}}else{if(scrollTop+clientHeight>=scrollHeight){bNexacroScroll=true;}}var preClientY=_doc._nexacro_preTouchInfo[1];if((dir==2&&clientY>preClientY)||(dir==1&&clientY<preClientY)){return;}}else{while(pNode&&_doc._nexacro_bInnerScroll!==false&&pNode!=scroll_target){if(dir==4){if(pNode.scrollLeft>0){_doc._nexacro_bInnerScroll=true;return;}}else{if(pNode.scrollLeft&&(pNode.scrollLeft+pNode.clientWidth)<pNode.scrollWidth){_doc._nexacro_bInnerScroll=true;return;}}pNode=pNode.parentNode;}var clientWidth;if(nexacro._OS=="iOS"){clientWidth=parseInt(scroll_target.style.width);}else{clientWidth=_win.innerWidth;}var scrollWidth=scroll_target.scrollWidth||_doc.documentElement.scrollWidth;var scrollLeft=scroll_target.scrollLeft||_doc.documentElement.scrollLeft;if(dir==8){if(scrollLeft==0){bNexacroScroll=true;}}else{if(scrollLeft+clientWidth>=scrollWidth){bNexacroScroll=true;}}var preClientX=_doc._nexacro_preTouchInfo[0];if((dir==4&&clientX>preClientX)||(dir==8&&clientX<preClientX)){return;}}_doc._nexacro_preTouchInfo[0]=clientX;_doc._nexacro_preTouchInfo[1]=clientY;_doc._nexacro_preTouchInfo[2]=screenX;_doc._nexacro_preTouchInfo[3]=screenY;_doc._nexacro_bInnerScroll=false;_doc._nexacro_bInnerScrollDir=dir;if(bNexacroScroll){nexacro._syshandler_ontouchmove(window.nexacro_HTMLSysEvent,ct,evt);}else{_doc._nexacro_bScroll=false;}}}};var _iframe_eventhandler_ontouchstart=function(evt){var target;var scroll_target;if(nexacro._Browser=="IE"){target=evt.srcElement;}else{target=evt.target;}if(target){var _doc=target.ownerDocument;var _body=_doc.body;var ct=_doc._nexacro_iframe_contaniner;_doc._nexacro_bInnerScroll=undefined;if(nexacro._OS=="iOS"){scroll_target=_doc._nexacro_iframe;}else{scroll_target=_body;}_doc._nexacro_bScroll=false;var _win=_doc.defaultView||_doc.parentWindow;var clientHeight;var clientWidth;if(nexacro._OS=="iOS"){clientHeight=parseInt(scroll_target.style.height);clientWidth=parseInt(scroll_target.style.width);}else{clientHeight=nexacro._getWindowHandleClientHeight(_win);clientWidth=nexacro._getWindowHandleClientWidth(_win);var w_innerHeight=_win.innerHeight;var w_innerWidth=_win.innerWidth;clientHeight=(clientHeight>w_innerHeight)?clientHeight:w_innerHeight;clientWidth=(clientWidth>w_innerWidth)?clientWidth:w_innerWidth;}var scrollHeight=scroll_target.scrollHeight||_doc.documentElement.scrollHeight;var scrollTop=scroll_target.scrollTop||_doc.documentElement.scrollTop;var scrollWidth=scroll_target.scrollWidth||_doc.documentElement.scrollWidth;var scrollLeft=scroll_target.scrollLeft||_doc.documentElement.scrollLeft;if((scrollTop==0||(scrollHeight-clientHeight)<=scrollTop)||(scrollLeft==0||(scrollWidth-clientWidth)<=scrollLeft)){_doc._nexacro_bScroll=true;var touchlen=evt.changedTouches?evt.changedTouches.length:1;var touch={};for(var i=0;i<touchlen;i++ ){touch=evt.changedTouches?evt.changedTouches[i]:(evt.touches?evt.touches[0]:evt);}var clientX=touch.pageX||touch.clientX;var clientY=touch.pageY||touch.clientY;var screenX=touch.screenX||clientX;var screenY=touch.screenY||clientY;_doc._nexacro_preTouchInfo=[clientX,clientY,screenX,screenY];nexacro._syshandler_ontouchstart(window.nexacro_HTMLSysEvent,ct,evt);}}};var _iframe_eventhandler_ontouchend=function(evt){var target;if(nexacro._Browser=="IE"){target=evt.srcElement;}else{target=evt.target;}if(target){var _doc=target.ownerDocument;var ct=_doc._nexacro_iframe_contaniner;if(_doc._nexacro_bScroll){nexacro._syshandler_ontouchend(window.nexacro_HTMLSysEvent,ct,evt);}}};var _iframe_eventhandler_onmousewheel=function(evt){var target;if(nexacro._Browser=="IE"){target=evt.srcElement;}else{target=evt.target;}if(target){var _doc=target.ownerDocument;var _body=_doc.body;var ct=_doc._nexacro_iframe_contaniner;var scroll_target;if(nexacro._OS=="iOS"){scroll_target=_doc._nexacro_iframe;}else{scroll_target=_body;}var _win=_doc.defaultView||_doc.parentWindow;var clientHeight=0;var scrollHeight=scroll_target.scrollHeight||_doc.documentElement.scrollHeight;var scrollTop=scroll_target.scrollTop||_doc.documentElement.scrollTop;if(nexacro._OS=="iOS"){clientHeight=parseInt(scroll_target.style.height);}else{if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){clientHeight=_doc.documentElement.offsetHeight;}else{clientHeight=_win.innerHeight;}}if(scrollTop==0||(scrollHeight-clientHeight)<=scrollTop){nexacro._syshandler_onmousewheel(window.nexacro_HTMLSysEvent,ct,evt);}}};var _iframe_eventhandler_onload;if(nexacro._Browser=="IE"){_iframe_eventhandler_onload=function(evt){if(window.event){evt=window.event;}var node=evt.srcElement;if(!node){return;}try{var _doc=node.contentDocument||node.contentWindow.document;_doc._nexacro_iframe_contaniner=node._contaniner.handle;if(nexacro._SupportTouch&&nexacro._isTouchInteraction){nexacro._observeSysEvent(_doc,"MSPointerMove","ontouchmove",_iframe_eventhandler_ontouchmove);nexacro._observeSysEvent(_doc,"MSPointerDown","ontouchstart",_iframe_eventhandler_ontouchstart);nexacro._observeSysEvent(_doc,"MSPointerUp","ontouchend",_iframe_eventhandler_ontouchend);}nexacro._observeSysEvent(_doc,"mousewheel","onmousewheel",_iframe_eventhandler_onmousewheel);nexacro._observeSysEvent(_doc,"mousemove","onmousemove",_iframe_eventhandler_onmousemove);}catch(e){}finally{var elem=node._linked_element;if(elem){elem._on_frame_load(node.contentWindow);}}};}else{_iframe_eventhandler_onload=function(evt){var node=evt.target;if(!node){return;}try{var _doc=node.contentDocument||node.contentWindow.document;_doc._nexacro_iframe_contaniner=node._contaniner.handle;_doc._nexacro_iframe=node._contaniner.dest_handle;if(nexacro._SupportTouch){nexacro._observeSysEvent(_doc,"touchmove","ontouchmove",_iframe_eventhandler_ontouchmove);nexacro._observeSysEvent(_doc,"touchstart","ontouchstart",_iframe_eventhandler_ontouchstart);nexacro._observeSysEvent(_doc,"touchend","ontouchend",_iframe_eventhandler_ontouchend);}nexacro._observeSysEvent(_doc,"mousewheel","onmousewheel",_iframe_eventhandler_onmousewheel);nexacro._observeSysEvent(_doc,"DOMMouseScroll","onmousewheel",_iframe_eventhandler_onmousewheel);nexacro._observeSysEvent(_doc,"mousemove","onmousemove",_iframe_eventhandler_onmousemove);}catch(e){}finally{var elem=node._linked_element;if(elem){elem._on_frame_load(node.contentWindow);}}};}__pWebBrowserPluginElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var _doc=owner_elem._getRootWindowHandle();var handle=this._createInternalFrameElementHandle(_doc,this.left,this.top,this.width,this.height,this._params);handle._contaniner=owner_elem;if(nexacro._enableaccessibility){nexacro.__setDOMAccessibility_ActiveDescendant(handle,this.parent_elem.linkedcontrol._unique_id);}nexacro.__setDOMNode_Selectable(handle,true);if(nexacro._OS=="iOS"){nexacro.__setMobileIframeDOMNodeStyleScroll(owner_elem.dest_handle.style);}if(nexacro._OS=="Android"&&(nexacro._Browser=="Safari"||nexacro._Browser=="MobileSafari")&&this.visible){this._need_hide=true;}var handle_style=handle.style;if(!this.visible||this._need_hide){nexacro.__setDOMStyle_Visible(handle_style,false);}if(this.font){nexacro.__setDOMStyle_Font(handle_style,this.font);}if(this.color){nexacro.__setDOMStyle_Color(handle_style,this.color);}if(nexacro._enableaccessibility){this._createInternalPrevAccessibilityElementHandle(win,_doc,owner_elem,handle);}this.handle=this.dest_handle=handle;nexacro.__appendDOMNode(owner_elem.dest_handle,handle);nexacro._observeSysEvent(handle,"load","onload",_iframe_eventhandler_onload);if(nexacro._enableaccessibility){this._createInternalNextAccessibilityElementHandle(win,_doc,owner_elem,handle);}if((nexacro._Browser=="IE"&&nexacro._BrowserVersion>=9)||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){nexacro._observeSysEvent(handle,"focusin","onfocusin",this._iframe_onfocusin_forward);nexacro._observeSysEvent(handle,"focusout","onfocusout",this._iframe_onfocusout_forward);}}};__pWebBrowserPluginElement.createCommand=function(){return "";};__pWebBrowserPluginElement.attachHandle=function(win){return;};__pWebBrowserPluginElement._createInternalPrevAccessibilityElementHandle=function(win,_doc,owner_elem,handle){var _focus_input=_doc.createElement("div");var f_input_style=_focus_input.style;nexacro.__setDOMNode_TabIndex(_focus_input,0);f_input_style.opacity=0;_focus_input.parent_elem=this.parent;nexacro.__appendDOMNode(owner_elem.dest_handle,_focus_input);nexacro._observeSysEvent(_focus_input,"focus","onfocus",this._go_prev_focus);var message_elem=this._prev_outfocus_message_elem=new nexacro.TextBoxElement(owner_elem);message_elem.text=" ";if(nexacro._Browser=="MobileSafari"||nexacro._OS=="Android"){message_elem.setElementVisible(false);}message_elem.create(win);var message_elem_handle=message_elem.handle;if(message_elem_handle){if(nexacro._Browser=="IE"){nexacro.__setDOMAccessibility_StatHidden(message_elem_handle,false);}nexacro.__setDOMNode_TabIndex(message_elem_handle,0);message_elem_handle.style.opacity=0;nexacro._observeSysEvent(message_elem_handle,"focus","onfocus",this._iframe_onfocus_forward);}};__pWebBrowserPluginElement._createInternalNextAccessibilityElementHandle=function(win,_doc,owner_elem,handle){var message_elem=this._next_outfocus_message_elem=new nexacro.TextBoxElement(owner_elem);message_elem.text=" ";if(nexacro._Browser=="MobileSafari"||nexacro._OS=="Android"){message_elem.setElementVisible(false);}message_elem.create(win);var message_elem_handle=message_elem.handle;if(message_elem_handle){if(nexacro._Browser=="IE"){nexacro.__setDOMAccessibility_StatHidden(message_elem_handle,false);}nexacro.__setDOMNode_TabIndex(message_elem_handle,0);message_elem_handle.style.opacity=0;nexacro._observeSysEvent(message_elem_handle,"focus","onfocus",this._iframe_onfocus_forward);}var _focus_input=_doc.createElement("div");var f_input_style=_focus_input.style;nexacro.__setDOMNode_TabIndex(_focus_input,0);f_input_style.opacity=0;_focus_input.parent_elem=this.parent;nexacro.__appendDOMNode(owner_elem.dest_handle,_focus_input);nexacro._observeSysEvent(_focus_input,"focus","onfocus",this._go_next_focus);};__pWebBrowserPluginElement._go_prev_focus=function(evt){var node=evt.target?evt.target:evt.srcElement;var form=node.parent_elem.linkedcontrol._getForm();var newfocus_comp=form._searchPrevTabFocus(form._last_focused);if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0] instanceof nexacro.Form&&newfocus_comp[0]._last_focused){var win=form._getWindow();win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,1,true);}};__pWebBrowserPluginElement._go_next_focus=function(evt){var node=evt.target?evt.target:evt.srcElement;var form=node.parent_elem.linkedcontrol._getForm();var newfocus_comp=form._searchNextTabFocus(form._last_focused);if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0] instanceof nexacro.Form&&newfocus_comp[0]._last_focused){var win=form._getWindow();win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,0,true);}};__pWebBrowserPluginElement._on_frame_load=function(_win){var comp;var docurl="";try{comp=this.parent_elem.linkedcontrol;if(_win){if(this._need_hide){nexacro.__setDOMStyle_Visible(this.handle.style,true);this._need_hide=false;}this._window=_win;this._document=_win.document;if(_win.NEXACROWEBBROWSER==undefined){_win.NEXACROWEBBROWSER=comp;}}if(this._document){docurl=this._document.location.href;}}catch(e){this._window=null;this._document=null;}_win=comp._getWindow();var cur_focus_paths=_win.getCurrentFocusPaths();var pThis=comp;while(pThis&&pThis._is_nc_control){pThis=pThis.parent;}if(!pThis){return;}var focuspath_index= -1;if(cur_focus_paths){focuspath_index=nexacro._indexOf(cur_focus_paths,pThis);}var len=cur_focus_paths.length;if(focuspath_index<0){var focus_comp=cur_focus_paths[len-1];focus_comp._apply_setfocus();var input_elem=focus_comp._input_element;if(input_elem){input_elem._is_sys_focused=false;input_elem.setElementFocus();}}comp.on_load_handler(docurl);};__pWebBrowserPluginElement.destroy=function(){if(this._prev_outfocus_message_elem){nexacro._stopSysObserving(this._prev_outfocus_message_elem.handle,"focus","onfocus",this._iframe_onfocus_forward);this._prev_outfocus_message_elem.destroy();this._prev_outfocus_message_elem=null;}if(this._next_outfocus_message_elem){this._next_outfocus_message_elem.destroy();this._next_outfocus_message_elem=null;}var handle=this.handle;if(handle){nexacro._stopSysObserving(handle,"load","onload",_iframe_eventhandler_onload);handle._linked_element=null;var _owner_handle=null;if(this.owner_elem&&this.owner_elem.dest_handle){_owner_handle=this.owner_elem.dest_handle;}if(!this.owner_elem||_owner_handle){nexacro.__removeDOMNode(_owner_handle,handle);}var overlay_elem=this._overlay_elem;if(overlay_elem){overlay_elem.destroy();}this._overlay_elem=null;this._document=null;this.owner_elem=null;this.handle=this.dest_handle=null;}this.parent=null;this.parent_elem=null;var params=this._params;if(params){params.destroy();this._params=null;}var events=this._events;if(events){events.destroy();this.events=null;}};__pWebBrowserPluginElement._createInternalFrameElementHandle=function(_doc,left,top,width,height,params){var handle=_doc.createElement("iframe");handle._linked_element=this;handle.frameBorder=0;this._object_id=this.parent_elem.handle.id+'_'+this.component._type_name;if(this._object_id){nexacro.__setHTMLAttr_Proeprty(handle,'id',this._object_id);}var handle_style=handle.style;handle_style.position="absolute";nexacro.__setDOMNode_ToolTip(handle,this.parent_elem.tooltiptext?this.parent_elem.tooltiptext:(this.parent_elem.accessibilitylabel?this.parent_elem.accessibilitylabel:this.parent_elem.linkedcontrol.id));nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle_style,width,height);var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){this._setInternalFrameDOMParam(_doc,handle,params.get_id(i),params.get_item(i));}return handle;};__pWebBrowserPluginElement._setInternalFrameDOMParam=function(_doc,target_handle,name,value){nexacro.__setHTMLAttr_Proeprty(target_handle,name,value);};__pWebBrowserPluginElement.setElementFocus=nexacro._emptyFn;__pWebBrowserPluginElement._setElementFocus=function(selffocus){var handle=this.handle;if(handle){nexacro.__setDOMNode_Focus(handle,true);nexacro.__setLastFocusedElement(this);if(nexacro._enableaccessibility){var next_outfocus_message_elem=this._next_outfocus_message_elem;if(next_outfocus_message_elem){next_outfocus_message_elem._killfocus_flag=false;}var prev_outfocus_message_elem=this._prev_outfocus_message_elem;if(prev_outfocus_message_elem){prev_outfocus_message_elem._killfocus_flag=false;}}}};__pWebBrowserPluginElement.setElementCodebase=function(codebaseurl){if(this.codebase!=codebaseurl){this.codebase=codebaseurl;var handle=this.handle;if(handle){nexacro.__setHTMLAttr_Proeprty(handle,'codebase',codebaseurl);}}};__pWebBrowserPluginElement.getElementParam=function(name){var handle=this.handle;if(handle){var _doc=this._document;if(!_doc){_doc=this._document=handle.contentDocument||handle.contentWindow.document;}var value=null;var pobject;if(name){if(name==="document"){pobject=new nexacro.PluginObject();pobject.handle=_doc;return pobject;}else if(name=="window"){var _win=this._window;if(!_win){_win=this._window=handle.contentWindow;}pobject=new nexacro.PluginObject();pobject.handle=_win;return pobject;}value=handle[name];if(value!=null&&typeof (value)=="object"){pobject=new nexacro.PluginObject();pobject.handle=value;return pobject;}return value;}}else{var params=this._params;return params.get_item(name);}};__pWebBrowserPluginElement.setElementParam=function(name,value){if(this.handle){var _doc=this._getRootWindowHandle();this._setInternalFrameDOMParam(_doc,this.handle,name,value);}else{var params=this._params;params.add_item(name,value);}};__pWebBrowserPluginElement.setElementEnable=function(value){if(this.enable!=value){this.enable=value;var handle=this.handle;if(handle){var overlay_elem=this._overlay_elem;if(value){if(overlay_elem){overlay_elem.setElementVisible(false);}}else{if(!overlay_elem){var control_element=this.parent;var linkedcontrol=control_element.linkedcontrol;var win=linkedcontrol._getWindow();if(!win){win=nexacro._getMainWindowHandle()?nexacro._getMainWindowHandle()._linked_window:null;}overlay_elem=this._overlay_elem=new nexacro._OverlayElement(control_element);overlay_elem.setLinkedControl(linkedcontrol);overlay_elem.create(win);}overlay_elem.setElementVisible(true);}}}};__pWebBrowserPluginElement._getDoc=function(){return this._document;};__pWebBrowserPluginElement._setUrl=function(url,useurlhistory){if(this.handle){if(useurlhistory){this.setElementParam("src",url);}else{this._replaceURL(url);}}};if(nexacro._Browser=="Gecko"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion>10)){__pWebBrowserPluginElement._setGo=function(){if(this.handle&&this.handle.contentWindow){try{this.handle.contentWindow.location.reload(true);}catch(e){}}};}else{__pWebBrowserPluginElement._setGo=function(){if(this.handle&&this.handle.contentWindow){try{this.handle.contentWindow.history.go(0);}catch(e){}}};}__pWebBrowserPluginElement._setBack=function(){if(this.handle&&this.handle.contentWindow){try{this.handle.contentWindow.history.back();}catch(e){}}};__pWebBrowserPluginElement._setForward=function(){if(this.handle&&this.handle.contentWindow){try{this.handle.contentWindow.history.forward();}catch(e){}}};__pWebBrowserPluginElement._replaceURL=function(v){var iframe_window=this.handle.contentWindow;if(iframe_window){iframe_window.location.replace(v);}};__pWebBrowserPluginElement.callMethod=function(){if(arguments.length<1){return;}var fn_name=Array.prototype.shift.call(arguments);return this._window[fn_name].apply(this._window,arguments);};if((nexacro._Browser=="IE"&&nexacro._BrowserVersion>=9)||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){__pWebBrowserPluginElement._iframe_onfocusout_forward=function(evt){var win=this._linked_element.parent_elem.linkedcontrol._getWindow();win._is_iframe_focus=false;};__pWebBrowserPluginElement._iframe_onfocusin_forward=function(evt){var win=this._linked_element.parent_elem.linkedcontrol._getWindow();win._is_iframe_focus=true;};}if(nexacro._Browser=="IE"){__pWebBrowserPluginElement._iframe_onfocus_forward=function(evt){if(window.event){evt=window.event;}if(nexacro._com_waiting){if(evt.preventDefault){evt.preventDefault();}}this._linked_element._killfocus_flag=true;};}else{__pWebBrowserPluginElement._iframe_onfocus_forward=function(evt){if(nexacro._com_waiting){nexacro._stopSysEvent(evt);}this._linked_element._killfocus_flag=true;};}__pWebBrowserPluginElement._setElementInternalFocus=function(keycode){var E=nexacro.Event;if(keycode==E.KEY_UP){if(this._prev_outfocus_message_elem._killfocus_flag==true){this._prev_outfocus_message_elem._killfocus_flag=false;}else{try{this.handle.contentDocument.body.focus();}catch(e){}}}else if(keycode==E.KEY_DOWN){if(this._next_outfocus_message_elem._killfocus_flag==true){this._next_outfocus_message_elem._killfocus_flag=false;}else{try{this.handle.contentDocument.body.focus();}catch(e){}}}};__pWebBrowserPluginElement._setElementLeaveMessage=function(message){var prev_outfocus_elem=this._prev_outfocus_message_elem;if(prev_outfocus_elem){prev_outfocus_elem.setElementText(message);}var next_outfocus_elem=this._next_outfocus_message_elem;if(next_outfocus_elem){next_outfocus_elem.setElementText(message);}};__pWebBrowserPluginElement.getProperty=__pWebBrowserPluginElement.getElementParam;__pWebBrowserPluginElement.setProperty=__pWebBrowserPluginElement.setElementParam;nexacro._VideoPlayerPluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.parent_elem.windowed=true;this._params=new nexacro.Collection();this._events=new nexacro.Collection();this._node_type=null;};var __pVideoPlayerPluginElement=nexacro._createPrototype(nexacro.PluginElement,nexacro._VideoPlayerPluginElement);nexacro._VideoPlayerPluginElement.prototype=__pVideoPlayerPluginElement;__pVideoPlayerPluginElement._type_name="VideoPlayerPluginElement";__pVideoPlayerPluginElement.classid="{6bf52a52-394a-11d3-b153-00c04f79faa6}";__pVideoPlayerPluginElement._is_input_element=true;__pVideoPlayerPluginElement._current_event="";if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){__pVideoPlayerPluginElement._createObjectElementHandle=function(_doc,left,top,width,height,params){var handle=_doc.createElement("object");handle._linked_element=this;var handle_style=handle.style;nexacro.__setDOMStyle_Absolute(handle_style);nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle_style,width,height);nexacro.__setHTMLAttr_Proeprty(handle,'classid',"clsid:6bf52a52-394a-11d3-b153-00c04f79faa6");nexacro.__setHTMLAttr_Proeprty(handle,'type',"video/x-ms-wmv");this._setObjectDOMParam(_doc,handle,"wmode","transparent");var param_cnt=(params?params.length:0);for(var i=0;i<param_cnt;i++ ){this._setObjectDOMParam(_doc,handle,params.get_id(i),params.get_item(i));}this._object_node=handle;return handle;};__pVideoPlayerPluginElement._play=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("play");}}};__pVideoPlayerPluginElement._pause=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("pause");}}};__pVideoPlayerPluginElement._stop=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("stop");}}};__pVideoPlayerPluginElement._setVideoMute=function(name,v){var object=this._getPluginObject();if(object){var settings=object.getProperty("settings");if(settings){settings.setProperty("mute",v);settings.destroy();}}};__pVideoPlayerPluginElement._setVideoEnable=__pVideoPlayerPluginElement._setVideoShowControlBar=__pVideoPlayerPluginElement._setVideoUrl=__pVideoPlayerPluginElement._setVideoCurrentTime=__pVideoPlayerPluginElement._setVideoLoop=__pVideoPlayerPluginElement._setVideoAutoPlay=__pVideoPlayerPluginElement._setVideoVolume=nexacro.PluginElement.prototype.setElementParam;}else{__pVideoPlayerPluginElement._getNodeType=function(file_type){var ret="video";switch(file_type){case "mp3":case "wav":ret="audio";break;}return ret;};__pVideoPlayerPluginElement._getType=function(file_type){var ret="video/"+file_type;switch(file_type){case "mp3":case "wav":ret="audio"+file_type;break;}return ret;};__pVideoPlayerPluginElement._createObjectElementHandle=function(_doc,left,top,width,height,params){var source=this.source;var file_type="";if(source){file_type=(source+"").substring(source.lastIndexOf(".")+1).toLowerCase();}var node_name=this._getNodeType(file_type);var handle=_doc.createElement(node_name);this._node_type=node_name;handle._linked_element=this;var handle_style=handle.style;nexacro.__setDOMStyle_Absolute(handle_style);nexacro.__setDOMStyle_Pos(handle_style,left,top);nexacro.__setDOMStyle_Size(handle_style,width,height);var control=this.showcontrolbar;if(control!=null){handle.controls=control;}if(this.autoplay!=null){handle.autoplay=this.autoplay;}if(this.volume!=null){handle.volume=this.volume;}if(this.loop!=null){handle.loop=this.loop;}if(source){var source_node=this._source_node=_doc.createElement("source");nexacro.__setHTMLAttr_Proeprty(source_node,'src',this.source);nexacro.__setHTMLAttr_Proeprty(source_node,'type',this._getType(file_type));nexacro.__appendDOMNode(handle,source_node);}nexacro._observeSysEvent(handle,"canplay","oncanplay",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"canplaythrough","oncanplaythrough",this._video_eventhandler_canplaythrough);nexacro._observeSysEvent(handle,"ended","onended",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"error","onerror",this._video_eventhandler_error);nexacro._observeSysEvent(handle,"pause","onpause",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"play","onplay",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"progress","onprogress",this._video_eventhandler_progress);nexacro._observeSysEvent(handle,"timeupdate","ontimeupdate",this._video_eventhandler_timeupdate);nexacro._observeSysEvent(handle,"volumechange","onvolumechange",this._video_eventhandler_volumechange);this._object_node=handle;return handle;};__pVideoPlayerPluginElement._video_eventhandler_changedstatus=function(evt){var comp=evt.target._linked_element.parent_elem.linkedcontrol;if(comp){if(comp._obj_elem){if(evt.type=="pause"&&comp._obj_elem._current_event=="stop"){comp._obj_elem._current_event="";comp._on_statuschanged("stop");return;}else if(evt.type=="canplay"){comp._obj_elem._current_event="";comp._on_statuschanged("ready");return;}else if(evt.type=="pause"){comp._obj_elem._current_event="pause";}else{comp._obj_elem._current_event="";}comp._on_statuschanged(evt.type);}}};__pVideoPlayerPluginElement._video_eventhandler_timeupdate=function(evt){var node=evt.target;var comp=node._linked_element.parent_elem.linkedcontrol;comp&&comp._on_currenttimechanged(node.currentTime*1000);};__pVideoPlayerPluginElement._video_eventhandler_volumechange=function(evt){var node=evt.target;var comp=node._linked_element.parent_elem.linkedcontrol;comp&&comp._on_volumechangechanged(parseInt(node.volume*100),node.muted);};__pVideoPlayerPluginElement._video_eventhandler_error=function(evt){var node=evt.target;var comp=node._linked_element.parent_elem.linkedcontrol;if(comp){var errormsg="";var statuscode=node.error.code;switch(statuscode){case 1:errormsg="fetching process aborted by user";break;case 2:errormsg="error occurred when downloading";break;case 3:errormsg="error occurred when decoding";break;case 4:errormsg="video not supported";break;}comp._on_error("NativeError",errormsg,statuscode);}};__pVideoPlayerPluginElement._video_eventhandler_canplaythrough=function(evt){var node=evt.target;var comp=node._linked_element.parent_elem.linkedcontrol;comp.size=node.videoWidth+" "+node.videoHeight;comp.duration=node.duration*1000;comp._on_statuschanged("buffer");};__pVideoPlayerPluginElement.setElementSource=function(v){this.source=v;var object_node=this._object_node;if(object_node){var source_node=this._source_node;if(source_node){object_node.removeChild(source_node);}var _doc=nexacro._managerFrameDoc;source_node=this._source_node=_doc.createElement("source");nexacro.__setHTMLAttr_Proeprty(source_node,'src',v);if(this.type){nexacro.__setHTMLAttr_Proeprty(source_node,'type',v);}nexacro.__appendDOMNode(object_node,source_node);}};__pVideoPlayerPluginElement.setElementAttribute=function(attribute_name,v){this[attribute_name]=v;var object_node=this._object_node;if(object_node){nexacro.__setHTMLAttr_Proeprty(object_node,attribute_name,v);}};__pVideoPlayerPluginElement.setElementProperty=function(property_name,v){this[property_name]=v;if(this._object_node){this._object_node[property_name]=v;}};__pVideoPlayerPluginElement._play=function(){var object_node=this._object_node;object_node.play();};__pVideoPlayerPluginElement._pause=function(){var object_node=this._object_node;object_node.pause();};__pVideoPlayerPluginElement._stop=function(){var object_node=this._object_node;if(object_node.currentTime!=null){object_node.pause();nexacro.__setHTMLElem_Proeprty(object_node,"currentTime",0);if(this._current_event=="pause"){var comp=this.parent_elem.linkedcontrol;if(comp){comp._on_statuschanged("stop");}}else{this._current_event="stop";}}};__pVideoPlayerPluginElement._setVideoMute=function(name,v){var object_node=this._object_node;if(object_node){nexacro.__setHTMLElem_Proeprty(object_node,"muted",!object_node.muted);}return;};__pVideoPlayerPluginElement._setVideoShowControlBar=function(name,v){if(this.showcontrolbar!=v){this.showcontrolbar=v;var object_node=this._object_node;if(object_node){if(this.showcontrolbar){this._object_node.controls=true;}else{this._object_node.controls=false;}}}};__pVideoPlayerPluginElement._setVideoUrl=function(name,v){this.source=v;var object_node=this._object_node;if(object_node){nexacro.__setHTMLElem_Proeprty(object_node,"src",v);}};__pVideoPlayerPluginElement._setVideoCurrentTime=function(name,v){if(v> -1){var object_node=this._object_node;if(object_node){var seconds=v/1000;nexacro.__setHTMLElem_Proeprty(object_node,"currentTime",seconds);}}};__pVideoPlayerPluginElement._setVideoLoop=function(name,v){var object_node=this._object_node;if(object_node){nexacro.__setHTMLElem_Proeprty(object_node,"loop",v);}};__pVideoPlayerPluginElement._setVideoAutoPlay=function(name,v){var object_node=this._object_node;if(object_node){nexacro.__setHTMLElem_Proeprty(object_node,"autoplay",v);}};__pVideoPlayerPluginElement._setVideoVolume=function(name,v){var volume=v/100;var object_node=this._object_node;if(object_node){nexacro.__setHTMLElem_Proeprty(object_node,"volume",volume);}};__pVideoPlayerPluginElement._setVideoEnable=function(name,v){this.enable=v;};__pVideoPlayerPluginElement._setVideo360VRMode=function(name,v){};}__pVideoPlayerPluginElement.createCommand=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this.handle){var file_type;var source=this.source;if(source){file_type=(source+"").substring(source.lastIndexOf(".")+1).toLowerCase();}var node_name=this._node_type=this._getNodeType(file_type);this.owner_elem=owner_elem;var str="";str+="<"+node_name+" ";if(this.showcontrolbar==true){str+="controls ";}if(this.source!=null){str+="src = '"+this.source+"'";}var type=this._getType(file_type);if(type!=null){str+="type = '"+type+"'";}if(this.autoplay!=null){str+="autoplay ";}if(this.volume!=null){str+="volume = '"+this.volume+"' ";}if(this.loop!=null){str+="loop = '"+this.loop+"' ";}var handle_style=this._getCommonStyleStr();if(handle_style){str+="style = '"+handle_style+"' ";}str+=">";str+="</"+node_name+">";return str;}return "";};__pVideoPlayerPluginElement.attachHandle=function(win){if(!this.handle){var parent_handle=win._doc.getElementById(this.parent.name);var handle=this._object_node=parent_handle.firstChild;this.handle=handle;handle._linked_element=this;nexacro._observeSysEvent(handle,"canplaythrough","oncanplaythrough",this._video_eventhandler_canplaythrough);nexacro._observeSysEvent(handle,"ended","onended",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"error","onerror",this._video_eventhandler_error);nexacro._observeSysEvent(handle,"pause","onpause",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"play","onplay",this._video_eventhandler_changedstatus);nexacro._observeSysEvent(handle,"progress","onprogress",this._video_eventhandler_progress);nexacro._observeSysEvent(handle,"timeupdate","ontimeupdate",this._video_eventhandler_timeupdate);}};__pVideoPlayerPluginElement.destroy=function(){nexacro.PluginElement.prototype.destroy.call();};__pVideoPlayerPluginElement.set_volume=function(v){};nexacro.CanvasElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;if(id){this.id=id;}};var _pCanvasElement=nexacro._createPrototype(nexacro.Element,nexacro.CanvasElement);nexacro.CanvasElement.prototype=_pCanvasElement;_pCanvasElement._type_name="CanvasElement";_pCanvasElement.lineOffset=0.5;_pCanvasElement.scale=10;_pCanvasElement.scalex=0;_pCanvasElement.scaley=0;_pCanvasElement.fillStyle="#000000";_pCanvasElement.strokeStyle="#000000";_pCanvasElement.lineCap="butt";_pCanvasElement.lineJoin="miter";_pCanvasElement.lineWidth=1;_pCanvasElement.miterLimit=10;_pCanvasElement.shadowColor="#000000";_pCanvasElement._shadowColor="#000000";_pCanvasElement.shadowOffsetX=0;_pCanvasElement.shadowOffsetY=0;_pCanvasElement.shadowBlur=0;_pCanvasElement.font=null;_pCanvasElement._font=null;_pCanvasElement.textAlign="start";_pCanvasElement.textBaseline="top";_pCanvasElement.globalAlpha=1;_pCanvasElement.globalCompositeOperation=1;_pCanvasElement._status_stack=[];_pCanvasElement._matrix_stack=[];_pCanvasElement.lineType="solid";_pCanvasElement.createPattern=function(imagesource,repeat_opt,size){var handle=this.handle;if(handle){var pattern=new nexacro._CanvasFillPattern();pattern.repeattype=repeat_opt;pattern.basecanvas=this;if(imagesource&&imagesource instanceof nexacro.CanvasElement){var canvas=imagesource.handle._draw_ctx.canvas;pattern.value=nexacro.__createCanvasPattern(handle,canvas,repeat_opt);pattern.isloaded=true;var url=imagesource.handle._draw_node.toDataURL();if(url){var imgObj=new nexacro.Image();if(size){imgObj.width=size.width;imgObj.height=size.height;}imgObj.src=url;imgObj.handle=nexacro._getImageObject(url,pattern.onloadcallback,pattern);pattern.imageobject=imgObj;}}else if(imagesource&&imagesource instanceof nexacro.Image){pattern.imageobject=imagesource;if(imagesource.handle){pattern.value=nexacro.__createCanvasPattern(handle,imagesource.handle,repeat_opt);if(pattern.value){pattern.isloaded=true;return pattern;}}if(size){pattern.imageobject.width=size.width;pattern.imageobject.height=size.height;}if(imagesource.src){imagesource.handle=nexacro._getImageObject(imagesource.src,pattern.onloadcallback,pattern);}else{pattern.isloaded=false;}}return pattern;}return null;};_pCanvasElement.createLinearGradient=function(aX0,aY0,aX1,aY1){var handle=this.handle;if(handle){return nexacro.__createCanvasLinearGradient(handle,aX0,aY0,aX1,aY1);}return null;};_pCanvasElement.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){var handle=this.handle;if(handle){return nexacro.__createCanvasRadialGradient(handle,aX0,aY0,aR0,aX1,aY1,aR1);}return null;};_pCanvasElement.setElementFillStyle=function(fillstyle){var handle=this.handle;if(handle&&fillstyle){this.fillStyle=fillstyle;if(fillstyle instanceof nexacro._ColorObject){nexacro.__setCanvasFillColor(handle,fillstyle);}else if(fillstyle instanceof nexacro._CanvasFillPattern){nexacro.__setCanvasFillPattern(handle,fillstyle);}else{nexacro.__setCanvasFillGradation(handle,fillstyle);}}};_pCanvasElement.setElementFont=function(font){var handle=this.handle;if(!font||!handle){return;}var sysvalue=font.value;if(!this.font||this.font.value!=sysvalue){this.font=font;this._font=sysvalue;nexacro.__setCanvasFont(handle,font,sysvalue);}else{nexacro.__setCanvasFont(handle,font,sysvalue);}};_pCanvasElement.clearRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__drawCanvasClearRect(handle,x,y,dx,dy);}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pCanvasElement.setElementPosition=function(left,top){if(this.left!=left||this.top!=top){this.left=left;this.top=top;var handle=this.handle;if(handle){nexacro.__setCanvasNodeStylePos(handle.style,left,top);}}};}else{_pCanvasElement.setElementPosition=function(left,top){if(this.left!=left||this.top!=top){this.left=left;this.top=top;var handle=this.handle;if(handle){nexacro.__setCanvasNodeStylePos(handle._draw_node.style,left,top);}}};}_pCanvasElement.setElementGlobalAlpha=function(alpha){var handle=this.handle;if(handle&&alpha>=0){this.globalAlpha=alpha;nexacro.__setCanvasGlobalAlpha(handle,alpha);}};_pCanvasElement.setElementGlobalCompositeOperation=function(strOperation){var handle=this.handle;if(handle&&strOperation){this.globalCompositeOperation=strOperation;nexacro.__setCanvasGlobalCompositeOperation(handle,strOperation);}};_pCanvasElement.setElementLineCap=function(linecap){var handle=this.handle;if(handle){this.lineCap=linecap;nexacro.__setCanvasLineCap(handle,linecap);}};_pCanvasElement.setElementLineJoin=function(linejoin){var handle=this.handle;if(handle){this.lineJoin=linejoin;nexacro.__setCanvasLineJoin(handle,linejoin);}};_pCanvasElement.setElementLineWidth=function(width){var handle=this.handle;if(handle&&isFinite(width)){this.lineWidth=width;this.lineOffset=width/2;nexacro.__setCanvasLineWidth(handle,width);}};_pCanvasElement.setElementLineStyle=function(linetype){var handle=this.handle;if(handle){this.lineType=linetype;nexacro.__setCanvasLineStyle(handle,linetype);}};_pCanvasElement.setElementStrokeStyle=function(strokestyle){var handle=this.handle;if(handle&&strokestyle){this.strokeStyle=strokestyle;nexacro.__setCanvasStrokeStyle(handle,strokestyle);}};_pCanvasElement.setElementMiterLimit=function(limit){var handle=this.handle;if(handle&&limit){this.miterLimit=limit;nexacro.__setCanvasMiterLimit(handle,limit);}};_pCanvasElement.setElementShadowBlur=function(blur){var handle=this.handle;if(handle){this.shadowBlur=blur;nexacro.__setCanvasShadowBlur(handle,blur);}};_pCanvasElement.setElementShadowColor=function(color){var handle=this.handle;if(color&&handle){this.shadowColor=color;handle._shadowColor=nexacro._getWebColorFromXreColor(color.value);nexacro.__setCanvasShadowColor(handle,handle._shadowColor);}};_pCanvasElement.setElementShadowOffsetX=function(offsetx){var handle=this.handle;if(handle){this.shadowOffsetX=offsetx;nexacro.__setCanvasShadowOffsetX(handle,offsetx);}};_pCanvasElement.setElementShadowOffsetY=function(offsety){var handle=this.handle;if(handle){this.shadowOffsetY=offsety;nexacro.__setCanvasShadowOffsetY(handle,offsety);}};_pCanvasElement.setElementTextAlign=function(align){var handle=this.handle;if(handle){this.textAlign=align;nexacro.__setCanvasTextAlign(handle,align);}};_pCanvasElement.setElementTextBaseline=function(value){var handle=this.handle;if(handle){this.textBaseline=value;nexacro.__setCanvasTextBaseline(handle,value);}};_pCanvasElement.arc=function(x,y,r,start_rad,end_rad,counterclockwise){var handle=this.handle;if(handle){nexacro.__darwCanvasArc(handle,x,y,r,start_rad,end_rad,counterclockwise);}};_pCanvasElement.arc2=function(x,y,r,start_deg,end_deg,counterclockwise){var start_rad=nexacro._degreesToRadians(start_deg);var end_rad=nexacro._degreesToRadians(end_deg);var handle=this.handle;if(handle){nexacro.__darwCanvasArc(handle,x,y,r,start_rad,end_rad,counterclockwise);}};_pCanvasElement.arcTo=function(x,y,x2,y2,r){var handle=this.handle;if(handle){nexacro.__drawCanvasArcTo(handle,x,y,x2,y2,r);}};_pCanvasElement.beginPath=function(){var handle=this.handle;if(handle){nexacro.__drawCanvasBeginPath(handle);}};_pCanvasElement.bezierCurveTo=function(p1x,p1y,p2x,p2y,x,y){var handle=this.handle;if(handle){nexacro.__drawCanvasBezierCurveTo(handle,p1x,p1y,p2x,p2y,x,y);}};_pCanvasElement.clip=function(){var handle=this.handle;if(handle){nexacro.__clipCanvas(handle);}};_pCanvasElement.closePath=function(){var handle=this.handle;if(handle){nexacro.__drawCanvasClosePath(handle);}};_pCanvasElement.drawImage=function(objimage,x,y,imgWidth,imgHeight){var handle=this.handle;var img=objimage.handle;if(img&&handle){nexacro.__drawCanvasImage(handle,img,x,y,imgWidth,imgHeight);}};_pCanvasElement.fill=function(){var handle=this.handle;if(handle){nexacro.__fillCanvas(handle);}};_pCanvasElement.fillRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__fillCanvasRect(handle,x,y,dx,dy);}};_pCanvasElement.fillText=function(text,x,y,maxWidth){var handle=this.handle;if(handle){nexacro.__setCanvasTextBaseline(handle,this.textBaseline);nexacro.__drawCanvasFillText(handle,text,x,y,maxWidth);}};_pCanvasElement.isPointInPath=function(x,y){var handle=this.handle;if(handle){return nexacro.__isPointInCanvasPath(handle,x,y);}return false;};_pCanvasElement.lineTo=function(x,y){var handle=this.handle;if(handle){nexacro.__drawCanvaslineTo(handle,x,y);}};_pCanvasElement.moveTo=function(x,y){var handle=this.handle;if(handle){nexacro.__drawCanvasmoveTo(handle,x,y);}};_pCanvasElement.quadraticCurveTo=function(px,py,x,y){var handle=this.handle;if(handle){nexacro.__drawCanvasQuadraticCurveTo(handle,px,py,x,y);}};_pCanvasElement.rect=function(x,y,w,h){var handle=this.handle;if(handle){nexacro.__rectCanvas(handle,x,y,w,h);}};_pCanvasElement.rotate=function(angle_rad){var handle=this.handle;if(handle){nexacro.__rotateCanvas(handle,angle_rad);}};_pCanvasElement.rotate2=function(angle){var radians=nexacro._degreesToRadians(angle);this.rotate(radians);};_pCanvasElement.scale=function(dx,dy){var handle=this.handle;this.scalex=dx;this.scaley=dy;if(handle){nexacro.__scaleCanvas(handle,dx,dy);}};_pCanvasElement.setTransform=function(a,b,c,d,e,f){var handle=this.handle;if(handle){nexacro.__setCanvasTransform(handle,a,b,c,d,e,f);}};_pCanvasElement.stroke=function(){var handle=this.handle;if(handle){nexacro.__strokeCanvas(handle);}};_pCanvasElement.strokeRect=function(x,y,width,height){var handle=this.handle;if(handle){nexacro.__drawCanvasStrokeRect(handle,x,y,width,height);}};_pCanvasElement.strokeText=function(text,x,y,maxWidth){var handle=this.handle;if(handle){nexacro.__drawCanvasStrokeText(handle,text,x,y,maxWidth);}};_pCanvasElement.transform=function(a,b,c,d,e,f){var handle=this.handle;if(handle){nexacro.__transformCanvas(handle,a,b,c,d,e,f);}};_pCanvasElement.translate=function(x,y){var handle=this.handle;if(handle){nexacro.__translateCanvas(handle,x,y);}};_pCanvasElement.save=function(){var handle=this.handle;if(handle){nexacro.__saveCanvas(handle);}};_pCanvasElement.toDataURL=function(){var handle=this.handle;try{if(handle){return nexacro.__toDataURLCanvas(handle);}}catch(e){try{if(handle){return nexacro.__toDataURLCanvas(handle);}}catch(e){return "";}}};_pCanvasElement.restore=function(){var handle=this.handle;if(handle){nexacro.__restoreCanvas(handle);}};_pCanvasElement.drawFill=function(){this.fill();this.beginPath();};_pCanvasElement._setPenStyle=function(pen){if(pen){this.setElementStrokeStyle(pen.color);this.setElementLineWidth(parseInt(pen.width));}};_pCanvasElement.drawStrokeLine=function(x1,y1,x2,y2){this.moveTo(x1,y1);this.lineTo(x2,y2);this.drawStroke();};_pCanvasElement.drawStrokeVLine=function(x,y1,y2){this.moveTo(x,y1);this.lineTo(x,y2);this.drawStroke();};_pCanvasElement.drawStrokeHLine=function(y,x1,x2){this.moveTo(x1,y);this.lineTo(x2,y);this.drawStroke();};_pCanvasElement.drawFillArc=function(x,y,r,start_rad,end_rad,bClockwise){this.drawArc(x,y,r,start_rad,end_rad,bClockwise,true);this.closePath();this.fill();this.beginPath();};_pCanvasElement.drawFillArc2=function(x,y,r,start_deg,end_deg,bClockwise){var start_rad=nexacro._degreesToRadians(start_deg);var end_rad=nexacro._degreesToRadians(end_deg);this.arc(x,y,r,start_rad,end_rad,bClockwise);this.closePath();this.fill();this.beginPath();};_pCanvasElement.drawStrokeRect=function(x,y,w,h){this.rect(x,y,w,h,true);this.drawStroke();};_pCanvasElement.drawStrokeArc=function(x,y,r,start_rad,end_rad,bClockwise){this.arc(x,y,r,start_rad,end_rad,bClockwise);this.drawStroke();};_pCanvasElement.drawStrokeArc2=function(x,y,r,start_deg,end_deg,bClockwise){this.arc2(x,y,r,start_deg,end_deg,bClockwise);this.drawStroke();};_pCanvasElement.drawStrokeInsetRect=function(x,y,w,h){this.insetRect(x,y,w,h);this.drawStroke();};_pCanvasElement.hline=function(y,x1,x2){this.moveTo(x1,y);this.lineTo(x2,y);};_pCanvasElement.vline=function(x,y1,y2){this.moveTo(x,y1);this.lineTo(x,y2);};_pCanvasElement._getElementScreenXY=function(){var handle=this.handle;var _doc=handle.ownerDocument||handle.document;return nexacro.__getHTMLNodePositionInFrame(_doc,handle);};if(!(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9)){_pCanvasElement.create=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){var handle=this.handle;if(!handle){this.owner_elem=owner_elem;var _doc=owner_elem._getRootWindowHandle();handle=_doc.createElement("div");handle._linked_element=this;nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexacontainer"));this.handle=this.dest_handle=handle;var _draw_node=_doc.createElement("canvas");handle._draw_node=_draw_node;handle._draw_ctx=_draw_node.getContext("2d");var node_style=_draw_node.style;node_style.border="none";nexacro.__setDOMStyle_AbsoluteTransparent(node_style);nexacro.__setDOMStyle_Pos(node_style,this.left,this.top);nexacro.__setCanvasNodeSize(_draw_node,this.width,this.height);nexacro.__setCanvasTextAlign(handle,this.textAlign);nexacro.__setCanvasTextBaseline(handle,this.textBaseline);nexacro.__appendDOMNode(handle,_draw_node);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}}};_pCanvasElement.createCommand=function(){return "";};_pCanvasElement.destroy=function(){var handle=this.handle;if(handle){handle._linked_element=null;var _owner_handle=null;if(this.owner_elem&&this.owner_elem.dest_handle){_owner_handle=this.owner_elem.dest_handle;}if(!this.owner_elem||_owner_handle){nexacro.__removeDOMNode(_owner_handle,handle);}this.owner_elem=null;this.handle=this.dest_handle=null;handle._draw_node=null;handle._draw_ctx=null;}this.parent=null;this.parent_elem=null;};_pCanvasElement._drawRotate=function(angle_deg){var handle=this.handle;if(!handle){return;}var angle_rad=angle_deg*Math.PI/180;this.handle._draw_ctx.rotate(angle_rad);};_pCanvasElement.circle=function(x,y,r){this.arc(x,y,r,0,2*Math.PI,true);};_pCanvasElement.drawStrokeCircle=function(x,y,r){this.arc(x,y,r,0,2*Math.PI,true);this.drawStroke();};_pCanvasElement.drawStrokeInsetArc=function(x,y,r,start_deg,end_deg){var gap=this.lineWidth/2;this.drawArc(x,y,r-gap,start_deg,end_deg);this.drawStroke();};_pCanvasElement.drawStrokeInsetCircle=function(x,y,r){var gap=this.lineOffset;this.arc(x,y,r-gap,0,2*Math.PI,true);this.drawStroke();};_pCanvasElement.drawFillRect=function(x,y,dx,dy){this.rect(x,y,dx,dy);this.fill();this.beginPath();};_pCanvasElement.endDraw=function(){this.beginPath();this.closePath();};_pCanvasElement.drawStroke=function(){this.stroke();this.beginPath();};_pCanvasElement.drawFillCircle=function(x,y,r){this.arc(x,y,r,0,2*Math.PI,true);this.fill();this.beginPath();};_pCanvasElement.insetRect=function(x,y,w,h){if(w==0||h==0){return;}var gap=this.lineOffset;var wgap=(w>0)?gap: -gap;var hgap=(h>0)?gap: -gap;this.moveTo(x+wgap,y+hgap);this.lineTo(x+wgap,y+h-hgap);this.lineTo(x+w-wgap,y+h-hgap);this.lineTo(x+w-wgap,y+hgap);this.closePath();};_pCanvasElement._setLineStyle=function(line){if(line){this.setElementStrokeStyle(line.color);this.setElementLineWidth(parseInt(line.width));}};_pCanvasElement._moveCanvas=function(left,top,width,height){this.left=left||0;this.top=top||0;this.width=width||0;this.height=height||0;if(this.handle){var _draw_node=this.handle._draw_node;if(_draw_node){_draw_node.width=this.width;_draw_node.height=this.height;var nodeStyle=_draw_node.style;nodeStyle.left=this.left+"px";nodeStyle.top=this.top+"px";nodeStyle.width=this.width+"px";nodeStyle.height=this.height+"px";}}};_pCanvasElement.measureText=function(text,font){var handle=this.handle;if(handle){if(!font){font=nexacro.FontObject(handle._draw_ctx.font);}var obj=nexacro._getTextSize(text,font);return {width:obj[0],height:obj[1]};}};_pCanvasElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;var handle=this.handle;if(handle){nexacro.__setCanvasNodeSize(handle._draw_node,width,height);}}};}else{_pCanvasElement._image_data=null;_pCanvasElement.create=function(){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){var handle=this.handle;if(!handle){this.owner_elem=owner_elem;var _doc=owner_elem._getRootWindowHandle();handle=_doc.createElement("div");nexacro.__setDOMNode_ClassName(handle,this._getElementNexaClassName("nexacontainer"));handle._linked_element=this;handle._scale=10;handle._half_scale=5;handle._path_str="";handle._vml_str="";handle._line_scale=1;handle._matrix=nexacro._createMatrixIdentity();handle._pathArray=[];handle._image=null;handle._textAlign=2;handle._textBaseline=2;this.handle=this.dest_handle=handle;var _draw_node=_doc.createElement("div");handle._draw_node=_draw_node;var node_style=_draw_node.style;node_style.border="none";nexacro.__setDOMStyle_AbsoluteTransparent(node_style);nexacro.__setDOMStyle_Pos(node_style,this.left,this.top);nexacro.__setDOMStyle_Size(node_style,this.width,this.height);if(!this.font){this.font=new nexacro.FontObject("8px Arial");}nexacro.__appendDOMNode(handle,_draw_node);nexacro.__appendDOMNode(owner_elem.dest_handle,handle);}}};_pCanvasElement.createCommand=function(){var str="";var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){var handle_style=this._getCommonStyleStr();str+="<div class = '"+this._getElementNexaClassName("nexacontainer")+"' >";str+="<div ";str+=(handle_style)?(" style='"+handle_style+"'>"):">";str+="</div></div>";}return str;};_pCanvasElement.destroy=function(){var handle=this.handle;if(handle){handle._linked_element=null;var _owner_handle=null;if(this.owner_elem&&this.owner_elem.dest_handle){_owner_handle=this.owner_elem.dest_handle;}if(!this.owner_elem||_owner_handle){nexacro.__removeDOMNode(_owner_handle,handle);}this.owner_elem=null;this.handle=this.dest_handle=null;handle._linked_element=null;handle._pathArray=null;handle._matrix=null;handle._draw_node=null;}this.parent=null;this.parent_elem=null;};_pCanvasElement._getCoordSize=function(x,y){var m=this.handle._matrix;var scale=this.handle._scale;var _half_scale=this.handle._half_scale;return {x:Math.round(scale*(x*m[0][0]+y*m[1][0]+m[2][0])-_half_scale),y:Math.round(scale*(x*m[0][1]+y*m[1][1]+m[2][1])-_half_scale)};};_pCanvasElement._getCoordPos=function(x,y){var m=this.handle._matrix;return {x:(x*m[0][0]+y*m[1][0]+m[2][0]),y:(x*m[0][1]+y*m[1][1]+m[2][1])};};_pCanvasElement._getLineCapStr=function(){return (this.lineCap=="butt")?"flat":this.lineCap;};_pCanvasElement._moveCanvas=function(left,top,width,height){this.left=left||0;this.top=top||0;this.width=width||0;this.height=height||0;if(this.handle&&this.handle._draw_node){var _draw_node=this.handle._draw_node;if(_draw_node){var nodestyle=_draw_node.style;nodestyle.left=this.left+"px";nodestyle.top=this.top+"px";nodestyle.width=this.width+"px";nodestyle.height=this.height+"px";}}};_pCanvasElement._setLineStyle=function(line){if(line){this.setElementStrokeStyle(line.color);this.setElementLineWidth(parseInt(line.width));}};_pCanvasElement._setPenStyle=function(pen){if(pen){this.setElementStrokeStyle(pen.color);this.setElementLineWidth(parseInt(pen.width));}};_pCanvasElement._circle=function(x,y,r){var handle=this.handle;if(handle){var scale=handle._scale;var hscale=handle._half_scale;var _r=r*scale;var xStart=x+_r-hscale;var yStart=y-hscale;var p=this._getCoordSize(x,y);var sp=this._getCoordSize(xStart,yStart);var sub=' at'+(p.x-_r)+','+(p.y-_r)+' '+(p.x+_r)+','+(p.y+_r)+' '+sp.x+','+sp.y+' '+sp.x+','+sp.y+' ';handle._pathArray.push({x:p.x-_r,y:p.y-_r});handle._pathArray.push({x:p.x+_r,y:p.y+_r});handle._pathArray.push({x:sp.x,y:sp.y});handle._path_str+=sub;}};_pCanvasElement.circle=function(x,y,r,bstroke){if(bstroke){var gap=this.lineOffset;this._circle(x,y,r-gap);}else{this._circle(x,y,r);}};_pCanvasElement.insetRect=function(x,y,w,h){if(w==0||h==0){return;}var gap=this.lineOffset;var wgap=(w>0)?gap: -gap;var hgap=(h>0)?gap: -gap;this.moveTo(x+wgap,y+hgap);this.lineTo(x+wgap,y+h-hgap);this.lineTo(x+w-wgap,y+h-hgap);this.lineTo(x+w-wgap,y+hgap);this.closePath();};_pCanvasElement.drawFillRect=function(x,y,dx,dy){this.moveTo(x,y);this.lineTo(x+dx,y);this.lineTo(x+dx,y+dy);this.lineTo(x,y+dy);this.closePath();this.fill();this.beginPath();};_pCanvasElement.strokeRect=function(x,y,dx,dy){this.rect(x,y,dx,dy,true);this.drawStroke();};_pCanvasElement.drawStrokeInsetArc=function(x,y,r,start_deg,end_deg){var gap=this.lineWidth;this.drawArc(x,y,r-gap,start_deg,end_deg);this.drawStroke();this.closePath();};_pCanvasElement.drawFillCircle=function(x,y,r){this.circle(x,y,r);this.fill();this.beginPath();};_pCanvasElement.drawStrokeCircle=function(x,y,r){var gap=this.lineOffset;this.circle(x,y,r+gap);this.circle(x,y,r-gap);this.drawStroke();};_pCanvasElement.drawStrokeInsetCircle=function(x,y,r){var gap=this.lineWidth;this.circle(x,y,r);this.circle(x,y,r-gap);this.drawStroke();};_pCanvasElement.drawStroke=function(){var handle=this.handle;var elem=handle._linked_element;if(handle&&handle._path_str){var vml_str="";vml_str+="<v:shape filled='f' stroked='t' style='position:absolute;width:10px;height:10px;' ";vml_str+="coordorigin='0 0' coordsize='"+handle._scale*10+' '+handle._scale*10+"' ";vml_str+="color='"+handle._stroke_color+"' ";vml_str+="strokecolor='"+handle._stroke_color+"' ";if(handle._stroke_alpha!=1){vml_str+="opacity='"+handle._stroke_alpha+"' ";}var lineWidth=elem.lineWidth*handle._line_scale;vml_str+="joinstyle='"+elem.lineJoin+"' endcap='"+elem._getLineCapStr()+"' strokeweight='"+lineWidth+"px' ";vml_str+="path='"+handle._path_str+"' />";handle._vml_str+=vml_str;handle._draw_node.innerHTML=handle._vml_str;handle._path_str="";}};_pCanvasElement.endDraw=function(){this.beginPath();};_pCanvasElement.measureText=function(text,font){var handle=this.handle;if(handle){if(!font){font=this.font;}var obj=nexacro._getTextSize(text,font);return {width:obj[0],height:obj[1]};}};_pCanvasElement.setElementSize=function(width,height){if(this.width!=width||this.height!=height){this.width=width;this.height=height;var handle=this.handle;if(handle){nexacro.__setCanvasNodeSize(handle._draw_node.style,width,height);handle._draw_node.innerHTML="";handle._vml_str="";handle._path_str="";}}};}_pCanvasElement.drawFillText=function(text,x,y,maxwidth){this.setElementTextBaseline(this.textBaseline);this.fillText(text,x,y,maxwidth);this.beginPath();};nexacro._CanvasFillPattern=function(){this.imageobject=null;this.repeattype=null;this.value=null;this.isloaded=false;this.control=null;this.basecanvas=null;this.controlonloadcallback=null;};var __pCanvasFillPattern=nexacro._CanvasFillPattern.prototype;__pCanvasFillPattern.onloadcallback=function(imageurl,width,height,handle,errstatus,temp,fireerrorcode,returncode,path,locationuri){this.imageobject.width=width;this.imageobject.height=height;this.isloaded=true;if(errstatus<0){this.isloaded=false;}else{if(handle){this.imageobject.handle=handle;}if(!this.value){this.value=nexacro.__createCanvasPattern(this.basecanvas.handle,this.imageobject.handle,this.repeattype);}}if(this.control&&this.controlonloadcallback){this.control.call(this.controlonloadcallback,this);}};__pCanvasFillPattern.clear=function(){if(this.imageobject){delete this.imageobject;}this.imageobject=null;this.repeattype=null;this.value=null;this.isloaded=null;this.control=null;this.controlonloadcallback=null;};nexacro._CanvasGradient=function(type){this.type=type;this.x0=0;this.y0=0;this.r0=0;this.x1=0;this.y1=0;this.r1=0;this.colors=[];};var __pCanvasGradient=nexacro._CanvasGradient.prototype;__pCanvasGradient.addColorStop=function(aOffset,aColor){var color=nexacro._getWebColorFromXreColor(aColor);var alpha=nexacro._getXreColorAlpha(aColor)/255;this.colors.push({offset:aOffset,color:color,alpha:alpha});};nexacro.GridScrollableControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._target_vscroll_elements=null;this._target_hscroll_elements=null;var client_elem=new nexacro._ContainerElement(this,false);this._client_elem=client_elem;};var _pGridScrollableControlElement=nexacro._createPrototype(nexacro.ScrollableControlElement,nexacro.GridScrollableControlElement);nexacro.GridScrollableControlElement.prototype=_pGridScrollableControlElement;_pGridScrollableControlElement._type_name="GridScrollableControlElement";_pGridScrollableControlElement._on_attachHandle=function(win){if(this._hscroll_control){this._hscroll_control.attachHandle(win);}if(this._vscroll_control){this._vscroll_control.attachHandle(win);}nexacro._observeSysEvent(this._client_elem.handle,"scroll","onscroll",this._syshandler_onscroll_forward);nexacro._observeSysEvent(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);};_pGridScrollableControlElement.destroy=function(){var handle=this.handle;if(handle){this._removeElementHandle();this.dest_handle=null;if(this._is_popup){nexacro._destroyFrameNode(handle,this._frame_node);this._frame_node=null;}if(this._edge_elem){this._edge_elem.destroy();this._edge_elem=null;}if(this._client_elem){nexacro._stopSysObserving(this._client_elem.handle,"scroll","onscroll",this._syshandler_onscroll_forward);this._client_elem.destroy();this._client_elem=null;}this._on_destroy();}this.owner_elem=null;this.handle=null;this.parent=null;this.parent_elem=null;this.linkedcontrol=null;};_pGridScrollableControlElement._on_destroy=function(){var handle=this.handle;if(handle){nexacro._stopSysObserving(handle,"scroll","onscroll",this._syshandler_onscroll_forward);var i,n;if(this._target_vscroll_elements){if(nexacro._isArray(this._target_vscroll_elements)){for(i=0,n=this._target_vscroll_elements.length;i<n;i++ ){this._target_vscroll_elements[i]=null;}}this._target_vscroll_elements=null;}if(this._target_hscroll_elements){if(nexacro._isArray(this._target_hscroll_elements)){for(i=0,n=this._target_hscroll_elements.length;i<n;i++ ){this._target_hscroll_elements[i]=null;}}this._target_hscroll_elements=null;}this._hscroll_control=null;this._vscroll_control=null;}};_pGridScrollableControlElement.clearContents=function(){if(this.handle){nexacro._stopSysObserving(this._client_elem.handle,"scroll","onscroll",this._syshandler_onscroll_forward);nexacro._stopSysObserving(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);this._client_elem.clearContents();}};_pGridScrollableControlElement._syshandler_onscroll_forward=function(evt){if(window.event){evt=window.event;}var target=evt.srcElement||evt.target;target.scrollLeft=0;target.scrollTop=0;};_pGridScrollableControlElement.getContainerElement=function(position_step){return this._client_elem;};_pGridScrollableControlElement.setVertScrollElements=function(elems){this._target_vscroll_elements=elems;};_pGridScrollableControlElement.setHorzScrollElements=function(elems){this._target_hscroll_elements=elems;};_pGridScrollableControlElement._setContainerVScrollPos=function(pos){var vert_elems=this._target_vscroll_elements;if(vert_elems){vert_elems.setElementVScrollPos(pos);}};_pGridScrollableControlElement._setContainerHScrollPos=function(pos){var horz_elems=this._target_hscroll_elements;if(horz_elems){if(nexacro._isArray(horz_elems)){var elem;for(var i=0,n=horz_elems.length;i<n;i++ ){elem=horz_elems[i];elem.setElementHScrollPos(pos);}}else{horz_elems.setElementHScrollPos(pos);}}};_pGridScrollableControlElement._setContainerMaxHeight=function(height){var vert_elems=this._target_vscroll_elements;if(vert_elems){this.container_maxheight=height;if(nexacro._isArray(vert_elems)){var elem;for(var i=0,n=vert_elems.length;i<n;i++ ){elem=vert_elems[i];elem._setContainerMaxHeight(height);}}else{vert_elems._setContainerMaxHeight(height);}}};_pGridScrollableControlElement._setContainerMaxWidth=function(width){var horz_elems=this._target_hscroll_elements;if(horz_elems){this.container_maxwidth=width;if(nexacro._isArray(horz_elems)){var elem;for(var i=0,n=horz_elems.length;i<n;i++ ){elem=horz_elems[i];elem._setContainerMaxWidth(width);}}else{horz_elems._setContainerMaxWidth(width);}}};_pGridScrollableControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(this._apply_client_padding){var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}}var client_elem=this._client_elem;if(!client_elem||(client_width==0&&this.client_width==0)||(client_height==0&&this.client_height==0)){return 0;}var v_elements=this._target_vscroll_elements,v_element=v_elements,h_elements=this._target_hscroll_elements,h_element=h_elements;if(nexacro._isArray(v_elements)){v_element=v_elements[0];}if(nexacro._isArray(h_elements)){h_element=h_elements[0];}var zoomfactor=this.zoom/100;var zclient_width=this._zclient_width=client_width/zoomfactor;var zclient_height=this._zclient_height=client_height/zoomfactor;var zclient_width_body=((h_element)?h_element._calculateClientWidth(client_width):client_width)/zoomfactor;var zclient_height_body=((v_element)?v_element._calculateClientHeight(client_height-this.client_height):client_height)/zoomfactor;var container_maxwidth=(h_element)?h_element._getContainerMaxWidth():0;var container_maxheight=(v_element)?v_element._getContainerMaxHeight():0;var scroll_left=this.scroll_left;var scroll_top=this.scroll_top;var step_count=this._step_count;var step_containers=this._step_containers;if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width_body;}var hscroll_limit=0;var vscroll_limit=0;var hscrollbartype=this._hscrollbartype;var vscrollbartype=this._vscrollbartype;if(step_count>0&&step_containers){hscrollbartype="none";}if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;if(hscrollbartype!="none"&&hscrollbartype!="autoindicator"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;zclient_height_body-=this._hscroll_size/zoomfactor;}}else{if(hscrollbartype=="fixed"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;zclient_height_body-=this._hscroll_size/zoomfactor;}}if(zclient_height_body>=0&&container_maxheight>zclient_height_body){vscroll_limit=container_maxheight-zclient_height_body;if(vscrollbartype!="none"&&vscrollbartype!="autoindicator"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;zclient_width_body-=this._vscroll_size/zoomfactor;}if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){if(hscrollbartype!="none"&&hscrollbartype!="autoindicator"&&hscroll_limit==0){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;vscroll_limit+=this._hscroll_size;}hscroll_limit=container_maxwidth-zclient_width_body;}}else{if(vscrollbartype=="fixed"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;zclient_width_body-=this._vscroll_size/zoomfactor;if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;}}}if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width_body;if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;}}if(this.hscroll_limit!=hscroll_limit){this.hscroll_limit=hscroll_limit;if(scroll_left>hscroll_limit){this.setElementHScrollPos(hscroll_limit);}}if(this.vscroll_limit!=vscroll_limit){this.vscroll_limit=vscroll_limit;if(scroll_top>vscroll_limit){this.setElementVScrollPos(vscroll_limit);}}this._zclient_width=zclient_width;this._zclient_height=zclient_height;var ret=0;if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}else if(step_count>0){ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}else if(this.client_width!=zclient_width||this.client_height!=zclient_height){ret+=2;}return ret;};_pGridScrollableControlElement.setElementHScrollPos=function(hpos){var h_element=this._target_hscroll_elements;if(h_element){if(nexacro._isArray(h_element)){h_element=h_element[0];}if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}var scrollLeft=h_element.scroll_left;if(scrollLeft!=hpos||this._reset_scrollpos){this.scroll_left=hpos;this.linkedcontrol._scroll_left=hpos;this._setContainerHScrollPos(hpos);}if(!this._use_translate_scroll&&this.parent._procRefreshDOM==true){var areacontents;if(nexacro._isArray(h_element)){areacontents=h_element[0]._client_body_element;}else{areacontents=h_element._client_body_element;}if(areacontents){}}}};_pGridScrollableControlElement.setElementVScrollPos=function(vpos){var v_element=this._target_vscroll_elements;if(v_element){if(nexacro._isArray(v_element)){v_element=v_element[0];}if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}var scrollTop=v_element._getScrollTop();this.scroll_top=vpos;if(scrollTop!=vpos||this._reset_scrollpos){this.linkedcontrol._scroll_top=vpos;this._setContainerVScrollPos(vpos);}if(!this._use_translate_scroll&&this.parent._procRefreshDOM==true){var bandcontents;if(nexacro._isArray(v_element)){bandcontents=v_element[0]._client_elem;}else{bandcontents=v_element._client_elem;}if(bandcontents){bandcontents._refreshDOM();}}}};_pGridScrollableControlElement.setElementScrollPos=function(hpos,vpos){var v_element=this._target_vscroll_elements;var h_element=this._target_hscroll_elements;if(v_element){if(nexacro._isArray(v_element)){v_element=v_element[0];}if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}var scrollTop=v_element._getScrollTop();if(scrollTop!=vpos){this.scroll_top=vpos;this.linkedcontrol._scroll_top=vpos;this._setContainerVScrollPos(vpos);}}if(h_element){if(nexacro._isArray(h_element)){h_element=h_element[0];}if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}var scrollLeft=h_element.scroll_left;if(scrollLeft!=hpos){this.scroll_left=hpos;this.linkedcontrol._scroll_left=hpos;this._setContainerHScrollPos(hpos);}}};_pGridScrollableControlElement._setInnerElementScrollMaxTops=function(tops){var v_element=this._target_vscroll_elements;if(v_element&&tops){v_element._client_elem._scroll_max_arr=tops;}};_pGridScrollableControlElement.setElementScrollMaxSize=function(width,height){if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}var v_element=this._target_vscroll_elements;if(nexacro._isArray(v_element)){v_element=v_element[0];}this._setContainerMaxHeight(height);this._setContainerMaxWidth(width);if(v_element){this._updateClientRect();}};nexacro.GridBandControlElement=function(parent_elem,type){this.parent=parent_elem;this.parent_elem=parent_elem;this._type=type;this._client_elem=new nexacro._GridBandContainerElement(this,(type=="body"));this._client_elem_fix=null;this._fix_height=0;this.container_maxwidth=0;this.container_maxheight=0;this._cur_border=null;};var _pGridBandControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.GridBandControlElement);nexacro.GridBandControlElement.prototype=_pGridBandControlElement;_pGridBandControlElement._type_name="GridBandControlElement";_pGridBandControlElement.scroll_left=0;_pGridBandControlElement.scroll_top=0;_pGridBandControlElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;var _doc=win._doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;var bPositionRtl=this._isParentRtl();this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());var handle_style=handle.style;nexacro.__setDOMStyle_Pos(handle_style,this.left,this.top,bPositionRtl);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){if(this.linkedcontrol&&this.linkedcontrol._skip_mobile_tabfocus){this.tabindex= -99;}}this._refreshControl(handle,handle_style,_doc);nexacro.__appendDOMNode((this._is_nc_element)?owner_elem.handle:owner_elem.dest_handle,handle);if(!this._client_elem.handle){this._client_elem.create(win);}if(this._client_elem_fix&&!this._client_elem_fix.handle){this._client_elem_fix.create(win);}}}};_pGridBandControlElement.destroy=function(){if(this._client_elem_fix){this._client_elem_fix.destroy();this._client_elem_fix=null;}return nexacro.ControlElement.prototype.destroy.call(this);};_pGridBandControlElement._setFixArea=function(height){this._fix_height=height;if(height){if(!this._client_elem_fix){this._client_elem_fix=new nexacro._GridBandContainerElement(this,true,"fixed");}}else{if(this._client_elem_fix){this._client_elem_fix.destroy();this._client_elem_fix=null;}}if(this.handle&&this._client_elem_fix&&!this._client_elem_fix.handle){this._client_elem_fix.create();}this._updateClientSize();};_pGridBandControlElement.getContainerElement=function(is_fixed){if(is_fixed){return this._client_elem_fix;}return this._client_elem;};_pGridBandControlElement._setContainerMaxHeight=function(height){if(this._type=="body"){if(this.container_maxheight!=height){this.container_maxheight=height;this._client_elem._setScrollHeight(height);}}};_pGridBandControlElement._resetExtendContainer=function(scrollHeight){if(!scrollHeight){scrollHeight=this.container_maxheight;}this._client_elem._setScrollHeight(this.container_maxheight);};_pGridBandControlElement._calculateClientHeight=function(change_height){var border=this.border||this.linkedcontrol._getCSSStyleValue("border","enabled");var c_height=this.client_height+change_height+((border)?border._getBorderHeight():0);return c_height;};_pGridBandControlElement._getContainerMaxHeight=function(){if(this._type=="body"){return this.container_maxheight;}else{return this.client_height;}};_pGridBandControlElement._getScrollTop=function(){if(this._type=="body"){return this.scroll_top;}else{return 0;}};_pGridBandControlElement.setElementScrollMaxSize=function(width,height){if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}};_pGridBandControlElement._on_change_clientSize=function(width,height){nexacro.ControlElement.prototype._on_change_clientSize.call(this,width,height);var client_element_fix=this._client_elem_fix;if(client_element_fix){client_element_fix.setElementSize(width,this._fix_height);}};_pGridBandControlElement._on_updateClientRect=function(){var ret=0;var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(!this._cur_border){this._cur_border=this.border||this.linkedcontrol._getCSSStyleValue("border","normal");}var border=this._cur_border;if(border){client_width+=border._getBorderWidth();client_height+=border._getBorderHeight();}var fix_height=this._fix_height;client_top+=fix_height;client_height-=fix_height;if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}return ret;};_pGridBandControlElement._updateClientSize=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(!this._cur_border){this._cur_border=this.border||this.linkedcontrol._getCSSStyleValue("border","normal");}var border=this._cur_border;if(border){client_width+=border._getBorderWidth();client_height+=border._getBorderHeight();}var fix_height=this._fix_height;client_top+=fix_height;client_height-=fix_height;var client_element_fix=this._client_elem_fix;if(client_element_fix){client_element_fix.setElementPosition(client_left,0);client_element_fix.setElementSize(client_width,fix_height);}var client_element=this._client_elem;if(client_element){if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;client_element.setElementPosition(client_left,client_top);}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;client_element.setElementSize(client_width,client_height);}}else{this.client_left=client_left;this.client_top=client_top;this.client_width=client_width;this.client_height=client_height;}};_pGridBandControlElement.setElementVScrollPos=function(vpos){if(this._type=="body"){this._client_elem._try_user_setvpos=true;this._client_elem.setElementVScrollPos(vpos);this._client_elem._try_user_setvpos=null;this.scroll_top=vpos;}};_pGridBandControlElement._setOnScrollCallbackTarget=function(target){if(this._type=="body"){this._client_elem._grid=target;}};_pGridBandControlElement._getExtendContainerCount=function(){if(this._client_elem){return this._client_elem._ext_inners.length;}return 0;};_pGridBandControlElement.setElementBorder=function(border){var retn=nexacro.ControlElement.prototype.setElementBorder.call(this,border);this._cur_border=border;this._updateClientSize();this._client_elem._adjustPos();return retn;};_pGridBandControlElement.setElementShadow=nexacro._emptyFn;nexacro._GridBandContainerElement=function(parent_elem,use_translate_scroll,type){nexacro._ContainerElement.call(this,parent_elem,use_translate_scroll,type,true);this._scroll_max_arr=[];this._ext_inners=[];this._grid=null;};var __pGridBandContainerElement=nexacro._createPrototype(nexacro._ContainerElement,nexacro._GridBandContainerElement);nexacro._GridBandContainerElement.prototype=__pGridBandContainerElement;__pGridBandContainerElement._type_name="GridBandContainerElement";__pGridBandContainerElement._adjustPos=function(){this.setElementPosition(this.left,this.top);};__pGridBandContainerElement.destroy=function(){nexacro._ContainerElement.prototype.destroy.call(this);this._grid=null;};__pGridBandContainerElement.setElementPosition=function(left,top){var border=this.parent._cur_border;this.left=left;this.top=top;var handle=this.handle;if(handle){if(border){left=left-border.left._width;top=top-border.top._width;}nexacro.__setDOMStyle_Pos(handle.style,left,top);}};__pGridBandContainerElement.setElementSize=function(width,height){var border=this.parent._cur_border;this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){if(border){width=width+border.left._width+border.right._width;height=height+border.top._width+border.bottom._width;}if(width&&height){nexacro.__setDOMStyle_Size(handle.style,width,height);}else{nexacro.__clearDOMStyle_Size(handle.style);}if(this.type=="fixed"){if(this.dest_handle){nexacro.__setDOMStyle_Size(this.dest_handle.style,width,height);}}else{if(this.dest_handle){var owner_elem=this.owner_elem;var scroll_height=owner_elem?Math.max(owner_elem.container_maxheight,this.height):this.height;this._setScrollHeight(scroll_height,true);}}}};__pGridBandContainerElement._setInnerElementExtend=function(){var handle=this.handle;var dest_handle=this.dest_handle;var _scroll_max=this._scroll_max_arr;var _doc=this.owner_elem._getRootWindowHandle();this._deleteExtinners(_scroll_max.length-1);var newinners=this._ext_inners;var newinners_cnt=newinners.length;var _ext_inner;var j=0;if(_scroll_max.length>0){var test=["red","orange","yellow","green","blue","navy","pupple"];for(var i=1;i<_scroll_max.length;i++ ){if(i<=newinners_cnt){_ext_inner=newinners[j++ ];nexacro.__setDOMStyle_Size(_ext_inner.style,this.width,_scroll_max[i]-_scroll_max[i-1]);continue;}else{_ext_inner=_doc.createElement("div");nexacro.__setDOMNode_ClassName(_ext_inner,"nexainnercontainer");nexacro.__setDOMNode_Id(_ext_inner,"",dest_handle.id+"_ext_"+(i-1));nexacro.__setDOMNode_Selectable(_ext_inner,false);var inner_style=_ext_inner.style;nexacro.__setDOMStyle_Absolute(inner_style);nexacro.__setDOMStyle_Pos(inner_style,0,this.height);nexacro.__setDOMStyle_Size(_ext_inner.style,this.width,_scroll_max[i]-_scroll_max[i-1]);if(nexacro._bigdata_innertest){_ext_inner.style.border="2px solid "+test[i-1];}nexacro.__appendDOMNode(handle,_ext_inner);newinners.push(_ext_inner);}}}};__pGridBandContainerElement._changeInnerElement=function(top,row_handle){var idx=this._getExtInnerIdx(top);var next_handle=this._getDestHandle(top,idx);var prev_handle=row_handle.parentElement;if(idx!=null&&idx> -1){top=top-this._scroll_max_arr[idx];}if(prev_handle&&(prev_handle!=next_handle)){nexacro.__removeDOMNode(prev_handle,row_handle);nexacro.__appendDOMNode(next_handle,row_handle);}return top;};__pGridBandContainerElement._getDestHandle=function(top,idx){if(idx==undefined){idx=this._getExtInnerIdx(top);}return (idx<0)?this.dest_handle:this._ext_inners[idx];};__pGridBandContainerElement._getExtInnerIdx=function(top){var _scroll_max=this._scroll_max_arr;var idx= -1;if(_scroll_max){for(var i=0,n=_scroll_max.length;i<n;i++ ){if(top<_scroll_max[i]){idx=i-1;break;}}}return idx;};__pGridBandContainerElement._removeExtinners=function(){var handle=this.handle;var ext_inners=this._ext_inners;for(var i=0;i<ext_inners.length;i++ ){nexacro.__removeDOMNode(handle,ext_inners[i]);}this._ext_inners=null;};__pGridBandContainerElement._deleteExtinners=function(keepcnt){var handle=this.handle;var ext_inners=this._ext_inners;if(!keepcnt){keepcnt=0;}for(var i=ext_inners.length-1;i>=keepcnt;i-- ){nexacro.__removeDOMNode(handle,ext_inners[i]);ext_inners.splice(i,1);}};__pGridBandContainerElement._findScrollbarControl=function(elem,is_vert){while(elem){var linkedcontrol=elem.linkedcontrol;if(linkedcontrol){if(is_vert){if(linkedcontrol._grid&&linkedcontrol._grid.vscrollbar){return linkedcontrol._grid.vscrollbar;}}else{if(linkedcontrol._grid&&linkedcontrol._grid.hscrollbar){return linkedcontrol._grid.hscrollbar;}}}elem=elem.parent;}return null;};if(nexacro._use_translate_scroll){__pGridBandContainerElement.create=function(win){var owner_elem=this.owner_elem=this.parent_elem;nexacro._ContainerElement.prototype.create.call(this,win);this._setScrollHeight(owner_elem.container_maxheight);nexacro._observeSysEvent(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);this._adjustPos();};__pGridBandContainerElement.attachHandle=function(win){nexacro._ContainerElement.prototype.attachHandle.call(this,win);nexacro.__setDOMStyle_Size(this.dest_handle.style,this.width,this.height);if(this.parent._type=="body"){this._setScrollHeight(this.owner_elem.container_maxheight);}nexacro._observeSysEvent(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);this.setElementPosition(this.left,this.top);};__pGridBandContainerElement._syshandler_onscroll_forward=function(evt){var target=evt.target;if(!target){return;}var container=target._linked_element;if(container){if(container._noEventScroll==true){container._noEventScroll=false;return;}if(target.scrollLeft>0){container._noEventScroll=true;target.scrollLeft=0;}if(target.scrollTop>0){container._noEventScroll=true;target.scrollTop=0;}}};__pGridBandContainerElement._setScrollHeight=function(height,update_size){var handle=this.dest_handle;if(handle){if(this._scroll_max_arr&&this._scroll_max_arr.length>0){height=this._scroll_max_arr[0];if(height<this.height){height=this.height;}nexacro.__setDOMStyle_Size(handle.style,this.width,height);if(!update_size){this._setInnerElementExtend();}}else{if(height<this.height){height=this.height;}nexacro.__setDOMStyle_Size(handle.style,this.width,height);}}};__pGridBandContainerElement.setElementVScrollPos=function(vpos){if(this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_top=vpos;var _inner_handle=this.dest_handle;if(_inner_handle){nexacro.__setDOMStyle_Translate(_inner_handle.style,0, -vpos);var ext_vpos;var _ext_inner=this._ext_inners;var scroll_max_arr=this._scroll_max_arr;for(var i=0;i<_ext_inner.length;i++ ){if(vpos+this.height>scroll_max_arr[i]&&vpos<scroll_max_arr[i+1]){if(nexacro._Browser_Transform3d>0){ext_vpos=vpos-(scroll_max_arr[i]-this.height);}else{ext_vpos=vpos-scroll_max_arr[i];}}else{ext_vpos= -this.height;}nexacro.__setDOMStyle_Translate(_ext_inner[i].style,0, -ext_vpos);}if(this._grid){this._grid._callback_onvscroll(vpos);}}}};__pGridBandContainerElement._refreshDOM=nexacro._emptyFn;__pGridBandContainerElement.destroy=function(){this._destroyElementHandle();this._removeExtinners();this.owner_elem=null;this.dest_handle=null;this.parent=null;this.parent_elem=null;this._scroll_max_arr=null;};}else{__pGridBandContainerElement.create=function(win){nexacro._ContainerElement.prototype.create.call(this,win);var owner_elem=this.owner_elem=this.parent_elem;var _doc=win?win._doc:owner_elem._getRootWindowHandle();var tempdiv=this._tempdiv=_doc.createElement("div");nexacro.__setDOMStyle_AbsoluteTransparent(tempdiv.style);nexacro.__setDOMStyle_Pos(tempdiv.style,0,0);nexacro.__setDOMStyle_Size(tempdiv.style,1,1);nexacro.__setDOMStyle_Display(tempdiv.style,"none");if(nexacro._Browser=="IE"&&nexacro._OS=="Windows"&&nexacro._OSVersion<=10){this.handle.style.transform="translate3d(0px, 0px, 0)";nexacro.__appendDOMNode(this.handle,tempdiv);}this._setScrollHeight(owner_elem.container_maxheight);nexacro._stopSysObserving(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);nexacro._observeSysEvent(this.handle,"scroll","onscroll",this._org_syshandler_onscroll_forward);this._adjustPos();};__pGridBandContainerElement.attachHandle=function(win){nexacro._ContainerElement.prototype.attachHandle.call(this,win);if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){this.handle=this.dest_handle=handle;this._tempdiv=handle.nextSibling;}}this.handle._linked_element=this;nexacro.__setDOMStyle_Size(this.dest_handle.style,this.width,this.height);if(nexacro._Browser=="IE"&&nexacro._OS=="Windows"&&nexacro._OSVersion<=10){this.handle.style.transform="translate3d(0px, 0px, 0)";}if(this.parent._type=="body"){this._setScrollHeight(this.owner_elem.container_maxheight);}nexacro._stopSysObserving(this.handle,"scroll","onscroll",this._syshandler_onscroll_forward);nexacro._observeSysEvent(this.handle,"scroll","onscroll",this._org_syshandler_onscroll_forward);this._adjustPos();};__pGridBandContainerElement.destroy=function(){var handle=this.handle;if(handle){nexacro._stopSysObserving(handle,"scroll","onscroll",this._org_syshandler_onscroll_forward);}this._removeExtinners();this.handle._linked_element=null;this._destroyElementHandle();nexacro.__removeDOMNode(handle,this._tempdiv);this._tempdiv=null;this.owner_elem=null;this.dest_handle=null;this.parent=null;this.parent_elem=null;this._scroll_max_arr=null;this._ext_inners=null;};if(nexacro._Browser=="IE"){if(nexacro._BrowserVersion<=8){__pGridBandContainerElement._syshandler_onscroll_forward=function(evt){if((!evt||evt.type!="scroll")&&window.event){evt=window.event;}if(evt.type!="scroll"){return;}var target=evt.srcElement;if(!target){return;}var container=target._linked_element;if(container){if(container._noEventScroll==true){container._noEventScroll=false;if(container._grid){container._grid._callback_onvscroll(true);}return;}var elem_scroll_top=container._scroll_top|0;var scrolltop=(target._org_scrollTop!=undefined)?target._org_scrollTop:target.scrollTop;target._org_scrollTop=undefined;if(!container._try_user_setvpos){if(elem_scroll_top!=scrolltop){var vscrollbar=container._findScrollbarControl(container,true);if(vscrollbar){vscrollbar.set_pos(scrolltop);}else{this.setElementVScrollPos(elem_scroll_top);}}}}};}else{__pGridBandContainerElement._syshandler_onscroll_forward=function(evt){if((!evt||evt.type!="scroll")&&window.event){evt=window.event;}if(evt.type!="scroll"){return;}var target=evt.srcElement;if(!target){return;}var container=target._linked_element;if(container){if(container._noEventScroll==true){container._noEventScroll=false;if(container._grid){container._grid._callback_onvscroll(true);}return;}var elem_scroll_top=container._scroll_top|0;var scrolltop=(target._org_scrollTop!=undefined)?target._org_scrollTop:target.scrollTop;target._org_scrollTop=undefined;if(elem_scroll_top!=scrolltop){var vscrollbar=container._findScrollbarControl(container,true);if(vscrollbar){vscrollbar.set_pos(scrolltop);}else{this.setElementVScrollPos(elem_scroll_top);}}}};}}else{__pGridBandContainerElement._syshandler_onscroll_forward=function(evt){var target=evt.target;if(!target){return;}var container=target._linked_element;if(container){if(container._noEventScroll==true){container._noEventScroll=false;if(container._grid){container._grid._callback_onvscroll(true);}return;}var elem_scroll_top=container._scroll_top|0;var scrolltop=(target._org_scrollTop!=undefined)?target._org_scrollTop:target.scrollTop;target._org_scrollTop=undefined;if(elem_scroll_top!=scrolltop){var vscrollbar=container._findScrollbarControl(container,true);if(vscrollbar){vscrollbar.set_pos(scrolltop);}else{this.setElementVScrollPos(elem_scroll_top);}}}};}__pGridBandContainerElement._org_syshandler_onscroll_forward=__pGridBandContainerElement._syshandler_onscroll_forward;__pGridBandContainerElement._setScrollHeight=function(height){var handle=this.dest_handle;if(handle){var tempdiv=this._tempdiv;if(!tempdiv){var owner_elem=this.owner_elem=this.parent_elem;var _doc=owner_elem._getRootWindowHandle();if(_doc){tempdiv=this._tempdiv=_doc.createElement("div");nexacro.__setDOMStyle_AbsoluteTransparent(tempdiv.style);nexacro.__setDOMStyle_Size(tempdiv.style,1,1);nexacro.__setDOMStyle_Display(tempdiv.style,"none");nexacro.__appendDOMNode(this.handle,tempdiv);}}if(tempdiv){nexacro.__setDOMStyle_Pos(this._tempdiv.style,0,height-1);}if(this._scroll_max_arr&&this._scroll_max_arr.length>0){height=this._scroll_max_arr[0];if(height<this.height){height=this.height;}nexacro.__setDOMStyle_Size(handle.style,this.width,height);this._setInnerElementExtend();}else{if(height<this.height){height=this.height;}nexacro.__setDOMStyle_Size(handle.style,this.width,height);}}};__pGridBandContainerElement.setElementVScrollPos=function(vpos){if(this._scroll_top!=vpos||this.parent._reset_scrollpos){var dir=vpos-this._scroll_top;this._scroll_top=vpos;var handle=this.handle;if(handle){var _inner_handle=this.dest_handle;var _ext_inners=this._ext_inners;var _ext_inners_len=_ext_inners.length;if(_inner_handle&&_ext_inners_len>0){var scroll_max_arr=this._scroll_max_arr;if(vpos<=scroll_max_arr[0]){nexacro.__setDOMStyle_Display(_inner_handle.style,"");}else{nexacro.__setDOMStyle_Display(_inner_handle.style,"none");}var extinner_top,extinner_handle;var i,n;var extinner_height,nextinner_handle;if(dir>0){for(i=0,n=scroll_max_arr.length-1;i<n;i++ ){if(vpos<scroll_max_arr[0]){break;}if(vpos>=scroll_max_arr[i]){if(extinner_handle){nexacro.__setDOMStyle_Display(extinner_handle.style,"none");}extinner_top=scroll_max_arr[i];extinner_handle=_ext_inners[i];nextinner_handle=_ext_inners[i+1];extinner_height=scroll_max_arr[i+1]-extinner_top;}else if(extinner_handle){break;}}if(extinner_handle){nexacro.__setDOMStyle_Translate(extinner_handle.style,0,0);nexacro.__setDOMStyle_Display(extinner_handle.style,"");if(nextinner_handle){nexacro.__setDOMStyle_Translate(nextinner_handle.style,0,extinner_height);nexacro.__setDOMStyle_Display(nextinner_handle.style,"");i++ ;}for(;i<_ext_inners_len;i++ ){nexacro.__setDOMStyle_Display(_ext_inners[i].style,"none");}this._noEventScroll=true;handle._org_scrollTop=vpos;nexacro.__setDOMNode_VScrollPos(handle,vpos-extinner_top);}else{for(i=0;i<_ext_inners_len;i++ ){if(i==0){nexacro.__setDOMStyle_Translate(_ext_inners[i].style,0,scroll_max_arr[i]);nexacro.__setDOMStyle_Display(_ext_inners[i].style,"");}else{nexacro.__setDOMStyle_Display(_ext_inners[i].style,"none");}}this._noEventScroll=true;nexacro.__setDOMNode_VScrollPos(handle,vpos);}}else if(dir<0){for(i=0,n=scroll_max_arr.length;i<n;i++ ){if(vpos<=scroll_max_arr[i]){if(i==0){break;}extinner_handle=_ext_inners[i-1];extinner_top=scroll_max_arr[i-1];extinner_height=scroll_max_arr[i]-extinner_top;nextinner_handle=_ext_inners[i];i++ ;break;}}if(extinner_handle){nexacro.__setDOMStyle_Translate(extinner_handle.style,0,0);nexacro.__setDOMStyle_Display(extinner_handle.style,"");if(nextinner_handle){nexacro.__setDOMStyle_Translate(nextinner_handle.style,0,extinner_height);nexacro.__setDOMStyle_Display(nextinner_handle.style,"");}for(;i<_ext_inners_len;i++ ){nexacro.__setDOMStyle_Display(_ext_inners[i].style,"none");}this._noEventScroll=true;handle._org_scrollTop=vpos;nexacro.__setDOMNode_VScrollPos(handle,vpos-extinner_top);}else{for(i=0;i<_ext_inners_len;i++ ){if(i==0){nexacro.__setDOMStyle_Translate(_ext_inners[i].style,0,scroll_max_arr[i]);nexacro.__setDOMStyle_Display(_ext_inners[i].style,"");}else{nexacro.__setDOMStyle_Display(_ext_inners[i].style,"none");}}this._noEventScroll=true;nexacro.__setDOMNode_VScrollPos(handle,vpos);}}}else{this._noEventScroll=true;nexacro.__setDOMNode_VScrollPos(handle,vpos);}}}};__pGridBandContainerElement._refreshDOM=nexacro._emptyFn;}nexacro.GridRowControlElement=function(parent_elem,left_gap){this.parent=parent_elem;this.parent_elem=parent_elem;this._client_left_element=null;if(nexacro._Browser=="IE"){this._client_body_element=new nexacro._ContainerElement(this,false,"body");this._client_body_element._callback_func_onscroll=function(evt){if(evt._node_activate_scroll){var target=evt.srcElement||evt.target;if(!target){return;}this.parent.linkedcontrol._callback_func_onscroll_node_acivate(target.scrollLeft);}else{this.parent.linkedcontrol._callback_func_onscroll(this._scroll_left,this._scroll_top);}};}else{this._client_body_element=new nexacro._ContainerElement(this,true,"body");}this._client_right_element=null;this._left_width=0;this._right_width=0;this._body_width=0;this.scroll_left=0;this._left_gap=left_gap;};var _pGridRowControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.GridRowControlElement);nexacro.GridRowControlElement.prototype=_pGridRowControlElement;_pGridRowControlElement._type_name="GridRowControlElement";_pGridRowControlElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.linkedcontrol._fixed);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;var _doc=win._doc||owner_elem._getRootWindowHandle();var handle=_doc.createElement("div");handle.id=this.name;handle._linked_element=this;this.handle=this.dest_handle=handle;nexacro.__setDOMNode_ClassName(handle,this._getElementClassName());var handle_style=handle.style;var _owner_dest_handle=(this._is_nc_element)?owner_elem.handle:owner_elem._getDestHandle(this.top);if(this._use_translate_move){nexacro.__setDOMStyle_Pos(handle_style,this.left,0);}this.setElementPosition(this.left,this.top,true);nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);handle_style.clip="rect(0px, "+(this.width|0)+"px, "+(this.height|0)+"px, 0px)";this._refreshControl(handle,handle_style,_doc);nexacro.__appendDOMNode(_owner_dest_handle,handle);}if(this.handle){if(this._client_left_element&&!this._client_left_element.handle){this._client_left_element.create(win);}if(!this._client_body_element.handle){this._client_body_element.create(win);}if(this._client_right_element&&!this._client_right_element.handle){this._client_right_element.create(win);}this._client_elem=this._client_body_element;}}};_pGridRowControlElement._removeElementHandle=function(){var handle=this.handle;if(handle){var dest_handle;handle._linked_element=null;if(this._is_nc_element){dest_handle=(this.owner_elem?this.owner_elem.handle:null);}else{dest_handle=(this.owner_elem?this.owner_elem._getDestHandle(this.top):null);}nexacro.__removeDOMNode(dest_handle,handle);}};_pGridRowControlElement._on_destroy=function(){var handle=this.handle;if(handle){this._client_body_element.destroy();if(this._client_left_element){this._client_left_element.destroy();}if(this._client_right_element){this._client_right_element.destroy();}this._client_body_element=null;this._client_left_element=null;this._client_right_element=null;this._client_elem=null;}};_pGridRowControlElement.createCommandStart=function(){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&!this.handle){this.owner_elem=owner_elem;var str="<div id='"+this.name+"' class='"+this._getElementClassName()+"'";if(!nexacro._isNull(this.tooltiptext)){str+=" title = '"+this.tooltiptext+"' ";}var acc_str=this._getAccessibilityInfoStr();var style_str=this._getControlStyleStr();var status_str=this._getControlStatusStr();str+=status_str?(" "+status_str):"";str+=style_str?(" style='"+style_str+"'"):"";str+="clip:rect(0px, "+(this.width|0)+"px, "+(this.height|0)+"px, 0px);";str+=acc_str?(" "+acc_str+">"):">";var edge_elem=this._edge_elem;if(edge_elem){str+=edge_elem.createCommand();}return str;}};_pGridRowControlElement.createCommandAreaStart=function(area){var str="";if(area=="body"){if(this._client_body_element){str+=this._client_body_element.createCommandStart();}}else if(area=="left"){if(this._client_left_element){str+=this._client_left_element.createCommandStart();}}else{if(this._client_right_element){str+=this._client_right_element.createCommandStart();}}return str;};_pGridRowControlElement.createCommandAreaEnd=function(area){var str="";if(area=="body"){if(this._client_body_element){str+=this._client_body_element.createCommandEnd();}}else if(area=="left"){if(this._client_left_element){str+=this._client_left_element.createCommandEnd();}}else{if(this._client_right_element){str+=this._client_right_element.createCommandEnd();}}return str;};_pGridRowControlElement.createCommandEnd=function(area){return "</div>";};_pGridRowControlElement.attachHandle=function(win){if(this.name&&!this.handle){var handle=win._doc.getElementById(this.name);if(handle){handle._linked_element=this;if(this._client_body_element){this.handle=this.dest_handle=handle;this._client_body_element.attachHandle(win);}var edge_elem=this._edge_elem;if(edge_elem){edge_elem.attach_handle_fromparent(handle);}this._setAccessibility_notify();if(this._client_left_element){this._client_left_element.attachHandle(win);}if(this._client_right_element){this._client_right_element.attachHandle(win);}}this.owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.linkedcontrol._fixed);}};_pGridRowControlElement.clearContents=function(){if(this.handle){this._client_body_element.clearContents();if(this._client_left_element){this._client_left_element.clearContents();}if(this._client_right_element){this._client_right_element.clearContents();}}};_pGridRowControlElement.getContainerElement=function(area){if(area==1){return this._client_left_element;}else if(area==2){return this._client_right_element;}return this._client_body_element;};_pGridRowControlElement._refreshCommonStyleProps=function(handle_style){if(!this.visible){nexacro.__setDOMStyle_Visible(handle_style,false);}if(this.width&&this.height){nexacro.__setDOMStyle_Size(handle_style,this.width,this.height);}if(this.color){nexacro.__setDOMStyle_ColorObject(handle_style,this.color);}if(this.font){nexacro.__setDOMStyle_FontObject(handle_style,this.font);}if(this.wordSpacing){nexacro.__setDOMStyle_WordSpacingObject(handle_style,this.wordSpacing);}if(this.letterSpacing){nexacro.__setDOMStyle_LetterSpacingObject(handle_style,this.letterSpacing);}if(this.textDecoration){nexacro.__setDOMStyle_TextDecorationObject(handle_style,this.textDecoration);}if(this.rtl!=undefined){nexacro.__setDOMStyle_Direction(handle_style,this.rtl);}if(this.wordWrap){nexacro.__setDOMStyle_WordWrap(handle_style,this.wordWrap);}};_pGridRowControlElement.setArea=function(leftwidth,rightwidth){if(leftwidth>0&&!this._client_left_element){this._client_left_element=new nexacro._ContainerElement(this,false,"left");}if(rightwidth>0&&!this._client_right_element){this._client_right_element=new nexacro._ContainerElement(this,false,"right");}this._left_width=leftwidth;var addgap=this._left_gap;if(this._client_left_element){this._client_left_element.setElementPosition(this.client_left-addgap,this.client_top);this._client_left_element.setElementSize(leftwidth,this.client_height);}this._right_width=rightwidth;if(this._client_right_element){this._client_right_element.setElementPosition(this.client_width-rightwidth+addgap,this.client_top);this._client_right_element.setElementSize(rightwidth-addgap,this.client_height);}this._body_width=this.client_width-leftwidth-rightwidth+(addgap*2);this._client_body_element.setElementPosition(leftwidth-addgap,this.client_top);this._client_body_element.setElementSize(this._body_width,this.height);};_pGridRowControlElement._updateClientRect=function(){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if(ret&2){this._on_change_clientSize(this.client_width,this.client_height);}if(ret){this.setArea(this._left_width,this._right_width);}this._setContainerMaxWidth(this._client_body_element._scroll_maxwidth,this.height);};_pGridRowControlElement._setContainerMaxWidth=function(width){this._client_body_element.setElementScrollMaxSize(width,this.height);};_pGridRowControlElement._calculateClientWidth=function(parent_client_width){return parent_client_width-this._left_width-this._right_width;};_pGridRowControlElement._getContainerMaxWidth=function(){return this._client_body_element._scroll_maxwidth;};_pGridRowControlElement.setElementHScrollPos=function(hpos){this._client_body_element._setElementHScrollPos(hpos);this.scroll_left=hpos;};_pGridRowControlElement.setElementPosition=function(left,top,bForce){if(this.parent_elem._use_container_move){var owner_elem=this.owner_elem;if(this.left!=left||this.top!=top||bForce){var adjust_top=top;if(!this._is_nc_element&&owner_elem&&(this.top!=top||bForce)){adjust_top=owner_elem._changeInnerElement(top,this.handle);}nexacro.Element.prototype.setElementPosition.call(this,left,adjust_top,bForce);this.top=top;}}else{nexacro.Element.prototype.setElementPosition.call(this,left,top,bForce);}};_pGridRowControlElement.setElementSize=function(width,height){nexacro.ControlElement.prototype.setElementSize.call(this,width,height);var handle=this.handle;if(handle){handle.style.clip="rect(0px, "+(this.width)+"px, "+(this.height)+"px, 0px)";}};}if(_process){delete _process;delete _pElement;delete __pEdgeImageElement;delete _pTextBoxElement;delete _pImageElement;delete _pIconElement;delete _pIconTextElement;delete _pTextAreaElement;delete __pFrameResizeBorderElement;delete _pModalOverlayElement;delete _pControlElement;delete _pFrameControlElement;delete _pScrollableControlElement;delete __pContainerElement;delete _pPluginElement;delete __pPluginObject;delete __pWebBrowserPluginElement;delete __pVideoPlayerPluginElement;delete _pCanvasElement;delete __pCanvasGradient;delete _pGridScrollableControlElement;delete _pGridBandControlElement;delete __pGridBandContainerElement;delete _pGridRowControlElement;}
if(nexacro._Browser=="Runtime"){"use strict";var _process=true;if(!nexacro.Element){nexacro.__setLastFocusedElement=function(elem){if(elem){var win=elem.linkedcontrol?elem.linkedcontrol._getWindow():(elem.parent_elem?elem.parent_elem.linkedcontrol._getWindow():null);if(win){var root_win=win;while(true){if(root_win instanceof nexacro._PopupWindow){if(root_win==root_win.parent){break;}root_win=root_win.parent;}else{break;}}if(!root_win){root_win=win;}root_win._last_focused_elem=elem;}}};nexacro.Element=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"elem");};var _pElement=nexacro._createPrototype(nexacro.Object,nexacro.Element);nexacro.Element.prototype=_pElement;_pElement._type_name="Element";_pElement.parent=null;_pElement.parent_elem=null;_pElement.id="";_pElement.status="";_pElement.userstatus="";_pElement.left=0;_pElement.top=0;_pElement.width=0;_pElement.height=0;_pElement.visible=true;_pElement.rtl=undefined;_pElement.color=null;_pElement.font=null;_pElement.textDecoration=null;_pElement.wordSpacing=null;_pElement.letterSpacing=null;_pElement.pointerEvent="";_pElement.handle=null;_pElement.owner_elem=null;_pElement._is_nc_element=false;_pElement._is_input_element=false;_pElement.typeselector="";_pElement.classselector="";_pElement.idselector="";_pElement.clearContents=nexacro._emptyFn;_pElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name);this._refreshCommonStyleProps(handle);this.handle=handle;nexacro.__appendElementHandle(this._is_nc_element?owner_elem.handle:owner_elem.dest_handle,handle);}};_pElement._refreshCommonStyleProps=function(handle){if(!this.visible){nexacro.__setElementHandleVisible(handle,false);}if(this.display=="none"){nexacro.__setElementHandleVisible(handle,false);}if(this.color){nexacro.__setElementHandleColorObject(handle,this.color);}if(this.font){nexacro.__setElementHandleFontObject(handle,this.font);}if(this.wordSpacing){nexacro.__setElementHandleWordSpacingObject(handle,this.wordSpacing);}if(this.letterSpacing){nexacro.__setElementHandleLetterSpacingObject(handle,this.letterSpacing);}if(this.textDecoration){nexacro.__setElementHandleTextDecorationObject(handle,this.textDecoration);}if(this.wordWrap){nexacro.__setElementHandleWordwrapObject(handle,this.wordWrap);}if(this.pointerEvent){nexacro.__setElementHandlePointerEvents(handle,this.pointerEvent);}if(this.rtl!==undefined){nexacro.__setElementHandleRtlDirection(handle,this.rtl);}};_pElement.destroy=function(){var handle=this.handle;if(handle){var dest_handle=(this.owner_elem?this.owner_elem.dest_handle:null);if(dest_handle){nexacro.__destroyElementHandle(dest_handle,handle);}this.owner_elem=null;this.handle=null;}this.parent=null;this.parent_elem=null;};_pElement.isInputElement=function(){return this._is_input_element;};_pElement.stopSysEvent=function(){this._event_stop=true;};_pElement._destroyElementHandle=function(){var handle=this.handle;var owner_elem=this.owner_elem;if(handle){var owner_handle=null;if(owner_elem&&owner_elem.handle){owner_handle=owner_elem.handle;nexacro.__destroyElementHandle(owner_handle,handle);}}this.owner_elem=null;this.handle=null;};_pElement._appendToContainer=function(owner_elem){var handle=this.handle;if(handle&&owner_elem.handle&&this.owner_elem==null){this.owner_elem=owner_elem;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};_pElement._insertToContainer=function(owner_elem,before_elem){var handle=this.handle;if(handle&&owner_elem.handle&&this.owner_elem==null){nexacro.__insertElementHandle(owner_elem.dest_handle,handle,before_elem.handle);}};_pElement._removeFromContainer=function(){var owner_elem=this.owner_elem;if(owner_elem){this.owner_elem=null;var handle=this.handle;if(handle&&owner_elem.handle){nexacro.__unlinkElementHandle(owner_elem.dest_handle,handle);}}};_pElement.getContainerElement=function(){return this;};_pElement._getRootWindowHandle=function(){if(this.owner_elem){return this.owner_elem._getRootWindowHandle();}return null;};_pElement._getWindowHandle=function(){return this._getRootWindowHandle();};_pElement._isRtl=function(bPosition){var elem=bPosition?(this.parent_elem?this.parent_elem:this.linkedcontrol.getElement()):this;while(elem){if(elem.rtl!==undefined){return elem.rtl;}if(elem.parent_elem){elem=elem.parent_elem;}else{elem=elem.parent;}}return nexacro._rtl;};_pElement._isParentRtl=function(){var elem=this.parent_elem?this.parent_elem:(this.parent?this.parent.getElement():null);while(elem){if(elem.rtl!==undefined){return elem.rtl;}if(elem.parent_elem){elem=elem.parent_elem;}else{elem=elem.parent;}}return nexacro._rtl;};_pElement._checkUpdateElementByRTL=function(handle,prop){var ret=false;var bPositionRtl=this._isRtl(true);if(handle){if(typeof prop=="number"){var left=nexacro.__getElementHandlePositionLeft(handle);if(!((left==prop)^bPositionRtl)){ret=true;}}}return ret;};_pElement._getRTLPositionLeft=function(left,width){var bPositionRtl=this._isParentRtl();var rtlLeft=left;var owner_elem=this.owner_elem;var parent_width=0;if(bPositionRtl){if(owner_elem){parent_width=owner_elem.width;if(owner_elem instanceof nexacro.ControlElement){if(this._is_nc_element||owner_elem._is_simple_control){parent_width=owner_elem.inner_width;}else{if(this instanceof nexacro.FrameControlElement){var win=this._getWindow();parent_width=win.getClientWidth();}else{parent_width=owner_elem.client_width;}}}}else{var _win=this._getWindow();parent_width=_win.getClientWidth();}rtlLeft=parent_width-width-left;}return rtlLeft;};_pElement._getRTLContainerPositionLeft=function(left,width){var parent_width=this.inner_width;var rtlleft=parent_width-width-left;return rtlleft;};_pElement._getRtlScrollLeft=function(scrollLeft,parentWidth){scrollLeft=this.getElementScrollWidth()-parentWidth-scrollLeft;return scrollLeft;};_pElement.setElementPosition=function(left,top){if(this.left!=left||this.top!=top){this.left=left;this.top=top;var handle=this.handle;if(handle){var newLeft=this._getRTLPositionLeft(left,this.width);if(newLeft||top){nexacro.__setElementHandlePosition(handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(handle);}}}};_pElement.setElementSize=function(width,height,update){if(this.width!=width||this.height!=height||update){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){var bPositionRtl=this._isParentRtl();if(bPositionRtl){var newLeft=this._getRTLPositionLeft(this.left,width);if(newLeft||this.top){nexacro.__setElementHandlePosition(handle,newLeft,this.top);}else{nexacro.__clearElementHandlePosition(handle);}}if(width&&height){nexacro.__setElementHandleSize(handle,width,height);}else{nexacro.__clearElementHandleSize(handle);}}}};_pElement.setElementVisible=function(visible){if(this.visible!=visible){this.visible=visible;var handle=this.handle;if(handle){nexacro.__setElementHandleVisible(handle,visible);}}};_pElement.setElementRtl=function(rtl){if(this.rtl!=rtl){this.rtl=rtl;var handle=this.handle;if(handle){nexacro.__setElementHandleRtlDirection(handle,rtl);}}};_pElement.setElementTypeCSSSelector=function(typename){if(this.typeselector!=typename){this.typeselector=typename;var handle=this.handle;if(handle){var classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setElementHandleCSSClassName(handle,classname);}}}};_pElement.setElementClassCSSSelector=function(classname){if(this.classselector!=classname){this.classselector=classname;if(classname){var _classname=this._getElementClassName();if(this._classname!=_classname){this._classname=_classname;var handle=this.handle;if(handle){nexacro.__setElementHandleCSSClassName(handle,_classname);}}}}};_pElement.setElementTextAlignByClassCSSSelector=function(textalign){var classselector="nexacenteralign";if(this._isRtl()){if(textalign=="left"){classselector="nexarightalign";}else if(textalign=="right"){classselector="nexaleftalign";}}else{if(textalign=="left"){classselector="nexaleftalign";}else if(textalign=="right"){classselector="nexarightalign";}}this.setElementClassCSSSelector(classselector);};_pElement._setElementHandleTextAlign=function(handle,textalign,rtl){if(handle){if(rtl){textalign=((textalign=="left")?"right":(textalign=="right"?"left":textalign));}nexacro.__setElementHandleTextAlign(handle,textalign);}};_pElement._getElementClassName=function(){var classname=this.typeselector;if(this.idselector){classname+=" "+this.idselector;}if(this.rtl){classname+=" nexartl";}if(this.classselector){classname+=" "+this.classselector;}return classname;};_pElement.setElementStatus=function(status){if(this.status!=status){this.status=status;var handle=this.handle;if(handle){nexacro.__setElementHandleStatus(handle,status);}}};_pElement.setElementUserStatus=function(userstatus){if(this.userstatus!=userstatus){this.userstatus=userstatus;var handle=this.handle;if(handle){nexacro.__setElementHandleUserStatus(handle,userstatus);}}};_pElement.setElementColor=function(color){this.color=color;if(this.handle){nexacro.__setElementHandleColorObject(this.handle,color);}};_pElement.setElementFont=function(font){this.font=font;if(this.handle){nexacro.__setElementHandleFontObject(this.handle,font);}};_pElement.setElementTextDecoration=function(decoration){this.textDecoration=decoration;if(this.handle){nexacro.__setElementHandleTextDecorationObject(this.handle,decoration);}};_pElement.setElementWordSpacing=function(wordspacing){this.wordSpacing=wordspacing;if(this.handle){nexacro.__setElementHandleWordSpacingObject(this.handle,wordspacing);}};_pElement.setElementLetterSpacing=function(letterspacing){this.letterSpacing=letterspacing;if(this.handle){nexacro.__setElementHandleLetterSpacingObject(this.handle,letterspacing);}};_pElement.setElementPointerEvents=function(pointerevent){if(this.pointerEvent!=pointerevent){this.pointerEvent=pointerevent;var handle=this.handle;if(handle){nexacro.__setElementHandlePointerEvents(handle,pointerevent);}}};_pElement._getWindow=function(){return this.linkedcontrol._getWindow();};_pElement._getComputedStyle=function(){};_pElement._getComputedStyleValue=function(prop){if(this.handle&&prop){return nexacro.__getElementHandleStyleValue(this.handle,prop);}};_pElement._getComputedStyleSubValue=function(prop,subprop){if(this.handle&&prop&&subprop){return nexacro.__getElementHandleStyleSubValue(this.handle,prop,subprop);}};_pElement._getComputedStyleWithCallback=function(prop,target_win_handle,target_node_hanlde){if(this.handle&&prop){return nexacro.__getElementHandleStyleValueWithCallback(this.handle,prop,target_win_handle,target_node_hanlde);}};_pElement._getComputedStyleBackgroundColor=nexacro._emptyFn;_pElement.setElementAccessibilityRole=nexacro._emptyFn;_pElement.setElementAccessibilityLabel=nexacro._emptyFn;_pElement.getElementCaretPos=nexacro._emptyFn;_pElement._getPositionInWindow=function(){return nexacro._getElementXYInWindow(this.handle);};_pElement._getOverflowScrollSize=function(){return 0;};nexacro.TextBoxElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"text");};var _pTextBoxElement=nexacro._createPrototype(nexacro.Element,nexacro.TextBoxElement);nexacro.TextBoxElement.prototype=_pTextBoxElement;_pTextBoxElement._type_name="TextBoxElement";_pTextBoxElement.text="";_pTextBoxElement._use_decoration=false;_pTextBoxElement.padding=null;_pTextBoxElement.textAlign=null;_pTextBoxElement.verticalAlign=null;_pTextBoxElement.wordWrap=null;_pTextBoxElement._wordwrap_info=null;_pTextBoxElement.typeselector="nexacontentsbox";_pTextBoxElement._use_newline=true;_pTextBoxElement.on_apply_imeSet=nexacro._emptyFn;_pTextBoxElement.on_apply_force_imeSet=nexacro._emptyFn;_pTextBoxElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createTextElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name);nexacro.__initTextElementText(handle,this.text,this._use_newline,this._use_decoration,this.wordWrap||this._wordwrap_info);this._refreshCommonStyleProps(handle);if(this.textAlign){this._setElementHandleTextAlign(handle,this.textAlign,this.rtl);}if(this.verticalAlign){nexacro.__setElementHandleVerticalAlign(handle,this.verticalAlign);}this.handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};_pTextBoxElement.setElementTextAlign=function(textalign){this.textAlign=textalign;var handle=this.handle;if(handle){this._setElementHandleTextAlign(handle,textalign,this.rtl);}};_pTextBoxElement.setElementVerticalAlign=function(verticalalign){this.verticalAlign=verticalalign;var handle=this.handle;if(handle){nexacro.__setElementHandleVerticalAlign(handle,verticalalign);}};_pTextBoxElement.setElementPadding=function(){};_pTextBoxElement.setElementText=function(text){if(this.text!=text||this._use_decoration==true){if(text==null){this.text="";}else{this.text=text;}this._use_decoration=false;var handle=this.handle;if(handle){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}};_pTextBoxElement.setElementDecorateText=function(text){if(this.text!=text||this._use_decoration==false){if(text==null){this.text="";}else{this.text=text;}this._use_decoration=true;var handle=this.handle;if(handle){nexacro.__setElementHandleDecorateText(handle,text);}}};_pTextBoxElement.setElementWordWrap=function(wordwrap){if(this.wordWrap!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this.wordWrap=wordwrap;var handle=this.handle;if(handle){nexacro.__setElementHandleWordwrapObject(handle,wordwrap);if(this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}}};_pTextBoxElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this._wordwrap_info=wordwrap;var handle=this.handle;if(handle){if(!this.wordWrap&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}}};_pTextBoxElement._getComputedStyle=function(prop,noflush){if(this.handle&&prop){if(!noflush){if(nexacro._Browser=="Runtime"){var parent=this;while(parent){if(parent.linkedcontrol){nexacro._flushCommand(parent._getWindow());break;}parent=parent.parent;}}}var computedstyle=nexacro.__getElementHandleStyleValue(this.handle,prop);return computedstyle;}};_pTextBoxElement._getComputedStyleAlign=function(noflush){var align={textAlign:"",verticalAlign:""};align.textAlign=this._getComputedStyle("text-align",noflush);align.verticalAlign=this._getComputedStyle("vertical-align",noflush);return align;};nexacro.IconElement=function(parent_elem,id,fiticonsize){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"icon");this._fiticonsize=fiticonsize;};var _pIconElement=nexacro._createPrototype(nexacro.Element,nexacro.IconElement);nexacro.IconElement.prototype=_pIconElement;_pIconElement._type_name="IconElement";_pIconElement.typeselector="nexacontentsbox";_pIconElement.padding=null;_pIconElement.textAlign=null;_pIconElement.verticalAlign=null;_pIconElement.icon="";_pIconElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createIconTextElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name);var icon=this.icon;if(icon&&icon.value!="none"){if(this._fiticonsize){nexacro.__initElementIcon(handle,icon.value,icon._sysurl,Math.min(this.height,this.width));}else{nexacro.__initElementIcon(handle,icon.value,icon._sysurl);}}this._refreshCommonStyleProps(handle);if(this.textAlign){this._setElementHandleTextAlign(handle,this.textAlign,this.rtl);}if(this.verticalAlign){nexacro.__setElementHandleVerticalAlign(handle,this.verticalAlign);}this.handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};_pIconElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var handle=this.handle;if(handle){this._setElementHandleTextAlign(handle,textalign||"center",this.rtl);}}};_pIconElement.setElementVerticalAlign=function(verticalalign){if(this.verticalAlign!=verticalalign){this.verticalAlign=verticalalign;var handle=this.handle;if(handle){nexacro.__setElementHandleVerticalAlign(handle,verticalalign||"middle");}}};_pIconElement.setElementIcon=function(icon){if(this.icon!=icon){this.icon=icon;var handle=this.handle;if(handle){if(icon&&icon.value!="none"){if(this._fiticonsize){nexacro.__setElementHandleIconObject(handle,icon,(Math.min(this.height,this.width)||16));}else{nexacro.__setElementHandleIconObject(handle,icon);}}else{nexacro.__setElementHandleIconObject(handle,"");}}}};nexacro.IconTextElement=function(parent_elem,id,fiticonsize){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"contents");this._fiticonsize=fiticonsize;};var _pIconTextElement=nexacro._createPrototype(nexacro.Element,nexacro.IconTextElement);nexacro.IconTextElement.prototype=_pIconTextElement;_pIconTextElement._type_name="IconTextElement";_pIconTextElement.typeselector="nexacontentsbox";_pIconTextElement.text="";_pIconTextElement.icon=null;_pIconTextElement.iconPos="left";_pIconTextElement.padding=null;_pIconTextElement.textAlign=null;_pIconTextElement.verticalAlign=null;_pIconTextElement.textwidth=0;_pIconTextElement.wordWrap=null;_pIconTextElement._wordwrap_info=null;_pIconTextElement._use_decoration=false;_pIconTextElement._use_newline=true;_pIconTextElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createIconTextElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName());var textPadding=this.textPadding;if(textPadding){if(this.rtl){nexacro.__initIconTextElementTextPadding(handle,textPadding.top,textPadding.left,textPadding.bottom,textPadding.right);}else{nexacro.__initIconTextElementTextPadding(handle,textPadding.top,textPadding.right,textPadding.bottom,textPadding.left);}}nexacro.__initIconTextElementText(handle,this.text,this._use_newline,this._use_decoration,this.wordWrap||this._wordwrap_info);var icon=this.icon;if(icon){if(this._fiticonsize){nexacro.__initElementIcon(handle,icon.value,icon._sysurl,Math.min(this.height,this.width));}else{nexacro.__initElementIcon(handle,icon.value,icon._sysurl);}}this._refreshCommonStyleProps(handle);{if(this.rtl){var iconpos=((this.iconPos=="left")?"right":(this.iconPos=="right"?"left":this.iconPos));nexacro.__initIconTextElementIconPos(handle,iconpos);}else{nexacro.__initIconTextElementIconPos(handle,this.iconPos);}}if(this.textAlign){this._setElementHandleTextAlign(handle,this.textAlign,this.rtl);}if(this.verticalAlign){nexacro.__setElementHandleVerticalAlign(handle,this.verticalAlign);}if(this.textwidth){nexacro.__setElementHandleTextWidth(handle,this.textwidth);}this.handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};_pIconTextElement.setElementTextAlign=function(textalign){if(this.textAlign!=textalign){this.textAlign=textalign;var handle=this.handle;if(handle){this._setElementHandleTextAlign(handle,textalign,this.rtl);}}};_pIconTextElement.setElementVerticalAlign=function(verticalalign){if(this.verticalAlign!=verticalalign){this.verticalAlign=verticalalign;var handle=this.handle;if(handle){nexacro.__setElementHandleVerticalAlign(handle,verticalalign);}}};_pIconTextElement.setElementTextPadding=function(textpadding){if(this.textPadding!=textpadding){this.textPadding=textpadding;var handle=this.handle;if(handle){nexacro.__setElementHandleTextPaddingObject(handle,textpadding);}}};_pIconTextElement.setElementTextWidth=function(textwidth){if(this.textwidth!=textwidth){this.textwidth=textwidth;var handle=this.handle;if(handle){if(textwidth){nexacro.__setElementHandleTextWidth(handle,textwidth);}}}};_pIconTextElement.setElementText=function(text){if(this.text!==text||this._use_decoration==true){this.text=text;this._use_decoration=false;var handle=this.handle;if(handle){nexacro.__setElementHandleText(handle,text,this._use_newline,this.wordWrap||this._wordwrap_info);}}};_pIconTextElement.setElementDecorateText=function(text){if(this.text!=text||this._use_decoration==false){this.text=text;this._use_decoration=true;var handle=this.handle;if(handle){nexacro.__setElementHandleDecorateText(handle,text);}}};_pIconTextElement.setElementIcon=function(icon){if(this.icon!=icon){this.icon=icon;var handle=this.handle;if(handle){if(this._fiticonsize){nexacro.__setElementHandleIconObject(handle,icon,(Math.min(this.height,this.width)||16));}else{nexacro.__setElementHandleIconObject(handle,icon);}}}};_pIconTextElement.setElementIconPos=function(iconpos){if(this.iconPos!=iconpos){this.iconPos=iconpos;var handle=this.handle;if(handle){if(this.rtl){iconpos=((iconpos=="left")?"right":(iconpos=="right"?"left":iconpos));}nexacro.__setElementHandleIconPos(handle,iconpos);}}};_pIconTextElement.setElementWordWrap=function(wordwrap){if(this.wordWrap!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this.wordWrap=wordwrap;var handle=this.handle;if(handle){nexacro.__setElementHandleWordwrapObject(handle,wordwrap);if(this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}}};_pIconTextElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this._wordwrap_info=wordwrap;var handle=this.handle;if(handle){if(!this.wordWrap&&this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}}};nexacro.ImageElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"image");};var _pImageElement=nexacro._createPrototype(nexacro.Element,nexacro.ImageElement);nexacro.ImageElement.prototype=_pImageElement;_pImageElement._type_name="ImageElement";_pImageElement.typeselector="nexaimagebox";_pImageElement.image=null;_pImageElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createImageElementHandle(this,win_handle,left,this.top,this.width,this.height,"","",false,true);if(!this.visible){nexacro.__setElementHandleVisible(handle,false);}if(this.image){nexacro.__setElementHandleImageUrlObject(handle,this.image);}this.handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};_pImageElement.setElementImage=function(image){if(this.image!=image){this.image=image;var handle=this.handle;if(handle&&image){nexacro.__setElementHandleImageUrlObject(handle,image);}else{nexacro.__setElementHandleImageUrlObject(handle,null);}}};_pImageElement.getImageCount=function(){var handle=this.handle;if(handle){return nexacro.__getImageElementHandleImageCount(handle);}};_pImageElement.setImageIndex=function(nIndex){var handle=this.handle;if(handle){nexacro.__setImageElementHandleImageIndex(handle,nIndex);}};nexacro.InputElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"input");this._composer=new nexacro._CompositionState();this._imelocale=new nexacro._ImeLocale();};var _pInputElement=nexacro._createPrototype(nexacro.Element,nexacro.InputElement);nexacro.InputElement.prototype=_pInputElement;_pInputElement._type_name="InputElement";_pInputElement.typeselector="nexainput";_pInputElement.textAlign=null;_pInputElement.padding=null;_pInputElement.caretcolor=null;_pInputElement.selectcolor=null;_pInputElement.selectbackground=null;_pInputElement.compositecolor=null;_pInputElement.enable=true;_pInputElement.useime="global";_pInputElement.imemode="auto";_pInputElement.readonly=false;_pInputElement.maxlength=0;_pInputElement.autoskip=false;_pInputElement.autoselect=false;_pInputElement.value=null;_pInputElement.defaultvalue="";_pInputElement.displaynulltext="";_pInputElement.displayinvalidtext=undefined;_pInputElement.tabindentsize=4;_pInputElement.usesoftkeyboard=true;_pInputElement.inputtype="text";_pInputElement.usemultiline=false;_pInputElement._is_focused=false;_pInputElement._is_sys_focused=false;_pInputElement._is_input_element=true;_pInputElement._is_invalid_value=false;_pInputElement._zerolength_value=undefined;_pInputElement._input_text="";_pInputElement._checkmax_editing_only=true;_pInputElement._last_selection_range=null;_pInputElement._skip_check_imelocale=false;_pInputElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=this.handle=nexacro.__createInputElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,true,false);if(this.rtl!==undefined){nexacro.__setElementHandleRtlDirection(handle,this.rtl);}if(!this.visible){nexacro.__setElementHandleVisible(handle,false);}if(!this.enable){nexacro.__setElementHandleEnable(handle,false);}if(this.readonly){nexacro.__setElementHandleReadOnly(handle,true);}if(this.padding){nexacro.__setElementHandlePaddingObject(handle,this.padding);}if(this.textAlign){this._setElementHandleTextAlign(handle,this.textAlign,this.rtl);}if(this.caretcolor){nexacro.__setInputElementHandleCaretColor(handle,this.caretcolor);}if(this.selectcolor){nexacro.__setInputElementHandleSelectColor(handle,this.selectcolor);}if(this.selectbackground){nexacro.__setInputElementHandleSelectBackgroundColor(handle,this.selectbackground);}if(this.compositecolor){nexacro.__setInputElementHandleCompositeColor(handle,this.compositecolor);}if(this.textDecoration){nexacro.__setElementHandleTextDecorationObject(handle,this.textDecoration);}if(this.inputtype=="password"){nexacro.__setInputElementHandleUsePassword(handle,true);nexacro.__setInputElementHandleSetIme(handle,"none","none");}else{nexacro.__setInputElementHandleUsePassword(handle,false);nexacro.__setInputElementHandleSetIme(handle,this.useime,this.imemode);}if(this.inputtype){nexacro.__setInputElementHandleInputType(handle,this.inputtype);}if(this.maxlength){nexacro.__setInputElementHandleMaxLength(handle,0);}if(this.value||this.value===""){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){nexacro.__setElementHandleValue(handle,this.displayinvalidtext);nexacro.__setInputElementHandleInputType(handle,"text");}else{nexacro.__setElementHandleValue(handle,this.value);}}else if(this.displaynulltext){nexacro.__setElementHandleValue(handle,this.displaynulltext,true);}else if(this.defaultvalue){this.setElementValue(this.value);}nexacro.__appendElementHandle(owner_elem.handle,handle);this._bindSysEvent();}};_pInputElement.destroy=function(){this._unbindSysEvent();return nexacro.Element.prototype.destroy.call(this);};_pInputElement.setElementTextAlign=function(textalign){this.textAlign=textalign;var handle=this.handle;if(handle){this._setElementHandleTextAlign(handle,textalign,this.rtl);}};_pInputElement.setElementPadding=function(padding){this.padding=padding;var handle=this.handle;if(handle){nexacro.__setElementHandlePaddingObject(handle,padding);}};_pInputElement.setElementCaretColor=function(color){this.caretcolor=color;var handle=this.handle;if(handle){nexacro.__setInputElementHandleCaretColor(handle,color);}};_pInputElement.setElementSelectColor=function(color){this.selectcolor=color;var handle=this.handle;if(handle){nexacro.__setInputElementHandleSelectColor(handle,color);}};_pInputElement.setElementSelectBackgroundColor=function(color){this.selectbackground=color;var handle=this.handle;if(handle){nexacro.__setInputElementHandleSelectBackgroundColor(handle,color);}};_pInputElement.setElementCompositeColor=function(color){this.compositecolor=color;var handle=this.handle;if(handle){nexacro.__setInputElementHandleCompositeColor(handle,color);}};_pInputElement.setElementTabindentSize=function(indent){this.tabindentsize=indent;var handle=this.handle;if(handle){nexacro.__setElementHandleTabIndentSize(handle,indent);}};_pInputElement.setElementEnable=function(enable){if(this.enable!=enable){this.enable=enable;var handle=this.handle;if(handle){nexacro.__setElementHandleEnable(handle,enable);}}};_pInputElement.setElementReadonly=function(readonly){if(this.readonly!=readonly){this.readonly=readonly;var handle=this.handle;if(handle){nexacro.__setElementHandleReadOnly(handle,readonly);}}};_pInputElement.setElementAutoSkip=function(v){if(this.autoskip!=v){this.autoskip=v;}};_pInputElement.setElementAutoSelect=function(v){if(this.autoselect!=v){this.autoselect=v;}};_pInputElement.setElementMaxLength=function(length){if(this.maxlength!=length){this.maxlength=length;var handle=this.handle;if(handle){nexacro.__setInputElementHandleMaxLength(handle,0);var text=this.getElementText();if(this._is_focused||!this._checkmax_editing_only){if(this.maxlength>0&&text.length>this.maxlength){text=text.substring(0,this.maxlength);this._updateInputValue(text);}}}}};_pInputElement.setElementUseSoftKeyboard=function(usesoftkeyboard,bforce){if(this.usesoftkeyboard!=usesoftkeyboard||bforce){this.usesoftkeyboard=usesoftkeyboard;var handle=this.handle;if(handle){nexacro.__setInputElementHandleUseSoftKeyboard(handle,usesoftkeyboard);}}};_pInputElement.setElementUseIme=function(useime){if(this.useime!=useime){this.useime=useime;var handle=this.handle;if(handle){nexacro.__setInputElementHandleUseIme(handle,useime);}}};_pInputElement.setElementImeMode=function(imemode){if(this.imemode!=imemode){this.imemode=imemode;var handle=this.handle;if(handle){nexacro.__setInputElementHandleImeMode(handle,imemode);}}};_pInputElement.setElementDisplayNullText=function(text){if(this.displaynulltext!=text){this.displaynulltext=text;var handle=this.handle;var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(handle&&owner_elem&&owner_elem.handle){if(nexacro._isNull(this.value)&&!this._is_focused){nexacro.__setElementHandleValue(handle,this.displaynulltext,true);this._input_text=this.displaynulltext;}}}};_pInputElement.setElementDisplayInvalidText=function(v){if(this.displayinvalidtext==v){return;}this.displayinvalidtext=v;var input_handle=this.handle;if(input_handle){if(this._is_invalid_value){this._updateInputValue(this.displayinvalidtext);}}};_pInputElement.setElementDefaultValue=function(value){if(value!=this.defaultvalue){this.defaultvalue=value;}};_pInputElement.setElementValue=function(value,bInvalidValue){var text=(nexacro._isNull(value)?this.defaultvalue:(value+""));if(!nexacro._isNull(bInvalidValue)){this._is_invalid_value=(bInvalidValue===true)?true:false;}if(!bInvalidValue&&(this.value==value)&&(this._getInputValue()==text)){return;}this.value=value;this._input_text=text;var handle=this.handle;var comp=this.parent_elem.linkedcontrol;if(handle){if(bInvalidValue){if(!nexacro._isNull(this.displayinvalidtext)&&!this._is_focused){this._updateInputValue(this.displayinvalidtext);}else{this._updateInputValue(text);}}else{if(this.value||this.value===""){if(!comp._is_killfocusing&&(this._is_focused||!this._checkmax_editing_only)){if(this.maxlength>0&&text.length>this.maxlength){text=text.substring(0,this.maxlength);}}if(this._is_focused&&this.value===""){this._updateInputValue(text,false,text.length);}else{this._setElementLastSelectionRange([text.length,text.length]);this._updateInputValue(text);}}else if(!this._is_focused&&this.displaynulltext!=""){nexacro.__setElementHandleValue(handle,this.displaynulltext,true);this._input_text=this.displaynulltext;}else{this._updateInputValue(text);}}}};_pInputElement.replaceElementText=function(value,begin,end,bselect){var input_value=this._getInputValue();if(begin<0){return;}if(end<0){end=input_value.length;}if(begin>end){end=begin;}value=(value?value:"");var caretpos=begin+value.length;var text=input_value.substring(0,begin)+value+input_value.substring(end);if(bselect){this._updateInputValue(text,!this._processing_oninput,begin,caretpos);}else{this._updateInputValue(text,!this._processing_oninput,caretpos);}};_pInputElement.updateElementText=function(value,caretpos){value=(value?value:"");this._updateInputValue(value,!this._processing_oninput,caretpos);};_pInputElement._updateElementValue=function(value){if(this.value==value){return;}if(!value){value=this._zerolength_value;}this.value=value;};_pInputElement._updateInputValue=function(value,fireevent,selectionStart,selectionEnd){var handle=this.handle;if(handle){if(this._input_text==value){nexacro.__setElementHandleValue(handle,"");}this._input_text=value;nexacro.__setElementHandleValue(handle,value);if(selectionStart!=null&&selectionStart> -1){if(selectionEnd== -1){selectionEnd=value.length;}if(selectionEnd==null||selectionEnd<selectionStart){selectionEnd=selectionStart;}nexacro.__setInputElementHandleSetSelect(handle,selectionStart,selectionStart,false);this._setElementLastSelectionRange([selectionStart,selectionEnd]);}if(fireevent){this._on_sys_keyinput_forward();}}};_pInputElement.setElementInputType=function(type){if(type=="number"||type=="tel"){type="number";}else if(type=="date"){type="date";}else if(type!="password"){type="text";}if(this.inputtype!=type){this.inputtype=type;var handle=this.handle;if(handle){nexacro.__setInputElementHandleInputType(handle,this.inputtype);if(type=="password"){nexacro.__setInputElementHandleSetIme(handle,"none","none");}else{nexacro.__setInputElementHandleSetIme(handle,this.useime,this.imemode);}nexacro.__setInputElementHandleUsePassword(handle,type=="password");}}};_pInputElement._applyElementFocus=nexacro._emptyFn;_pInputElement._applyMaxlength=function(){if(this._checkmax_editing_only&&this.maxlength>0){var text=(nexacro._isNull(this.value)?this.defaultvalue:(this.value+""));if(text.length>this.maxlength){text=text.substring(0,this.maxlength);this._updateInputValue(text);}}};_pInputElement.setElementFocus=function(trigger_type){var handle=this.handle;if(handle){if(!this._is_focused){this._is_focused=true;this._applyMaxlength();}if(nexacro._isNull(this.value)||this._is_invalid_value){var value=this._getInputValue();if(value!=this.defaultvalue){nexacro.__setElementHandleValue(handle,this.defaultvalue);}}if(!this._is_sys_focused){if(trigger_type!="lbutton"){nexacro.__setElementHandleFocus(handle);}}this._setElementLastSelectionRange();nexacro.__setLastFocusedElement(this);}};_pInputElement.setElementBlur=function(){var handle=this.handle;if(handle&&this._is_focused){if(this._is_focused){this._setElementLastSelectionRange(this.getElementSelectionRange());}if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){if(!nexacro._enableaccessibility){nexacro.__setInputElementHandleSetSelect(handle,0,0,false);}}else{nexacro.__setInputElementHandleSetSelect(handle,0,0,false);}if(this._checkmax_editing_only&&this.maxlength>0){var text=(nexacro._isNull(this.value)?this.defaultvalue:(this.value+""));var value=this._getInputValue();if(text!=value){this._updateInputValue(value);}}if(this._is_focused){this._is_focused=false;if(this._is_sys_focused){nexacro.__setInputElementHandleBlur(handle);}}if(this.value==null&&this.displaynulltext!=""){nexacro.__setElementHandleValue(handle,this.displaynulltext,true);}else{if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){nexacro.__setElementHandleValue(handle,this.displayinvalidtext);}}}};_pInputElement.setElementSetSelect=function(start,end){var handle=this.handle;if(handle){if(!this._is_focused){this._setElementLastSelectionRange([start,end]);return;}nexacro.__setInputElementHandleSetSelect(handle,start,end,false);}};_pInputElement._setElementLastSelectionRange=function(range){if(range){this._last_selection_range=range;}else{this._last_selection_range=null;}};_pInputElement.getElementCaretPos=function(){var handle=this.handle;if(handle&&this._is_focused){var pos=nexacro.__getInputElementHandleCaretPos(handle);if(pos){return {begin:pos[0],end:pos[1]};}}return  -1;};_pInputElement.getElementSelectionRange=function(){var handle=this.handle;if(handle){if(!this._is_focused&&this._last_selection_range){return this._last_selection_range;}return nexacro.__getInputElementHandleSelectionRange(handle);}return [0,0];};_pInputElement.getElementText=function(){var handle=this.handle;if(handle){return this._getInputValue();}return this._input_text;};_pInputElement._getInputValue=function(){var handle=this.handle;if(handle){if(this._is_focused||(!this.displaynulltext&&!this._is_invalid_value)){return nexacro.__getElementHandleValue(handle);}else{return this._input_text;}}return "";};_pInputElement.getElementValue=function(){return this.value;};_pInputElement.getCompositionStatus=function(){return (this._composer?this._composer.status:nexacro._CompositionState.NONE);};_pInputElement.isComposing=function(){return (this._composer?this._composer.isComposing():false);};_pInputElement.setCompositionComplete_process=function(end_pos,is_composing){var pos=this.getElementCaretPos();var value=this._getInputValue();var _is_composing=this._composer.isComposing();if(_is_composing){this._composer.setStatus(nexacro._CompositionState.END,pos.end);this._updateInputValue(value,!this._processing_oninput);}return true;};_pInputElement.setCompositionComplete=function(end_pos,is_composing){var handle=this.handle;if(handle){this.setCompositionComplete_process.call(this,end_pos,is_composing);var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}};_pInputElement.setCompositionCancel_process=function(end_pos,is_composing){var value=this._getInputValue();var _is_composing=this._composer.isComposing();if(_is_composing){var offset=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,offset.begin);this._updateInputValue(value.substring(0,offset.begin),!this._processing_oninput);}return true;};_pInputElement.setCompositionCancel=function(end_pos,is_composing){var handle=this.handle;if(handle){this.setCompositionCancel_process.call(this,end_pos,is_composing);var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.NONE,pos.end);}};_pInputElement.clearComposition=function(){var handle=this.handle;if(handle){var is_composing=this._composer.isComposing();if(is_composing){this.setCompositionCancel();}else{nexacro.__clearInputElementHandleCompositeChar(handle);}}};_pInputElement.setInputProcess=function(v){this._processing_oninput=v;};_pInputElement.getInputProcess=function(){return this._processing_oninput;};_pInputElement.setElementAccessibilityRole=nexacro._emptyFn;_pInputElement._setElementInputRole=nexacro._emptyFn;_pInputElement._wantAccessibilityAdditionalLabel=nexacro._emptyFn;_pInputElement._checkMaxLength=function(value,caretpos,fix_composition){var maxlength=this.maxlength;if(maxlength<=0&&caretpos<=0){return;}var vlength=value.length;var _is_composing=this._composer.isComposing();if(maxlength<vlength){var _has_candidate_window;if(_is_composing&&!fix_composition){_has_candidate_window=this._composer.isHasCandiateWindow(value.charAt(caretpos-1));}if(fix_composition||!_is_composing||!_has_candidate_window){return {"ismax":true,"pos":(caretpos-(vlength-maxlength))};}else{var offset=this._composer.getOffset();if(maxlength==(vlength-(offset.end-offset.begin))){return {"ismax":true,"pos":(caretpos-(vlength-maxlength))};}}}else{return {"ismax":(!_is_composing&&maxlength==vlength),"pos":caretpos};}return;};_pInputElement._go_next_focus=function(){var handle=this.handle;var comp=this.parent_elem.linkedcontrol;if(handle&&comp){var form=comp._getForm();var newfocus_comp=form._searchNextTabFocus(form._last_focused);comp=newfocus_comp[0];if(newfocus_comp&&comp){if(comp instanceof nexacro.Form&&comp._last_focused){var win=form._getWindow();win._removeFromCurrentFocusPath(comp._last_focused);}comp._setFocus(true,0,true);var bEdit=(comp instanceof nexacro.Edit||comp instanceof nexacro.MaskEdit||comp instanceof nexacro.TextArea);if(bEdit&&!comp.autoselect){comp.setCaretPos(0);}}}};_pInputElement._bindSysEvent=function(){var input=this.handle;nexacro._observeInputEvent(input,"keydown","onkeydown",this._on_sys_keydown_forward);nexacro._observeInputEvent(input,"keyup","onkeyup",this._on_sys_keyup_forward);nexacro._observeInputEvent(input,"keypress","onkeypress",this._on_sys_keypress_forward);nexacro._observeInputEvent(input,"input","oninput",this._on_sys_keyinput_forward);nexacro._observeInputEvent(input,"compositionstart","oncompositionstart",this._on_sys_compositionstart);nexacro._observeInputEvent(input,"compositionupdate","oncompositionupdate",this._on_sys_compositionupdate);nexacro._observeInputEvent(input,"compositionend","oncompositionend",this._on_sys_compositionend);nexacro._observeInputEvent(input,"cut","oncut",this._on_sys_cut);nexacro._observeInputEvent(input,"paste","onpaste",this._on_sys_paste);nexacro._observeInputEvent(input,"contextmenu","oncontextmenu",this._on_sys_contextmenu);nexacro._observeInputEvent(input,"lbuttondown","onlbuttondown",this._on_sys_lbuttondown_forward);nexacro._observeInputEvent(input,"lbuttonup","onlbuttonup",this._on_sys_lbuttonup_forward);nexacro._observeInputEvent(input,"rbuttondown","onrbuttondown",this._on_sys_rbuttondown_forward);nexacro._observeInputEvent(input,"rbuttonup","onrbuttonup",this._on_sys_rbuttonup_forward);nexacro._observeInputEvent(input,"mousemove","onmousemove",this._on_sys_mousemove_forward);if(nexacro._SupportTouchEvent){nexacro._observeInputEvent(input,"touchstart","ontouchstart",this._on_sys_lbuttondown_forward);nexacro._observeInputEvent(input,"touchend","ontouchend",this._on_sys_lbuttonup_forward);nexacro._observeInputEvent(input,"touchmove","ontouchmove",this._on_sys_mousemove_forward);}nexacro._observeInputEvent(input,"focus","onfocus",this._on_sys_focus);nexacro._observeInputEvent(input,"blur","onblur",this._on_sys_blur);};_pInputElement._unbindSysEvent=function(){var input=this.handle;if(input){nexacro._stopInputObserving(input,"keydown","onkeydown",this._on_sys_keydown_forward);nexacro._stopInputObserving(input,"keyup","onkeyup",this._on_sys_keyup_forward);nexacro._stopInputObserving(input,"keypress","onkeypress",this._on_sys_keypress_forward);nexacro._stopInputObserving(input,"input","oninput",this._on_sys_keyinput_forward);nexacro._stopInputObserving(input,"compositionstart","oncompositionstart",this._on_sys_compositionstart);nexacro._stopInputObserving(input,"compositionupdate","oncompositionupdate",this._on_sys_compositionupdate);nexacro._stopInputObserving(input,"compositionend","oncompositionend",this._on_sys_compositionend);nexacro._stopInputObserving(input,"cut","oncut",this._on_sys_cut);nexacro._stopInputObserving(input,"paste","onpaste",this._on_sys_paste);nexacro._stopInputObserving(input,"contextmenu","oncontextmenu",this._on_sys_contextmenu);nexacro._stopInputObserving(input,"lbuttondown","onlbuttondown",this._on_sys_lbuttondown_forward);nexacro._stopInputObserving(input,"lbuttonup","onlbuttonup",this._on_sys_lbuttonup_forward);nexacro._stopInputObserving(input,"rbuttondown","onrbuttondown",this._on_sys_rbuttondown_forward);nexacro._stopInputObserving(input,"rbuttonup","onrbuttonup",this._on_sys_rbuttonup_forward);nexacro._stopInputObserving(input,"mousemove","onmousemove",this._on_sys_mousemove_forward);if(nexacro._SupportTouchEvent){nexacro._stopInputObserving(input,"touchstart","ontouchstart",this._on_sys_lbuttondown_forward);nexacro._stopInputObserving(input,"touchend","ontouchend",this._on_sys_lbuttonup_forward);nexacro._stopInputObserving(input,"touchmove","ontouchmove",this._on_sys_mousemove_forward);}nexacro._stopInputObserving(input,"focus","onfocus",this._on_sys_focus);nexacro._stopInputObserving(input,"blur","onblur",this._on_sys_blur);}};_pInputElement._on_sys_keydown_forward=function(keycode,altkey,ctrlkey,shiftkey){var ret,comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();nexacro._syshandler_onkeydown_forward(_win,this,keycode,altkey,ctrlkey,shiftkey);if(this._event_stop){this.clearComposition();return false;}}ret=this._on_sys_keydown(keycode,altkey,ctrlkey,shiftkey);if(ret===false||this._event_stop){this._event_stop=false;return false;}return true;};_pInputElement.on_sys_keydown_before_process=function(keycode){var comp=this.parent_elem.linkedcontrol;var _win=comp._getWindow();var capture_comp;if(comp){capture_comp=_win._getCaptureComp(false,true,comp);}if(capture_comp&&capture_comp!=comp){this.stopSysEvent();return false;}var pos=this.getElementCaretPos();this._composer.setDelayStatus(undefined);if(keycode!=nexacro.KeyCode_ImeInput){if(!this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.NONE,pos.begin);}}return true;};_pInputElement.on_sys_keydown_specialkey_process=function(keycode){return true;};_pInputElement.on_sys_keydown_process=function(keycode){return true;};_pInputElement._on_sys_keydown=function(keycode){var handle=this.handle;if(handle){if(!this.readonly){if(!this.on_sys_keydown_before_process.call(this,keycode)){return;}if(!this.on_sys_keydown_specialkey_process.call(this,keycode)){return;}this.on_sys_keydown_process.call(this,keycode);}}};_pInputElement._on_sys_keyup_forward=function(keycode,altkey,ctrlkey,shiftkey){var ret=this._on_sys_keyup(keycode,altkey,ctrlkey,shiftkey);if(ret===false||this._event_stop){this._event_stop=false;return false;}var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();nexacro._syshandler_onkeyup_forward(_win,this,keycode,altkey,ctrlkey,shiftkey);if(this._event_stop){this._event_stop=false;return false;}}return true;};_pInputElement.on_sys_keyup_before_process=function(keycode,altkey,ctrlkey){return true;};_pInputElement.on_sys_keyup_specialkey_process=function(keycode,altkey,ctrlkey){var pos=this.getElementCaretPos();var is_composing=this._composer.isComposing();if(is_composing){if(keycode==nexacro.Event.KEY_RETURN||keycode==nexacro.Event.KEY_ESC||(ctrlkey&&keycode==77)||(ctrlkey&&keycode==90)){this._composer.setStatus(nexacro._CompositionState.END,pos.end);var value=this._getInputValue();this._updateInputValue(value,true);}}return true;};_pInputElement.on_sys_keyup_process=function(keycode,altkey,ctrlkey){return true;};_pInputElement._on_sys_keyup=function(keycode,altkey,ctrlkey){var handle=this.handle;if(handle){if(!this.readonly){if(this.on_sys_keyup_before_process.call(this,keycode,altkey,ctrlkey)){return;}if(this.on_sys_keyup_specialkey_process.call(this,keycode,altkey,ctrlkey)){return;}this.on_sys_keyup_process.call(this,keycode,altkey,ctrlkey);}}};_pInputElement._on_sys_keypress_forward=function(keycode,charcode,altkey,ctrlkey,shiftkey){var ret=this._on_sys_keypress(keycode,charcode,altkey,ctrlkey,shiftkey);if(ret===false||this._event_stop){this._event_stop=false;return false;}var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();ret=nexacro._syshandler_onkeypress_forward(_win,this,keycode,charcode,altkey,ctrlkey,shiftkey);if(this._event_stop){this._event_stop=false;return false;}}return ret;};_pInputElement.on_sys_keypress_before_process=function(keycode,charcode,altkey,ctrlkey,shiftkey){if(nexacro._OS=="iOS"){return false;}var pThis=this;var comp=pThis.parent_elem.linkedcontrol;var _win=comp._getWindow();var capture_comp;if(comp){capture_comp=_win._getCaptureComp(false,true,comp);}if(capture_comp&&capture_comp!=comp){this.stopSysEvent();return false;}return true;};_pInputElement.on_sys_keypress_specialkey_process=function(keycode,charcode,altkey,ctrlkey,shiftkey){return true;};_pInputElement.on_sys_keypress_process=function(keycode,charcode,altkey,ctrlkey,shiftkey){var pThis=this;if(!this._composer.isComposing()){var value=this._getInputValue();var _range=this.getElementSelectionRange();var comp=pThis.parent_elem.linkedcontrol;var _win=comp._getWindow();if(_win&&_win._keydown_element){if(_win._keydown_element.name!==pThis.name){return false;}}if(!ctrlkey&&!altkey&&charcode){var inputChar=String.fromCharCode(charcode);if(inputChar.length>0){if(pThis.autoskip&&pThis.maxlength>0&&value.length>=pThis.maxlength&&_range[0]==_range[1]){if(charcode!=nexacro.Event.KEY_RETURN){pThis._go_next_focus();}}}}if(this.maxlength>0){value=this._getInputValue();if(value.length>=this.maxlength&&_range[0]==_range[1]){this._event_stop=false;return false;}}}return true;};_pInputElement._on_sys_keypress=function(keycode,charcode,altkey,ctrlkey,shiftkey){var handle=this.handle;if(handle){if(!this.on_sys_keypress_before_process.call(this,keycode,altkey,ctrlkey)){return;}if(!this.on_sys_keypress_specialkey_process.call(this,keycode,altkey,ctrlkey)){return;}return this.on_sys_keypress_process.call(this,keycode,charcode,altkey,ctrlkey);}};_pInputElement._on_sys_keyinput_forward=function(){var handle=this.handle;if(handle){var ret;if(!this._processing_oninput){var value=this._getInputValue();var prev_status=this._composer._prev_status;var cur_status=this._composer.status;var comp=this.parent_elem.linkedcontrol;var _win=comp._getRootWindow();if(_win&&_win._keydown_element){if(_win._keydown_element!==this){var old_value=this.value;this._updateInputValue(old_value);return false;}}if(prev_status==cur_status){if(!this.value&&this.defaultvalue==value){this._paste_caret_pos=null;return;}}this._processing_oninput=true;ret=this._on_sys_keyinput();this._processing_oninput=false;this._paste_caret_pos=null;}return ret;}};_pInputElement.on_complete_composition_value_process=function(){return true;};_pInputElement.on_complete_composition_value=function(){return this.on_complete_composition_value_process.call(this);};_pInputElement.on_apply_imeSet=function(){var i,len;var pThis=this;var _locale=pThis._imelocale.getLocale();if(_locale&&nexacro._cache_inputelement_set[_locale]){for(var prop in nexacro._cache_inputelement_set[_locale]){pThis[prop]=nexacro._cache_inputelement_set[_locale][prop];}for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){if(!nexacro._cache_inputelement_set[_locale][nexacro._inputelement_user_override_func[i]]){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}}else{for(i=0,len=nexacro._inputelement_user_override_func.length;i<len;i++ ){pThis[nexacro._inputelement_user_override_func[i]]=nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[i]];}}var comp=pThis.parent_elem.linkedcontrol;if(comp.on_apply_imeSet){comp.on_apply_imeSet();}pThis.on_apply_ime_environment();};_pInputElement.on_apply_ime_environment_process=function(){return true;};_pInputElement.on_apply_ime_environment=function(){this.on_apply_ime_environment_process.call(this);};_pInputElement.on_apply_force_imeSet=function(){return true;};_pInputElement._updateLocale=function(){var pThis=this;var comp=pThis.parent_elem.linkedcontrol;if(comp instanceof nexacro.MaskEdit){pThis._skip_check_imelocale=true;pThis._imelocale.setLocale("");pThis.on_apply_imeSet();return;}var pos=pThis.getElementCaretPos();var value=pThis._getInputValue();pThis._imelocale.updateLocale(value.substr(pos.end-1,1));if(pThis._imelocale.IsChangeLocale()){pThis.on_apply_imeSet();}pThis.on_apply_force_imeSet.call(pThis);};_pInputElement._updateImeLocale=function(){var composing_status=this._composer.status;if(this._skip_check_imelocale){return true;}var value=this._getInputValue();var prev_status=this._composer._prev_status;{if(!this.isComposing()){}else{if(prev_status==nexacro._CompositionState.START&&composing_status==nexacro._CompositionState.COMPOSING){if(value){this._updateLocale();}}}}return true;};_pInputElement.on_sys_keyinput_before_process=function(){var comp=this.parent_elem.linkedcontrol;var _win=comp._getWindow();var capture_comp;if(comp){capture_comp=_win._getCaptureComp(false,true,comp);}if(capture_comp&&capture_comp!=comp){this.stopSysEvent();return false;}return true;};_pInputElement.on_sys_keyinput_process=function(){var composing_status=this._composer.status;var beginOffset,endOffset;var value=this._getInputValue();var pos=this.getElementCaretPos();var paste_pos=this._paste_caret_pos;var offsetCompose=this._composer.getOffset();if(composing_status==nexacro._CompositionState.NONE){beginOffset=paste_pos?paste_pos.begin:offsetCompose.begin;endOffset=paste_pos?paste_pos.end:pos.end;if(beginOffset>endOffset){beginOffset=endOffset;}}else{beginOffset=offsetCompose.begin;endOffset=offsetCompose.end;}var new_value="";var comp=this.parent_elem.linkedcontrol;if(comp._on_beforekeyinput){comp._on_beforekeyinput(this,value,composing_status,beginOffset,endOffset);if(this._event_stop){this._event_stop=false;return false;}new_value=this._getInputValue();pos=this.getElementCaretPos();}var ismax=false;if(this.maxlength>0){var caretpos=this._paste_caret_pos?this._paste_caret_pos.end-(value.length-new_value.length):pos.end;value=new_value;var check=this._checkMaxLength(value,caretpos);if(check){ismax=check.ismax;var newpos=check.pos;if(ismax){if(caretpos!=newpos){value=value.substring(0,newpos)+value.substring(caretpos);this.setCompositionCancel();this._updateInputValue(value);this.setElementSetSelect(newpos,newpos);value=this._getInputValue();pos=this.getElementCaretPos();}this.setCompositionComplete();}}}else{value=new_value;}if(this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);}var old_value=this.value;this._updateElementValue(value);var prev_status=this._composer._prev_status;var cur_status=this._composer.status;if(prev_status==cur_status&&this.value==old_value){if(comp._on_input_autoskip){comp._on_input_autoskip();}}this._composer._prev_status=cur_status;if(comp._on_keyinput){comp._on_keyinput(this);}if(this._event_stop){this._event_stop=false;return false;}if(ismax&&this.autoskip){if(this.value&&value.length>this.value.length){ismax=false;}if(ismax){this._go_next_focus();}}return true;};_pInputElement._on_sys_keyinput=function(){var handle=this.handle;if(handle){if(!this._updateImeLocale()){return;}if(!this.on_sys_keyinput_before_process.call(this)){return;}return this.on_sys_keyinput_process.call(this);}};_pInputElement._on_sys_cut=function(){};_pInputElement._on_sys_paste=function(){var handle=this.handle;if(handle){var pos=this.getElementCaretPos();var begin=pos.begin;var data=nexacro.__getClipboard("CF_UNICODETEXT");if(data){pos.end=begin+data.length;}this._paste_caret_pos=pos;}};_pInputElement._on_sys_contextmenu=function(){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();return nexacro._syshandler_oncontextmenu_forward(_win,this);}};_pInputElement.on_sys_compositionstart_process=function(){var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.START,pos.begin);return false;};_pInputElement._on_sys_compositionstart=function(){var handle=this.handle;if(handle){return this.on_sys_compositionstart_process.call(this);}else{return true;}};_pInputElement.on_sys_compositionupdate_process=function(){var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,pos.end);return;};_pInputElement._on_sys_compositionupdate=function(){var handle=this.handle;if(handle){nexacro.InputElement.prototype.on_sys_compositionupdate_process.call(this);this._updateLocale();return this.on_sys_compositionupdate_process.call(this);}else{return true;}};_pInputElement.on_sys_compositionend_process=function(evt){var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.END,pos.end);var value=this._getInputValue();var comp=this.parent.linkedcontrol;if(comp){comp._on_input_compositionend(value);}return;};_pInputElement._on_sys_compositionend=function(){var handle=this.handle;if(handle){return this.on_sys_compositionend_process.call(this);}else{return true;}};_pInputElement._on_sys_lbuttondown_forward=function(){return false;};_pInputElement._on_sys_lbuttonup_forward=function(){return false;};_pInputElement._on_sys_rbuttondown_forward=function(){return false;};_pInputElement._on_sys_rbuttonup_forward=function(button,altkey,ctrlkey,shiftkey,windowX,windowY,screenX,screenY){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();nexacro._syshandler_onrbuttonup_forward(_win,this,button,altkey,ctrlkey,shiftkey,windowX,windowY,screenX,screenY);return true;}return false;};_pInputElement._on_sys_mousemove_forward=function(button,altkey,ctrlkey,shiftkey,windowX,windowY,screenX,screenY){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var _win=comp._getWindow();return nexacro._syshandler_onmousemove_forward(_win,this,button,altkey,ctrlkey,shiftkey,windowX,windowY,screenX,screenY);}};_pInputElement._on_sys_focus=function(){var handle=this.handle;if(handle){var sel;this._is_sys_focused=true;if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){sel=this.getElementSelectionRange();if(sel[0]==sel[1]){this._setElementLastSelectionRange();}}if(this.autoselect){nexacro.__setInputElementHandleSetSelect(handle,0, -1,this.autoselect);}else if(this._last_selection_range){sel=this._last_selection_range;nexacro.__setInputElementHandleSetSelect(handle,sel[0],sel[1],false);}if(this.value==null){this._zerolength_value=undefined;}else{this._zerolength_value="";}var pos=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.NONE,pos.begin);}};_pInputElement._on_sys_blur=function(){var handle=this.handle;if(handle){this._is_sys_focused=false;this._event_stop=false;}};_pInputElement=null;nexacro.TextAreaElement=function(parent_elem,id){this.parent=parent_elem;this.parent_elem=parent_elem;this.id=id;this.name=this.parent_elem.name+":"+(id||"input");this._composer=new nexacro._CompositionState();this._imelocale=new nexacro._ImeLocale();};var _pTextAreaElement=new nexacro._createPrototype(nexacro.InputElement,nexacro.TextAreaElement);nexacro.TextAreaElement.prototype=_pTextAreaElement;_pTextAreaElement._type_name="TextAreaElement";_pTextAreaElement.typeselector="nexatextarea";_pTextAreaElement.usemultiline=true;_pTextAreaElement.create=function(win){var owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=this.handle=nexacro.__createInputElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,true,this.usemultiline);if(this.rtl!==undefined){nexacro.__setElementHandleRtlDirection(handle,this.rtl);}if(!this.visible){nexacro.__setElementHandleVisible(handle,false);}if(!this.enable){nexacro.__setElementHandleEnable(handle,false);}if(this.readonly){nexacro.__setElementHandleReadOnly(handle,true);}if(this.font){nexacro.__setElementHandleFontObject(handle,this.font);}if(this.color){nexacro.__setElementHandleColorObject(owner_elem.handle,this.color);}if(this.cursor){nexacro.__setElementHandleCursorObject(handle,this.cursor);}if(this.caretcolor){nexacro.__setInputElementHandleCaretColor(handle,this.caretcolor);}if(this.selectcolor){nexacro.__setInputElementHandleSelectColor(handle,this.selectcolor);}if(this.selectbackground){nexacro.__setInputElementHandleSelectBackgroundColor(handle,this.selectbackground);}if(this.compositecolor){nexacro.__setInputElementHandleCompositeColor(handle,this.compositecolor);}if(this.padding){nexacro.__setElementHandlePaddingObject(handle,this.padding);}if(this.textAlign){this._setElementHandleTextAlign(handle,this.textAlign,this.rtl);}if(this.textDecoration){nexacro.__setElementHandleTextDecorationObject(handle,this.textDecoration);}if(this.wordWrap!="none"){nexacro.__setElementHandleWordwrapObject(handle,this.wordWrap);}if(this.tabindentsize>4){nexacro.__setElementHandleTabIndentSize(handle,this.tabindentsize);}if(this.imemode){nexacro.__setInputElementHandleImeMode(handle,this.imemode);}if(this.maxlength){nexacro.__setInputElementHandleMaxLength(handle,0);}if(this.value){if(this._is_invalid_value&&!nexacro._isNull(this.displayinvalidtext)){nexacro.__setElementHandleValue(handle,this.displayinvalidtext);}else{nexacro.__setElementHandleValue(handle,this.value);}}else if(this.displaynulltext){nexacro.__setElementHandleValue(handle,this.displaynulltext,true);}nexacro.__setElementHandleVerticalAlign(handle,"top");nexacro.__appendElementHandle(owner_elem.dest_handle,handle);this._bindSysEvent();}};_pTextAreaElement.setElementCSSMapInfo=function(wordwrap){if(this._wordwrap_info!=wordwrap){this._wordwrap_info=wordwrap;}};_pTextAreaElement.setElementWordWrap=function(wordwrap){if(this.wordWrap!=wordwrap){var oldwordwrap=this.wordWrap||this._wordwrap_info;this.wordWrap=wordwrap;var handle=this.handle;if(handle){nexacro.__setElementHandleWordwrapObject(handle,wordwrap);if(this.text&&this._use_decoration==false&&oldwordwrap!=wordwrap){nexacro.__setElementHandleText(handle,this.text,this._use_newline,this.wordWrap||this._wordwrap_info);}}}};_pTextAreaElement.setElementValue=function(value){if(value){value=value.replace(/\r\n/g,"\n");}nexacro.InputElement.prototype.setElementValue.call(this,value);};_pTextAreaElement.updateElementText=function(value,caretpos){if(value){value=value.replace(/\r\n/g,"\n");}nexacro.InputElement.prototype.updateElementText.call(this,value,caretpos);};_pTextAreaElement._updateElementValue=function(value){if(value){value=value.replace(/\r\n/g,"\n");}nexacro.InputElement.prototype._updateElementValue.call(this,value);};_pTextAreaElement._getInputValue=function(){return nexacro.InputElement.prototype._getInputValue.call(this);};_pTextAreaElement.setElementInputType=function(){};_pTextAreaElement.getElementCaretLine=function(){var handle=this.handle;if(handle){return nexacro.__getInputElementHandleCaretLine(handle);}return 0;};_pTextAreaElement.getElementTextLineCount=function(withwrap){var handle=this.handle;if(handle){var text=this._getInputValue();if(withwrap){var select=nexacro.__getInputElementHandleSelectionRange(handle);nexacro.__setInputElementHandleCaretPos(handle,text.length);var line=nexacro.__getInputElementHandleCaretLine(handle);nexacro.__setInputElementHandleSetSelect(handle,select[0],select[1],false);return line;}else{var textarr=text.split("\n");return textarr.length;}}return 0;};_pTextAreaElement.isFirstCaretLine=function(){var handle=this.handle;if(handle){var lines=nexacro.__getInputElementHandleCaretLine(handle);if(lines<=1){return true;}}return false;};_pTextAreaElement.isLastCaretLine=function(){var handle=this.handle;if(handle){var caret_line=nexacro.__getInputElementHandleCaretLine(handle);var total_line=this.getElementTextLineCount();if(total_line==caret_line){return true;}}return false;};_pTextAreaElement.setElementScrollPos=function(hpos,vpos){if(hpos<0){hpos=0;}if(vpos<0){vpos=0;}this.setElementHScrollPos(hpos);this.setElementVScrollPos(vpos);};_pTextAreaElement.getElementHScrollPos=function(){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return 0;}return nexacro.__getInputElementHandleScrollLeft(handle);}return 0;};_pTextAreaElement.setElementHScrollPos=function(v){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return;}if(this._isRtl()){v=this._getRtlScrollLeft(v,this.parent_elem.inner_width);}nexacro.__setInputElementHandleScrollLeft(handle,v);}};_pTextAreaElement.getElementVScrollPos=function(){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return 0;}return nexacro.__getInputElementHandleScrollTop(handle);}return 0;};_pTextAreaElement.setElementVScrollPos=function(v){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return;}nexacro.__setInputElementHandleScrollTop(handle,v);}};_pTextAreaElement.getElementScrollWidth=function(){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return this.width;}return nexacro.__getInputElementHandleScrollWidth(handle);}return 0;};_pTextAreaElement.getElementScrollHeight=function(){var handle=this.handle;if(handle){if(!this._is_focused&&this.value==null&&this.displaynulltext){return this.height;}return nexacro.__getInputElementHandleScrollHeight(handle);}return 0;};_pTextAreaElement._bindSysEvent=function(){var input=this.handle;if(input){nexacro.InputElement.prototype._bindSysEvent.call(this);nexacro._observeInputEvent(input,"scroll","onscroll",this._on_sys_scroll);}};_pTextAreaElement._unbindSysEvent=function(){var input=this.handle;if(input){nexacro.InputElement.prototype._unbindSysEvent.call(this);nexacro._stopInputObserving(input,"scroll","onscroll",this._on_sys_scroll);}};_pTextAreaElement._on_sys_scroll=function(posTop,posLeft){var container=this.parent_elem.getContainerElement(this.position_step);if(container){var elem_scroll_top=container.parent.scroll_top;var elem_scroll_left=container.parent.scroll_left;var hscroll_pos=elem_scroll_left;var vscroll_pos=elem_scroll_top;var scrolltype=this.parent._scrolltype;var linkedcontrol=this.parent.linkedcontrol;var bscroll=false;if(elem_scroll_left!=posLeft){if(scrolltype!="none"&&scrolltype!="vertical"&&!linkedcontrol._is_tracking){hscroll_pos=posLeft;bscroll=true;}}if(elem_scroll_top!=posTop){if(scrolltype!="none"&&scrolltype!="horizontal"&&!linkedcontrol._is_tracking){vscroll_pos=posTop;bscroll=true;}}if(bscroll){linkedcontrol._scrollTo(hscroll_pos,vscroll_pos,true,false);}}};_pTextAreaElement=null;nexacro.ControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var _pControlElement=nexacro._createPrototype(nexacro.Element,nexacro.ControlElement);nexacro.ControlElement.prototype=_pControlElement;_pControlElement._type_name="ControlElement";_pControlElement.enable=true;_pControlElement.tabindex= -1;_pControlElement.zindex= -1;_pControlElement.color=null;_pControlElement.font=null;_pControlElement.textDecoration=null;_pControlElement.borderRadius=null;_pControlElement.border=null;_pControlElement.background=null;_pControlElement.edgeImage=null;_pControlElement.padding=null;_pControlElement.cursor=null;_pControlElement.opacity=null;_pControlElement.boxShadow=null;_pControlElement.position_step=undefined;_pControlElement.linkedcontrol=null;_pControlElement.inner_width=0;_pControlElement.inner_height=0;_pControlElement.client_left=0;_pControlElement.client_top=0;_pControlElement.client_width=0;_pControlElement.client_height=0;_pControlElement._classname="";_pControlElement._is_popup=false;_pControlElement._is_control=false;_pControlElement.zoom=100;_pControlElement._edge_elem=null;_pControlElement._apply_client_padding=true;_pControlElement._border_info=null;_pControlElement._padding_info=null;_pControlElement._edge_info=null;_pControlElement.accessibilityrole="";_pControlElement.accessibilityenable=true;_pControlElement.accessibilitylabel="";_pControlElement.accessibilitydesclevel="";_pControlElement.accessibilitydescription="";_pControlElement.accessibilityaction="";_pControlElement.accessibility_value=undefined;_pControlElement.accessibility_stat_disabled=undefined;_pControlElement.accessibility_stat_hidden=undefined;_pControlElement.accessibility_stat_checked=undefined;_pControlElement.accessibility_stat_pressed=undefined;_pControlElement.accessibility_stat_selected=undefined;_pControlElement.accessibility_stat_expanded=undefined;_pControlElement.accessibility_stat_autocomplete=undefined;_pControlElement.accessibility_flag_haspopup=undefined;_pControlElement.accessibility_flag_focusable=undefined;_pControlElement.accessibility_flag_readonly=undefined;_pControlElement.accessibility_flag_password=undefined;_pControlElement.accessibility_flag_multiselectable=undefined;_pControlElement.accessibility_flag_selectable=undefined;_pControlElement.accessibility_flag_defaultbutton=undefined;_pControlElement.accessibility_prop_itemcount=undefined;_pControlElement.accessibility_prop_itemindex=undefined;_pControlElement.accessibility_prop_valuemax=undefined;_pControlElement.accessibility_prop_valuemin=undefined;_pControlElement.create=nexacro._emptyFn;_pControlElement.destroy=nexacro._emptyFn;_pControlElement.clearContents=nexacro._emptyFn;_pControlElement.setElementStepCount=nexacro._emptyFn;_pControlElement.setElementStepIndex=nexacro._emptyFn;_pControlElement.borderLeftNone=false;_pControlElement.borderTopNone=false;_pControlElement.borderRightNone=false;_pControlElement.borderBottomNone=false;_pControlElement._step_container_elements=null;_pControlElement.create=function(win){var win_handle;var owner_elem;var bPositionRtl;var left;var handle;if(!this._is_popup){owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;win_handle=win.handle||owner_elem._getRootWindowHandle();var classname=this._classname?this._classname:this._getElementClassName();bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,classname,this.name,this._is_control);this.handle=this.dest_handle=handle;this._refreshControl(handle);if(this.linkedcontrol&&this.linkedcontrol._real_enable==false){if(!this.status){this.status="disabled";nexacro.__setElementHandleStatus(handle,"disabled");}}if(!this._is_nc_element){nexacro.__setElementHandleStatus(owner_elem.dest_handle,owner_elem.status);}nexacro.__appendElementHandle((this._is_nc_element)?owner_elem.handle:owner_elem.dest_handle,handle);if(!this._is_simple_control){left=this.client_left;if(bPositionRtl){left=this._getRTLContainerPositionLeft(this.client_left,this.client_width);}var inner_node=nexacro.__createContainerElementHandle(this,win_handle,left,this.client_top,this.client_width,this.client_height,"nexasimplecontainer");this.dest_handle=inner_node;nexacro.__appendElementHandle(handle,inner_node);}}}else{if(!this.handle){var linkedcontrol=this.linkedcontrol;win_handle=win.handle;owner_elem=win;bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,this._is_control);this._refreshControl(handle);this.handle=this.dest_handle=handle;if(linkedcontrol._findOwnerElementHandle){var owner_elem_info=linkedcontrol._findOwnerElementHandle();if(owner_elem_info.is_append){nexacro.__appendElementHandle(owner_elem_info.owner_handle,handle);}else{nexacro.__insertElementHandle(owner_elem_info.owner_handle,handle,owner_elem_info.ref_handle);}this.owner_elem=owner_elem_info.owner_handle._linked_element;}else{nexacro.__appendElementHandle(win_handle,handle);this.owner_elem=owner_elem;}}}};_pControlElement.createCommandStart=function(){return "";};_pControlElement._on_destroy=nexacro._emptyFn;_pControlElement.destroy=function(){var handle=this.handle;if(handle){var owner_handle=null;if(this.owner_elem){owner_handle=this.owner_elem.dest_handle;}if(!this.owner_elem||owner_handle){nexacro._AccessibilityUtil.unsupportMobileApplicationAccessibility(this);nexacro.__destroyElementHandle(owner_handle,handle);}if(!this._is_simple_control){nexacro.__destroyElementHandle(handle,this.dest_handle);this.dest_handle=null;}this.owner_elem=null;if(this._client_elem){this._client_elem.destroy();this._client_elem=null;}this._on_destroy();}this.handle=null;this.parent=null;this.parent_elem=null;this.linkedcontrol=null;};_pControlElement._on_clearContents=nexacro._emptyFn;_pControlElement.clearContents=function(){if(this.handle&&this._client_elem){this._client_elem.clearContents();this._on_clearContents();}};_pControlElement.initElementInfo=function(){var control=this.linkedcontrol;this.client_width=0;this.client_height=0;this._is_simple_control=control._is_simple_control;this._is_popup=control._is_popup_control;this._is_control=control._is_subcontrol;};_pControlElement.setLinkedControl=function(control){if(!this.linkedcontrol&&control){this.parent=control;this.linkedcontrol=control;this.id=control.id;this.name=control._unique_id;}};_pControlElement.setElementPositionStep=function(position_step){if(this.position_step!=position_step||position_step== -1){this.position_step=position_step;var handle=this.handle;if(handle&&this.parent_elem){var oldowner_elem=this.owner_elem;var owner_elem=this.parent_elem.getContainerElement(position_step);if(oldowner_elem&&oldowner_elem.dest_handle&&owner_elem&&owner_elem.dest_handle){nexacro.__unlinkElementHandle(oldowner_elem.dest_handle,handle);nexacro.__appendElementHandle(owner_elem.dest_handle,handle);this.owner_elem=owner_elem;}}}};_pControlElement.appendChildElement=function(elem){if(this.handle){if(elem.parent_elem!=this){elem.parent_elem=this;}if(!elem.handle){elem.create(this._getWindow());}else{elem._appendToContainer(this.getContainerElement(elem.position_step));}}};_pControlElement.insertChildElement=function(elem,before_elem){if(this.handle){if(elem.parent_elem!=this){elem.parent_elem=this;}if(!elem.handle){elem.create(this._getWindow());}else{elem._insertToContainer(this.getContainerElement(elem.position_step),before_elem);}}};_pControlElement.removeChildElement=function(elem){if(elem.parent_elem==this){elem._removeFromContainer();}};_pControlElement._getComputedStyle=function(prop,noflush){if(this.handle&&prop){if(!noflush){this._flushCommand();}var computedstyle=nexacro.__getElementHandleStyleValue(this.handle,prop);return computedstyle;}};_pControlElement._getComputedStyleSubValue=function(prop,subprop,noflush){if(this.handle&&prop&&subprop){if(!noflush){this._flushCommand();}return nexacro.__getElementHandleStyleSubValue(this.handle,prop,subprop);}};_pControlElement._getComputedStyleBackgroundColor=function(noflush){if(this.handle){if(!noflush){this._flushCommand();}return nexacro.__getElementHandleStyleSubValue(this.handle,"background","background-color");}};_pControlElement._flushCommand=function(){if(nexacro._Browser=="Runtime"){nexacro._flushCommand(this._getWindow());}};_pControlElement._sendToBackElement=function(elem){if(elem&&elem.owner_elem.dest_handle==this.dest_handle&&elem.handle){nexacro.__setElementHandleSendToBack(elem.handle);}};_pControlElement._bringToFrontElement=function(elem){if(elem&&elem.owner_elem.dest_handle==this.dest_handle&&elem.handle){nexacro.__setElementHandleBringToFront(elem.handle);}};_pControlElement._moveToNextElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__setElementHandleMoveToNext(elem.handle,base_elem.handle);}};_pControlElement._moveToPrevElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__setElementHandleMoveToPrev(elem.handle,base_elem.handle);}};_pControlElement.sendToBackElement=function(elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._sendToBackElement(elem);};_pControlElement.bringToFrontElement=function(elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._bringToFrontElement(elem);};_pControlElement.moveToNextElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._moveToNextElement(elem,base_elem);};_pControlElement.moveToPrevElement=function(elem,base_elem){var client_elem=this.getContainerElement(elem.position_step);client_elem._moveToPrevElement(elem,base_elem);};_pControlElement.saveToImageObject=function(){var handle=this.handle;if(handle&&this.parent_elem){var url=nexacro.__saveToImageBase64String(handle);if(url){var imgObj=new nexacro.Image();imgObj.set_src(url);imgObj.setBase64String(imgObj.src);return imgObj;}}};_pControlElement._setElementHScrollPos=function(hpos){var handle=this.handle;if(handle){if(this._isRtl()){hpos= -hpos;}nexacro.__setElementHandleHScrollPos(handle,hpos);}};_pControlElement._setElementVScrollPos=function(vpos){var handle=this.handle;if(handle){nexacro.__setElementHandleVScrollPos(handle,vpos);}};_pControlElement._setElementScrollPos=function(hpos,vpos){var handle=this.handle;if(handle){nexacro.__setElementHandleOffset(handle,hpos,vpos);}};_pControlElement.setElementTranslateStart=nexacro._emptyFn;_pControlElement.setElementTranslateEnd=nexacro._emptyFn;_pControlElement.setElementHScrollPos=function(hpos){if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}if(this.scroll_left!=hpos){this.scroll_left=hpos;if(this._client_elem._use_translate_scroll){this._client_elem._setElementHScrollPos(hpos);}if(this.linkedcontrol){this.linkedcontrol._setHscrollPos(hpos);}}};_pControlElement.setElementVScrollPos=function(vpos){if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_top!=vpos){this.scroll_top=vpos;if(this._client_elem._use_translate_scroll){this._client_elem._setElementVScrollPos(vpos);}if(this.linkedcontrol){this.linkedcontrol._setVscrollPos(vpos);}}};_pControlElement.setElementScrollPos=function(hpos,vpos){if(hpos<0){hpos=0;}if(vpos<0){vpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_left!=hpos||this.scroll_top!=vpos){this.scroll_left=hpos;this.scroll_top=vpos;if(this._client_elem._use_translate_scroll){this._client_elem._setElementScrollPos(hpos,vpos);}}};_pControlElement.setElementClassCSSSelector=function(classname){if(this.classselector!=classname){this.classselector=classname;var handle=this.handle;if(handle){classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setElementHandleCSSClassName(handle,classname);}}}};_pControlElement.setElementIDCSSSelector=function(id){if(this.idselector!=id){this.idselector=id;var handle=this.handle;if(handle){var classname=this._getElementClassName();if(this._classname!=classname){this._classname=classname;nexacro.__setElementHandleCSSClassName(handle,classname);}}}};_pControlElement.setElementCSSMapInfo=function(border,padding,edge){var change_border=false,change_padding=false;if(this._border_info!=border){this._border_info=border;change_border=(this.border==null);}if(this._padding_info!=padding){this._padding_info=padding;change_padding=(this.padding==null);}var change_inner=(change_border&&this._updateInnerSize());{if(change_inner||change_padding){this._updateClientRect();}}};_pControlElement.setElementZIndex=function(zindex){if(this.zindex!=zindex){this.zindex=zindex;var handle=this.handle;if(handle){nexacro.__setElementHandleZindex(handle,zindex);}}};_pControlElement.setElementToolTip=function(tooltiptext,tooltiptype){if(this.tooltiptext!=tooltiptext||this.tooltiptype!=tooltiptype){this.tooltiptext=tooltiptext;this.tooltiptype=tooltiptype;var handle=this.handle;if(handle){if(nexacro._isNull(tooltiptext)){tooltiptype="none";}nexacro.__setElementHandleToolTip(handle,tooltiptext,tooltiptype);}}};_pControlElement.setElementFocus=function(){var handle=this.handle;if(handle){nexacro.__setElementHandleFocus(handle);nexacro.__setLastFocusedElement(this);}};_pControlElement.setElementSize=function(width,height,update){if(this.width!=width||this.height!=height||update){this.width=width;this.height=height;if(this._updateInnerSize()||update){this._updateClientRect(update);}var handle=this.handle;if(handle){var bPositionRtl=this._isParentRtl();if(bPositionRtl){var newLeft=this._getRTLPositionLeft(this.left,width);if(newLeft||this.top){nexacro.__setElementHandlePosition(handle,newLeft,this.top);}else{nexacro.__clearElementHandlePosition(handle);}}nexacro.__setElementHandleSize(handle,this.width,this.height);}}};_pControlElement.setElementBorderRadius=function(borderradius){this.borderRadius=borderradius;var handle=this.handle;if(handle){nexacro.__setElementHandleBorderRadiusObject(handle,borderradius,this.rtl);}};_pControlElement.setElementBorder=function(border){this.border=border;if(this._updateInnerSize()){this._updateClientRect();}var handle=this.handle;if(handle){nexacro.__setElementHandleBorderObject(handle,border,this.rtl);}};_pControlElement.setElementBorderLeftNone=function(borderleft){this.borderLeftNone=borderleft;if(this._updateInnerSize()){this._updateClientRect();}var handle=this.handle;if(handle){if(this.rtl){nexacro.__setElementHandleBorderRightNone(handle,borderleft);}else{nexacro.__setElementHandleBorderLeftNone(handle,borderleft);}}};_pControlElement.setElementBorderTopNone=function(bordertop){this.borderTopNone=bordertop;if(this._updateInnerSize()){this._updateClientRect();}var handle=this.handle;if(handle){nexacro.__setElementHandleBorderTopNone(handle,bordertop);}};_pControlElement.setElementBorderRightNone=function(borderright){this.borderRightNone=borderright;if(this._updateInnerSize()){this._updateClientRect();}var handle=this.handle;if(handle){if(this.rtl){nexacro.__setElementHandleBorderLeftNone(handle,borderright);}else{nexacro.__setElementHandleBorderRightNone(handle,borderright);}}};_pControlElement.setElementBorderBottomNone=function(borderbottom){this.borderBottomNone=borderbottom;if(this._updateInnerSize()){this._updateClientRect();}var handle=this.handle;if(handle){nexacro.__setElementHandleBorderBottomNone(handle,borderbottom);}};_pControlElement.setElementBorderNone=function(borderleft,bordertop,borderright,borderbottom){if(borderleft!=this.borderLeftNone||bordertop!=this.borderTopNone||borderright!=this.borderRightNone||borderbottom!=this.borderBottomNone){this.borderLeftNone=borderleft;this.borderTopNone=bordertop;this.borderRightNone=borderright;this.borderBottomNone=borderbottom;if(this.handle){if(this.rtl){nexacro.__setElementHandleBorderLeftNone(this.handle,borderright);nexacro.__setElementHandleBorderRightNone(this.handle,borderleft);}else{nexacro.__setElementHandleBorderLeftNone(this.handle,borderleft);nexacro.__setElementHandleBorderRightNone(this.handle,borderright);}nexacro.__setElementHandleBorderTopNone(this.handle,bordertop);nexacro.__setElementHandleBorderBottomNone(this.handle,borderbottom);}if(this._updateInnerSize()){this._updateClientRect();if(this._edge_elem){this._edge_elem.setElementSize(this.inner_width,this.inner_height);}}}};_pControlElement.setElementBackground=function(background){this.background=background;var handle=this.handle;if(handle){nexacro.__setElementHandleBackgroundObject(handle,background,this.rtl);}};_pControlElement.setElementEdge=function(edge){this.edge=edge;var handle=this.handle;if(handle){nexacro.__setElementHandleEdgeImageObject(handle,edge);}};_pControlElement.setElementPadding=function(padding){this.padding=padding;this._updateClientRect();var handle=this.handle;if(handle){nexacro.__setElementHandlePaddingObject(handle,padding);}};_pControlElement._updateClientRect=function(update){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if((ret&2)||update){this._on_change_clientSize(this.client_width,this.client_height,update);}};_pControlElement.setElementCursor=function(cursor){this.cursor=cursor;var handle=this.handle;if(handle){nexacro.__setElementHandleCursorObject(handle,cursor);}};_pControlElement.setElementOpacity=function(opacity){this.opacity=opacity;var handle=this.handle;if(handle){nexacro.__setElementHandleOpacityObject(handle,opacity);}};_pControlElement.setElementBoxShadow=function(boxshadow){this.boxShadow=boxshadow;var handle=this.handle;if(handle){nexacro.__setElementHandleShadowObject(handle,boxshadow,this.rtl);}};_pControlElement.setElementZoom=function(zoomfactor){var handle=this.handle;if(handle){if(zoomfactor<0){zoomfactor=0;}this.zoom=zoomfactor;nexacro.__setElementHandleScale(handle,zoomfactor);}};_pControlElement.setElementDisplay=function(display){if(this.display!=display){this.display=display;var handle=this.handle;if(handle){if(display=="none"){nexacro.__setElementHandleVisible(handle,false);}else{nexacro.__setElementHandleVisible(handle,true);}}}};_pControlElement.setElementSimpleControl=function(simplecontrol){if(this._is_simple_control!=simplecontrol){var handle=this.handle;if(handle){if(!this._is_simple_control){nexacro.__destroyElementHandle(handle,this.dest_handle);this.dest_handle=handle;}else{var owner_elem=this.owner_elem;var win_handle=owner_elem._getRootWindowHandle();var inner_node=nexacro.__createContainerElementHandle(this,win_handle,this.client_left,this.client_top,this.client_width,this.client_height,"nexasimplecontainer");this.dest_handle=inner_node;nexacro.__appendElementHandle(handle,inner_node);}}this._is_simple_control=simplecontrol;}};_pControlElement.setElementHittestType=function(httype){if(this._hittest_type!=httype){this._hittest_type=httype;if(this.handle){nexacro.__setElementHittestValue(this.handle,httype);}}};_pControlElement.getClientLeft=function(){if(!this._is_simple_control){return 0;}return this.client_left;};_pControlElement.getClientTop=function(){if(!this._is_simple_control){return 0;}return this.client_top;};_pControlElement.getClientWidth=function(){return this.client_width;};_pControlElement.getClientHeight=function(){return this.client_height;};_pControlElement.beginTransitionEffect=function(obj){if(this.handle&&obj){nexacro.__beginTransitionEffect(this.handle,obj);}};_pControlElement.applyTransitionEffect=function(){if(this.handle){nexacro.__applyTransitionEffect(this.handle);}};_pControlElement.cancelTransitionEffect=function(){if(this.handle){nexacro.__cancelTransitionEffect(this.handle);}};_pControlElement.setElementAccessibilityRole=nexacro._emptyFn;_pControlElement.setElementAccessibilityLabel=nexacro._emptyFn;_pControlElement.setElementAccessibilityEnable=nexacro._emptyFn;_pControlElement.setElementAccessibilityDescription=nexacro._emptyFn;_pControlElement.setElementAccessibilityDescLevel=nexacro._emptyFn;_pControlElement.setElementAccessibilityAction=nexacro._emptyFn;_pControlElement.setElementAccessibilityValue=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatDisabled=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatHidden=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatChecked=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatPressed=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatSelected=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatExpanded=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatAutoComplete=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagHasPopup=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagFocusable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagReadOnly=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagPassword=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagMultiSelectable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagSelectable=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagDefaultButton=nexacro._emptyFn;_pControlElement.setElementAccessibilityFlagMultiLine=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoCount=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoIndex=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueMax=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueMin=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoValueCur=nexacro._emptyFn;_pControlElement.setElementAccessibilityInfoLevel=nexacro._emptyFn;_pControlElement.setElementAccessibilityHotKey=nexacro._emptyFn;_pControlElement.setElementAccessibilityActiveDescendant=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatFocus=nexacro._emptyFn;_pControlElement.setElementAccessibilityStatKillFocus=nexacro._emptyFn;_pControlElement.notifyAccessibility=nexacro._emptyFn;_pControlElement._refreshAccessibilityInfo=nexacro._emptyFn;_pControlElement._makeAccessibilityLabelbyReadtype=nexacro._emptyFn;_pControlElement.setElementAccessibilityParentLabel=nexacro._emptyFn;_pControlElement._setElementScrolltype=nexacro._emptyFn;_pControlElement._refreshControl=function(handle){this._refreshCommonStyleProps(handle);if(this._hittest_type){nexacro.__setElementHittestValue(handle,this._hittest_type);}if(this.tabindex>= -1){nexacro.__setElementHandleTabIndex(handle,this.tabindex);}if(!nexacro._isNull(this.tooltiptext)){nexacro.__setElementHandleToolTip(handle,this.tooltiptext,this.tooltiptype);}if(this.zindex>=0){nexacro.__setElementHandleZindex(handle,this.zindex);}if(this.borderRadius){nexacro.__setElementHandleBorderRadiusObject(handle,this.borderRadius,this.rtl);}if(this.border){nexacro.__setElementHandleBorderObject(handle,this.border,this.rtl);}if(this.borderLeftNone){if(this.rtl){nexacro.__setElementHandleBorderRightNone(handle,this.borderLeftNone);}else{nexacro.__setElementHandleBorderLeftNone(handle,this.borderLeftNone);}}if(this.borderTopNone){nexacro.__setElementHandleBorderTopNone(handle,this.borderTopNone);}if(this.borderRightNone){if(this.rtl){nexacro.__setElementHandleBorderLeftNone(handle,this.borderRightNone);}else{nexacro.__setElementHandleBorderRightNone(handle,this.borderRightNone);}}if(this.borderBottomNone){nexacro.__setElementHandleBorderBottomNone(handle,this.borderBottomNone);}if(this.background){nexacro.__setElementHandleBackgroundObject(handle,this.background,this.rtl);}if(this.padding){nexacro.__setElementHandlePaddingObject(handle,this.padding);}if(this.cursor){nexacro.__setElementHandleCursorObject(handle,this.cursor);}if(this.opacity){nexacro.__setElementHandleOpacityObject(handle,this.opacity);}if(this.boxShadow){nexacro.__setElementHandleShadowObject(handle,this.boxShadow,this.rtl);}if(this.edge){nexacro.__setElementHandleEdgeImageObject(handle,this.edge);}if(this.status){nexacro.__setElementHandleStatus(handle,this.status);}if(this.userstatus){nexacro.__setElementHandleUserStatus(handle,this.userstatus);}this._refreshAccessibilityInfo(handle);};_pControlElement.getElementScrollWidth=function(){return this.inner_width;};_pControlElement.getElementScrollHeight=function(){return this.inner_height;};_pControlElement._updateInnerSize=function(){var inner_width=this.width;var inner_height=this.height;var border=this.border?this.border:this._border_info;if(border){var borderleft=border.left?border.left._width:0;var borderright=border.right?border.right._width:0;var bordertop=border.top?border.top._width:0;var borderbottom=border.bottom?border.bottom._width:0;if(this.borderLeftNone){borderleft=0;}if(this.borderRightNone){borderright=0;}if(this.borderTopNone){bordertop=0;}if(this.borderBottomNone){borderbottom=0;}inner_width-=(borderleft+borderright);inner_height-=(bordertop+borderbottom);if(inner_width<0){inner_width=0;}if(inner_height<0){inner_height=0;}}if(this.inner_width!=inner_width||this.inner_height!=inner_height){this.inner_width=inner_width;this.inner_height=inner_height;return true;}return false;};_pControlElement._on_updateClientRect=function(){var ret=0;var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var padding=(this.padding||this._padding_info);if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}return ret;};_pControlElement._on_change_clientPos=function(left,top){var notify=false;var client_elem=this._client_elem;if(client_elem){client_elem.setElementPosition(left,top);}else if(this.handle&&this.handle!=this.dest_handle){var newLeft=this._getRTLPositionLeft(left,this.width);var dest_handle=this.dest_handle;if(newLeft||top){nexacro.__setElementHandlePosition(dest_handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(dest_handle);}}else{notify=true;}var control=this.linkedcontrol;if(control&&notify){control.on_change_containerPos(left,top);}};_pControlElement._on_change_clientSize=function(width,height){var client_elem=this._client_elem;if(client_elem){client_elem.setElementSize(width,height);}else if(!this._is_simple_control){if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;nexacro.__setElementHandleSize(dest_handle,width,height);}}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pControlElement.getElementScrollLeft=function(){return 0;};_pControlElement.getElementScrollTop=function(){return 0;};_pControlElement.getElementScrollWidth=function(){return this.inner_width;};_pControlElement.getElementScrollHeight=function(){return this.inner_height;};_pControlElement._isMultiInnerProc=function(){return false;};nexacro.FrameControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._border_elems=new nexacro.Collection();};var _pFrameControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.FrameControlElement);nexacro.FrameControlElement.prototype=_pFrameControlElement;_pFrameControlElement._type_name="FrameControlElement";_pFrameControlElement._title_control=null;_pFrameControlElement._status_control=null;_pFrameControlElement._title_height=0;_pFrameControlElement._status_height=0;_pFrameControlElement._title_top=0;_pFrameControlElement._title_width=0;_pFrameControlElement._status_top=0;_pFrameControlElement._status_width=0;_pFrameControlElement._resizable=false;_pFrameControlElement.win_handle=null;_pFrameControlElement.create=function(win){var win_handle;var bPositionRtl;var left;var handle;var inner_node;if(!this.handle){if(this.parent_elem==null){win_handle=this.win_handle=win.handle;this.owner_elem=win;this._is_window_element=true;this.left=0;this.top=0;this.width=win.clientWidth;this.height=win.clientHeight;bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,this._is_control);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle(this.owner_elem.handle,handle);if(!this._is_simple_control){left=this.client_left;if(bPositionRtl){left=this._getRTLContainerPositionLeft(this.client_left,this.client_width);}inner_node=nexacro.__createContainerElementHandle(this,win_handle,left,this.client_top,this.client_width,this.client_height,"nexasimplecontainer");this.dest_handle=inner_node;nexacro.__appendElementHandle(handle,inner_node);}this._refreshControl(handle);}else{var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement();if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;win_handle=win.handle||owner_elem._getRootWindowHandle();bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,this._is_control);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);if(!this._is_simple_control){left=this.client_left;if(bPositionRtl){left=this._getRTLContainerPositionLeft(this.client_left,this.client_width);}inner_node=nexacro.__createContainerElementHandle(this,win_handle,left,this.client_top,this.client_width,this.client_height,"nexasimplecontainer");this.dest_handle=inner_node;nexacro.__appendElementHandle(handle,inner_node);}this._refreshControl(handle);}}if(this._resizable){this._createBorderElements();this._updateBorderElementsPosition();}}};_pFrameControlElement._on_destroy=function(){this.win_handle=null;this._destroyBorderElements();this._title_control=null;this._status_control=null;};_pFrameControlElement._getRootWindowHandle=function(){if(this._is_window_element){return this.win_handle;}else if(this.owner_elem){return this.owner_elem._getRootWindowHandle();}else if(this.parent&&this.parent._getRootWindowHandle){return this.parent._getRootWindowHandle();}return null;};_pFrameControlElement._updateClientRect=function(update){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if((ret&2)||update){this._on_change_clientSize(this.client_width,this.client_height);}if(ret){this._updateBorderElementsPosition();}};_pFrameControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var padding=(this.padding||this._padding_info);if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}var title_control=this._title_control;if(title_control){if(!this._is_verticalmin&&(this.client_left!=client_left||this._title_top!=client_top||this._title_width!=client_width)){this._title_top=client_top;this._title_width=client_width;title_control.move(client_left,client_top,client_width,this._title_height);}else if(this._is_verticalmin&&(this.client_top!=client_top||this._title_top!=client_top||this._title_height!=client_height)){this._title_top=client_top;this._title_width=client_width;title_control.move(client_left,client_top,client_width,client_height);}client_top+=this._title_height;client_height-=this._title_height;if(client_height<0){client_height=0;}}else{this._title_top=client_top;}var status_control=this._status_control;if(status_control){if(this._status_height>0){client_height-=this._status_height;if(client_height<0){client_height=0;}}var status_top=client_top+client_height;if(this.client_left!=client_left||this._status_top!=status_top||this._status_width!=client_width){this._status_top=status_top;this._status_width=client_width;status_control.move(client_left,status_top,client_width,this._status_height);}}else{this._status_top=client_top+client_height;}var ret=0;if(this.client_left!=client_left||this.client_top!=client_top){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}return ret;};_pFrameControlElement.appendChildElement=function(child_elem){if(this.handle){if(!this._client_elem){return;}if(child_elem.parent_elem==this._client_elem){child_elem._is_nc_element=true;}else{if(child_elem.handle){if(child_elem._doc!=this._doc){child_elem.parent_elem=this._client_elem;child_elem._destroyDOMHandle();}else{child_elem.parent_elem=this._client_elem;}}else{child_elem.parent_elem=this._client_elem;}}child_elem._is_nc_element=true;child_elem.setElementPosition(0,0);child_elem.setElementSize(this.client_width,this.client_height);if(this.font){child_elem.setElementFont(this.font);}if(this.color){child_elem.setElementColor(this.color);}if(!child_elem.handle){child_elem.create(this._getWindow());}else{child_elem._appendToContainer(this._client_elem);}}};_pFrameControlElement.removeChildElement=function(child_elem){if(child_elem.parent_elem==this){child_elem._removeFromContainer();}};_pFrameControlElement.sendToBackElement=function(elem){if(elem&&elem.owner_elem&&elem.owner_elem.owner_elem==this.owner_elem&&elem.handle){nexacro.__setElementHandleSendToBack(elem.handle);if(elem._border_elems){for(var i=0;i<elem._border_elems.length;i++ ){nexacro.__setElementHandleSendToBack(elem._border_elems[i].handle);}}}};_pFrameControlElement.bringToFrontElement=function(cur_elem){if(cur_elem&&cur_elem.owner_elem&&cur_elem.owner_elem.owner_elem==this.owner_elem&&cur_elem.handle){nexacro.__setElementHandleBringToFront(cur_elem.handle);if(cur_elem._border_elems){for(var i=0;i<cur_elem._border_elems.length;i++ ){nexacro.__setElementHandleBringToFront(cur_elem._border_elems[i].handle);}}}};_pFrameControlElement.moveToNextElement=function(elem,base_elem){var client_element=this.getContainerElement(elem.position_step);client_element.moveToNextElement(elem,base_elem);};_pFrameControlElement.moveToPrevElement=function(elem,base_elem){var client_element=this.getContainerElement(elem.position_step);client_element.moveToPrevElement(elem,base_elem);};_pFrameControlElement.setTitleBarControl=function(title_control,title_height){this._title_control=title_control;if(title_control){this._title_height=parseInt(title_height)|0;this._title_width=0;}else{this._title_height=0;this._title_width=0;}this._updateClientRect();};_pFrameControlElement.setStatusBarControl=function(status_control,status_height){this._status_control=status_control;if(status_control){this._status_height=parseInt(status_height)|0;this._status_width=0;}else{this._status_height=0;this._status_width=0;}this._updateClientRect();};_pFrameControlElement._createBorderElements=function(){var parent_elem=this.parent_elem;if(this._border_elems.length>0){return;}var i,border_elem,name_table=Array("lt","t","rt","l","r","lb","b","rb");for(i=0;i<8;i++ ){border_elem=new nexacro._FrameResizeBorderElement(parent_elem);this._border_elems.add_item(name_table[i],border_elem);}for(i=0;i<8;i++ ){border_elem=this._border_elems[i];border_elem.linkedcontrol=this.linkedcontrol;border_elem.create(this._getWindow());}this._setResizable(this._resizable);};_pFrameControlElement._destroyBorderElements=function(){var cnt=this._border_elems.length;for(var i=0;i<cnt;i++ ){this._border_elems[i].destroy();this._border_elems[i]=null;}this._border_elems.clear();this._border_elems=null;};_pFrameControlElement.setElementPosition=function(x,y){nexacro.ControlElement.prototype.setElementPosition.call(this,x,y);this._updateBorderElementsPosition();};_pFrameControlElement._updateBorderElementsPosition=function(){if(this._border_elems.length==0){return;}var border=this.border||this._border_info;var lw,tw,rw,bw;if(!border){lw=tw=rw=bw=0;}else if(border._linecnt==1){lw=tw=rw=bw=border._getBorderWidth();}else{lw=border.left._width;tw=border.top._width;rw=border.right._width;bw=border.bottom._width;}var inner_width=this.inner_width;var inner_height=this.inner_height;if(lw<5){var lx=5-lw;lw+=lx;inner_width-=lx;}if(tw<5){var tx=5-tw;tw+=tx;inner_height-=tx;}if(rw<5){var rx=5-rw;rw+=rx;inner_width-=rx;}if(bw<5){var bx=5-bw;bw+=bx;inner_height-=bx;}var left=this.left;var top=this.top;var x=left;var i,y=top;for(i=0;i<8;i++ ){this._border_elems[i].setElementPosition(x,y);switch(i){case 0:x+=lw;break;case 1:x+=inner_width;break;case 2:x=left;y+=tw;break;case 3:x+=(lw+inner_width);break;case 4:x=left;y+=inner_height;break;case 5:x+=lw;break;case 6:x+=inner_width;break;case 7:break;}}for(i=0;i<8;i++ ){if(i==0||i==3||i==5){x=lw;}if(i==1||i==6){x=inner_width;}if(i==2||i==4||i==7){x=rw;}if(i<3){y=tw;}else if(i<5){y=inner_height;}else{y=bw;}this._border_elems[i].setElementSize(x,y);}};_pFrameControlElement._setResizable=function(resizable){this._resizable=resizable;if(this.handle){if(this._border_elems.length==0){if(resizable){this._createBorderElements();this._updateBorderElementsPosition();}else{return;}}var is_apply;if(nexacro.System.navigatorname=="nexacro"){is_apply=(this._is_window_element&&resizable);}else{is_apply=(this._is_window_element&&resizable);if(this._getWindowHandle()==nexacro._getMainWindowHandle()){is_apply=false;}}var cursor_table=Array("nw","n","ne","w","e","sw","s","se");var hittest_table=Array("topleft","top","topright","left","right","bottomleft","bottom","bottomright");for(var i=0;i<8;i++ ){var border_elem=this._border_elems[i];border_elem._is_track=resizable;var cursor;if(resizable){cursor=nexacro.CursorObject(cursor_table[i]+"-resize");}else{cursor=nexacro.CursorObject("arrow");}if(is_apply){border_elem.setElementHittestType("resizingborder_"+hittest_table[i]);}else{border_elem.setElementHittestType("fixedborder");}border_elem.setElementCursor(cursor);}}var statuscontrol=this._status_control;if(statuscontrol){statuscontrol.set_resizable(resizable);}};_pFrameControlElement.setElementCSSMapInfo=function(border,padding,edge){nexacro.ControlElement.prototype.setElementCSSMapInfo.call(this,border,null,edge);};_pFrameControlElement.setElementSize=function(width,height,update,isInnerFrame){{this._unscaledwidth=width;this._unscaledheight=height;if(this.zoom==100||isInnerFrame==true){this.width=width;this.height=height;}else{this.width=width*100/this.zoom;this.height=height*100/this.zoom;}}if(this._updateInnerSize()||update){this._updateClientRect(update);}var handle=this.handle;if(handle){var bPositionRtl=this._isParentRtl();if(bPositionRtl){var newLeft=this._getRTLPositionLeft(this.left,width);if(newLeft||this.top){nexacro.__setElementHandlePosition(handle,newLeft,this.top);}else{nexacro.__clearElementHandlePosition(handle);}}nexacro.__setElementHandleSize(handle,this.width,this.height);}};nexacro._FrameResizeBorderElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var __pFrameResizeBorderElement=nexacro._createPrototype(nexacro.ControlElement,nexacro._FrameResizeBorderElement);nexacro._FrameResizeBorderElement.prototype=__pFrameResizeBorderElement;__pFrameResizeBorderElement._type_name="FrameResizeBorderElement";__pFrameResizeBorderElement.win_handle=null;__pFrameResizeBorderElement.create=function(win){var owner_elem;var win_handle;if(this.parent_elem==null){owner_elem=win;win_handle=this.win_handle=win.handle;this.left=0;this.top=0;}else{owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement();win_handle=win.handle||owner_elem._getRootWindowHandle();}if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var left=this.left;var handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height);this._refreshControl(handle);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle(this._is_nc_element?owner_elem.handle:owner_elem.dest_handle,handle);}};__pFrameResizeBorderElement.setElementSize=function(width,height,update){if(this.width!=width||this.height!=height){this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){if(width&&height){nexacro.__setElementHandleSize(handle,width,height);}else{nexacro.__clearElementHandleSize(handle);}}}};__pFrameResizeBorderElement._on_destroy=function(){this.win_handle=null;};__pFrameResizeBorderElement._getRootWindowHandle=function(){if(this._is_window_element){return this.win_handle;}else if(this.owner_elem&&this.owner_elem._getRootWindowHandle){return this.owner_elem._getRootWindowHandle();}return null;};__pFrameResizeBorderElement._on_starttrack=function(){this.linkedcontrol._on_border_starttrack(this.cursor);};__pFrameResizeBorderElement._on_endtrack=function(x,y,dragdata){this.linkedcontrol._on_border_endtrack(x,y,dragdata);};__pFrameResizeBorderElement._on_movetrack=function(x,y,dragdata){this.linkedcontrol._on_border_movetrack(x,y,dragdata);};__pFrameResizeBorderElement._getRTLPositionLeft=function(left,width){return left;};nexacro.ModalOverlayElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var _pModalOverlayElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.ModalOverlayElement);nexacro.ModalOverlayElement.prototype=_pModalOverlayElement;_pModalOverlayElement._type_name="ModalOverlayElement";_pModalOverlayElement.create=function(){if(this.parent_elem&&!this.handle){var _win=this.linkedcontrol._getWindow();this.win_handle=_win.handle;this.left=0;this.top=0;this.width=_win.clientWidth;this.height=_win.clientHeight;var handle=this.handle=this.dest_handle=nexacro.__createControlElementHandle(this,this.win_handle,this.left,this.top,this.width,this.height,null,this.name);handle._linked_element=this;if(this.zindex>=0){nexacro.__setElementHandleZindex(handle,this.zindex);}_win=this.linkedcontrol._getWindow();var waitcomp_elem=_win.frame._getWaitComponentElement();var ref_dest_handle=null;if(waitcomp_elem){ref_dest_handle=waitcomp_elem.handle;}var owner_elem=_win;if(ref_dest_handle){nexacro.__insertElementHandle(owner_elem.dest_handle,handle,ref_dest_handle);}else{nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}this._refreshControl(handle);}};_pModalOverlayElement.destroy=function(){if(!this.handle){return;}var _win=this.linkedcontrol._getWindow();var owner_elem=_win;nexacro.__destroyElementHandle(owner_elem.handle,this.handle);this.handle=null;};_pModalOverlayElement.setElementSize=function(width,height,update){nexacro.Element.prototype.setElementSize.call(this,width,height,update);};_pModalOverlayElement._getRootWindowHandle=function(){return this.win_handle;};nexacro.ScrollableControlElement=function(parent_elem,use_multiinner){this.parent=parent_elem;this.parent_elem=parent_elem;var client_element=new nexacro._ContainerElement(this);this._client_elem=client_element;};var _pScrollableControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.ScrollableControlElement);nexacro.ScrollableControlElement.prototype=_pScrollableControlElement;_pScrollableControlElement._type_name="ScrollableControlElement";_pScrollableControlElement.create=function(win){var win_handle;var owner_elem;var bPositionRtl;var left;var handle;if(!this._is_popup){owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;win_handle=win.handle||owner_elem._getRootWindowHandle();bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createScrollableControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,this._is_control);if(this._init_width>0||this._init_height>0){nexacro.__setElementHandleInitPosSize(handle,this._init_left,this._init_top,this._init_width,this._init_height);}this._refreshControl(handle);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}}}else{if(!this.handle){var linkedcontrol=this.linkedcontrol;win_handle=win.handle;owner_elem=win;bPositionRtl=this._isParentRtl();left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createScrollableControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),linkedcontrol._unique_id,this._is_control);this.handle=this.dest_handle=handle;this._refreshControl(handle);if(linkedcontrol._findOwnerElementHandle){var owner_elem_info=linkedcontrol._findOwnerElementHandle();if(owner_elem_info.is_append){nexacro.__appendElementHandle(owner_elem_info.owner_handle,handle);}else{nexacro.__insertElementHandle(owner_elem_info.owner_handle,handle,owner_elem_info.ref_handle);}this.owner_elem=owner_elem_info.owner_handle._linked_element;}else{nexacro.__appendElementHandle(win_handle,handle);this.owner_elem=owner_elem;}}}if(this.handle&&!this._client_elem.handle){this._client_elem.create(win);}if(this.handle){var step_count=this._step_count;if(step_count>0){this._step_containers=[];for(var i=0;i<step_count;i++ ){var step_client=new nexacro._ContainerElement(this._client_elem);step_client.setElementPosition(i*this.client_width,0);step_client.setElementSize(this.client_width,this.container_maxheight);step_client.create(this._getWindow());this._step_containers.push(step_client);}}}};_pScrollableControlElement._on_destroy=function(){var handle=this.handle;if(handle){var step_containers=this._step_containers;if(step_containers){var step_count=step_containers.length;for(var i=0;i<step_count;i++ ){var step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}this._hscroll_control=null;this._vscroll_control=null;}};_pScrollableControlElement._on_clearContents=function(){if(this.handle){var step_containers=this._step_containers;if(step_containers){var step_count=step_containers.length;for(var i=0;i<step_count;i++ ){var step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}}};_pScrollableControlElement._setInnerElementScrollMaxTops=function(tops){};_pScrollableControlElement.initElementInfo=function(){nexacro.ControlElement.prototype.initElementInfo.call(this);this._init_left=0;this._init_top=0;this._init_width=0;this._init_height=0;var control=this.linkedcontrol;if(control._is_scrollable){this._hscroll_control=null;this._vscroll_control=null;this._step_containers=null;this.zoom=100;this.scroll_left=0;this.scroll_top=0;this.container_maxwidth=0;this.container_maxheight=0;this.hscroll_limit=0;this.vscroll_limit=0;this._hscroll_size=0;this._vscroll_size=0;this._hscrollbartype="";this._vscrollbartype="";this._scrolltype="";this._scrollview_width_top=0;this._step_count=0;this._step_index= -1;this._use_translate_scroll=(control._use_translate_scroll===false)?control._use_translate_scroll:nexacro._use_translate_scroll;this.setElementScrollbarSize(control._getHScrollBarSize(),control._getVScrollBarSize(),control._getHScrollBarType(),control._getVScrollBarType(),control.scrolltype);}else if(control._is_expandable){this._expandbarwidth=0;this._expandbarheight=0;this._expandbartype=false;this._expanddirtype="horz";this._expandvisible;this._expandarrange;this._use_translate_scroll=false;this._on_updateClientRect=this._on_updateClientRectExpand;this._on_change_clientPos=this._on_change_clientPosExpand;this._on_change_clientSize=this._on_change_clientSizeExpand;}};_pScrollableControlElement.setElementStepCount=function(count){if(this._step_count!=count){var i,step_client,step_count=this._step_count;var step_containers=this._step_containers;if(step_containers&&this._step_count){for(i=0;i<step_count;i++ ){step_client=step_containers[i];step_client.destroy();}this._step_containers=null;}this._step_count=count;this._updateClientRect();if(this.handle&&count>0){this._step_containers=[];for(i=0;i<count;i++ ){step_client=new nexacro._ContainerElement(this._client_elem);step_client.setElementPosition(i*this.client_width,0);step_client.setElementSize(this.client_width,this.client_height);step_client.create(this._getWindow());this._step_containers.push(step_client);}}}};_pScrollableControlElement.setElementStepIndex=function(index){if(this._step_index!=index){if(this._step_count>0){if(index> -1&&this._step_count>index){this._step_index=index;}}else{this._step_index=index;}}};_pScrollableControlElement.setElementZoom=function(zoomfactor){var handle=this.handle;if(handle){if(zoomfactor<0){zoomfactor=0;}this.zoom=zoomfactor;var client=this.getContainerElement(this._step_index);nexacro.__setElementHandleScale(client.handle,this.zoom);this._updateClientRect();}};_pScrollableControlElement.setElementScrollMaxSize=function(width,height){if(this.container_maxwidth!=width||this.container_maxheight!=height){this.container_maxwidth=width;this.container_maxheight=height;if(this._step_count){var client_elem=this.getContainerElement(this._step_index);if(client_elem){client_elem.setElementScrollMaxSize(this.client_width,height);}}if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}this._updateClientRect();return true;}return false;};_pScrollableControlElement.setElementScrollbarSize=function(hscroll_size,vscroll_size,hscrollbartype,vscrollbartype,scrolltype){var ret=false;if(this._vscroll_size!=vscroll_size||this._hscroll_size!=hscroll_size){this._vscroll_size=vscroll_size|0;this._hscroll_size=hscroll_size|0;ret=true;}if(this._hscrollbartype!=hscrollbartype||this._vscrollbartype!=vscrollbartype){this._hscrollbartype=hscrollbartype;this._vscrollbartype=vscrollbartype;ret=true;}if(this._scrolltype!=scrolltype){this._scrolltype=scrolltype;ret=true;}if(ret){this._updateClientRect();}return ret;};_pScrollableControlElement.setElementExpandbarSize=function(expandbarsize,expandbartype,expanddirtype,expandvisible,expandarrange){var ret=false;if(this._expandbarwidth!=expandbarsize[0]){this._expandbarwidth= +expandbarsize[0];ret=true;}if(this._expandbarheight!=expandbarsize[1]){this._expandbarheight= +expandbarsize[1];ret=true;}if(this._expandbartype!=expandbartype){this._expandbartype=expandbartype;ret=true;}if(this._expanddirtype!=expanddirtype){this._expanddirtype=expanddirtype;ret=true;}if(this._expandvisible!=expandvisible){this._expandvisible=expandvisible;ret=true;}if(this._expandarrange!=expandarrange){this._expandarrange=expandarrange;ret=true;}if(ret){this._updateClientRect();}return ret;};_pScrollableControlElement.getContainerElement=function(position_step){var step_count=this._step_count;var step_index=this._step_index;var step_containers=this._step_containers;if(step_count>0&&step_containers&&step_count>position_step){if(position_step<0||position_step==null){position_step=(step_index> -1?step_index:0);}return step_containers[position_step];}else{return this._client_elem;}};_pScrollableControlElement.getElementScrollLeft=function(){var container=this.getContainerElement(this.position_step);if(!container){return 0;}return container.getElementScrollLeft();};_pScrollableControlElement.getElementScrollTop=function(){var container=this._client_elem;if(!container){return 0;}return container.getElementScrollTop();};_pScrollableControlElement.getElementScrollWidth=function(){var container=this.getContainerElement(this.position_step);if(!container){return 0;}return container.getElementScrollWidth();};_pScrollableControlElement.getElementScrollHeight=function(){var container=this._client_elem;if(!container){return 0;}return container.getElementScrollHeight();};_pScrollableControlElement.setElementVScrollPos=function(vpos){if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}if(this.scroll_top!=vpos||this._reset_scrollpos){this.scroll_top=vpos;if(this._step_count>0){this.getContainerElement(this._step_index)._setElementVScrollPos(vpos);}else if(this._client_elem._use_translate_scroll){this._client_elem._setElementVScrollPos(vpos);}if(this.linkedcontrol){this.linkedcontrol._setVscrollPos(vpos);}}};_pScrollableControlElement._updateClientRect=function(update){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if((ret&2)||update){this._on_change_clientSize(this.client_width,this.client_height);}};_pScrollableControlElement._on_change_clientPos=function(left,top){if(this._client_elem){if(this.rtl&&this._vscroll_visible){left=left-this._vscroll_size;}this._client_elem.setElementPosition(left,top);var step_count=this._step_count;var step_index=this._step_index;var step_containers=this._step_containers;if(step_count>0&&step_containers){var zclient_width=this._zclient_width;for(var i=0;i<step_count;i++ ){var step_client_elem=step_containers[i];left=zclient_width*i;if(this.rtl&&this._vscroll_visible){left=(zclient_width*i)+this._vscroll_size;}step_client_elem.setElementPosition(left,0);if(i==step_index){step_client_elem.setElementSize(zclient_width,this.container_maxheight);}}step_index=this._step_index;var step_scroll_left=zclient_width*step_index;if(this.scroll_left!=step_scroll_left){this.scroll_left=step_scroll_left;this._client_elem._setElementHScrollPos(step_scroll_left);}}}else if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;var newLeft=this._getRTLPositionLeft(left,this.width);if(newLeft||top){nexacro.__setElementHandlePosition(dest_handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(dest_handle);}}var control=this.linkedcontrol;if(control){control.on_change_containerPos(left,top);}};_pScrollableControlElement._on_change_clientPosExpand=function(left,top){var client_elem=this._client_elem;if(client_elem){if(this.rtl&&this._expandbartype&&this._expanddirtype=="horz"){left=left-this._expandbarwidth;}client_elem.setElementPosition(left,top);}else{var handle=this.handle;var dest_handle=this.dest_handle;if(handle&&handle!=dest_handle){var newLeft=this._getRTLPositionLeft(left,this.width);if(newLeft||top){nexacro.__setElementHandlePosition(dest_handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(dest_handle);}}}var control=this.linkedcontrol;if(control){control.on_change_containerPos(left,top);}};_pScrollableControlElement._on_change_clientSize=function(width,height){if(this._client_elem){this._client_elem.setElementSize(width,height);var step_count=this._step_count;var step_containers=this._step_containers;if(step_count>0&&step_containers){var max_height=Math.max(height,this.container_maxheight);var zclient_width=this._zclient_width;for(var i=0;i<step_count;i++ ){var step_client_elem=step_containers[i];step_client_elem.setElementSize(zclient_width,max_height);}}}else if(this.handle&&this.handle!=this.dest_handle){var dest_handle=this.dest_handle;nexacro.__setElementHandleSize(dest_handle,width,height);}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pScrollableControlElement._on_change_clientSizeExpand=function(width,height){var client_elem=this._client_elem;if(client_elem){client_elem.setElementSize(width,height);}else{var handle=this.handle;var dest_handle=this.dest_handle;if(handle&&handle!=dest_handle){nexacro.__setElementHandleSize(dest_handle,width,height);}}var control=this.linkedcontrol;if(control){control.on_change_containerRect(width,height);}};_pScrollableControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var cur_client_width=this.client_width;var cur_client_height=this.client_height;var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}var client_elem=this._client_elem;if(!client_elem){return 0;}var zoomfactor=this.zoom/100;var zclient_width=client_width;var zclient_height=client_height;if(client_width!=0){zclient_width=client_width/zoomfactor;}if(client_height!=0){zclient_height=client_height/zoomfactor;}this._zclient_width=zclient_width;this._zclient_height=zclient_height;var container_maxwidth=this.container_maxwidth;var container_maxheight=this.container_maxheight;var scroll_left=this.scroll_left;var scroll_top=this.scroll_top;if(zoomfactor!=1){var factor=4;zclient_width=nexacro.floor(zclient_width,factor);zclient_height=nexacro.floor(zclient_height,factor);container_maxwidth=nexacro.floor(container_maxwidth,factor);container_maxheight=nexacro.floor(container_maxheight,factor);}var step_count=this._step_count;var step_containers=this._step_containers;if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width;}var reset_vlimit=false;var reset_hlimit=false;this._vscroll_visible=false;var hscroll_limit=0;var vscroll_limit=0;var hscrollbartype=this._hscrollbartype;var vscrollbartype=this._vscrollbartype;var scrolltype=this._scrolltype;if(step_count>0&&step_containers){hscrollbartype="none";}if(container_maxwidth>zclient_width){if((scrolltype!="none"&&scrolltype!="vertical")&&hscrollbartype!="none"&&hscrollbartype!="autoindicator"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;}hscroll_limit=container_maxwidth-zclient_width;}else{if(hscrollbartype=="fixed"){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;}hscroll_limit=0;}if(container_maxheight>zclient_height){if(container_maxheight>=zclient_height){vscroll_limit=container_maxheight-zclient_height;}else if(container_maxheight>cur_client_height){vscroll_limit=container_maxheight-cur_client_height;}if((scrolltype!="none"&&scrolltype!="horizontal")&&vscrollbartype!="none"&&vscrollbartype!="autoindicator"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;this._vscroll_visible=true;}if(container_maxwidth>zclient_width){if((scrolltype!="none"&&scrolltype!="vertical")&&hscrollbartype!="none"&&hscrollbartype!="autoindicator"&&hscroll_limit==0){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;vscroll_limit+=this._hscroll_size;}hscroll_limit=container_maxwidth-zclient_width;}else if(container_maxwidth>cur_client_width){hscroll_limit=container_maxwidth-cur_client_width;}}else{if(vscrollbartype=="fixed"){client_width-=this._vscroll_size;zclient_width=client_width/zoomfactor;this._vscroll_visible=true;if(container_maxwidth>zclient_width){hscroll_limit=container_maxwidth-zclient_width;}else if(container_maxwidth>cur_client_width){hscroll_limit=container_maxwidth-cur_client_width;}}vscroll_limit=0;}if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width;if(container_maxwidth>zclient_width){hscroll_limit=container_maxwidth-zclient_width;}}if(this.hscroll_limit!=hscroll_limit){reset_hlimit=true;this.hscroll_limit=hscroll_limit;if(scroll_left>hscroll_limit){this.setElementHScrollPos(hscroll_limit);}}if(this.vscroll_limit!=vscroll_limit){reset_vlimit=true;this.vscroll_limit=vscroll_limit;if(scroll_top>vscroll_limit){this.setElementVScrollPos(vscroll_limit);}}this._zclient_width=zclient_width;this._zclient_height=zclient_height;var ret=0;if(this.client_left!=client_left||this.client_top!=client_top||this._isRtl()){this.client_left=client_left;this.client_top=client_top;ret=1;}else if(step_count>0){ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}else if(this.client_width!=zclient_width||this.client_height!=zclient_height){ret+=2;}else if(reset_hlimit||reset_vlimit){ret+=2;}return ret;};_pScrollableControlElement._on_updateClientRectExpand=function(){var ret=0;var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}var client_elem=this._client_elem;if(!client_elem||client_width==0||client_height==0){return ret;}if(this._expandbartype&&this._expanddirtype=="vert"){client_height-=this._expandbarheight;}if(this._expandbartype&&this._expanddirtype=="horz"){client_width-=this._expandbarwidth;}if(this.client_left!=client_left||this.client_top!=client_top||this._isRtl()){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=this._zclient_width=client_width;this.client_height=this._zclient_height=client_height;ret+=2;}return ret;};_pScrollableControlElement.setElementInitPosSize=function(init_left,init_top,init_width,init_height){this._init_left=init_left;this._init_top=init_top;this._init_width=init_width;this._init_height=init_height;var handle=this.handle;if(handle){nexacro.__setElementHandleInitPosSize(handle,init_left,init_top,init_width,init_height);}};nexacro._ContainerElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var __pContainerElement=nexacro._createPrototype(nexacro.Element,nexacro._ContainerElement);nexacro._ContainerElement.prototype=__pContainerElement;__pContainerElement._type_name="ContainerElement";__pContainerElement._scroll_left=0;__pContainerElement._scroll_top=0;__pContainerElement._use_translate_scroll=nexacro._use_translate_scroll;__pContainerElement.create=function(win){var owner_elem=this.parent_elem;if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;this._use_translate_scroll=owner_elem._use_translate_scroll;this.name=owner_elem.name+":container";var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createScrollableContainerElementHandle(this,win_handle,left,this.top,this.width,this.height,"nexacontainer",this.name);if(this._scroll_left!=0||this._scroll_top!=0){nexacro.__setElementHandleOffset(handle,this._scroll_left,this._scroll_top);}this.handle=this.dest_handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}};__pContainerElement.destroy=function(){this._destroyElementHandle();this.dest_handle=null;this.parent=null;this.parent_elem=null;};__pContainerElement.clearContents=function(){var handle=this.handle;var owner_elem=this.owner_elem;if(handle){handle._linked_element=null;if(owner_elem&&owner_elem.handle){nexacro.__destroyElementHandle(owner_elem.handle,handle);}this.owner_elem=null;this.handle=null;}};__pContainerElement._setElementVScrollPos=function(vpos){if(this._use_translate_scroll){if(this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_top=vpos;var handle=this.handle;if(handle){nexacro.__setElementHandleVScrollPos(handle,vpos);}}}};__pContainerElement._setElementHScrollPos=function(hpos){if(this._use_translate_scroll){if(this._scroll_left!=hpos||this.parent._reset_scrollpos){this._scroll_left=hpos;var handle=this.handle;if(handle){if(this._isRtl()){hpos= -hpos;}nexacro.__setElementHandleHScrollPos(handle,hpos);}}}};__pContainerElement._setElementScrollPos=function(hpos,vpos){if(this._use_translate_scroll){if(this._scroll_left!=hpos||this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_left=hpos;this._scroll_top=vpos;var handle=this.handle;if(handle){nexacro.__setElementHandleOffset(handle,hpos,vpos);}}}};__pContainerElement.setElementZoom=function(zoomfactor){if(this.handle){this.zoom=zoomfactor;nexacro.__setElementHandleScale(this.handle,zoomfactor);}};__pContainerElement._findScrollbarControl=function(elem,is_vert){while(elem){if(is_vert&&elem._vscroll_control&&elem._vscroll_control._isVisible()){return elem._vscroll_control;}else if(elem._hscroll_control&&elem._hscroll_control._isVisible()){return elem._hscroll_control;}elem=elem.parent;}};__pContainerElement._sendToBackElement=function(elem){if(elem&&elem.owner_elem.dest_handle==this.dest_handle&&elem.handle){nexacro.__setElementHandleSendToBack(elem.handle);}};__pContainerElement._bringToFrontElement=function(elem){if(elem&&elem.owner_elem.dest_handle==this.dest_handle&&elem.handle){nexacro.__setElementHandleBringToFront(elem.handle);}};__pContainerElement._moveToNextElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__setElementHandleMoveToNext(elem.handle,base_elem.handle);}};__pContainerElement._moveToPrevElement=function(elem,base_elem){if(elem&&base_elem&&elem.owner_elem==this&&base_elem.owner_elem==this&&elem.handle&&base_elem.handle){nexacro.__setElementHandleMoveToPrev(elem.handle,base_elem.handle);}};__pContainerElement.setElementScrollMaxSize=function(width,height){this._scroll_maxwidth=width;this._scroll_maxheight=height;};__pContainerElement.getElementScrollLeft=function(){return this._scroll_left;};__pContainerElement.getElementScrollTop=function(){return this._scroll_top;};__pContainerElement.getElementScrollWidth=function(){return this._scroll_maxwidth;};__pContainerElement.getElementScrollHeight=function(){return this._scroll_maxheight;};nexacro.PluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var _pPluginElement=nexacro._createPrototype(nexacro.Element,nexacro.PluginElement);nexacro.PluginElement.prototype=_pPluginElement;_pPluginElement._type_name="PluginElement";_pPluginElement._plugin_object=null;_pPluginElement.license="";_pPluginElement.lpkpath="";_pPluginElement.classid="";_pPluginElement.classid64="";_pPluginElement.codebase="";_pPluginElement.code="";_pPluginElement.archive="";_pPluginElement.mimetype="";_pPluginElement.pluginsrc="";_pPluginElement.plugintype="";_pPluginElement.pluginpage="";_pPluginElement.windowed=false;_pPluginElement.popupstyle=false;_pPluginElement.adjustalpha=false;_pPluginElement.usepersistdata=false;_pPluginElement.enable=true;_pPluginElement.font=null;_pPluginElement.color=null;_pPluginElement.cursor=null;_pPluginElement.align=null;_pPluginElement.padding=null;_pPluginElement.color=null;_pPluginElement.component=null;_pPluginElement._params=null;_pPluginElement._events=null;_pPluginElement._pluginname="";_pPluginElement.create=function(win){if(!this.handle){var win_handle=null;var owner_elem=null;var _linked_comp=null;if(this.parent_elem){owner_elem=this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){this.owner_elem=owner_elem;win_handle=win.handle||owner_elem._getRootWindowHandle();}_linked_comp=this.parent_elem.linkedcontrol;}var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createPluginElementHandle(this,win_handle,left,this.top,this.width,this.height);if(this.classid){nexacro.__setPluginElementHandleClassId(handle,this.classid);}if(this.classid64){nexacro.__setPluginElementHandleClassId64(handle,this.classid64);}if(this.adjustalpha){nexacro.__setPluginElementHandleAdjustAlpha(handle,this.adjustalpha);}if(this._pluginname){nexacro.__setPluginElementHandlePluginName(handle,this._pluginname);}if(this.mimetype){nexacro.__setPluginElementHandleMIMEType(handle,this.mimetype);}if(this.pluginsrc){nexacro.__setPluginElementHandlePluginSrc(handle,this.pluginsrc);}if(this.pluginpage){nexacro.__setPluginElementHandlePluginPage(handle,this.pluginpage);}if(this.code){nexacro.__setPluginElementHandleCode(handle,this.code);}if(this.codebase){nexacro.__setPluginElementHandleCodebase(handle,this.codebase);}var params=this._params;var i,param_cnt=(params?params.length:0);for(i=0;i<param_cnt;i++ ){nexacro.__setPluginElementHandleAttribute(handle,params.get_id(i),params.get_item(i));}if(this.mimetype&&this.classid==""){var events=this._events;var event_cnt=events.length;for(i=0;i<event_cnt;i++ ){this.addEventHandler(events.get_id(i),events.get_item(i));}}if(!this.visible||(_linked_comp&&_linked_comp.visible==false)){nexacro.__setElementHandleVisible(handle,false);if(this.visible){this.visible=false;}}if(!this.enable||(_linked_comp&&_linked_comp.enable==false)){nexacro.__setElementHandleEnable(handle,false);if(this.enable){this.enable=false;}}if(this.windowed){nexacro.__setPluginElementHandleWindowed(handle,this.windowed);if(this.popupstyle){nexacro.__setPluginElementHandlePopupstyle(handle,this.popupstyle);}}if(this.font){nexacro.__setElementHandleFontObject(handle,this.font);}if(this.color){nexacro.__setElementHandleColorObject(handle,this.color);}this.handle=handle;this.initEvent();if(owner_elem&&owner_elem.handle){nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}nexacro.__createdPluginElementHandle(handle);this._plugin_object=new nexacro.PluginObject();if(this._plugin_object){this._plugin_object.handle=nexacro.__getPluginElementHandleObject(this.handle);}}};_pPluginElement.destroy=function(){var handle=this.handle;if(handle){var owner_handle=null;if(this.owner_elem&&this.owner_elem.handle){owner_handle=this.owner_elem.handle;nexacro.__destroyElementHandle(owner_handle,this.handle);}this.owner_elem=null;this.handle=null;}this.parent=null;this.parent_elem=null;var params=this._params;if(params){params.destroy();this._params=null;}var events=this._events;if(events){events.destroy();this._events=null;}var plugin_object=this._plugin_object;if(plugin_object){plugin_object.destroy();this._plugin_object=null;}};_pPluginElement.initEvent=function(){if(this.handle){nexacro._observeWrapperEvent(this.handle,null,"_on_plugin_event",this._on_plugin_event, -1,null);}};_pPluginElement._on_plugin_event=function(evt_id,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9,arg10,arg11,arg12,arg13,arg14,arg15,arg16,arg17,arg18,arg19){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp&&evt_id){if(comp[evt_id]){var listener=comp[evt_id];if(listener){var handlers=listener._user_handlers;var len=handlers.length;var i,ret;var h;var obj=this;try{for(i=0;i<len;i++ ){h=handlers[i];if(obj.enableevent!==false){ret=h.handler.call(h.target,obj,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9,arg10,arg11,arg12,arg13,arg14,arg15,arg16,arg17,arg18,arg19);}}}catch(e){if(e.obj){nexacro._onSystemError(e.obj,e.name,e.message);}else{var msg=nexacro._getExceptionMessage(e);var environment=nexacro.getEnvironment();if(environment){nexacro._onSystemError(environment,e.name,msg);}}}}}}};_pPluginElement.on_update_position=function(){if(this.handle){nexacro.__updatePluginElementHandlePosition(this.handle);}};_pPluginElement.setElementFocus=function(){if(this.handle){nexacro.__setElementHandleFocus(this.handle);nexacro.__setLastFocusedElement(this);}};_pPluginElement.setElementPluginPosition=function(left,top){if(this.handle){this.setElementPosition(left,top);}};_pPluginElement.setElementLicense=function(license){if(this.license!=license){this.license=license;}};_pPluginElement.setElementLicenseFile=function(lpkpath){if(!this.handle&&this.lpkpath!=lpkpath){this.lpkpath=lpkpath;}};_pPluginElement.setElementMIMEType=function(_type){if(this.mimetype!=_type){this.mimetype=_type;}};_pPluginElement.setElementClassId=function(classid){if(this.classid!=classid){this.classid=classid;}};_pPluginElement.setElementClassId64=function(classid64){if(this.classid64!=classid64){this.classid64=classid64;}};_pPluginElement.setElementCodebase=function(codebase){if(this.codebase!=codebase){this.codebase=codebase;if(this.handle){nexacro.__setPluginElementHandleCodebase(this.handle,this.codebase);}}};_pPluginElement.setElementCode=function(code){if(this.code!=code){this.code=code;}};_pPluginElement.setElementArchive=function(archive){if(this.archive!=archive){this.archive=archive;}};_pPluginElement.setElementAdjustAlpha=function(adjustalpha){if(this.adjustalpha!=adjustalpha){this.adjustalpha=adjustalpha;}};_pPluginElement.setElementUsePersistData=function(usepersistdata){if(this.usepersistdata!=usepersistdata){this.usepersistdata=usepersistdata;}};_pPluginElement.getElementParam=function(name){if(this._plugin_object){return this._plugin_object.getProperty(name);}else{var params=this._params;return params.get_item(name);}};_pPluginElement.setElementParam=function(name,value){if(this._plugin_object){if(name){this._plugin_object.setProperty(name,value);}}else{var params=this._params;if(params.get_item(name)){params.set_item(name,value);}else{params.add_item(name,value);}}};_pPluginElement.setElementPluginSrc=function(src){if(this.pluginsrc!=src){this.pluginsrc=src;}};_pPluginElement.setElementPluginPage=function(pluginpage){if(this.pluginpage!=pluginpage){this.pluginpage=pluginpage;}};_pPluginElement.setElementWindowed=function(windowed){if(this.windowed!=windowed){this.windowed=windowed;if(this.handle){}}};_pPluginElement.setElementEnable=function(enable){if(this.enable!=enable){this.enable=enable;if(this.handle){nexacro.__setElementHandleEnable(this.handle,enable);}}};_pPluginElement.setElementVisible=function(visible){if(this.handle){nexacro.__setElementHandleVisible(this.handle,visible);}};_pPluginElement.setElementPopupStyle=function(popupstyle){if(this.popupstyle!=popupstyle){this.popupstyle=popupstyle;}};_pPluginElement._setElementPluginName=function(pluginname){if(this._pluginname!=pluginname){this._pluginname=pluginname;}};_pPluginElement.callMethod=function(){if(arguments.length<1){return;}if(this._plugin_object){return this._plugin_object.callMethod.apply(this._plugin_object,arguments);}};_pPluginElement._getPluginObject=function(){if(this._plugin_object){return this._plugin_object;}return null;};_pPluginElement.install=function(){if(this.handle&&this.codebase){nexacro.__callPluginElementHandleInstall(this.handle);}};_pPluginElement.isInstalled=function(){if(this.handle){return nexacro.__getPluginElementHandleIsInstalled(this.handle);}return false;};_pPluginElement.isLoaded=function(){if(this.handle){return nexacro.__isPluginElementHandleLoaded(this.handle);}return false;};_pPluginElement.addEventHandler=function(name,callback){if(this.handle&&this.classid==""&&this.mimetype){var paramsFromToStringRegex=/\(\)|\(.+\)/;var params=callback.toString().match(paramsFromToStringRegex)[0];var callfunc;var frmidx,frmlen;var parentFrame,parentFrame2;parentFrame=this.component.parent;if(parentFrame){callfunc="."+this.component.id+'["'+name+'"]; \n';callfunc+='if (eventFn) eventFn._firePluginEvent'+params+';';do{if(parentFrame instanceof nexacro.MainFrame){callfunc='var eventFn = nexacro.getApplication().mainframe'+callfunc;break;}if(parentFrame instanceof nexacro.ChildFrame){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2 instanceof nexacro.FrameSet||parentFrame2 instanceof nexacro.VFrameSet||parentFrame2 instanceof nexacro.HFrameSet||parentFrame2 instanceof nexacro.ChildFrame){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}else if(parentFrame2 instanceof nexacro.MainFrame){callfunc='.frame'+callfunc;}else if(parentFrame2 instanceof nexacro.Form){callfunc='.'+parentFrame.id+callfunc;}}}else if(parentFrame instanceof nexacro.FrameSet||parentFrame instanceof nexacro.VFrameSet||parentFrame instanceof nexacro.HFrameSet){parentFrame2=parentFrame.parent;if(parentFrame2){if(parentFrame2._frames&&parentFrame2._frames.length){frmlen=parentFrame2._frames.length;for(frmidx=0;frmidx<frmlen;frmidx++ ){if(parentFrame2._frames[frmidx]==parentFrame){callfunc='._frames['+frmidx+']'+callfunc;break;}}}}}else if(parentFrame instanceof nexacro.Div){callfunc='.'+parentFrame.id+callfunc;}else if(parentFrame instanceof nexacro.Form){callfunc='.form'+callfunc;}parentFrame=parentFrame.parent;}while(parentFrame)}callfunc='callback = function'+params+'\n{\n'+callfunc+"\n}";nexacro.__appendGlobalScript(name,nexacro._executeEvalStr(callfunc));}else{this._events.add_item(name,callback);}};_pPluginElement.removeEventHandler=function(name,callback){if(this.handle&&this.classid==""&&this.mimetype){nexacro.__removeGlobalScript(name);}else{this._events.delete_item(name);}};_pPluginElement.updateWindow=function(){if(this.windowed==true){nexacro.__updatePluginElementHandleWindow(this.handle);}};_pPluginElement.setElementMovie=function(movie){this.setElementParam("movie",movie);};_pPluginElement._play=function(){};_pPluginElement._stopPlay=function(){};_pPluginElement.getProperty=_pPluginElement.getElementParam;_pPluginElement.setProperty=_pPluginElement.setElementParam;_pPluginElement.setElementPluginMIMEType=nexacro._emptyFn;_pPluginElement._setElementFocus=_pPluginElement.setElementFocus;nexacro.PluginObject=function(handle){this.handle=handle;this._parentObject=null;};var __pPluginObject=nexacro._createPrototype(nexacro.Object,nexacro.PluginObject);nexacro.PluginObject.prototype=__pPluginObject;__pPluginObject._type_name="PluginObject";__pPluginObject.getProperty=function(){if(this.handle){Array.prototype.unshift.call(arguments,this.handle);var value=nexacro.__getPluginObjectHandleAttribute.apply(nexacro,arguments);if(value!=null&&typeof (value)=="object"){var pobject=new nexacro.PluginObject(value);return pobject;}return value;}};__pPluginObject.setProperty=function(name,value){if(this.handle){if(name){nexacro.__setPluginObjectHandleAttribute(this.handle,name,value);}}};__pPluginObject.callMethod=function(){if(arguments.length<1){return;}if(this.handle){Array.prototype.unshift.call(arguments,this.handle);var value=nexacro.__callPluginObjectHandleMethod.apply(nexacro,arguments);if(value!=null&&typeof (value)=="object"){var pobject=new nexacro.PluginObject();pobject.handle=value;return pobject;}return value;}};__pPluginObject.callScriptMethod=function(){if(arguments.length<1){return;}if(this.handle){Array.prototype.unshift.call(arguments,this.handle);var value=nexacro.__callPluginObjectHandleScriptMethod.apply(nexacro,arguments);if(value!=null&&typeof (value)=="object"){var pobject=new nexacro.PluginObject();pobject.handle=value;return pobject;}return value;}};__pPluginObject.destroy=function(){if(this.handle){nexacro.__destroyPluginObjectHandle(this.handle);this.handle=null;if(this._parentObject){this._parentObject.destroy();this._parentObject=null;}}};nexacro._WebBrowserPluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.parent_elem.windowed=true;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var __pWebBrowserPluginElement=nexacro._createPrototype(nexacro.PluginElement,nexacro._WebBrowserPluginElement);nexacro._WebBrowserPluginElement.prototype=__pWebBrowserPluginElement;__pWebBrowserPluginElement._type_name="WebBrowserPluginElement";__pWebBrowserPluginElement.windowed=true;__pWebBrowserPluginElement.classid="{8856F961-340A-11D0-A96B-00C04FD705A2}";__pWebBrowserPluginElement.src="";__pWebBrowserPluginElement._pluginname="WebBrowser";__pWebBrowserPluginElement._bInitNavigate=false;__pWebBrowserPluginElement.initEvent=function(){if(this.handle){nexacro._observeWrapperEvent(this.handle,null,"_on_plugin_event",this._on_plugin_event);}};__pWebBrowserPluginElement._on_plugin_event=function(evt_id,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg8,arg9){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){if(evt_id=="DocumentComplete"){var locationURL=this.getElementParam("LocationURL");if(locationURL==arg1){evt_id="onloadcompleted";if(comp.on_load_handler){var _win=comp._getWindow();var cur_focus_paths=_win.getCurrentFocusPaths();var pThis=comp;while(pThis&&pThis._is_nc_control){pThis=pThis.parent;}if(!pThis){return;}var focuspath_index= -1;if(cur_focus_paths){focuspath_index=nexacro._indexOf(cur_focus_paths,pThis);}if(focuspath_index<0){var focus_comp=cur_focus_paths?cur_focus_paths[cur_focus_paths.length-1]:null;if(focus_comp){focus_comp._apply_setfocus();focus_comp.on_focus_basic_action();}}nexacro.__restorePluginElementHandleWindowFocus(this.handle);return comp.on_load_handler(arg1);}}}else if(evt_id=="TitleChange"){comp.on_fire_onusernotify(comp,arg0);}if(comp[evt_id]){var listener=comp[evt_id];if(listener){return listener._fireEvent(this,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg8,arg9);}}}};__pWebBrowserPluginElement._getDoc=function(){return null;};__pWebBrowserPluginElement._setUrl=function(url,useurlhistory){if(this._plugin_object){this._setSharedVariablesToCookie(url);if(useurlhistory==false){var _url;if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){_url="javascript:location.replace(\""+url+"\");";}else{if(url=="about:blank"||this._bInitNavigate==false){this._bInitNavigate=true;this._plugin_object.callMethod("Navigate",url);return;}else{_url="javascript:location.replace(\""+url+"\");";}}this._plugin_object.callMethod("Navigate",_url);}else{this._plugin_object.callMethod("Navigate",url);}}};__pWebBrowserPluginElement._setGo=function(){if(this._plugin_object){this._plugin_object.callMethod("Refresh");}};__pWebBrowserPluginElement._setBack=function(){if(this._plugin_object){var state=this._plugin_object.callMethod("GoBack");if(state){return state.toLowerCase()=="true"?true:false;}}};__pWebBrowserPluginElement._setForward=function(){if(this._plugin_object){var state=this._plugin_object.callMethod("GoForward");if(state){return state.toLowerCase()=="true"?true:false;}}};__pWebBrowserPluginElement.callMethod=function(){if(arguments.length<1){return;}if(this._plugin_object){return this._pluginCallMethod(arguments);}};__pWebBrowserPluginElement._pluginCallMethod=function(args){var value;if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){var str=args[0];str+="(";for(var i=1;i<args.length;i++ ){if(typeof (args[i])=="string"){args[i]=nexacro.replaceAll(args[i],"'","\\'");args[i]=nexacro.replaceAll(args[i],"\n","");}str+="'";str+=args[i];str+="'";if(i+1<args.length){str+=",";}}str+=")";this._setUrl("javascript:"+str);}else{var _document=this._plugin_object.getProperty("document");if(_document){var _script=_document.getProperty("script");if(_script){value=_script.callScriptMethod.apply(_script,args);_script.destroy();}_document.destroy();}}return value;};__pWebBrowserPluginElement.getProperty=function(name){if(this._plugin_object){if(name=="window"){var _doc=this._plugin_object.getProperty("document");if(_doc){var _win=_doc.getProperty("parentWindow");if(_win){_win._parentObject=_doc;return _win;}_doc.destroy();}}return this._plugin_object.getProperty(name);}else{var params=this._params;return params.get_item(name);}};__pWebBrowserPluginElement._setSharedVariablesToCookie=function(url){var cookies="";var enginecookievars=nexacro._getCookieVariables(4);if(enginecookievars){for(var prop in enginecookievars){cookies+=(prop+'='+enginecookievars[prop].value+';');}}if(url&&url.indexOf("https")==0){enginecookievars=nexacro._getCookieVariables(6);if(enginecookievars){for(var _prop in enginecookievars){cookies+=(_prop+'='+enginecookievars[_prop].value+';');}}}if(cookies){nexacro._setSharedVariablesToCookie(url,cookies);}};__pWebBrowserPluginElement._setElementInternalFocus=nexacro._emptyFn;__pWebBrowserPluginElement._setElementLeaveMessage=nexacro._emptyFn;nexacro._VideoPlayerPluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.windowed=true;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var __pVideoPlayerPluginElement=nexacro._createPrototype(nexacro.PluginElement,nexacro._VideoPlayerPluginElement);nexacro._VideoPlayerPluginElement.prototype=__pVideoPlayerPluginElement;__pVideoPlayerPluginElement._type_name="VideoPlayerPluginElement";__pVideoPlayerPluginElement.classid="{6bf52a52-394a-11d3-b153-00c04f79faa6}";__pVideoPlayerPluginElement._pluginname="VideoPlayer";__pVideoPlayerPluginElement.initEvent=function(){if(this.handle){nexacro._observeWrapperEvent(this.handle,null,"_on_plugin_event",this._on_plugin_event);}};__pVideoPlayerPluginElement._on_plugin_event=function(evt_id,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg8,arg9){var getpro;var getitem;var errormsg;var statuscode;var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){if(evt_id=="PlayStateChange"){var state=null;switch(arg0){case 1:state="stop";break;case 2:state="pause";break;case 3:state="play";break;case 4:state="scanforward";break;case 5:state="scanreverse";break;case 6:state="buffer";break;case 7:state="wait";break;case 8:state="ended";break;case 9:state="transition";break;case 10:state="ready";break;default:state="undefined";break;}comp._on_statuschanged(state);}else if(evt_id=="OpenStateChange"){getpro=this._plugin_object.getProperty("controls");if(getpro){getitem=getpro.getProperty("currentItem");if(getitem){var width=getitem.getProperty("imagesourcewidth");var height=getitem.getProperty("imagesourceheight");var duration=getitem.getProperty("duration");var nResult=height/width;if(nResult==0.7500){comp.aspectratio="4 : 3";}else if(nResult==0.5625){comp.aspectratio="16 : 9";}else if(nResult==0.625){comp.aspectratio="16 : 10";}else if(nResult==0.8){comp.aspectratio="4 : 3";}else if(nResult==1){comp.aspectratio="1 : 1";}else{if(width>0&&height>0){var max,min;var temp,gcd;if(width<height){max=width;min=height;}else{max=height;min=width;}while(max%min!=0){temp=max%min;max=min;min=temp;}gcd=min;width=width/gcd;height=height/gcd;comp.aspectratio=width+" : "+height;}else{comp.aspectratio=width+" : "+height;}}if(width>0&&height>0){comp.videosize[0]=width;comp.videosize[1]=height;}else{comp.videosize[0]=0;comp.videosize[1]=0;}comp.duration=duration>0?Math.floor(duration*1000):0;getitem.destroy();}getpro.destroy();}}else if(evt_id=="PositionChange"){var millis=Math.floor(arg1*1000);comp._on_currenttimechanged(millis);}else if(evt_id=="MediaError"){if(typeof arg0=="object"){var mediaobj=new nexacro.PluginObject(arg0);{var erroritem=mediaobj.getProperty("error");if(erroritem){var errorcode=erroritem.getProperty("errorCode");var resultcode=nexacro.__getHResultFromWin32(errorcode).toUpperCase();switch(resultcode){case "C00D11B0":case "C00D11B3":case "C00D11C0":case "C00D11C1":case "C00D11B1":statuscode=2;errormsg="error occurred when downloading";break;case "C00D11A1":case "C00D11A2":statuscode=3;errormsg="error occurred when decoding";break;case "C00D1199":case "C00D119A":case "C00D1197":statuscode=4;errormsg="video not supported";break;default:statuscode=1;errormsg="fetching process aborted by user";break;}erroritem.destroy();comp._on_error("NativeError",errormsg,statuscode);}mediaobj.destroy();}}}else if(evt_id=="macVideoError"){getpro=this._plugin_object.getProperty("error");if(getpro){getitem=getpro.getProperty("Item");errormsg="error";statuscode=arg0;if(getitem){errormsg=getitem.getProperty("errorDescription");statuscode=getitem.getProperty("errorCode");getitem.destroy();}getpro.destroy();comp._on_error("NativeError",errormsg,statuscode);}}if(comp[evt_id]){var listener=comp[evt_id];if(listener){return listener._fireEvent(this,arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg8,arg9);}}}};__pVideoPlayerPluginElement._setVideoUrl=function(name,v){var source=v;var file_type;if(source){file_type=(source+"").substring(source.lastIndexOf(".")+1).toLowerCase();}var object=this._getPluginObject();if(object){object.setProperty(name,v);}if(this._getType(file_type)==false){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);var statuscode=4;var errormsg="video not supported";if(comp){comp._on_error("NativeError",errormsg,statuscode);}}};__pVideoPlayerPluginElement._getType=function(file_type){var ret=false;switch(file_type){case "avi":case "mov":case "mp4":ret=true;break;}return ret;};__pVideoPlayerPluginElement._setVideoEnable=function(name,v){this.enable=v;};__pVideoPlayerPluginElement._setVideoShowControlBar=function(name,v){var object=this._getPluginObject();if(object){var uiModeValue;if(v==true){uiModeValue="full";}else{uiModeValue="none";}object.setProperty("uiMode",uiModeValue);}};__pVideoPlayerPluginElement._setVideoCurrentTime=function(name,v){if(v> -1){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){var millis=v/1000;controls.setProperty("currentPosition",millis);controls.destroy();}}}};__pVideoPlayerPluginElement._setVideoLoop=function(name,v){var object=this._getPluginObject();if(object){var getpro=object.getProperty("settings");if(getpro){getpro.callMethod("setMode","loop",v);getpro.destroy();}}};__pVideoPlayerPluginElement._setVideoAutoPlay=function(name,v){var object=this._getPluginObject();if(object){var getpro=object.getProperty("settings");if(getpro){getpro.setProperty("autostart",v);getpro.destroy();}}};__pVideoPlayerPluginElement._setVideoVolume=function(name,v){var object=this._getPluginObject();if(object){var getpro=object.getProperty("settings");if(getpro){getpro.setProperty("volume",v);getpro.destroy();}}};__pVideoPlayerPluginElement._setVideoMute=function(name,v){var object=this._getPluginObject();if(object){var settings=object.getProperty("settings");if(settings){settings.setProperty("mute",v);settings.destroy();}}};__pVideoPlayerPluginElement._setVideo360VRMode=function(name,v){};__pVideoPlayerPluginElement._play=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("play");controls.destroy();}}};__pVideoPlayerPluginElement._pause=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("pause");controls.destroy();}}};__pVideoPlayerPluginElement._rewind=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("fastReverse");controls.destroy();}}};__pVideoPlayerPluginElement._stop=function(){var object=this._getPluginObject();if(object){var controls=object.getProperty("controls");if(controls){controls.callMethod("stop");controls.destroy();}}};__pVideoPlayerPluginElement.destroy=function(){var object=this._getPluginObject();if(object){object.callMethod("close");}};nexacro._GoogleMapPluginElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this.parent_elem.windowed=true;this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var __pGoogleMapPluginElement=nexacro._createPrototype(nexacro.PluginElement,nexacro._GoogleMapPluginElement);nexacro._GoogleMapPluginElement.prototype=__pGoogleMapPluginElement;__pGoogleMapPluginElement._type_name="GoogleMapElement";__pGoogleMapPluginElement._pluginname="GoogleMap";__pGoogleMapPluginElement.destroy=function(){nexacro.PluginElement.prototype.destroy.call(this);};__pGoogleMapPluginElement._setLoad=function(params){if(this._plugin_object){this.callMethod("load",params);}};__pGoogleMapPluginElement._setDestroy=function(params){if(this._plugin_object){this.callMethod("destroy",params);}};__pGoogleMapPluginElement._getAddress=function(params){if(this._plugin_object){this.callMethod("getAddress",params);}};__pGoogleMapPluginElement._getCoordinates=function(params){if(this._plugin_object){this.callMethod("getCoordinates",params);}};__pGoogleMapPluginElement._setRemove=function(params){if(this._plugin_object){this.callMethod("removeItem",params);}};__pGoogleMapPluginElement._setMarker=function(params){if(this._plugin_object){this.callMethod("Marker",params);}};__pGoogleMapPluginElement._setPolyline=function(params){if(this._plugin_object){this.callMethod("Polyline",params);}};__pGoogleMapPluginElement._setPolygon=function(params){if(this._plugin_object){this.callMethod("Polygon",params);}};__pGoogleMapPluginElement._setCircle=function(params){if(this._plugin_object){this.callMethod("Circle",params);}};__pGoogleMapPluginElement.initEvent=function(){if(this.handle){nexacro._observeWrapperEvent(this.handle,null,"_on_plugin_event",this._on_plugin_event, -1,null);}};__pGoogleMapPluginElement._on_plugin_event=function(evt_id,args){var comp=(this.parent_elem?this.parent_elem.linkedcontrol:null);if(comp){var objArgs=nexacro._executeGlobalEvalStr("("+args+")");if(evt_id=="GoogleMap"){if(objArgs.eventid=="onload"){if(comp.on_load_handler){return comp.on_load_handler(objArgs.eventid,objArgs.centerlocation,objArgs.coordinates,objArgs.viewmode,objArgs.zoomlevel,objArgs.addresses);}}else if(objArgs.eventid=="onerror"){if(comp.on_error_handler){return comp.on_error_handler(objArgs.eventid,objArgs.errormsg,objArgs.errorcode);}}else if(objArgs.eventid=="onrecvsuccess"){if(comp.on_recvsuccess_handler){return comp.on_recvsuccess_handler(objArgs.eventid,objArgs.centerlocation,objArgs.coordinates,objArgs.viewmode,objArgs.zoomlevel,objArgs.addresses);}}else if(objArgs.eventid=="onclick"){if(comp.on_click_handler){return comp.on_click_handler(objArgs.eventid,objArgs.location);}}else if(objArgs.eventid=="ondrag"){if(comp.on_drag_handler){return comp.on_drag_handler(objArgs.eventid,objArgs.location);}}else if(objArgs.eventid=="oncenterchanged"){if(comp.on_centerchanged_handler){return comp.on_centerchanged_handler(objArgs.eventid,objArgs.centerlocation,objArgs.coordinates,objArgs.viewmode,objArgs.zoomlevel,objArgs.addresses);}}else if(objArgs.eventid=="onmapdragstart"){if(comp.on_mapdragstart_handler){return comp.on_mapdragstart_handler(objArgs.eventid,objArgs.location);}}else if(objArgs.eventid=="onmapdrag"){if(comp.on_mapdrag_handler){return comp.on_mapdrag_handler(objArgs.eventid,objArgs.location);}}else if(objArgs.eventid=="onmapdragend"){if(comp.on_mapdragend_handler){return comp.on_mapdragend_handler(objArgs.eventid,objArgs.location);}}}}};nexacro.CanvasElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;};var _pCanvasElement=nexacro._createPrototype(nexacro.Element,nexacro.CanvasElement);nexacro.CanvasElement.prototype=_pCanvasElement;_pCanvasElement._type_name="CanvasElement";_pCanvasElement.lineOffset=0.5;_pCanvasElement.scale=10;_pCanvasElement.half_scale=5;_pCanvasElement.scalex=0;_pCanvasElement.scaley=0;_pCanvasElement.fillStyle=null;_pCanvasElement.strokeColor="#000000";_pCanvasElement.lineType="solid";_pCanvasElement.lineCap='butt';_pCanvasElement.lineJoin='miter';_pCanvasElement.lineWidth=1;_pCanvasElement.miterLimit=10;_pCanvasElement.shadowColor=null;_pCanvasElement.shadowOffsetX=0;_pCanvasElement.shadowOffsetY=0;_pCanvasElement.shadowBlur=0;_pCanvasElement.font=null;_pCanvasElement.textAlign="left";_pCanvasElement.textBaseline="top";_pCanvasElement.globalAlpha=1;_pCanvasElement.globalCompositeOperation=1;_pCanvasElement._fillStyle_rgb="#000000";_pCanvasElement.strokeStyle_rgb="#000000";_pCanvasElement.shadowColor_rgb="#000000";_pCanvasElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle){var handle=this.handle;if(!handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}handle=nexacro.__createCanvasElementHandle(this,win_handle,left,this.top,this.width,this.height);if(!this.font){this.font=new nexacro.FontObject("8px Arial");nexacro.__setCanvasElementHandleFontObject(handle,this.font);}if(!this.visible){nexacro.__setElementHandleVisible(handle,false);}this.handle=handle;nexacro.__appendElementHandle(owner_elem.dest_handle,handle);}}};_pCanvasElement.destroy=function(){var handle=this.handle;if(handle){var owner_handle=null;if(this.owner_elem&&this.owner_elem.handle){owner_handle=this.owner_elem.handle;nexacro.__destroyElementHandle(owner_handle,handle);}this.owner_elem=null;this.handle=null;}this.parent=null;this.parent_elem=null;};_pCanvasElement.createPattern=function(imagesource,repeat_opt,size){var handle=this.handle;if(handle){var pattern=new nexacro._CanvasFillPattern();pattern.repeattype=repeat_opt;pattern.value=imagesource;if(imagesource instanceof nexacro.CanvasElement){var url=nexacro.__toDataURLCanvasElementHandle(handle);if(url){var imgObj=new nexacro.Image();imgObj.set_src(url);if(size){imgObj.width=size.width;imgObj.height=size.height;}pattern.imageobject=imgObj;pattern.imageobject.handle=nexacro._getImageObject(url,pattern.onloadcallback,pattern);}}else if(imagesource instanceof nexacro.Image){pattern.imageobject=imagesource;if(imagesource.handle){pattern.isloaded=true;}else{if(size){pattern.imageobject.width=size.width;pattern.imageobject.height=size.height;}if(imagesource.src){imagesource.handle=nexacro._getImageObject(imagesource.src,pattern.onloadcallback,pattern);}else{pattern.isloaded=false;}}}return pattern;}return null;};_pCanvasElement.createLinearGradient=function(aX0,aY0,aX1,aY1){var handle=this.handle;if(handle){var gradient=new nexacro._CanvasGradient('linear');gradient.x0=aX0;gradient.y0=aY0;gradient.x1=aX1;gradient.y1=aY1;return gradient;}return null;};_pCanvasElement.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){var handle=this.handle;if(handle){var gradient=new nexacro._CanvasGradient('radial');gradient.x0=aX0;gradient.y0=aY0;gradient.r0=aR0;gradient.x1=aX1;gradient.y1=aY1;gradient.r1=aR1;return gradient;}return null;};_pCanvasElement.setElementFillStyle=function(fillstyle){var handle=this.handle;if(handle&&fillstyle){this.fillStyle=fillstyle;if(fillstyle instanceof nexacro._ColorObject){nexacro.__setCanvasElementHandleFillColor(handle,fillstyle);}else if(fillstyle instanceof nexacro._CanvasFillPattern){nexacro.__setCanvasFillPattern(handle,fillstyle);}else{nexacro.__setCanvasFillGradation(handle,fillstyle);}}};_pCanvasElement.setElementFont=function(font){if(!font){return;}this.font=font;var handle=this.handle;if(handle){nexacro.__setCanvasElementHandleFontObject(handle,font);}};_pCanvasElement.setElementGlobalAlpha=function(alpha){this.globalAlpha=alpha;var handle=this.handle;if(handle){nexacro.__setCanvasElementHandleGlobalAlpha(handle,alpha);}};_pCanvasElement.setElementGlobalCompositeOperation=function(operation){this.globalCompositeOperation=operation;var handle=this.handle;if(handle){nexacro.__setCanvasElementHandleGlobalCompositoperation(handle,operation);}};_pCanvasElement.setElementLineStyle=function(linetype){var handle=this.handle;if(handle){this.lineType=linetype;nexacro.__setCanvasElementHandleLineStyle(handle,linetype);}};_pCanvasElement.setElementLineCap=function(captype){var handle=this.handle;if(handle){this.lineCap=captype;nexacro.__setCanvasElementHandleLineCap(handle,captype);}};_pCanvasElement.setElementLineJoin=function(jointype){var handle=this.handle;if(handle){this.lineJoin=jointype;nexacro.__setCanvasElementHandleLineJoin(handle,jointype);}};_pCanvasElement.setElementLineWidth=function(size){var handle=this.handle;if(handle&&isFinite(size)){this.lineWidth=size;this.lineOffset=Math.round(size/2);nexacro.__setCanvasElementHandleLineWidth(handle,size);}};_pCanvasElement.setElementMiterLimit=function(size){var handle=this.handle;if(handle){this.miterLimit=size;nexacro.__setCanvasElementHandleMiterLimit(handle,size);}};_pCanvasElement.setElementShadowBlur=function(fact){var handle=this.handle;if(handle){this.shadowBlur=fact;nexacro.__setCanvasElementHandleShadowBlur(handle,fact);}};_pCanvasElement.setElementShadowColor=function(color){var handle=this.handle;if(handle){this.shadowColor=color;nexacro.__setCanvasElementHandleShadowColor(handle,nexacro._getWebColorFromXreColor(color.value));}};_pCanvasElement.setElementShadowOffsetX=function(sx){var handle=this.handle;if(handle){this.shadowOffsetX=sx;nexacro.__setCanvasElementHandleShadowOffsetx(handle,sx);}};_pCanvasElement.setElementShadowOffsetY=function(sy){var handle=this.handle;if(handle){this.shadowOffsetY=sy;nexacro.__setCanvasElementHandleShadowOffsety(handle,sy);}};_pCanvasElement.setElementStrokeStyle=function(color){var handle=this.handle;if(handle&&color){this.strokeStyle=color;nexacro.__setCanvasElementHandleStrokeColor(handle,color);}};_pCanvasElement.setElementTextAlign=function(textalign){var handle=this.handle;if(handle){this.textAlign=textalign;nexacro.__setCanvasElementHandleTextAlign(handle,textalign);}};_pCanvasElement.setElementTextBaseline=function(basealign){var handle=this.handle;if(handle){this.textBaseline=basealign;nexacro.__setCanvasElementHandleTextBaseline(handle,basealign);}};_pCanvasElement.arc=function(x,y,r,start_rad,end_rad,counterclockwise){var handle=this.handle;if(handle){counterclockwise=(counterclockwise)?false:counterclockwise;nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r,start_rad,end_rad,counterclockwise);}};_pCanvasElement.arcTo=function(x,y,x2,y2,r){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleArcToPath(handle,x,y,x2,y2,r);}};_pCanvasElement.beginPath=function(){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.bezierCurveTo=function(p1x,p1y,p2x,p2y,x,y){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleBezierCurveToPath(handle,p1x,p1y,p2x,p2y,x,y);}};_pCanvasElement.clearRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__clearCanvasElementHandleRect(handle,x,y,dx,dy);}};_pCanvasElement.clip=function(){var handle=this.handle;if(handle){nexacro.__clipCanvasElementHandle(handle);}};_pCanvasElement.closePath=function(){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleClosePath(handle);}};_pCanvasElement.createImageData=function(iWidth,iHeight){var handle=this.handle;if(handle){return nexacro.__createCanvasElementHandleImageData(handle,iWidth,iHeight);}};_pCanvasElement.drawImage=function(_image_handle,x,y,imgwidth,imgheight){var handle=this.handle;if(handle){var absoluteUrl=_image_handle.src;if(absoluteUrl&&absoluteUrl.substring(0,4).toLowerCase()=="url("){absoluteUrl=absoluteUrl.substring(5,absoluteUrl.length-2);}if(absoluteUrl&&!nexacro._isAbsolutePath(absoluteUrl)){absoluteUrl=nexacro._getImageLocation(absoluteUrl);}nexacro.__drawCanvasElementHandleImage(handle,absoluteUrl,x,y,imgwidth,imgheight);}};_pCanvasElement.fill=function(){var handle=this.handle;if(handle){nexacro.__fillCanvasElementHandlePath(handle);}};_pCanvasElement.fillRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__fillCanvasElementHandleRect(handle,x,y,dx,dy);}};_pCanvasElement.fillText=function(text,x,y,maxwidth){var handle=this.handle;if(handle){var font=this.font;if(font){nexacro.__setCanvasElementHandleFontObject(handle,font);}var color=this.fillStyle;if(color){nexacro.__setCanvasElementHandleFillColor(handle,nexacro._getWebColorFromXreColor(color.value));}nexacro.__fillCanvasElementHandleText(handle,text,x,y,maxwidth);}};_pCanvasElement.getImageData=function(sx,sy,width,height){var handle=this.handle;if(handle){return nexacro.__getCanvasElementHandleImageData(handle,sx,sy,width,height);}};_pCanvasElement.isPointInPath=function(x,y){var handle=this.handle;if(handle){return nexacro.__isPointInCanvasElementHandlePath(handle,x,y);}};_pCanvasElement.lineTo=function(x,y){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleLineToPath(handle,x,y);}};_pCanvasElement.moveTo=function(x,y){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleMoveToPath(handle,x,y);}};_pCanvasElement.putImageData=function(_image_handle,sx,sy,ix,iy,iwidth,iheight){var handle=this.handle;if(handle){nexacro.__putCanvasElementHandleImageData(handle,_image_handle,sx,sy,ix,iy,iwidth,iheight);}};_pCanvasElement.quadraticCurveTo=function(cp1x,cp1y,cp2x,cp2y){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleQuadraticCurveToPath(handle,cp1x,cp1y,cp2x,cp2y);}};_pCanvasElement.rect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleRectPath(handle,x,y,dx,dy);}};_pCanvasElement.rotate=function(angle){var handle=this.handle;if(handle){nexacro.__rotateCanvasElementHandle(handle,angle);}};_pCanvasElement.rotate2=function(radian){var handle=this.handle;if(handle){var angle=radian*Math.PI/180;nexacro.__rotateCanvasElementHandle(handle,angle);}};_pCanvasElement.scale=function(dx,dy){var handle=this.handle;this.scalex=dx;this.scaley=dy;if(handle){nexacro.__scaleCanvasElementHandle(handle,dx,dy);}};_pCanvasElement.setTransform=function(a,b,c,d,e,f){var handle=this.handle;if(handle){nexacro.__setCanvasElementHandleTransform(handle,a,b,c,d,e,f);}};_pCanvasElement.stroke=function(){var handle=this.handle;if(handle){nexacro.__strokeCanvasElementHandlePath(handle);}};_pCanvasElement.strokeRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__strokeCanvasElementHandleRect(handle,x,y,dx,dy);}};_pCanvasElement.strokeText=function(text,tx,ty,maxwidth){var handle=this.handle;if(handle){nexacro.__strokeCanvasElementHandleText(handle,text,tx,ty,maxwidth);}};_pCanvasElement.transform=function(a,b,c,d,e,f){var handle=this.handle;if(handle){nexacro.__transformCanvasElementHandle(handle,a,b,c,d,e,f);}};_pCanvasElement.translate=function(x,y){var handle=this.handle;if(handle){nexacro.__translateCanvasElementHandle(handle,x,y);}};_pCanvasElement.arc2=function(x,y,r,start_deg,end_deg,counterclockwise){var handle=this.handle;if(handle){var start_rad=start_deg*Math.PI/180;var end_rad=end_deg*Math.PI/180;nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r,start_rad,end_rad,counterclockwise);}};_pCanvasElement.circle=function(x,y,r){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r,0,2*Math.PI,true);}};_pCanvasElement.drawStrokeArc=function(x,y,r,start_deg,end_deg,counterclockwise){var handle=this.handle;if(handle){this.arc(x,y,r,start_deg,end_deg,counterclockwise);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeArc2=function(x,y,r,start_deg,end_deg,counterclockwise){var handle=this.handle;if(handle){this.arc2(x,y,r,start_deg,end_deg,counterclockwise);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeCircle=function(x,y,r){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r,0,2*Math.PI,true);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeLine=function(x1,y1,x2,y2){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleMoveToPath(handle,x1,y1);nexacro.__plotCanvasElementHandleLineToPath(handle,x2,y2);this.drawStroke();}};_pCanvasElement.drawStrokeVLine=function(x,y1,y2){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleMoveToPath(handle,x,y1);nexacro.__plotCanvasElementHandleLineToPath(handle,x,y2);this.drawStroke();}};_pCanvasElement.drawStrokeHLine=function(y,x1,x2){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleMoveToPath(handle,x1,y);nexacro.__plotCanvasElementHandleLineToPath(handle,x2,y);this.drawStroke();}};_pCanvasElement.drawStrokeInsetArc=function(x,y,r,start_deg,end_deg,counterclockwise){var handle=this.handle;if(handle){var gap=this.lineOffset;start_deg=start_deg*(Math.PI/180);end_deg=end_deg*(Math.PI/180);nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r-gap,start_deg,end_deg,counterclockwise);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeInsetCircle=function(x,y,r){var handle=this.handle;if(handle){var gap=this.lineOffset;nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r-gap,0,2*Math.PI,true);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeInsetRect=function(x,y,w,h){var handle=this.handle;if(handle){this.insetRect(x,y,w,h);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStrokeRect=function(x,y,w,h){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleRectPath(handle,x,y,w,h);nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawFillRect=function(x,y,dx,dy){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleRectPath(handle,x,y,dx,dy);nexacro.__fillCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawFillText=function(text,x,y,maxwidth){var handle=this.handle;if(handle){var font=this.font;if(font){nexacro.__setCanvasElementHandleFontObject(handle,font);}var color=this.fillStyle;if(color){nexacro.__setCanvasElementHandleFillColor(handle,nexacro._getWebColorFromXreColor(color.value));}nexacro.__setCanvasElementHandleTextBaseline(handle,this.textBaseline);nexacro.__fillCanvasElementHandleText(handle,text,x,y,maxwidth);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.endDraw=function(){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleBeginPath(handle);nexacro.__plotCanvasElementHandleClosePath(handle);}};_pCanvasElement.drawFill=function(){var handle=this.handle;if(handle){nexacro.__fillCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawStroke=function(){var handle=this.handle;if(handle){nexacro.__strokeCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawFillArc=function(x,y,r,start_rad,end_rad,counterclockwise){var handle=this.handle;if(handle){this.arc(x,y,r,start_rad,end_rad,counterclockwise);nexacro.__plotCanvasElementHandleClosePath(handle);nexacro.__fillCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawFillArc2=function(x,y,r,start_deg,end_deg,counterclockwise){var handle=this.handle;if(handle){this.arc2(x,y,r,start_deg,end_deg,counterclockwise);nexacro.__plotCanvasElementHandleClosePath(handle);nexacro.__fillCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.drawFillCircle=function(x,y,r){var handle=this.handle;if(handle){nexacro.__plotCanvasElementHandleArcPath(handle,x,y,r,0,2*Math.PI,true);nexacro.__fillCanvasElementHandlePath(handle);nexacro.__plotCanvasElementHandleBeginPath(handle);}};_pCanvasElement.hline=function(y,x1,x2){this.moveTo(x1,y);this.lineTo(x2,y);};_pCanvasElement.vline=function(x,y1,y2){this.moveTo(x,y1);this.lineTo(x,y2);};_pCanvasElement.insetRect=function(x,y,w,h){var handle=this.handle;if(handle){if(w==0||h==0){return;}var gap=this.lineOffset;var wgap=(w>0)?gap: -gap;var hgap=(h>0)?gap: -gap;nexacro.__plotCanvasElementHandleMoveToPath(handle,x+wgap,y+hgap);nexacro.__plotCanvasElementHandleLineToPath(handle,x+wgap,y+h-hgap);nexacro.__plotCanvasElementHandleLineToPath(handle,x+w-wgap,y+h-hgap);nexacro.__plotCanvasElementHandleLineToPath(handle,x+w-wgap,y+hgap);nexacro.__plotCanvasElementHandleClosePath(handle);}};_pCanvasElement.measureText=function(text,font){var handle=this.handle;if(handle){if(!font){font=new nexacro.FontObject();}var obj=nexacro._getTextSize(text,font);return {width:obj[0],height:obj[1]};}};_pCanvasElement.save=function(){var handle=this.handle;if(handle){nexacro.__saveCanvasElementHandle(handle);}};_pCanvasElement.restore=function(){var handle=this.handle;if(handle){return nexacro.__restoreCanvasElementHandle(handle);}};_pCanvasElement.toDataURL=function(imgType,imgOption){var handle=this.handle;if(handle){var url=nexacro.__toDataURLCanvasElementHandle(handle,imgType,imgOption);if(url){var imgObj=new nexacro.Image();imgObj.set_src(url);return imgObj;}}};_pCanvasElement._setLineStyle=function(line){if(line){this.setElementStrokeStyle(line.color);this.setElementLineWidth(parseInt(line.width));}};_pCanvasElement._setPenStyle=function(pen){if(pen){this.setElementStrokeStyle(pen.color);this.setElementLineWidth(parseInt(pen.width));}};_pCanvasElement._moveCanvas=function(left,top,width,height){this.left=left||0;this.top=top||0;this.width=width||0;this.height=height||0;var handle=this.handle;if(handle){var newLeft=this._getRTLPositionLeft(left,this.width);nexacro.__setElementHandleSize(handle,width,height);nexacro.__setElementHandlePosition(handle,newLeft,top);}};_pCanvasElement._getElementScreenXY=function(){return nexacro._getElementPositionInFrame(this);};nexacro._CanvasFillPattern=function(){this.imageobject=null;this.repeattype=null;this.value=null;this.isloaded=false;this.control=null;this.controlonloadcallback=null;};var __pCanvasFillPattern=nexacro._CanvasFillPattern.prototype;__pCanvasFillPattern.onloadcallback=function(imageurl,width,height,handle,errstatus,temp,fireerrorcode,returncode,path,locationuri){if(width>0){this.imageobject.width=width;}if(height>0){this.imageobject.height=height;}this.isloaded=true;if(errstatus<0){this.isloaded=false;}else{if(handle){this.imageobject.handle=handle;}}if(this.control&&this.controlonloadcallback){this.control.call(this.controlonloadcallback,this);}};__pCanvasFillPattern.clear=function(){if(this.imageobject){delete this.imageobject;}this.imageobject=null;this.repeattype=null;this.value=null;this.isloaded=null;this.control=null;this.controlonloadcallback=null;};nexacro._CanvasGradient=function(type){this.type=type;this.x0=0;this.y0=0;this.r0=0;this.x1=0;this.y1=0;this.r1=0;this.colors=[];};var __pCanvasGradient=nexacro._CanvasGradient.prototype;__pCanvasGradient.addColorStop=function(aOffset,aColor){var color=nexacro._getWebColorFromXreColor(aColor);this.colors.push({offset:aOffset,color:color});};nexacro.GridScrollableControlElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._target_vscroll_elements=null;this._target_hscroll_elements=null;var client_element=new nexacro._ContainerElement(this);this._client_elem=client_element;};var _pGridScrollableControlElement=nexacro._createPrototype(nexacro.ScrollableControlElement,nexacro.GridScrollableControlElement);nexacro.GridScrollableControlElement.prototype=_pGridScrollableControlElement;_pGridScrollableControlElement._type_name="GridScrollableControlElement";_pGridScrollableControlElement._on_destroy=function(){this._target_vscroll_elements=null;this._target_hscroll_elements=null;this._hscroll_control=null;this._vscroll_control=null;};_pGridScrollableControlElement.getContainerElement=function(){return this._client_elem;};_pGridScrollableControlElement.setVertScrollElements=function(elems){this._target_vscroll_elements=elems;};_pGridScrollableControlElement.setHorzScrollElements=function(elems){this._target_hscroll_elements=elems;};_pGridScrollableControlElement._setContainerVScrollPos=function(pos){var vert_elems=this._target_vscroll_elements;if(vert_elems){{vert_elems.setElementVScrollPos(pos);}}};_pGridScrollableControlElement._setContainerHScrollPos=function(pos){var horz_elems=this._target_hscroll_elements;if(horz_elems){if(nexacro._isArray(horz_elems)){var elem;for(var i=0,n=horz_elems.length;i<n;i++ ){elem=horz_elems[i];elem.setElementHScrollPos(pos);}}else{horz_elems.setElementHScrollPos(pos);}}};_pGridScrollableControlElement._setContainerMaxHeight=function(height){var vert_elems=this._target_vscroll_elements;if(vert_elems){this.container_maxheight=height;if(nexacro._isArray(vert_elems)){var elem;for(var i=0,n=vert_elems.length;i<n;i++ ){elem=vert_elems[i];elem._setContainerMaxHeight(height);}}else{vert_elems._setContainerMaxHeight(height);}}};_pGridScrollableControlElement._setContainerMaxWidth=function(width){var horz_elems=this._target_hscroll_elements;if(horz_elems){this.container_maxwidth=width;if(nexacro._isArray(horz_elems)){var elem;for(var i=0,n=horz_elems.length;i<n;i++ ){elem=horz_elems[i];elem._setContainerMaxWidth(width);}}else{horz_elems._setContainerMaxWidth(width);}}};_pGridScrollableControlElement._on_updateClientRect=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;var padding=this.padding?this.padding:this._padding_info;if(padding){client_left=padding.left;client_top=padding.top;client_width-=padding.left+padding.right;client_height-=padding.top+padding.bottom;}var client_elem=this._client_elem;if(!client_elem||(client_width==0&&this.client_width==0)||(client_height==0&&this.client_height==0)){return 0;}var v_elements=this._target_vscroll_elements,v_element=v_elements,h_elements=this._target_hscroll_elements,h_element=h_elements;if(nexacro._isArray(v_elements)){v_element=v_elements[0];}if(nexacro._isArray(h_elements)){h_element=h_elements[0];}var zoomfactor=this.zoom/100;var zclient_width=this._zclient_width=client_width/zoomfactor;var zclient_height=this._zclient_height=client_height/zoomfactor;var zclient_width_body=((h_element)?h_element._calculateClientWidth(client_width):client_width)/zoomfactor;var zclient_height_body=((v_element)?v_element._calculateClientHeight(client_height-this.client_height):client_height)/zoomfactor;var container_maxwidth=(h_element)?h_element._getContainerMaxWidth():0;var container_maxheight=(v_element)?v_element._getContainerMaxHeight():0;var scroll_left=this.scroll_left;var scroll_top=this.scroll_top;var factor=4;if(zoomfactor!=1){zclient_width=nexacro.floor(zclient_width,factor);zclient_height=nexacro.floor(zclient_height,factor);zclient_width_body=nexacro.floor(zclient_width_body,factor);zclient_height_body=nexacro.floor(zclient_height_body,factor);container_maxwidth=nexacro.floor(container_maxwidth,factor);container_maxheight=nexacro.floor(container_maxheight,factor);}var step_count=this._step_count;var step_containers=this._step_containers;if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width_body;}this._vscroll_visible=false;var hscroll_limit=0;var vscroll_limit=0;var hscrollbartype=this._hscrollbartype;var vscrollbartype=this._vscrollbartype;if(step_count>0&&step_containers){hscrollbartype="none";}if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;if(hscrollbartype!="none"&&hscrollbartype!="autoindicator"){client_height-=this._hscroll_size;zclient_height=nexacro.floor(client_height/zoomfactor,factor);zclient_height_body-=nexacro.floor(this._hscroll_size/zoomfactor,factor);}}else{if(hscrollbartype=="fixed"){client_height-=this._hscroll_size;zclient_height=nexacro.floor(client_height/zoomfactor,factor);zclient_height_body-=nexacro.floor(this._hscroll_size/zoomfactor,factor);}}if(zclient_height_body>=0&&container_maxheight>zclient_height_body){vscroll_limit=container_maxheight-zclient_height_body;if(vscrollbartype!="none"&&vscrollbartype!="autoindicator"){client_width-=this._vscroll_size;zclient_width=nexacro.floor(client_width/zoomfactor,factor);zclient_width_body-=nexacro.floor(this._vscroll_size/zoomfactor,factor);this._vscroll_visible=true;}if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){if(hscrollbartype!="none"&&hscrollbartype!="autoindicator"&&hscroll_limit==0){client_height-=this._hscroll_size;zclient_height=client_height/zoomfactor;vscroll_limit+=this._hscroll_size;}hscroll_limit=container_maxwidth-zclient_width_body;}}else{if(vscrollbartype=="fixed"){client_width-=this._vscroll_size;zclient_width=nexacro.floor(client_width/zoomfactor,factor);zclient_width_body-=nexacro.floor(this._vscroll_size/zoomfactor,factor);this._vscroll_visible=true;if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;}}}if(step_count>0&&step_containers){container_maxwidth=step_count*zclient_width_body;if(zclient_width_body>=0&&container_maxwidth>zclient_width_body){hscroll_limit=container_maxwidth-zclient_width_body;}}if(this.hscroll_limit!=hscroll_limit){this.hscroll_limit=hscroll_limit;if(scroll_left>hscroll_limit){this.setElementHScrollPos(hscroll_limit);}}if(this.vscroll_limit!=vscroll_limit){this.vscroll_limit=vscroll_limit;if(scroll_top>vscroll_limit){this.setElementVScrollPos(vscroll_limit);}}this._zclient_width=zclient_width;this._zclient_height=zclient_height;var ret=0;if(this.client_left!=client_left||this.client_top!=client_top||this._isRtl()){this.client_left=client_left;this.client_top=client_top;ret=1;}else if(step_count>0){ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}else if(nexacro.floor(this.client_width,factor)!=nexacro.floor(zclient_width,factor)||nexacro.floor(this.client_height,factor)!=nexacro.floor(zclient_height,factor)){ret+=2;}return ret;};_pGridScrollableControlElement.setElementHScrollPos=function(hpos){var h_element=this._target_hscroll_elements;if(h_element){if(nexacro._isArray(h_element)){h_element=h_element[0];}if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}var scrollLeft=h_element.scroll_left;if(scrollLeft!=hpos||this._reset_scrollpos){this.scroll_left=hpos;this.linkedcontrol._scroll_left=hpos;this._setContainerHScrollPos(hpos);}}};_pGridScrollableControlElement.setElementVScrollPos=function(vpos){var v_element=this._target_vscroll_elements;if(v_element){if(nexacro._isArray(v_element)){v_element=v_element[0];}if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}var scrollTop=v_element._getScrollTop();this.scroll_top=vpos;if(scrollTop!=vpos||this._reset_scrollpos){this.linkedcontrol._scroll_top=vpos;this._setContainerVScrollPos(vpos);}}};_pGridScrollableControlElement.setElementScrollPos=function(hpos,vpos){var v_element=this._target_vscroll_elements;var h_element=this._target_hscroll_elements;if(h_element){if(nexacro._isArray(h_element)){h_element=h_element[0];}if(hpos<0){hpos=0;}if(hpos>this.hscroll_limit){hpos=this.hscroll_limit;}var scrollLeft=h_element.scroll_left;if(scrollLeft!=hpos){this.scroll_left=hpos;this.linkedcontrol._scroll_left=hpos;this._setContainerHScrollPos(hpos);}}if(v_element){if(nexacro._isArray(v_element)){v_element=v_element[0];}if(vpos<0){vpos=0;}if(vpos>this.vscroll_limit){vpos=this.vscroll_limit;}var scrollTop=v_element._getScrollTop();if(scrollTop!=vpos){this.scroll_top=vpos;this.linkedcontrol._scroll_top=vpos;this._setContainerVScrollPos(vpos);}}};_pGridScrollableControlElement._setInnerElementScrollMaxTops=nexacro._emptyFn;_pGridScrollableControlElement.setElementScrollMaxSize=function(width,height){if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}var v_element=this._target_vscroll_elements;if(nexacro._isArray(v_element)){v_element=v_element[0];}this._setContainerMaxHeight(height);this._setContainerMaxWidth(width);if(v_element){this._updateClientRect();}};nexacro.GridBandControlElement=function(parent_elem,type){this.parent=parent_elem;this.parent_elem=parent_elem;this._type=type;this._client_elem=new nexacro._GridBandContainerElement(this);this._client_elem_fix=null;this._fix_height=0;this.container_maxwidth=0;this.container_maxheight=0;this._cur_border=null;};var _pGridBandControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.GridBandControlElement);nexacro.GridBandControlElement.prototype=_pGridBandControlElement;_pGridBandControlElement._type_name="GridBandControlElement";_pGridBandControlElement.scroll_left=0;_pGridBandControlElement.scroll_top=0;_pGridBandControlElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.position_step);if(owner_elem&&owner_elem.handle&&!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var classname=this._classname?this._classname:this._getElementClassName();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,classname,this.name,this._is_control);this._refreshControl(handle);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle((this._is_nc_element)?owner_elem.handle:owner_elem.dest_handle,handle);if(!this._client_elem.handle){this._client_elem.create(win);}if(this._client_elem_fix&&!this._client_elem_fix.handle){this._client_elem_fix.create(win);}}};_pGridBandControlElement.destroy=function(){if(this._client_elem_fix){this._client_elem_fix.destroy();this._client_elem_fix=null;}return nexacro.ControlElement.prototype.destroy.call(this);};_pGridBandControlElement._setFixArea=function(height){this._fix_height=height;if(height){if(!this._client_elem_fix){this._client_elem_fix=new nexacro._GridBandContainerElement(this);}}else{if(this._client_elem_fix){this._client_elem_fix.destroy();this._client_elem_fix=null;}}if(this.handle&&this._client_elem_fix&&!this._client_elem_fix.handle){var _win=this.linkedcontrol._getWindow();this._client_elem_fix.create(_win);}this._updateClientSize();};_pGridBandControlElement.getContainerElement=function(is_fixed){if(is_fixed){return this._client_elem_fix;}return this._client_elem;};_pGridBandControlElement._setContainerMaxHeight=function(height){if(this._type=="body"){if(this.container_maxheight!=height){this.container_maxheight=height;}}};_pGridBandControlElement._resetExtendContainer=function(){};_pGridBandControlElement._calculateClientHeight=function(change_height){var border=this.border||this.linkedcontrol._getCSSStyleValue("border","enabled");var c_height=this.client_height+change_height+((border)?border._getBorderHeight():0);return c_height;};_pGridBandControlElement._getContainerMaxHeight=function(){if(this._type=="body"){return this.container_maxheight;}else{return this.client_height;}};_pGridBandControlElement._getScrollTop=function(){if(this._type=="body"){return this.scroll_top;}else{return 0;}};_pGridBandControlElement.setElementScrollMaxSize=function(width,height){if(this._client_elem){this._client_elem.setElementScrollMaxSize(width,height);}};_pGridBandControlElement._on_change_clientSize=function(width,height){nexacro.ControlElement.prototype._on_change_clientSize.call(this,width,height);var client_element_fix=this._client_elem_fix;if(client_element_fix){client_element_fix.setElementSize(width,this._fix_height);}};_pGridBandControlElement._on_updateClientRect=function(){var ret=0;var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(!this._cur_border){this._cur_border=this.border||this.linkedcontrol._getCSSStyleValue("border","normal");}var border=this._cur_border;if(border){client_width+=border._getBorderWidth();client_height+=border._getBorderHeight();}var fix_height=this._fix_height;client_top+=fix_height;client_height-=fix_height;if(this.client_left!=client_left||this.client_top!=client_top||this._isRtl()){this.client_left=client_left;this.client_top=client_top;ret=1;}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;ret+=2;}return ret;};_pGridBandControlElement._updateClientSize=function(){var client_left=0;var client_top=0;var client_width=this.inner_width;var client_height=this.inner_height;if(!this._cur_border){this._cur_border=this.border||this.linkedcontrol._getCSSStyleValue("border","normal");}var border=this._cur_border;if(border){client_width+=border._getBorderWidth();client_height+=border._getBorderHeight();}var fix_height=this._fix_height;client_top+=fix_height;client_height-=fix_height;var client_element_fix=this._client_elem_fix;if(client_element_fix){client_element_fix.setElementPosition(client_left,0);client_element_fix.setElementSize(client_width,fix_height);}var client_element=this._client_elem;if(client_element){if(this.client_left!=client_left||this.client_top!=client_top||this._isRtl()){this.client_left=client_left;this.client_top=client_top;client_element.setElementPosition(client_left,client_top);}if(this.client_width!=client_width||this.client_height!=client_height){this.client_width=client_width;this.client_height=client_height;client_element.setElementSize(client_width,client_height);}}else{this.client_left=client_left;this.client_top=client_top;this.client_width=client_width;this.client_height=client_height;}};_pGridBandControlElement.setElementVScrollPos=function(vpos){if(this._type=="body"){this._client_elem.setElementVScrollPos(vpos);this.scroll_top=vpos;}};_pGridBandControlElement._setOnScrollCallbackTarget=function(target){if(this._type=="body"){this._client_elem._grid=target;}};_pGridBandControlElement._getExtendContainerCount=function(){return 0;};_pGridBandControlElement.setElementBorder=function(border){var retn=nexacro.ControlElement.prototype.setElementBorder.call(this,border);this._cur_border=border;this._updateClientSize();this._client_elem._adjustPos();return retn;};nexacro._GridBandContainerElement=function(parent_elem){this.parent=parent_elem;this.parent_elem=parent_elem;this._grid=null;};var __pGridBandContainerElement=nexacro._createPrototype(nexacro._ContainerElement,nexacro._GridBandContainerElement);nexacro._GridBandContainerElement.prototype=__pGridBandContainerElement;__pGridBandContainerElement._type_name="GridBandContainerElement";__pGridBandContainerElement._container_maxwidth=0;__pGridBandContainerElement._container_maxheight=0;__pGridBandContainerElement.destroy=function(){nexacro._ContainerElement.prototype.destroy.call(this);this._grid=null;};__pGridBandContainerElement.setElementVScrollPos=function(vpos){if(this._scroll_top!=vpos||this.parent._reset_scrollpos){this._scroll_top=vpos;if(!this.parent._no_setscroll){var handle=this.handle;if(handle){nexacro.__setElementHandleVScrollPos(handle,vpos);if(this._grid){this._grid._callback_onscroll(vpos);}}}}};__pGridBandContainerElement._adjustPos=function(){this.setElementPosition(this.left,this.top);};__pGridBandContainerElement.setElementPosition=function(left,top){var border=this.parent._cur_border;this.left=left;this.top=top;var handle=this.handle;if(handle){var newLeft=this._getRTLPositionLeft(left,this.width);if(border){if(this._isParentRtl()){newLeft=newLeft-border.right._width;}else{newLeft=newLeft-border.left._width;}top=top-border.top._width;}if(newLeft||top){nexacro.__setElementHandlePosition(handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(handle);}}};__pGridBandContainerElement.setElementSize=function(width,height,update){var border=this.parent._cur_border;this.width=width;this.height=height;if(width<0){width=0;}if(height<0){height=0;}var handle=this.handle;if(handle){var left=this.left;var top=this.top;var newLeft=this._getRTLPositionLeft(left,width);if(border){width=width+border.left._width+border.right._width;height=height+border.top._width+border.bottom._width;if(this._isParentRtl()){newLeft=newLeft-border.right._width;}else{newLeft=newLeft-border.left._width;}top=top-border.top._width;}if(newLeft||top){nexacro.__setElementHandlePosition(handle,newLeft,top);}else{nexacro.__clearElementHandlePosition(handle);}if(width&&height){nexacro.__setElementHandleSize(handle,width,height);}else{nexacro.__clearElementHandleSize(handle);}}};__pGridBandContainerElement.create=function(win){var retn=nexacro._ContainerElement.prototype.create.call(this,win);this._adjustPos();return retn;};nexacro.GridRowControlElement=function(parent_elem,left_gap){this.parent=parent_elem;this.parent_elem=parent_elem;this._client_left_element=null;this._client_body_element=new nexacro._ContainerElement(this);this._client_right_element=null;this._use_translate_scroll=true;this._left_width=0;this._right_width=0;this._body_width=0;this.scroll_left=0;this._left_gap=left_gap;};var _pGridRowControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.GridRowControlElement);nexacro.GridRowControlElement.prototype=_pGridRowControlElement;_pGridRowControlElement._type_name="GridRowControlElement";_pGridRowControlElement.create=function(win){var owner_elem=(this._is_nc_element)?this.parent_elem:this.parent_elem.getContainerElement(this.linkedcontrol._fixed);if(owner_elem&&owner_elem.handle){if(!this.handle){this.owner_elem=owner_elem;var win_handle=win.handle||owner_elem._getRootWindowHandle();var bPositionRtl=this._isParentRtl();var left=this.left;if(bPositionRtl){this.rtl=bPositionRtl;left=this._getRTLPositionLeft(left,this.width);}var handle=nexacro.__createControlElementHandle(this,win_handle,left,this.top,this.width,this.height,this._getElementClassName(),this.name,this._is_control);this._refreshControl(handle);this.handle=this.dest_handle=handle;nexacro.__appendElementHandle((this._is_nc_element)?owner_elem.handle:owner_elem.dest_handle,handle);}if(this.handle){if(!this._client_body_element.handle){this._client_body_element.create(win);}if(this._client_left_element&&!this._client_left_element.handle){this._client_left_element.create(win);}if(this._client_right_element&&!this._client_right_element.handle){this._client_right_element.create(win);}this._client_elem=this._client_body_element;}}};_pGridRowControlElement._on_destroy=function(){this._client_body_element.destroy();if(this._client_left_element){this._client_left_element.destroy();}if(this._client_right_element){this._client_right_element.destroy();}this._client_body_element=null;this._client_left_element=null;this._client_right_element=null;this._client_elem=null;};_pGridRowControlElement.clearContents=function(){if(this.handle){this._client_body_element.clearContents();if(this._client_left_element){this._client_left_element.clearContents();}if(this._client_right_element){this._client_right_element.clearContents();}}};_pGridRowControlElement.getContainerElement=function(area){if(area==1){return this._client_left_element;}else if(area==2){return this._client_right_element;}return this._client_body_element;};_pGridRowControlElement.setArea=function(leftwidth,rightwidth){if(leftwidth>0&&!this._client_left_element){this._client_left_element=new nexacro._ContainerElement(this);}if(rightwidth>0&&!this._client_right_element){this._client_right_element=new nexacro._ContainerElement(this);}this._left_width=leftwidth;var addgap=this._left_gap;if(this._client_left_element){this._client_left_element.setElementPosition(this.client_left-addgap,this.client_top);this._client_left_element.setElementSize(leftwidth,this.client_height);}this._right_width=rightwidth;if(this._client_right_element){this._client_right_element.setElementPosition(this.client_width-rightwidth+addgap,this.client_top);this._client_right_element.setElementSize(rightwidth-addgap,this.client_height);}this._body_width=this.client_width-leftwidth-rightwidth+(addgap*2);this._client_body_element.setElementPosition(leftwidth-addgap,this.client_top);this._client_body_element.setElementSize(this._body_width,this.height);};_pGridRowControlElement._updateClientRect=function(update){var ret=this._on_updateClientRect();if(ret&1){this._on_change_clientPos(this.client_left,this.client_top);}if((ret&2)||update){this._on_change_clientSize(this.client_width,this.client_height);}if(ret){this.setArea(this._left_width,this._right_width);}this._setContainerMaxWidth(this._client_body_element._scroll_maxwidth,this.height);};_pGridRowControlElement._setContainerMaxWidth=function(width){if(this._client_body_element){this._client_body_element.setElementScrollMaxSize(width,this.height);}};_pGridRowControlElement._calculateClientWidth=function(parent_client_width){return parent_client_width-this._left_width-this._right_width;};_pGridRowControlElement._getContainerMaxWidth=function(){return this._client_body_element._scroll_maxwidth;};_pGridRowControlElement.setElementHScrollPos=function(hpos){this._client_body_element._setElementHScrollPos(hpos);this.scroll_left=hpos;};}}if(_process){delete _process;delete _pElement;delete _pTextBoxElement;delete _pIconElement;delete _pIconTextElement;delete _pImageElement;delete _pInputElement;delete _pTextAreaElement;delete _pControlElement;delete _pFrameControlElement;delete _pScrollableControlElement;delete __pContainerElement;delete __pFrameResizeBorderElement;delete _pModalOverlayElement;delete _pPluginElement;delete _pPluginObject;delete __pWebBrowserPluginElement;delete __pVideoPlayerPluginElement;delete _pCanvasElement;delete __pCanvasGradient;delete __pGoogleMapPluginElement;delete _pGridScrollableControlElement;delete _pGridBandControlElement;delete __pGridBandContainerElement;delete _pGridRowControlElement;}
if(!nexacro.Component){"use strict";var _process=true;nexacro.Component=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){this.id=this.name=id||null;this.parent=parent;if(parent){this._refform=this._findForm(parent);}var horz=0;var vert=0;if(left!=null){horz++ ;}if(width!=null){horz++ ;}if(right!=null){horz++ ;}if(top!=null){vert++ ;}if(height!=null){vert++ ;}if(bottom!=null){vert++ ;}if(horz>=2&&vert>=2){this.left=left;this.top=top;this.width=width;this.height=height;if(!(left!=undefined&&width!=undefined&&right!=undefined)){this.right=right;}if(!(top!=undefined&&height!=undefined&&bottom!=undefined)){this.bottom=bottom;}this._setMaxwidth(maxwidth);this._setMinwidth(minwidth);this._setMaxheight(maxheight);this._setMinheight(minheight);this._parseArrangeInfo(left,top,right,bottom,width,height);this._calcArrangePosition();}this._makeStatusMap();};var _pComponent=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Component);nexacro.Component.prototype=_pComponent;_pComponent._type_name="Component";_pComponent.hscrollbar=null;_pComponent.vscrollbar=null;_pComponent._control_element=null;_pComponent.expr="";_pComponent.cssclass="";_pComponent.visible=true;_pComponent.enable=true;_pComponent.taborder=0;_pComponent.tabstop=true;_pComponent.hotkey="";_pComponent.transparenthittest=false;_pComponent.enableredraw=true;_pComponent.enableevent=true;_pComponent.tooltiptype="default";_pComponent.tooltiptext=undefined;_pComponent.fittocontents="none";_pComponent.hotkey=null;_pComponent.rtl=undefined;_pComponent.positionstep=0;_pComponent.scrollbartype=undefined;_pComponent.scrolltype="both";_pComponent.scrollbarsize=undefined;_pComponent.scrollindicatorsize=undefined;_pComponent.scrollbarbarminsize=undefined;_pComponent.scrollbarbaroutsize=undefined;_pComponent.scrollbardecbuttonsize=undefined;_pComponent.scrollbarincbuttonsize=undefined;_pComponent.scrollbartrackbarsize=undefined;_pComponent.left=null;_pComponent.top=null;_pComponent.right=null;_pComponent.bottom=null;_pComponent.width=null;_pComponent.height=null;_pComponent.minwidth=null;_pComponent.maxwidth=null;_pComponent.minheight=null;_pComponent.maxheight=null;_pComponent.color="";_pComponent.font="";_pComponent.wordSpacing="";_pComponent.letterSpacing="";_pComponent.textDecoration="";_pComponent.wordWrap="";_pComponent.borderRadius="";_pComponent.border="";_pComponent.background="";_pComponent.edge="";_pComponent.cursor="";_pComponent.opacity="";_pComponent.boxShadow="";_pComponent.margin="";_pComponent.padding="";_pComponent.textAlign="";_pComponent.verticalAlign="";_pComponent.accessibilityrole="";_pComponent.accessibilityenable=true;_pComponent.accessibilitylabel="";_pComponent.accessibilitydescription="";_pComponent.accessibilityaction="";_pComponent.accessibilitydesclevel="all";_pComponent.itemaccessibilityenable=true;nexacro._is_enable_setting=false;_pComponent._left=null;_pComponent._top=null;_pComponent._right=null;_pComponent._bottom=null;_pComponent._width=null;_pComponent._height=null;_pComponent._minwidth=null;_pComponent._maxwidth=null;_pComponent._minheight=null;_pComponent._maxheight=null;_pComponent._adjust_left= -1;_pComponent._adjust_top= -1;_pComponent._adjust_width= -1;_pComponent._adjust_height= -1;_pComponent._bind_event=null;_pComponent._statusmap=null;_pComponent._userstatusmap=null;_pComponent._unique_id="";_pComponent._displaytext="";_pComponent._status="";_pComponent._userstatus="";_pComponent._oldstatus="";_pComponent._olduserstatus="";_pComponent._real_enable=null;_pComponent._real_visible=false;_pComponent._last_focused=null;_pComponent._hotkey=null;_pComponent._track_capture=true;_pComponent._focus_direction= -1;_pComponent._rtl=undefined;_pComponent._is_enable_changing=false;_pComponent._block_inner_focus=false;_pComponent._vscrollbartype=undefined;_pComponent._hscrollbartype=undefined;_pComponent._hscroll_pos=0;_pComponent._vscroll_pos=0;_pComponent._hscrollbar_id="hscrollbar";_pComponent._vscrollbar_id="vscrollbar";_pComponent._hscrollindicator_id="hscrollindicator";_pComponent._vscrollindicator_id="vscrollindicator";_pComponent._scroll_top=0;_pComponent._scroll_left=0;_pComponent._scroll_height=0;_pComponent._scroll_default_value=30;_pComponent._color=null;_pComponent._font=null;_pComponent._wordspacing=null;_pComponent._letterspacing=null;_pComponent._textdecoration=null;_pComponent._borderradius=null;_pComponent._border=null;_pComponent._background=null;_pComponent._edge=null;_pComponent._cursor=null;_pComponent._opacity=null;_pComponent._boxshadow=null;_pComponent._padding=null;_pComponent._default_scrollbarsize=17;_pComponent._default_scrollindicatorsize=6;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_pComponent._default_scrollbartype="autoindicator";}else{_pComponent._default_scrollbartype="auto";}_pComponent._is_loading=false;_pComponent._is_create_commandstr=false;_pComponent._is_created=false;_pComponent._is_created_contents=false;_pComponent._is_initcssselector=false;_pComponent._is_alive=true;_pComponent._is_component=true;_pComponent._is_subcontrol=false;_pComponent._is_form=false;_pComponent._is_frame=false;_pComponent._is_window=false;_pComponent._is_nc_control=false;_pComponent._is_simple_control=false;_pComponent._is_scrollable=false;_pComponent._is_popup_control=false;_pComponent._is_band_control=false;_pComponent._is_band_vert_paging=false;_pComponent._is_area_scroll=false;_pComponent._is_focus_accept=true;_pComponent._is_eventinfo_control=true;_pComponent._is_locale_control=false;_pComponent._is_editable_control=false;_pComponent._is_container=false;_pComponent._is_containerset=false;_pComponent._is_listtype=false;_pComponent._use_pushed_status=false;_pComponent._use_selected_status=false;_pComponent._use_readonly_status=false;_pComponent._use_translate_move=false;_pComponent._use_container_move=true;_pComponent._use_container_multi=false;_pComponent._apply_client_padding=true;_pComponent._selected=false;_pComponent._block_read_aria_stat=true;_pComponent._is_compound=false;_pComponent._computed_prop_list=["cssclass","color","font","wordSpacing","letterSpacing","textDecoration","wordWrap","borderRadius","border","background","edge","cursor","opacity","boxShadow","padding","textAlign","verticalAlign","icon","iconPosition"];_pComponent._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"oninput":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pComponent.createComponent=function(bCreateOnly){var parent_elem=null;if(!this._is_window){parent_elem=this.parent?this.parent._control_element:null;if(!parent_elem){return false;}}var control_elem=this._control_element;if(!control_elem){if(this._unique_id.length<=0){this._unique_id=this.parent._unique_id?(this.parent._unique_id+"."+this.id):(this.id?this.id:"");}control_elem=this.on_create_control_element(parent_elem);if(this._is_nc_control){control_elem._is_nc_element=true;}this._initControl(control_elem);this._initContents(control_elem);this.on_apply_prop_taborder();if(!nexacro._isNull(this.tooltiptext)){this.on_apply_prop_tooltip();}this.on_apply_accessibility();this.on_apply_positionstep();if(this._hittest_type){this.on_apply_hittesttype();}if(!bCreateOnly&&parent_elem&&parent_elem.handle){var window=this._getWindow();this.on_created(window);}}return true;};_pComponent.destroyComponent=function(callremovechild){if(!this._is_alive){return;}this._is_alive=false;if(!this._is_subcontrol){this._unregisterHotkey();}if(nexacro._enableaccessibility){var application=nexacro.getApplication();if(application&&application._accessibilityHistoryList){application._remove_accessibility_history(this);}}this._clearEventListeners();if(this.parent&&this.parent.removeChild){if(callremovechild!=false){this.parent.removeChild(this.id);}}else{var win=this._getWindow();if(win){win._removeFromCurrentFocusPath(this);}if(this._unregisterPopupFrame){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){this._unregisterPopupFrame(win._parentwindowforopen,this.id);}else{this._unregisterPopupFrame(win,this.id);}}}if(this._control_element){this._control_element.destroy();this._control_element=null;}if(this.vscrollbar){this.vscrollbar.destroy();this.vscrollbar=null;}if(this.hscrollbar){this.hscrollbar.destroy();this.hscrollbar=null;}this.on_destroy_contents(callremovechild);this._is_created=false;this._arrange_info=null;if(this._refform){this._refform=null;}if(this.parent){this.parent=null;}if(this._refobj){this._refobj=null;}if(this.hotkey){this.hotkey=null;}if(this._event_list){this._event_list=null;}if(this._last_focused){this._last_focused=null;}if(this._cssselector){this._cssselector=null;}this._clearStyleObject();if(this._cssclass){this._cssclass=null;}if(this._statusmap){this._statusmap=null;}if(this._userstatusmap){this._userstatusmap=null;}return true;};_pComponent.on_created=function(win){if(!this._is_loading){var parent_elem=null;if(!this._is_window){parent_elem=this.parent?this.parent._control_element:null;if(!parent_elem){return false;}}win=win||this._getWindow();var enable=this._isEnable();if((this._real_enable==null&&enable==false)||(this._real_enable&&this._real_enable!=enable)){this._real_enable=enable;this._changeStatus("disabled",!enable);this.on_apply_prop_enable(enable);}else{this._real_enable=enable;}if(this._status||this._userstatus){this._apply_status_toelement("",this._status,"",this._userstatus);}var control_elem=this._control_element;if(control_elem){control_elem.create(win);if(!control_elem.handle){return false;}}if(!this._is_subcontrol){this._registerHotkey();}if(!this._is_created){this.on_created_contents(win);this._is_created=true;return true;}}return false;};_pComponent.createCommand=function(){var str="";if(!this._is_loading){var enable=this._isEnable();if((this._real_enable==null&&enable==false)||(this._real_enable&&this._real_enable!=enable)){this._real_enable=enable;this._changeStatus("disabled",!enable);this.on_apply_prop_enable(enable);}else{this._real_enable=enable;this._setAccessibilityStatFlag(this._status,this._userstatus);}if(this._status||this._userstatus){this._apply_status_toelement("",this._status,"",this._userstatus);}var control_elem=this._control_element;if(control_elem){str=control_elem.createCommandStart();if(str){str+=this.on_create_contents_command();str+=control_elem.createCommandEnd();}}if(!this._is_subcontrol){this._registerHotkey();}this._is_create_commandstr=true;}return str;};_pComponent.attachHandle=function(win,bContainer){if(!this._is_created&&this._is_create_commandstr){var control_elem=this._control_element;if(control_elem){control_elem.attachHandle(win);}if(!bContainer){this.on_attach_contents_handle(win);this._is_created=true;}}};_pComponent.on_create_contents=function(){};_pComponent.on_created_contents=function(){};_pComponent.on_destroy_contents=function(){};_pComponent.on_create_contents_command=function(){return "";};_pComponent.on_attach_contents_handle=function(){};_pComponent.on_change_containerRect=function(){this._onResetScrollBar();};_pComponent.on_change_containerPos=function(){};_pComponent.on_create_normal_control_element=function(parent_elem){var control_elem=new nexacro.ControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_scrollable_control_element=function(parent_elem){var control_elem=new nexacro.ScrollableControlElement(parent_elem,this._use_container_multi);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_frame_control_element=function(parent_elem){var control_elem=new nexacro.FrameControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_tablecell_control_element=function(parent_elem){var control_elem=new nexacro.CellControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_popup_control_element=function(parent_elem){var control_elem=new nexacro.ControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_popupscrollable_control_element=function(parent_elem){var control_elem=new nexacro.ScrollableControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_band_control_element=function(parent_elem){var control_elem=new nexacro.BandControlElement(parent_elem,this._is_band_vert_paging);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_area_scroll_control_element=function(parent_elem){var control_elem=new nexacro.ScrollableAreaControlElement(parent_elem);control_elem.setLinkedControl(this);this._control_element=control_elem;return control_elem;};_pComponent.on_create_control_element=function(parent_elem){var control_elem=null;if(this._is_tablecell){control_elem=this.on_create_tablecell_control_element(parent_elem);}else if(this._is_frame){control_elem=this.on_create_frame_control_element(parent_elem);}else if(this._is_scrollable||this._is_expandable){control_elem=this.on_create_scrollable_control_element(parent_elem);}else if(this._is_band_control){control_elem=this.on_create_band_control_element(parent_elem);}else if(this._is_area_scroll){this._is_scrollable=true;control_elem=this.on_create_area_scroll_control_element(parent_elem);}else if(this._is_popup_control){control_elem=this.on_create_popup_control_element(parent_elem);}else{control_elem=this.on_create_normal_control_element(parent_elem);}return control_elem;};_pComponent._initControl=function(control_elem){control_elem.initElementInfo();this._applyElementVisible(this.visible);this.on_apply_prop_rtl();if(!this._is_initcssselector){this._initCSSSelector();}var enabledselector=this._cssselector.enabled;if(enabledselector){var edge=enabledselector.edge;if(edge&&this._rtl&&enabledselector.rtlEdgeImage){edge=enabledselector.rtlEdgeImage;}control_elem.setElementCSSMapInfo(enabledselector.border,enabledselector.padding,edge);}this._calcArrangePosition();this._adjustPosition();control_elem.setElementPosition(this._adjust_left,this._adjust_top);control_elem.setElementSize(this._adjust_width,this._adjust_height);this._initNormalStyleProperty(control_elem);};_pComponent._initContents=function(){this.on_create_contents();this._is_created_contents=true;this._is_loading=false;};_pComponent._initCSSSelector=function(){var ret=this.on_apply_cssselector();this._makeCSSMapInfo();this._is_initcssselector=ret;};_pComponent._initNormalStyleProperty=function(control_elem){if(this._color){control_elem.setElementColor(this._color);}if(this._font){control_elem.setElementFont(this._font);}if(this._wordspacing){control_elem.setElementWordSpacing(this._wordspacing);}if(this._letterspacing){control_elem.setElementLetterSpacing(this._letterspacing);}if(this._borderradius){control_elem.setElementBorderRadius(this._borderradius);}if(this._border){control_elem.setElementBorder(this._border);}if(this._background){control_elem.setElementBackground(this._background);}if(this._padding){control_elem.setElementPadding(this._padding);}if(this._cursor){control_elem.setElementCursor(this._cursor);}if(this._opacity){control_elem.setElementOpacity(this._opacity);}if(this._boxshadow){control_elem.setElementBoxShadow(this._boxshadow);}if(this._edge){control_elem.setElementEdge(this._edge);}if(!nexacro._isNull(this.tooltiptext)){control_elem.setElementToolTip(this.tooltiptext);}};_pComponent._clearStyleObject=function(){if(this._color){this._color=null;}if(this._font){this._font=null;}if(this._wordspacing){this._wordspacing=null;}if(this._letterspacing){this._letterspacing=null;}if(this._textdecoration){this._textdecoration=null;}if(this._borderradius){this._borderradius=null;}if(this._border){this._border=null;}if(this._background){this._background=null;}if(this._edge){this._edge=null;}if(this._cursor){this._cursor=null;}if(this._opacity){this._opacity=null;}if(this._boxshadow){this._boxshadow=null;}if(this._padding){this._padding=null;}};_pComponent.on_apply_cssselector=function(){var control_elem=this._control_element;if(control_elem){control_elem.setElementTypeCSSSelector(this.on_get_css_assumedtypename());if(this._is_subcontrol){var idselector=this.on_getIDCSSSelector();if(this.parent&&!this.parent._is_subcontrol&&(this.parent._is_containerset||this.parent._is_form||this.parent._is_frame)){idselector=idselector+this.parent.on_get_css_assumedtypename();var parentidselector=idselector;var parentcssclass=this.parent._getClassCSSSelector();if(parentcssclass){var len=parentcssclass.length;idselector=parentidselector+" ";for(var i=0;i<len;i++ ){idselector+=parentidselector+parentcssclass[i];}}}control_elem.setElementIDCSSSelector(idselector);}else{control_elem.setElementIDCSSSelector(this._getIDCSSSelector());}var cssclass=this._getElementClassCSSSelector();if(cssclass){control_elem.setElementClassCSSSelector(cssclass.join(" "));}else{control_elem.setElementClassCSSSelector("");}return true;}return false;};_pComponent.set_initvalueid=function(initvalueid){if(!this._is_created){this.initvalueid=initvalueid;var fn=this._type_name+initvalueid;if(nexacro_init[fn]){nexacro_init[fn].call(this,this);}}};_pComponent.set_hittesttype=function(hittesttype){if(this._hittest_type!=hittesttype){this._hittest_type=hittesttype;this.on_apply_hittesttype();}};_pComponent.on_apply_hittesttype=function(){var control_elem=this._control_element;if(control_elem){control_elem.setElementHittestType(this._hittest_type);}};_pComponent.set_positionstep=function(v){if(isNaN(v= +v)||v< -1){return;}if(this.positionstep!=v){this.positionstep=v;this.on_apply_positionstep();}};_pComponent.on_apply_positionstep=function(){var control_elem=this.getElement();if(control_elem){control_elem.setElementPositionStep(this.positionstep);}};_pComponent.set_cssclass=function(cssname){if(this.cssclass!=cssname){this.cssclass=cssname;var cssclass=new nexacro.BindableValue();cssclass._set(cssname);this._cssclass=cssclass;if(cssclass._bindtype==2){this._cssclass_exprfn=this._makeExprFn(cssclass._value);}this.on_apply_cssclass();}};_pComponent.on_apply_cssclass=function(){var control_elem=this._control_element;if(control_elem){var cssclassselector;var expr=this._cssclass_exprfn;if(expr){try{cssclassselector=nexacro._toString(expr.call(null,this));}catch(e){}this._cssclass_exprfn=null;this._cssclass_expr=cssclassselector;}cssclassselector=this._getElementClassCSSSelector();if(cssclassselector){control_elem.setElementClassCSSSelector(cssclassselector.join(" "));}else{control_elem.setElementClassCSSSelector("");}this._makeCSSMapInfo();if(this._is_scrollable){if(this.vscrollbar){this.vscrollbar.on_apply_prop_class();}if(this.hscrollbar){this.hscrollbar.on_apply_prop_class();}this._onResetScrollBar();}}this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus,true);this.on_apply_prop_cssclass();this.on_apply_cssselector();};_pComponent.set_name=function(v){if(this.name!=v){this.name=v;}};_pComponent.set_text=function(v){v=nexacro._toString(v);if(this.text!=v){this.text=v;this._on_apply_text(v);}};_pComponent._on_apply_text=function(text){var exprfn=this._expr_fn;if(exprfn){try{text=nexacro._toString(exprfn.call(null,this));}catch(e){}}this._displaytext=text;if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}this.on_apply_text(text);};_pComponent.on_apply_text=function(){};_pComponent.set_expr=function(v){v=nexacro._toString(v);if(this.expr!=v){this.expr=v;this._on_apply_expr(v);}};_pComponent._on_apply_expr=function(expr){if(expr){this._expr_fn=null;this._expr_fn=this._makeExprFn(expr);this._on_apply_text(this.text);}else{this._expr_fn=null;this._on_apply_text(this.text);}};_pComponent.on_apply_expr=function(){};_pComponent._applyElementVisible=function(v){this._control_element.setElementVisible(v);};_pComponent.set_visible=function(v){if(v===undefined||v===null){return;}v=nexacro._toBoolean(v);if(this.visible!=v){var _window=this._getWindow();var newfocus_comp;if(!v&&this._is_created&&this.parent){if(_window&&_window._indexOfCurrentFocusPaths(this)> -1){var cur_tabstop=this.tabstop;this.tabstop=false;newfocus_comp=this._getForm()._searchNextTabFocus();this.tabstop=cur_tabstop;}}this.visible=v;var control_elem=this._control_element;if(control_elem){this._applyElementVisible(v);if(nexacro._enableaccessibility){this._setAccessibilityStatHidden(!v);}var parent=this.parent;if(this.visible){if(!this._is_subcontrol&&this._is_created&&parent&&parent._is_created&&!parent._getLastFocused()){if(_window&&_window._focus_list&&_window._indexOfCurrentFocusPaths(parent)==_window._getCurrentFocusPathsLength()-1){this._on_focus(true);}}this._apply_status("",this._status,"",this._userstatus,true);}else{if(!this._is_subcontrol&&parent){if(_window&&_window._indexOfCurrentFocusPaths(this)> -1){_window._removeFromCurrentFocusPath(this,false);if(newfocus_comp&&newfocus_comp[0]){newfocus_comp[0]._on_focus(true);}}}}}}};_pComponent.set_enable=function(v){v=nexacro._toBoolean(v);if(this.enable!=v){var _window=this._getWindow();var newfocus_comp;if(!this._is_subcontrol&&!v&&this._is_created&&this.parent){if(_window&&_window._indexOfCurrentFocusPaths(this)> -1){var cur_tabstop=this.tabstop;this.tabstop=false;newfocus_comp=this._getForm()._searchNextTabFocus();this.tabstop=cur_tabstop;}}this.enable=v;if(this._is_created){var enable_flag=(this._getParentEnable()&&v);if(this._real_enable!=enable_flag){nexacro._is_enable_setting=true;this._setEnable(enable_flag);nexacro._is_enable_setting=false;var parent=this.parent;if(!this._is_subcontrol&&this._is_created&&parent&&parent._is_created){if(enable_flag){if(_window&&_window._indexOfCurrentFocusPaths(parent)==_window._getCurrentFocusPathsLength()-1&&!parent._last_focused){this._on_focus(true);}}else{if(_window&&_window._indexOfCurrentFocusPaths(this)> -1){if(newfocus_comp&&newfocus_comp[0]){newfocus_comp[0]._on_focus(true);}else{_window._removeFromCurrentFocusPath(this,false);}}}}}}}};_pComponent.set_taborder=function(v){if(isNaN(v= +v)||v<0){return;}if(this.taborder!=v){this.taborder=v;this.on_apply_prop_taborder();}};_pComponent.set_tabstop=function(v){v=nexacro._toBoolean(v);if(this.tabstop!=v){this.tabstop=v;this.on_apply_prop_taborder();}};_pComponent.set_tooltiptext=function(v){if(nexacro._isNull(v)){this.tooltiptext=v;this.on_apply_prop_tooltip();}else{v=nexacro._toString(v);if(this.tooltiptext!=v){this.tooltiptext=v;this.on_apply_prop_tooltip();}}};_pComponent.set_tooltiptype=function(v){var tooltiptype_enum=["default","hover","inplace","default,mouseleave","hover,mouseleave","inplace,mouseleave"];if(tooltiptype_enum.indexOf(v)== -1){return;}if(this.tooltiptype!=v){this.tooltiptype=v;this.on_apply_prop_tooltip();}};_pComponent.set_enableevent=function(v){v=nexacro._toBoolean(v);if(this.enableevent!=v){this.enableevent=v;}};_pComponent.set_enableredraw=function(v){v=nexacro._toBoolean(v);if(this.enableredraw!=v){this.enableredraw=v;this.on_apply_enableredraw();}};_pComponent.on_apply_enableredraw=function(){this.on_apply_color(this._color);this.on_apply_font(this._font);this.on_apply_wordSpacing(this._wordspacing);this.on_apply_letterSpacing(this._letterSpacing);this.on_apply_borderRadius(this._borderradius);this.on_apply_border(this._border);this.on_apply_background(this._background);this.on_apply_edge(this._edge);this.on_apply_margin();this.on_apply_opacity(this._opacity);this.on_apply_boxShadow(this._boxshadow);};_pComponent.set_hotkey=function(v){var cur_hotkey=this._hotkey;if(cur_hotkey){this._unregisterHotkey();}var hotkey=new nexacro._HotKey(v);if(hotkey._isEmpty()){this.hotkey=null;this._hotkey=null;}else{this.hotkey=hotkey._toString();this._hotkey=hotkey;if(this._is_created){this._registerHotkey();}}};_pComponent.set_rtl=function(v){if(this.rtl!=v){this.rtl=v;this._rtl=nexacro._isBoolean(v)?nexacro._toBoolean(v):undefined;this.on_apply_prop_rtl();}};_pComponent.set_transparenthittest=nexacro._emptyFn;_pComponent.set_locale=nexacro._emptyFn;_pComponent.on_apply_locale=nexacro._emptyFn;_pComponent.set_left=function(v){this._setLeft(v);this._update_position();};_pComponent.set_top=function(v){this._setTop(v);this._update_position();};_pComponent.set_right=function(v){this._setRight(v);this._update_position();};_pComponent.set_bottom=function(v){this._setBottom(v);this._update_position();};_pComponent.set_width=function(v){this._setWidth(v);this._update_position();};_pComponent.set_height=function(v){this._setHeight(v);this._update_position();};_pComponent.set_minwidth=function(v){this._setMinwidth(v);this._update_position();};_pComponent.set_maxwidth=function(v){this._setMaxwidth(v);this._update_position();};_pComponent.set_minheight=function(v){this._setMinheight(v);this._update_position();};_pComponent.set_maxheight=function(v){this._setMaxheight(v);this._update_position();};_pComponent.set_fittocontents=function(v){var fittocontents_enum=["none","width","height","both"];if(fittocontents_enum.indexOf(v)== -1){return;}if(this.fittocontents!=v){this.fittocontents=v;if(this._is_created){if(this.fittocontents=="height"){var fittemp=this.fittocontents;this.fittocontents="none";this._calcArrangePosition();this._adjustPosition();this.fittocontents=fittemp;}this._update_position();}}};_pComponent.set_scrollbartype=function(v){v=nexacro._toString(v).trim();var new_vscrollbartype;var new_hscrollbartype;var arr=v.toLowerCase().split(" ");this.scrollbartype=v;for(var i=0;i<arr.length;i++ ){switch(arr[i]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(i==0){new_hscrollbartype=arr[i];}else if(i==1){new_vscrollbartype=arr[i];}break;default:break;}}if(!new_hscrollbartype&&!new_vscrollbartype){this._hscrollbartype=undefined;this._vscrollbartype=undefined;}else{if(!new_hscrollbartype||new_hscrollbartype=="default"){this._hscrollbartype=new_hscrollbartype=undefined;}else{this._hscrollbartype=new_hscrollbartype;}if(!new_vscrollbartype){this._vscrollbartype=new_hscrollbartype;}else if(new_vscrollbartype=="default"){this._vscrollbartype=undefined;}else{this._vscrollbartype=new_vscrollbartype;}}this.on_apply_scrollbartype();return v;};_pComponent.on_apply_scrollbartype=function(){var control_elem=this.getElement();if(control_elem){var hscrollbarsize=this._getHScrollBarSize();var vscrollbarsize=this._getVScrollBarSize();var hscrollbartype=this._getHScrollBarType();var vscrollbartype=this._getVScrollBarType();control_elem.setElementScrollbarSize(hscrollbarsize,vscrollbarsize,hscrollbartype,vscrollbartype,this.scrolltype);this._onResetScrollBar();}};_pComponent.set_scrolltype=function(v){v=nexacro._toString(v);if(!nexacro._isNull(v)){v=v.toLowerCase();}switch(v){case "none":case "both":case "horizontal":case "vertical":this.scrolltype=v;this.on_apply_scrolltype();break;default:break;}return v;};_pComponent.on_apply_scrolltype=function(){var control_elem=this.getElement();if(control_elem){var hscrollbarsize=this._getHScrollBarSize();var vscrollbarsize=this._getVScrollBarSize();var hscrollbartype=this._getHScrollBarType();var vscrollbartype=this._getVScrollBarType();control_elem.setElementScrollbarSize(hscrollbarsize,vscrollbarsize,hscrollbartype,vscrollbartype,this.scrolltype);this._onResetScrollBar();}};_pComponent.set_scrollbarbarminsize=function(scrollbarbarminsize){if(!this._is_scrollable){return;}if(scrollbarbarminsize!==undefined){scrollbarbarminsize=parseInt(scrollbarbarminsize);if(isNaN(scrollbarbarminsize)){return;}}if(this.scrollbarbarminsize!=scrollbarbarminsize){this.scrollbarbarminsize=scrollbarbarminsize;var scrollbar=this.vscrollbar;if(scrollbar){scrollbar.set_barminsize(scrollbarbarminsize);}scrollbar=this.hscrollbar;if(scrollbar){scrollbar.set_barminsize(scrollbarbarminsize);}}};_pComponent.set_scrollbardecbuttonsize=function(scrollbardecbuttonsize){if(!this._is_scrollable){return;}if(scrollbardecbuttonsize!==undefined){scrollbardecbuttonsize=parseInt(scrollbardecbuttonsize);if(isNaN(scrollbardecbuttonsize)){return;}}if(this.scrollbardecbuttonsize!=scrollbardecbuttonsize){this.scrollbardecbuttonsize=scrollbardecbuttonsize;var scrollbar=this.vscrollbar;if(scrollbar){scrollbar.set_decbuttonsize(scrollbardecbuttonsize);}scrollbar=this.hscrollbar;if(scrollbar){scrollbar.set_decbuttonsize(scrollbardecbuttonsize);}}};_pComponent.set_scrollbarbaroutsize=function(scrollbarbaroutsize){if(!this._is_scrollable){return;}if(scrollbarbaroutsize!==undefined){scrollbarbaroutsize=parseInt(scrollbarbaroutsize);if(isNaN(scrollbarbaroutsize)){return;}}if(this.scrollbarbaroutsize!=scrollbarbaroutsize){this.scrollbarbaroutsize=scrollbarbaroutsize;var scrollbar=this.vscrollbar;if(scrollbar){scrollbar.set_baroutsize(scrollbarbaroutsize);}scrollbar=this.hscrollbar;if(scrollbar){scrollbar.set_baroutsize(scrollbarbaroutsize);}}};_pComponent.set_scrollbarincbuttonsize=function(scrollbarincbuttonsize){if(!this._is_scrollable){return;}if(scrollbarincbuttonsize!==undefined){if(isNaN(scrollbarincbuttonsize)){return;}}if(this.scrollbarincbuttonsize!=scrollbarincbuttonsize){this.scrollbarincbuttonsize=scrollbarincbuttonsize;var scrollbar=this.vscrollbar;if(scrollbar){scrollbar.set_incbuttonsize(scrollbarincbuttonsize);}scrollbar=this.hscrollbar;if(scrollbar){scrollbar.set_incbuttonsize(scrollbarincbuttonsize);}}};_pComponent.set_scrollbarsize=function(scrollbarsize){if(!this._is_scrollable){return;}if(scrollbarsize!==undefined){scrollbarsize=parseInt(scrollbarsize);if(isNaN(scrollbarsize)){return;}}if(this.scrollbarsize!=scrollbarsize){this.scrollbarsize=scrollbarsize;this.on_apply_scrollbarsize();}};_pComponent.on_apply_scrollbarsize=function(){var control_elem=this.getElement();if(control_elem){var hscrollbarsize=this._getHScrollBarSize();var vscrollbarsize=this._getVScrollBarSize();var hscrollbartype=this._getHScrollBarType();var vscrollbartype=this._getVScrollBarType();control_elem.setElementScrollbarSize(hscrollbarsize,vscrollbarsize,hscrollbartype,vscrollbartype,this.scrolltype);}this._onResetScrollBar();};_pComponent.set_scrollindicatorsize=function(scrollindicatorsize){if(!this._is_scrollable){return;}if(scrollindicatorsize!==undefined){scrollindicatorsize=parseInt(scrollindicatorsize);if(isNaN(scrollindicatorsize)){return;}}if(this.scrollindicatorsize!=scrollindicatorsize){this.scrollindicatorsize=scrollindicatorsize;this.on_apply_scrollbarsize();}};_pComponent.set_scrollbartrackbarsize=function(scrollbartrackbarsize){if(!this._is_scrollable){return;}if(scrollbartrackbarsize!==undefined){scrollbartrackbarsize=parseInt(scrollbartrackbarsize);if(isNaN(scrollbartrackbarsize)){return;}}if(this.scrollbartrackbarsize!=scrollbartrackbarsize){this.scrollbartrackbarsize=scrollbartrackbarsize;var scrollbar=this.vscrollbar;if(scrollbar){scrollbar.set_trackbarsize(scrollbartrackbarsize);}scrollbar=this.hscrollbar;if(scrollbar){scrollbar.set_trackbarsize(scrollbartrackbarsize);}}};_pComponent.set_accessibilityrole=function(accessibilityrole){if(this.accessibilityrole!=accessibilityrole){this.accessibilityrole=accessibilityrole;this.on_apply_prop_accessibilityrole();}};_pComponent.on_apply_prop_accessibilityrole=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityRole(this._getAccessibilityRole());}};_pComponent.set_accessibilityenable=function(accessibilityenable){var accenable=nexacro._toBoolean(accessibilityenable);if(this.accessibilityenable!=accenable){this.accessibilityenable=accenable;this.on_apply_prop_accessibilityenable();}};_pComponent.on_apply_prop_accessibilityenable=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityEnable(this.accessibilityenable);}};_pComponent.set_accessibilitylabel=function(accessibilitylabel){if(this.accessibilitylabel!=accessibilitylabel){this.accessibilitylabel=accessibilitylabel;this.on_apply_prop_accessibilitylabel();}};_pComponent.on_apply_prop_accessibilitylabel=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityLabel(this._getAccessibilityLabel());}};_pComponent.set_accessibilitydescription=function(accessibilitydescription){if(this.accessibilitydescription!=accessibilitydescription){this.accessibilitydescription=accessibilitydescription;this.on_apply_prop_accessibilitydescription();}};_pComponent.on_apply_prop_accessibilitydescription=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityDescription(this._getAccessibilityDescription());}};_pComponent.set_accessibilityaction=function(accessibilityaction){if(this.accessibilityaction!=accessibilityaction){this.accessibilityaction=accessibilityaction;this.on_apply_prop_accessibilityaction();}};_pComponent.on_apply_prop_accessibilityaction=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityAction(this._getAccessibilityAction());}};_pComponent.set_accessibilitydesclevel=function(accessibilitydesclevel){if(this.accessibilitydesclevel!=accessibilitydesclevel){this.accessibilitydesclevel=accessibilitydesclevel;this.on_apply_prop_accessibilitydesclevel();}};_pComponent.on_apply_prop_accessibilitydesclevel=function(){var control_elem=this._control_element;if(control_elem){this._setAccessibilityDescLevel(this._getAccessibilityDescLevel());}};_pComponent.on_apply_accessibility=function(){this.on_apply_prop_accessibilityrole();this.on_apply_prop_accessibilityenable();this.on_apply_prop_accessibilitylabel();this.on_apply_prop_accessibilitydescription();this.on_apply_prop_accessibilityaction();this.on_apply_prop_accessibilitydesclevel();};_pComponent.set_itemaccessibilityenable=function(accessibilityenable){var accenable=nexacro._toBoolean(accessibilityenable);if(this.itemaccessibilityenable!=accenable){this.itemaccessibilityenable=accenable;this.on_apply_prop_itemaccessibilityenable();}};_pComponent.set_color=function(val){this.color=val;if(val){if(this._color==null||this._color.value!=val){var color=nexacro.ColorObject(val);this._color=color;this.on_apply_color(color);}}else{if(this._color){this._color=null;this.on_apply_color(null);}}};_pComponent.on_apply_color=function(color){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementColor(color);}};_pComponent.set_font=function(val){this.font=val;if(val){if(this._font==null||this._font.value!=val){var font=nexacro.FontObject(val);this._font=font;this.on_apply_font(font);}}else{if(this._font){this._font=null;this.on_apply_font(null);}}};_pComponent.on_apply_font=function(font){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementFont(font);}};_pComponent.set_textDecoration=function(val){this.textDecoration=val;if(val){if(this._textdecoration==null||this._textdecoration.value!=val){var textDecoration=nexacro.TextDecorationObject(val);this._textdecoration=textDecoration;this.on_apply_textDecoration(textDecoration);}}else{if(this._textdecoration){this._textdecoration=null;this.on_apply_textDecoration(null);}}};_pComponent.on_apply_textDecoration=nexacro._emptyFn;_pComponent.set_wordSpacing=function(val){val=nexacro._toString(val);this.wordSpacing=val;if(val){if(this._wordspacing==null||this._wordspacing.value!=val){var wordSpacing=nexacro.CSSValueObject(val);this._wordspacing=wordSpacing;this.on_apply_wordSpacing(wordSpacing);}}else{if(this._wordspacing){this._wordspacing=null;this.on_apply_wordSpacing(null);}}};_pComponent.on_apply_wordSpacing=function(wordSpacing){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementWordSpacing(wordSpacing);}};_pComponent.set_letterSpacing=function(val){val=nexacro._toString(val);this.letterSpacing=val;if(val){if(this._letterspacing==null||this._letterspacing.value!=val){var letterSpacing=nexacro.CSSValueObject(val);this._letterspacing=letterSpacing;this.on_apply_letterSpacing(letterSpacing);}}else{if(this._letterspacing){this._letterspacing=null;this.on_apply_letterSpacing(null);}}};_pComponent.on_apply_letterSpacing=function(letterSpacing){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementLetterSpacing(letterSpacing);}};_pComponent.set_wordWrap=function(val){if(val){if(this.wordWrap==null||this.wordWrap!=val){var wordWrap=val;this.wordWrap=wordWrap;this.on_apply_wordWrap(wordWrap);}}else{if(this.wordWrap){this.wordWrap=null;this.on_apply_wordWrap(null);}}};_pComponent.on_apply_wordWrap=nexacro._emptyFn;_pComponent.set_borderRadius=function(val){this.borderRadius=val;if(val){if(this._borderradius==null||this._borderradius.value!=val){var borderRadius=nexacro.BorderRadiusObject(val);this._borderradius=borderRadius;this.on_apply_borderRadius(borderRadius);}}else{if(this._borderradius){this._borderradius=null;this.on_apply_borderRadius(null);}}};_pComponent.on_apply_borderRadius=function(borderRadius){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementBorderRadius(borderRadius);}};_pComponent.set_border=function(val){this.border=val;if(val){if(this._border==null||!this._border._single||this._border.value!=val){var border=nexacro.BorderObject(val);this._border=border;this.on_apply_border(border);}}else{if(this._border){this._border=null;this.on_apply_border(null);}}};_pComponent.on_apply_border=function(border){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementBorder(border);}};_pComponent.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var backgroud=nexacro.BackgroundObject(val,this);this._background=backgroud;this.on_apply_background(backgroud);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}};_pComponent.on_apply_background=function(background){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementBackground(background);}};_pComponent.set_edge=function(val){this.edge=val;if(val){if(this._edge==null||this._edge.value!=val){var edge=nexacro.EdgeImageObject(val,this);this._edge=edge;this.on_apply_edge(edge);}}else{if(this._edge){this._edge=null;this.on_apply_edge(null);}}};_pComponent.on_apply_edge=function(edge){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementEdge(edge);}};_pComponent.set_margin=function(val){if(val){if(this.margin==null||this.margin.value!=val){var margin=nexacro._getCachedMarginObject(val);this.margin=margin;this.on_apply_margin(margin);}}else{if(this.margin){this.margin=null;this.on_apply_margin(null);}}};_pComponent.on_apply_margin=function(){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){this._adjustPosition();control_elem.setElementVisible(this.visible);control_elem.setElementPosition(this._adjust_left,this._adjust_top);control_elem.setElementSize(this._adjust_width,this._adjust_height);}};_pComponent.set_padding=function(val){this.padding=val;if(val){if(this._padding==null||this._padding.value!=val){var padding=nexacro.PaddingObject(val);this._padding=this.padding=padding;this._on_apply_padding(padding);}}else{if(this._padding){this._padding=null;this._on_apply_padding(null);}}};_pComponent._on_apply_padding=function(padding){var control_elem=this._control_element;if(control_elem){control_elem.setElementPadding(padding);this.on_apply_padding(padding);}};_pComponent.on_apply_padding=nexacro._emptyFn;_pComponent.set_textAlign=function(val){if(val){if(this.textAlign==null||this.textAlign!=val){this.textAlign=val;this.on_apply_textAlign(val);}}else{if(this.textAlign){this.textAlign=null;this.on_apply_textAlign(null);}}};_pComponent.on_apply_textAlign=nexacro._emptyFn;_pComponent.set_verticalAlign=function(val){if(val){if(this.verticalAlign==null||this.verticalAlign!=val){this.verticalAlign=val;this.on_apply_verticalAlign(val);}}else{if(this.verticalAlign){this.verticalAlign=null;this.on_apply_verticalAlign(null);}}};_pComponent.on_apply_verticalAlign=nexacro._emptyFn;_pComponent.set_cursor=function(val){this.cursor=val;if(val){if(this._cursor==null||this._cursor.value!=val){var cursor=nexacro.CursorObject(val);this._cursor=cursor;this.on_apply_cursor(cursor);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pComponent.on_apply_cursor=function(cursor){var control_elem=this._control_element;if(control_elem){control_elem.setElementCursor(cursor);}};_pComponent._updateCursor=function(cursor){if(nexacro._cur_track_info||nexacro._cur_extra_track_info){return;}var cursorobj=this._cursor;if(cursor){cursorobj=nexacro.CursorObject(cursor);}this.on_apply_cursor(cursorobj);};_pComponent.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}};_pComponent.on_apply_opacity=function(opacity){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementOpacity(opacity);}};_pComponent.set_boxShadow=function(val){this.boxShadow=val;if(val){if(this._boxshadow==null||this._boxshadow.value!=val){var shadow=nexacro.ShadowObject(val);this._boxshadow=shadow;this.on_apply_boxShadow(shadow);}}else{if(this._boxshadow){this._boxshadow=null;this.on_apply_boxShadow(null);}}};_pComponent.on_apply_boxShadow=function(shadow){if(!this._isEnableRedraw()){return;}var control_elem=this._control_element;if(control_elem){control_elem.setElementBoxShadow(shadow);}};_pComponent.bringToFront=function(){if(this.parent){var parent=this.parent;var parent_child_list=parent._child_list;var child_list=this._child_list;var len=parent_child_list.length;var last_Idx=len-1;var cur_Index=nexacro._indexOf(parent_child_list,this);if(cur_Index>=0&&cur_Index<last_Idx){parent_child_list.splice(cur_Index,1);parent_child_list.splice(last_Idx,0,this);var parent_elem=parent.getElement();var cur_elem=this._control_element,i,comp;if(child_list!=null){for(i=0;i<child_list.length;i++ ){comp=child_list[i];comp._saveScrollPos();}}parent_elem.bringToFrontElement(cur_elem);if(child_list!=null){for(i=0;i<child_list.length;i++ ){comp=child_list[i];comp._applyScrollPos();}}}}};_pComponent.bringToPrev=function(){if(this.parent){var parent=this.parent;var parent_child_list=parent._child_list;var child_list=this._child_list;var len=parent_child_list.length;var last_Idx=len-1,comp,i;var cur_Index=nexacro._indexOf(parent_child_list,this);if(cur_Index>=0&&cur_Index<last_Idx){if(child_list!=null){for(i=0;i<child_list.length;i++ ){comp=child_list[i];comp._saveScrollPos();}}this.moveToPrev(parent_child_list[cur_Index+1]);if(child_list!=null){for(i=0;i<child_list.length;i++ ){comp=child_list[i];comp._applyScrollPos();}}}}};_pComponent.moveToNext=function(objOrId){if(this.parent){var parent=this.parent;var target=(nexacro._isString(objOrId))?parent[objOrId]:objOrId;if(target==null){return;}var child_list=parent._child_list;var cur_idx=nexacro._indexOf(child_list,this);var target_idx=nexacro._indexOf(child_list,target);if(cur_idx<0||target_idx<0){return;}if(cur_idx> -1&&target_idx> -1&&cur_idx!=target_idx-1){child_list.splice(cur_idx,1);var idx=nexacro._indexOf(child_list,target);child_list.splice(idx,0,this);var parent_elem=parent.getElement();parent_elem.moveToNextElement(this._control_element,target.getElement());}}};_pComponent.moveToPrev=function(objOrId){if(this.parent){var parent=this.parent;var target=(nexacro._isString(objOrId))?parent[objOrId]:objOrId;if(target==null){return;}var child_list=parent._child_list;var cur_idx=nexacro._indexOf(child_list,this);var target_idx=nexacro._indexOf(child_list,target);if(cur_idx<0||target_idx<0){return;}if(cur_idx> -1&&target_idx> -1&&cur_idx!=target_idx+1){child_list.splice(cur_idx,1);var index=nexacro._indexOf(child_list,target);child_list.splice(index+1,0,this);var parent_elem=parent.getElement();parent_elem.moveToPrevElement(this._control_element,target.getElement());}}};_pComponent.sendToBack=function(){if(this.parent){var parent=this.parent;var child_list=parent._child_list;var cur_idx=nexacro._indexOf(child_list,this);if(cur_idx>0){child_list.splice(cur_idx,1);child_list.splice(0,0,this);var parent_elem=parent.getElement();parent_elem.sendToBackElement(this._control_element);}}};_pComponent.sendToNext=function(){if(this.parent){var p=this.parent;var child_list=p._child_list;var cur_idx=nexacro._indexOf(child_list,this);if(cur_idx>0){this.moveToNext(child_list[cur_idx-1]);}}};_pComponent.beginTransitionEffect=function(obj){var control_elem=this._control_element;if(control_elem){control_elem.beginTransitionEffect(obj);}};_pComponent.applyTransitionEffect=function(){var control_elem=this._control_element;if(control_elem){control_elem.applyTransitionEffect();}};_pComponent.cancelTransitionEffect=function(){var control_elem=this._control_element;if(control_elem){control_elem.cancelTransitionEffect();}};_pComponent.create=function(){this.initProperties();this.initEvents();};_pComponent.destroy=function(callremovechild){if(!this._is_alive){return;}return this.destroyComponent(callremovechild);};_pComponent.init=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight){if(id){this.id=this.name=id;}if(left!=undefined&&width!=undefined&&right!=undefined){right=null;}if(top!=undefined&&height!=undefined&&bottom!=undefined){bottom=null;}var old_left=this._adjust_left;var old_top=this._adjust_top;var old_width=this._adjust_width;var old_height=this._adjust_height;var bsize=false,bmove=false;var horz=0;var vert=0;if(left!=null){horz++ ;}if(width!=null){horz++ ;}if(right!=null){horz++ ;}if(top!=null){vert++ ;}if(height!=null){vert++ ;}if(bottom!=null){vert++ ;}if(horz>=2&&vert>=2){this.left=left;this.top=top;this.width=width;this.height=height;this.right=right;this.bottom=bottom;this._setMaxwidth(maxwidth);this._setMinwidth(minwidth);this._setMaxheight(maxheight);this._setMinheight(minheight);this._parseArrangeInfo(left,top,right,bottom,width,height);this._calcArrangePosition();if(arguments.length>=5){this._adjustPosition();if(this._adjust_width!=old_width||this._adjust_height!=old_height){bsize=true;}if(this._adjust_left!=old_left||this._adjust_top!=old_top){bmove=true;}this.on_update_position(bsize,bmove);}}};_pComponent.move=function(left,top,width,height,right,bottom){switch(arguments.length){case 1:return;case 2:width=this.width;case 3:height=this.height;case 4:right=this.right;case 5:bottom=this.bottom;default:if(width==undefined&&right==undefined){(this.width!=undefined)?width=this.width:right=this.right;}if(height==undefined&&bottom==undefined){(this.height!=undefined)?height=this.height:bottom=this.bottom;}break;}var horz=0;var vert=0;if(left!=null){horz++ ;}if(width!=null){horz++ ;}if(right!=null){horz++ ;}if(top!=null){vert++ ;}if(height!=null){vert++ ;}if(bottom!=null){vert++ ;}if(horz<2||vert<2){return;}if(left!=undefined&&width!=undefined&&right!=undefined){right=null;}if(top!=undefined&&height!=undefined&&bottom!=undefined){bottom=null;}var update=false;if(this.left!=left){update=true;this.left=left;}if(this.top!=top){update=true;this.top=top;}if(this.width!=width){update=true;this.width=width;}if(this.height!=height){update=true;this.height=height;}if(this.right!=right){update=true;this.right=right;}if(this.bottom!=bottom){update=true;this.bottom=bottom;}if(update){this._parseArrangeInfo(this.left,this.top,this.right,this.bottom,this.width,this.height);}this._update_position(this._isRtl());};_pComponent.resize=function(w,h){if(w<0||h<0){return;}if(w==this._adjust_width&&h==this._adjust_height){return;}if(this.width!=w||this.height!=h){this._parseArrangeInfoProp("width",w);this._parseArrangeInfoProp("height",h);this.width=w;this.height=h;if(this.left!=null&&this.right!=null){this._setRight(null);}if(this.top!=null&&this.bottom!=null){this._setBottom(null);}}this._update_position();};_pComponent.show=function(){var parent=this.parent;if(parent){var control_element=this._control_element;if(!control_element){if(this.createComponent(true)){this.on_created(this._getWindow());}}else{}}};_pComponent.redraw=function(){};_pComponent.setFocus=function(bResetScroll,bInnerFocus){var win=this._getRootWindow();if(!this.getElement()){return;}var is_active_layer=win._isActiveLayerComponent(this);if(!is_active_layer){return;}var focus_direction=this._focus_direction;if(nexacro._enableaccessibility){if(!this._isEnable()){if(focus_direction!=2&&focus_direction!=3){return;}}if(!this._isVisible()||!this._isFocusAcceptable()){return;}}else{if(!this._isVisible()||!this._isEnable()||!this._isFocusAcceptable()){return;}}if(bResetScroll===undefined){bResetScroll=true;}if(bInnerFocus===undefined){bInnerFocus=true;}var bContainerFocus=!bInnerFocus;var block_inner,from_child=false;if(bContainerFocus){if(this._hasContainer()){if(this._block_inner_focus){block_inner=true;}this._block_inner_focus=true;if(this._last_focused){if(win._indexOfCurrentFocusPaths(this._last_focused)>=0){from_child=true;win._removeFromCurrentFocusPath(this._last_focused);}else{this._last_focused=null;}}}}if(bResetScroll){if(this.parent&&this.parent._is_form&&bInnerFocus==true&&!this._block_inner_focus){if(this.parent._bFireLoadEvent==true){if(this.parent.parent&&this.parent.parent._is_frame&&this.parent.parent._window_type==5){var _window=this.parent._getWindow();if(_window&&_window._prepared_flag!=true){this.parent._delayedfocuscomp=this;}}}}var c=this,c_temp,target_comp=this;if(!this._block_inner_focus){while(c){c_temp=c._getLastFocused();if(!c_temp){c_temp=c._getTabOrderFirst();}if(c_temp){target_comp=c_temp;}c=c_temp;}target_comp._resetScrollPos(target_comp,target_comp._adjust_left,target_comp._adjust_top,target_comp._adjust_left+target_comp._adjust_width,target_comp._adjust_top+target_comp._adjust_height,focus_direction);}else{nexacro.Component.prototype._resetScrollPos.call(this,this,this._adjust_left,this._adjust_top,this._adjust_left+this._adjust_width,this._adjust_top+this._adjust_height,focus_direction);}}var last_focused=this._find_lastFocused();var evt_name="focus";if(focus_direction==0){evt_name="tabkey";}else if(focus_direction==1){evt_name="shifttabkey";}else if(focus_direction==2){evt_name="downkey";}else if(focus_direction==3){evt_name="upkey";}this._focus_direction= -1;this._on_focus(true,evt_name);if(from_child){this._apply_setfocus(evt_name);}if(this._block_inner_focus&&!block_inner){this._block_inner_focus=false;}return last_focused;};_pComponent.scrollTo=function(x,y){this._scrollTo(x,y);};_pComponent.scrollBy=function(x,y){this._scrollBy(x,y);};_pComponent.getHScrollPos=function(){return this._hscroll_pos;};_pComponent.getVScrollPos=function(){return this._vscroll_pos;};_pComponent.getDisplayText=function(){return this._on_getDisplayText();};_pComponent.getPixelLeft=function(){return this._left;};_pComponent.getPixelTop=function(){return this._top;};_pComponent.getPixelRight=function(){return this._right;};_pComponent.getPixelBottom=function(){return this._bottom;};_pComponent.getPixelWidth=function(){return this._width;};_pComponent.getPixelHeight=function(){return this._height;};_pComponent.getOffsetLeft=function(){return this._adjust_left;};_pComponent.getOffsetTop=function(){return this._adjust_top;};_pComponent.getOffsetRight=function(){return this._adjust_left+this._adjust_width;};_pComponent.getOffsetBottom=function(){return this._adjust_top+this._adjust_height;};_pComponent.getOffsetWidth=function(){return this._adjust_width;};_pComponent.getOffsetHeight=function(){return this._adjust_height;};_pComponent.setOffsetLeft=function(v){return this.set_left(v);};_pComponent.setOffsetTop=function(v){this.set_top(v);};_pComponent.setOffsetRight=function(v){this.set_width((v|0)-this._adjust_left);};_pComponent.setOffsetBottom=function(v){this.set_height((v|0)-this._adjust_top);};_pComponent.setOffsetWidth=function(v){this.set_width(v);};_pComponent.setOffsetHeight=function(v){this.set_height(v);};_pComponent._on_last_lbuttonup=nexacro._emptyFn;_pComponent._on_last_keyup=nexacro._emptyFn;_pComponent._on_afterHideWaitComp=function(status){if(this._status!=status){this._changeStatus(this._status,true);}};_pComponent.on_notify_hscroll_onscroll=function(obj,e){this._scrollTo(e.pos,this._vscroll_pos,false,false,e.type,e._evtkind);};_pComponent.on_notify_vscroll_onscroll=function(obj,e){this._scrollTo(this._hscroll_pos,e.pos,false,false,e.type,e._evtkind);};_pComponent.on_fire_onhscroll=function(eventid,pos,strType,evtkind){if(this.onhscroll&&this.onhscroll._has_handlers){pos=(pos+0.5)|0;var evt=new nexacro.ScrollEventInfo(this,eventid,pos,strType,this,this.parent);evt._evtkind=evtkind;var ret=this.onhscroll._fireEvent(this,evt);return ret;}return true;};_pComponent.on_fire_onvscroll=function(eventid,pos,strType,evtkind){if(this.onvscroll&&this.onvscroll._has_handlers){pos=(pos+0.5)|0;var evt=new nexacro.ScrollEventInfo(this,eventid,pos,strType,this,this.parent);evt._evtkind=evtkind;var ret=this.onvscroll._fireEvent(this,evt);return ret;}return true;};_pComponent.on_apply_prop_cssclass=function(){};_pComponent.on_apply_prop_enable=function(v){if(this._is_scrollable==true){if(this.vscrollbar){this.vscrollbar._setEnable(v);}if(this.hscrollbar){this.hscrollbar._setEnable(v);}}};_pComponent.on_apply_prop_class=function(){if(this.vscrollbar){this.vscrollbar.on_apply_prop_class();}if(this.hscrollbar){this.hscrollbar.on_apply_prop_class();}this._onResetScrollBar();this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);this.on_apply_custom_class();};_pComponent.on_apply_prop_taborder=function(){if(this.tabstop){this._setAccessibilityFlagFocusable(true);}};_pComponent.on_apply_prop_tooltip=function(){var control_elem=this.getElement();if(control_elem){control_elem.setElementToolTip(this.tooltiptext,this.tooltiptype);}this.on_apply_prop_accessibilitydescription();this._updateAccessibilityLabel();};_pComponent.on_apply_prop_rtl=function(){if(!nexacro._SupportRTL){return;}this._rtl=this._isRtl();var control_elem=this._control_element;if(control_elem){control_elem.setElementRtl(this._rtl);}};_pComponent._apply_setfocus=function(evt_name){var control_elem=this._control_element;if(control_elem){var selffocus=((evt_name=="lbutton")?false:nexacro._enableaccessibility);control_elem.setElementFocus(selffocus);}};_pComponent.on_apply_custom_class=function(){};_pComponent.on_get_popupControlTypeName=function(){var rootcomp=this._getRootComponent(this);return rootcomp.on_get_css_assumedtypename();};_pComponent.on_get_prop_tabstop=function(){return this.tabstop;};_pComponent._on_getFitSize=function(){return [this._adjust_width,this._adjust_height];};_pComponent._on_getDisplayText=function(){return this._displaytext;};_pComponent._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false,want_touchstart:false,want_touchmove:false};};_pComponent.applyto_bindSource=function(propid,Val){if(!this._bind_event){return true;}var evt={propid:propid,val:Val};var ret=this._bind_event._fireEvent(this,evt);return ret;};_pComponent.on_getBindableProperties=function(){};_pComponent.on_getIDCSSSelector=function(){return this.name;};_pComponent.on_get_css_typename=function(){return this._type_name;};_pComponent.on_get_css_assumedtypename=function(){return this._type_name;};_pComponent.initProperties=nexacro._emptyFn;_pComponent.initEvents=nexacro._emptyFn;_pComponent._resizePopupInbound=nexacro._emptyFn;_pComponent._cancelEvent=nexacro._emptyFn;_pComponent._applyZoomPopup=nexacro._emptyFn;_pComponent._getComponentsByTaborder=nexacro._emptyFn;_pComponent._getTabOrderNext=nexacro._emptyFn;_pComponent._getTabOrderFirst=nexacro._emptyFn;_pComponent._getTabOrderLast=nexacro._emptyFn;_pComponent._searchNextTabFocus=nexacro._emptyFn;_pComponent._searchPrevTabFocus=nexacro._emptyFn;_pComponent._getMainFrame=nexacro._emptyFn;_pComponent._getHeadingOrderNext=nexacro._emptyFn;_pComponent._getHeadingOrderFirst=nexacro._emptyFn;_pComponent._getHeadingOrderLast=nexacro._emptyFn;_pComponent._searchNextHeadingFocus=nexacro._emptyFn;_pComponent._searchPrevHeadingFocus=nexacro._emptyFn;_pComponent._setAccessibilityInfoByHover=nexacro._emptyFn;_pComponent._setAccessibilityNotifyEvent=nexacro._emptyFn;_pComponent._on_getAccessibilityAdditionalLabel=nexacro._emptyFn;_pComponent._on_getAccessibilityAdditionalRole=nexacro._emptyFn;_pComponent.on_get_accessibility_label=nexacro._emptyFn;_pComponent.on_get_accessibility_description=nexacro._emptyFn;_pComponent.on_get_accessibility_action=nexacro._emptyFn;_pComponent._getAccessibilityRole=nexacro._emptyFn;_pComponent._getAccessibilityLabel=nexacro._emptyFn;_pComponent._getAccessibilityDescLevel=nexacro._emptyFn;_pComponent._getAccessibilityDescription=nexacro._emptyFn;_pComponent._getAccessibilityAction=nexacro._emptyFn;_pComponent._getAccessibilityReadLabel=nexacro._emptyFn;_pComponent._getLinkedLabel=nexacro._emptyFn;_pComponent._getLinkedDescription=nexacro._emptyFn;_pComponent._getDescLevel=nexacro._emptyFn;_pComponent._getLinkedAction=nexacro._emptyFn;_pComponent._getAccessibilityParentValue=nexacro._emptyFn;_pComponent._getNextAccessibilityOrderIndex=nexacro._emptyFn;_pComponent._setAccessibilityRole=nexacro._emptyFn;_pComponent._setAccessibilityLabel=nexacro._emptyFn;_pComponent._setAccessibilityEnable=nexacro._emptyFn;_pComponent._setAccessibilityDescription=nexacro._emptyFn;_pComponent._setAccessibilityAction=nexacro._emptyFn;_pComponent._setAccessibilityDescLevel=nexacro._emptyFn;_pComponent._setAccessibilityStatDisabled=nexacro._emptyFn;_pComponent._setAccessibilityStatHidden=nexacro._emptyFn;_pComponent._setAccessibilityStatChecked=nexacro._emptyFn;_pComponent._setAccessibilityStatPressed=nexacro._emptyFn;_pComponent._setAccessibilityStatSelected=nexacro._emptyFn;_pComponent._setAccessibilityStatExpanded=nexacro._emptyFn;_pComponent._setAccessibilityStatAutoComplete=nexacro._emptyFn;_pComponent._setAccessibilityFlagHasPopup=nexacro._emptyFn;_pComponent._setAccessibilityFlagFocusable=nexacro._emptyFn;_pComponent._setAccessibilityFlagReadOnly=nexacro._emptyFn;_pComponent._setAccessibilityFlagPassword=nexacro._emptyFn;_pComponent._setAccessibilityFlagMultiSelectable=nexacro._emptyFn;_pComponent._setAccessibilityFlagSelectable=nexacro._emptyFn;_pComponent._setAccessibilityFlagDefaultButton=nexacro._emptyFn;_pComponent._setAccessibilityFlagMultiLine=nexacro._emptyFn;_pComponent._setAccessibilityInfoCount=nexacro._emptyFn;_pComponent._setAccessibilityInfoIndex=nexacro._emptyFn;_pComponent._setAccessibilityInfoValueMax=nexacro._emptyFn;_pComponent._setAccessibilityInfoValueMin=nexacro._emptyFn;_pComponent._setAccessibilityInfoValueCur=nexacro._emptyFn;_pComponent._setAccessibilityInfoLevel=nexacro._emptyFn;_pComponent._setAccessibilityHotKey=nexacro._emptyFn;_pComponent._setAccessibilityActiveDescendant=nexacro._emptyFn;_pComponent._setAccessibilityStatFlag=nexacro._emptyFn;_pComponent._setAccessibilityValue=nexacro._emptyFn;_pComponent._setAccessibilityStatFocus=nexacro._emptyFn;_pComponent._setAccessibilityStatKillFocus=nexacro._emptyFn;_pComponent._setAccessibilityStatLive=nexacro._emptyFn;_pComponent._updateAccessibilityLabel=nexacro._emptyFn;_pComponent._notifyAccessibility=nexacro._emptyFn;_pComponent._isAccessibilityEnable=nexacro._echoFn;_pComponent._isItemAccessibilityEnable=nexacro._echoFn;_pComponent._isAccessibilityRoleHeading=nexacro._emptyFn;_pComponent._makeStatusMap=function(){this._statusmap={disabled:false,mouseover:false,focused:false,deactivate:false};if(this._use_readonly_status){this._statusmap.readonly=false;}this._userstatusmap={};if(this._use_pushed_status){this._userstatusmap.pushed=false;}if(this._use_selected_status){this._userstatusmap.selected=false;}};_pComponent._makeCSSMapInfo=function(){var findcssmap=[];var typeselector=this.on_get_css_assumedtypename();var mapfortypename=nexacro._dimension_maps[typeselector];if(mapfortypename){var mapfortypename_self=mapfortypename.self;if(mapfortypename_self){findcssmap.push(mapfortypename_self);}}var arr_mapfortypename_class;if(mapfortypename){arr_mapfortypename_class=mapfortypename["class"];}var cssselectors=this._getClassCSSSelector();var len,i,j,jlen,matchcount=0;if(arr_mapfortypename_class&&cssselectors){len=cssselectors.length;jlen=arr_mapfortypename_class.length;for(j=0;j<jlen;j++ ){if(len==matchcount){break;}var mapfortypename_class=arr_mapfortypename_class[j];var mapforclass;for(i=0;i<len;i++ ){var cssselector=cssselectors[i];if(cssselector){mapforclass=mapfortypename_class[cssselector.trim()];if(mapforclass){var mapforclass_self=mapforclass.self;if(mapforclass_self){findcssmap.push(mapforclass_self);}matchcount++ ;break;}}}}}if(this._is_subcontrol&&this.parent&&this.parent._is_component){var idselector=this._getIDCSSSelector();if(idselector){var searchmapdata;var mapforid=nexacro._dimension_maps[idselector];if(mapforid){searchmapdata=[];searchmapdata.push(mapforid);}if(mapforid){this._getCSSMapParent()._makeRefCSSMapInfo(findcssmap,searchmapdata,cssselectors);}}}var pitem;len=findcssmap.length;this._cssselector={enabled:{}};var selector=this._cssselector;for(i=len-1;i>=0;i-- ){var findselector=findcssmap[i];for(var status in findselector){if(!findselector.hasOwnProperty(status)){continue;}var item=findselector[status];if(nexacro._include_status_map){if(!selector[status]){selector[status]={};}}for(var attr in item){if(selector[status]&&selector[status][attr]){continue;}if(!item.hasOwnProperty(attr)){continue;}pitem=item[attr];if(!selector[status]){selector[status]={};}selector[status][attr]=pitem;}}}};_pComponent._getCSSMapParent=function(){return this.parent;};_pComponent._makeRefCSSMapInfo=function(cssmap,searchmapdata,sub_cssselectors){var len,i,j,jlen,matchcount=0;var mapforclass,cssselector;var typeselector=this.on_get_css_assumedtypename();var idselector=this._getIDCSSSelector();var cssselectors=this._getClassCSSSelector();var mapforid_parent=searchmapdata.shift();var findmaplist=[];while(mapforid_parent){var _mapforid_parent=mapforid_parent.parent;if(_mapforid_parent){var mapforid;if(idselector){mapforid=_mapforid_parent[idselector];if(mapforid){findmaplist.push(mapforid);var mapforid_class=mapforid["class"];if(mapforid_class&&cssselectors){len=cssselectors.length;for(i=0;i<len;i++ ){cssselector=cssselectors[i];if(cssselector){mapforclass=mapforid_class[cssselector.trim()];if(mapforclass){findmaplist.push(mapforclass);}}}}}}var mapfortypename=_mapforid_parent[typeselector];if(mapfortypename){var mapfortypename_self=mapfortypename.self;if(mapfortypename_self){cssmap.push(mapfortypename_self);}var arr_mapfortypename_class=mapfortypename["class"];if(arr_mapfortypename_class&&cssselectors){len=cssselectors.length;jlen=arr_mapfortypename_class.length;matchcount=0;for(j=0;j<jlen;j++ ){if(len==matchcount){break;}var mapfortypename_class=arr_mapfortypename_class[j];for(i=0;i<len;i++ ){cssselector=cssselectors[i];if(cssselector){mapforclass=mapfortypename_class[cssselector.trim()];if(mapforclass&&mapforclass.self){cssmap.push(mapforclass.self);matchcount++ ;}}}}}}}var arr_mapforid_class=mapforid_parent["class"];if(arr_mapforid_class&&sub_cssselectors){jlen=arr_mapforid_class.length;len=sub_cssselectors.length;matchcount=0;for(j=0;j<jlen;j++ ){if(len==matchcount){break;}for(i=0;i<len;i++ ){cssselector=sub_cssselectors[i];if(cssselector){mapforid_class=arr_mapforid_class[j];mapforclass=mapforid_class[cssselector.trim()];if(mapforclass&&mapforclass.parent){var mapforclass_parent_id=mapforclass.parent[idselector];if(mapforclass_parent_id){findmaplist.push(mapforclass_parent_id);matchcount++ ;}}}}}}mapforid_parent=searchmapdata.shift();}var parent=this._getCSSMapParent();if(findmaplist.length>0&&parent&&parent._is_component){parent._makeRefCSSMapInfo(cssmap,findmaplist,cssselectors);}};_pComponent._changeStatus=function(status,value){this._on_changeStatus(status,value);};_pComponent.on_changeStatus=function(changestatus,value,applystatus,currentstatus,currentuserstatus){return applystatus;};_pComponent._on_changeStatus=function(status,value){if(!this._is_alive){return;}this._oldstatus=this._status;var applystatus="enabled";this._statusmap[status]=value;var statusmap=this._statusmap;if(statusmap.disabled){applystatus="disabled";}else if(statusmap.readonly&&this._use_readonly_status){applystatus="readonly";}else if(statusmap.mouseover){applystatus="mouseover";}else if(statusmap.focused){applystatus="focused";}else if(statusmap.deactivate){applystatus="deactivate";}this._status=this.on_changeStatus(status,value,applystatus,this._status,this._userstatus);if(this._status=="mouseover"&&nexacro._cur_track_info){this._status=this._oldstatus;return;}if(this._oldstatus!=this._status){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus,undefined,false,status,value);}if(nexacro._enableaccessibility){this._setAccessibilityStatFlag(this._status,this._userstatus);}};_pComponent._changeUserStatus=function(changestatus,value){return this._on_changeUserStatus(changestatus,value);};_pComponent.on_changeUserStatus=function(changestatus,value,applyuserstatus,currentstatus,currentuserstatus){return applyuserstatus;};_pComponent._on_changeUserStatus=function(status,value){this._olduserstatus=this._userstatus;var applystatus="";this._userstatusmap[status]=value;var statusmap=this._userstatusmap;if(this._use_pushed_status&&statusmap.pushed){applystatus="pushed";}else if(this._use_selected_status&&statusmap.selected){applystatus="selected";}this._userstatus=this.on_changeUserStatus(status,value,applystatus,this._status,this._userstatus);if(this._olduserstatus!=this._userstatus){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus,undefined,true,status,value);}this._setAccessibilityStatFlag(this._status,this._userstatus);};_pComponent.on_apply_status=function(){};_pComponent._on_apply_status=function(oldstatus,status,olduserstatus,userstatus,apply,is_userstatus,status_param,value_param,applycssstatus,applycssuserstatus){if(apply||(oldstatus!=status)||(olduserstatus!=userstatus)){this.on_apply_status(status,userstatus,is_userstatus,status_param,value_param);}var control_elem=this._control_element;if(control_elem){if(oldstatus!=status){control_elem.setElementStatus(applycssstatus);}if(olduserstatus!=userstatus||applycssuserstatus===""){control_elem.setElementUserStatus(applycssuserstatus);}}};_pComponent._apply_status=function(oldstatus,status,olduserstatus,userstatus,apply,is_userstatus,status_param,value_param){var enable=(nexacro._is_enable_setting)?this.enable:this.enable&&this._real_enable;var form;if(!this._is_frame||(this._is_frame&&!this._is_popup_frame)){form=this.parent;}while(form!=null){if(!form._is_frame||(form._is_frame&&!form._is_popup_frame)){if(form._is_subcontrol==false){if(form._real_enable==false||form.enable==false){enable=false;break;}}form=form.parent;}else{break;}}if(this._setEnable(enable)){return;}this._apply_status_toelement(oldstatus,status,olduserstatus,userstatus,apply,is_userstatus,status_param,value_param);};_pComponent._apply_status_toelement=function(oldstatus,status,olduserstatus,userstatus,apply,is_userstatus,status_param,value_param){var control_elem=this._control_element;if(this.visible&&control_elem){var multistatus="";if(status!="enabled"&&status&&userstatus){multistatus=status+"_"+userstatus;}var settingstatus=false;var settinguserstatus=false;var border=null;var padding=null;var edge=null;var cssselector;if(multistatus){cssselector=this._cssselector[multistatus];if(cssselector){settingstatus=true;settinguserstatus=true;border=cssselector.border;padding=cssselector.padding;edge=cssselector.edge;}}var disabled_status=false;if(status==="disabled"){disabled_status=true;cssselector=this._cssselector[status];if(cssselector){settingstatus=true;if(!border){border=cssselector.border;}if(!padding){padding=cssselector.padding;}if(!edge){edge=cssselector.edge;}}}if(userstatus){cssselector=this._cssselector[userstatus];if(cssselector){settinguserstatus=true;if(!border){border=cssselector.border;}if(!padding){padding=cssselector.padding;}if(!edge){edge=cssselector.edge;}}}if(!disabled_status&&status!="enabled"){cssselector=this._cssselector[status];if(cssselector){settingstatus=true;if(!border){border=cssselector.border;}if(!padding){padding=cssselector.padding;}if(!edge){edge=cssselector.edge;}}}var enableselector=this._cssselector.enabled;if(!border){border=enableselector.border;}if(!padding){padding=enableselector.padding;}if(!edge){edge=enableselector.edge;}if(edge&&this._isRtl()&&enableselector.rtlEdgeImage){edge=enableselector.rtlEdgeImage;}control_elem.setElementCSSMapInfo(border,padding,edge);var applycssstatus=status;var applycssuserstatus=userstatus;if(nexacro._include_status_map){applycssstatus=(settingstatus?status:"");applycssuserstatus=(settinguserstatus?userstatus:"");}this._on_apply_status(oldstatus,status,olduserstatus,userstatus,apply,is_userstatus,status_param,value_param,applycssstatus,applycssuserstatus);}};_pComponent._adjustPosition=function(){var parent=this.parent?this.parent:this._getForm();var fittocontents=this.fittocontents;var info=this._arrange_info;var target1,target2;var left=this._left;var top=this._top;var right=this._right;var bottom=this._bottom;var width=this._width;var height=this._height;var minwidth=this._minwidth;var maxwidth=this._maxwidth;var minheight=this._minheight;var maxheight=this._maxheight;var p_width=parent?parent._getClientWidth():0;var p_height=parent?parent._getClientHeight():0;var calc_pos;var calc_left=0,calc_top=0,calc_right=0,calc_bottom=0;if(left!=null){if(info&&(target1=this._getArrangeComp("left"))){calc_pos=target1._adjust_left+target1._adjust_width;}else{calc_pos=0;}calc_left=calc_pos+left;if(right!=null){if(info&&(target2=this._getArrangeComp("right"))){calc_pos=target2._adjust_left;}else{calc_pos=p_width;}if(fittocontents=="width"||fittocontents=="both"){calc_right=calc_left+width;}else{calc_right=calc_pos-right;}if(!target1&&target2){if(minwidth!=null&&((calc_right-calc_left)<minwidth)){calc_left=calc_right-minwidth;}else if(maxwidth!=null&&((calc_right-calc_left)>maxwidth)){calc_left=calc_right-maxwidth;}}}else{calc_right=calc_left+width;}}else{if(info&&(target2=this._getArrangeComp("right"))){calc_pos=target2._adjust_left;}else{calc_pos=p_width;}calc_right=calc_pos-right;calc_left=calc_right-width;if(minwidth!=null&&(width<minwidth)){calc_left=calc_right-minwidth;}else if(maxwidth!=null&&(width>maxwidth)){calc_left=calc_right-maxwidth;}}if(top!=null){if(info&&(target1=this._getArrangeComp("top"))){calc_pos=target1._adjust_top+target1._adjust_height;}else{calc_pos=0;}calc_top=calc_pos+top;if(bottom!=null){if(info&&(target2=this._getArrangeComp("bottom"))){calc_pos=target2._adjust_top;}else{calc_pos=p_height;}if(fittocontents=="height"||fittocontents=="both"){calc_bottom=calc_top+height;}else{calc_bottom=calc_pos-bottom;}if(!target1&&target2){if(minheight!=null&&((calc_bottom-calc_top)<minheight)){calc_top=calc_bottom-minheight;}else if(maxheight!=null&&((calc_bottom-calc_top)>maxheight)){calc_top=calc_bottom-maxheight;}}}else{calc_bottom=calc_top+height;}}else{if(info&&(target2=this._getArrangeComp("bottom"))){calc_pos=target2._adjust_top;}else{calc_pos=p_height;}calc_bottom=calc_pos-bottom;calc_top=calc_bottom-height;if(minheight!=null&&(height<minheight)){calc_top=calc_bottom-minheight;}else if(maxheight!=null&&(height>maxheight)){calc_top=calc_bottom-maxheight;}}this._adjust_left=calc_left;this._adjust_top=calc_top;calc_pos=calc_right-calc_left;if(calc_pos<0){calc_pos=0;}if(minwidth!=null&&(calc_pos<minwidth)){calc_pos=minwidth;}else if(maxwidth!=null&&(calc_pos>maxwidth)){calc_pos=maxwidth;}this._adjust_width=calc_pos;calc_pos=calc_bottom-calc_top;if(calc_pos<0){calc_pos=0;}if(minheight!=null&&(calc_pos<minheight)){calc_pos=minheight;}else if(maxheight!=null&&(calc_pos>maxheight)){calc_pos=maxheight;}this._adjust_height=calc_pos;};_pComponent._setLeft=function(propVal){if(propVal===""){propVal=null;}if(this.left!=propVal){this.left=propVal;this._parseArrangeInfoProp("left",propVal);if(propVal==null){if(this.width==null){this._setWidth(this._adjust_width);}else if(this.right==null){var right=this.parent._adjust_width-(this._adjust_left+this._adjust_width);this._setRight(right);}}else{if(this.right!=null&&this.width!=null){this._setRight(null);}}}};_pComponent._setTop=function(propVal){if(propVal===""){propVal=null;}if(this.top!=propVal){this.top=propVal;this._parseArrangeInfoProp("top",propVal);if(propVal==null){if(this.height==null){this._setHeight(this._adjust_height);}else if(this.bottom==null){var bottom=this.parent._adjust_height-(this._adjust_top+this._adjust_height);this._setBottom(bottom);}}else{if(this.bottom!=null&&this.height!=null){this._setBottom(null);}}}};_pComponent._setRight=function(propVal){if(propVal===""){propVal=null;}if(this.right!=propVal){this.right=propVal;this._parseArrangeInfoProp("right",propVal);if(propVal==null){if(this.width==null){this._setWidth(this._adjust_width);}else if(this.left==null){this._setLeft(this._adjust_left);}}else{if(this.left!=null&&this.width!=null){this._setWidth(null);}}}};_pComponent._setBottom=function(propVal){if(propVal===""){propVal=null;}if(this.bottom!=propVal){this.bottom=propVal;this._parseArrangeInfoProp("bottom",propVal);if(propVal==null){if(this.height==null){this._setHeight(this._adjust_height);}else if(this.top==null){this._setTop(this._adjust_top);}}else{if(this.top!=null&&this.height!=null){this._setHeight(null);}}}};_pComponent._setWidth=function(propVal){if(propVal===""){propVal=null;}if(this.width!=propVal){this.width=propVal;this._parseArrangeInfoProp("width",propVal);if(propVal==null){if(this.left==null){this._setLeft(this._adjust_left);}else if(this.right==null){var right=this.parent._adjust_width-(this._adjust_left+this._adjust_width);this._setRight(right);}}else{if(this.left!=null&&this.right!=null){this._setRight(null);}}}};_pComponent._setHeight=function(propVal){if(propVal===""){propVal=null;}if(this.height!=propVal){this.height=propVal;this._parseArrangeInfoProp("height",propVal);if(propVal==null){if(this.top==null){this._setTop(this._adjust_top);}else if(this.bottom==null){var bottom=this.parent._adjust_height-(this._adjust_top+this._adjust_height);this._setBottom(bottom);}}else{if(this.top!=null&&this.bottom!=null){this._setBottom(null);}}}};_pComponent._setMinwidth=function(v){if(v!=null&&isNaN(parseInt(v))){return;}if(this.minwidth!=v){if(v==null){this.minwidth=null;this._minwidth=null;}else{this.minwidth=v;this._minwidth=parseInt(v);}if((v&&this.maxwidth)&&(this._minwidth>this._maxwidth)){this._setMaxwidth(this._minwidth);}}};_pComponent._setMaxwidth=function(v){if(v!=null&&isNaN(parseInt(v))){return;}if(this.maxwidth!=v){if(v==null){this.maxwidth=null;this._maxwidth=null;}else{this.maxwidth=v;this._maxwidth=parseInt(v);}if((v&&this.minwidth)&&(this._maxwidth<this._minwidth)){this._setMinwidth(this._maxwidth);}}};_pComponent._setMinheight=function(v){if(v!=null&&isNaN(parseInt(v))){return;}if(this.minheight!=v){if(v==null){this.minheight=null;this._minheight=null;}else{this.minheight=v;this._minheight=parseInt(v);}if((v&&this.maxheight)&&(this._minheight>this._maxheight)){this._setMaxheight(this._minheight);}}};_pComponent._setMaxheight=function(v){if(v!=null&&isNaN(parseInt(v))){return;}if(this.maxheight!=v){if(v==null){this.maxheight=null;this._maxheight=null;}else{this.maxheight=v;this._maxheight=parseInt(v);}if((v&&this.minheight)&&(this._maxheight<this.minheight)){this._setMinheight(this._maxheight);}}};_pComponent.on_update_position=function(resize_flag,move_flag,update){var control_elem=this._control_element;if(control_elem){if(move_flag){control_elem.setElementPosition(this._adjust_left,this._adjust_top);this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(resize_flag||update){control_elem.setElementSize(this._adjust_width,this._adjust_height,update);if(resize_flag){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}};_pComponent._update_position=function(isrtl){var old_left=this._adjust_left;var old_top=this._adjust_top;var old_width=this._adjust_width;var old_height=this._adjust_height;var update=false;var bsize=false,bmove=false;this._calcArrangePosition();this._adjustPosition();if(this._adjust_width!=old_width||this._adjust_height!=old_height){bsize=true;if(old_width==0||old_height==0){update=true;}}if(this._adjust_left!=old_left||this._adjust_top!=old_top){bmove=true;}this.on_update_position(bsize,bmove,bmove?false:isrtl);if(update){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pComponent._convToPixel=function(val,parentsize){if(typeof (val)=="string"&&val.indexOf("%")>=0){return parseInt((parentsize*parseFloat(val))/100);}return (parseInt(val)|0);};_pComponent._parseArrangeVal=function(val){var info=null;if(val&&typeof val=="string"){var arr=val.split(":");if(arr.length==2){if(!isNaN(parseFloat(arr[1]))){info={compid:arr[0],distance:arr[1]};}}else if(val.indexOf("%")>=0){if(!isNaN(parseFloat(val))){info={compid:null,distance:val};}}}return info;};_pComponent._parseArrangeInfoProp=function(prop_name,val){var info_obj=this._arrange_info;var info;if(val!=undefined){if(!info_obj){info_obj={};}info=this._parseArrangeVal(val);if(info){info_obj[prop_name]=info;}else{info_obj[prop_name]=undefined;delete info_obj[prop_name];}}else{if(info_obj){info_obj[prop_name]=undefined;delete info_obj[prop_name];}}if(info_obj){this._arrange_info=info_obj;for(info in info_obj){break;}if(!info){this._arrange_info=null;}}};_pComponent._parseArrangeInfo=function(left,top,right,bottom,width,height){if(left==undefined&&top==undefined&&right==undefined&&bottom==undefined&&width==undefined&&height==undefined){this._arrange_info=null;return;}var info;var info_obj={};if(left&&(info=this._parseArrangeVal(left))){info_obj.left=info;}if(top&&(info=this._parseArrangeVal(top))){info_obj.top=info;}if(right&&(info=this._parseArrangeVal(right))){info_obj.right=info;}if(bottom&&(info=this._parseArrangeVal(bottom))){info_obj.bottom=info;}if(width&&(info=this._parseArrangeVal(width))){info_obj.width=info;}if(height&&(info=this._parseArrangeVal(height))){info_obj.height=info;}this._arrange_info=info_obj;for(info in this._arrange_info){break;}if(!info){this._arrange_info=null;}};_pComponent._calcArrangePosition=function(){var info=this._arrange_info;var form=this._is_subcontrol?this.parent:this._getForm();var comp,comp_width,comp_height,obj,parsePosition;var size;var fittocontents=this.fittocontents;if(fittocontents!="none"){size=this._on_getFitSize();}if(info&&(obj=info.left)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_width=comp._getClientWidth();}else{comp_width=comp._adjust_width;}this._left=this._convToPixel(obj.distance,comp_width);}}else{if(this.left!=null){this._left=isNaN(parsePosition=parseFloat(this.left))?this._left:parsePosition;}else{this._left=null;}}if(info&&(obj=info.top)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_height=comp._getClientHeight();}else{comp_height=comp._adjust_height;}this._top=this._convToPixel(obj.distance,comp_height);}}else{if(this.top!=null){this._top=isNaN(parsePosition=parseFloat(this.top))?this._top:parsePosition;}else{this._top=null;}}if(info&&(obj=info.right)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_width=comp._getClientWidth();}else{comp_width=comp._adjust_width;}this._right=this._convToPixel(obj.distance,comp_width);}}else{if(this.right!=null){this._right=isNaN(parsePosition=parseFloat(this.right))?this._right:parsePosition;}else{this._right=null;}}if(info&&(obj=info.bottom)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_height=comp._getClientHeight();}else{comp_height=comp._adjust_height;}this._bottom=this._convToPixel(obj.distance,comp_height);}}else{if(this.bottom!=null){this._bottom=isNaN(parsePosition=parseFloat(this.bottom))?this._bottom:parsePosition;}else{this._bottom=null;}}if(fittocontents=="width"||fittocontents=="both"){if(size){this._width=size[0];}}else{if(info&&(obj=info.width)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_width=comp._getClientWidth();}else{comp_width=comp._adjust_width;}this._width=this._convToPixel(obj.distance,comp_width);}}else{if(this.width!=null){this._width=isNaN(parsePosition=parseFloat(this.width))?this._width:parsePosition;}else{this._width=null;}}}if(fittocontents=="height"||fittocontents=="both"){if(size){this._height=size[1];}}else{if(info&&(obj=info.height)){if(form&&form._is_created_contents){comp=this._findComponentForArrange(obj.compid);if(!comp){comp=form;comp_height=comp._getClientHeight();}else{comp_height=comp._adjust_height;}this._height=this._convToPixel(obj.distance,comp_height);}}else{if(this.height!=null){this._height=isNaN(parsePosition=parseFloat(this.height))?this._height:parsePosition;}else{this._height=null;}}}};_pComponent._getArrangeComp=function(position_prop){switch(position_prop){case "left":case "top":case "width":case "height":case "right":case "bottom":break;default:return undefined;}var info=this._arrange_info;if(!info){return null;}var info_obj=info[position_prop];if(!info_obj){return null;}return this._findComponentForArrange(info_obj.compid);};_pComponent._findComponentForArrange=function(compid){var comp=null;var form=null;var comps,this_idx,target_idx,source_idx;if(compid){if(!this._is_subcontrol){form=this._getForm();if(form){comps=form.components;this_idx=comps.indexOf(this.id);target_idx=comps.indexOf(compid);if(this_idx<target_idx){return null;}var target_comp=comps[compid];if(target_comp){if((this.positionstep!=target_comp.positionstep)||this.positionstep== -1||target_comp.positionstep== -1){return null;}}comp=comps[target_idx];}}else{var parent=this.parent;if(parent._findChild){var target=parent._findChild(compid);if(!target||target.taborder>this.taborder){return null;}comp=target;}else{form=this._getForm();if(form){comps=form.components;source_idx=comps.indexOf(this.id);target_idx=comps.indexOf(compid);if(source_idx<target_idx){return null;}comp=comps[target_idx];}}}}return comp;};_pComponent._onRecalcScrollSize=nexacro._emptyFn;_pComponent._onResetScrollBar=function(){if(!this._is_scrollable){return;}var control_elem=this._control_element;if(control_elem){var hscrollbar_size=this._getHScrollBarSize();var vscrollbar_size=this._getVScrollBarSize();var bcreatevscroll=false;var bcreatehscroll=false;var hscrollbartype=this._getHScrollBarType();var vscrollbartype=this._getVScrollBarType();var scrolltype=this.scrolltype;if(scrolltype=="none"){}else{if(scrolltype!="vertical"&&hscrollbartype!="none"){bcreatehscroll=true;}if(scrolltype!="horizontal"&&vscrollbartype!="none"){bcreatevscroll=true;}if(this._is_form&&this.getStepCount()>0){bcreatehscroll=false;}}var client_left=control_elem.client_left;var client_top=control_elem.client_top;var client_width=control_elem.client_width;var client_height=control_elem.client_height;var zclient_width=control_elem._zclient_width;var zclient_height=control_elem._zclient_height;var paddingleft=0,paddingtop=0,paddingright=0,paddingbottom=0;var padding=control_elem.padding?control_elem.padding:control_elem._padding_info;var vscroll_enable=false;var hscroll_enable=false;if(control_elem._apply_client_padding&&padding){paddingleft=padding.left;paddingtop=padding.top;paddingright=padding.right;paddingbottom=padding.bottom;}var hscroll_left=client_left-paddingleft;var hscroll_top=client_height+paddingtop+paddingbottom;var hscroll_width=client_width+paddingleft+paddingright;var vscroll_left=client_width+paddingleft+paddingright;var vscroll_top=client_top-paddingtop;var vscroll_height=client_height+paddingtop+paddingbottom;if(bcreatehscroll){this._createHScrollBar(hscrollbar_size);if(hscrollbar_size>0){if(control_elem.hscroll_limit<=0&&hscrollbartype!="fixed"){hscrollbar_size=0;}if(hscrollbartype=="autoindicator"){hscroll_top-=hscrollbar_size;this.hscrollbar.set_visible(false);}else{this.hscrollbar.set_visible(true);}}}else{if(this.hscrollbar){this.hscrollbar.destroy();this.hscrollbar=null;}}if(bcreatevscroll){this._createVScrollBar(vscrollbar_size);if(vscrollbar_size>0){if(control_elem.vscroll_limit<=0&&vscrollbartype!="fixed"){vscrollbar_size=0;}if(vscrollbartype=="autoindicator"){vscroll_left-=vscrollbar_size;this.vscrollbar.set_visible(false);}else{this.vscrollbar.set_visible(true);}}}else{if(this.vscrollbar){this.vscrollbar.destroy();this.vscrollbar=null;}}if(this.hscrollbar){if(this._isEnable()&&hscrollbar_size>0&&(scrolltype!="none"&&scrolltype!="vertical")&&control_elem.hscroll_limit>0){hscroll_enable=true;}this.hscrollbar._setScrollInfo(hscroll_left,hscroll_top,hscroll_width,hscrollbar_size,0,control_elem.hscroll_limit,this._scroll_default_value,zclient_width,zclient_width,hscroll_enable,control_elem.scroll_left);if(!this.hscrollbar._is_created){this.hscrollbar.on_created(this._getWindow());}}if(this.vscrollbar){if(this._isEnable()&&vscrollbar_size>0&&(scrolltype!="none"&&scrolltype!="horizontal")&&control_elem.vscroll_limit>0){vscroll_enable=true;}this.vscrollbar._setScrollInfo(vscroll_left,vscroll_top,vscrollbar_size,vscroll_height,0,control_elem.vscroll_limit,this._scroll_default_value,zclient_height,zclient_height,vscroll_enable,control_elem.scroll_top);if(!this.vscrollbar._is_created){this.vscrollbar.on_created(this._getWindow());}}}};_pComponent._on_beforescroll=function(){return true;};_pComponent._scrollBy=function(x,y,bapplyscrollbar,bautohidetimer,evttype,evtkind){x=parseInt(x)+this._hscroll_pos;y=parseInt(y)+this._vscroll_pos;this._scrollTo(x,y,bapplyscrollbar,bautohidetimer,evttype,evtkind);};_pComponent._scrollTo=function(hpos,vpos,bapplyscrollbar,bautohidetimer,evttype,evtkind){if(nexacro._isNull(bapplyscrollbar)){bapplyscrollbar=true;}if(nexacro._isNull(bautohidetimer)){bautohidetimer=false;}var control_elem=this.getElement();if(!control_elem){return false;}var scrolltype=this.scrolltype;var evttype_h,evttype_v;if(scrolltype=="none"){return;}var hscrollbartype=this._getHScrollBarType();var vscrollbartype=this._getVScrollBarType();var hscroll_limit=control_elem.hscroll_limit;var vscroll_limit=control_elem.vscroll_limit;var current_hpos=this._hscroll_pos;var current_vpos=this._vscroll_pos;var bchange_hscroll_pos=false;var bchange_vscroll_pos=false;if(nexacro._isNull(hpos)||scrolltype=="vertical"){hpos=current_hpos;}if(nexacro._isNull(vpos)||scrolltype=="horizontal"){vpos=current_vpos;}hpos=parseInt(hpos)|0;vpos=parseInt(vpos)|0;hpos=hpos<0?0:hpos;vpos=vpos<0?0:vpos;var bscroll=this._on_beforescroll(current_hpos,current_vpos,hpos,vpos,evttype,evtkind);hpos=hpos>hscroll_limit?hscroll_limit:hpos;vpos=vpos>vscroll_limit?vscroll_limit:vpos;if((evtkind=="slide"||evtkind=="fling")&&this.stepselector&&this.stepselector.stepcount>0){var hmove=Math.abs(current_hpos-hpos);var vmove=Math.abs(current_vpos-vpos);if(this._is_step_vscrolling){hpos=current_hpos;}else if(this._is_step_hscrolling){vpos=current_vpos;}else{if(hmove<vmove){hpos=current_hpos;this._is_step_vscrolling=true;}else{vpos=current_vpos;this._is_step_hscrolling=true;}}}if(hpos!=current_hpos&&vpos!=current_vpos){bchange_hscroll_pos=true;bchange_vscroll_pos=true;if(bscroll){control_elem.setElementScrollPos(hpos,vpos);}this._hscroll_pos=hpos;this._vscroll_pos=vpos;}else if(hpos!=current_hpos){bchange_hscroll_pos=true;if(bscroll){control_elem.setElementHScrollPos(hpos);}this._hscroll_pos=hpos;}else if(vpos!=current_vpos){bchange_vscroll_pos=true;if(bscroll){control_elem.setElementVScrollPos(vpos);}this._vscroll_pos=vpos;}if(evtkind!="vertical"&&evtkind!="page_v"&&evtkind!="mousewheel_v"){if(evttype){evttype_h=evttype;}else{evttype_h=this._getScrollEventType(current_hpos,hpos,0,hscroll_limit,"h");}}if(bchange_hscroll_pos||evttype_h){if(evttype_h&&evtkind=="mousewheel_h"){evttype_h="wheel"+evttype_h;}else if(evtkind=="page_h"&&(evttype_h=="left"||evttype_h=="right")){evttype_h="page"+evttype_h;}else if(evtkind=="slide"||evtkind=="fling"){if(evttype_h=="first"||evttype_h=="firstover"||evttype_h=="last"||evttype_h=="lastover"){evttype_h="slide"+evttype_h;}else if(evttype_h=="left"||evttype_h=="right"){evttype_h="slidescroll"+evttype_h;}else{evttype_h="slide";}}if(evttype_h=="left"||evttype_h=="right"){evttype_h="none";}if(bchange_hscroll_pos||evttype_h!="none"){this.on_fire_onhscroll("onhscroll",hpos,evttype_h?evttype_h:evttype,evtkind);}}if(evtkind!="horizontal"&&evtkind!="page_h"&&evtkind!="mousewheel_h"){if(evttype){evttype_v=evttype;}else{evttype_v=this._getScrollEventType(current_vpos,vpos,0,vscroll_limit,"v");}}if(bchange_vscroll_pos||evttype_v){if(evttype_v&&evtkind=="mousewheel_v"){evttype_v="wheel"+evttype_v;}else if(evtkind=="page_v"&&(evttype_v=="up"||evttype_v=="down")){evttype_v="page"+evttype_v;}else if(evtkind=="slide"||evtkind=="fling"){if(evttype_v=="first"||evttype_v=="firstover"||evttype_v=="last"||evttype_v=="lastover"){evttype_v="slide"+evttype_v;}else if(evttype_v=="up"||evttype_v=="down"){evttype_v="slidescroll"+evttype_v;}else{evttype_v="slide";}}if(evttype_v=="up"||evttype_v=="down"){evttype_v="none";}if((bchange_vscroll_pos||evttype_v!="none")&&evtkind!="stepchange"){this.on_fire_onvscroll("onvscroll",vpos,evttype_v?evttype_v:evttype,evtkind);}}if(bapplyscrollbar){var hscrollbar=this.hscrollbar;if(hscrollbar&&hscrollbar.enable&&bchange_hscroll_pos){if(hscrollbartype=="autoindicator"){hscrollbar.set_visible(true);if(bautohidetimer){nexacro._OnceCallbackTimer.callonce(this,function(){this.hscrollbar.set_visible(false);},500);}}hscrollbar._setPos(hpos,evtkind,false);}var vscrollbar=this.vscrollbar;if(vscrollbar&&vscrollbar.enable&&bchange_vscroll_pos){if(vscrollbartype=="autoindicator"){vscrollbar.set_visible(true);if(bautohidetimer){nexacro._OnceCallbackTimer.callonce(this,function(){this.vscrollbar.set_visible(false);},500);}}vscrollbar._setPos(vpos,evtkind,false);}}return true;};_pComponent._createVScrollBar=function(scroll_size){var vscrollbartype=this._getVScrollBarType();var vscrollbar;if(vscrollbartype=="autoindicator"||vscrollbartype=="indicator"){if(this.vscrollbar&&(this.vscrollbar.id!=this._vscrollindicator_id)){this.vscrollbar.destroy();this.vscrollbar=null;}if(!this.vscrollbar){this.vscrollbar=new nexacro.ScrollIndicatorControl(this._vscrollindicator_id,0,0,scroll_size,this._getClientWidth(),null,null,null,null,null,null,this);}}else{if(this.vscrollbar&&(this.vscrollbar.id!=this._vscrollbar_id)){this.vscrollbar.destroy();this.vscrollbar=null;}if(!this.vscrollbar){this.vscrollbar=new nexacro.ScrollBarControl(this._vscrollbar_id,0,0,scroll_size,this._getClientWidth(),null,null,null,null,null,null,this);}}vscrollbar=this.vscrollbar;if(!nexacro._isNull(this.scrollbarbaroutsize)){vscrollbar.set_baroutsize(this.scrollbarbaroutsize);}if(!nexacro._isNull(this.scrollbarincbuttonsize)){vscrollbar.set_incbuttonsize(this.scrollbarincbuttonsize);}if(!nexacro._isNull(this.scrollbardecbuttonsize)){vscrollbar.set_decbuttonsize(this.scrollbardecbuttonsize);}if(!nexacro._isNull(this.scrollbarbarminsize)){vscrollbar.set_barminsize(this.scrollbarbarminsize);}if(!nexacro._isNull(this.scrollbartrackbarsize)){vscrollbar.set_trackbarsize(this.scrollbartrackbarsize);}if(!vscrollbar._is_created_contents){vscrollbar.set_direction("vertical");vscrollbar._setEventHandler("onscroll",this.on_notify_vscroll_onscroll,this);vscrollbar.createComponent(true);}vscrollbar.on_apply_cssclass();vscrollbar.move(0,0,scroll_size,this._getClientWidth(),null,null);};_pComponent._createHScrollBar=function(scroll_size){var hscrollbar;var hscrollbartype=this._getHScrollBarType();if(hscrollbartype=="autoindicator"||hscrollbartype=="indicator"){if(this.hscrollbar&&(this.hscrollbar.id!=this._hscrollindicator_id)){this.hscrollbar.destroy();this.hscrollbar=null;}if(!this.hscrollbar){this.hscrollbar=new nexacro.ScrollIndicatorControl(this._hscrollindicator_id,0,0,this._getClientHeight(),scroll_size,null,null,null,null,null,null,this);}}else{if(this.hscrollbar&&(this.hscrollbar.id!=this._hscrollbar_id)){this.hscrollbar.destroy();this.hscrollbar=null;}if(!this.hscrollbar){this.hscrollbar=new nexacro.ScrollBarControl(this._hscrollbar_id,0,0,this._getClientHeight(),scroll_size,null,null,null,null,null,null,this);}}hscrollbar=this.hscrollbar;if(!nexacro._isNull(this.scrollbarbaroutsize)){hscrollbar.set_baroutsize(this.scrollbarbaroutsize);}if(!nexacro._isNull(this.scrollbarincbuttonsize)){hscrollbar.set_incbuttonsize(this.scrollbarincbuttonsize);}if(!nexacro._isNull(this.scrollbardecbuttonsize)){hscrollbar.set_decbuttonsize(this.scrollbardecbuttonsize);}if(!nexacro._isNull(this.scrollbarbarminsize)){hscrollbar.set_barminsize(this.scrollbarbarminsize);}if(!nexacro._isNull(this.scrollbartrackbarsize)){hscrollbar.set_trackbarsize(this.scrollbartrackbarsize);}if(!hscrollbar._is_created_contents){hscrollbar.set_direction("horizontal");hscrollbar._setEventHandler("onscroll",this.on_notify_hscroll_onscroll,this);hscrollbar.createComponent(true);}hscrollbar.on_apply_cssclass();hscrollbar.move(0,0,this._getClientHeight(),scroll_size,null,null);};_pComponent._registerHotkey=function(){var hotkey=this._hotkey;if(!hotkey||hotkey._is_registered){return;}this._setAccessibilityHotKey(this.hotkey);var _form=this._getMainForm();if(this._is_frame||this==_form){var owner_frame=this.getOwnerFrame();if(owner_frame){nexacro._registerHotkeyComp(owner_frame,this,hotkey);}}else{if(_form){nexacro._registerHotkeyComp(_form,this,hotkey);}}};_pComponent._unregisterHotkey=function(){var hotkey=this._hotkey;if(!hotkey||!hotkey._is_registered){return;}var _form=this._getMainForm();if(this._is_frame||this==_form){var owner_frame=this.getOwnerFrame();if(owner_frame){nexacro._unregisterHotkeyComp(owner_frame,this,hotkey);}}else{if(_form){nexacro._unregisterHotkeyComp(_form,this,hotkey);}else{delete this._hotkey;this._hotkey=null;}}};_pComponent._processHotkey=function(keycode,altKey,ctrlKey,shiftKey){var _form=this._getMainForm();if(!this._is_frame&&this!=_form){if(_form){return _form._processHotkey(keycode,altKey,ctrlKey,shiftKey,this);}}};_pComponent._on_hotkey=function(){this.setFocus();};_pComponent._destroy=function(callremovechild){return this.destroy(callremovechild);};_pComponent._saveScrollPos=function(){};_pComponent._applyScrollPos=function(){};_pComponent._makeExprFn=function(expr){expr=expr.trim().split(":");var len=expr.length;var parser=new nexacro.ExprParser();var conv_expr,exprfn;var str;if(len==1){str=expr[0];}else{if(expr[0].trim().toUpperCase()!="EXPR"){str=expr.join(":");}else{str=expr.slice(1).join(":");}}conv_expr=parser.makeExpr(this,str);exprfn=nexacro._createInlineFunc(conv_expr,["comp"]);return exprfn;};_pComponent._closePopup=function(){var popup=this._popupcontrol;if(popup){popup._closePopup();}};_pComponent._on_beforerepeat=function(){return [true,false];};_pComponent.getElement=function(){return this._control_element;};_pComponent._getOwnerFrame=function(){var form=this;while(form&&!form._is_frame){form=form.parent;}return form;};_pComponent._getWindow=function(){var parent=this.parent;if(parent){return parent._getWindow();}var form=this._refform;if(form&&form!=this){return form._getWindow();}return nexacro._findWindow(nexacro._getMainWindowHandle());};_pComponent._getRootWindow=function(){var _window=this._getWindow();while(_window){if(_window.frame){return _window;}_window=_window.parent;}return this._getWindow();};_pComponent._getWindowHandle=function(){var _window=this._getWindow();if(_window){return _window.handle;}return null;};_pComponent._getForm=function(){return this._refform;};_pComponent._getRootForm=function(){var form=this._refform;while((form&&form._is_form==false)||(form&&form._is_form&&(form instanceof nexacro._InnerForm))){form=form.parent;}return form;};_pComponent._getMainForm=function(){var comp=this;while(comp){if(comp._is_frame){return comp.form;}if(!comp._is_form&&comp._refform){comp=comp._refform;}else if(comp.parent){comp=comp.parent;}else{if(comp._is_form){return comp;}return null;}}return null;};_pComponent._getLastFocused=function(){return this._last_focused;};_pComponent._getRefFormBaseUrl=function(){if(this._refform){return this._refform._getFormBaseUrl();}};_pComponent._getFormChildById=function(id){var form=this._getForm();if(form){return form[id];}return null;};_pComponent._getRootComponent=function(component){var comp=component;while(comp&&(comp._is_subcontrol||!comp._is_component||comp instanceof nexacro._InnerForm)){if(comp==comp.parent){return null;}comp=comp.parent;}return comp;};_pComponent._getPopupRootComponent=function(component){var comp=component;while(comp&&(comp._is_subcontrol||!comp._is_component||comp instanceof nexacro._InnerForm)&&!comp._popupcontrol){if(comp==comp.parent){return null;}comp=comp.parent;}return comp;};_pComponent._getEventInfoComponent=function(){return this;};_pComponent._getFocusAcceptableComponent=function(component){var comp=component;while(comp&&comp._is_subcontrol&&!comp._is_focus_accept){if(comp==comp.parent){return null;}comp=comp.parent;}return comp;};_pComponent._getReferenceContext=function(){return this._refform;};_pComponent._getCSSStyleValue=function(prop,status,userstatus){if(status===undefined){status=this._status;}if(userstatus===undefined){userstatus=this._userstatus;}var multistatus="";if(status!="enabled"&&status&&userstatus){multistatus=status+"_"+userstatus;}if(!this._cssselector){return;}var bRtl=this._isRtl();var rtlprop=(prop=="icon"?"rtlIcon":prop);var cssselector;if(multistatus&&this._cssselector[multistatus]){cssselector=this._cssselector[multistatus];if(cssselector&&cssselector[prop]){if(bRtl&&prop=="icon"&&cssselector[rtlprop]){return cssselector[rtlprop];}else{return cssselector[prop];}}}var value;var rtlvalue;var disabled_status=false;if(status==="disabled"&&this._cssselector[status]){disabled_status=true;value=this._cssselector[status][prop];rtlvalue=this._cssselector[status][rtlprop];if(value){if(bRtl&&rtlvalue){return rtlvalue;}else{return value;}}}if(userstatus&&this._cssselector[userstatus]){value=this._cssselector[userstatus][prop];rtlvalue=this._cssselector[userstatus][rtlprop];if(value){if(bRtl&&rtlvalue){return rtlvalue;}else{return value;}}}if(!disabled_status&&this._cssselector[status]){value=this._cssselector[status][prop];rtlvalue=this._cssselector[status][rtlprop];if(value){if(bRtl&&rtlvalue){return rtlvalue;}else{return value;}}}value=this._cssselector["enabled"][prop];rtlvalue=this._cssselector["enabled"][rtlprop];if(value&&bRtl&&rtlvalue){return rtlvalue;}else{return value;}};_pComponent._getCurrentStyleInheritValue=function(prop,status,userstatus){if(this[prop]){switch(prop){case "font":return this._getSettedFontObject();case "color":return this._getSettedColorObject();case "wordSpacing":return this._getSettedWordSpacingObject();case "letterSpacing":return this._getSettedLetterSpacingObject();default:return this["_"+prop];}}var value=this._getCSSStyleValue(prop,status,userstatus);if(!value&&(prop=="font"||prop=="color"||prop=="wordSpacing"||prop=="letterSpacing")){if(this.parent&&this.parent._is_component){value=this.parent._getCurrentStyleInheritValue(prop,status,userstatus);}else{if(prop=="font"){value=nexacro._getSystemFont();}}}return value;};_pComponent._getCSSSelector=function(){return this._cssselector;};_pComponent._getClassCSSSelector=function(){var cssclassselector=this.cssclass||this._cssclass_expr;if(cssclassselector){return cssclassselector.trim().split(",");}return "";};_pComponent._getElementClassCSSSelector=function(){var cssclassselector=this.cssclass||this._cssclass_expr;if(this._isPopupContains()){cssclassselector=this._getPopupContainerCSSSelector();}if(cssclassselector){return cssclassselector.trim().split(",");}return "";};_pComponent._getIDCSSSelector=function(){if(this._is_subcontrol){return this.on_getIDCSSSelector();}return "";};_pComponent._getPopupContainerCSSSelector=function(){var popupcontrol=this.parent._getPopupControl();if(popupcontrol){var i,len;var cssselector_str="";var popupcomp_type_name="popup"+popupcontrol.on_get_popupControlTypeName();var dummystr="dummy";var parentid="",subidselector="";var parent=this.parent;var dummycount=1;var userclassselectors,userclassdummy;var parentidselector;var userclassselector_str;while(parent){if(parent._is_subcontrol){cssselector_str+="popup"+parent.on_get_css_assumedtypename()+parentid+this.on_getIDCSSSelector()+",";}else{if(!userclassselectors){cssselector_str+=popupcomp_type_name+parentid+this.on_getIDCSSSelector()+",";}break;}subidselector=parentid+this.on_getIDCSSSelector();parentidselector=parent.on_getIDCSSSelector();parentid=parentidselector+parentid;if(userclassselectors||parent.cssclass){if(!userclassselectors){userclassselectors=[];userclassdummy=[];}if(userclassselectors.length==0){userclassselectors.push(parentidselector+subidselector);if(parent.cssclass){userclassselectors.push(parentidselector+parent.cssclass+subidselector);}userclassdummy.push(2);}else{var tempuserclassselectors=[];while(userclassselectors.length!=0){userclassselector_str=userclassselectors.pop();tempuserclassselectors.push(parentidselector+userclassselector_str);if(parent.cssclass){tempuserclassselectors.push(parentidselector+parent.cssclass+userclassselector_str);}}len=userclassdummy.length;for(i=0;i<len;i++ ){var classdummycnt=userclassdummy[i];userclassdummy[i]=classdummycnt+1;}if(parent.cssclass){userclassdummy.push(2);}userclassselectors=tempuserclassselectors;}}dummycount++ ;parent=parent.parent;}if(userclassselectors&&userclassselectors.length>0){while(userclassselectors.length>0){userclassselector_str=userclassselectors.pop();cssselector_str+=","+popupcomp_type_name+userclassselector_str;if(parent.cssclass){cssselector_str+=","+popupcomp_type_name+parent.cssclass+userclassselector_str;}}if(parent.cssclass){dummycount++ ;}len=userclassdummy.length;for(i=0;i<len;i++ ){dummycount+=userclassdummy[i];}}else if(parent.cssclass){cssselector_str+=popupcomp_type_name+parent.cssclass+parentid+this.on_getIDCSSSelector();dummycount++ ;}for(i=0;i<dummycount;i++ ){cssselector_str+=","+dummystr;}return cssselector_str;}};_pComponent._getScreenPosition=function(){var control_elem=this._control_element;if(control_elem){var elem_pos=nexacro._getElementScreenPosition(control_elem);var screenLeft=elem_pos.x;var screenTop=elem_pos.y;return {x:screenLeft,y:screenTop};}return {x:0,y:0};};_pComponent._getWindowPosition=function(){var control_elem=this._control_element;if(control_elem){var border=this._getCurrentStyleBorder();var elem_pos=nexacro._getElementXYInWindow(control_elem.handle);var windowLeft=elem_pos[0]-(border?border._getBorderLeftWidth():0);var windowTop=elem_pos[1]-(border?border._getBorderTopWidth():0);return {x:windowLeft,y:windowTop};}return {x:0,y:0};};_pComponent._getClientWidth=function(){var control_elem=this._control_element;if(control_elem){return control_elem.getClientWidth();}return 0;};_pComponent._getClientHeight=function(){var control_elem=this._control_element;if(control_elem){return control_elem.getClientHeight();}return 0;};_pComponent._getClientLeft=function(){var control_elem=this._control_element;if(control_elem){return control_elem.getClientLeft();}return 0;};_pComponent._getInnerWidth=function(){var control_elem=this._control_element;if(control_elem){var width=control_elem.inner_width;if(control_elem._apply_client_padding){var padding=control_elem.padding?control_elem.padding:control_elem._padding_info;if(padding){width-=padding.left+padding.right;}}return width;}return 0;};_pComponent._getInnerHeight=function(){var control_elem=this._control_element;if(control_elem){var height=control_elem.inner_height;if(control_elem._apply_client_padding){var padding=control_elem.padding?control_elem.padding:control_elem._padding_info;if(padding){height-=padding.top+padding.bottom;}}return height;}return 0;};_pComponent._getClientTop=function(){var control_elem=this._control_element;if(control_elem){return control_elem.getClientTop();}return 0;};_pComponent._getCumulativeZoomFactor=function(){var comp=this;var zoomfactor=100;while(comp&&!(comp instanceof nexacro.Frame)){if(comp._getZoom){var value=comp._getZoom();if(value!=100){zoomfactor*=(value/100.0);}}comp=comp.parent;}return zoomfactor;};_pComponent._getFixedOffsetValue=function(){var r,b,val;if(this.right!=null){r=0;}else if(this.width!=null){val=this.width;if(typeof (val)=="string"&&val.indexOf("%")>=0){if(parseFloat(val)<=100){r=0;}else{r=this.getOffsetRight();}}else{r=this.getOffsetRight();}}if(this.bottom!=null){b=0;}else if(this.height!=null){val=this.height;if(typeof (val)=="string"&&val.indexOf("%")>=0){if(parseFloat(val)<=100){b=0;}else{b=this.getOffsetBottom();}}else{b=this.getOffsetBottom();}}return {right:r,bottom:b};};_pComponent._getScrollEventType=function(oldpos,newpos,min,max,dir){var type;if(min==max){return type;}if(oldpos>newpos&&newpos>min){if(dir=="h"){type="left";}else{type="up";}}else if(oldpos<newpos&&newpos<max){if(dir=="h"){type="right";}else{type="down";}}else if(newpos==min){if(oldpos==newpos){type="firstover";}else{type="first";}}else if(newpos==max){if(oldpos==newpos){type="lastover";}else{type="last";}}return type;};_pComponent._getScrollBarSize=function(){var scrollbarsize=this.scrollbarsize;if(!nexacro._isNull(scrollbarsize)){return scrollbarsize;}var env=nexacro.getEnvironment();scrollbarsize=env.scrollbarsize;if(!nexacro._isNull(scrollbarsize)){return scrollbarsize;}return this._default_scrollbarsize;};_pComponent._getScrollIndicatorSize=function(){var scrollindicatorsize=this.scrollindicatorsize;if(!nexacro._isNull(scrollindicatorsize)){return scrollindicatorsize;}var env=nexacro.getEnvironment();scrollindicatorsize=env.scrollindicatorsize;if(!nexacro._isNull(scrollindicatorsize)){return scrollindicatorsize;}return this._default_scrollindicatorsize;};_pComponent._getHScrollBarSize=function(){var scrollbartype=this._getHScrollBarType();if(scrollbartype=="autoindicator"||scrollbartype=="indicator"){return this._getScrollIndicatorSize();}else{return this._getScrollBarSize();}};_pComponent._getVScrollBarSize=function(){var scrollbartype=this._getVScrollBarType();if(scrollbartype=="autoindicator"||scrollbartype=="indicator"){return this._getScrollIndicatorSize();}else{return this._getScrollBarSize();}};_pComponent._getHScrollBarType=function(){var hscrollbartype=this._hscrollbartype;if(hscrollbartype!=""&&!nexacro._isNull(hscrollbartype)){return hscrollbartype;}var scrollbartype=this.scrollbartype;var env=nexacro.getEnvironment();function _splitScrollBarType(str){var ret=new Array(2);var h,v;if(scrollbartype){var arr=nexacro._toString(scrollbartype).toLowerCase().split(" ");for(var i=0;i<arr.length;i++ ){switch(arr[i]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(i==0){h=arr[i];}else if(i==1){v=arr[i];}break;default:break;}}if(!v){v=h;}ret[0]=h;ret[1]=v;}return ret;}var types=_splitScrollBarType(scrollbartype);hscrollbartype=types[0];if(!hscrollbartype||hscrollbartype=="default"){if(env){scrollbartype=env.scrollbartype;}if(scrollbartype==""||nexacro._isNull(scrollbartype)){scrollbartype=this._default_scrollbartype;}types=_splitScrollBarType(scrollbartype);hscrollbartype=types[0];}return hscrollbartype;};_pComponent._getVScrollBarType=function(){var vscrollbartype=this._vscrollbartype;if(vscrollbartype!=""&&!nexacro._isNull(vscrollbartype)){return vscrollbartype;}var scrollbartype=this.scrollbartype;var env=nexacro.getEnvironment();function _splitScrollBarType(str){var ret=new Array(2);var h,v;if(scrollbartype){var arr=nexacro._toString(scrollbartype).toLowerCase().split(" ");for(var i=0;i<arr.length;i++ ){switch(arr[i]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(i==0){h=arr[i];}else if(i==1){v=arr[i];}break;default:break;}}if(!v){v=h;}ret[0]=h;ret[1]=v;}return ret;}var types=_splitScrollBarType(scrollbartype);vscrollbartype=types[1];if(!vscrollbartype||vscrollbartype=="default"){if(env){scrollbartype=env.scrollbartype;}if(scrollbartype==""||nexacro._isNull(scrollbartype)){scrollbartype=this._default_scrollbartype;}types=_splitScrollBarType(scrollbartype);vscrollbartype=types[1];}return vscrollbartype;};_pComponent._getScrollable=function(){if(!this._is_scrollable||!this._isEnable()){return false;}if(this.scrolltype!="none"){return true;}return false;};_pComponent._getScrollWidth=function(){var control_elem=this._control_element;if(control_elem){if(this._is_scrollable){return this._getClientWidth();}return control_elem.getElementScrollWidth();}return 0;};_pComponent._getScrollHeight=function(){var control_elem=this._control_element;if(control_elem){if(this._is_scrollable){return this._getClientHeight();}return control_elem.getElementScrollHeight();}return 0;};_pComponent._getScrollLeft=function(){if(!this._is_scrollable){return 0;}var control_elem=this._control_element;if(control_elem){return control_elem.getElementScrollLeft();}return 0;};_pComponent._getScrollTop=function(){if(!this._is_scrollable){return 0;}var control_elem=this._control_element;if(control_elem){return control_elem.getElementScrollTop();}return 0;};_pComponent._getDragData=function(){if(this.text){return this.text;}return null;};_pComponent._getParentEnable=function(){return this.parent._real_enable;};_pComponent._getPopupControl=function(){return this._popupcontrol;};_pComponent._is_popup=function(){return false;};_pComponent._getLocale=function(){if(!this._is_locale_control){return;}var locale=nexacro._locale?nexacro._locale:nexacro._getLocale();var pThis=this;while(pThis){if(pThis._locale){locale=pThis._locale;break;}pThis=pThis.parent;}return locale;};_pComponent._isRtl=function(comp){if(!comp){comp=this;}while(comp){if(comp._rtl!==undefined){return comp._rtl;}comp=comp.parent;}return nexacro._rtl;};_pComponent._getCurrentStylePadding=function(){var control_elem=this._control_element;if(control_elem){return control_elem.padding?control_elem.padding:control_elem._padding_info;}return undefined;};_pComponent._getCurrentStyleBorder=function(){var control_elem=this._control_element;if(control_elem){var border=control_elem.border?control_elem.border:control_elem._border_info;if(control_elem.borderLeftNone||control_elem.borderRightNone||control_elem.borderTopNone||control_elem.borderBottomNone){if(border){var values=[border.top.value,border.right.value,border.bottom.value,border.left.value];if(control_elem.borderLeftNone){values[3]="0px solid transparent";}if(control_elem.borderRightNone){values[1]="0px solid transparent";}if(control_elem.borderTopNone){values[0]="0px solid transparent";}if(control_elem.borderBottomNone){values[2]="0px solid transparent";}values=values.join(",");return nexacro.BorderObject(values);}}return border;}return undefined;};_pComponent._getCurrentStyleEdge=function(){var control_elem=this._control_element;if(control_elem){return control_elem.edge?control_elem.edge:control_elem._edge_info;}return undefined;};_pComponent._getSettedColorObject=function(){return this._color;};_pComponent._getSettedFontObject=function(){return this._font;};_pComponent._getSettedWordSpacingObject=function(){return this._wordspacing;};_pComponent._getSettedLetterSpacingObject=function(){return this._letterspacing;};_pComponent._getSettedTextDecorationObject=function(){return this._textdecoration;};_pComponent._getSettedBorderRadiustObject=function(){return this._borderradius;};_pComponent._getSettedBorderObject=function(){return this._border;};_pComponent._getSettedBackgroundObject=function(){return this._background;};_pComponent._getSettedEdgeObject=function(){return this._edge;};_pComponent._getSettedCursorObject=function(){return this._cursor;};_pComponent._getSettedOpacityObject=function(){return this._opacity;};_pComponent._getSettedBoxShadowObject=function(){return this._boxshadow;};_pComponent._isVisible=function(){var form=this;while(form!=null){if(form.visible==false){return false;}if(form._is_window){break;}form=form.parent;}return true;};_pComponent._isEnable=function(){var form=this;while(form!=null){if(form._is_frame&&form._is_popup_frame){break;}if(form._real_enable==false||form.enable==false){return false;}form=form.parent;}return true;};_pComponent._isEnableRedraw=function(){var comp=this._getFromComponent(this);if(!comp){return true;}return comp.enableredraw;};_pComponent._isEditableComponent=function(edittype){if(this.readonly!==undefined){if(edittype&&edittype.match(this._type_name)){if(this._type_name=="Edit"){var obj=edittype.split(",");for(var i=0;i<obj.length;i++ ){if(obj[i].trim()==this._type_name){return true;}}}else{return true;}}else if(edittype===undefined||edittype==""||edittype=="All"){return true;}else{return false;}}return false;};_pComponent._isFocusAcceptable=function(){return this._is_focus_accept;};_pComponent._isPopupVisible=function(){return false;};_pComponent._isPopupContains=function(){return this._is_popupcontains?this._is_popupcontains:false;};_pComponent._isWheelScrollable=function(delta){var control_elem=this._control_element;if(!control_elem){return false;}var st=control_elem.scroll_top;var sh=control_elem.container_maxheight;var ch=this._getClientHeight();if((st+ch>=sh&&delta<0)||(st==0&&delta>0)){return false;}return true;};_pComponent._findForm=function(comp){var form=comp;while(form&&form._is_form==false){form=form.parent;}return form;};_pComponent._findDataset=function(id){if(id&&id.length>0){var ds=this[id];if(ds&&(ds._type_name=="Dataset")){return ds;}if(this._refform){ds=this._refform.lookup(id);if(ds&&(ds._type_name=="Dataset")){return ds;}}}return undefined;};_pComponent._find_lastFocused=function(){var form=this._getMainForm();if(!form){return null;}var last_focus=form._last_focused;while(last_focus&&last_focus._hasContainer()){var child_last_focus=last_focus._getLastFocused();if(!child_last_focus){break;}last_focus=child_last_focus;}return last_focus;};_pComponent._hasContainer=function(){if(this._is_form||this._is_container||this._is_containerset){return true;}return false;};_pComponent._contains=function(oDescendant){while(oDescendant&&!oDescendant._window){if(oDescendant==this){return true;}oDescendant=oDescendant.parent;}return false;};_pComponent._setControl=function(typename){this._is_subcontrol=true;if(typename){this._type_name=typename;}else{this._type_name=this.on_get_css_assumedtypename()+"Control";}};_pComponent._setFocus=function(bResetScroll,calledby,block_inner_focus){var win=this._getRootWindow();var is_active_layer=win._isActiveLayerComponent(this);if(!is_active_layer){return;}if(calledby> -1||calledby<4){this._focus_direction=calledby;}else{this._focus_direction= -1;}if(block_inner_focus==true){this._block_inner_focus=true;if(nexacro._enableaccessibility){var bInnerFocus=(this._is_container||this instanceof nexacro.Tab)&&this._focus_direction==3?false:true;this.setFocus(bResetScroll,bInnerFocus);}else{this.setFocus(bResetScroll);}this._block_inner_focus=false;}else{return this.setFocus(bResetScroll);}};_pComponent._setHscrollPos=function(v){this._hscroll_pos=nexacro._toInt(v);};_pComponent._setVscrollPos=function(v){this._vscroll_pos=nexacro._toInt(v);};_pComponent._setEnable=function(v){if(this._is_enable_changing){return false;}var enable_flag=(v&&this.enable);if(this._real_enable!=enable_flag){this._real_enable=enable_flag;this._is_enable_changing=true;this._changeStatus("disabled",!enable_flag);this._is_enable_changing=false;this.on_apply_prop_enable(this._real_enable);return true;}return false;};_pComponent._setLocale=function(v){if(!this.locale&&v!=this._locale){this._locale=v;this.on_apply_locale(v);}};_pComponent._setPopupContains=function(is_popupcontains){this._is_popupcontains=is_popupcontains;};_pComponent._setControlTypeName=function(typename){this._type_name=typename;};_pComponent._setEventInfoControl=function(bevtinfo){this._is_eventinfo_control=bevtinfo;};_pComponent._setInheritStyleValues=function(parent_comp){if(this._control_element){if(parent_comp){this._control_element.setElementFont(parent_comp._getCurrentStyleInheritValue("font"));this._control_element.setElementColor(parent_comp._getCurrentStyleInheritValue("color"));this._control_element.setElementWordSpacing(parent_comp._getCurrentStyleInheritValue("wordSpacing"));this._control_element.setElementLetterSpacing(parent_comp._getCurrentStyleInheritValue("letterSpacing"));}}};_pComponent._checkContainerTabFocus=function(){if(this._hasContainer()&&!(this instanceof nexacro._InnerForm)){return true;}return false;};_pComponent._checkContainerHeadingFocus=function(){if(this._hasContainer()&&nexacro._enableaccessibility&&this._isAccessibilityEnable()==true&&this._isAccessibilityRoleHeading()){return true;}return false;};_pComponent.on_apply_prop_id=function(){if(this._is_subcontrol){var idselector=this.on_getIDCSSSelector();var control_elem=this._control_element;if(control_elem){control_elem.setElementIDCSSSelector(idselector);}}};_pComponent._isInvalidValue=function(v){return false;};_pComponent._getParentForm=function(){var p=this.parent;if(!p){return null;}while(p){if(p._is_form&&!p._is_frame){return p;}p=p.parent;}return null;};_pComponent._convertValueType=function(v,type,fn){var datatyperule=nexacro._getDatatypeRule();if(datatyperule=="1.0"){return v;}if(nexacro._isNull(v)){return v;}if(fn&&(typeof fn)=="function"){return fn(v);}var ret;switch(type){case 1:ret=parseInt(v);break;case 2:ret=parseFloat(v);break;default:ret=nexacro._toString(v);break;}return ret;};nexacro.PopupControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pPopupControl=nexacro.PopupControl.prototype=nexacro._createPrototype(nexacro.Component,nexacro.PopupControl);_pPopupControl._type_name="PopupControl";_pPopupControl.visible=false;_pPopupControl._is_window=true;_pPopupControl._attached_comp=null;_pPopupControl._is_subcontrol=true;_pPopupControl._call_comp=null;_pPopupControl._is_popup_control=true;_pPopupControl._is_selfclose=true;_pPopupControl._default_zindex=nexacro._zindex_popup;_pPopupControl._track_capture=true;_pPopupControl._is_simple_control=true;_pPopupControl.on_create_control_element=function(parent_elem){var control_elem=this.on_create_popup_control_element(parent_elem);if(control_elem&&this._default_zindex>0){control_elem.setElementZIndex(this._default_zindex);}return control_elem;};_pPopupControl.on_created=function(_window){if(!this._is_created){nexacro.Component.prototype.on_created.call(this,_window);}var control_elem=this._control_element;if(!this.visible&&control_elem){control_elem.setElementPosition(0,0);control_elem.setElementSize(1,1);}};_pPopupControl.on_created_contents=function(win){var control_elem=this._control_element;if(!this.visible&&control_elem){control_elem.setElementPosition(0,0);control_elem.setElementSize(1,1);this._setInheritStyleValues(this);}};_pPopupControl.destroyComponent=function(){this._is_alive=false;if(this.visible){nexacro._removePopupComponent(this);this.visible=false;}if(nexacro._enableaccessibility){var application=nexacro.getApplication();if(application&&application._accessibilityHistoryList&&!this._is_subcontrol){application._remove_accessibility_history(this);}}var _window=this._getWindow();if(_window&&this._track_capture){_window._releaseCaptureLock(this);_window._releaseCaptureLock(this._attached_comp);this._track_capture=false;}if(this._attached_comp){this._detach(this._attached_comp);}this._call_comp=null;if(this.parent&&this.parent.removeChild){this.parent.removeChild(this.id);}else if(_window){_window._removeFromCurrentFocusPath(this);}if(this._control_element){this._control_element.destroy();this._control_element=null;}this._clearEventListeners();this.on_destroy_contents();this._is_created=false;if(this.parent){this.parent=null;}return true;};_pPopupControl.on_change_containerRect=function(container_width,container_height){var comp=this._attached_comp;if(comp&&comp!=this){if(!this._is_created||this.visible){comp.move(0,0,container_width,container_height);}}};_pPopupControl._contains=function(oDescendant){while(oDescendant){if(oDescendant==this._attached_comp){return true;}oDescendant=oDescendant.parent;}return false;};_pPopupControl.set_visible=function(v){if(this.visible!=v){if(v===undefined||v===null){return;}this.visible=v;var control_elem=this._control_element;if(control_elem){if(this.visible){var comp=this._attached_comp;if(comp&&comp!=this){comp.move(this._adjust_left,this._adjust_top,this._getClientWidth(),this._getClientHeight());}}v=nexacro._toBoolean(v);control_elem.setElementVisible(v);if(nexacro._enableaccessibility){this._setAccessibilityStatHidden(!v);}if(this.visible){if(!this._is_subcontrol){if(this.parent._last_focused){this._call_comp=this.parent._last_focused;}else{this._call_comp=this.parent;}}}else{control_elem.setElementPosition( -5000,0);}if(nexacro._enableaccessibility&&this._attached_comp){this._attached_comp._setAccessibilityStatExpanded(v);this._attached_comp._setAccessibilityStatHidden(!v);}if(this._is_selfclose){if(!v){var _attached_comp=this._attached_comp;if(_attached_comp&&_attached_comp.on_fire_oncloseup){_attached_comp.on_fire_oncloseup(_attached_comp);}nexacro._removePopupComponent(this);var _window=this._getWindow();_window._removeFromCurrentFocusPath(this,false);if(!this._is_subcontrol){this._call_comp._on_focus(true);}}else{nexacro._appendPopupComponent(this);var next_zindex=nexacro._zindex_popup+nexacro._current_popups.length-1;control_elem.setElementZIndex(next_zindex);}}}}};_pPopupControl._attach=function(comp){this._attached_comp=comp;if(!comp._isPopupContains()){comp._setPopupContains(true);}var contrl_element=this._control_element;if(comp&&comp!=this&&comp._control_element&&contrl_element){var sub_control_element=comp._control_element;if(sub_control_element){var sub_parent=sub_control_element.parent_elem;if(comp._is_created&&sub_parent!=contrl_element){sub_control_element._removeFromContainer();}sub_control_element.parent_elem=contrl_element;}if(comp._is_created){sub_control_element._appendToContainer(contrl_element);}}};_pPopupControl._detach=function(comp){if(this._attached_comp==comp&&comp!=this){this._attached_comp=null;comp._setPopupContains(false);var contrl_element=this._control_element;var sub_control_element=comp._control_element;if(sub_control_element&&contrl_element){if(comp._is_created){sub_control_element._removeFromContainer();}sub_control_element.parent_elem=null;}}};_pPopupControl._is_popup=function(comp){return this.visible;};_pPopupControl._popup=function(left,top,width,height){if(!this._attached_comp){return;}var _window=this._getWindow();if(_window&&this._track_capture){var capture_comp=_window._getCaptureComp(true,false,this._attached_comp);if(capture_comp!=this._attached_comp){_window._setCaptureLock(this._attached_comp,true,false);}}var control_elem=this._control_element;_window=this._getWindow();if(_window&&(_window._wheelZoom!=undefined)){control_elem.setElementZoom(_window._wheelZoom);}if(control_elem){control_elem.setElementPosition(left,top);control_elem.setElementSize(width,height);}this.set_visible(true);};_pPopupControl._popupBy=function(from_comp,left,top,width,height,center){if(!this._attached_comp||!from_comp){return;}var p;var _window=this._getWindow();if(_window){nexacro._flushCommand(_window);if(this._track_capture){var capture_comp=_window._getCaptureComp(true,false,this._attached_comp);if(capture_comp!=this._attached_comp){_window._setCaptureLock(this._attached_comp,true,false);}}}if(center){p=nexacro._getElementPositionInFrame(from_comp.getElement());left+=p.x;top+=p.y;}else{p=nexacro._getPopupElementPositionInFrame(from_comp.getElement(),left,top,width,height);left=p.x;top=p.y;}var control_elem=this._control_element;if(_window&&(_window._wheelZoom!=undefined)){control_elem.setElementZoom(_window._wheelZoom);}if(control_elem){control_elem.setElementPosition(left,top);control_elem.setElementSize(width,height);}this.set_visible(true);};_pPopupControl._closePopup=function(){var _window=this._getWindow();if(_window&&this._track_capture){_window._releaseCaptureLock(this._attached_comp);}this.set_visible(false);};_pPopupControl._findOwnerElementHandle=function(){var frame;var ret={};ret.owner_handle=null;ret.is_append=true;ret.ref_handle=null;var win=this._getWindow();if(win){var layer_info;if(this instanceof nexacro._WaitControl){layer_info={};layer_info.popup_zindex=nexacro._zindex_waitcursor;}else{layer_info=win._getComponentLayerInfo(this);}if(layer_info.is_modal){frame=layer_info.frame;var overlay_elem=frame._modal_overlay_elem;ret.owner_handle=overlay_elem.handle;ret.is_append=true;}else{if(layer_info.ref_first_modal_frame){frame=layer_info.ref_first_modal_frame;if(win.dest_handle&&win.dest_handle._linked_element){ret.owner_handle=win.dest_handle._linked_element.dest_handle;}else{ret.owner_handle=win.dest_handle;}ret.is_append=false;ret.ref_handle=frame._modal_overlay_elem.handle;}else{ret.owner_handle=win.dest_handle;if(win.dest_handle._linked_element){ret.ref_handle=win.dest_handle._linked_element.dest_handle;}ret._is_append=true;}}}return ret;};nexacro._WaitControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.PopupControl.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.visible=false;this._context_list=[];this._is_subcontrol=false;this._is_simple_control=true;this._img_elem=null;this._image_width=0;this._image_height=0;};var __pWaitControl=nexacro._WaitControl.prototype=nexacro._createPrototype(nexacro.PopupControl,nexacro._WaitControl);__pWaitControl._type_name="WaitControl";__pWaitControl._is_popup_control=true;__pWaitControl._is_selfclose=false;__pWaitControl._default_zindex=nexacro._zindex_waitcursor;__pWaitControl._is_focus_accept=false;__pWaitControl.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){this._img_elem=new nexacro.ImageElement(control_elem);}};__pWaitControl.on_created_contents=function(_window){var control_elem=this.getElement();if(control_elem){var img_elem=this._img_elem;if(img_elem){img_elem.setElementVisible(true);img_elem.create(_window);}}this.on_apply_accessibility();this._setAccessibilityStatHidden(true);};__pWaitControl.on_change_containerRect=function(container_width,container_height){var img_elem=this._img_elem;if(img_elem){var left=Math.round((container_width-this._image_width)/2);var top=Math.round((container_height-this._image_height)/2);img_elem.setElementPosition(left,top);img_elem.setElementSize(this._image_width,this._image_height);}};__pWaitControl._getAccessibilityLabel=function(){return "Wait Cursor";};__pWaitControl._on_loadimage=function(imgurl,w,h){if(!this._is_alive){return;}var img_elem=this._img_elem;if(img_elem&&w>0&&h>0){this._image_width=w;this._image_height=h;var bw=this._adjust_width;var bh=this._adjust_height;var left=Math.round((bw-w)/2);var top=Math.round((bh-h)/2);img_elem.setElementPosition(left,top);img_elem.setElementSize(w,h);img_elem.setElementImage(nexacro.UrlObject(imgurl));}};__pWaitControl.setImage=function(imageurl){var img_elem=this._img_elem;if(img_elem){var imagesize=nexacro._getImageSize(imageurl,this._on_loadimage,this);if(imagesize){this._image_width=imagesize.width;this._image_height=imagesize.height;var bw=this._adjust_width;var bh=this._adjust_height;var left=Math.round((bw-imagesize.width)/2);var top=Math.round((bh-imagesize.height)/2);img_elem.setElementPosition(left,top);img_elem.setElementSize(imagesize.width,imagesize.height);img_elem.setElementImage(nexacro.UrlObject(imageurl));}}};__pWaitControl.show=function(){if(!this._is_created||!this.parent){return;}var _window=this._getWindow();if(_window){var width,height;if(_window.frame){var frame=_window.frame;width=frame.getOffsetWidth();height=frame.getOffsetHeight();}else{width=_window.getClientWidth();height=_window.getClientHeight();}_window._setCaptureLock(this,true,true);this.move(0,0,width,height);var control_elem=this._control_element;if(control_elem){control_elem.setElementPosition(0,0);control_elem.setElementSize(width,height);}this.set_visible(true);}};__pWaitControl.hide=function(){var _window=this._getWindow();if(_window){_window._updateWrapper(false);_window._releaseCaptureLock(this);var control_elem=this._control_element;if(control_elem){control_elem.setElementSize(1,1);}}if(this._is_created&&this._is_alive){var form=this.parent;while(form){if(form._is_form){break;}form=form._last_focused;}this.set_visible(false);if(form){var last_focus=form._last_focused;if(last_focus){if(form._obj_mousemove&&(form._obj_mousemove!=last_focus)){last_focus._on_afterHideWaitComp("enabled");}else{last_focus._on_afterHideWaitComp(last_focus._pseudo);}}}}};__pWaitControl._addContext=function(context){if(context){this._context_list.push(context);}};__pWaitControl._removeContext=function(context){if(!context){return;}var idx=nexacro._indexOf(this._context_list,context);if(idx>=0){this._context_list[idx]=null;delete this._context_list[idx];this._context_list.splice(idx,1);}};__pWaitControl.on_fire_onlbuttondown=function(){return true;};__pWaitControl._on_keydown=function(elem,keycode){if(keycode==nexacro.Event.KEY_TAB){elem._event_stop=true;}else if(keycode==nexacro.Event.KEY_ESC){var context_list=this._context_list;var len=context_list.length;for(var i=0;i<len;i++ ){var context=context_list[i];if(context&&(context._is_form||context._is_application)){context._stopTransaction();}}}return true;};nexacro.CanvasComponent=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.id=this.name=id||null;this.enableevent=false;this._apply_client_padding=false;this._canvas=null;this._drawn=false;this._control_element=null;this._inner_elem=null;};var _pCanvasComponent=nexacro._createPrototype(nexacro.Component,nexacro.CanvasComponent);nexacro.CanvasComponent.prototype=_pCanvasComponent;_pCanvasComponent._type_name="CanvasComp";_pCanvasComponent.on_create_contents=function(){var control=this.getElement();var tcanvas=new nexacro.CanvasElement(control);tcanvas.setElementPosition(0,0);tcanvas.setElementSize(this._getClientWidth(),this._getClientHeight());this._canvas=tcanvas;};_pCanvasComponent.on_created_contents=function(_window){var pCanvas=this._canvas;if(pCanvas){pCanvas.create(_window);}this.ondraw(pCanvas);};_pCanvasComponent._initInner=function(){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);};_pCanvasComponent.on_destroy_contents=function(){if(this._canvas){this._canvas.destroy();this._canvas=null;}};_pCanvasComponent.on_change_containerRect=function(width,height){if(this._canvas){this._canvas._moveCanvas(0,0,width,height);this._drawn=false;this.ondraw(this._canvas);}};_pCanvasComponent.ondraw=function(){};_pCanvasComponent.redraw=function(){this.ondraw(this._canvas);};}if(_process){delete _process;delete __pPosition9xObj;delete __pPosition29xObj;delete _pComponent;delete _pPopupControl;delete __pWaitControl;delete _pCanvasComponent;}
if(nexacro.Component){var _pComponent=nexacro.Component.prototype;_pComponent._setfocusing_comp=null;_pComponent._focus_refer_comp=null;_pComponent._is_killfocusing=false;_pComponent._resetScrollPos=function(target_comp,left,top,right,bottom,focus_direction){if(this._is_frame){return;}if(!this._is_popup_control&&this.parent&&this.parent!=this){this.parent._resetScrollPos(this,left,top,right,bottom,focus_direction);}};_pComponent._getSameParent=function(paths){if(!paths){return;}var p=this.parent;var idx=0;var self_parent_paths=[];while(p){idx=nexacro._indexOf(paths,p);self_parent_paths.push(p);if(idx> -1||p._is_window||(p._is_frame&&(p._window_type==1||p._window_type==4))){return [self_parent_paths,idx];}p=p.parent;}};_pComponent._getTabOrderFirst=function(){return null;};_pComponent._getFromComponent=function(from_comp){var comp=from_comp;if(comp._is_subcontrol){comp=this._getRootComponent(comp);}return comp;};_pComponent._getRecalcCanvasXY=function(elem,canvasX,canvasY){canvasX+=this._adjust_left-this._scroll_left||0;canvasY+=this._adjust_top-this._scroll_top||0;var window=this._getWindow();var comp=window.findComponent(elem);if(comp!=this){var padding=this._getCurrentStylePadding();if(padding){canvasX+=padding.left;canvasY+=padding.top;}}return [canvasX,canvasY];};_pComponent._getClientXY=function(canvasX,canvasY){var border_left=0,border_top=0;var border=this._getCurrentStyleBorder();if(border){border_top=border._getBorderTopWidth();border_left=border._getBorderLeftWidth();}var clientX=canvasX-border_left;var clientY=canvasY-border_top;return [clientX,clientY];};_pComponent._setLastFocus=function(comp){if(comp&&!comp._is_popup_control){if(this==comp){this._last_focused=null;return;}var p=this;while(p&&(p._is_form||p instanceof nexacro.Div||p instanceof nexacro.Tab||p instanceof nexacro.Tabpage)){p._last_focused=comp;comp=p;p=p.parent;}}};_pComponent._setCurFocusPathsByCurPos=function(cur,root_window){var _win=root_window?root_window:this._getRootWindow();var parent_path=[];var p=cur.parent;_win.clearCurrentFocusPaths();if(_win.frame==cur){return;}while(p){parent_path.push(p);if(p==_win.frame||(p._is_frame&&(p._window_type==1||p._window_type==4))){break;}p=p.parent;}for(var i=parent_path.length;i>0;i-- ){_win.addCurrentFocusPaths(parent_path[i-1]);}};_pComponent._setVScrollDefaultAction=function(wheelDelta){var control_elem=this.getElement();if(!control_elem){return false;}if(!this._is_scrollable){return false;}if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}var old_value=this._vscroll_pos;var value=old_value-wheelDelta;var vscroll_limit=control_elem.vscroll_limit;if(value>vscroll_limit){value=vscroll_limit;}this._scrollTo(this._hscroll_pos,value,true,true,undefined,"mousewheel_v");var new_value=this._vscroll_pos;if(old_value!=new_value){return true;}return false;};_pComponent._setHScrollDefaultAction=function(wheelDelta){var control_elem=this.getElement();if(!control_elem){return false;}if(!this._is_scrollable){return false;}if(this.scrolltype=="none"||this.scrolltype=="vertical"){return false;}var old_value=this._hscroll_pos;var value=old_value-wheelDelta;var hscroll_limit=control_elem.hscroll_limit;if(value>hscroll_limit){value=hscroll_limit;}this._scrollTo(value,this._vscroll_pos,true,true,undefined,"mousewheel_h");var new_value=this._hscroll_pos;if(old_value!=new_value){return true;}return false;};_pComponent._isParentdefaultprevented=function(comp,event_name){var p_comp=comp.parent;while(p_comp){if(!p_comp._getFromComponent){return false;}var root_comp=p_comp._getFromComponent(p_comp);var listener=root_comp["on"+event_name];if(!listener||!listener.defaultprevented){p_comp=p_comp.parent;if(root_comp instanceof nexacro.MainFrame){return false;}}else{return true;}}return false;};_pComponent._isSelected=function(){return this._use_selected_status&&this._userstatusmap&&this._userstatusmap.selected;};_pComponent._isPushed=function(){return this._use_pushed_status&&this._userstatusmap&&this._userstatusmap.pushed;};_pComponent._on_focus=function(self_flag,evt_name,lose_focus,refer_lose_focus,new_focus,refer_new_focus){if(!this._is_alive||!this.visible){return;}var is_accessibility_mode=false;if(nexacro._enableaccessibility&&this._on_accessibility_focus){is_accessibility_mode=true;}if(!this._isEnable()){if(is_accessibility_mode){if(evt_name!="downkey"&&evt_name!="upkey"){return;}}else{return;}}var _win=this._getRootWindow();var i,j,n,len,_c;var focus_path_before,focus_path_after;var is_focus_changed=false;var focus_paths;if(self_flag){var pThis=this;while(pThis&&pThis._is_nc_control){pThis=pThis.parent;}var cur_focus_paths=_win.getCurrentFocusPaths();if(!pThis||!pThis._isFocusAcceptable()){len=cur_focus_paths?cur_focus_paths.length:0;if(len>0){_c=cur_focus_paths[len-1];if(_c._has_inputElement&&_c._input_element){_c._input_element._force_focus=true;}}return;}var focus_info=null;var focuspath_index= -1;if(cur_focus_paths&&cur_focus_paths.length){cur_focus_paths=cur_focus_paths.slice(0);focuspath_index=nexacro._indexOf(cur_focus_paths,pThis);if(focuspath_index> -1){if(focuspath_index==cur_focus_paths.length-1){if(is_accessibility_mode){if(this._getTabOrderFirst()==null&&nexacro._accessibilitytype!=5){return;}}else{if(this._getTabOrderFirst()==null){return;}}}else{if(!(this instanceof nexacro.PopupDiv)){len=cur_focus_paths?cur_focus_paths.length:0;if(len>0){_c=cur_focus_paths[len-1];if(_c._has_inputElement&&_c._input_element){_c._input_element._force_focus=true;}}return;}}}focus_info=pThis._getSameParent(cur_focus_paths);}if(focus_info){new_focus=this._getRootComponent(pThis);var old_refer_focus=cur_focus_paths[cur_focus_paths.length-1];var old_focus=this._getRootComponent(old_refer_focus);var focus_arrs=focus_info[0];if(focus_arrs){var focus_path,prev_focus_path;var focus_arrs_len=focus_arrs.length;for(i=0;i<focus_arrs_len;i++ ){focus_path=focus_arrs[i];if(focus_path&&!focus_path._isFocusAcceptable()){return;}}if(focus_arrs_len>1){for(i=0;i<focus_arrs_len;i++ ){focus_path=focus_arrs[i];if(focus_path&&(focus_path.components||focus_path._is_container||focus_path._is_containerset)){focus_path._last_focused=(prev_focus_path?prev_focus_path:pThis);}prev_focus_path=focus_path;}}else{if(pThis.parent&&(pThis.parent.components||pThis.parent._is_container||pThis.parent._is_containerset)){pThis.parent._setLastFocus(pThis);}}}var kill_focus_arrs=cur_focus_paths.slice(focus_info[1]+1).reverse();if(kill_focus_arrs&&kill_focus_arrs.length>0){for(i=0,n=kill_focus_arrs.length;i<n;i++ ){lose_focus=kill_focus_arrs[i];if(lose_focus&&lose_focus._is_alive&&!lose_focus._is_killfocusing){lose_focus._is_killfocusing=true;_win._removeFromCurrentFocusPath(lose_focus,false,new_focus,this);if(lose_focus.enableevent){if(new_focus._is_popup_control){lose_focus._changeStatus("mouseover",false);}_win._setfocusing_comp=new_focus;focus_path_before=_win.getCurrentFocusPaths().slice(0);lose_focus.on_fire_onkillfocus(new_focus,this);focus_path_after=_win.getCurrentFocusPaths();is_focus_changed=(focus_path_before.length!=focus_path_after.length);if(!is_focus_changed){for(j=0;j<focus_path_before.length;j++ ){if(focus_path_before[j]!=focus_path_after[j]||(cur_focus_paths.length==focus_path_before.length&&cur_focus_paths[j]==focus_path_before[j])||(cur_focus_paths.length!=focus_path_before.length&&cur_focus_paths[j]!=focus_path_before[j])){is_focus_changed=true;break;}}}if(is_focus_changed){lose_focus._is_killfocusing=false;return;}}lose_focus._is_killfocusing=false;}}}if(focus_arrs&&(focus_arrs.length>1)){var focus_start=focus_arrs[focus_arrs.length-2];pThis._setCurFocusPathsByCurPos(focus_start,_win);focus_start._on_focus(false,evt_name,old_focus,old_refer_focus,new_focus,this);}else{pThis._setCurFocusPathsByCurPos(pThis,_win);pThis._on_focus(false,evt_name,old_focus,old_refer_focus,new_focus,this);}}else{pThis._setCurFocusPathsByCurPos(pThis,_win);pThis._on_focus(false,evt_name,lose_focus,refer_lose_focus);}}else{var c=this._getLastFocused();if(is_accessibility_mode){if(!c||(!c.visible||(!c.enable&&!c.accessibilityenable))){c=this._getTabOrderFirst(nexacro._enableaccessibility?15:4);}}else{if(!c||(!c.visible||!c.enable)){c=this._getTabOrderFirst();}}if(c&&c.visible&&!this._block_inner_focus){focus_paths=_win.getCurrentFocusPaths();if(focus_paths){focus_path_before=focus_paths.slice(0);}if(_win._is_active_window!==false||this._is_frame){this._changeStatus("focused",true);}this.on_fire_onsetfocus(lose_focus,refer_lose_focus);if(focus_paths){focus_path_after=_win.getCurrentFocusPaths();is_focus_changed=(focus_path_before.length!=focus_path_after.length);if(!is_focus_changed){for(j=0;j<focus_path_before.length;j++ ){if(focus_path_before[j]!=focus_path_after[j]){is_focus_changed=true;break;}}}if(is_focus_changed){return;}}this._setLastFocus(c);_win.addCurrentFocusPaths(this);c._on_focus(false,evt_name,lose_focus,refer_lose_focus,new_focus,refer_new_focus);}else{var is_refer_new_focus_mychild,p;if(refer_new_focus&&this!=refer_new_focus){p=refer_new_focus;while(p&&!(p._is_window)){if(p==this){is_refer_new_focus_mychild=true;break;}p=p.parent;}}if(evt_name=="lbuttondown"&&is_refer_new_focus_mychild==true){this._changeStatus("focused",true);this._changeStatus("mouseover",true);}else{if(_win._is_active_window!==false||this._is_frame){this._changeStatus("focused",true);}}focus_paths=_win.getCurrentFocusPaths();if(focus_paths){focus_path_before=focus_paths.slice(0);}this.on_fire_onsetfocus(lose_focus,refer_lose_focus,this,refer_new_focus);if(focus_paths){focus_path_after=_win.getCurrentFocusPaths();is_focus_changed=(focus_path_before.length!=focus_path_after.length);if(!is_focus_changed){for(j=0;j<focus_path_before.length;j++ ){if(focus_path_before[j]!=focus_path_after[j]){is_focus_changed=true;break;}}}if(is_focus_changed){return;}}this._setLastFocus(this);_win.addCurrentFocusPaths(this);this.on_focus_basic_action((this==refer_new_focus),evt_name,lose_focus,refer_lose_focus,new_focus,refer_new_focus);if(is_refer_new_focus_mychild){var fireComp=null;p=refer_new_focus;while(p&&this!=p){if(p instanceof nexacro.Form){break;}fireComp=p;p=p.parent;}if(fireComp&&!fireComp._is_application){fireComp._on_focus(false,evt_name,lose_focus,refer_lose_focus,new_focus,refer_new_focus);}}}}};_pComponent.on_focus_basic_action=function(self_flag,evt_name){if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(evt_name);}this._apply_setfocus(evt_name,self_flag);};_pComponent._on_killfocus=function(new_focus,new_refer_focus){if(!this._is_alive){return;}this.on_killfocus_basic_action(new_focus,new_refer_focus);};_pComponent.on_killfocus_basic_action=function(){return;};_pComponent._on_activate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",true);}};_pComponent._on_deactivate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",false);}};_pComponent._on_click=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY){if(!this._is_alive){return;}if(this.visible&&this._isEnable()&&this.enableevent){var clientXY=this._getClientXY(canvasX,canvasY);this.on_fire_onclick(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,this);this.on_click_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY);}};_pComponent.on_click_basic_action=function(){return;};_pComponent._on_dblclick=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY){if(!this._is_alive){return;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onlbuttonup||(pThis.onlbuttonup&&!pThis.onlbuttonup.defaultprevented))){if(this.visible&&this._isEnable()&&this.enableevent){var clientXY=this._getClientXY(canvasX,canvasY);this.on_fire_ondblclick(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,this);}}};_pComponent._on_keypress=function(elem,keycode,charcode,alt_key,ctrl_key,shift_key){if(!this._is_alive){return;}return this.on_keypress_basic_action(keycode,charcode,alt_key,ctrl_key,shift_key);};_pComponent.on_keypress_basic_action=function(){return;};_pComponent._on_beforekeyinput=function(elem,value,status,begin,end,inputType){if(!this._is_alive){return false;}return this.on_beforekeyinput_basic_action(value,status,begin,end,inputType);};_pComponent.on_beforekeyinput_basic_action=function(){return;};_pComponent._on_keyinput=function(elem,input_text){if(!this._is_alive){return;}var ret=this.on_keyinput_basic_action(input_text);if(this.visible&&this._isEnable()&&this.enableevent){if(ret!==false){this.on_fire_oninput();}this.on_keyinput_default_action();}};_pComponent.on_keyinput_basic_action=function(){return;};_pComponent.on_keyinput_default_action=function(){return;};_pComponent._on_contextmenu=function(){var root_comp=this._getFromComponent(this);var ret;if(!nexacro._CheckShowContextPrevented(root_comp,this)){ret=this._on_contextmenu_default_action();}else{ret=false;}return ret;};_pComponent._on_contextmenu_basic_action=function(){return;};_pComponent._on_contextmenu_default_action=function(){return nexacro._checkShowContextMenu(this);};_pComponent._on_zoom=function(zoomfactor){if(!this._is_alive){return;}if(this.visible&&this._isEnable()){this._setZoom(zoomfactor);}};_pComponent._on_orientationchange=function(orientation){if(!this._is_alive){return;}if(this.visible&&this._isEnable()){if(this.enableevent){this.on_fire_onorientationchange(orientation);}}};_pComponent._on_lbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){nexacro._skipDragEventAfterMsgBox=false;var ret=this._on_bubble_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onlbuttondown||(pThis.onlbuttondown&&!pThis.onlbuttondown.defaultprevented))){this.on_lbuttondown_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,this._focus_refer_comp);ret=this._on_bubble_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_touch_lbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){nexacro._skipDragEventAfterMsgBox=false;var ret;var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onlbuttondown||(pThis.onlbuttondown&&!pThis.onlbuttondown.defaultprevented))){ret=this._on_bubble_touch_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_touch_lbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var canvas;var win=this._getWindow();if(event_bubbles===undefined){if(!refer_comp){refer_comp=this._focus_refer_comp=this;if(!this._is_focus_accept){this._focus_refer_comp=this._getFocusAcceptableComponent(this);}}if(this.visible&&this._isEnable()){var bubble=this.on_touch_lbuttondown_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,fire_comp,refer_comp);if(bubble){return;}else if(bubble===false){event_bubbles=bubble;}}if((!this.onlbuttondown||(this.onlbuttondown&&!this.onlbuttondown.stoppropagation))&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_touch_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{var select_mode="select";if(this.selectscrollmode){if(this.selectscrollmode=="default"){select_mode=(nexacro._isTouchInteraction)?"scroll":"select";}else{select_mode=this.selectscrollmode;}}if(select_mode=="select"){nexacro._setDragInfo(win,elem,win._curWindowX,win._curWindowY,win._curWindowX,win._curWindowY,null,null,null,"text");}return this.parent._on_bubble_touch_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if((!this.onlbuttondown||(this.onlbuttondown&&!this.onlbuttondown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_touch_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent._on_bubble_lbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;var win=this._getWindow();if(event_bubbles===undefined){if(!refer_comp){refer_comp=this._focus_refer_comp=this;if(!this._is_focus_accept){this._focus_refer_comp=this._getFocusAcceptableComponent(this);}}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onlbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onlbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}if(bubble_scope){var bubble=this.on_lbuttondown_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);if(bubble){return;}else if(bubble===false){event_bubbles=bubble;}}}if((!this.onlbuttondown||(this.onlbuttondown&&!this.onlbuttondown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{nexacro._setDragInfo(win,elem,win._curWindowX,win._curWindowY,win._curWindowX,win._curWindowY,null,null,null,"text");return this.parent._on_bubble_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onlbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onlbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onlbuttondown||(this.onlbuttondown&&!this.onlbuttondown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_lbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_touch_lbuttondown_basic_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,fire_comp,refer_comp){var win=this._getWindow();if(refer_comp===this){if(this._use_pushed_status){this._changeUserStatus("pushed",true);}}if(this._is_track){nexacro._setTrackInfo(win,this,win._curWindowX,win._curWindowY);return false;}if(this._is_repeat){return nexacro._setRepeatInfo(this,win,refer_comp,win._curWindowX,win._curWindowY,canvasX,canvasY);}};_pComponent.on_lbuttondown_basic_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp){var win=this._getWindow();if(refer_comp===this){if(this._use_pushed_status){this._changeUserStatus("pushed",true);}}if(this._is_track){nexacro._setTrackInfo(win,this,win._curWindowX,win._curWindowY);return false;}else{if(this.getOwnerFrame){if(this instanceof nexacro.ChildFrame){return false;}var ownerframe=this.getOwnerFrame();if(ownerframe&&ownerframe.form){var frameform=ownerframe.form;if(frameform&&frameform._is_track){nexacro._setTrackInfo(win,this,win._curWindowX,win._curWindowY);return false;}}}}if(this._is_repeat){if(this._isRtl()){canvasX=nexacro._getRTLCanvasXForMouseEvent(this,refer_comp,canvasX);}return nexacro._setRepeatInfo(this,win,refer_comp,win._curWindowX,win._curWindowY,canvasX,canvasY);}};_pComponent.on_lbuttondown_default_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp){var win=this._getWindow();if(this.visible&&this._isEnable()&&refer_comp){var last_modalframe=win._getLastModalFrame();if(last_modalframe&&!last_modalframe._contains(refer_comp)){var form=refer_comp._getParentForm();if(form){form._setLastFocus(refer_comp);}}else{refer_comp._on_focus(true,"lbuttondown");}}else{var comp=win._findComponentForEvent(elem,0,0);if(comp&&comp[0]){comp[0]._on_focus(true,"lbuttondown");}}};_pComponent._on_rbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_rbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onrbuttondown||(pThis.onrbuttondown&&!pThis.onrbuttondown.defaultprevented))){this.on_rbuttondown_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_rbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_rbuttondown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){var clientXY,canvas;if(!this._is_alive){return;}if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onrbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onrbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onrbuttondown||(this.onrbuttondown&&!this.onrbuttondown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_rbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_rbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onrbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onrbuttondown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onrbuttondown||(this.onrbuttondown&&!this.onrbuttondown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_rbuttondown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_rbuttondown_default_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp,parent){var win=this._getWindow();if(this.visible&&this._isEnable()&&refer_comp){refer_comp._on_focus(true,"rbuttondown");}else{var comp=win._findComponentForEvent(elem,0,0);if(comp&&comp[0]){comp[0]._on_focus(true,"rbuttondown");}}};_pComponent._on_lbuttonup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem){var ret=this._on_bubble_lbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onlbuttonup||(pThis.onlbuttonup&&!pThis.onlbuttonup.defaultprevented))){this.on_lbuttonup_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_lbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,false);}return ret;};_pComponent._on_bubble_lbuttonup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(bubble_scope){this.on_lbuttonup_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onlbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onlbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onlbuttonup||(this.onlbuttonup&&!this.onlbuttonup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_lbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,from_elem,bubble_scope);}else{return this.parent._on_bubble_lbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,from_elem,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onlbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onlbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}}if((!this.onlbuttonup||(this.onlbuttonup&&!this.onlbuttonup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_lbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,from_elem,bubble_scope);}}};_pComponent.on_lbuttonup_basic_action=function(){if(this._use_pushed_status){if(this._isPushed()){if(nexacro._isTouchInteraction){this._changeUserStatus("pushed",false);}else{this._changeUserStatus("pushed",false);this._changeStatus("mouseover",true);}}}};_pComponent.on_lbuttonup_default_action=function(){};_pComponent._on_rbuttonup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem){var ret=this._on_bubble_rbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onrbuttonup||(pThis.onrbuttonup&&!pThis.onrbuttonup.defaultprevented))){this.on_rbuttonup_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_rbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,false);}return ret;};_pComponent._on_bubble_rbuttonup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}this.on_rbuttonup_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onrbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onrbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onrbuttonup||(this.onrbuttonup&&!this.onrbuttonup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_rbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,from_elem,bubble_scope);}else{return this.parent._on_bubble_rbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,from_elem,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onrbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onrbuttonup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}}if((!this.onrbuttonup||(this.onrbuttonup&&!this.onrbuttonup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_rbuttonup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,from_elem,bubble_scope);}}};_pComponent.on_rbuttonup_basic_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp){if(this._use_pushed_status){if(this._isPushed()){if(nexacro._isTouchInteraction){if(this._isPushed()){this._changeUserStatus("pushed",false);}}}}};_pComponent.on_rbuttonup_default_action=function(){};_pComponent._on_mouseup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem){var ret=this._on_bubble_mouseup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onmouseup||(pThis.onmouseup&&!pThis.onmouseup.defaultprevented))){this.on_mouseup_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_mouseup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,false);}return ret;};_pComponent._on_bubble_mouseup=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,from_elem,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onmouseup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,from_elem);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onmouseup||(this.onmouseup&&!this.onmouseup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_mouseup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,from_elem,bubble_scope);}else{return this.parent._on_bubble_mouseup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,from_elem,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}else{event_bubbles=this.on_fire_sys_onmouseup(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp,from_elem);}}if((!this.onmouseup||(this.onmouseup&&!this.onmouseup.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mouseup(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,from_elem,bubble_scope);}}};_pComponent.on_mouseup_default_action=function(){};_pComponent._on_mousedown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_mousedown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onmousedown||(pThis.onmousedown&&!pThis.onmousedown.defaultprevented))){this.on_mousedown_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_mousedown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_mousedown=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmousedown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmousedown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onmousedown||(this.onmousedown&&!this.onmousedown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_mousedown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_mousedown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmousedown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onmousedown(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onmousedown||(this.onmousedown&&!this.onmousedown.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mousedown(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_mousedown_default_action=function(){};_pComponent._on_mousemove=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){if(nexacro._current_popups.length>0){var win=this._getWindow();var elem_comp=win.findComponent(elem,0,0);if(elem_comp&&elem_comp[0]){var cur_popup=nexacro._current_popups[0];if(cur_popup){var root_comp1=this._getRootComponent(this);var root_comp2=cur_popup._getRootComponent(cur_popup);if(cur_popup._track_capture&&(!cur_popup._contains(elem_comp[0])&&root_comp1!=root_comp2)){return;}}}}if(nexacro._mousewheel_obj&&nexacro._mousewheel_obj!=this){if(nexacro._mousewheel_obj._is_alive){nexacro._mousewheel_obj._changeStatus("mouseover",false);}nexacro._mousewheel_obj=null;}var ret=this._on_bubble_mousemove(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onmousemove||(pThis.onmousemove&&!pThis.onmousemove.defaultprevented))){this.on_mousemove_default_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_mousemove(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_mousemove=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(bubble_scope){this.on_mousemove_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmousemove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmousemove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onmousemove||(this.onmousemove&&!this.onmousemove.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_mousemove(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_mousemove(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){if(bubble_scope){this.on_mousemove_basic_action(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmousemove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onmousemove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onmousemove||(this.onmousemove&&!this.onmousemove.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mousemove(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_mousemove_basic_action=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp){if(this._isPushed()){this._changeUserStatus("pushed",true);}else{if(!nexacro._isTouchInteraction){if(button!="touch"){this._changeStatus("mouseover",true);}}else{var win=this._getWindow();var ldown_elem=win._cur_ldown_elem;if(elem!=ldown_elem){var elem_comp=win.findComponent(ldown_elem,0,0)[0];if(elem_comp&&elem_comp._isPushed()){elem_comp._changeUserStatus("pushed",false);}}}}};_pComponent.on_mousemove_default_action=function(){};_pComponent._on_mouseenter=function(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){if(nexacro._current_popups.length>0){var win=this._getWindow();var elem_comp=win.findComponent(elem,0,0);if(elem_comp&&elem_comp[0]){var cur_popup=nexacro._current_popups[0];if(cur_popup){var root_comp1=this._getRootComponent(this);var root_comp2=cur_popup._getRootComponent(cur_popup);if(cur_popup._track_capture&&(!cur_popup._contains(elem_comp[0])&&root_comp1!=root_comp2)){return;}}}}var ret=this._on_bubble_mouseenter(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onmouseenter||(pThis.onmouseenter&&!pThis.onmouseenter.defaultprevented))){this.on_mouseenter_default_action(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_mouseenter(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_mouseenter=function(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){var first_comp;var is_subcontrol_bubble=this._is_subcontrol?true:false;if(!refer_comp){first_comp=this;refer_comp=this;}if(this.visible&&this._isEnable()){if(is_subcontrol_bubble){if(from_comp&&this._contains(from_comp)){return true;}if(first_comp==this){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}}else{from_comp=this._getRootComponent(from_comp);if(from_comp&&this._contains(from_comp)){return true;}clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}}}if((!this.onmouseenter||(this.onmouseenter&&!this.onmouseenter.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_mouseenter(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_mouseenter(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseenter(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onmouseenter||(this.onmouseenter&&!this.onmouseenter.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mouseenter(elem,from_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_mouseenter_default_action=function(){};_pComponent._on_mouseleave=function(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){if(nexacro._current_popups.length>0){var win=this._getWindow();var elem_comp=win.findComponent(elem,0,0);if(elem_comp&&elem_comp[0]){var cur_popup=nexacro._current_popups[0];if(cur_popup){var root_comp1=this._getRootComponent(this);var root_comp2=cur_popup._getRootComponent(cur_popup);if(cur_popup._track_capture&&(!cur_popup._contains(elem_comp[0])&&root_comp1!=root_comp2)){return;}}}}var ret=this._on_bubble_mouseleave(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onmouseleave||(pThis.onmouseleave&&!pThis.onmouseleave.defaultprevented))){this.on_mouseleave_default_action(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_mouseleave(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_mouseleave=function(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){var first_comp;var is_subcontrol_bubble=this._is_subcontrol?true:false;if(!refer_comp){first_comp=this;refer_comp=this;}if(this.visible){if(is_subcontrol_bubble){if(to_comp&&this._contains(to_comp)){return true;}if(first_comp==this){this.on_mouseleave_basic_action(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);if(this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}}}else{to_comp=this._getRootComponent(to_comp);if(to_comp&&this._contains(to_comp)){return true;}if(first_comp==this){this.on_mouseleave_basic_action(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}if(this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}}}}if((!this.onmouseleave||(this.onmouseleave&&!this.onmouseleave.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_mouseleave(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_mouseleave(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onmouseleave(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.onmouseleave||(this.onmouseleave&&!this.onmouseleave.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mouseleave(elem,to_comp,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_mouseleave_basic_action=function(){if(nexacro._cur_track_info){if(nexacro._cur_track_info.target!=this){return;}}if(this._is_subcontrol){if(this._isPushed()){this._changeUserStatus("pushed",false);}else{var tmp_comp=this;var alive=true;if(!this._isSelected()){while(tmp_comp){if(tmp_comp._window){break;}if(tmp_comp._is_alive==false){alive=false;break;}tmp_comp=tmp_comp.parent;}}if(alive){this._changeStatus("mouseover",false);}}}else{if(this._isPushed()){this._changeUserStatus("pushed",false);}else{this._changeStatus("mouseover",false);}}};_pComponent.on_mouseleave_default_action=function(){};_pComponent._on_mousewheel=function(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bScroll){if(!nexacro._mousewheel_obj){nexacro._mousewheel_obj=this;}var ret=this._on_bubble_mousewheel(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bScroll);if(ctrl_key){return;}else{return ret;}};_pComponent._on_bubble_mousewheel=function(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bScroll){if(!this._is_alive){return;}var clientXY,canvas;var pThis,ret;var vscrollbar,hscrollbar;var old_vpos,old_hpos;var new_vpos,new_hpos;var vScrollbarType,hScrollbarType;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);event_bubbles=this.on_fire_user_onmousewheel(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);pThis=this._getFromComponent(this);if(event_bubbles!==true){if(pThis&&(!pThis.onmousewheel||(pThis.onmousewheel&&!pThis.onmousewheel.defaultprevented))){ret=this.on_fire_sys_onmousewheel(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);if(ret){return false;}if(!ctrl_key){if(wheelDeltaY){vScrollbarType=this._getVScrollBarType();if(this.vscrollbar&&this.vscrollbar.enable&&(this.vscrollbar.visible||vScrollbarType=="autoindicator")){vscrollbar=this.vscrollbar;old_vpos=vscrollbar._pos;this._setVScrollDefaultAction(wheelDeltaY);new_vpos=vscrollbar._pos;if(old_vpos!=new_vpos){return false;}}else if(vScrollbarType=="none"){if(this._setVScrollDefaultAction(wheelDeltaY)){return false;}}}if(wheelDeltaX){hScrollbarType=this._getHScrollBarType();if(this.hscrollbar&&this.hscrollbar.enable&&(this.hscrollbar.visible||hScrollbarType=="autoindicator")){hscrollbar=this.hscrollbar;old_hpos=hscrollbar._pos;this._setHScrollDefaultAction(wheelDeltaX);new_hpos=hscrollbar._pos;if(old_hpos!=new_hpos){return false;}}else if(hScrollbarType=="none"){if(this._setHScrollDefaultAction(wheelDeltaX)){return false;}}}}}if(event_bubbles===false){event_bubbles=undefined;}var popupcontrol=this._getPopupControl();if(popupcontrol&&popupcontrol._is_popup()){return false;}if(!pThis.onmousewheel||(pThis.onmousewheel&&!pThis.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_mousewheel(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bScroll);}else{return this.parent._on_bubble_mousewheel(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bScroll);}}}}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);event_bubbles=this.on_fire_user_onmousewheel(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[0],fire_comp,refer_comp);pThis=this._getFromComponent(this);if(event_bubbles!==true){if(pThis&&(!pThis.onmousewheel||(pThis.onmousewheel&&!pThis.onmousewheel.defaultprevented))){ret=this.on_fire_sys_onmousewheel(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[0],fire_comp,refer_comp);if(ret){return false;}if(!ctrl_key){if(wheelDeltaY){vScrollbarType=this._getVScrollBarType();if(this.vscrollbar&&this.vscrollbar.enable&&(this.vscrollbar.visible||vScrollbarType=="autoindicator")){vscrollbar=this.vscrollbar;old_vpos=vscrollbar._pos;this._setVScrollDefaultAction(wheelDeltaY);new_vpos=vscrollbar._pos;if(old_vpos!=new_vpos){return false;}}}if(wheelDeltaX){if(nexacro.OS=="Mac OS"){hScrollbarType=this._getHScrollBarType();if(this.hscrollbar&&this.hscrollbar.enable&&(this.hscrollbar.visible||hScrollbarType=="autoindicator")){hscrollbar=this.hscrollbar;old_hpos=hscrollbar._pos;this._setHScrollDefaultAction(wheelDeltaX);new_hpos=hscrollbar._pos;if(old_hpos!=new_hpos){return false;}}}}}}if(!pThis.onmousewheel||(pThis.onmousewheel&&!pThis.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_mousewheel(elem,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bScroll);}}}}}};_pComponent.on_mousewheel_default_action=function(){};_pComponent._on_drag=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){if(nexacro._skipDragEventAfterMsgBox){nexacro._initDragInfo();return false;}var ret=this._on_bubble_drag(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp);var pThis=this._getFromComponent(this);if(pThis&&(pThis.ondrag&&pThis.ondrag.defaultprevented)){nexacro._initDragInfo();}return ret;};_pComponent._on_bubble_drag=function(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){if(!this._is_alive){return;}var clientXY,canvas;var pThis;if(event_bubbles===undefined){var is_subcontrol_bubble;if(!refer_comp){refer_comp=this;}pThis=this._getFromComponent(this);if(this._is_subcontrol){is_subcontrol_bubble=true;}else{if(this.visible&&this._isEnable()){is_subcontrol_bubble=false;clientXY=this._getClientXY(canvasX,canvasY);event_bubbles=this.on_fire_user_ondrag(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,refer_comp);if(!event_bubbles||event_bubbles[0]!==true){if(!this.ondrag||(pThis&&(pThis.ondrag&&!pThis.ondrag.defaultprevented))){this.on_fire_sys_ondrag(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,refer_comp);}}}}if((!event_bubbles||event_bubbles[0]!==true)){if(pThis&&(!pThis.ondrag||(pThis.ondrag&&!pThis.ondrag.stoppropagation))&&!this._window&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_drag(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,this,refer_comp);}else{return this.parent._on_bubble_drag(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp);}}}return event_bubbles;}else{if((!event_bubbles||event_bubbles[0]!==true)&&this.parent&&!this.parent._is_application){clientXY=this._getClientXY(canvasX,canvasY);if(this.visible&&this._isEnable()){event_bubbles=this.on_fire_user_ondrag(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,this);}if(!event_bubbles||event_bubbles[0]!==true){pThis=this._getFromComponent(this);if(this.visible&&this._isEnable()){if(pThis&&(!pThis.ondrag||(pThis.ondrag&&!pThis.ondrag.defaultprevented))){this.on_fire_sys_ondrag(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp,this);}}if(pThis&&(!pThis.ondrag||(pThis.ondrag&&!pThis.ondrag.stoppropagation))&&!this._window&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_drag(elem,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp);}}}return event_bubbles;}};_pComponent.on_drag_default_action=function(){};_pComponent._on_drop=function(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_drop(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.ondrop||(pThis.ondrop&&!pThis.ondrop.defaultprevented))){this.on_drop_default_action(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_drop(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_drop=function(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondrop(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_ondrop(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.ondrop||(this.ondrop&&!this.ondrop.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_drop(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_drop(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondrop(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_ondrop(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.ondrop||(this.ondrop&&!this.ondrop.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_drop(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_drop_default_action=function(){};_pComponent._on_dragmove=function(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_dragmove(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.ondragmove||(pThis.ondragmove&&!pThis.ondragmove.defaultprevented))){this.on_dragmove_default_action(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_dragmove(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}else if(pThis&&(pThis.ondragmove&&pThis.ondragmove.defaultprevented)){nexacro._initDragInfo();}return ret;};_pComponent._on_bubble_dragmove=function(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){var is_subcontrol_bubble;if(!refer_comp){refer_comp=this;}if(this._is_subcontrol){is_subcontrol_bubble=true;}else{is_subcontrol_bubble=false;if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragmove(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragmove(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}}}if((!this.ondragmove||(this.ondragmove&&!this.ondragmove.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_dragmove(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_dragmove(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragmove(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragmove(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}}if((!this.ondragmove||(this.ondragmove&&!this.ondragmove.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_dragmove(elem,src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_dragmove_default_action=function(){};_pComponent._on_dragenter=function(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_dragenter(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(!pThis.ondragenter||(pThis.ondragenter&&!pThis.ondragenter.defaultprevented)){this.on_dragenter_default_action(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_dragenter(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}else if(pThis&&(pThis.ondragenter&&pThis.ondragenter.defaultprevented)){nexacro._initDragInfo();}return ret;};_pComponent._on_bubble_dragenter=function(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){var is_subcontrol_bubble;var first_comp;if(!refer_comp){first_comp=this;this._dragenter_first_comp=this;refer_comp=this;}if(this._is_subcontrol){is_subcontrol_bubble=true;if(from_comp&&this._contains(from_comp)){return;}if(first_comp==this){this.on_dragenter_basic_action(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}}else{is_subcontrol_bubble=false;from_comp=this._getRootComponent(from_comp);if(from_comp&&this._contains(from_comp)){return;}if(this.visible&&this._isEnable()){this.on_dragenter_basic_action(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragenter(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragenter(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}}}if((!this.ondragenter||(this.ondragenter&&!this.ondragenter.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_dragenter(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_dragenter(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragenter(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragenter(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}this._changeStatus("mouseover",true);}if((!this.ondragenter||(this.ondragenter&&!this.ondragenter.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_dragenter(elem,from_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_dragenter_basic_action=function(){if(this._isPushed()){this._changeUserStatus("pushed",true);}else{this._changeStatus("mouseover",true);}};_pComponent.on_dragenter_default_action=function(){};_pComponent._on_dragleave=function(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_dragleave(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.ondragleave||(pThis.ondragleave&&!pThis.ondragleave.defaultprevented))){this.on_dragleave_default_action(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);ret=this._on_bubble_dragleave(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_dragleave=function(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}var clientXY,canvas;if(event_bubbles===undefined){var is_subcontrol_bubble;var first_comp;if(!refer_comp){first_comp=this;refer_comp=this;}if(this._is_subcontrol){is_subcontrol_bubble=true;if(to_comp&&this._contains(to_comp)){return;}if(first_comp==this){this.on_dragleave_basic_action(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);}}else{is_subcontrol_bubble=false;to_comp=this._getRootComponent(to_comp);if(to_comp&&this._contains(to_comp)){return;}if(this.visible&&this._isEnable()){this.on_dragleave_basic_action(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,refer_comp);clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragleave(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragleave(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);}}}if((!this.ondragleave||(this.ondragleave&&!this.ondragleave.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(is_subcontrol_bubble){return this.parent._on_bubble_dragleave(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_dragleave(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(bubble_scope){event_bubbles=this.on_fire_user_ondragleave(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_ondragleave(src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}if(!to_comp||!this._contains(to_comp)){this._changeStatus("mouseover",false);}}if((!this.ondragleave||(this.ondragleave&&!this.ondragleave.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_dragleave(elem,to_comp,src_comp,src_refer_comp,dragdata,userdata,dayatype,filelist,button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_dragleave_basic_action=function(){if(this._isPushed()){this._changeUserStatus("pushed",false);}else{this._changeStatus("mouseover",false);}};_pComponent.on_dragleave_default_action=function(){};_pComponent._on_keydown=function(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp){var ret=this._on_bubble_keydown(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onkeydown||(pThis.onkeydown&&!pThis.onkeydown.defaultprevented))){this.on_keydown_default_action(keycode,alt_key,ctrl_key,shift_key,refer_comp);ret=this._on_bubble_keydown(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_keydown=function(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(bubble_scope){this.on_keydown_basic_action(keycode,alt_key,ctrl_key,shift_key,refer_comp);}if(bubble_scope&&!this._is_hotkey){event_bubbles=this.on_fire_user_onkeydown(keycode,alt_key,ctrl_key,shift_key,this,refer_comp);}else{event_bubbles=this.on_fire_sys_onkeydown(keycode,alt_key,ctrl_key,shift_key,this,refer_comp);this._is_hotkey=false;}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onkeydown||(this.onkeydown&&!this.onkeydown.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_keydown(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_keydown(elem,keycode,alt_key,ctrl_key,shift_key,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){if(bubble_scope){event_bubbles=this.on_fire_user_onkeydown(keycode,alt_key,ctrl_key,shift_key,fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onkeydown(keycode,alt_key,ctrl_key,shift_key,fire_comp,refer_comp);}}if((!this.onkeydown||(this.onkeydown&&!this.onkeydown.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_keydown(elem,keycode,alt_key,ctrl_key,shift_key,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_keydown_basic_action=function(){};_pComponent.on_keydown_default_action=function(){};_pComponent._on_keyup=function(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp){if(keycode==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){return;}}var ret=this._on_bubble_keyup(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,true);var pThis=this._getFromComponent(this);if(pThis&&(!pThis.onkeyup||(pThis.onkeyup&&!pThis.onkeyup.defaultprevented))){this.on_keyup_default_action(keycode,alt_key,ctrl_key,shift_key,refer_comp);ret=this._on_bubble_keyup(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_keyup=function(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(bubble_scope){this.on_keyup_basic_action(keycode,alt_key,ctrl_key,shift_key,refer_comp);}if(bubble_scope){event_bubbles=this.on_fire_user_onkeyup(keycode,alt_key,ctrl_key,shift_key,this,refer_comp);}else{event_bubbles=this.on_fire_sys_onkeyup(keycode,alt_key,ctrl_key,shift_key,this,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onkeyup||(this.onkeyup&&!this.onkeyup.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_keyup(elem,keycode,alt_key,ctrl_key,shift_key,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_keyup(elem,keycode,alt_key,ctrl_key,shift_key,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){if(bubble_scope){event_bubbles=this.on_fire_user_onkeyup(keycode,alt_key,ctrl_key,shift_key,fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onkeyup(keycode,alt_key,ctrl_key,shift_key,fire_comp,refer_comp);}}if((!this.onkeyup||(this.onkeyup&&!this.onkeyup.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_keyup(elem,keycode,alt_key,ctrl_key,shift_key,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_keyup_basic_action=function(){};_pComponent.on_keyup_default_action=function(){};_pComponent._on_touchstart=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp){nexacro._skipDragEventAfterMsgBox=false;this._on_bubble_touchstart(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.ontouchstart;if(!listener||!listener.defaultprevented){this._on_bubble_touchstart(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,false);}};_pComponent._on_bubble_touchstart=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(is_userbubble){this.on_touchstart_basic_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}else{this.on_touchstart_default_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}if((is_userbubble&&this.enableevent)||!is_userbubble){fire_event_func=is_userbubble?this.on_fire_user_ontouchstart:this.on_fire_sys_ontouchstart;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.ontouchstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));if(this._is_subcontrol){return this.parent._on_bubble_touchstart(touch_manager,touchinfos,changedtouchinfos,event_bubbles,null,refer_comp,is_userbubble);}else{var select_mode="select";if(this.selectscrollmode){if(this.selectscrollmode=="default"){select_mode=(nexacro._isTouchInteraction||nexacro._SupportTouch)?"scroll":"select";}else{select_mode=this.selectscrollmode;}}if(touchinfos.length==1&&select_mode=="select"){var win=touch_manager._start_win;var elem=touch_manager._start_elem;nexacro._setDragInfo(win,elem,win._curWindowX,win._curWindowY,win._curWindowX,win._curWindowY,null,null,null,"text");}return this.parent._on_bubble_touchstart(touch_manager,touchinfos,changedtouchinfos,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&((is_userbubble&&this.enableevent)||!is_userbubble)){touch_manager.updateTouchInputInfosClientXY(touchinfos,this);fire_event_func=is_userbubble?this.on_fire_user_ontouchstart:this.on_fire_sys_ontouchstart;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,fire_comp,refer_comp);}listener=this.ontouchstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));return this.parent._on_bubble_touchstart(touch_manager,touchinfos,changedtouchinfos,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_touchstart_basic_action=function(touch_manager,touchinfos,changedtouchinfos,refer_comp){var firsttouchinput=touch_manager.getFirstTouchInputInfo(changedtouchinfos);if(firsttouchinput){if(this._use_pushed_status){this._changeUserStatus("pushed",true);}if(nexacro._current_popups.length>0){nexacro._checkClosePopupComponent(refer_comp?refer_comp:this,true);}var win=this._getWindow();if(this._is_track){nexacro._setTrackInfo(win,this,win._curWindowX,win._curWindowY);return false;}if(this._is_repeat){nexacro._setRepeatInfo(this,win,refer_comp,win._curWindowX,win._curWindowY,changedtouchinfos[0].canvasx,changedtouchinfos[0].canvasy);return true;}}};_pComponent.on_touchstart_default_action=function(){};_pComponent._on_touchmove=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp){this._on_bubble_touchmove(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.ontouchmove;if(!listener||!listener.defaultprevented){this._on_bubble_touchmove(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,false);}};_pComponent._on_bubble_touchmove=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(is_userbubble){this.on_touchmove_basic_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}else{this.on_touchmove_default_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}if(((is_userbubble&&this.enableevent)||!is_userbubble)){fire_event_func=is_userbubble?this.on_fire_user_ontouchmove:this.on_fire_sys_ontouchmove;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.ontouchmove;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));if(this._is_subcontrol){return this.parent._on_bubble_touchmove(touch_manager,touchinfos,changedtouchinfos,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_touchmove(touch_manager,touchinfos,changedtouchinfos,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&((is_userbubble&&this.enableevent)||!is_userbubble)){touch_manager.updateTouchInputInfosClientXY(touchinfos,this);fire_event_func=is_userbubble?this.on_fire_user_ontouchmove:this.on_fire_sys_ontouchmove;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,this,refer_comp);}listener=this.ontouchmove;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));return this.parent._on_bubble_touchmove(touch_manager,touchinfos,changedtouchinfos,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_touchmove_basic_action=function(touch_manager,touchinfos,changedtouchinfos,refer_comp){var win=this._getWindow();var firsttouchinput=touch_manager.getFirstTouchInputInfo(changedtouchinfos);if(firsttouchinput){var touch_elem=win._cur_touch_elem;if(firsttouchinput.target!=touch_elem){var elem_comp=win.findComponent(touch_elem,0,0)[0];if(elem_comp&&elem_comp._isPushed()){elem_comp._changeUserStatus("pushed",false);}}}};_pComponent.on_touchmove_default_action=function(){};_pComponent._on_touchend=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp){this._on_bubble_touchend(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);if(root_comp){var listener=root_comp.ontouchend;if(!listener||!listener.defaultprevented){this._on_bubble_touchend(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,false);}if(listener&&listener.defaultprevented){return true;}}};_pComponent._on_bubble_touchend=function(touch_manager,touchinfos,changedtouchinfos,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){if(is_userbubble){this.on_touchend_basic_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}else{this.on_touchend_default_action(touch_manager,touchinfos,changedtouchinfos,refer_comp);}if(((is_userbubble&&this.enableevent)||!is_userbubble)){fire_event_func=is_userbubble?this.on_fire_user_ontouchend:this.on_fire_sys_ontouchend;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.ontouchend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));if(this._is_subcontrol){return this.parent._on_bubble_touchend(touch_manager,touchinfos,changedtouchinfos,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_touchend(touch_manager,touchinfos,changedtouchinfos,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&((is_userbubble&&this.enableevent)||!is_userbubble)){touch_manager.updateTouchInputInfosClientXY(touchinfos,this);fire_event_func=is_userbubble?this.on_fire_user_ontouchend:this.on_fire_sys_ontouchend;event_bubbles=fire_event_func.call(this,touchinfos,changedtouchinfos,this,refer_comp);}listener=this.ontouchend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){touch_manager.updateTouchInputInfosCanvasXY(touchinfos,(this._adjust_left-this._scroll_left||0),(this._adjust_top-this._scroll_top||0));return this.parent._on_bubble_touchend(touch_manager,touchinfos,changedtouchinfos,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_touchend_basic_action=function(touch_manager,touchinfos,changedtouchinfos){var firsttouchinput=touch_manager.getFirstTouchInputInfo(changedtouchinfos);if(firsttouchinput){if(this._use_pushed_status){if(nexacro._isTouchInteraction){this._changeUserStatus("pushed",false);}else{this._changeUserStatus("pushed",false);this._changeStatus("mouseover",false);}}}};_pComponent.on_touchend_default_action=function(){};_pComponent._on_tap=function(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){this._on_bubble_tap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return;}var pThis=this._getFromComponent(this);if(pThis&&(!pThis.ontap||(pThis.ontap&&!pThis.ontap.defaultprevented))){this._on_bubble_tap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}};_pComponent._on_bubble_tap=function(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var clientXY,canvas;var listener,fire_event_func;if(event_bubbles===undefined){var is_first=false;if(!refer_comp){refer_comp=this._focus_refer_comp=this;if(!this._is_focus_accept){this._focus_refer_comp=this._getFocusAcceptableComponent(this);}is_first=true;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(is_userbubble){this.on_tap_basic_action_before(elem,canvasX,canvasY,screenX,screenY,refer_comp);if(is_first){this.on_tap_basic_action(elem,canvasX,canvasY,screenX,screenY,refer_comp);}}else{this.on_tap_default_action(elem,canvasX,canvasY,screenX,screenY,refer_comp);}if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_ontap:this.on_fire_sys_ontap;event_bubbles=fire_event_func.call(this,elem,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.ontap;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_tap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_tap(elem,canvasX,canvasY,screenX,screenY,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&nexacro._enabletouchevent&&this.enableevent){clientXY=this._getClientXY(canvasX,canvasY);fire_event_func=is_userbubble?this.on_fire_user_ontap:this.on_fire_sys_ontap;event_bubbles=fire_event_func.call(this,elem,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}listener=this.ontap;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_tap(elem,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_tap_basic_action_before=function(){};_pComponent.on_tap_basic_action=function(elem,canvasX,canvasY,screenX,screenY,refer_comp){var win=this._getWindow();if(this.visible&&this._isEnable()&&refer_comp){if(!this._is_focus_accept){this._focus_refer_comp._on_focus(true,"tap");}else{refer_comp._on_focus(true,"tap");}}else{var comp=win._findComponentForEvent(elem,0,0);if(comp&&comp[0]){comp[0]._on_focus(true,"tap");}}var delaytime=nexacro._getLbuttonupDelayTime(elem);if(delaytime>0){nexacro._OnceCallbackTimer.callonce(this,function(){this._on_click(elem,"touch",false,false,false,canvasX,canvasY,screenX,screenY);},delaytime);}else{this._on_click(elem,"touch",false,false,false,canvasX,canvasY,screenX,screenY);}};_pComponent.on_tap_default_action=function(){};_pComponent._on_dbltap=function(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){this._on_bubble_dbltap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.ondbltap;if(!listener||!listener.defaultprevented){this._on_bubble_dbltap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,false);}};_pComponent._on_bubble_dbltap=function(elem,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var clientXY,canvas;var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(this.visible&&this._isEnable()){clientXY=this._getClientXY(canvasX,canvasY);if(is_userbubble){this.on_dbltap_basic_action(elem,canvasX,canvasY,screenX,screenY,refer_comp);}else{this.on_dbltap_default_action(elem,canvasX,canvasY,screenX,screenY,refer_comp);}if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_ondbltap:this.on_fire_sys_ondbltap;event_bubbles=fire_event_func.call(this,elem,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.ondbltap;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];if(this._is_subcontrol){return this.parent._on_bubble_dbltap(elem,canvasX,canvasY,screenX,screenY,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_dbltap(elem,canvasX,canvasY,screenX,screenY,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&nexacro._enabletouchevent&&this.enableevent){clientXY=this._getClientXY(canvasX,canvasY);fire_event_func=is_userbubble?this.on_fire_user_ondbltap:this.on_fire_sys_ondbltap;event_bubbles=fire_event_func.call(this,elem,screenX,screenY,canvasX,canvasY,clientXY[0],clientXY[1],fire_comp,refer_comp);}listener=this.ondbltap;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){canvas=this._getRecalcCanvasXY(elem,canvasX,canvasY);canvasX=canvas[0];canvasY=canvas[1];return this.parent._on_bubble_dbltap(elem,canvasX,canvasY,screenX,screenY,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_dbltap_basic_action=function(){};_pComponent.on_dbltap_default_action=function(){};_pComponent._on_pinchstart=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom){this._on_bubble_pinchstart(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onpinchstart;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"pinchstart")){return true;}this._on_bubble_pinchstart(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_pinchstart=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_pinchstart_basic_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}else{this.on_pinchstart_default_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinchstart:this.on_fire_sys_onpinchstart;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onpinchstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_pinchstart(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,null,refer_comp,bZoom,is_userbubble);}else{return this.parent._on_bubble_pinchstart(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,this,refer_comp,bZoom,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinchstart:this.on_fire_sys_onpinchstart;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,fire_comp,refer_comp);}}listener=this.onpinchstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_pinchstart(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,fire_comp,refer_comp,bZoom,is_userbubble);}}};_pComponent.on_pinchstart_basic_action=function(){};_pComponent.on_pinchstart_default_action=function(){};_pComponent._on_pinch=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom){this._on_bubble_pinch(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onpinch;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"pinch")){return true;}this._on_bubble_pinch(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_pinch=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_pinch_basic_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}else{this.on_pinch_default_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinch:this.on_fire_sys_onpinch;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,firstrange,currange,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onpinch;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_pinch(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,null,refer_comp,bZoom,is_userbubble);}else{return this.parent._on_bubble_pinch(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,this,refer_comp,bZoom,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinch:this.on_fire_sys_onpinch;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,firstrange,currange,fire_comp,refer_comp);}}listener=this.onpinch;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_pinch(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,fire_comp,refer_comp,bZoom,is_userbubble);}}};_pComponent.on_pinch_basic_action=function(){};_pComponent.on_pinch_default_action=function(){};_pComponent._on_pinchend=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom){this._on_bubble_pinchend(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onpinchend;if(!listener||!listener.defaultprevented){this._on_bubble_pinchend(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,false);}};_pComponent._on_bubble_pinchend=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,fire_comp,refer_comp,bZoom,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_pinchend_basic_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}else{this.on_pinchend_default_action(elem,touchinfos,accvalue,deltavalue,firstrange,currange,bZoom,refer_comp);}if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinchend:this.on_fire_sys_onpinchend;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onpinchend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_pinchend(elem,touchinfos,accvalue,deltavalue,firstrange,currange,event_bubbles,null,refer_comp,bZoom,is_userbubble);}else{return this.parent._on_bubble_pinchend(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,this,refer_comp,bZoom,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(nexacro._enabletouchevent&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onpinchend:this.on_fire_sys_onpinchend;event_bubbles=fire_event_func.call(this,elem,touchinfos,accvalue,deltavalue,fire_comp,refer_comp);}}listener=this.onpinchend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_pinchend(elem,touchinfos,accvalue,deltavalue,firstrange,currange,false,fire_comp,refer_comp,bZoom,is_userbubble);}}};_pComponent.on_pinchend_basic_action=function(){};_pComponent.on_pinchend_default_action=function(){};_pComponent._on_flingstart=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp){this._on_bubble_flingstart(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onflingstart;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"flingstart")){return true;}this._on_bubble_flingstart(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_flingstart=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_flingstart_basic_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}else{this.on_flingstart_default_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onflingstart:this.on_fire_sys_onflingstart;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onflingstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){if(this._is_subcontrol){return this.parent._on_bubble_flingstart(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_flingstart(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onflingstart:this.on_fire_sys_onflingstart;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,fire_comp,refer_comp);}}listener=this.onflingstart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){return this.parent._on_bubble_flingstart(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_flingstart_basic_action=function(){};_pComponent.on_flingstart_default_action=function(){};_pComponent._on_fling=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp){this._on_bubble_fling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onfling;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"fling")){return true;}this._on_bubble_fling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_fling=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var pThis=this._getFromComponent(this);var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_fling_basic_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}else{this.on_fling_default_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}if(this.visible&&this._isEnable()){if((!is_userbubble&&(!pThis.onfling||(pThis.onfling&&!pThis.onfling.defaultprevented)))||(is_userbubble&&nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onfling:this.on_fire_sys_onfling;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onfling;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){if(this._is_subcontrol){return this.parent._on_bubble_fling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_fling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if((!is_userbubble&&(!pThis.onfling||(pThis.onfling&&!pThis.onfling.defaultprevented)))||(is_userbubble&&nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onfling:this.on_fire_sys_onfling;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,fire_comp,refer_comp);}}listener=this.onfling;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){return this.parent._on_bubble_fling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_fling_basic_action=function(){};_pComponent.on_fling_default_action=function(){};_pComponent._on_flingend=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp){this._on_bubble_flingend(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onflingend;if(!listener||!listener.defaultprevented){this._on_bubble_flingend(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,false);}if(this instanceof nexacro.Form){if(nexacro._OS=="iOS"){var _win=this._getWindow();var cur_focus_paths=_win.getCurrentFocusPaths();var focused_comp=cur_focus_paths[cur_focus_paths.length-1];var input_elem=focused_comp._input_element;if(input_elem){nexacro._deleteRefreshNode();nexacro._refreshCaret();}}}this._is_bubble_fling_v=undefined;this._is_bubble_fling_h=undefined;};_pComponent._on_bubble_flingend=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_flingend_basic_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}else{this.on_flingend_default_action(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp);}if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onflingend:this.on_fire_sys_onflingend;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onflingend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){if(this._is_subcontrol){return this.parent._on_bubble_flingend(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_flingend(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onflingend:this.on_fire_sys_onflingend;event_bubbles=fire_event_func.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,fire_comp,refer_comp);}}listener=this.onflingend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application&&!this._is_track){return this.parent._on_bubble_flingend(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_flingend_basic_action=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,refer_comp){var pThis=this;while((!pThis._is_frame&&!pThis._getScrollable())||!pThis._isEnable()){pThis=pThis.parent;}if(!pThis._is_frame){var vscrollbartype=pThis._getVScrollBarType();var hscrollbartype=pThis._getHScrollBarType();if(pThis.vscrollbar&&pThis.vscrollbar.visible&&vscrollbartype=="autoindicator"){pThis.vscrollbar.set_visible(false);}if(pThis.hscrollbar&&pThis.hscrollbar.visible&&hscrollbartype=="autoindicator"){pThis.hscrollbar.set_visible(false);}}};_pComponent.on_flingend_default_action=function(){};_pComponent._on_longpress=function(elem,touchinfos,event_bubbles,fire_comp,refer_comp){this._on_bubble_longpress(elem,touchinfos,event_bubbles,fire_comp,refer_comp,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onlongpress;if(!listener||!listener.defaultprevented){this._on_bubble_longpress(elem,touchinfos,event_bubbles,fire_comp,refer_comp,false);}};_pComponent._on_bubble_longpress=function(elem,touchinfos,event_bubbles,fire_comp,refer_comp,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_longpress_basic_action(elem,touchinfos,refer_comp);}else{this.on_longpress_default_action(elem,touchinfos,refer_comp);}if(this.visible&&this._isEnable()&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onlongpress:this.on_fire_sys_onlongpress;event_bubbles=fire_event_func.call(this,elem,touchinfos,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}listener=this.onlongpress;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_longpress(elem,touchinfos,event_bubbles,null,refer_comp,is_userbubble);}else{return this.parent._on_bubble_longpress(elem,touchinfos,false,this,refer_comp,is_userbubble);}}}else{if(this.visible&&this._isEnable()&&(!is_userbubble||this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onlongpress:this.on_fire_sys_onlongpress;event_bubbles=fire_event_func.call(this,elem,touchinfos,fire_comp,refer_comp);}listener=this.onlongpress;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_longpress(elem,touchinfos,false,fire_comp,refer_comp,is_userbubble);}}};_pComponent.on_longpress_basic_action=function(){};_pComponent.on_longpress_default_action=function(elem,touchinfos,refer_comp){var win=this._getWindow();if(this.visible&&this._isEnable()&&refer_comp){refer_comp._on_focus(true,"longpress");}else{var comp=win._findComponentForEvent(elem,0,0);if(comp&&comp[0]){comp[0]._on_focus(true,"longpress");}}};_pComponent._on_slidestart=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll){this._on_bubble_slidestart(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onslidestart;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"slidestart")){return true;}this._on_bubble_slidestart(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_slidestart=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_slidestart_basic_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}else{this.on_slidestart_default_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslidestart:this.on_fire_sys_onslidestart;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onslidestart;if((!listener||(!listener.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_slidestart(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,null,refer_comp,bScroll,is_userbubble);}else{return this.parent._on_bubble_slidestart(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,this,refer_comp,bScroll,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslidestart:this.on_fire_sys_onslidestart;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,fire_comp,refer_comp);}}listener=this.onslidestart;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_slidestart(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,fire_comp,refer_comp,bScroll,is_userbubble);}}};_pComponent.on_slidestart_basic_action=function(){};_pComponent.on_slidestart_default_action=function(){};_pComponent._on_slide=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll){this._on_bubble_slide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onslide;if(!listener||!listener.defaultprevented){if(this._isParentdefaultprevented(root_comp,"slide")){return true;}this._on_bubble_slide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,false);}if(listener&&listener.defaultprevented){return true;}};_pComponent._on_bubble_slide=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,is_userbubble){if(!this._is_alive){return;}var pThis=this._getFromComponent(this);var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_slide_basic_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}else{this.on_slide_default_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}if(this.visible&&this._isEnable()){if((!is_userbubble&&(!pThis.onslide||(pThis.onslide&&!pThis.onslide.defaultprevented)))||(is_userbubble&&nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslide:this.on_fire_sys_onslide;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onslide;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent){if(this.parent._is_application){if(!is_userbubble&&touch_manager._scroll_comp==null&&!nexacro._cur_track_info){if(nexacro._allow_default_pinchzoom&&xdeltavalue!=0&&Math.abs(xdeltavalue)>Math.abs(ydeltavalue)){touch_manager._scroll_end=true;touch_manager._scroll_direction=(xdeltavalue>0)? -10:10;}else if(ydeltavalue!=0){touch_manager._scroll_end=true;touch_manager._scroll_direction=(ydeltavalue>0)? -1:1;}}return;}if(this._is_subcontrol){return this.parent._on_bubble_slide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,null,refer_comp,bScroll,is_userbubble);}else{return this.parent._on_bubble_slide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,this,refer_comp,bScroll,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if((!is_userbubble&&(!pThis.onslide||(pThis.onslide&&!pThis.onslide.defaultprevented)))||(is_userbubble&&nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslide:this.on_fire_sys_onslide;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,fire_comp,refer_comp);}}listener=this.onslide;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent){if(this.parent._is_application){if(!is_userbubble&&touch_manager._scroll_comp==null&&!nexacro._cur_track_info){if(nexacro._allow_default_pinchzoom&&xdeltavalue!=0&&Math.abs(xdeltavalue)>Math.abs(ydeltavalue)){touch_manager._scroll_end=true;touch_manager._scroll_direction=(xdeltavalue>0)? -10:10;}else if(ydeltavalue!=0){touch_manager._scroll_end=true;touch_manager._scroll_direction=(ydeltavalue>0)? -1:1;}}return;}return this.parent._on_bubble_slide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,fire_comp,refer_comp,bScroll,is_userbubble);}}};_pComponent.on_slide_basic_action=function(){};_pComponent.on_slide_default_action=function(){};_pComponent._on_slideend=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll){this._on_bubble_slideend(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,true);var root_comp=this._getFromComponent(this);var listener=root_comp.onslideend;if(!listener||!listener.defaultprevented){this._on_bubble_slideend(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,false);}};_pComponent._on_bubble_slideend=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,fire_comp,refer_comp,bScroll,is_userbubble){if(!this._is_alive){return;}var listener,fire_event_func;if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if(is_userbubble){this.on_slideend_basic_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}else{this.on_slideend_default_action(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp);}if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslideend:this.on_fire_sys_onslideend;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,this,refer_comp);if(event_bubbles===false){event_bubbles=undefined;}}}listener=this.onslideend;if((!listener||(!listener.stoppropagation))&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_slideend(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,event_bubbles,null,refer_comp,bScroll,is_userbubble);}else{return this.parent._on_bubble_slideend(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,this,refer_comp,bScroll,is_userbubble);}}}else{if(this.visible&&this._isEnable()){if(!is_userbubble||(nexacro._enabletouchevent&&this.enableevent)){fire_event_func=is_userbubble?this.on_fire_user_onslideend:this.on_fire_sys_onslideend;event_bubbles=fire_event_func.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,fire_comp,refer_comp);}}listener=this.onslideend;if((!listener||!listener.stoppropagation)&&(event_bubbles!==true)&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_slideend(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,false,fire_comp,refer_comp,bScroll,is_userbubble);}}};_pComponent.on_slideend_basic_action=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,bScroll,refer_comp){var pThis=this;while((!pThis._is_frame&&!pThis._getScrollable())||!pThis._isEnable()){pThis=pThis.parent;}if(!pThis._is_frame){var is_fling=false;var touchsession=touch_manager._touch_session;if(touchsession&&touchsession._cur_detector){is_fling=touchsession._cur_detector._checkFlingOption();}if(!is_fling){var vscrollbartype=pThis._getVScrollBarType();var hscrollbartype=pThis._getHScrollBarType();if(pThis.vscrollbar&&pThis.vscrollbar.visible&&vscrollbartype=="autoindicator"){pThis.vscrollbar.set_visible(false);}if(pThis.hscrollbar&&pThis.hscrollbar.visible&&hscrollbartype=="autoindicator"){pThis.hscrollbar.set_visible(false);}}}};_pComponent.on_slideend_default_action=function(){};_pComponent._on_accessibilitygesture=function(direction,event_bubbles,fire_comp,refer_comp){var pThis=this;var ret=this._on_bubble_accessibilitygesture(direction,event_bubbles,fire_comp,refer_comp,true);if(!this._is_alive){return ret;}if(!pThis.onaccessibilitygesture||(pThis.onaccessibilitygesture&&!pThis.onaccessibilitygesture.defaultprevented)){this.on_accessibilitygesture_default_action();ret=this._on_bubble_accessibilitygesture(direction,event_bubbles,fire_comp,refer_comp,false);}return ret;};_pComponent._on_bubble_accessibilitygesture=function(direction,event_bubbles,fire_comp,refer_comp,bubble_scope){if(!this._is_alive){return;}if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}if((this.visible&&this._isEnable())||(this.visible&&nexacro._enableaccessibility&&nexacro._accessibilitytype==5)){if(bubble_scope&&!this._is_hotkey){event_bubbles=this.on_fire_user_onaccessibilitygesture(direction,this,refer_comp);}else{event_bubbles=this.on_fire_sys_onaccessibilitygesture(direction,this,refer_comp);this._is_hotkey=false;}if(event_bubbles===false){event_bubbles=undefined;}}if((!this.onaccessibilitygesture||(this.onaccessibilitygesture&&!this.onaccessibilitygesture.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){if(this._is_subcontrol){return this.parent._on_bubble_accessibilitygesture(direction,event_bubbles,null,refer_comp,bubble_scope);}else{return this.parent._on_bubble_accessibilitygesture(direction,false,this,refer_comp,bubble_scope);}}}else{if(this.visible&&this._isEnable()){if(bubble_scope){event_bubbles=this.on_fire_user_onaccessibilitygesture(direction,fire_comp,refer_comp);}else{event_bubbles=this.on_fire_sys_onaccessibilitygesture(direction,fire_comp,refer_comp);}}if((!this.accessibilitygesture||(this.accessibilitygesture&&!this.accessibilitygesture.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){return this.parent._on_bubble_accessibilitygesture(direction,false,fire_comp,refer_comp,bubble_scope);}}};_pComponent.on_accessibilitygesture_default_action=function(){};_pComponent._on_starttrack=nexacro._emptyFn;_pComponent._on_movetrack=nexacro._emptyFn;_pComponent._on_endtrack=nexacro._emptyFn;_pComponent._on_startrepeat=nexacro._emptyFn;_pComponent._on_repeat=nexacro._emptyFn;_pComponent._on_endrepeat=nexacro._emptyFn;_pComponent.on_fire_onclick=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onclick&&this.onclick._has_handlers){var evt=new nexacro.ClickEventInfo(this,"onclick",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);var ret=this.onclick._fireEvent(this,evt);evt.destroy();return ret;}return false;};_pComponent.on_fire_ondblclick=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){nexacro._fireBeforeDblclick(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this.ondblclick&&this.ondblclick._has_handlers){var evt=new nexacro.ClickEventInfo(this,"ondblclick",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.ondblclick._fireEvent(this,evt);}return false;};_pComponent.on_fire_onkillfocus=function(newobj,newreferobj,from_comp,from_refer_comp){if(this.onkillfocus&&this.onkillfocus._has_handlers){var evt=new nexacro.KillFocusEventInfo(this,"onkillfocus",newobj,newreferobj,from_comp,from_refer_comp);return this.onkillfocus._fireEvent(this,evt);}return false;};_pComponent.on_fire_onsetfocus=function(oldobj,oldreferobj,from_comp,from_refer_comp){if(this.onsetfocus&&this.onsetfocus._has_handlers){var evt=new nexacro.SetFocusEventInfo(this,"onsetfocus",oldobj,oldreferobj,from_comp,from_refer_comp);return this.onsetfocus._fireEvent(this,evt);}return false;};_pComponent.on_fire_onkeydown=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeydown&&this.onkeydown._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeydown",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeydown._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onkeydown=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeydown&&this.onkeydown._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeydown",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeydown._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onkeydown=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeydown&&this.onkeydown._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeydown",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeydown._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onkeyup=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeyup&&this.onkeyup._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeyup",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeyup._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onkeyup=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeyup&&this.onkeyup._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeyup",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeyup._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onkeyup=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this.onkeyup&&this.onkeyup._has_handlers){var evt=new nexacro.KeyEventInfo(this,"onkeyup",alt_key,ctrl_key,shift_key,key_code,from_comp,from_refer_comp);return this.onkeyup._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var evt=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,evt);}return false;};_pComponent.on_fire_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttondown._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttondown._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttondown._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttonup._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttonup._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onlbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onlbuttonup._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttondown._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttondown._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttondown._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttonup._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttonup._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onrbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onrbuttonup._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseup&&this.onmouseup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseup._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onmouseup&&this.onmouseup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseup._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this.onmouseup&&this.onmouseup._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseup._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousedown&&this.onmousedown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousedown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousedown._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousedown&&this.onmousedown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousedown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousedown._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousedown&&this.onmousedown._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousedown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousedown._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseenter&&this.onmouseenter._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseenter",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseenter._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseenter&&this.onmouseenter._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseenter",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseenter._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseenter&&this.onmouseenter._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseenter",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseenter._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseleave&&this.onmouseleave._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseleave",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseleave._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseleave&&this.onmouseleave._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseleave",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseleave._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmouseleave&&this.onmouseleave._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmouseleave",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmouseleave._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousemove&&this.onmousemove._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousemove",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousemove._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousemove&&this.onmousemove._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousemove",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousemove._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousemove&&this.onmousemove._has_handlers){var evt=new nexacro.MouseEventInfo(this,"onmousemove",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);return this.onmousemove._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmousewheel=function(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousewheel&&this.onmousewheel._has_handlers){var evt=new nexacro.MouseWheelEventInfo(this,"onmousewheel",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,wheelDeltaY,from_comp,from_refer_comp);return this.onmousewheel._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_onmousewheel=function(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousewheel&&this.onmousewheel._has_handlers){var evt=new nexacro.MouseWheelEventInfo(this,"onmousewheel",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,wheelDeltaY,from_comp,from_refer_comp);return this.onmousewheel._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_onmousewheel=function(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.onmousewheel&&this.onmousewheel._has_handlers){var evt=new nexacro.MouseWheelEventInfo(this,"onmousewheel",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,wheelDeltaY,from_comp,from_refer_comp);return this.onmousewheel._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_ondrag=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,refer_comp,self_refer_comp){if(this.ondrag&&this.ondrag._has_handlers){var dragData=this._getDragData();var evt=new nexacro.DragEventInfo(this,"ondrag",dragData,null,"text",null,this,self_refer_comp,from_comp,refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return [this.ondrag._fireEvent(this,evt),this,self_refer_comp,dragData,evt.userdata];}return [false];};_pComponent.on_fire_sys_ondrag=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,refer_comp,self_refer_comp){if(this.ondrag&&this.ondrag._has_handlers){var dragData=this._getDragData();var evt=new nexacro.DragEventInfo(this,"ondrag",dragData,null,"text",null,this,self_refer_comp,from_comp,refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return [this.ondrag._fireSysEvent(this,evt),this,self_refer_comp,dragData,evt.userdata];}return [false];};_pComponent.on_fire_user_ondrag=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,refer_comp,self_refer_comp){if(this.ondrag&&this.ondrag._has_handlers){var dragData=this._getDragData();var evt=new nexacro.DragEventInfo(this,"ondrag",dragData,null,"text",null,this,self_refer_comp,from_comp,refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return [this.ondrag._fireUserEvent(this,evt),this,self_refer_comp,dragData,evt.userdata];}return [false];};_pComponent.on_fire_ondrop=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondrop&&this.ondrop._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondrop",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondrop._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_ondrop=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondrop&&this.ondrop._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondrop",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondrop._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_ondrop=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondrop&&this.ondrop._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondrop",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondrop._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_ondragenter=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragenter&&this.ondragenter._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragenter",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragenter._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_ondragenter=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragenter&&this.ondragenter._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragenter",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragenter._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_ondragenter=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragenter&&this.ondragenter._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragenter",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragenter._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_ondragleave=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragleave&&this.ondragleave._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragleave",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragleave._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_ondragleave=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragleave&&this.ondragleave._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragleave",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragleave._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_ondragleave=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragleave&&this.ondragleave._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragleave",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragleave._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_ondragmove=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragmove&&this.ondragmove._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragmove",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragmove._fireEvent(this,evt);}return false;};_pComponent.on_fire_sys_ondragmove=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragmove&&this.ondragmove._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragmove",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragmove._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_user_ondragmove=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragmove&&this.ondragmove._has_handlers){var evt=new nexacro.DragEventInfo(this,"ondragmove",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);return this.ondragmove._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_onmove=function(left,top){if(this.onmove&&this.onmove._has_handlers){var evt=new nexacro.MoveEventInfo(this,"onmove",left,top);return this.onmove._fireEvent(this,evt);}return false;};_pComponent.on_fire_onsize=function(width,height){if(this.onsize&&this.onsize._has_handlers){var evt=new nexacro.SizeEventInfo(this,"onsize",width,height);return this.onsize._fireEvent(this,evt);}return false;};_pComponent.on_fire_oncontextmenu=function(from_comp,from_refer_comp){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var evt=new nexacro.ContextMenuEventInfo(this,"oncontextmenu",from_comp,from_refer_comp);return this.oncontextmenu._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_oncontextmenu=function(from_comp,from_refer_comp){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var evt=new nexacro.ContextMenuEventInfo(this,"oncontextmenu",from_comp,from_refer_comp);return this.oncontextmenu._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_oncontextmenu=function(from_comp,from_refer_comp){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var evt=new nexacro.ContextMenuEventInfo(this,"oncontextmenu",from_comp,from_refer_comp);return this.oncontextmenu._fireSysEvent(this,evt);}return true;};_pComponent.on_fire_user_onextendedcommand=function(eventid,eventtype,deviceid,data,from_refer_comp){if(this.onextendedcommand&&this.onextendedcommand._has_handlers){var evt=new nexacro.ExtendedCommandEventInfo(this,"onextended",deviceid,eventtype,data);return this.onextendedcommand._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_onextendedcommand=function(eventid,eventtype,deviceid,data,from_refer_comp){if(this.onextendedcommand&&this.onextendedcommand._has_handlers){var evt=new nexacro.ExtendedCommandEventInfo(this,"onextended",deviceid,eventtype,data);return this.onextendedcommand._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_ontouchstart=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchstart&&this.ontouchstart._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchstart",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchstart._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_ontouchstart=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchstart&&this.ontouchstart._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchstart",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchstart._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_ontouchstart=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchstart&&this.ontouchstart._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchstart",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchstart._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_ontouchmove=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchmove&&this.ontouchmove._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchmove",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchmove._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_ontouchmove=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchmove&&this.ontouchmove._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchmove",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchmove._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_ontouchmove=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchmove&&this.ontouchmove._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchmove",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchmove._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_ontouchend=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchend&&this.ontouchend._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchend",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchend._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_ontouchend=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchend&&this.ontouchend._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchend",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchend._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_ontouchend=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this.ontouchend&&this.ontouchend._has_handlers){var evt=new nexacro.TouchEventInfo(this,"ontouchend",touchinfos,changedtouchinfos,from_comp,from_refer_comp);return this.ontouchend._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_ontap=function(){return false;};_pComponent.on_fire_user_ontap=_pComponent.on_fire_ontap;_pComponent.on_fire_sys_ontap=function(){return true;};_pComponent.on_fire_ondbltap=function(){if(this.ondbltap&&this.ondbltap._has_handlers){var evt=new nexacro.TapEventInfo(this,"ondbltap");return this.ondbltap._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_ondbltap=_pComponent.on_fire_ondbltap;_pComponent.on_fire_sys_ondbltap=function(elem,screenX,screenY,canvasX,canvasY){this._on_dblclick(elem,"touch",false,false,false,canvasX,canvasY,screenX,screenY);return true;};_pComponent.on_fire_onpinchstart=function(){return false;};_pComponent.on_fire_user_onpinchstart=function(){return false;};_pComponent.on_fire_sys_onpinchstart=function(elem,touchinfos,accvalue,deltavalue,from_comp,from_refer_comp){if(this.onpinchstart&&this.onpinchstart._has_handlers){var evt=new nexacro.PinchEventInfo(this,"onpinchstart",touchinfos,accvalue,deltavalue,from_comp,from_refer_comp);return this.onpinchstart._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_onpinch=function(){return false;};_pComponent.on_fire_user_onpinch=function(){return false;};_pComponent.on_fire_sys_onpinch=function(elem,touchinfos,accvalue,deltavalue,firstrange,currange,from_comp,from_refer_comp){if(this instanceof nexacro.Form){if(this._is_popup_control){return true;}if(this.parent&&this.parent instanceof nexacro.ChildFrame){var zoom_amount=Math.abs(deltavalue)/(currange-firstrange);var zoom_dir=deltavalue>0?1: -1;var zoom_delta=(1.0+(zoom_dir*zoom_amount));var zoom_factor=this._getZoom()||100;zoom_factor=zoom_factor*zoom_delta;if(!nexacro._allow_default_pinchzoom){var current_screen=nexacro._getCurrentScreenID();if(current_screen){}}this._on_zoom(zoom_factor,this,from_refer_comp);return true;}}return false;};_pComponent.on_fire_onpinchend=function(elem,touchinfos,accvalue,deltavalue,from_comp,from_refer_comp){if(this.onpinchend&&this.onpinchend._has_handlers){var evt=new nexacro.PinchEventInfo(this,"onpinchend",touchinfos,accvalue,deltavalue,from_comp,from_refer_comp);return this.onpinchend._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_onpinchend=function(elem,touchinfos,accvalue,deltavalue,from_comp,from_refer_comp){if(this.onpinchend&&this.onpinchend._has_handlers){var evt=new nexacro.PinchEventInfo(this,"onpinchend",touchinfos,accvalue,deltavalue,from_comp,from_refer_comp);return this.onpinchend._fireUserEvent(this,evt);}return false;};_pComponent.on_fire_sys_onpinchend=function(elem,touchinfos,accvalue,deltavalue,from_comp,from_refer_comp){if(this.onpinchend&&this.onpinchend._has_handlers){var evt=new nexacro.PinchEventInfo(this,"onpinchend",touchinfos,accvalue,deltavalue,from_comp,from_refer_comp);return this.onpinchend._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_onflingstart=function(){return false;};_pComponent.on_fire_user_onflingstart=function(){return false;};_pComponent.on_fire_sys_onflingstart=function(elem,touch_manager,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp){if(touch_manager){return true;}return this.on_fire_sys_onfling(elem,touch_manager,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp);};_pComponent.on_fire_onfling=function(){return false;};_pComponent.on_fire_user_onfling=function(){return false;};_pComponent.on_fire_sys_onfling=function(elem,touch_manager,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue){var hscrollbar=this.hscrollbar;var vscrollbar=this.vscrollbar;var dragscrolltype=this.dragscrolltype;var scroll_comp=touch_manager._scroll_comp;var scroll_mode=touch_manager._scroll_mode;var is_scrollable=this._getScrollable();if(scroll_comp){if(scroll_comp!=this){return false;}}else{var can_hscroll=false;var can_vscroll=false;if(xdeltavalue!=0&&is_scrollable&&hscrollbar&&hscrollbar.enable&&(dragscrolltype!="none"&&dragscrolltype!="vert")){if(xdeltavalue<0){if(hscrollbar.pos<hscrollbar.max){can_hscroll=true;}}else{if(hscrollbar.pos>0){can_hscroll=true;}}}if(ydeltavalue!=0&&is_scrollable&&vscrollbar&&vscrollbar.enable&&(dragscrolltype!="none"&&dragscrolltype!="horz")){if(ydeltavalue<0){if(vscrollbar.pos<vscrollbar.max){can_vscroll=true;}}else{if(vscrollbar.pos>0){can_vscroll=true;}}}scroll_mode=0;if(this.dragscrolltype=="all"&&(can_hscroll||can_vscroll)){scroll_mode=3;}else if(can_hscroll&&can_vscroll){if(Math.abs(ydeltavalue)<Math.abs(xdeltavalue)){scroll_mode=2;}else{scroll_mode=1;}}else if(can_hscroll){scroll_mode=2;}else if(can_vscroll){scroll_mode=1;}if(this.selectscrollmode!=undefined){var select_mode;if(this.selectscrollmode=="default"){select_mode=(nexacro._isTouchInteraction||nexacro._SupportTouch)?"scroll":"select";}else{select_mode=this.selectscrollmode;}if(select_mode=="select"){scroll_mode=0;}}if(scroll_mode>0){touch_manager._scroll_end=false;touch_manager._scroll_comp=this;touch_manager._scroll_mode=scroll_mode;}else{return false;}}if(scroll_mode>0){if(scroll_mode==1&&scroll_mode!=3){xdeltavalue=0;}else if(scroll_mode==2&&scroll_mode!=3){ydeltavalue=0;}var old_vpos=this._vscroll_pos;var old_hpos=this._hscroll_pos;if(xdeltavalue!=0||ydeltavalue!=0){this._scrollBy( -xdeltavalue, -ydeltavalue,true,false,undefined,"fling");}var new_vpos=this._vscroll_pos;var new_hpos=this._hscroll_pos;if(this._is_bubble_fling_v===undefined&&this._is_bubble_fling_h===undefined){return !(old_vpos==new_vpos&&old_hpos==new_hpos);}if(xdeltavalue!=0&&ydeltavalue!=0){if(this._is_bubble_fling_v&&this._is_bubble_fling_h){return false;}}else if(xdeltavalue!=0){if(this._is_bubble_fling_h){return false;}}else if(ydeltavalue!=0){if(this._is_bubble_fling_v){return false;}}return true;}return false;};_pComponent.on_fire_onflingend=function(){return false;};_pComponent.on_fire_user_onflingend=function(){return false;};_pComponent.on_fire_sys_onflingend=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp){return this.on_fire_sys_onfling(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp);};_pComponent.on_fire_onlongpress=function(){return false;};_pComponent.on_fire_user_onlongpress=function(elem,touchinfos,from_comp,from_refer_comp){return false;};_pComponent.on_fire_sys_onlongpress=function(elem,touchinfos,from_comp,from_refer_comp){if(this.onlongpress&&this.onlongpress._has_handlers){var evt=new nexacro.LongPressEventInfo(this,"onlongpress",touchinfos,from_comp,from_refer_comp);return this.onlongpress._fireSysEvent(this,evt);}return false;};_pComponent.on_fire_onslidestart=function(){return false;};_pComponent.on_fire_user_onslidestart=function(){return false;};_pComponent.on_fire_sys_onslidestart=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp){return this.on_fire_sys_onslide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp,true);};_pComponent.on_fire_onslide=function(){return false;};_pComponent.on_fire_user_onslide=function(){return false;};_pComponent.on_fire_sys_onslide=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp,start){if(nexacro._cur_track_info){if(nexacro._cur_track_info.target._no_slide_scroll==true){return true;}}var scroll_comp=touch_manager._scroll_comp;var scroll_mode=touch_manager._scroll_mode;if(scroll_comp){if(scroll_comp!=this){return false;}}else{var hscrollbar=this.hscrollbar;var vscrollbar=this.vscrollbar;var dragscrolltype=this.dragscrolltype;var select_mode;var can_hscroll=false;var can_vscroll=false;if(xdeltavalue!=0&&hscrollbar&&hscrollbar.enable&&(dragscrolltype!="none"&&dragscrolltype!="vert")){if(xdeltavalue<0){if(hscrollbar.pos<hscrollbar.max){can_hscroll=true;}}else{if(hscrollbar.pos>0){can_hscroll=true;}}}if(this.stepselector){can_hscroll=true;}if(ydeltavalue!=0&&vscrollbar&&vscrollbar.enable&&(dragscrolltype!="none"&&dragscrolltype!="horz")){if(ydeltavalue<0){if(vscrollbar.pos<vscrollbar.max){can_vscroll=true;}}else{if(vscrollbar.pos>0){can_vscroll=true;}}}if(Math.abs(xaccvalue)<Math.abs(yaccvalue)&&(Math.abs(xdeltavalue)<=5)){can_hscroll=false;}else if(Math.abs(xaccvalue)>Math.abs(yaccvalue)&&(Math.abs(ydeltavalue)<=5)){can_vscroll=false;}if(dragscrolltype=="all"&&(can_hscroll||can_vscroll)){scroll_mode=3;}else if(can_hscroll&&can_vscroll){if(Math.abs(ydeltavalue)<Math.abs(xdeltavalue)){scroll_mode=2;}else{scroll_mode=1;}}else if(can_hscroll){scroll_mode=2;}else if(can_vscroll){scroll_mode=1;}else{scroll_mode= -1;}if(this.selectscrollmode!=undefined){if(this.selectscrollmode=="default"){select_mode=(nexacro._isTouchInteraction||nexacro._SupportTouch)?"scroll":"select";}else{select_mode=this.selectscrollmode;}if(select_mode=="select"){scroll_mode=0;}}if(scroll_mode>0){touch_manager._scroll_end=false;touch_manager._scroll_comp=this;touch_manager._scroll_mode=scroll_mode;}else{return false;}}if(this._getZoom){var zoom_factor=this._getZoom();if(zoom_factor!=100){xdeltavalue/=(zoom_factor/100.0);ydeltavalue/=(zoom_factor/100.0);}}var hscroll_pos=this._hscroll_pos;var vscroll_pos=this._vscroll_pos;if((scroll_mode==3||scroll_mode==2)&&xdeltavalue!=0){hscroll_pos-=xdeltavalue;}if((scroll_mode==3||scroll_mode==1)&&ydeltavalue!=0){vscroll_pos-=ydeltavalue;}var old_vpos=this._vscroll_pos;var old_hpos=this._hscroll_pos;this._scrollTo(hscroll_pos,vscroll_pos,true,false,undefined,"slide");var new_vpos=this._vscroll_pos;var new_hpos=this._hscroll_pos;if(start){this._is_bubble_fling_v=false;this._is_bubble_fling_h=false;if(xdeltavalue!=0&&ydeltavalue!=0){if(old_vpos==new_vpos&&old_hpos==new_hpos){this._is_bubble_fling_v=true;this._is_bubble_fling_h=true;}else if(old_hpos==new_hpos){this._is_bubble_fling_h=true;}else if(old_vpos==new_vpos){this._is_bubble_fling_v=true;}}else if(xdeltavalue!=0){if(old_hpos==new_hpos){this._is_bubble_fling_h=true;}}else if(ydeltavalue!=0){if(old_vpos==new_vpos){this._is_bubble_fling_v=true;}}}return true;};_pComponent.on_fire_onslideend=function(){return false;};_pComponent.on_fire_user_onslideend=function(){return false;};_pComponent.on_fire_sys_onslideend=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp){return this.on_fire_sys_onslide(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp,false);};_pComponent.on_fire_onzoom=function(){return false;};_pComponent.on_fire_user_onzoom=function(){return false;};_pComponent.on_fire_sys_onzoom=function(){return false;};_pComponent.on_fire_onorientationchange=function(orientation){if(this.onorientationchange&&this.onorientationchange._has_handlers){var evt=new nexacro.OrientationChangeEventInfo(this,"onorientationchange",orientation);return this.onorientationchange._fireEvent(this,evt);}return false;};_pComponent.on_fire_user_onaccessibilitygesture=function(){};_pComponent.on_fire_sys_onaccessibilitygesture=function(){};_pComponent._on_extendedcommand=function(eventid,eventtype,deviceid,data,event_bubbles){var ret=this._on_bubble_extendedcommand(eventid,eventtype,deviceid,data,event_bubbles,this,true);var bDefaultAction=(!this.onextendedcommand||(this.onextendedcommand&&!this.onextendedcommand.defaultprevented));if(bDefaultAction){var env=nexacro.getEnvironment();var module=env.getDeviceAdaptor(deviceid);if(module){module.on_event_default_action(eventid,eventtype,data);}ret=this._on_bubble_extendedcommand(eventid,eventtype,deviceid,data,event_bubbles,this,false);}return ret;};_pComponent.on_extendedcommand_basic_action=function(eventid,eventtype,data){return false;};_pComponent.on_extendedcommand_default_action=function(eventid,eventtype,data){return false;};_pComponent._on_bubble_extendedcommand=function(eventid,eventtype,deviceid,data,event_bubbles,refer_comp,bubble_scope){var p;if(event_bubbles===undefined){if(bubble_scope){event_bubbles=this.on_fire_user_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}else{event_bubbles=this.on_fire_sys_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}if(event_bubbles===false){event_bubbles=undefined;}if(bubble_scope){var bubble=this.on_extendedcommand_basic_action(eventid,eventtype,deviceid,data,refer_comp);if(bubble){return;}else if(bubble===false){event_bubbles=bubble;}}if((!this.onextendedcommand||(this.onextendedcommand&&!this.onextendedcommand.stoppropagation))&&(event_bubbles!==true)){p=this._getParentForm();if(!p){p=nexacro.getEnvironment();if(bubble_scope){return p.on_fire_user_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}else{return p.on_fire_sys_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}}else{return p._on_bubble_extendedcommand(eventid,eventtype,deviceid,data,false,refer_comp,bubble_scope);}}}else{if(bubble_scope){event_bubbles=this.on_fire_user_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}else{event_bubbles=this.on_fire_sys_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}if((!this.onextendedcommand||(this.onextendedcommand&&!this.onextendedcommand.stoppropagation))&&(event_bubbles!==true)){p=this._getParentForm();if(!p){p=nexacro.getEnvironment();if(bubble_scope){return p.on_fire_user_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}else{return p.on_fire_sys_onextendedcommand(eventid,eventtype,deviceid,data,refer_comp);}}else{return p._on_bubble_extendedcommand(eventid,eventtype,deviceid,data,false,refer_comp,bubble_scope);}}}};delete _pComponent;}
if(!nexacro.Dataset){nexacro._DatasetRuleFuncsSet={};nexacro._DatasetRuleFuncsSet["list"]=["_isInvalidValue","_compareValue","_getSumValue","_getSumExpr","_getRowsSumValue","_getRowsSumExpr","_getCaseSumValue","_getCaseSumExpr","_getAvgValue","_getAvgExpr","_getRowsAvgValue","_getRowsAvgExpr","_getCountValue","_getRowsCountValue"];nexacro._DatasetRuleFuncsSet["2.0"]={"_isInvalidValue":function(value,coltype){if(nexacro._isNull(value)||value===""){return false;}var str="";switch(coltype){case 1:break;case 2:case 3:if(!isFinite(value)||isNaN(value)){return true;}break;case 4:if(value instanceof nexacro.Decimal){if(value.isInfinity()||value.isNaN()){return true;}}else if(!isFinite(value)||isNaN(value)){return true;}break;case 5:case 6:case 7:if(value._isInvalidDate?value._isInvalidDate():isNaN(value.valueOf())){return true;}break;case 8:break;case 9:break;default:break;}return false;},"_compareValue":function(val1,val2,coltype){if(val1!=null&&val2!=null){if(coltype==4||coltype<0){if((val1 instanceof nexacro.Decimal)){if(val2 instanceof nexacro.Decimal){if(val1.isNaN()){if(val2.isNaN()){return 0;}return 1;}if(val2.isNaN()){return  -1;}return (val1.hi==val2.hi)?(val1.lo-val2.lo):(val1.hi-val2.hi);}else{if(val1.isNaN()){if(isNaN(val2)){return 0;}return 1;}if(isNaN(val2)||val2===""){return  -1;}var v2=( +val2);return (val1.hi==v2)?val1.lo:(val1.hi-v2);}}else if(val2 instanceof nexacro.Decimal){if(isNaN(val1)){if(val2.isNaN()){return 0;}return 1;}if(val2.isNaN()){return  -1;}if(val1===""){return 1;}var v1=( +val1);return (val2.hi==v1)? -val2.lo:(v1-val2.hi);}if(isNaN(val1)){if(isNaN(val2)){return 0;}return 1;}if(isNaN(val2)){return  -1;}if(val1===""){if(val2===""){return 0;}return 1;}if(val2===""){return  -1;}return (val1==val2)?0:(val1>val2?1: -1);}else if(coltype>=5&&coltype<=7){var compval1=val1.date?val1.date.valueOf():val1;var compval2=val2.date?val2.date.valueOf():val2;if(isNaN(compval1)&&isNaN(compval2)){return 0;}if(isNaN(compval1)){return 1;}if(isNaN(compval2)){return  -1;}if(compval1===""||compval2===""){if(compval1==compval2){return 0;}if(compval1===""){return 1;}return  -1;}return compval1-compval2;}else if(coltype>=2&&coltype<=3){if(isNaN(val1)){if(isNaN(val2)){return 0;}return 1;}if(isNaN(val2)){return  -1;}if(val1===""){if(val2===""){return 0;}return 1;}if(val2===""){return  -1;}if( +val1== +val2){return 0;}return ( +val1> +val2?1: -1);}else if(coltype==1){if(val1==val2){return 0;}if(val1===""){return  -1;}if(val2===""){return 1;}return (val1>val2?1: -1);}else{return (val1==val2)?0:(val1>val2?1: -1);}}else if((val1!=null)||val1===""){return  -1;}else if((val2!=null)||val2===""){return 1;}else{return 0;}},"_getSumValue":function(records,colidx,start,end,coltype){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}var sum;if(coltype==4){sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);return sum;}else{sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return (typeof sum=="number")?sum:sum|0;}},"_getSumExpr":function(records,exprFn,start,end,args){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=exprFn.call(this,i,i,null,this,records,rowRow,args);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(isdecimal){return sum;}return (typeof sum=="number")?sum:sum|0;},"_getRowsSumValue":function(records,rows,colidx,coltype){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}var sum;if(coltype==4){sum=new nexacro.Decimal();function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);return sum;}else{sum=0;function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);return (typeof sum=="number")?sum:sum|0;}},"_getRowsSumExpr":function(records,rows,exprFn,args){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);if(isdecimal){return sum.isNaN()?0:sum;}return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;},"_getCaseSumValue":function(records,cmpFn,colidx,start,end,coltype,args){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}if(coltype==4){var sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);return sum;}else{var sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return (typeof sum=="number")?sum:sum|0;}},"_getCaseSumExpr":function(records,cmpFn,valFn,start,end,cmpargs,valargs){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,cmpargs);if(cmp){var colval=valFn.call(this,i,i,null,this,records,rowRow,valargs);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(isdecimal){return sum;}return (typeof sum=="number")?sum:sum|0;},"_getAvgExpr":function(records,exprFn,start,end,excludeNaN,args){var cnt=0;var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var colval=exprFn.call(this,i,rowRow._rawidx,null,this,records,rowRow,args);if(!excludeNaN){cnt++ ;}else{if(colval){if(colval instanceof nexacro.Decimal){if(!colval.isNaN()){cnt++ ;}}else{cnt++ ;}}else{if(colval===0){cnt++ ;}}}if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(cnt==0||sum!=sum){return NaN;}if(isdecimal){sum.divDouble(cnt);return sum;}return sum/cnt;},"_getRowsAvgValue":function(records,rows,colidx,coltype,excludeNaN){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}if(coltype==4){var cnt=0;var sum=new nexacro.Decimal();function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(!excludeNaN){cnt++ ;}else{if(colval){if(colval instanceof nexacro.Decimal){if(!colval.isNaN()){cnt++ ;}}else{cnt++ ;}}else{if(colval===0){cnt++ ;}}}if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);if(cnt==0||sum.isNaN()){return NaN;}sum.divDouble(cnt);return sum;}else{var cnt=0;var sum=0;function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){sum+=( +colval);cnt++ ;}else{if(!excludeNaN||colval===0){cnt++ ;}}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);if(cnt==0||sum!=sum){return NaN;}return sum/cnt;}},"_getRowsAvgExpr":function(records,rows,exprFn,excludeNaN,args){var cnt=0;var sum=0;var isdecimal=false;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(!excludeNaN||(colval!=null&&!isNaN(colval)&&(colval!==""||colval===0))){cnt++ ;}if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);if(cnt==0||sum!=sum){return NaN;}if(isdecimal){sum.divDouble(cnt);return sum;}return (typeof sum=="number"&&!isNaN(sum))?sum/cnt:0;},"_getCountValue":function(records,colidx,start,end,coltype){var cnt=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){if(colidx<0){cnt++ ;}else{var colval=rowRow[colidx];if(colval){if(!((coltype==5||coltype==6||coltype==7)&&isNaN(colval.valueOf()))){cnt++ ;}}else{if((coltype==1&&colval==="")||colval===0){cnt++ ;}}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return cnt;},"_getRowsCountValue":function(records,rows,colidx,coltype){var cnt=0;function __loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){if(!((coltype==5||coltype==6||coltype==7)&&isNaN(colval.valueOf()))){cnt++ ;}}else{if((coltype==1&&colval==="")||colval===0){cnt++ ;}}}}nexacro.__forLoop(this,0,rows.length,__loopFn);return cnt;}};nexacro._getXMLTagData=function(xmlStr,parse_pos,startTag,endTag){var start_pos=xmlStr.indexOf(startTag,parse_pos);if(start_pos> -1){var data_pos=start_pos+startTag.length;var end_pos=xmlStr.indexOf(endTag,data_pos),str;if(end_pos> -1){str=xmlStr.substring(data_pos,end_pos);return [str,"",start_pos,end_pos+endTag.length];}else{str=xmlStr.substring(data_pos);return [str,"",start_pos,xmlStr.length];}}return null;};nexacro._getXMLTagData2=function(xmlStr,parse_pos,startTag,endTag){var start_pos=xmlStr.indexOf(startTag,parse_pos);if(start_pos> -1){var attr;var attr_pos=start_pos+startTag.length;var data_pos=xmlStr.indexOf(">",attr_pos);if(data_pos<0){return null;}else if(data_pos>0&&xmlStr.charAt(data_pos-1)=='/'){attr=xmlStr.substring(attr_pos,data_pos-1).trim();return ["",attr,start_pos,data_pos];}else{attr=xmlStr.substring(attr_pos,data_pos).trim();}data_pos++ ;var end_pos=xmlStr.indexOf(endTag,data_pos),str;if(end_pos> -1){str=xmlStr.substring(data_pos,end_pos);return [str,attr,start_pos,end_pos+endTag.length];}else{str=xmlStr.substring(data_pos);return [str,attr,start_pos,xmlStr.length];}}return null;};nexacro._getXMLTagData3=function(xmlStr,parse_pos,startTag,endTag){var start_pos=xmlStr.indexOf(startTag,parse_pos);if(start_pos> -1){var start_pos2=start_pos+startTag.length;var data_pos,end_pos,str;if(xmlStr.charAt(start_pos2)==" "){var attr;var attr_pos=start_pos2+1;data_pos=xmlStr.indexOf(">",attr_pos);if(data_pos<0){return null;}else if(data_pos>0&&xmlStr.charAt(data_pos-1)=='/'){attr=xmlStr.substring(attr_pos,data_pos-1).trim();return ["",attr,start_pos,data_pos];}else{attr=xmlStr.substring(attr_pos,data_pos).trim();}data_pos++ ;end_pos=xmlStr.indexOf(endTag,data_pos);if(end_pos> -1){str=xmlStr.substring(data_pos,end_pos);return [str,attr,start_pos,end_pos+endTag.length];}else{str=xmlStr.substring(data_pos);return [str,attr,start_pos,xmlStr.length];}}else if(xmlStr.charAt(start_pos2)=="/"){start_pos2=start_pos2+1;if(xmlStr.charAt(start_pos2)==">"){return ["","",start_pos,start_pos2];}}else{if(xmlStr.charAt(start_pos+1)==">"){start_pos=start_pos+1;}data_pos=start_pos+startTag.length;end_pos=xmlStr.indexOf(endTag,data_pos);if(end_pos> -1){str=xmlStr.substring(data_pos,end_pos);return [str,"",start_pos,end_pos+endTag.length];}else{str=xmlStr.substring(data_pos);return [str,"",start_pos,xmlStr.length];}}}return null;};nexacro._getXMLTagData4=function(xmlStr,parse_pos,startTag){var start_pos=xmlStr.indexOf(startTag,parse_pos);if(start_pos> -1){var attr_pos=start_pos+startTag.length;var end_pos=xmlStr.indexOf("/>",attr_pos),attr;if(end_pos> -1){attr=xmlStr.substring(attr_pos,end_pos).trim();return ["",attr,attr_pos,end_pos+2];}else{attr=xmlStr.substring(attr_pos).trim();return ["",attr,attr_pos,xmlStr.length];}}return null;};nexacro._getXMLAttributeID=function(attrStr){var attr_pos=attrStr.indexOf("id=\"");if(attr_pos> -1){var data_pos=attr_pos+4;var end_pos=attrStr.indexOf("\"",data_pos);if(end_pos> -1){return attrStr.substring(data_pos,end_pos);}return "";}return null;};nexacro._getXMLAttributeType=function(attrStr){var attr_pos=attrStr.indexOf("type=\"");if(attr_pos> -1){var data_pos=attr_pos+6;var end_pos=attrStr.indexOf("\"",data_pos);if(end_pos> -1){return attrStr.substring(data_pos,end_pos);}return "";}return null;};nexacro._getXMLAttributeData=function(attrStr,attrid){var attr_pos=attrStr.indexOf(attrid+"=\"");if(attr_pos> -1){var data_pos=attr_pos+attrid.length+2;var end_pos=attrStr.indexOf("\"",data_pos);if(end_pos> -1){return attrStr.substring(data_pos,end_pos);}return "";}return null;};nexacro._appendCommContext=function(context){if(!context){return;}nexacro._comm_contextlist.push(context);};nexacro._removeCommContext=function(context){if(!context){return;}var contexts=nexacro._comm_contextlist;var cnt=contexts.length;for(var i=0;i<cnt;i++ ){var cur_context=contexts[i];if(cur_context==context){for(var j=i;j<cnt-1;j++ ){contexts[j]=contexts[j+1];}contexts[cnt-1]=null;contexts.length=contexts.length-1;break;}}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=9){nexacro.__whileLoop=function(thisArg,_func){function __whileLoop_loopFn(thisArg){return _func.call(thisArg);}while(true){if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}if(__whileLoop_loopFn(thisArg)){break;}}};nexacro.__forLoop=function(thisArg,i,end,_func){function __forLoop_loopFn(thisArg){if(i<end){if(_func.call(thisArg,i)){return true;}i++ ;return false;}return true;}while(true){if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}if(__forLoop_loopFn(thisArg)){break;}}return i;};nexacro.__reverseForLoop=function(thisArg,i,end,_func){function __reverseForLoop_loopFn(thisArg){if(i>=end){if(_func.call(thisArg,i)){return true;}i-- ;return false;}return true;}while(true){if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}if(__reverseForLoop_loopFn(thisArg)){break;}}return i;};}else{nexacro.__whileLoop=function(thisArg,_func){while(true){if(_func.call(thisArg)){break;}}};nexacro.__forLoop=function(thisArg,i,end,_func){for(;i<end;i++ ){if(_func.call(thisArg,i)){return i;}}return i;};nexacro.__reverseForLoop=function(thisArg,i,end,_func){for(;i>=end;i-- ){if(_func.call(thisArg,i)){return i;}}return i;};}nexacro.Date=function(year,month,day,hours,minutes,seconds,milliseconds){if(nexacro._getDatatypeRule()=="2.0"){if(arguments.length>0&&year===undefined){this.date=new Date(undefined);return;}}var bsetfullyear=true;if(year==null){this._timecheck=true;this.date=new Date();bsetfullyear=false;}else if(month==null&&typeof year=="string"){this._timecheck=true;this.date=new Date(year);bsetfullyear=false;}else if(day==null){year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);this.date=new Date(year,month);}else if(hours==null){year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);day=(parseInt(day,10)|0);this.date=new Date(year,month,day);}else if(minutes==null){this._timecheck=true;year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);day=(parseInt(day,10)|0);hours=(parseInt(hours,10)|0);this.date=new Date(year,month,day,hours);}else if(seconds==null){this._timecheck=true;year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);day=(parseInt(day,10)|0);hours=(parseInt(hours,10)|0);minutes=(parseInt(minutes,10)|0);this.date=new Date(year,month,day,hours,minutes);}else if(milliseconds==null){this._timecheck=true;year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);day=(parseInt(day,10)|0);hours=(parseInt(hours,10)|0);minutes=(parseInt(minutes,10)|0);seconds=(parseInt(seconds,10)|0);this.date=new Date(year,month,day,hours,minutes,seconds);}else{this._timecheck=true;year=(parseInt(year,10)|0);month=(parseInt(month,10)|0);day=(parseInt(day,10)|0);hours=(parseInt(hours,10)|0);minutes=(parseInt(minutes,10)|0);seconds=(parseInt(seconds,10)|0);milliseconds=(parseInt(milliseconds,10)|0);this.date=new Date(year,month,day,hours,minutes,seconds,milliseconds);}if(bsetfullyear){if(year<=99&&year>=0){var base_date=new Date(0,0,1);var base_fullyear=base_date.getFullYear();var fullyear=this.date.getFullYear();var calc_year=fullyear-base_fullyear;this.date.setFullYear(calc_year);}}return;};var _pDate=nexacro._createPrototype(nexacro.Object,nexacro.Date);nexacro.Date.prototype=_pDate;_pDate._type_name="Date";_pDate._timecheck=false;_pDate._timeonly=false;_pDate.getFullYear=function(){return this.date.getFullYear();};_pDate.setFullYear=function(year,month,day){if(day!=null){this.date.setFullYear(year,month,day);}else if(month!=null){this.date.setFullYear(year,month);}else{this.date.setFullYear(year);}};_pDate.getYear=function(){return this.date.getYear();};_pDate.setYear=function(year,month,day){if(day!=null){this.date.setYear(year,month,day);}else if(month!=null){this.date.setYear(year,month);}else{this.date.setYear(year);}};_pDate.getMonth=function(){return this.date.getMonth();};_pDate.setMonth=function(month,day){if(day==null){this.date.setMonth(month);}else{this.date.setMonth(month,day);}};_pDate.getDate=function(){return this.date.getDate();};_pDate.setDate=function(day){this.date.setDate(day);};_pDate.getDay=function(){return this.date.getDay();};_pDate.getHours=function(){return this.date.getHours();};_pDate.setHours=function(hour,min,sec,millisec){if(millisec!=null){this.date.setHours(hour,min,sec,millisec);}else if(sec!=null){this.date.setHours(hour,min,sec);}else if(min!=null){this.date.setHours(hour,min);}else{this.date.setHours(hour);}};_pDate.getMinutes=function(){return this.date.getMinutes();};_pDate.setMinutes=function(min,sec,millisec){if(millisec!=null){this.date.setMinutes(min,sec,millisec);}else if(sec!=null){this.date.setMinutes(min,sec);}else{this.date.setMinutes(min);}};_pDate.getSeconds=function(){return this.date.getSeconds();};_pDate.setSeconds=function(sec,millisec){if(millisec!=null){this.date.setSeconds(sec,millisec);}else{this.date.setSeconds(sec);}};_pDate.getMilliseconds=function(){return this.date.getMilliseconds();};_pDate.setMilliseconds=function(millisec){this.date.setMilliseconds(millisec);};_pDate.getTime=function(){return this.date.getTime();};_pDate.setTime=function(millisec){this.date.setTime(millisec);};_pDate.getTimezoneOffset=function(){return this.date.getTimezoneOffset();};_pDate.getUTCFullYear=function(){return this.date.getUTCFullYear();};_pDate.setUTCFullYear=function(year,month,day){if(day!=null){this.date.setUTCFullYear(year,month,day);}else if(month!=null){this.date.setUTCFullYear(year,month);}else{this.date.setUTCFullYear(year);}};_pDate.getUTCMonth=function(){return this.date.getUTCMonth();};_pDate.setUTCMonth=function(month,day){if(day==null){this.date.setUTCMonth(month);}else{this.date.setUTCMonth(month,day);}};_pDate.getUTCDate=function(){return this.date.getUTCDate();};_pDate.setUTCDate=function(day){this.date.setUTCDate(day);};_pDate.getUTCDay=function(){return this.date.getUTCDay();};_pDate.getUTCHours=function(){return this.date.getUTCHours();};_pDate.setUTCHours=function(hour,min,sec,millisec){if(millisec!=null){this.date.setUTCHours(hour,min,sec,millisec);}else if(sec!=null){this.date.setUTCHours(hour,min,sec);}else if(min!=null){this.date.setUTCHours(hour,min);}else{this.date.setUTCHours(hour);}};_pDate.getUTCMinutes=function(){return this.date.getUTCMinutes();};_pDate.setUTCMinutes=function(min,sec,millisec){if(millisec!=null){this.date.setUTCMinutes(min,sec,millisec);}else if(sec!=null){this.date.setUTCMinutes(min,sec);}else{this.date.setUTCMinutes(min);}};_pDate.getUTCSeconds=function(){return this.date.getUTCSeconds();};_pDate.setUTCSeconds=function(sec,millisec){if(millisec==null){this.date.setUTCSeconds(sec);}else{this.date.setUTCSeconds(sec,millisec);}};_pDate.getUTCMilliseconds=function(){return this.date.getUTCMilliseconds();};_pDate.setUTCMilliseconds=function(millisec){this.date.setUTCMilliseconds(millisec);};_pDate.parse=function(datestring){return this.date.parse(datestring);};_pDate.UTC=function(year,month,day,hours,minutes,seconds,ms){return this.date.UTC(year,month,day,hours,minutes,seconds,ms);};_pDate.valueOf=function(){return this.toString();};_pDate.toGMTString=function(){return this.date.toGMTString();};_pDate.toDateString=function(){return this.date.toDateString();};_pDate.toTimeString=function(){return this.date.toTimeString();};_pDate.toLocaleDateString=function(locale){var locale_info=nexacro.Locale.getLocaleInfo(locale);var format_string=this.getLocaleFormatString(locale,locale_info.date_format);return format_string;};_pDate.toLocaleTimeString=function(locale){var locale_info=nexacro.Locale.getLocaleInfo(locale);var format_string=this.getLocaleFormatString(locale,locale_info.time_format);return format_string;};_pDate.toString=function(){if(!this.date||isNaN(this.date.valueOf())){return "Invalid Date";}var y=this.getFullYear();var m=this.getMonth()+1;var d=this.getDate();var h=this.getHours();var min=this.getMinutes();var sec=this.getSeconds();var millisec=this.getMilliseconds();y=y!==null?this.toZeroDigitString(y,4):"0000";m=m?this.toZeroDigitString(m,2):m;d=d!==null?this.toZeroDigitString(d,2):d;h=h!==null?this.toZeroDigitString(h,2):h;min=min!==null?this.toZeroDigitString(min,2):min;sec=sec!==null?this.toZeroDigitString(sec,2):sec;millisec=millisec!==null?this.toZeroDigitString(millisec,3):millisec;if(this._timecheck){if(this._timeonly){return ""+h+min+sec+millisec;}else{return ""+y+m+d+h+min+sec+millisec;}}else{return ""+y+m+d;}};_pDate.toLocaleString=function(locale){var locale_info=nexacro.Locale.getLocaleInfo(locale);var format_string=this.getLocaleFormatString(locale,locale_info.date_time_format);return format_string;};_pDate.toUTCString=function(){return this.date.toUTCString();};_pDate.toZeroDigitString=function(v,d){var zero="";v=v.toString();if(v.length<d){for(var i=0;i<d-v.length;i++ ){zero+="0";}}return zero+v;};_pDate.getLocaleFormatString=function(locale,format,bLTRMark){var locale_info=nexacro.Locale.getLocaleInfo(locale);var format_string=format;format_string=format_string.replace(/%r/g,locale_info.time_format_ampm);format_string=format_string.replace(/%x/g,locale_info.date_format);format_string=format_string.replace(/%X/g,locale_info.time_format);format_string=format_string.replace(/%T/g,"%H:%M:%S");if(bLTRMark===true){format_string=format_string.replace(/%Y/g,"\u200E%Y");format_string=format_string.replace(/%y/g,"\u200E%y");format_string=format_string.replace(/%d/g,"\u200E%d");format_string=format_string.replace(/%e/g,"\u200E%e");}format_string=format_string.replace(/%a/g,this.toLocaleWeekDayString(locale,"short"));format_string=format_string.replace(/%A/g,this.toLocaleWeekDayString(locale,"long"));format_string=format_string.replace(/%b/g,this.toLocaleMonthString(locale,"short"));format_string=format_string.replace(/%B/g,this.toLocaleMonthString(locale,"long"));format_string=format_string.replace(/%p/g,this.toLocaleAMPMString(locale));format_string=format_string.replace(/%y/g,this.getYear());format_string=format_string.replace(/%Y/g,this.getFullYear());format_string=format_string.replace(/%n/g,this.getMonth()+1);format_string=format_string.replace(/%m/g,nexacro._toString(this.getMonth()+1).padLeft(2,"0"));format_string=format_string.replace(/%d/g,nexacro._toString(this.getDate()).padLeft(2,"0"));format_string=format_string.replace(/%e/g,this.getDate());format_string=format_string.replace(/%H/g,this.getHours());format_string=format_string.replace(/%l/g,this.getHours());format_string=format_string.replace(/%I/g,this.getHours());format_string=format_string.replace(/%M/g,this.getMinutes());format_string=format_string.replace(/%S/g,this.getSeconds());format_string=format_string.replace(/\\a/g,"a");format_string=format_string.replace(/\\m/g,"m");format_string=format_string.replace(/\\d/g,"d");return format_string;};_pDate.toLocaleWeekDayString=function(locale,option){var locale_info=nexacro.Locale.getLocaleInfo(locale);var day=this.getDay();var weekday_string="";switch(option){case "short":{weekday_string=locale_info.weekday_names_short[day];}break;case "narrow":{weekday_string=locale_info.weekday_names_narrow[day];}break;case "long":default:{weekday_string=locale_info.weekday_names_long[day];}break;}return weekday_string;};_pDate.toLocaleMonthString=function(locale,option){var locale_info=nexacro.Locale.getLocaleInfo(locale);var month=this.getMonth();var month_string="";switch(option){case "short":{month_string=locale_info.month_names_short[month];}break;case "narrow":{month_string=locale_info.month_names_narrow[month];}break;case "long":default:{month_string=locale_info.month_names_long[month];}break;}return month_string;};_pDate.toLocaleAMPMString=function(locale){var locale_info=nexacro.Locale.getLocaleInfo(locale);var hours=this.getHours();var ampm_string="";if((hours%12)%2){ampm_string=locale_info.ampm[1];if(!ampm_string){ampm_string="PM";}}else{ampm_string=locale_info.ampm[0];if(!ampm_string){ampm_string="AM";}}return ampm_string;};_pDate.addYear=function(v){return this.date.setFullYear(this.date.getFullYear()+v);};_pDate.addMonth=function(v){return this.date.setMonth(this.date.getMonth()+v);};_pDate.addDate=function(v){return this.date.setDate(this.date.getDate()+v);};_pDate.addHours=function(v){return this.date.setHours(this.date.getHours()+v);};_pDate.addMinutes=function(v){return this.date.setMinutes(this.date.getMinutes()+v);};_pDate.addSeconds=function(v){return this.date.setSeconds(this.date.getSeconds()+v);};_pDate.addMilliseconds=function(v){return this.date.setMilliseconds(this.date.getMilliseconds()+v);};_pDate._isInvalidDate=function(){if(!this.date||isNaN(this.date.valueOf())){return true;}var year=this.date.getFullYear();if(year<0||year>9999){return true;}return false;};_pDate.clone=function(){var obj=new nexacro.Date();obj.date=new Date(this.date.getTime());obj._timecheck=this._timecheck;obj._timeonly=this._timeonly;return obj;};delete _pDate;nexacro.DataUtilsSet={"1.0":{_undefined_type:0,_string_type:1,_int_type:2,_float_type:3,_bicdecimal_type:4,_dete_type:5,_time_type:6,_datetime_type:7,_bolb_type:8,_variant_type:9,_typecodes:{"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,"string":1,"int":2,"float":3,"double":3,"decimal":3,"bigdecimal":4,"date":5,"time":6,"datetime":7,"blob":8,"variant":9},_typeint:{"string":1,"int":2,"float":3,"double":3,"decimal":4,"bigdecimal":4,"date":5,"time":6,"datetime":7,"blob":8,"variant":9},_typenames:["undefined","string","int","double","bigdecimal","date","time","datetime","blob","variant"],_default_sizes:[8,256,4,8,16,6,9,17,256,0],_default_values:[undefined,"",0,0.0,0.0,null,null,null,null,null],_boolean_values:{"false":false,"False":false,"FALSE":false,"no":false,"No":false,"NO":false,"n":false,"N":false,"off":false,"Off":false,"OFF":false,"0":false,"true":true,"True":true,"TRUE":true,"yes":true,"Yes":true,"YES":true,"y":true,"Y":true,"on":true,"On":true,"ON":true,"1":true},_init_date:new Date(0),_MAX_MILLISECONDS:100000000*24*60*60*1000,_MIN_MILLISECONDS: -100000000*24*60*60*1000,getDefaultValue:function(type){return nexacro.DataUtils._default_values[type.toLowerCase()];},getDefaultSize:function(type){return nexacro.DataUtils._default_sizes[type.toLowerCase()];},toTypeCode:function(type){var n=nexacro.DataUtils._typeint[type.toLowerCase()];return (n==null)?0:n;},toTypeName:function(type){var n=nexacro.DataUtils._typenames[type];return (n==null)?"undefined":n;},findDataType:function(value){if((typeof value)=="object"){return (value instanceof Date)?7:0;}var n=nexacro.DataUtils._typenames[value];return (n==null)?0:n;},isBinary:function(type){return (type==12);},toString:function(value){if(value==null){return value;}if(value instanceof Date){return nexacro.DataUtils._formatDateTime(value);}return value.toString();},toStringFromText:function(value){return value;},toStringFromXMLText:function(value){return nexacro._decodeXml(value);},toTextFromString:function(value){return value;},toXMLTextFromString:function(value){return nexacro._encodeXml(value);},toInt:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return (value|0);}},toIntFromText:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return (value|0);}},toTextFromInt:function(value){return (value==null)?undefined:value+"";},toBoolean:function(value){if(typeof value=="string"){value=this._boolean_values[value];}return (value?true:false);},toBooleanFromText:function(value){value=this._boolean_values[value];return (value?true:false);},toTextFromBoolean:function(value){return (value==null)?value:value+"";},toFloat:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toFloatFromText:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toTextFromFloat:function(value){return (value==null)?undefined:(value+"");},toNumber:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toNumberFromText:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toTextFromNumber:function(value){return (value==null)?undefined:(value+"");},toDecimal:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else if(value instanceof Date){return new nexacro.Decimal(value.getTime());}return (isFinite(value))?new nexacro.Decimal(value):"";},toDecimalFromText:function(value){if(value==null||isNaN( +value)){return undefined;}else if(value==""){return "";}else{return new nexacro.Decimal(value);}},toTextFromDecimal:function(value){return (value==null)?undefined:value.toString();},toDate:function(value){if(value==null){return undefined;}else if(value===""){return "";}if((typeof value)=="string"){return nexacro.DataUtils._parseDateTime(value,"date");}if(value instanceof Date){return nexacro.DataUtils._datetimeToDate(value);}if((typeof value)=="number"&&nexacro.DataUtils._isValidTime(value)){return nexacro.DataUtils._datetimeToDate(new Date(value));}if(value instanceof nexacro.Date){return value;}return null;},toDateFromText:function(value){if(value===undefined){return undefined;}return (value=="")?null:nexacro.DataUtils._parseDateTime(value,"date");},toTextFromDate:function(value){return (value==null)?null:nexacro.DataUtils._formatDate(value);},toTime:function(value){if(value==null||value==""){return null;}if((typeof value)=="string"){return nexacro.DataUtils._parseDateTime(value,"time");}if(value instanceof Date){return nexacro.DataUtils._datetimeToTime(value);}if((typeof value)=="number"&&nexacro.DataUtils._isValidTime(value)){return nexacro.DataUtils._datetimeToTime(new Date(value));}if(value instanceof nexacro.Date){return value;}return null;},toTimeFromText:function(value){if(value===undefined){return undefined;}return (value=="")?null:nexacro.DataUtils._parseDateTime(value,"time");},toTextFromTime:function(value){if(value===null){return null;}if(value===undefined){return undefined;}if(value==""){return "";}return nexacro.DataUtils._formatTime(value);},toDateTime:function(value){if(value==null){return undefined;}if(value===""){return "";}if((typeof value)=="string"){if(isNaN( +value)){return "";}return nexacro.DataUtils._parseDateTime(value,"datetime");}if(value instanceof Date){return value;}if((typeof value)=="number"&&nexacro.DataUtils._isValidTime(value)){return nexacro.DataUtils._datetimeToTime(new Date(value));}if(value instanceof nexacro.Date){return value;}return null;},toDateTimeFromText:function(value){if(value===undefined){return undefined;}return (value=="")?null:nexacro.DataUtils._parseDateTime(value,"datetime");},toTextFromDateTime:function(value){if(value===null){return null;}if(value===undefined){return undefined;}if(value==""){return "";}return nexacro.DataUtils._formatDateTime(value);},toBlob:function(value){return value;},toBlobFromText:function(value){return value;},toTextFromBlob:function(value){return value;},toVariant:function(value){return value;},toVariantFromText:function(value){return value;},toVariantFromXMLText:function(value){return nexacro._decodeXml(value);},toTextFromVariant:function(value){return (value==null)?value:(value+"");},toXMLTextFromVariant:function(value){return (value==null)?value:nexacro._encodeXml(value+"");},convert:function(value,type){switch(type){case 1:return this.toString(value);case 2:return this.toInt(value);case 3:return this.toFloat(value);case 4:return this.toDecimal(value);case 5:return this.toDate(value);case 6:return this.toTime(value);case 7:return this.toDateTime(value);case 8:return this.toBlob(value);default:return this.toVariant(value);}},_datetimeToDate:function(datetime){datetime.setHours(0);datetime.setMinutes(0);datetime.setSeconds(0);datetime.setMilliseconds(0);return datetime;},_datetimeToTime:function(datetime){return nexacro.DataUtils._toTime(datetime.getHours(),datetime.getMinutes(),datetime.getSeconds(),datetime.getMilliseconds());},_parseDateTime:function(str,cType){str=str.trim();var year,month,date,hour,minute,second,millisecond;switch(cType){case "datetime":year=str.substring(0,4);month=str.substring(4,6)||"01";date=str.substring(6,8)||"01";hour=str.substring(8,10);minute=str.substring(10,12);second=str.substring(12,14);millisecond=str.substring(14,17);return nexacro.DataUtils._toDateTime(year,month,date,hour,minute,second,millisecond);case "date":year=str.substring(0,4);month=str.substring(4,6)||"01";date=str.substring(6,8)||"01";return nexacro.DataUtils._toDate(year,month,date);case "time":hour=str.substring(0,2);minute=str.substring(2,4);second=str.substring(4,6);millisecond=str.substring(6,9);return nexacro.DataUtils._toTime(hour,minute,second,millisecond);}return "";},_formatDate:function(datetime){if(!datetime){return undefined;}return this._leftPad(datetime.getFullYear()*10000+(datetime.getMonth()+1)*100+datetime.getDate(),8);},_formatTime:function(datetime){if(!datetime){return undefined;}var millsecond="";var ms=datetime.getMilliseconds();millsecond=this._leftPad(ms,3);return this._leftPad(datetime.getHours()*10000+datetime.getMinutes()*100+datetime.getSeconds(),6)+millsecond;},_formatDateTime:function(datetime){if(!datetime){return undefined;}var yyyymmdd=this._leftPad(datetime.getFullYear()*10000+(datetime.getMonth()+1)*100+datetime.getDate(),8);var millsecond="";var ms=datetime.getMilliseconds();millsecond=this._leftPad(ms,3);var hhmiss=this._leftPad(datetime.getHours()*10000+datetime.getMinutes()*100+datetime.getSeconds(),6)+millsecond;return yyyymmdd+hhmiss;},_toDate:function(year,month,date){var val=new nexacro.Date(year,month-1,date);if(!isNaN(val.date)){var cyear=val.getFullYear();if(cyear>9999){val.setFullYear(9999);val.setMonth(11);val.setDate(31);}else if(cyear<0){val.setFullYear(0);val.setMonth(0);val.setDate(1);}return val;}else{return undefined;}return val;},_toTime:function(hour,minute,second,millisecond){var val=new nexacro.Date(0,0,1,hour,minute,second,millisecond);var _val= +val.date;if(_val!=_val){return undefined;}val._timeonly=true;return val;},_toDateTime:function(year,month,date,hour,minute,second,millisecond){var val=new nexacro.Date(year,month-1,date,hour,minute,second,millisecond);if(!isNaN(val.date)){var cyear=val.getFullYear();if(cyear>9999){val.setFullYear(9999);val.setMonth(11);val.setDate(31);}else if(cyear<0){val.setFullYear(0);val.setMonth(0);val.setDate(1);}return val;}else{return undefined;}},_isValidTime:function(time){return (time<=this._MAX_MILLISECONDS&&time>=this._MIN_MILLISECONDS);},_leftPad:function(value,count){value=value+"";var padcnt=count-value.length;switch(padcnt){case 0:return value;case 1:return "0"+value;case 2:return "00"+value;case 3:return "000"+value;case 4:return "0000"+value;case 5:return "00000"+value;}return value;}},"2.0":{_undefined_type:0,_string_type:1,_int_type:2,_float_type:3,_bicdecimal_type:4,_dete_type:5,_time_type:6,_datetime_type:7,_bolb_type:8,_variant_type:9,_typecodes:{"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,"string":1,"int":2,"float":3,"double":3,"decimal":3,"bigdecimal":4,"date":5,"time":6,"datetime":7,"blob":8,"variant":9},_typeint:{"string":1,"int":2,"float":3,"double":3,"decimal":4,"bigdecimal":4,"date":5,"time":6,"datetime":7,"blob":8,"variant":9},_typenames:["undefined","string","int","double","bigdecimal","date","time","datetime","blob","variant"],_default_sizes:[8,256,4,8,16,6,9,17,256,0],_default_values:[undefined,"",0,0.0,0.0,null,null,null,null,null],_boolean_values:{"false":false,"False":false,"FALSE":false,"no":false,"No":false,"NO":false,"n":false,"N":false,"off":false,"Off":false,"OFF":false,"0":false,"true":true,"True":true,"TRUE":true,"yes":true,"Yes":true,"YES":true,"y":true,"Y":true,"on":true,"On":true,"ON":true,"1":true},_init_date:new Date(0),_MAX_MILLISECONDS:100000000*24*60*60*1000,_MIN_MILLISECONDS: -100000000*24*60*60*1000,getDefaultValue:function(type){return nexacro.DataUtils._default_values[type.toLowerCase()];},getDefaultSize:function(type){return nexacro.DataUtils._default_sizes[type.toLowerCase()];},toTypeCode:function(type){var n=nexacro.DataUtils._typeint[type.toLowerCase()];return (n==null)?0:n;},toTypeName:function(type){var n=nexacro.DataUtils._typenames[type];return (n==null)?"undefined":n;},findDataType:function(value){if((typeof value)=="object"){return (value instanceof Date)?7:0;}var n=nexacro.DataUtils._typenames[value];return (n==null)?0:n;},isBinary:function(type){return (type==12);},toString:function(value){if(value==null){return undefined;}if(value instanceof Date){return nexacro.DataUtils._formatDateTime(value);}return value.toString();},toStringFromText:function(value){return value;},toStringFromXMLText:function(value){return nexacro._decodeXml(value);},toTextFromString:function(value){return value;},toXMLTextFromString:function(value){return nexacro._encodeXml(value);},toInt:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value==null){return undefined;}else if(value===""){return "";}else if(!isFinite( +value)){if(value==="Infinity"||value==="-Infinity"){return NaN;}else{return  +value;}}return value|0;},toIntFromText:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value==null){return undefined;}else if(value===""){return "";}else if(!isFinite( +value)){if(value==="Infinity"||value==="-Infinity"){return NaN;}else{return  +value;}}return (value|0);},toTextFromInt:function(value){return (value==null)?undefined:value+"";},toBoolean:function(value){if(typeof value=="string"){value=this._boolean_values[value];}return (value?true:false);},toBooleanFromText:function(value){value=this._boolean_values[value];return (value?true:false);},toTextFromBoolean:function(value){return (value==null)?value:value+"";},toFloat:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value==null){return undefined;}else if(value===""){return "";}else if(!isFinite( +value)){if(value==="Infinity"||value==="-Infinity"){return NaN;}else{return  +value;}}return ( +value);},toFloatFromText:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value==null){return undefined;}else if(value===""){return "";}return ( +value);},toTextFromFloat:function(value){return (value==null)?undefined:(value+"");},toNumber:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toNumberFromText:function(value){if(value==null){return undefined;}else if(value===""||isNaN( +value)){return "";}else{return ( +value);}},toTextFromNumber:function(value){return (value==null)?undefined:(value+"");},toDecimal:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value==null){return undefined;}else if(value===""){return "";}else if(isNaN( +value)){return NaN;}else if(!isFinite( +value)){if(value==="Infinity"||value==="-Infinity"){return NaN;}}else if(value instanceof Date){return new nexacro.Decimal(value.getTime());}return new nexacro.Decimal(value);},toDecimalFromText:function(value){if(value&&(typeof value=="string")){value=value.trim();}if(value===null||value===undefined){return undefined;}else if(value===""){return "";}else if(isNaN( +value)||!isFinite( +value)){value= +value;}return new nexacro.Decimal(value);},toTextFromDecimal:function(value){return (value==null)?undefined:value.toString();},toDate:function(value){var date;if(!nexacro.DataUtils._isValidPackedDate(value)){if((typeof value)!="number"){if(value===""||value===undefined){return value;}if(value===null){return undefined;}if(!/[^0-9]/.test(value)&&value.length<3){return new nexacro.Date(value,0,1);}else{date=new Date(value);}if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}}if((typeof value)=="number"){date=new Date(value);if(nexacro.DataUtils._isValidTime(value)){value=nexacro.DataUtils._datetimeToDate(date);return nexacro.DataUtils._toDate(value.getFullYear(),value.getMonth()+1,value.getDate());}else{if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}}if(value instanceof Date||value instanceof nexacro.Date){return nexacro.DataUtils._toDate(value.getFullYear(),value.getMonth()+1,value.getDate());}if((typeof value)=="string"){return nexacro.DataUtils._parseDateTime(value,"date");}return null;},toDateFromText:function(value){var date,ret;if(!nexacro.DataUtils._isValidPackedDate(value)){if(value===""||value===undefined){return value;}if(value===null){return undefined;}if(!/[^0-9]/.test(value)&&value.length<3){date=new nexacro.Date(value,0,1);}else{date=new Date(value);}if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{ret=nexacro.DataUtils._toDate(date.getFullYear(),date.getMonth()+1,date.getDate());}}else{ret=nexacro.DataUtils._parseDateTime(value,"date");}if(!ret||ret._isInvalidDate()){return new nexacro.Date(undefined);}return ret;},toTextFromDate:function(value){return (value==null)?null:nexacro.DataUtils._formatDate(value);},toTime:function(value){var date;if(!nexacro.DataUtils._isValidPackedTime(value)){if((typeof value)!="number"){if(value===""||value===undefined){return value;}if(value===null){return undefined;}date=new Date(value);if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}}if((typeof value)=="number"){date=new Date(value);if(nexacro.DataUtils._isValidTime(value)){value=nexacro.DataUtils._datetimeToTime(date);return nexacro.DataUtils._toTime(value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds());}else{if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}}if(value instanceof Date||value instanceof nexacro.Date){return nexacro.DataUtils._toTime(value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds());}if((typeof value)=="string"){return nexacro.DataUtils._parseDateTime(value,"time");}return null;},toTimeFromText:function(value){if(!nexacro.DataUtils._isValidPackedTime(value)){if(value===""||value===undefined){return value;}if(value===null){return undefined;}var date=new Date(value);if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{return nexacro.DataUtils._toTime(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());}}return (value=="")?null:nexacro.DataUtils._parseDateTime(value,"time");},toTextFromTime:function(value){if(value===null){return null;}if(value===undefined){return undefined;}if(value==""){return "";}return nexacro.DataUtils._formatTime(value);},toDateTime:function(value){var date;if(!nexacro.DataUtils._isValidPackedDateTime(value)){if((typeof value)!="number"){if(value===""||value===undefined){return value;}if(value===null){return undefined;}if(!/[^0-9]/.test(value)&&value.length<3){return new nexacro.Date(value,0,1,0,0,0);}else{date=new Date(value);}if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}}if((typeof value)=="number"){date=new Date(value);if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{value=date;}}if(value instanceof Date||value instanceof nexacro.Date){return nexacro.DataUtils._toDateTime(value.getFullYear(),value.getMonth()+1,value.getDate(),value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds());}if((typeof value)=="string"){return nexacro.DataUtils._parseDateTime(value,"datetime");}return null;},toDateTimeFromText:function(value){var date,ret;if(!nexacro.DataUtils._isValidPackedDateTime(value)){if(value===""||value===undefined){return value;}if(value===null){return undefined;}if(!/[^0-9]/.test(value)&&value.length<3){date=new nexacro.Date(value,0,1,0,0,0);}else{date=new Date(value);}if(isNaN(date.valueOf())){return new nexacro.Date(undefined);}else{ret=nexacro.DataUtils._toDateTime(date.getFullYear(),date.getMonth()+1,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());}}else{ret=nexacro.DataUtils._parseDateTime(value,"datetime");}if(!ret||ret._isInvalidDate()){return new nexacro.Date(undefined);}return ret;},toTextFromDateTime:function(value){if(value===null){return null;}if(value===undefined){return undefined;}if(value==""){return "";}return nexacro.DataUtils._formatDateTime(value);},toBlob:function(value){return value;},toBlobFromText:function(value){return value;},toTextFromBlob:function(value){return value;},toVariant:function(value){return value;},toVariantFromText:function(value){return value;},toVariantFromXMLText:function(value){return nexacro._decodeXml(value);},toTextFromVariant:function(value){return (value==null)?value:(value+"");},toXMLTextFromVariant:function(value){return (value==null)?value:nexacro._encodeXml(value+"");},convert:function(value,type){switch(type){case 1:return this.toString(value);case 2:return this.toInt(value);case 3:return this.toFloat(value);case 4:return this.toDecimal(value);case 5:return this.toDate(value);case 6:return this.toTime(value);case 7:return this.toDateTime(value);case 8:return this.toBlob(value);default:return this.toVariant(value);}return "";},_datetimeToDate:function(datetime){datetime.setHours(0);datetime.setMinutes(0);datetime.setSeconds(0);datetime.setMilliseconds(0);return datetime;},_datetimeToTime:function(datetime){return nexacro.DataUtils._toTime(datetime.getHours(),datetime.getMinutes(),datetime.getSeconds(),datetime.getMilliseconds());},_parseDateTime:function(str,cType){str=str.trim();var year,month,date,hour,minute,second,millisecond;var y_len=4;switch(cType){case "datetime":year=str.substring(0,y_len);month=str.substring(y_len,y_len+2)||"01";date=str.substring(y_len+2,y_len+4)||"01";hour=str.substring(y_len+4,y_len+6);minute=str.substring(y_len+6,y_len+8);second=str.substring(y_len+8,y_len+10);millisecond=str.substring(y_len+10,y_len+13);return nexacro.DataUtils._toDateTime(year,month,date,hour,minute,second,millisecond);case "date":year=str.substring(0,y_len);month=str.substring(y_len,y_len+2)||"01";date=str.substring(y_len+2,y_len+4)||"01";return nexacro.DataUtils._toDate(year,month,date);case "time":hour=str.substring(0,2);minute=str.substring(2,4);second=str.substring(4,6);millisecond=str.substring(6,9);return nexacro.DataUtils._toTime(hour,minute,second,millisecond);}return "";},_formatDate:function(datetime){if(!datetime){return undefined;}if(datetime._isInvalidDate?datetime._isInvalidDate():isNaN(datetime.valueOf())){return "Invalid Date";}return this._leftPad(datetime.getFullYear()*10000+(datetime.getMonth()+1)*100+datetime.getDate(),8);},_formatTime:function(datetime){if(!datetime){return undefined;}if(datetime._isInvalidDate?datetime._isInvalidDate():isNaN(datetime.valueOf())){return "Invalid Date";}var millsecond="";var ms=datetime.getMilliseconds();millsecond=this._leftPad(ms,3);return this._leftPad(datetime.getHours()*10000+datetime.getMinutes()*100+datetime.getSeconds(),6)+millsecond;},_formatDateTime:function(datetime){if(!datetime){return undefined;}if(datetime._isInvalidDate?datetime._isInvalidDate():isNaN(datetime.valueOf())){return "Invalid Date";}var yyyymmdd=this._leftPad(datetime.getFullYear()*10000+(datetime.getMonth()+1)*100+datetime.getDate(),8);var millsecond="";var ms=datetime.getMilliseconds();millsecond=this._leftPad(ms,3);var hhmiss=this._leftPad(datetime.getHours()*10000+datetime.getMinutes()*100+datetime.getSeconds(),6)+millsecond;return yyyymmdd+hhmiss;},_toDate:function(year,month,date){var val=new nexacro.Date(year,month-1,date);var _val= +val.date;return (_val!=_val)?undefined:val;},_toTime:function(hour,minute,second,millisecond){var val=new nexacro.Date(0,0,1,hour,minute,second,millisecond);var _val= +val.date;if(_val!=_val){return undefined;}val._timeonly=true;return val;},_toDateTime:function(year,month,date,hour,minute,second,millisecond){var val=new nexacro.Date(year,month-1,date,hour,minute,second,millisecond);var _val= +val.date;return (_val!=_val)?undefined:val;},_isValidTime:function(time){return (time<=this._MAX_MILLISECONDS&&time>=this._MIN_MILLISECONDS);},_isValidPackedDate:function(v){if(!v){return false;}if(v instanceof Date||v instanceof nexacro.Date){return true;}else{v=v.toString();if(v.length!=8){return false;}if(/[^0-9]/.test(v)){return false;}}return true;},_isValidPackedDateTime:function(v){if(!v){return false;}if(v instanceof Date||v instanceof nexacro.Date){return true;}else{v=v.toString();switch(v.length){case 17:case 14:break;default:return false;}if(/[^0-9]/.test(v)){return false;}}return true;},_isValidPackedTime:function(v){if(!v){return false;}if(v instanceof Date||v instanceof nexacro.Date){return true;}else{v=v.toString();if(v.length!=9&&v.length!=6){return false;}if(/[^0-9]/.test(v)){return false;}}return true;},_leftPad:function(value,count){value=value+"";var padcnt=count-value.length;switch(padcnt){case 0:return value;case 1:return "0"+value;case 2:return "00"+value;case 3:return "000"+value;case 4:return "0000"+value;case 5:return "00000"+value;}return value;}}};nexacro.DataUtils=nexacro.DataUtilsSet["1.0"];nexacro.ExprParser=function(){this.output=[];this._itemidx= -1;this._itempos=0;this._prevtype= -1;};var _pExprParser=nexacro._createPrototype(nexacro.Object,nexacro.ExprParser);nexacro.ExprParser.prototype=_pExprParser;_pExprParser.whitespace=nexacro._gen_arrmap("\n\r\t ".split(''));_pExprParser._replace_whitespace=nexacro._gen_arrmap("\\n,\\r,\\t,\\s".split(','));_pExprParser.wordchars=nexacro._gen_arrmap("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(''));_pExprParser.punct=nexacro._gen_arrmap("+ - * / % & ++ -- = += -= *= /= %= == === != <> !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(' '));_pExprParser.line_starters=nexacro._gen_arrmap("continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(','));_pExprParser.regexp_hanja=/[\u2E80-\u2EFF]|[\u31C0-\u31EF]|[\u3200-\u32FF]|[\u3400-\u4DBF]|[\u4E00-\u9FBF]|[\uF900-\uFAFF]/;_pExprParser.regexp_nipon=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u31F0-\u31FF]|[\uFF01-\uFFEF]|[\u3000-\u3002]|[\u300C]|[\u300D]|[\u309B]|[\u309C]|[\u2010-\u201F]/;_pExprParser.regexp_greek=/[\u0370-\u03FF]/;_pExprParser.regexp_hangul=/[ㄱ-ㅎ]|[ㅏ-ㅣ]|[가-힣]/;_pExprParser.regexp_num=/^[0-9]+[Ee]$/;_pExprParser.append=function(text,type){var output=this.output;var cnt=output.length;if(type==2&&this._prevtype==2){output[cnt-1].tok+=text;return;}if(type==10){if(this._prevtype==2){output[cnt-1].tok+=text;return;}else if(cnt==0){output[cnt]={type:2,tok:text,pos: -1};this._prevtype=1;return;}}else if(type==4){this._itempos=0;}else if(type==5&&this._prevtype==0){output[cnt-1].type=1;this._itempos=0;}var tok_item={type:type,tok:text,pos:this._itempos};output[cnt]=tok_item;if(type==10&&this._prevtype==0){if(this._itempos>=0){this._itempos++ ;}}else if(type==5||type==7||type==9){this._itempos=0;}else if(type==6||type==8){this._itempos= -1;}this._prevtype=type;};_pExprParser.tokenizeExpr=function(expr_str){this.input=expr_str;var output=this.output;var src=expr_str+"";var src_len=src.length;var cur_pos=0;if(cur_pos>=src_len){return 0;}while(true){if(cur_pos>=src_len){return output.length;}var c;var tok=src.charAt(cur_pos);cur_pos++ ;while(tok in this.whitespace){if(cur_pos>=src_len){return output.length;}tok=src.charAt(cur_pos);cur_pos++ ;}if(tok in this.wordchars||this.regexp_hangul.test(tok)||this.regexp_hanja.test(tok)||this.regexp_nipon.test(tok)||this.regexp_greek.test(tok)){if(cur_pos<src_len){c=src.charAt(cur_pos);while(c in this.wordchars||this.regexp_hangul.test(c)||this.regexp_hanja.test(c)||this.regexp_nipon.test(c)||this.regexp_greek.test(c)){tok+=c;cur_pos++ ;if(cur_pos>=src_len){break;}c=src.charAt(cur_pos);}}if(cur_pos<src_len&&this.regexp_num.test(tok)&&(c==='-'||c==='+')){cur_pos+=1;this.parse_pos=cur_pos;c=src.charAt(cur_pos);while(c in this.wordchars||this.regexp_hangul.test(c)||this.regexp_hanja.test(c)||this.regexp_nipon.test(c)||this.regexp_greek.test(c)){tok+=c;cur_pos++ ;if(cur_pos>=src_len){break;}c=src.charAt(cur_pos);}this.append(tok,3);continue;}if(tok=='in'){this.append(tok,4);}else{var fval=parseFloat(tok);if(isFinite(fval)){this.append(tok,2);}else{this.append(tok,0);}}continue;}if(tok=='('){this.append(tok,5);continue;}if(tok==')'){this.append(tok,6);continue;}if(tok=='['){this.append(tok,7);continue;}if(tok==']'){this.append(tok,8);continue;}if(tok==','){this.append(tok,9);continue;}if(tok=='{'){this.append(tok,10);continue;}if(tok=='}'){this.append(tok,11);continue;}if(tok==';'){this.append(tok,12);continue;}if(tok=="\\"){tok+=src.charAt(cur_pos);cur_pos++ ;this.append(tok,4);continue;}var esc;if(tok=="'"||tok=='"'){while(cur_pos<src_len){var sep=tok;esc=false;c=src.charAt(cur_pos);tok+=c;cur_pos++ ;while(esc||c!=sep){if(!esc){esc=(c=='\\');}else{esc=false;}c=src.charAt(cur_pos);tok+=c;cur_pos++ ;if(cur_pos>=src_len){break;}}if(c==sep){this.append(tok,3);break;}return  -1;}continue;}if(tok=='/'){c=src.charAt(cur_pos);if(c=='*'){tok+=c;cur_pos++ ;while(cur_pos<src_len){c=src.charAt(cur_pos);tok+=c;cur_pos++ ;if(c=='*'){if(cur_pos>=src_len){break;}c=src.charAt(cur_pos);tok+=c;cur_pos++ ;if(c=='/'){continue;}}}return  -1;}if(c=='/'){tok+=c;cur_pos++ ;c=src.charAt(cur_pos);while(cur_pos<src_len){c=src.charAt(cur_pos);if(c=="\r"||c=="\n"){cur_pos+=1;continue;}tok+=c;cur_pos++ ;}continue;}if([ -1,4,5,7,9].indexOf(output._prevtype)>=0){while(cur_pos<src_len){esc=false;var in_char_class=false;c=src.charAt(cur_pos);tok+=c;cur_pos++ ;while(esc||in_char_class||c!='/'){if(!esc){esc=(c=='\\');if(c=='['){in_char_class=true;}else if(c==']'){in_char_class=false;}}else{esc=false;}c=src.charAt(cur_pos);tok+=c;cur_pos++ ;}if(c!='/'){return  -1;}c=src.charAt(cur_pos);while(cur_pos<src_len&&(c in this.wordchars||this.regexp_hangul.test(tok)||this.regexp_hanja.test(tok)||this.regexp_nipon.test(tok)||this.regexp_greek.test(tok))){tok+=c;cur_pos++ ;c=src.charAt(cur_pos);}this.append(tok,3);break;}continue;}}if(tok in this.punct){while(cur_pos<src_len){c=src.charAt(cur_pos);if((tok+c) in this.punct){tok+=c;cur_pos++ ;}else{break;}}if(tok.charAt(0)=='='){if(tok!='=='&&tok!='==='){if(cur_pos>=src_len){return  -1;}}}this.append(tok,4);continue;}if(tok=='.'){this.append(tok,10);continue;}return  -1;}};_pExprParser.makeSubExpr=function(ds,from,to){var str="";var output=this.output;var colList=ds.colinfos;var i=from;while(i<to){var item=output[i];if(i!=0&&item.type==4){str+=item.tok;}else{if(item.type==0&&item.pos==0){var id=item.tok;if(id=="currow"||id=="rowidx"||id=="comp"||id=="dataset"||id=="_records_"||id=="_row_"||id=="_args_"){str+=id;}else if(id[0]=='$'){var argno= +(id.substring(1,id.length));if(argno>=0){str+="(_args_["+argno+"])";}else{str+=id;}}else{if(ds.getColIndex){var colidx=ds.getColIndex(id);if(colidx>=0){if(i<(to-1)&&output[i+1].type==7){var j;if(j<to&&j>(i+2)){var substr=this.makeSubExpr(ds,i+2,j);if(substr!=null){if(colidx>=colList.length){str+="(dataset._constVars["+(colidx-colList.length)+"].value)";}else{str+="(dataset.__getParsedRow(_records_["+substr+"])["+colidx+"])";}i=j;}else{return null;}}else{return null;}}else{if(colidx>=colList.length){str+="(dataset._constVars["+(colidx-colList.length)+"].value)";}else{str+="(_row_["+colidx+"])";}}}else if(id=="new"){str+=id+" ";}else{str+=id;}}else if(id=="new"){str+=id+" ";}else{str+=id;}}}else{str+=item.tok;}}i++ ;}return str;};_pExprParser.makeExpr=function(ds,expr_str){this.tokenizeExpr(expr_str);var str=this.makeSubExpr(ds,0,this.output.length);return str;};_pExprParser.makeSubEval=function(ds,from,to){var str="";var output=this.output;var i=from;to=to>output.length?output.length:to;while(i<to){var item=output[i];if(i!=0&&item.type==4){str+=' ';str+=item.tok;str+=' ';}else{var id;if(item.type==0&&item.pos==0){id=item.tok;if(id!="var"){str+=id;}}else if(item.type==1&&item.pos==0){id=item.tok;str+=id;}else{str+=item.tok;}}i++ ;}return str;};_pExprParser.makeEval=function(ds,expr_str){this.tokenizeExpr(expr_str);var str=this.makeSubEval(ds,0,this.output.length);return str;};_pExprParser._transferWhitespace=function(edit_val){var whitespace;var replace_whitespace;if(Object.keys){whitespace=Object.keys(this.whitespace);replace_whitespace=Object.keys(this._replace_whitespace);}else{whitespace=[];for(var key in this.whitespace){whitespace.push(key);}replace_whitespace=[];for(var key in this._replace_whitespace){replace_whitespace.push(key);}}var block;var full="";for(var i=0;i<edit_val.length;i++ ){block=edit_val.charAt(i);for(var j=0;j<whitespace.length;j++ ){if(block==whitespace[j]){full+=replace_whitespace[j];break;}}full+=block;}return full;};delete _pExprParser;nexacro.Variable=function(id,val,type,ntype,size,idx){this.id=id;this.value=val;this.type=type;this.ntype=ntype;this.size=size;this._index=idx;};var _pVariable=nexacro._createPrototype(nexacro.Object,nexacro.Variable);nexacro.Variable.prototype=_pVariable;_pVariable._type_name="Variable";_pVariable.id=null;_pVariable.type=null;_pVariable.ntype=0;_pVariable.size=null;_pVariable._index= -1;nexacro.VariableList=function(){nexacro.Collection.call(this);};var _pVariableList=nexacro._createPrototype(nexacro.Collection,nexacro.VariableList);nexacro.VariableList.prototype=_pVariableList;_pVariableList._type_name="VariableList";_pVariableList._updateID=function(idx,newID){var varinfo=this[idx];if(varinfo&&varinfo.id!=newID){varinfo.set_id(newID);return this.update_id(idx,newID);}return false;};_pVariableList.deleteItem=function(id){return this.delete_item(id);};_pVariableList.getValue=function(id){var item=this.get_item(id);return item?item.value:undefined;};delete _pVariableList;nexacro.DSColumnInfo=function(id,type,ntype,size,prop,sumtext,idx){this.id=id;this.name=id;this.type=type;this.ntype=ntype;this.size=size;this.prop=prop;this.sumtext=sumtext;this._index=idx;this._on_apply_columntype();};var _pDSColumnInfo=nexacro._createPrototype(nexacro.Object,nexacro.DSColumnInfo);nexacro.DSColumnInfo.prototype=_pDSColumnInfo;_pDSColumnInfo._type_name="DSColumnInfo";_pDSColumnInfo.set_size=function(v){v= +v;if(isFinite(v)&&this.size!=v){this.size=v|0;}};_pDSColumnInfo.set_type=function(v){if(this.type!=v){this.type=v;v=nexacro._toString(v).toLowerCase();this.ntype=nexacro.DataUtils._typeint[v];this._on_apply_columntype();}};_pDSColumnInfo.set_prop=function(v){v=nexacro._toString(v);if(this.prop!=v){this.prop=v;}};_pDSColumnInfo.set_sumtext=function(v){v=nexacro._toString(v);if(this.sumtext!=v){this.sumtext=v;}};_pDSColumnInfo._on_apply_columntype=function(){var ntype=this.ntype;switch(ntype){case 1:this._toText=nexacro.DataUtils.toTextFromString;this._fromText=nexacro.DataUtils.toStringFromText;this._fromVal=nexacro.DataUtils.toString;this._toXMLText=nexacro.DataUtils.toXMLTextFromString;this._fromXMLText=nexacro.DataUtils.toStringFromXMLText;break;case 2:this._toText=nexacro.DataUtils.toTextFromInt;this._fromText=nexacro.DataUtils.toIntFromText;this._fromVal=nexacro.DataUtils.toInt;this._toXMLText=nexacro.DataUtils.toTextFromInt;this._fromXMLText=nexacro.DataUtils.toIntFromText;break;case 3:this._toText=nexacro.DataUtils.toTextFromFloat;this._fromText=nexacro.DataUtils.toFloatFromText;this._fromVal=nexacro.DataUtils.toFloat;this._toXMLText=nexacro.DataUtils.toTextFromFloat;this._fromXMLText=nexacro.DataUtils.toFloatFromText;break;case 4:this._toText=nexacro.DataUtils.toTextFromDecimal;this._fromText=nexacro.DataUtils.toDecimalFromText;this._fromVal=nexacro.DataUtils.toDecimal;this._toXMLText=nexacro.DataUtils.toTextFromDecimal;this._fromXMLText=nexacro.DataUtils.toDecimalFromText;break;case 5:this._toText=nexacro.DataUtils.toTextFromDate;this._fromText=nexacro.DataUtils.toDateFromText;this._fromVal=nexacro.DataUtils.toDate;this._toXMLText=nexacro.DataUtils.toTextFromDate;this._fromXMLText=nexacro.DataUtils.toDateFromText;break;case 6:this._toText=nexacro.DataUtils.toTextFromTime;this._fromText=nexacro.DataUtils.toTimeFromText;this._fromVal=nexacro.DataUtils.toTime;this._toXMLText=nexacro.DataUtils.toTextFromTime;this._fromXMLText=nexacro.DataUtils.toTimeFromText;break;case 7:this._toText=nexacro.DataUtils.toTextFromDateTime;this._fromText=nexacro.DataUtils.toDateTimeFromText;this._fromVal=nexacro.DataUtils.toDateTime;this._toXMLText=nexacro.DataUtils.toTextFromDateTime;this._fromXMLText=nexacro.DataUtils.toDateTimeFromText;break;case 8:this._toText=nexacro.DataUtils.toTextFromBlob;this._fromText=nexacro.DataUtils.toBlobFromText;this._fromVal=nexacro.DataUtils.toBlob;this._toXMLText=nexacro.DataUtils.toTextFromBlob;this._fromXMLText=nexacro.DataUtils.toBlobFromText;break;default:this._toText=nexacro.DataUtils.toTextFromVariant;this._fromText=nexacro.DataUtils.toVariantFromText;this._fromVal=nexacro.DataUtils.toVariant;this._toXMLText=nexacro.DataUtils.toXMLTextFromVariant;this._fromXMLText=nexacro.DataUtils.toVariantFromXMLText;break;}};delete _pDSColumnInfo;nexacro.DSColumnInfoList=function(){nexacro.Collection.apply(this);};var _pDSColumnInfoList=nexacro._createPrototype(nexacro.Collection,nexacro.DSColumnInfoList);nexacro.DSColumnInfoList.prototype=_pDSColumnInfoList;_pDSColumnInfoList._type_name="DSColumnInfoList";_pDSColumnInfoList._updateID=function(idx,newID){var colinfo=this[idx];if(colinfo&&colinfo.id!=newID){colinfo.set_id(newID);return this.update_id(idx,newID);}return false;};_pDSColumnInfoList.deleteItem=function(id){return this.delete_item(id);};delete _pDSColumnInfoList;nexacro.DSColChangeEventInfo=function(obj,id,row,col,colidx,columnid,oldvalue,newvalue){this.id=this.eventid=id||"oncolumnchanged";this.fromobject=this.fromreferenceobject=obj;this.row=row;this.col=col;this.colidx=colidx;this.columnid=columnid;this.oldvalue=oldvalue;this.newvalue=newvalue;};var _pDSColChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DSColChangeEventInfo);nexacro.DSColChangeEventInfo.prototype=_pDSColChangeEventInfo;_pDSColChangeEventInfo._type_name="DSColChangeEventInfo";delete _pDSColChangeEventInfo;nexacro.DSLoadEventInfo=function(obj,id,errorcode,errormsg,reason,progressload){this.id=this.eventid=id||"onload";this.fromobject=this.fromreferenceobject=obj;this.errorcode=errorcode;this.errormsg=errormsg;this.reason=reason;this.progressload=(progressload===true)?true:false;};var _pDSLoadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DSLoadEventInfo);nexacro.DSLoadEventInfo.prototype=_pDSLoadEventInfo;_pDSLoadEventInfo._type_name="DSLoadEventInfo";delete _pDSLoadEventInfo;nexacro.DSRowPosChangeEventInfo=function(obj,id,oldRow,newRow,reason){this.id=this.eventid=id||"onrowposchanged";this.fromobject=this.fromreferenceobject=obj;this.newrow=newRow;this.oldrow=oldRow;this.reason=reason;};var _pDSRowPosChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DSRowPosChangeEventInfo);nexacro.DSRowPosChangeEventInfo.prototype=_pDSRowPosChangeEventInfo;_pDSRowPosChangeEventInfo._type_name="DSRowPosChangeEventInfo";delete _pDSRowPosChangeEventInfo;nexacro.DSRowsetChangeEventInfo=function(obj,id,row,count,reason){this.id=this.eventid=id||"onrowsetchanged";this.fromobject=this.fromreferenceobject=obj;this.row=row;this.count=count;this.reason=reason;};var _pDSRowsetChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DSRowsetChangeEventInfo);nexacro.DSRowsetChangeEventInfo.prototype=_pDSRowsetChangeEventInfo;_pDSRowsetChangeEventInfo._type_name="DSRowsetChangeEventInfo";delete _pDSRowsetChangeEventInfo;nexacro.Dataset=function(id,parent){this.id=this.name=id;if(parent){this.parent=parent;}this.colinfos=new nexacro.DSColumnInfoList();this._constVars=new nexacro.VariableList();this._rawRecords=[];this._viewRecords=this._rawRecords;this._deletedRecords=[];this._keycols=[];this._keycols.max_keylevel=0;this._exprFuncs={};this._initDatasetRuleFuncs(nexacro._getDatatypeRule());};var _pDataset=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Dataset);nexacro.Dataset.prototype=_pDataset;_pDataset._type_name="Dataset";_pDataset._isData=true;_pDataset.colcount=0;_pDataset.constcount=0;_pDataset.rowcount=0;_pDataset.rowposition= -1;_pDataset.loadstatus=false;_pDataset.enableevent=true;_pDataset.updatecontrol=true;_pDataset.keystring="";_pDataset.filterstr="";_pDataset.loadkeymode="keep";_pDataset.loadfiltermode="keep";_pDataset.reversesubsum=false;_pDataset.arguments="";_pDataset.firefirstcount=0;_pDataset.firenextcount=0;_pDataset.useclientlayout=false;_pDataset.lazyParsing=true;_pDataset.savenan=undefined;_pDataset.saveinfinity=undefined;_pDataset.saveinvaliddate=undefined;_pDataset.colinfos=null;_pDataset._event_list={"onload":1,"cancolumnchange":1,"oncolumnchanged":1,"onvaluechanged":1,"canrowposchange":1,"onrowposchanged":1,"onrowsetchanged":1,"onworkcompleted":1};_pDataset._defaultKeyStr="";_pDataset._defaultFilterStr="";_pDataset._eventstat=true;_pDataset._is_reftype=false;nexacro.Dataset.LOADMODE_KEEP=0;nexacro.Dataset.LOADMODE_RESET=1;nexacro.Dataset._LOADMODE_ENUM={"keep":0,"reset":1};_pDataset.on_created=function(){};_pDataset._isDataset=function(){return true;};_pDataset.destroy=function(){if(!this._is_reftype){if(this.colinfos){this.colinfos.clear();}if(this._constVars){this._constVars.clear();}}if(this._viewRecords!=this._rawRecords){this._viewRecords.length=0;}if(this._rawRecords.length){this._clearRecordData(this._rawRecords);}if(this._deletedRecords.length){this._clearRecordData(this._deletedRecords);}this._keycols.length=0;this._clearAllExprs();this.rowcount=0;this.on_fire_sys_onload(0,"",91);this._viewRecords=null;this._rawRecords=null;this._deletedRecords=null;this._event_list=null;this._exprFuncs=null;this._filterFn=null;this.__loadConvertFn=null;this.__lazyParseRecordFn=null;this._keycols=null;this.colinfos=null;this._constVars=null;if(this._keycol_levels){this._keycol_levels.length=null;this._keycol_levels=null;}if(this.parent){this.parent.removeChild(this.id);}this.parent=null;nexacro._EventSinkObject.prototype.destroy.call(this);};_pDataset.set_enableevent=function(v){v=nexacro._toBoolean(v);if(this.enableevent!=v){this.enableevent=v;this._eventstat=(v&&!this.loadstatus);if(v){this.on_fire_onrowsetchanged( -1, -1,41);if(this.onvaluechanged&&this.onvaluechanged._has_handlers){var evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}};_pDataset.set_updatecontrol=function(v){this.updatecontrol=nexacro._toBoolean(v);};_pDataset.set_rowposition=function(v){v= +v;if(isFinite(v)){this._setRowPosition(v,undefined,51);}return this.rowposition;};_pDataset.set_keystring=function(v){v=nexacro._toString(v);this.keystring=v;this.on_apply_keystring();return this.keystring;};_pDataset.on_apply_keystring=function(){this.updateSortGroup(this.keystring,true);};_pDataset.set_filterstr=function(v){var str=nexacro._toString(v);if(str!=this.filterstr){this.filter(str);}return this.filterstr;};_pDataset.set_loadkeymode=function(v){v=nexacro._toString(v).toLowerCase();if(this.loadkeymode!=v){this.loadkeymode=v;}};_pDataset.set_loadfiltermode=function(v){v=nexacro._toString(v).toLowerCase();if(this.loadfiltermode!=v){this.loadfiltermode=v;}};_pDataset.set_reversesubsum=function(v){v=nexacro._toBoolean(v);if(this.reversesubsum!=v){this.reversesubsum=v;this.on_apply_reversesubsum();}};_pDataset.on_apply_reversesubsum=function(){if(this.keystring){this.updateSortGroup(this.keystring);}};_pDataset.set_useclientlayout=function(v){v=nexacro._toBoolean(v);this.useclientlayout=v;};_pDataset.set_savenan=function(v){if(!v){return;}var type_enum=["exclude","include"];v=v.toString().toLowerCase();if(type_enum.indexOf(v)>=0){this.savenan=v;}};_pDataset.set_saveinfinity=function(v){if(!v){return;}var type_enum=["exclude","include"];v=v.toString().toLowerCase();if(type_enum.indexOf(v)>=0){this.saveinfinity=v;}};_pDataset.set_saveinvaliddate=function(v){if(!v){return;}var type_enum=["exclude","include"];v=v.toString().toLowerCase();if(type_enum.indexOf(v)>=0){this.saveinvaliddate=v;}};_pDataset.getSaveNan=function(v){var v=this.savenan;var env=nexacro.getEnvironment();return v?v:env.datasetsavenan;};_pDataset.getSaveInfinity=function(v){var v=this.saveinfinity;var env=nexacro.getEnvironment();return v?v:env.datasetsaveinfinity;};_pDataset.getSaveInvalidDate=function(v){var v=this.saveinvaliddate;var env=nexacro.getEnvironment();return v?v:env.datasetsaveinvaliddate;};_pDataset.on_fire_onload=function(errcode,errmsg,reason,progressload){if(errcode>=0){errcode=0;errmsg="SUCCESS";}var event=this.onload;if(event&&event._has_handlers){var evt=new nexacro.DSLoadEventInfo(this,"onload",errcode,errmsg,reason,progressload);event._fireEvent(this,evt);}};_pDataset.on_fire_sys_onload=function(errcode,errmsg,reason,progressload){var event=this.onload;if(event&&event._has_handlers){var evt=new nexacro.DSLoadEventInfo(this,"onload",errcode,errmsg,reason,progressload);event._fireSysEvent(this,evt);}};_pDataset.on_fire_onrowsetchanged=function(row,count,reason){var event=this.onrowsetchanged;if(event&&event._has_handlers){var evt=new nexacro.DSRowsetChangeEventInfo(this,"onrowsetchanged",row,count,reason);event._fireEvent(this,evt);}};_pDataset.on_fire_canrowposchange=function(evt){var event=this.canrowposchange;if(event&&event._has_handlers){evt.eventid="canrowposchange";var ret=event._fireCheckEvent(this,evt);if(ret===undefined){ret=true;}ret=nexacro._toBoolean(ret);if(ret){this.rowposition=evt.newrow;}return ret;}return true;};_pDataset.on_fire_onrowposchanged=function(evt){var event=this.onrowposchanged;if(event&&event._has_handlers){evt.eventid="onrowposchanged";event._fireEvent(this,evt);}};_pDataset.on_fire_cancolumnchange=function(evt){var event=this.cancolumnchange;if(event&&event._has_handlers){if(!event._firestat){evt.eventid="cancolumnchange";event._firestat=true;var ret=event._fireCheckEvent(this,evt);event._firestat=false;return (ret==undefined)?true:ret;}else if(event._firestat){return false;}else{return false;}}return true;};_pDataset.on_fire_oncolumnchanged=function(evt){var event=this.oncolumnchanged;if(event&&event._has_handlers){if(!event._firestat){event._firestat=true;evt.eventid="oncolumnchanged";event._fireEvent(this,evt);event._firestat=false;}else{evt.eventid="oncolumnchanged";event._fireSysEvent(this,evt);}}};_pDataset.on_fire_onvaluechanged=function(evt){var event=this.onvaluechanged;if(event&&event._has_handlers){evt.eventid="onvaluechanged";event._fireEvent(this,evt);}};_pDataset.clear=function(){var oldpos=this.rowposition;var cnt=this.rowcount;this._clearAll();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,24);if(oldpos>=0&&oldpos==this.rowposition){this._forcesetRowPosition( -1,51);}}else{this.rowposition= -1;}return cnt;};_pDataset.getColCount=function(){return this.colcount;};_pDataset.getConstCount=function(){return this._constVars.length;};_pDataset.getRowCount=function(){return this._viewRecords.length;};_pDataset.getRowCountNF=function(){return this._rawRecords.length;};_pDataset.getDeletedRowCount=function(){return this._deletedRecords.length;};_pDataset.getDeletedRowset=function(){return this._deletedRecords;};_pDataset.setContents=function(str){return this._setContents(str);};_pDataset._setLayout=function(ds){this.colinfos=ds.colinfos;this._constVars=ds._constVars;};_pDataset._setRawData=function(rawRecords,deletedData){this._rawRecords=rawRecords;this._viewRecords=this._rawRecords;this._deletedRecords=deletedData;};_pDataset._createExprFunc=function(expr_str){var parser=new nexacro.ExprParser();var conv_expr=parser.makeExpr(this,expr_str);if(conv_expr==null){return nexacro._NullFn;}var exprfn=nexacro._createInlineFunc(conv_expr,["currow","rowidx","comp","dataset","_records_","_row_","_args_"]);return exprfn;};_pDataset._getColumnSize=function(col){var colidx=( +col);var colinfo,constVar;if(colidx!=colidx){colinfo=this.colinfos[col];if(colinfo){return colinfo.size;}constVar=this._constVars[col];if(constVar){return constVar.size;}if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){return colinfo.size;}}else{if(colidx>=0&&colidx<this.colinfos.length){return this.colinfos[colidx].size;}if(colidx>=0&&colidx<=this.colcount){return this._constVars[colidx-this.colinfos.length].size;}else{colinfo=this.colinfos[col];if(colinfo){return colinfo.size;}constVar=this._constVars[col];if(constVar){return constVar.size;}}}return undefined;};_pDataset._getColumnType=function(col){var colidx=( +col);var colinfo,constVar;if(colidx!=colidx){colinfo=this.colinfos[col];if(colinfo){return colinfo.ntype;}constVar=this._constVars[col];if(constVar){return constVar.ntype;}if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){return colinfo.ntype;}}else{if(colidx>=0&&colidx<this.colinfos.length){return this.colinfos[colidx].ntype;}if(colidx>=0&&colidx<=this.colcount){return this._constVars[colidx-this.colinfos.length].ntype;}else{colinfo=this.colinfos[col];if(colinfo){return colinfo.ntype;}constVar=this._constVars[col];if(constVar){return constVar.ntype;}}}return undefined;};_pDataset._isConstColumn=function(col){var colidx=( +col);if(colidx!=colidx){return (this._constVars[col])?true:false;}else{var idx=colidx-this.colinfos.length;return (idx>=0&&idx<this._constVars.length)?true:false;}};_pDataset._addConstColumn=function(id,value,type,size){if(id in this.colinfos){return  -1;}var ntype;if(type){ntype=nexacro.DataUtils._typeint[nexacro._toString(type).toLowerCase()];}else{type=(typeof value);if(type=="number"){ntype=2;}else{ntype=nexacro.DataUtils._typecodes[type];}}if(ntype==null){type="variant";ntype=9;}var prev_var=this._constVars[id];if(prev_var){if(value!=prev_var.value){prev_var.value=nexacro.DataUtils.convert(value,ntype);return this._constVars.indexOf(id);}else{return  -1;}}this.constcount++ ;this.colcount++ ;return this._constVars.add(id,new nexacro.Variable(id,value,type,ntype,size,this._constVars.length));};_pDataset.addConstColumn=function(id,value,type,size){var idx=this._addConstColumn(id,value,type,size);if(idx>=0&&this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);}return idx;};_pDataset._addColumn=function(id,type,size,prop,text){if((id in this.colinfos)||(id in this._constVars)){return  -1;}size=size|0;var ntype=undefined;if(type){ntype=nexacro.DataUtils._typeint[nexacro._toString(type).toLowerCase()];}if(ntype==null){ntype=1;type="STRING";}if(size==0){size=nexacro.DataUtils._default_sizes[ntype];}var idx=this.colinfos.length;var colinfo=new nexacro.DSColumnInfo(id,type,ntype,size,prop,text,idx);this.colcount++ ;return this.colinfos.add(id,colinfo);};_pDataset.addColumn=function(id,type,size){var idx=this._addColumn(id,type,size);if(idx>=0){this._clearAllExprs();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);}}return idx;};_pDataset._addColumnInfo=function(id,colinfo){if((id in this.colinfos)||(id in this._constVars)){return  -1;}var newcolinfo=new nexacro.DSColumnInfo(id,colinfo.type,colinfo.ntype,colinfo.size,colinfo.prop,colinfo.sumtext,this.colinfos.length);this.colcount++ ;return this.colinfos.add(id,newcolinfo);};_pDataset.addColumnInfo=function(id,colinfo){var idx=this._addColumnInfo(id,colinfo);if(idx>=0){this._clearAllExprs();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);}}return idx;};_pDataset._appendColList=function(colList){if(colList._type_name=="DSColumnInfoList"){var cnt=0;function __appendColList_loopFn(i){var colinfo=colList[i];var id=colinfo.id;if((id in this.colinfos)||(id in this._constVars)){return;}var newcolinfo=new nexacro.DSColumnInfo(id,colinfo.type,colinfo.ntype,colinfo.size,colinfo.prop,colinfo.sumtext,this.colinfos.length);this.colinfos.add(id,newcolinfo);cnt++ ;}nexacro.__forLoop(this,0,colList.length,__appendColList_loopFn);if(cnt>0){this.colcount+=cnt;}return cnt;}return 0;};_pDataset.appendColList=function(collist){var cnt=this._appendColList(collist);if(cnt>0){this._clearAllExprs();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);}}return cnt;};_pDataset._deleteColumn_Row=function(idx,Records){var rowcount=Records.length;function __deleteColumm_Row_loopFn(i){var rowRow=this.__getParsedRow(Records[i]);if(rowRow){rowRow.splice(idx,1);if(rowRow._orgrow){rowRow._orgrow.splice(idx,1);}}}nexacro.__forLoop(this,0,rowcount,__deleteColumm_Row_loopFn);};_pDataset._deleteColumn=function(id){if(this.updatecontrol){return false;}var idx=this.getColIndex(id);if(idx<0){return false;}var colList=this.colinfos;if(idx>=colList.length){var constList=this._constVars;idx=idx-colList.length;if(constList.delete_item(idx)>=0){function __adjustConstIdx_loopFn(i){constList[i]._index=i;}nexacro.__forLoop(this,idx,constList.length,__adjustConstIdx_loopFn);this.constcount-- ;this.colcount-- ;}}else{var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;if(rawRecords==viewRecords){this._deleteColumn_Row(idx,rawRecords);}else{this._deleteColumn_Row(idx,viewRecords);this._deleteColumn_Row(idx,rawRecords);}if(colList.delete_item(idx)>=0){function __adjustColIdx_loopFn(i){colList[i]._index=i;}nexacro.__forLoop(this,idx,colList.length,__adjustColIdx_loopFn);this.colcount-- ;}}return true;};_pDataset.deleteColumn=function(id){var deleted=this._deleteColumn(id);if(deleted){this._clearAllExprs();if(this.colinfos.length==0){this._clearData();}var colcnt=this._constVars.length+this.colinfos.length;var oldpos=this.rowposition;if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);if(colcnt==0&&oldpos>=0){this._forcesetRowPosition( -1,51);}}else if(colcnt==0&&oldpos>=0){this.rowposition= -1;}}return deleted;};_pDataset.getColID=function(idx){idx=idx|0;var colList=this.colinfos;if(idx>=colList.length){return this._constVars.get_id(idx-colList.length);}else{return colList.get_id(idx);}};_pDataset.getColIndex=function(id){var colList=this.colinfos;var constList=this._constVars;var colCnt=colList.length;var constCnt=constList.length;if(colCnt<=0&&constCnt<=0){return  -1;}var colinfo=colList[id];if(colinfo){return colinfo._index;}var idx=( +id);if(idx!=id){var constidx=constList.indexOf(id);return constidx>=0?constidx+colCnt: -1;}return (idx>=0&&idx<constCnt+colCnt)?idx: -1;};_pDataset.getConstColID=function(idx){idx=idx|0;return this._constVars.get_id(idx);};_pDataset.getConstColIndex=function(id){var constVar=this._constVars[id];return (constVar)?constVar._index: -1;};_pDataset.getColumnInfo=function(idx){if(this.colinfos[idx]){return this.colinfos[idx];}var colidx= +(idx);if(colidx!=idx){if(typeof (idx)=="string"){return undefined;}return this.colinfos[0];}return undefined;};_pDataset.updateColID=function(idx,newID){var colList=this.colinfos;var constList=this._constVars;var updated;var evt;idx=this.getColIndex(idx);if(idx<0){return  -1;}else if(idx<colList.length){updated=colList._updateID(idx,newID);if(updated){this._clearAllExprs();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}return idx;}}else{updated=constList._updateID(idx-colList.length,newID);if(updated){this._clearAllExprs();if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}return idx;}}return  -1;};_pDataset.updateConstColID=function(idx,newID){var constList=this._constVars;var conatVar=constList[idx];if(conatVar){var updated=constList._updateID(conatVar._index,newID);if(updated){if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,34);var evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}return conatVar._index;}}return  -1;};_pDataset._copyRowData=function(destRow,srcRow){var colList=this.colinfos;function __copyRowData_loopFn(i){destRow[i]=srcRow[i];}var cnt=srcRow.length<colList.length?srcRow.length:colList.length;nexacro.__forLoop(this,0,cnt,__copyRowData_loopFn);};_pDataset._copyConvRowData=function(destRow,srcRow){var colList=this.colinfos;function __copyConvRowData_loopFn(i){var value=colList[i]._fromVal(srcRow[i]);destRow[i]=value;}var cnt=srcRow.length<colList.length?srcRow.length:colList.length;nexacro.__forLoop(this,0,cnt,__copyConvRowData_loopFn);};_pDataset._copyTextData=function(destRow,srcRow){var colList=this.colinfos;function __copyTextRowData_loopFn(i){var value=colList[i]._fromText(srcRow[i]);destRow[i]=value;}var cnt=srcRow.length<colList.length?srcRow.length:colList.length;nexacro.__forLoop(this,0,cnt,__copyTextRowData_loopFn);};_pDataset.__getParsedRow=function(rowRow){if(rowRow&&rowRow._data){this.__lazyParseRecordFn(rowRow,this.__loadConvertFn);}return rowRow;};_pDataset._makeIndexMap=function(srcds,strcolinfo){if(srcds==null){return false;}if(srcds._isDataset&&!srcds._isDataset()){return false;}var colList=this.colinfos;var srcList=srcds.colinfos;var idx_map=[];var dst_idx;var src_idx;if(strcolinfo!=null&&strcolinfo.length>0){var colArr=strcolinfo.split(',');function __makeIndexMap_fromStr_loopFn(i){var colids=colArr[i].split('=');if(colids.length>1){dst_idx=colList.indexOf(colids[0].trim());src_idx=srcList.indexOf(colids[1].trim());if(dst_idx>=0&&src_idx>=0){idx_map[idx_map.length]={dest:dst_idx,src:src_idx};}}else{var colid=colids[0].trim();dst_idx=colList.indexOf(colid);src_idx=srcList.indexOf(colid);if(dst_idx>=0&&src_idx>=0){idx_map[idx_map.length]={dest:dst_idx,src:src_idx};}}}nexacro.__forLoop(this,0,colArr.length,__makeIndexMap_fromStr_loopFn);}else{function __makeIndexMap_fromCol_loopFn(i){var dst_idx=colList.indexOf(srcList[i].id);if(dst_idx>=0){idx_map[idx_map.length]={dest:dst_idx,src:i};}}nexacro.__forLoop(this,0,srcList.length,__makeIndexMap_fromCol_loopFn);}return (idx_map.length>0)?idx_map:null;};_pDataset._copyMappingRowData=function(destRow,srcRow,idx_map){if(idx_map){var colList=this.colinfos;function __copyMappingRowData_loopFn(i){var idxmap=idx_map[i];var dst_idx=idxmap.dest;var value=colList[dst_idx]._fromVal(srcRow[idxmap.src]);destRow[dst_idx]=value;}nexacro.__forLoop(this,0,idx_map.length,__copyMappingRowData_loopFn);}};_pDataset._copyMappingRowDataRowType=function(destRow,srcRow,idx_map,viewrow){if(idx_map){var colList=this.colinfos;var rowtype=1;if(this.updatecontrol){rowtype=destRow._rtype;if(destRow._rtype==1){var orgRow=[];this._copyRowData(orgRow,destRow);destRow._orgrow=orgRow;rowtype=4;}}function __copyMappingRowData_loopFn(i){var idxmap=idx_map[i];var dst_idx=idxmap.dest;var value=colList[dst_idx]._fromVal(srcRow[idxmap.src]);destRow[dst_idx]=value;}nexacro.__forLoop(this,0,idx_map.length,__copyMappingRowData_loopFn);if(this.updatecontrol){if(destRow._rtype==4){if(destRow._orgrow){var _rtypechange=this._isEqualRow(destRow._orgrow,destRow, -1);if(_rtypechange){destRow._orgrow.length=0;delete destRow._orgrow;rowtype=1;}}}}destRow._rtype=rowtype;if(viewrow>=0){this._updateGroupRowData(viewrow);}}};_pDataset._adjustRawIdx=function(start,end){var rawRecords=this._rawRecords;if(start>=0&&end>start){function __adjustRawIdx_loopFn(i){rawRecords[i]._rawidx=i;}end=end>rawRecords.length?rawRecords.length:end;nexacro.__forLoop(this,start,end,__adjustRawIdx_loopFn);}};_pDataset._removeRawRow=function(rowRow){var rawRecords=this._rawRecords;var idx=rowRow._rawidx;if(idx>=0){rawRecords.splice(idx,1);this._adjustRawIdx(idx,rawRecords.length);}};_pDataset._removeEmptyRawRows=function(){var rawRecords=this._rawRecords;var firstidx= -1;function __removeEmptyRawRows_loopFn(i){var rowRow=rawRecords[i];if(rowRow._rtype==0){rowRow.length=0;rawRecords.splice(i,1);firstidx=i;}}nexacro.__reverseForLoop(this,rawRecords.length-1,0,__removeEmptyRawRows_loopFn);if(firstidx>=0){this._adjustRawIdx(firstidx,rawRecords.length);}};_pDataset._removeDeleteRawRows=function(){var rawRecords=this._rawRecords;var firstidx= -1;function __removeDeleteRawRows_loopFn(i){var rowRow=rawRecords[i];if(rowRow._rtype==8){rawRecords.splice(i,1);firstidx=i;}}nexacro.__reverseForLoop(this,rawRecords.length-1,0,__removeDeleteRawRows_loopFn);if(firstidx>=0){this._adjustRawIdx(firstidx,rawRecords.length);}};_pDataset._clearRecordData=function(records){function __clearRecordData_loopFn(i){var rowRow=records[i];if(rowRow._orgrow){rowRow._orgrow.splice(0,rowRow._orgrow.length);rowRow._orgrow=null;}if(rowRow._data){rowRow._data=null;}if(rowRow._orgdata){rowRow._orgdata=null;}rowRow.splice(0,rowRow.length);rowRow.length=0;}nexacro.__forLoop(this,0,records.length,__clearRecordData_loopFn);records.splice(0,records.length);records.length=0;};_pDataset._initDatasetRuleFuncs=function(v){var funcsets=nexacro._DatasetRuleFuncsSet[v];if(!funcsets){return;}var funclist=nexacro._DatasetRuleFuncsSet.list;var len=funclist.length;var name,func;for(var i=0;i<len;i++ ){name=funclist[i];func=funcsets[name];if(func){this[name]=func;}}};_pDataset._compareValue=function(val1,val2,coltype){if(val1!=null&&val2!=null){if(coltype==4||coltype<0){if((val1 instanceof nexacro.Decimal)){if(val2 instanceof nexacro.Decimal){return (val1.hi==val2.hi)?(val1.lo-val2.lo):(val1.hi-val2.hi);}else{var v2=( +val2);return (val1.hi==v2)?val1.lo:(val1.hi-v2);}}else if(val2 instanceof nexacro.Decimal){var v1=( +val1);return (val2.hi==v1)? -val2.lo:(v1-val2.hi);}return (val1==val2)?0:(val1>val2?1: -1);}else if(coltype>=5&&coltype<=7){if(val1===""||val2===""){return val1>val2?1: -1;}return val1.date.valueOf()-val2.date.valueOf();}else if(coltype>=2&&coltype<=3){return ( +val1== +val2)?0:( +val1> +val2?1: -1);}else{return (val1==val2)?0:(val1>val2?1: -1);}}else if(val1){if((val1 instanceof nexacro.Decimal)&&val1.isZero()){return 0;}return 1;}else if(val2){if((val2 instanceof nexacro.Decimal)&&val2.isZero()){return 0;}return  -1;}else{return 0;}};_pDataset._isEqualValue=function(value,cmpval,coltype){if(value===cmpval){return true;}if(value&&cmpval){if(coltype==4){if(cmpval instanceof nexacro.Decimal){return (value.hi==cmpval.hi)&&(value.lo==cmpval.lo);}else{return (value.hi==( +cmpval)&&value.lo==0);}}else if(coltype>=5&&coltype<=7){if(cmpval instanceof nexacro.Date){return ((value.date?value.date.valueOf():null)==cmpval.date.valueOf());}else{return (value.date==cmpval);}}}return false;};_pDataset._isInvalidValue=function(value,coltype){return false;};_pDataset._isLikeValue=function(value,cmpval){if(value){value=value.toString();if(nexacro._isString(cmpval)){if(cmpval.length==0){return false;}if(value.slice(0,cmpval.length)==cmpval){return true;}}}return false;};_pDataset._isEqualRow=function(Row1,Row2,chkcol,chkval){var colList=this.colinfos;var colCnt=colList.length;function _isEqualRow_loop(i){var coltype=colList[i].ntype;var val1=Row1[i];var val2=(i==chkcol)?chkval:Row2[i];if(coltype==4&&val1&&val2){if((val1.hi!=val2.hi)||(val1.lo!=val2.lo)){return true;}return false;}if(coltype>=5&&coltype<=7&&val1&&val2){if((val1.date?val1.date.valueOf():val1)!=(val2.date?val2.date.valueOf():val2)){return true;}}if(val1!==val2){return true;}}var idx=nexacro.__forLoop(this,0,colCnt,_isEqualRow_loop);return (idx>=colCnt)?true:false;};_pDataset._clearAllExprs=function(){this._exprFuncs={};};_pDataset._clearAll=function(){var cnt=this.rowcount;this.colinfos.clear();this._constVars.clear();if(this._viewRecords!=this._rawRecords){this._viewRecords.splice(0,this._viewRecords.length);this._viewRecords.length=0;}if(this._rawRecords.length){this._clearRecordData(this._rawRecords);this._rawRecords.length=0;}this._viewRecords=this._rawRecords;if(this._deletedRecords.length){this._clearRecordData(this._deletedRecords);this._deletedRecords.length=0;}this.colcount=0;this.constcount=0;this.rowcount=0;this._keycols.length=0;this._keycols.max_keylevel=0;if(this._keycol_levels){this._keycol_levels.length=null;this._keycol_levels=null;}if(this.loadkeymode=="reset"){this.keystring=this._defaultKeyStr;}if(this.loadfiltermode=="reset"){this.filterstr=this._defaultFilterStr;}this._filterFn=null;this.__loadConvertFn=null;this.__lazyParseRecordFn=null;this._clearAllExprs();return cnt;};_pDataset.getRowType=function(row){var rowRow=this._viewRecords[row];return rowRow?rowRow._rtype:0;};_pDataset.getRowTypeNF=function(row){var rowRow=this._rawRecords[row];return rowRow?rowRow._rtype:0;};_pDataset.getRowLevel=function(row){var rowRow=this._viewRecords[row];return rowRow?rowRow._level:0;};_pDataset.getRowLevelNF=function(row){var rowRow=this._rawRecords[row];return rowRow?rowRow._level:0;};_pDataset.getGroupRangeStart=function(row){row=row|0;if(row<0||row>=this.rowcount){return  -1;}var rowRow=this._viewRecords[row];return (rowRow._rtype==16)?rowRow._grpstart:row;};_pDataset.getGroupRangeCount=function(row){row=row|0;if(row<0||row>=this.rowcount){return 0;}var rowRow=this._viewRecords[row];return (rowRow._rtype==16)?(rowRow._grpend-rowRow._grpstart):1;};_pDataset._setRowType=function(rowRow,type){var newtype= -1;switch(type){case 0:case 1:case 2:case 4:case 8:case 16:newtype=type;break;default:switch(type.toString()[0].toUpperCase()){case 'E':newtype=0;break;case 'I':newtype=2;break;case 'U':newtype=4;break;case 'D':newtype=8;break;case 'G':newtype=16;break;default:newtype=1;break;}break;}if(rowRow._rtype==newtype){return false;}if(rowRow._rtype==4){if(rowRow._orgrow){rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata;delete rowRow._orgdata;}}else{if(newtype==4){rowRow=this.__getParsedRow(rowRow);var orgRow=[];this._copyRowData(orgRow,rowRow);rowRow._orgrow=orgRow;}}rowRow._rtype=newtype;return true;};_pDataset.setRowType=function(row,type){row=row|0;if(row<0||row>=this.rowcount){return false;}if(type==null||this.updatecontrol==true){return false;}var rowRow=this._viewRecords[row];var updated=false;if(rowRow){updated=this._setRowType(rowRow,type);}if(updated&&this.enableevent){this.on_fire_onrowsetchanged(row,1,40);}return true;};_pDataset.setRowTypeNF=function(row,type){row=row|0;if(row<0||row>=this._rawRecords.length){return false;}if(type==null||this.updatecontrol==true){return false;}var rowRow=this._rawRecords[row];var updated=false;if(rowRow){updated=this._setRowType(rowRow,type);}if(updated&&this.enableevent){var viewidx=this._viewRecords.indexOf(rowRow);this.on_fire_onrowsetchanged(viewidx,1,40);}return true;};_pDataset._appendRow=function(){var rawRecords=this._rawRecords;var viewRecords=this._viewRecords;var row=viewRecords.length;var rowRow=[];rowRow._rawidx=rawRecords.length;rowRow._rtype=(this.updatecontrol?2:1);rowRow._level=0;if(viewRecords!=rawRecords){viewRecords[viewRecords.length]=rowRow;}rawRecords[rawRecords.length]=rowRow;this.rowcount=viewRecords.length;return row;};_pDataset.appendRow=function(){if(this.colinfos.length<=0){return  -1;}var idx=this._appendRow();if(idx>=0){if(this._eventstat){var oldpos=this.rowposition;this.on_fire_onrowsetchanged(idx,1,12);if(oldpos==this.rowposition){this._setRowPosition(idx,undefined,51);}}else{this.rowposition=idx;}}return idx;};_pDataset.addRow=_pDataset.appendRow;_pDataset._insertRow=function(row){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;if(row>=viewRecords.length){return this._appendRow();}var rowRow=[];rowRow._rawidx=row;rowRow._rtype=(this.updatecontrol?2:1);rowRow._level=0;var rawidx;if(this.updatecontrol){if(viewRecords==rawRecords){viewRecords=this._viewRecords=rawRecords.slice(0,rawRecords.length);}rawidx=viewRecords[row]._rawidx;viewRecords.splice(row,0,rowRow);rawRecords.splice(rawidx,0,rowRow);this._adjustRawIdx(rawidx,rawRecords.length);}else{if(viewRecords==rawRecords){rawRecords.splice(row,0,rowRow);this._adjustRawIdx(row,rawRecords.length);}else{rawidx=viewRecords[row]._rawidx;viewRecords.splice(row,0,rowRow);rawRecords.splice(rawidx,0,rowRow);this._adjustRawIdx(rawidx,rawRecords.length);}}this.rowcount=viewRecords.length;return row;};_pDataset.insertRow=function(row){row=row|0;if(row<0||this.colinfos.length<=0){return  -1;}var idx=this._insertRow(row);if(idx>=0){if(this._eventstat){var oldpos=this.rowposition;this.on_fire_onrowsetchanged(idx,1,12);if(oldpos==this.rowposition){this._setRowPosition(idx,undefined,51,true);}}else{this.rowposition=idx;}}return idx;};_pDataset._deleteRow=function(row){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var rowRow=viewRecords[row];if(this.updatecontrol){if(rowRow){if(rowRow._rtype==1){rowRow._rtype=8;delRecords[delRecords.length]=rowRow;this._removeRawRow(rowRow);}else if(rowRow._rtype==2||rowRow._rtype==16){rowRow._rtype=0;rowRow.length=0;this._removeRawRow(rowRow);}else if(rowRow._rtype==4){if(rowRow._orgrow){this._copyRowData(rowRow,rowRow._orgrow);rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata;delete rowRow._orgdata;}rowRow._rtype=8;delRecords[delRecords.length]=rowRow;this._removeRawRow(rowRow);}else{return  -1;}if(viewRecords!=rawRecords){viewRecords.splice(row,1);}}}else{if(rowRow){if(rowRow._rtype==4){if(rowRow._orgrow){rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata=null;}rowRow._rtype=0;}if(viewRecords==rawRecords){rowRow.length=0;this._removeRawRow(rowRow);}else{rowRow.length=0;viewRecords.splice(row,1);this._removeRawRow(rowRow);}}}this.rowcount=viewRecords.length;return row;};_pDataset.deleteRow=function(row){row=row|0;if(row<0||row>=this.rowcount){return false;}var idx=this._deleteRow(row);var oldpos;var setpos;if(idx>=0){if(this._eventstat){oldpos=this.rowposition;this.on_fire_onrowsetchanged(idx,1,20);setpos=this.rowposition;if(oldpos==setpos){if(setpos==idx){if(this.rowcount==0){this._forcesetRowPosition( -1,51);}else{if(setpos==this.rowcount){this._forcesetRowPosition(this.rowcount-1,51);}else{this._setRowPosition(setpos,undefined,53,true);}}}else if(setpos>idx){this._setRowPosition(setpos-1,undefined,52);}}}else{setpos=this.rowposition;if(setpos==idx){if(this.rowcount==0){this.rowposition= -1;}else{if(setpos==this.rowcount){this.rowposition=this.rowcount-1;}}}else if(setpos>idx){this.rowposition=setpos-1;}}}return idx>=0?true:false;};_pDataset._deleteAll=function(){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var delcnt=0;if(this.updatecontrol){delRecords=this._deletedRecords;function __deleteAll_updatectrl_loopFn(i){var rowRow=viewRecords[i];if(rowRow){delcnt++ ;if(rowRow._rtype==1){rowRow._rtype=8;delRecords[delRecords.length]=rowRow;}else if(rowRow._rtype==2){rowRow._rtype=0;}else if(rowRow._rtype==4){if(rowRow._orgrow){this._copyRowData(rowRow,rowRow._orgrow);rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata;delete rowRow._orgdata;}rowRow._rtype=8;delRecords[delRecords.length]=rowRow;}else if(rowRow._rtype==16){rowRow._rtype=0;}}}nexacro.__forLoop(this,0,viewRecords.length,__deleteAll_updatectrl_loopFn);delRecords.sort(function(a,b){return (a._orgidx-b._orgidx);});}else{function __deleteAll_direct_loopFn(i){var rowRow=viewRecords[i];if(rowRow){delcnt++ ;if(rowRow._rtype==4){if(rowRow._orgrow){rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata=null;}}rowRow._rtype=0;}}nexacro.__forLoop(this,0,viewRecords.length,__deleteAll_direct_loopFn);}if(delcnt>0){this._removeEmptyRawRows();this._removeDeleteRawRows();}if(viewRecords!=rawRecords){viewRecords.length=0;}this.rowcount=0;return delcnt;};_pDataset.deleteAll=function(){var oldpos=this.rowposition;var cnt=this._deleteAll();if(cnt>0){if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,22);if(oldpos>=0&&oldpos==this.rowposition){this._forcesetRowPosition( -1,51);}}else{this.rowposition= -1;}}return cnt;};_pDataset._clearData=function(){var cnt=this.rowcount;if(this._viewRecords!=this._rawRecords){this._viewRecords.splice(0,this._viewRecords.length);this._viewRecords.length=0;}if(this._rawRecords.length){this._clearRecordData(this._rawRecords);this._rawRecords.length=0;}this._viewRecords=this._rawRecords;if(this._deletedRecords.length){this._clearRecordData(this._deletedRecords);this._deletedRecords.length=0;}this.rowcount=0;return cnt;};_pDataset.clearData=function(){var oldpos=this.rowposition;var cnt=this._clearData();if(cnt>0){if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,23);if(oldpos>=0&&oldpos==this.rowposition){this._forcesetRowPosition( -1,51);}}else{this.rowposition= -1;}}return cnt;};_pDataset._deleteMultiRows=function(del_rows){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var delcnt=0;if(this.updatecontrol){function _deleteMultiRows_loop1(i){var rowRow=viewRecords[del_rows[i]];if(rowRow){delcnt++ ;if(rowRow._rtype==1){rowRow._rtype=8;delRecords[delRecords.length]=rowRow;this._removeRawRow(rowRow);}else if(rowRow._rtype==2||rowRow._rtype==16){rowRow._rtype=0;rowRow.length=0;}else if(rowRow._rtype==4){if(rowRow._orgrow){this._copyRowData(rowRow,rowRow._orgrow);rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata;delete rowRow._orgdata;}rowRow._rtype=8;delRecords[delRecords.length]=rowRow;this._removeRawRow(rowRow);}else{return  -1;}if(viewRecords!=rawRecords){viewRecords.splice(del_rows[i],1);}}}nexacro.__reverseForLoop(this,del_rows.length-1,0,_deleteMultiRows_loop1);}else{function _deleteMultiRows_loop2(i){var rowRow=viewRecords[del_rows[i]];if(rowRow){delcnt++ ;if(rowRow._rtype==4){if(rowRow._orgrow){rowRow._orgrow.length=0;delete rowRow._orgrow;}rowRow._rtype=0;}else{rowRow._rtype=0;}if(viewRecords!=rawRecords){viewRecords.splice(del_rows[i],1);}}}nexacro.__reverseForLoop(this,del_rows.length-1,0,_deleteMultiRows_loop2);}if(delcnt>0){this._removeEmptyRawRows();this.rowcount=viewRecords.length;}return delcnt;};_pDataset.deleteMultiRows=function(del_rows){if(!(del_rows instanceof Array)){return 0;}var oldpos=this.rowposition;var oldRow=this._viewRecords[oldpos];var rows=del_rows.reduce(function(a,b){if(a.indexOf(b)<0){a.push(b);}return a;},[]);rows.sort(function(l,r){return l-r;});var delcnt=this._deleteMultiRows(rows);if(delcnt>0){var newIdx= -1;if(oldRow!=null){newIdx=this._viewRecords.indexOf(oldRow);}if(this._eventstat){this._deleteRows=del_rows;this.on_fire_onrowsetchanged( -1,delcnt,20);if(oldpos==this.rowposition){if(newIdx<oldpos){if(this.rowcount<=0){this._forcesetRowPosition( -1,51);}else if(newIdx== -1){if(oldpos>=0&&oldpos<this.rowcount){this._setRowPosition(oldpos,undefined,53);if(this.onvaluechanged&&this.onvaluechanged._has_handlers){var evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}else{this._forcesetRowPosition( -1,51);}}else{this._setRowPosition(newIdx,undefined,52);}}}}else{if(oldRow!=null){newIdx=this._viewRecords.indexOf(oldRow);}if(newIdx<oldpos){if(this.rowcount<=0){this.rowposition= -1;}else if(newIdx== -1){if(oldpos>=0&&oldpos<this.rowcount){this.rowposition=oldpos;}else{this.rowposition= -1;}}else{this.rowposition=newIdx;}}}}return delcnt;};_pDataset._moveRow=function(oldrow,newrow){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;function _getInsertRawRecordIdx(idx,dir){var viewRecord=viewRecords[idx];var rtype=viewRecord._rtype;var i;if(rtype!=8&&rtype!=16){return viewRecord._rawidx;}if(dir<0){i=idx-1;viewRecord=viewRecords[i];while(viewRecord){rtype=viewRecord._rtype;if(rtype!=8&&rtype!=16){return viewRecord._rawidx+1;}viewRecord=viewRecords[i-- ];}}else{i=idx+1;viewRecord=viewRecords[i];while(viewRecord){rtype=viewRecord._rtype;if(rtype!=8&&rtype!=16){return viewRecord._rawidx-1;}viewRecord=viewRecords[i++ ];}}return  -1;}if(viewRecords==rawRecords){viewRecords=this._viewRecords=rawRecords.slice(0,rawRecords.length);}var oldviewRow,oldidx,newidx;oldviewRow=viewRecords[oldrow];if(oldviewRow){oldidx=oldviewRow._rawidx;}if(newrow<oldrow){newidx=_getInsertRawRecordIdx(newrow, -1);if(!nexacro._isNull(oldidx)){if(newidx<0){newidx=0;}rawRecords.splice(oldidx,1);rawRecords.splice(newidx,0,oldviewRow);this._adjustRawIdx(newidx,oldidx+1);}viewRecords.splice(oldrow,1);viewRecords.splice(newrow,0,oldviewRow);}else{if(!nexacro._isNull(oldidx)){newidx=_getInsertRawRecordIdx(newrow,1);if(newidx<0){newidx=rawRecords.length-1;}rawRecords.splice(newidx+1,0,oldviewRow);rawRecords.splice(oldidx,1);this._adjustRawIdx(oldidx,newidx+1);}viewRecords.splice(newrow+1,0,oldviewRow);viewRecords.splice(oldrow,1);}return newrow;};_pDataset.moveRow=function(oldrow,newrow){oldrow=oldrow|0;newrow=newrow|0;if(oldrow<0||oldrow>=this.rowcount||newrow<0||newrow>=this.rowcount||oldrow==newrow){return  -1;}var idx=this._moveRow(oldrow,newrow);if(idx>=0){var oldpos=this.rowposition;if(this._eventstat){var from,cnt;if(oldrow>newrow){from=newrow;cnt=(oldrow-newrow+1);}else{from=oldrow;cnt=(newrow-oldrow+1);}this.on_fire_onrowsetchanged(from,cnt,32);if(oldpos==this.rowposition){if(oldpos==oldrow){this._setRowPosition(newrow,undefined,52);}else if(oldrow>newrow&&oldpos>=newrow&&oldpos<oldrow){this._setRowPosition(oldpos+1,undefined,52);}else if(oldrow<newrow&&oldpos>oldrow&&oldpos<newrow){this._setRowPosition(oldpos-1,undefined,52);}}}else{if(oldpos==oldrow){this.rowposition=newrow;}else if(oldrow>newrow&&oldpos>=newrow&&oldpos<oldrow){this.rowposition=oldpos+1;}else if(oldrow<newrow&&oldpos>oldrow&&oldpos<newrow){this.rowposition=oldpos-1;}}}return idx;};_pDataset._exchangeRow=function(row1,row2){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;if(rawRecords.length<=0){return  -1;}if(row1>=viewRecords.length||row2>=viewRecords.length||row1==row2){return false;}var rowData1,rowData2,idx1,idx2;if(viewRecords==rawRecords){rowData1=rawRecords[row1];rowData2=rawRecords[row2];rowData1._rawidx=row2;rowData2._rawidx=row1;rawRecords[row1]=rowData2;rawRecords[row2]=rowData1;}else{rowData1=viewRecords[row1];rowData2=viewRecords[row2];idx1=rowData1._rawidx;idx2=rowData2._rawidx;rowData1._rawidx=idx2;rowData2._rawidx=idx1;rawRecords[idx1]=rowData2;rawRecords[idx2]=rowData1;viewRecords[row1]=rowData2;viewRecords[row2]=rowData1;}return true;};_pDataset.exchangeRow=function(row1,row2){row1=row1|0;row2=row2|0;if(row1<0||row1>=this.rowcount||row2<0||row2>=this.rowcount){return false;}if(this._exchangeRow(row1,row2)){if(this._eventstat){var oldpos=this.rowposition;this.on_fire_onrowsetchanged(row1,1,33);this.on_fire_onrowsetchanged(row2,1,33);if(oldpos==this.rowposition){if(oldpos==row1){this._setRowPosition(row2,undefined,52);}else if(oldpos==row2){this._setRowPosition(row1,undefined,52);}}return true;}else{if(this.rowposition==row1){this.rowposition=row2;}else if(this.rowposition==row2){this.rowposition=row1;}}}return false;};_pDataset._filterRow=function(row){var viewRecords=this._viewRecords;if(row<0||row>=viewRecords.length){return false;}if(viewRecords==this._rawRecords){viewRecords=this._viewRecords=this._rawRecords.slice(0,this._rawRecords.length);viewRecords.splice(row,1);}else{viewRecords.splice(row,1);this._adjustGroupRowData(row);}this.rowcount=viewRecords.length;return true;};_pDataset.filterRow=function(row){row=row|0;if(row<0||row>=this.rowcount){return;}var oldpos=this.rowposition;var flag=this._filterRow(row);if(flag){if(this._eventstat){this.on_fire_onrowsetchanged(row,1,31);if(oldpos==this.rowposition){if(oldpos>row){this._setRowPosition(oldpos-1,undefined,52);}else if(oldpos==row){if(this.rowcount==0){this._forcesetRowPosition( -1,51);}else{if(oldpos==this.rowcount){this._forcesetRowPosition(this.rowcount-1,51);}else{this._setRowPosition(oldpos,undefined,53);}}}}}else{if(oldpos>row){this.rowposition=(oldpos-1);}else if(oldpos==row){if(oldpos>this.rowcount){this.rowposition=this.rowcount-1;}else{this.rowposition=oldpos;}}}}};_pDataset._forcesetRowPosition=function(newpos,reason){if(newpos<0||newpos>=this.rowcount){newpos= -1;}var oldpos=this.rowposition;var evt;if(newpos!=oldpos&&newpos<this.rowcount){if(this.onrowposchanged&&this.onrowposchanged._has_handlers){evt=new nexacro.DSRowPosChangeEventInfo(this,"onrowposchanged",oldpos,newpos,reason);this.rowposition=newpos;this.on_fire_onrowposchanged(evt);}else{this.rowposition=newpos;}}if(this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",newpos, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}};_pDataset._setRowPosition=function(newpos,v,reason,value_update){if(newpos<0||newpos>=this.rowcount){newpos= -1;}var oldpos=this.rowposition;var evt;if(newpos!=oldpos||reason==53){if((this.canrowposchange&&this.canrowposchange._has_handlers)||(this.onrowposchanged&&this.onrowposchanged._has_handlers)){evt=new nexacro.DSRowPosChangeEventInfo(this,"canrowposchange",oldpos,newpos,reason);if(this.canrowposchange&&this.canrowposchange._has_handlers&&this._eventstat&&v===undefined&&(oldpos>= -1&&oldpos<this.rowcount)){var ret=this.on_fire_canrowposchange(evt);if(ret==false){return;}if(newpos!=evt.newrow){newpos=evt.newrow;}if(newpos>=0||newpos<this.rowcount){this.rowposition=newpos;if(this.onrowposchanged&&this.onrowposchanged._has_handlers){this.on_fire_onrowposchanged(evt);}if(this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}else{if(newpos>=0||newpos<this.rowcount){this.rowposition=newpos;if(this._eventstat){if(this.onrowposchanged&&this.onrowposchanged._has_handlers){this.on_fire_onrowposchanged(evt);}if(this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}}}else{this.rowposition=newpos;if(this._eventstat&&this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}else if(value_update){if(this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}return this.rowposition;};_pDataset.__splitKeyCols=function(str){var arr=[];var plus,minus;if(str.charAt(0)!='+'&&str.charAt(0)!='-'){str='+'+str;}plus=str.indexOf('+');minus=str.indexOf('-');var pos=(plus>=0&&minus>=0)?(minus<plus?minus:plus):(plus>minus?plus:minus);var arrLength=0;while(pos>=0){plus=str.indexOf('+',pos+1);minus=str.indexOf('-',pos+1);var nextpos=(plus>=0&&minus>=0)?(minus<plus?minus:plus):(plus>minus?plus:minus);if(nextpos<0){arr[arrLength]=str.substr(pos);arrLength++ ;}else{arr[arrLength]=str.substr(pos,nextpos-pos);arrLength++ ;}pos=nextpos;}return arr;};_pDataset._clearKeyCols=function(){this._keycols.length=0;this._keycols.max_keylevel=0;if(this._keycol_levels){this._keycol_levels.length=null;this._keycol_levels=null;}};_pDataset._parseKeyCols=function(){var keyCnt=this._keycols.length;if(keyCnt>0){return keyCnt;}var str=this.keystring;var level=0;if(str.length>0){var keys=str.split(',');function _parseKeyCols_loop(i){var key=keys[i];key=key.trim();if(key.length==0){return;}var colonpos=key.indexOf(':');if(colonpos<=0||(key.charAt(0)!='S'&&key.charAt(0)!='s')){level++ ;}var keys2;if(colonpos>=0){keys2=this.__splitKeyCols(key.substr(colonpos+1));}else{keys2=this.__splitKeyCols(key);}function _parseKeyCols_loop2(j){var key2=keys2[j];key2=key2.trim();if(key2.length==0){return;}var colid;var colidx= -1;var descending=false;if(key2.charAt(0)=='-'){colid=key2.substr(1);colidx=this.colinfos.indexOf(colid);descending=true;}else if(key2.charAt(0)=='+'){colid=key2.substr(1);colidx=this.colinfos.indexOf(colid);}else{colid=key2;colidx=this.colinfos.indexOf(colid);}if(colidx>=0){this._keycols[keyCnt]={level:level,colid:colid,colidx:colidx,descending:descending};keyCnt++ ;}}nexacro.__reverseForLoop(this,keys2.length-1,0,_parseKeyCols_loop2);}nexacro.__reverseForLoop(this,keys.length-1,0,_parseKeyCols_loop);}this._keycols.max_keylevel=level;return keyCnt;};_pDataset._getLocale=function(){var environment=nexacro.getEnvironment();var locale=environment.locale?environment.locale:nexacro._getLocale();var pThis=this;while(pThis){if(pThis._locale){locale=pThis._locale;break;}pThis=pThis.parent;}if(locale.indexOf("_")> -1){locale=locale.substr(0,2);}return locale;};_pDataset.__createSortFunc=function(){var keyList=this._keycols;var colList=this.colinfos;var pThis=this;return function(a,b){a=pThis.__getParsedRow(a);b=pThis.__getParsedRow(b);var cmp=0;function __sort_compare_loopFn(i){var key=keyList[i];var value1=a[key.colidx];var value2=b[key.colidx];cmp=this._compareValue(value1,value2,colList[key.colidx].ntype);if(cmp!=0){cmp=(key.descending)? -cmp:cmp;return true;}}nexacro.__reverseForLoop(pThis,keyList.length-1,0,__sort_compare_loopFn);return cmp==0?((a._rawidx>b._rawidx)?1: -1):cmp;};};_pDataset._sortData=function(){var viewRecords=this._viewRecords;if(this._keycols.length>0&&viewRecords.length>0){if(viewRecords==this._rawRecords){viewRecords=this._viewRecords=this._rawRecords.slice(0,this._rawRecords.length);}var cmpfn=this.__createSortFunc();viewRecords.sort(cmpfn);}};_pDataset._sortRawData=function(){var rawRecords=this._rawRecords;if(this._keycols.length>0&&rawRecords.length>0){var cmpfn=this.__createSortFunc();rawRecords.sort(cmpfn);this._adjustRawIdx(0,rawRecords.length);}};_pDataset._reFilter=function(){var viewRecords;if(this.filterstr.length>0){viewRecords=[];if(this._filterFn==null){var filterFn=this._createExprFunc(this.filterstr);if(typeof filterFn=="function"){this._filterFn=filterFn;}}if(this._filterFn){var exprfn=this._filterFn;var rawRecords=this._rawRecords;function __reFilter_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);var flag=exprfn.call(this,i,i,null,this,rawRecords,rowRow,[]);if(flag){viewRecords[viewRecords.length]=rowRow;}}nexacro.__forLoop(this,0,rawRecords.length,__reFilter_loopFn);this._viewRecords=viewRecords;}}else{viewRecords=this._viewRecords;if(viewRecords!=this._rawRecords){viewRecords.length=0;}this._viewRecords=this._rawRecords;}this.rowcount=this._viewRecords.length;};_pDataset.filter=function(strkey){if(arguments.length==1){this.filterstr=nexacro._toString(strkey);}this._filterFn=null;if(!this.loadstatus&&this._rawRecords.length>0){var oldpos=this.rowposition;var viewRecords=this._viewRecords;var oldrowRow=viewRecords[oldpos];this._reFilter();this._resetSortGroup();var newpos=this._viewRecords.indexOf(oldrowRow);if(this._eventstat){this.on_fire_onrowsetchanged( -1, -1,31);if(oldpos==this.rowposition){if(this.rowcount){if(newpos== -1){this._forcesetRowPosition( -1,51);}else if(oldpos>=0&&oldpos!=newpos){this._setRowPosition(newpos,undefined,52);}else{this._forcesetRowPosition(newpos,51);}}else{this._forcesetRowPosition( -1,51);}}}else{this.rowposition=newpos;}}else if(!this.loadstatus){this._defaultFilterStr=this.filterstr;}};_pDataset._deleteAllGroupData=function(){var viewRecords=this._viewRecords;var cnt=viewRecords.length;if(this._keycols.length<=0||cnt<=0){return;}function _deleteAllGroupData_loop(i){var rowRow=viewRecords[i];if(rowRow._level>0){rowRow.length=0;viewRecords.splice(i,1);}}nexacro.__reverseForLoop(this,viewRecords.length-1,0,_deleteAllGroupData_loop);};_pDataset._calcGroupData=function(grpRow,col_levels){var colList=this.colinfos;var grpStart=grpRow._grpstart;var grpEnd=grpRow._grpend;var lvl=grpRow._level;var viewRecords=this._viewRecords;var keyRow=viewRecords[grpStart];function _calcGroupData_loop(colidx){var colinfo=colList[colidx];var colprop=colinfo.prop;if(colprop){colprop=colprop.toLowerCase();}var ntype=colinfo.ntype;switch(colprop){case "count":grpRow[colidx]=this._getCountValue(viewRecords, -1,grpStart,grpEnd,ntype);break;case "sum":grpRow[colidx]=this._getSumValue(viewRecords,colidx,grpStart,grpEnd,ntype);break;case "max":grpRow[colidx]=this._getMaxValue(viewRecords,colidx,grpStart,grpEnd,ntype);break;case "min":grpRow[colidx]=this._getMinValue(viewRecords,colidx,grpStart,grpEnd,ntype);break;case "avg":grpRow[colidx]=this._getAvgValue(viewRecords,colidx,grpStart,grpEnd,ntype,true);break;case "text":grpRow[colidx]=colinfo.sumtext;break;case "key":grpRow[colidx]=keyRow[colidx];break;default:if(col_levels[colidx]>=lvl){grpRow[colidx]=keyRow[colidx];}else{switch(ntype){case 2:case 3:case 4:grpRow[colidx]=this._getSumValue(viewRecords,colidx,grpStart,grpEnd,ntype);break;default:break;}}break;}}nexacro.__forLoop(this,0,colList.length,_calcGroupData_loop);};_pDataset._createGroupData=function(){var keyList=this._keycols;var maxlevel=keyList.max_keylevel;if(maxlevel==0||this._viewRecords.length==0){return;}var colList=this.colinfos;var level_idx=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var keycnt=keyList.length;var col_levels=this._keycol_levels;if(col_levels){col_levels.length=0;}else{this._keycol_levels=col_levels=[];}function __createGroupData_keycollevel_loopFn(i){var key=keyList[i];col_levels[key.colidx]=key.level;}nexacro.__forLoop(this,0,keyList.length,__createGroupData_keycollevel_loopFn);var viewRecords=this._viewRecords;var cnt=viewRecords.length;var prevRow=viewRecords[0];var idx=1;function __createGroupData_loopFn(){if(idx<cnt){var curRow=this._viewRecords[idx];var chklvl=0;function __createGroupData_compare_loopFn(k){var key=keyList[k];if(key.level==0){return false;}var keyidx=key.colidx;if(!this._isEqualValue(curRow[keyidx],prevRow[keyidx],colList[keyidx].ntype)){chklvl=key.level;return true;}}nexacro.__reverseForLoop(this,keycnt-1,0,__createGroupData_compare_loopFn);if(chklvl>0){if(this.reversesubsum){function __createGroupData_reversegrp_loopFn(lvl){var grpRow=[];grpRow._rtype=16;grpRow._level=lvl;grpRow._grpstart=level_idx[lvl]+(lvl-1);grpRow._grpend=idx+(lvl-1);this._calcGroupData(grpRow,col_levels);viewRecords.splice(level_idx[lvl],0,grpRow);grpRow._grpstart+=1+(maxlevel-lvl);grpRow._grpend=idx+maxlevel;}nexacro.__forLoop(this,1,chklvl+1,__createGroupData_reversegrp_loopFn);cnt+=chklvl;idx+=chklvl;}else{function __createGroupData_forwardgrp_loopFn(lvl){var grpRow=[];grpRow._rtype=16;grpRow._level=lvl;grpRow._grpstart=level_idx[lvl];grpRow._grpend=idx;this._calcGroupData(grpRow,col_levels);viewRecords.splice(idx+lvl-1,0,grpRow);}nexacro.__forLoop(this,1,chklvl+1,__createGroupData_forwardgrp_loopFn);cnt+=chklvl;idx+=chklvl;}prevRow=curRow;function _updateLevelIndex_loopFn(i){level_idx[i]=idx;}nexacro.__forLoop(this,1,chklvl+1,_updateLevelIndex_loopFn);}idx++ ;return false;}return true;}nexacro.__whileLoop(this,__createGroupData_loopFn);if(this.reversesubsum){function __createGroupData_reverselast_loopFn(lvl){var grpRow=[];grpRow._rtype=16;grpRow._level=lvl;grpRow._grpstart=level_idx[lvl]+(lvl-1);grpRow._grpend=idx+(lvl-1);this._calcGroupData(grpRow,col_levels);viewRecords.splice(level_idx[lvl],0,grpRow);grpRow._grpstart+=1+(maxlevel-lvl);grpRow._grpend=idx+maxlevel;}nexacro.__forLoop(this,1,maxlevel+1,__createGroupData_reverselast_loopFn);}else{function __createGroupData_forwardlast_loopFn(lvl){var grpRow=[];grpRow._rtype=16;grpRow._level=lvl;grpRow._grpstart=level_idx[lvl];grpRow._grpend=idx;this._calcGroupData(grpRow,col_levels);viewRecords[viewRecords.length]=grpRow;}nexacro.__forLoop(this,1,maxlevel+1,__createGroupData_forwardlast_loopFn);}};_pDataset._resetSortGroup=function(){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;if(this._parseKeyCols()>0&&rawRecords.length>0){if(rawRecords!=viewRecords){if(viewRecords.length==0){return false;}this._deleteAllGroupData();}else{viewRecords=this._viewRecords=this._rawRecords.slice(0,this._rawRecords.length);}this._sortData();this._createGroupData();this.rowcount=viewRecords.length;return true;}return false;};_pDataset._adjustGroupRowData=function(row){var keyList=this._keycols;if(keyList.max_keylevel==0){return false;}var col_levels=this._keycol_levels;var viewRecords=this._viewRecords;var delcnt=1;var cnt=viewRecords.length;var idx;if(this.reversesubsum){idx=row-1;function __removeEmptyGroup_reverse_loopFn(){if(idx>=0){var grpRow=viewRecords[idx];if(grpRow&&grpRow._rtype==16&&grpRow._grpstart>=(row-delcnt)&&grpRow._grpend<=row){viewRecords.splice(idx,1);grpRow.length=0;delcnt++ ;cnt-- ;idx-- ;return false;}}return true;}nexacro.__whileLoop(this,__removeEmptyGroup_reverse_loopFn);function __adjustGroupRowData_reverse1_loopFn(){if(idx>=0){var grpRow=viewRecords[idx];if(grpRow&&grpRow._rtype==16){if(grpRow._grpstart<=(row-delcnt)&&grpRow._grpend>row){grpRow._grpend-=delcnt;this._calcGroupData(grpRow,col_levels);}else{if(grpRow._grpend>=(row+delcnt)){grpRow._grpend-=delcnt;}}}idx-- ;return false;}return true;}nexacro.__whileLoop(this,__adjustGroupRowData_reverse1_loopFn);idx=row-delcnt+1;function __adjustGroupRowData_reverse2_loopFn(){if(idx<cnt){var grpRow=viewRecords[idx];if(grpRow&&grpRow._rtype==16){if(grpRow._grpstart>=(row+delcnt)){grpRow._grpstart-=delcnt;}if(grpRow._grpend>=(row+delcnt)){grpRow._grpend-=delcnt;}}idx++ ;return false;}return true;}nexacro.__whileLoop(this,__adjustGroupRowData_reverse2_loopFn);}else{idx=row;function __removeEmptyGroup_forward_loopFn(){if(idx<cnt){var grpRow=viewRecords[idx];if(grpRow&&grpRow._rtype==16&&grpRow._grpstart>=row&&grpRow._grpend<=(row+delcnt)){viewRecords.splice(row,1);grpRow.length=0;delcnt++ ;cnt-- ;return false;}}return true;}nexacro.__whileLoop(this,__removeEmptyGroup_forward_loopFn);function __adjustGroupRowData_forward_loopfn(){if(idx<cnt){var grpRow=viewRecords[idx];if(grpRow&&grpRow._rtype==16){if(grpRow._grpstart<=row&&grpRow._grpend>(row+delcnt)){grpRow._grpend-=delcnt;this._calcGroupData(grpRow,col_levels);}else{if(grpRow._grpstart>=(row+delcnt)){grpRow._grpstart-=delcnt;}if(grpRow._grpend>=(row+delcnt)){grpRow._grpend-=delcnt;}}}idx++ ;return false;}return true;}nexacro.__whileLoop(this,__adjustGroupRowData_forward_loopfn);}return true;};_pDataset._updateGroupRowData=function(row){var keyList=this._keycols;if(keyList.length<=0||keyList.max_keylevel==0){return false;}var viewRecords=this._viewRecords;var col_levels=this._keycol_levels;function __updateGroupRowData_loopFn(i){var grpRow=viewRecords[i];if(grpRow._rtype==16&&grpRow._grpstart<=row&&grpRow._grpend>=row){this._calcGroupData(grpRow,col_levels);}}if(this.reversesubsum){nexacro.__reverseForLoop(this,row-1,0,__updateGroupRowData_loopFn);}else{nexacro.__forLoop(this,row,viewRecords.length,__updateGroupRowData_loopFn);}return true;};_pDataset.updateSortGroup=function(strkey,apply_method){var ret=true;if(arguments.length<2){if(strkey){strkey=strkey.toString();this.keystring=strkey;}else{if(!this.keystring){ret=false;}}}else{if(!apply_method){ret=false;}}if(ret){var isReset=false;if(this.keystring==""||this.keystring=="S:"||this.keystring=="G:"){isReset=true;}var viewRecords,oldpos,oldRow;if(this.keystring&&!isReset){viewRecords=this._viewRecords;oldpos=this.rowposition;oldRow=viewRecords[oldpos];if(!this.loadstatus&&this._rawRecords.length>0){this._clearKeyCols();this._resetSortGroup();}else if(!this.loadstatus&&this._rawRecords.length==0&&viewRecords.length>0){this._deleteAllGroupData();this._clearKeyCols();this.rowcount=viewRecords.length;}}else{viewRecords=this._viewRecords;oldpos=this.rowposition;oldRow=viewRecords[oldpos];this._deleteAllGroupData();this._clearKeyCols();if(!this.loadstatus&&this._rawRecords.length>0){this._viewRecords=this._rawRecords;this._reFilter();}}var newpos=this._viewRecords.indexOf(oldRow);if(this.enableevent){this.on_fire_onrowsetchanged( -1, -1,30);if(oldpos==this.rowposition){if(oldpos>=0&&oldpos!=newpos){this._setRowPosition(newpos,undefined,52);}}}else{this.rowposition=newpos;}}return ret;};_pDataset.getConstColumn=function(id){var constvar=this._constVars[id];return constvar?constvar.value:undefined;};_pDataset.getColumn=function(row,col){row=row|0;var colinfo=this.colinfos[col];var rowRow,constvar;var coltype;if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){if(coltype>=4&&coltype<=7){return nexacro._cloneObject(rowRow[colinfo._index]);}return rowRow[colinfo._index];}return undefined;}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return constvar.value;}else{if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){if(coltype>=4&&coltype<=7){return nexacro._cloneObject(rowRow[colinfo._index]);}return rowRow[colinfo._index];}return undefined;}}return undefined;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return constvar.value;}else{constvar=this._constVars[col];return constvar?constvar.value:undefined;}}};_pDataset.getColumnNF=function(row,col){row=row|0;var colinfo=this.colinfos[col];var rowRow;var constvar;var coltype;if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){if(coltype>=4&&coltype<=7){return nexacro._cloneObject(rowRow[colinfo._index]);}return rowRow[colinfo._index];}return undefined;}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return constvar.value;}else{if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){if(coltype>=4&&coltype<=7){return nexacro._cloneObject(rowRow[colinfo._index]);}return rowRow[colinfo._index];}return undefined;}}return undefined;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return constvar.value;}else{constvar=this._constVars[col];return constvar?constvar.value:undefined;}}};_pDataset.getOrgColumn=function(row,col){row=row|0;var colinfo=this.colinfos[col];var rowRow;var constvar;var coltype;var ret;if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){ret=rowRow._orgrow?rowRow._orgrow[colinfo._index]:rowRow[colinfo._index];if(coltype>=4&&coltype<=7){return nexacro._cloneObject(ret);}return ret;}return undefined;}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return constvar.value;}else{if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){ret=rowRow._orgrow?rowRow._orgrow[colinfo._index]:rowRow[colinfo._index];if(coltype>=4&&coltype<=7){return nexacro._cloneObject(ret);}return ret;}return undefined;}}return undefined;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return constvar.value;}else{constvar=this._constVars[col];return constvar?constvar.value:undefined;}}};_pDataset.getOrgColumnNF=function(row,col){row=row|0;var colinfo=this.colinfos[col];var rowRow;var constvar;var coltype;var ret;if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){ret=rowRow._orgrow?rowRow._orgrow[colinfo._index]:rowRow[colinfo._index];if(coltype>=4&&coltype<=7){return nexacro._cloneObject(ret);}return ret;}return undefined;}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return constvar.value;}else{if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){coltype=colinfo.ntype;rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){ret=rowRow._orgrow?rowRow._orgrow[colinfo._index]:rowRow[colinfo._index];if(coltype>=4&&coltype<=7){return nexacro._cloneObject(ret);}return ret;}return undefined;}}return undefined;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return constvar.value;}else{constvar=this._constVars[col];return constvar?constvar.value:undefined;}}};_pDataset.getDeletedColumn=function(row,col){row=row|0;var colinfo=this.colinfos[col];var rowRow,constvar;if(colinfo){rowRow=this.__getParsedRow(this._deletedRecords[row]);if(rowRow){return rowRow[colinfo._index];}return undefined;}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return constvar.value;}else{if(typeof (col)=="string"){return undefined;}colinfo=this.colinfos[0];if(colinfo){rowRow=this.__getParsedRow(this._deletedRecords[row]);if(rowRow){return rowRow[colinfo._index];}return undefined;}}return undefined;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return constvar.value;}else{constvar=this._constVars[col];return constvar?constvar.value:undefined;}}};_pDataset.getColumnSet=function(){return null;};_pDataset.setConstColumn=function(id,value){var constVar=this._constVars[id];if(constVar==null||constVar.value==value){return false;}if(this._eventstat&&((this.cancolumnchange&&this.cancolumnchange._has_handlers)||(this.oncolumnchanged&&this.oncolumnchanged._has_handlers)||(this.onvaluechanged&&this.onvaluechanged._has_handlers))){var evt=new nexacro.DSColChangeEventInfo(this,"cancolumnchange", -1,constVar._index+this.colinfos.length, -1,constVar.id,constVar.value,value);if(this.on_fire_cancolumnchange(evt)){value=evt.newvalue;if(value!=constVar.value){constVar.value=value;this.on_fire_oncolumnchanged(evt);this.on_fire_onvaluechanged(evt);return true;}}return false;}else{constVar.value=value;return true;}};_pDataset._updateColumn=function(viewrow,rowRow,colinfo,value){var colidx=colinfo._index;var coltype=colinfo.ntype;var oldVal=rowRow[colidx];if(oldVal===value||rowRow._rtype==16){return false;}if(this._isInvalidValue(value,coltype)){return false;}if(this.updatecontrol){if(rowRow._rtype==1){var orgRow=[];this._copyRowData(orgRow,rowRow);rowRow._orgrow=orgRow;rowRow._rtype=4;}else if(rowRow._rtype==4){if(rowRow._orgrow){var _rtypechange=this._isEqualRow(rowRow._orgrow,rowRow,colidx,value);if(_rtypechange){rowRow._orgrow.length=0;delete rowRow._orgrow;rowRow._rtype=1;}}}}rowRow[colidx]=value;if(viewrow>=0){this._updateGroupRowData(viewrow);}return true;};_pDataset._setColumn=function(row,rowRow,colinfo,value,fail){var coltype=colinfo.ntype;var fromval=colinfo._fromVal(value);var oldval=rowRow[colinfo._index];if(this._isEqualValue(oldval,fromval,coltype)){return false;}if(this._isInvalidValue(fromval,coltype)){return false;}if(row>=0&&this._eventstat&&((this.cancolumnchange&&this.cancolumnchange._has_handlers)||(this.oncolumnchanged&&this.oncolumnchanged._has_handlers)||(this.onvaluechanged&&this.onvaluechanged._has_handlers))){var evt=new nexacro.DSColChangeEventInfo(this,"cancolumnchange",row,colinfo._index, -1,colinfo.id,oldval,fromval);if((this.cancolumnchange&&this.cancolumnchange._has_handlers)){if(this.on_fire_cancolumnchange(evt)){fromval=colinfo._fromVal(evt.newvalue);if(this._updateColumn(row,rowRow,colinfo,fromval)){evt.newvalue=fromval;this.on_fire_oncolumnchanged(evt);this.on_fire_onvaluechanged(evt);return true;}}else{if(fail){fail.status="cancolumnchange";}}}else{if(this._updateColumn(row,rowRow,colinfo,fromval)){evt.newvalue=fromval;this.on_fire_oncolumnchanged(evt);this.on_fire_onvaluechanged(evt);return true;}}}else{this._updateColumn(row,rowRow,colinfo,fromval);return true;}return false;};_pDataset.setColumn=function(row,col,value){row=row|0;var rowRow,constvar;if(row<0||row>=this.rowcount){return false;}var fail=arguments[3];var colinfo=this.colinfos[col];if(colinfo){rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){return this._setColumn(row,rowRow,colinfo,value,fail);}}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return this.setConstColumn(col,value);}else{if(typeof (col)=="string"){return false;}colinfo=this.colinfos[0];if(colinfo){rowRow=this.__getParsedRow(this._viewRecords[row]);if(rowRow){return this._setColumn(row,rowRow,colinfo,value,fail);}}}return false;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return this.setConstColumn(colidx-this.colinfos.length,value);}else{return this.setConstColumn(col,value);}}};_pDataset.setColumnNF=function(row,col,value){row=row|0;var rowRow,constvar,newrow;if(row<0||row>=this._rawRecords.length){return false;}var colinfo=this.colinfos[col];if(colinfo){rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){if(this._viewRecords!=this._rawRecords){newrow=this._viewRecords.indexOf(rowRow);if(newrow>=0){return this._setColumn(newrow,rowRow,colinfo,value,null);}else{return this._updateColumn(newrow,rowRow,colinfo,colinfo._fromVal(value));}}else{return this._setColumn(row,rowRow,colinfo,value,null);}}}var colidx=( +col);if(colidx!=col){constvar=this._constVars[col];if(constvar){return this.setConstColumn(col,value);}else{if(typeof (col)=="string"){return false;}colinfo=this.colinfos[0];if(colinfo){rowRow=this.__getParsedRow(this._rawRecords[row]);if(rowRow){if(this._viewRecords!=this._rawRecords){newrow=this._viewRecords.indexOf(rowRow);if(newrow>=0){return this._setColumn(newrow,rowRow,colinfo,value,null);}else{return this._updateColumn(newrow,rowRow,colinfo,colinfo._fromVal(value));}}else{return this._setColumn(row,rowRow,colinfo,value,null);}}}}return false;}else{constvar=this._constVars[colidx-this.colinfos.length];if(constvar){return this.setConstColumn(colidx-this.colinfos.length,value);}else{return this.setConstColumn(col,value);}}};_pDataset._copyConstColList=function(constVars){var cnt=0;if(constVars._type_name=="VariableList"&&constVars.length>0){function __copyConstColList_loopFn(i){var varinfo=constVars[i];if((varinfo.id in this.colinfos)||(varinfo.id in this._constVars)){return;}this._constVars.add(varinfo.id,new nexacro.Variable(varinfo.id,varinfo.value,varinfo.type,varinfo.ntype,varinfo.size,this._constVars.length));cnt++ ;}nexacro.__forLoop(this,0,constVars.length,__copyConstColList_loopFn);if(cnt>0){this.count+=cnt;this.constcount+=cnt;}}return cnt;};_pDataset._appendConstColList=function(constVars,chkcol){if(constVars._type_name=="VariableList"){var constList=this._constVars;var cnt=0;if(chkcol){function __appendConstColList_chkcol_loopFn(i){var id=constList.get_id(i);var srcidx=constVars.indexOf(id);if(srcidx!=null){var varinfo=constVars[srcidx];constList.set_item(i,new nexacro.Variable(varinfo.id,varinfo.value,varinfo.type,varinfo.ntype,varinfo.size,constList.length));cnt++ ;}}nexacro.__forLoop(this,0,constList.length,__appendConstColList_chkcol_loopFn);}else{var mincount=Math.min(constList.length,constVars.length);function __appendConstColList_loopFn(i){constList.set_item(i,constVars[i]);cnt++ ;}nexacro.__forLoop(this,0,mincount,__appendConstColList_loopFn);}return cnt;}return 0;};_pDataset._copyRowList=function(srcds,srcRecords){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var cnt=0;function __copyRowList_loopFn(i){var srcRow=srcRecords[i];if((srcRow._level==0)&&(srcRow._rtype&7)){var rowRow=[];rowRow._level=0;rowRow._rawidx=rawRecords.length;rowRow._rtype=1;if(srcRow&&srcRow._data){rowRow._data=srcRow._data;}else{this._copyRowData(rowRow,srcRow);}if(viewRecords!=rawRecords){viewRecords[viewRecords.length]=rowRow;}rawRecords[rawRecords.length]=rowRow;cnt++ ;}}nexacro.__forLoop(this,0,srcRecords.length,__copyRowList_loopFn);return cnt;};_pDataset._appendRowList=function(srcds,chkcol){var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var srcRecords=srcds._viewRecords;var idx_map=null;if(chkcol==true||chkcol=="true"){idx_map=this._makeIndexMap(srcds);}var cnt=0;function __appendRowList_loopFn(i){var srcRow=srcds.__getParsedRow(srcRecords[i]);if((srcRow._level==0)&&(srcRow._rtype&7)){var rowRow=[];rowRow._level=0;rowRow._rawidx=rawRecords.length;rowRow._rtype=1;if(idx_map){this._copyMappingRowData(rowRow,srcRow,idx_map);}else{this._copyConvRowData(rowRow,srcRow);}if(viewRecords!=rawRecords){viewRecords[viewRecords.length]=rowRow;}rawRecords[rawRecords.length]=rowRow;cnt++ ;}}nexacro.__forLoop(this,0,srcRecords.length,__appendRowList_loopFn);return cnt;};_pDataset._copyData=function(srcds,isFiltered){if(this.name==undefined){this.id=this.name=srcds.id;}this._copyConstColList(srcds._constVars);this._appendColList(srcds.colinfos);if(isFiltered==true){if(srcds._viewRecords.length>0){this._copyRowList(srcds,srcds._viewRecords,true);}}else{if(srcds._rawRecords.length>0){this._copyRowList(srcds,srcds._rawRecords,true);}}this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;};_pDataset._appendData=function(srcds,chkcol,bupdateconst){if(this.colcount==0){this._appendColList(srcds.colinfos);if(bupdateconst==true&&srcds._constVars.length>0){this._copyConstColList(srcds._constVars);}}else{if(bupdateconst==true&&srcds._constVars.length>0){this._appendConstColList(srcds._constVars,chkcol);}}if(srcds._viewRecords.length>0){this._appendRowList(srcds,chkcol);}this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;};_pDataset.copyRow=function(torow,srcds,fromrow,strcolinfo){if(srcds==null){return false;}torow=torow|0;fromrow=fromrow|0;if(torow<0||torow>=this.rowcount){return false;}if(srcds._isDataset&&!srcds._isDataset()){return false;}if(fromrow<0||fromrow>=srcds.rowcount){return false;}var destRow=this._viewRecords[torow];var srcRow=srcds.__getParsedRow(srcds._viewRecords[fromrow]);if(destRow&&srcRow){var idx_map=this._makeIndexMap(srcds,strcolinfo);if(idx_map){this._copyMappingRowDataRowType(destRow,srcRow,idx_map,torow);if(this._eventstat&&((this.oncolumnchanged&&this.oncolumnchanged._has_handlers)||(this.onvaluechanged&&this.onvaluechanged._has_handlers))){var evt=new nexacro.DSColChangeEventInfo(this,"oncolumnchanged",torow, -1, -1,"",undefined,"");this.on_fire_oncolumnchanged(evt);this.on_fire_onvaluechanged(evt);}return true;}}return false;};_pDataset.copyData=function(srcds,isFiltered){if(!srcds||(srcds._isDataset&&!srcds._isDataset())){return  -1;}isFiltered=nexacro._toBoolean(isFiltered);var bFilter=(this.filterstr==null||this.filterstr=="")?false:true;var bSortGroup=(this.keystring==""||this.keystring=="S:"||this.keystring=="G:")?false:true;var oldpos=this.rowposition;this._clearAll();this._copyData(srcds,isFiltered);var lazyParsing=srcds.lazyParsing;if(lazyParsing){this.lazyParsing=lazyParsing;this.__loadConvertFn=srcds.__loadConvertFn;this.__lazyParseRecordFn=srcds.__lazyParseRecordFn;}this._eventstat=!this.loadstatus&&this.enableevent;if(bFilter){this._filterFn=null;}if(bSortGroup){this._deleteAllGroupData();this._clearKeyCols();}if(bFilter){this._reFilter();}if(bSortGroup){this._resetSortGroup();}if(this._eventstat){this.on_fire_onrowsetchanged( -1,this.rowcount,11);}if(oldpos==this.rowposition){if(this.rowcount>0){if(oldpos!=0){this._setRowPosition(0,undefined,51);}else if(this.id!=srcds.id){this.rowposition= -1;this._setRowPosition(oldpos,undefined,53);}else{if(this.onvaluechanged&&this.onvaluechanged._has_handlers){var evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",0, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}else if(oldpos> -1){this._forcesetRowPosition( -1,51);}}this.loadstatus=false;this._eventstat=this.enableevent;return this.rowcount;};_pDataset._mergeData=function(srcds){var idx_map=this._makeIndexMap(srcds);if(idx_map==null){return 0;}var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var srcRecords=srcds._rawRecords;var cnt=0;function __mergeData_loopFn(i){var srcRow=srcds.__getParsedRow(srcRecords[i]);if((srcRow._level==0)&&(srcRow._rtype&7)){var rowRow=[];rowRow._level=0;rowRow._rawidx=rawRecords.length;rowRow._rtype=1;this._copyMappingRowData(rowRow,srcRow,idx_map);if(viewRecords!=rawRecords){viewRecords[viewRecords.length]=rowRow;}rawRecords[rawRecords.length]=rowRow;cnt++ ;}}nexacro.__forLoop(this,0,srcRecords.length,__mergeData_loopFn);if(cnt>0){this.rowcount+=cnt;}return cnt;};_pDataset.mergeData=function(srcds){if(!srcds||(srcds._isDataset&&!srcds._isDataset())){return  -1;}var cnt=0;if(srcds._rawRecords.length>0){var oldloadstatus=this.loadstatus;this.loadstatus=true;this._eventstat=false;cnt=this._mergeData(srcds);this.loadstatus=oldloadstatus;this._eventstat=!this.loadstatus&&this.enableevent;if(this._eventstat){var oldpos=this.rowposition;this.on_fire_onrowsetchanged( -1,cnt,13);if(oldpos==this.rowposition&&oldpos== -1&&cnt>0){this._setRowPosition(0,undefined,51);}}}return this.rowcount;};_pDataset.appendData=function(srcds,chkcol,bupdateconst){if(!srcds||(srcds._isDataset&&!srcds._isDataset())){return  -1;}if(srcds._viewRecords.length>0){var oldloadstatus=this.loadstatus;this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;this._appendData(srcds,chkcol,bupdateconst);this.loadstatus=oldloadstatus;this._eventstat=!this.loadstatus&&this.enableevent;var oldpos=this.rowposition;if(this._eventstat){this.on_fire_onrowsetchanged( -1,this.rowcount,12);}if(oldpos==this.rowposition&&oldpos== -1&&this.rowcount>0){this._setRowPosition(0,undefined,51);}this.loadstatus=false;this._eventstat=this.enableevent;return this.rowcount;}return 0;};_pDataset.applyChange=function(){var rawRecords=this._rawRecords;var delcnt=0;function applyChange_loop(i){if(i>=0){var rowRow=rawRecords[i];if(rowRow._rtype==0||rowRow._rtype==8||rowRow._rtype==16){rawRecords.splice(i,1);rowRow.length=0;delcnt++ ;}else{rowRow._rtype=1;if(rowRow._orgrow){rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){delete rowRow._orgdata;}}i-- ;return false;}return true;}nexacro.__reverseForLoop(this,rawRecords.length-1,0,applyChange_loop);if(this._deletedRecords){this._clearRecordData(this._deletedRecords);}if(delcnt>0){this._adjustRawIdx(0,rawRecords.length);}if(this.enableevent){this.on_fire_onrowsetchanged( -1,rawRecords.length,40);}};_pDataset.reset=function(){this.loadstatus=true;this._eventstat=this.enableevent;var rawRecords=this._rawRecords;var b_sort=false;function __reset_loopFn(i){var rowRow=rawRecords[i];if(rowRow._rtype==0||rowRow._rtype==2||rowRow._rtype==16){rawRecords.splice(i,1);b_sort=true;}else if(rowRow._rtype==4){rowRow._rtype=1;if(rowRow._orgrow){this._copyRowData(rowRow,rowRow._orgrow);rowRow._orgrow.length=0;delete rowRow._orgrow;}else if(rowRow._orgdata){rowRow._data=rowRow._orgdata;delete rowRow._orgdata;}}else if(rowRow._rtype==8){rowRow._rtype=1;}}nexacro.__reverseForLoop(this,rawRecords.length-1,0,__reset_loopFn);var delRecords=this._deletedRecords;if(delRecords.length>0){function __reset_del_loopFn(i){delRecords[i]._rtype=1;rawRecords[rawRecords.length]=delRecords[i];}nexacro.__reverseForLoop(this,delRecords.length-1,0,__reset_del_loopFn);delRecords.splice(0,delRecords.length);b_sort=true;}if(b_sort){rawRecords.sort(function(a,b){return (a._orgidx-b._orgidx);});this._adjustRawIdx(0,rawRecords.length);}if(this._viewRecords!=this._rawRecords){this._viewRecords.length=0;}this._viewRecords=this._rawRecords;this._reFilter();this.loadstatus=false;this._eventstat=this.enableevent;this.rowcount=this._viewRecords.length;if(this._eventstat){this._bWorkingstatus=true;this.on_fire_onload(0,"",2);if(this.rowposition>=this.rowcount&&this.rowcount>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition(this.rowposition,51);}this._bWorkingstatus=false;}};_pDataset._assignRowList=function(srcds,srcRecords){var cnt=0;var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;function __assignRowList_loopFn(i){var srcRow=srcds.__getParsedRow(srcRecords[i]);var rowRow;if(srcRow._level==0){if(srcRow._rtype&7){rowRow=[];rowRow._level=0;rowRow._rawidx=rawRecords.length;rowRow._rtype=srcRow._rtype;this._copyRowData(rowRow,srcRow);if(srcRow._orgrow){var srcOrgRow=srcRow._orgrow;var orgRow=[];this._copyRowData(orgRow,srcOrgRow);rowRow._orgrow=orgRow;}if(viewRecords!=rawRecords){viewRecords[viewRecords.length]=rowRow;}rawRecords[rawRecords.length]=rowRow;cnt++ ;}else if(srcRow._rtype==8){rowRow=[];rowRow._level=0;rowRow._rawidx= -1;rowRow._rtype=8;this._copyRowData(rowRow,srcRow);delRecords[delRecords.length]=rowRow;cnt++ ;}}}nexacro.__forLoop(this,0,srcRecords.length,__assignRowList_loopFn);return cnt;};_pDataset._assign=function(srcds){this._copyConstColList(srcds._constVars);this._appendColList(srcds.colinfos);this._assignRowList(srcds,srcds._rawRecords);if(srcds._deletedRecords.length){this._assignRowList(srcds,srcds._deletedRecords);}this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;};_pDataset.assign=function(srcds){if(!srcds||(srcds._isDataset&&!srcds._isDataset())){return  -1;}this._eventstat=this.enableevent;var oldpos=this.rowposition;this._clearAll();this._assign(srcds);if(this.filterstr){this.filter(this.filterstr);}if(this.keystring){this.on_apply_keystring();}if(this._eventstat){this.on_fire_onrowsetchanged( -1,this.rowcount,10);}if(oldpos==this.rowposition){if(this.rowcount>0){if(oldpos!=0){this._setRowPosition(0,undefined,51);}else if(this.id!=srcds.id){this.rowposition= -1;this._setRowPosition(oldpos,undefined,53);}else{if(this.onvaluechanged&&this.onvaluechanged._has_handlers){var evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",0, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}else if(oldpos> -1){this._forcesetRowPosition( -1,51);}}return this.rowcount;};_pDataset._identifyExpr=function(expr){if(typeof (expr)!="string"){return expr;}var ex=expr.substr(0,4).toUpperCase();if(ex=="EXPR"||ex=="BIND"){var exp=expr.substr(4).trim();if(/^expr(\s*):|^bind(\s*):/.test(expr)){expr=exp.substr(1);}else{expr=exp.substring(1,exp.length-1);}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn=="function"){expr=exprfn.call(null,this.rowposition,this.rowposition,this,this,this._viewRecords,this._viewRecords[this.rowposition],[]);}}return expr;};_pDataset._findRowColValue=function(records,colidx,cmpval,start,end){var colinfo=this.colinfos[colidx];if(!colinfo){return  -1;}cmpval=colinfo._fromVal(cmpval);function __findRowColValue_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){if(this._isEqualValue(rowRow[colidx],cmpval,colinfo.ntype)){return true;}}}end=end>records.length?records.length:end;var idx=nexacro.__forLoop(this,start,end,__findRowColValue_loopFn);return (idx<end)?idx: -1;};_pDataset._findRowExprValue=function(records,exprfn,cmpval,start,end,args){function __findRowExprValue_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(this._isEqualValue(val,cmpval, -1)){return true;}}}end=end>records.length?records.length:end;var idx=nexacro.__forLoop(this,start,end,__findRowExprValue_loopFn);return (idx<end)?idx: -1;};_pDataset.findRow=function(expr,cmpval,start,end,args){return this._findRow(this._viewRecords,expr,cmpval,start,end,args);};_pDataset._findRow=function(records,expr,cmpval,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}if(start>=end){return  -1;}var colinfo=this.colinfos[expr];if(colinfo){return this._findRowColValue(records,colinfo._index,cmpval,start,end);}var colidx=( +expr);var constVar;if(colidx!=expr){constVar=this._constVars[expr];if(constVar){return (constVar.value==cmpval)?start: -1;}else{if(typeof (expr)=="string"){return  -1;}colinfo=this.colinfos[0];if(colinfo){return this._findRowColValue(records,colinfo._index,cmpval,start,end);}}return  -1;}else{constVar=this._constVars[colidx-this.colinfos.length];if(constVar){return (constVar.value==cmpval)?start: -1;}else{constVar=this._constVars[expr];return (constVar&&constVar.value==cmpval)?start: -1;}}};_pDataset.findRowNF=function(expr,cmpval,start,end,args){return this._findRow(this._rawRecords,expr,cmpval,start,end,args);};_pDataset._findRowExpr=function(records,exprfn,start,end,args){function __findRowExpr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(val){return true;}}}end=end>records.length?records.length:end;var idx=nexacro.__forLoop(this,start,end,__findRowExpr_loopFn);return (idx<end)?idx: -1;};_pDataset.findRowExpr=function(expr,start,end,args){var records=this._viewRecords;start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}if(start>=end){return  -1;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return  -1;}return this._findRowExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));};_pDataset.findRowExprNF=function(expr,start,end,args){var records=this._rawRecords;start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}if(start>=end){return  -1;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return  -1;}return this._findRowExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));};_pDataset._findRowAsValue=function(records,colidx,cmpval,start,end){var colinfo=this.colinfos[colidx];if(!colinfo){return  -1;}cmpval=cmpval+"";function __findRowAsValue_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){if(this._isLikeValue(rowRow[colidx],cmpval)){return true;}}}end=end>records.length?records.length:end;var idx=nexacro.__forLoop(this,start,end,__findRowAsValue_loopFn);return (idx<end)?idx: -1;};_pDataset._findRowAsExpr=function(records,exprfn,cmpval,start,end,args){cmpval=cmpval+"";function __findRowAsExpr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(this._isLikeValue(val,cmpval)){return true;}}}end=end>records.length?records.length:end;var idx=nexacro.__forLoop(this,start,end,__findRowAsExpr_loopFn);return (idx<end)?idx: -1;};_pDataset.findRowAs=function(expr,cmpval,start,end,args){return this._findRowAs(this._viewRecords,expr,cmpval,start,end,args);};_pDataset._findRowAs=function(records,expr,cmpval,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}if(start>=end){return  -1;}var colinfo=this.colinfos[expr];if(colinfo){return this._findRowAsValue(records,colinfo._index,cmpval,start,end);}var colidx=( +expr);var constVar;if(colidx!=expr){constVar=this._constVars[expr];if(constVar){if(this._isLikeValue(constVar.value,cmpval)){return start;}else{return  -1;}}else{if(typeof (expr)=="string"){return  -1;}colinfo=this.colinfos[0];if(colinfo){return this._findRowAsValue(records,colinfo._index,cmpval,start,end);}}return  -1;}else{constVar=this._constVars[colidx-this.colinfos.length];if(constVar){if(this._isLikeValue(constVar.value,cmpval)){return start;}else{return  -1;}}else{constVar=this._constVars[expr];if(constVar){if(this._isLikeValue(constVar.value,cmpval)){return start;}else{return  -1;}}}}return  -1;};_pDataset.findRowAsNF=function(expr,cmpval,start,end,args){return this._findRowAs(this._rawRecords,expr,cmpval,start,end,args);};_pDataset.findNFRowIndex=function(row){if(this._viewRecords&&this._viewRecords[row]){return this._viewRecords[row]._rawidx;}return  -1;};_pDataset.lookup=function(expr,cmpval,outcol,args){expr=this._identifyExpr(expr);var row=this.findRow(expr,cmpval,0,this._viewRecords.length,args);return (row== -1)?undefined:this.getColumn(row,outcol);};_pDataset.lookupNF=function(expr,cmpval,outcol,args){expr=this._identifyExpr(expr);var row=this.findRowNF(expr,cmpval,0,this._rawRecords.length,args);return (row<0)?undefined:this.getColumnNF(row,outcol);};_pDataset.lookupAs=function(expr,cmpval,outcol,args){expr=this._identifyExpr(expr);var row=this._findRowAs(this._viewRecords,expr,cmpval,0,this._viewRecords.length,args);return (row<0)?undefined:this.getColumn(row,outcol);};_pDataset.lookupAsNF=function(expr,cmpval,outcol,args){expr=this._identifyExpr(expr);var row=this._findRowAs(this._rawRecords,expr,cmpval,0,this._rawRecords.length,args);return (row<0)?undefined:this.getColumnNF(row,outcol);};_pDataset._extractRowsExpr=function(records,exprfn,start,end,args){var rows=[];function __loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(val){rows[rows.length]=i;}}}nexacro.__forLoop(this,start,end,__loopFn);return rows;};_pDataset.__extractRows=function(records,expr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}if(start>=end){return  -1;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return  -1;}return this._extractRowsExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));};_pDataset.extractRows=function(expr,start,end,args){return this.__extractRows(this._viewRecords,expr,start,end,args);};_pDataset.extractRowsNF=function(expr,start,end,args){return this.__extractRows(this._rawRecords,expr,start,end,args);};_pDataset._getCountExpr=function(records,exprFn,start,end,args){var cnt=0;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var colval=exprFn.call(this,i,i,null,this,records,rowRow,args);if(colval){cnt++ ;}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);return cnt|0;};_pDataset._getRowsCountExpr=function(records,rows,exprFn,args){var cnt=0;function __loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(colval){cnt++ ;}}}nexacro.__forLoop(this,0,rows.length,__loopFn);return cnt|0;};_pDataset._getTrueCountValue=function(records,colidx,start,end){var cnt=0;function __loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){if(rowRow[colidx]){cnt++ ;}}}nexacro.__forLoop(this,start,end,__loopFn);return cnt;};_pDataset._getTrueCountExpr=function(records,exprFn,start,end,args){var cnt=0;function __loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var colval=exprFn.call(this,i,i,null,this,records,rowRow,args);if(colval){cnt++ ;}}}nexacro.__forLoop(this,start,end,__loopFn);return cnt|0;};_pDataset._getRowsTrueCountValue=function(records,rows,colidx){var cnt=0;function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){if(rowRow[colidx]){cnt++ ;}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);return cnt;};_pDataset._getRowsTrueCountExpr=function(records,rows,exprFn,args){var cnt=0;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(colval){cnt++ ;}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);return cnt|0;};_pDataset.__getCount=function(records,expr,start,end,args){if(!expr){return records.length;}start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var colinfo=this.colinfos[expr];if(colinfo){return this._getCountValue(records,colinfo._index,start,end,colinfo.ntype);}var colidx=( +expr);var constVar;if(colidx!=expr){constVar=this._constVars[expr];if(constVar){return (constVar.value!=null)?(end-start):0;}}else{constVar=this._constVars[colidx-this.colinfos.length];if(constVar){return (constVar.value!=null)?(end-start):0;}else{constVar=this._constVars[expr];return (constVar&&constVar.value!=null)?(end-start):0;}}return 0;};_pDataset.getCount=function(expr,start,end,args){return this.__getCount(this._viewRecords,expr,start,end,args);};_pDataset.getCountNF=function(expr,start,end,args){return this.__getCount(this._rawRecords,expr,start,end,args);};_pDataset.__getRowsCount=function(records,rows,expr,args){if(!(rows instanceof Array)||rows.length<=0){return 0;}var val= +expr;if(val==val){return rows.length;}var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsCountValue(records,rows,colinfo._index,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){return (constVar.value!=null)?(rows.length):0;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getRowsCountExpr(records,rows,exprfn,((args instanceof Array)?args:[]));};_pDataset.getRowsCount=function(rows,expr,args){return this.__getRowsCount(this._viewRecords,rows,expr,args);};_pDataset.getRowsCountNF=function(rows,expr,args){return this.__getRowsCount(this._rawRecords,rows,expr,args);};_pDataset.__getTrueCount=function(records,expr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +expr;if(val==val){return (val)?(end-start):0;}var colinfo=this.colinfos[expr];if(colinfo){return this._getTrueCountValue(records,colinfo._index,start,end);}var constVar=this._constVars[expr];if(constVar){return (constVar.value)?(end-start):0;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getTrueCountExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));};_pDataset.getTrueCount=function(expr,start,end,args){return this.__getTrueCount(this._viewRecords,expr,start,end,args);};_pDataset.getTrueCountNF=function(expr,start,end,args){return this.__getTrueCount(this._rawRecords,expr,start,end,args);};_pDataset.__getRowsTrueCount=function(records,rows,expr,args){if(!(rows instanceof Array)||rows.length<=0){return 0;}var val= +expr;if(val==val){return (val)?(rows.length):0;}var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsTrueCountValue(records,rows,colinfo._index);}var constVar=this._constVars[expr];if(constVar){return (constVar.value)?(rows.length):0;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getRowsTrueCountExpr(records,rows,exprfn,((args instanceof Array)?args:[]));};_pDataset.getRowsTrueCount=function(rows,expr,args){return this.__getRowsTrueCount(this._viewRecords,rows,expr,args);};_pDataset.getRowsTrueCountNF=function(rows,expr,args){return this.__getRowsTrueCount(this._rawRecords,rows,expr,args);};_pDataset._getSumValue=function(records,colidx,start,end,coltype){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}var sum;if(coltype==4){sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);return sum.isNaN()?0:sum;}else{sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;}};_pDataset._getSumExpr=function(records,exprFn,start,end,args){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var colval=exprFn.call(this,i,i,null,this,records,rowRow,args);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(isdecimal){return sum.isNaN()?0:sum;}return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;};_pDataset._getRowsSumValue=function(records,rows,colidx,coltype){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}var sum;if(coltype==4){sum=new nexacro.Decimal();function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);return sum.isNaN()?0:sum;}else{sum=0;function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;}};_pDataset._getRowsSumExpr=function(records,rows,exprFn,args){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);if(isdecimal){return sum;}return (typeof sum=="number")?sum:sum|0;};_pDataset._getCaseSumValue=function(records,cmpFn,colidx,start,end,coltype,args){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}if(coltype==4){var sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);return sum.isNaN()?0:sum;}else{var sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){sum+=( +colval);}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;}};_pDataset._getCaseSumExpr=function(records,cmpFn,valFn,start,end,cmpargs,valargs){var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,cmpargs);if(cmp){var colval=valFn.call(this,i,i,null,this,records,rowRow,valargs);if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(isdecimal){return sum.isNaN()?0:sum;}return (typeof sum=="number"&&!isNaN(sum))?sum:sum|0;};_pDataset._getAvgValue=function(records,colidx,start,end,coltype,excludeNaN){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}if(coltype==4){var cnt=0;var sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""||colval===0))){cnt++ ;}if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);if(cnt==0||sum.isNaN()){return NaN;}sum.divDouble(cnt);return sum;}else{var cnt=0;var sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""||colval===0))){cnt++ ;}if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,start,end,__Value_loopFn);if(cnt==0||sum!=sum){return NaN;}return sum/cnt;}};_pDataset._getAvgExpr=function(records,exprFn,start,end,excludeNaN,args){var cnt=0;var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var colval=exprFn.call(this,i,rowRow._rawidx,null,this,records,rowRow,args);if(!excludeNaN||(colval!=null&&!isNaN(colval)&&(colval!==""||colval===0))){cnt++ ;}if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);if(cnt==0||sum!=sum){return NaN;}if(isdecimal){sum.divDouble(cnt);return sum;}return (typeof sum=="number"&&!isNaN(sum))?sum/cnt:0;};_pDataset._getRowsAvgValue=function(records,rows,colidx,coltype,excludeNaN){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}if(coltype==4){var cnt=0;var sum=new nexacro.Decimal();function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""||colval===0))){cnt++ ;}if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);if(cnt==0||sum.isNaN()){return NaN;}sum.divDouble(cnt);return sum;}else{var cnt=0;var sum=0;function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""||colval===0))){cnt++ ;}if(colval){sum+=( +colval);}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);if(cnt==0||sum!=sum){return NaN;}return sum/cnt;}};_pDataset._getRowsAvgExpr=function(records,rows,exprFn,excludeNaN,args){var cnt=0;var sum=0;var isdecimal=false;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var colval=exprFn.call(this,idx,idx,null,this,records,rowRow,args);if(!excludeNaN){cnt++ ;}else{if(colval){if(colval instanceof nexacro.Decimal){if(!colval.isNaN()){cnt++ ;}}else{cnt++ ;}}else{if(colval===0){cnt++ ;}}}if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);if(cnt==0||sum!=sum){return NaN;}if(isdecimal){sum.divDouble(cnt);return sum;}return sum/cnt;};_pDataset._getCountValue=function(records,colidx,start,end,coltype){var cnt=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){if(colidx<0||rowRow[colidx]!=null){cnt++ ;}}}nexacro.__forLoop(this,start,end,__Value_loopFn);return cnt;};_pDataset._getRowsCountValue=function(records,rows,colidx,coltype){var cnt=0;function __loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){if(rowRow[colidx]!=null){cnt++ ;}}}nexacro.__forLoop(this,0,rows.length,__loopFn);return cnt;};_pDataset.__getSum=function(records,expr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +expr;if(val==val){return val*(end-start);}var colinfo=this.colinfos[expr];if(colinfo){return this._getSumValue(records,colinfo._index,start,end,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){val=constVar.value|0;if(val==val){return 0;}return val*(end-start);}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getSumExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));};_pDataset.getSum=function(expr,start,end,args){return this.__getSum(this._viewRecords,expr,start,end,args);};_pDataset.getSumNF=function(expr,start,end,args){return this.__getSum(this._rawRecords,expr,start,end,args);};_pDataset.__getRowsSum=function(records,rows,expr,args){if(!(rows instanceof Array)||rows.length<=0){return 0;}var val= +expr;if(val==val){return val*(rows.length);}var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsSumValue(records,rows,colinfo._index,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){val=constVar.value|0;if(val==val){return 0;}return val*(rows.length);}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getRowsSumExpr(records,rows,exprfn,((args instanceof Array)?args:[]));};_pDataset.getRowsSum=function(rows,expr,args){return this.__getRowsSum(this._viewRecords,rows,expr,args);};_pDataset.getRowsSumNF=function(rows,expr,args){return this.__getRowsSum(this._rawRecords,rows,expr,args);};_pDataset._getMinValue=function(records,colidx,start,end,coltype){var min;if(coltype==4){function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(min==null||colval.hi<min.hi||(colval.hi==min.hi&&colval.lo<min.lo))){min=colval;}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);}else{function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval===0||colval){if(min==null||colval<min){min=colval;}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);}return min;};_pDataset._getMinExpr=function(records,exprfn,start,end,args){var min=undefined;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(val===0||val){if(min==null||this._compareValue(val,min)<0){min=val;}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);return min;};_pDataset._getRowsMinValue=function(records,rows,colidx,coltype){var min=undefined;if(coltype==4){function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(min==null||colval.hi<min.hi||(colval.hi==min.hi&&colval.lo<min.lo))){min=colval;}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);}else{function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval===0||colval){if(min==null||colval<min){min=colval;}}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);}return min;};_pDataset._getRowsMinExpr=function(records,rows,exprfn,args){var min=undefined;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var val=exprfn.call(this,idx,idx,null,this,records,rowRow,args);if(val===0||val){if(min==null||this._compareValue(val,min)<0){min=val;}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);return min;};_pDataset.__getMin=function(records,expr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +expr;if(val==val){return val;}var colinfo=this.colinfos[expr];if(colinfo){return this._getMinValue(records,colinfo._index,start,end,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return undefined;}var min=this._getMinExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));if(min instanceof nexacro.Decimal){return min.isNaN()?undefined:min;}var _min= +min;return _min!=_min?undefined:min;};_pDataset.getMin=function(expr,start,end,args){return this.__getMin(this._viewRecords,expr,start,end,args);};_pDataset.getMinNF=function(expr,start,end,args){return this.__getMin(this._rawRecords,expr,start,end,args);};_pDataset.__getRowsMin=function(records,rows,expr,args){if(!(rows instanceof Array)||rows.length<=0){return undefined;}var val= +expr;if(val==val){return val;}var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsMinValue(records,rows,colinfo._index,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return undefined;}var min=this._getRowsMinExpr(records,rows,exprfn,((args instanceof Array)?args:[]));if(min instanceof nexacro.Decimal){return min.isNaN()?undefined:min;}var _min= +min;return _min!=_min?undefined:min;};_pDataset.getRowsMin=function(rows,expr,args){return this.__getRowsMin(this._viewRecords,rows,expr,args);};_pDataset.getRowsMinNF=function(rows,expr,args){return this.__getRowsMin(this._rawRecords,rows,expr,args);};_pDataset._getMaxValue=function(records,colidx,start,end,coltype){var max=undefined;if(coltype==4){function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(max==null||colval.hi>max.hi||(colval.hi==max.hi&&colval.lo>max.lo))){max=colval;}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);}else{function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval===0||colval){if(max==null||colval>max){max=colval;}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);}return max;};_pDataset._getMaxExpr=function(records,exprfn,start,end,args){var max=undefined;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var val=exprfn.call(this,i,i,null,this,records,rowRow,args);if(val===0||val){if(max==null||this._compareValue(val,max)>0){max=val;}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);return max;};_pDataset._getRowsMaxValue=function(records,rows,colidx,coltype){var max=undefined;if(coltype==4){function __Decimal_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(max==null||colval.hi>max.hi||(colval.hi==max.hi&&colval.lo>max.lo))){max=colval;}}}}nexacro.__forLoop(this,0,rows.length,__Decimal_loopFn);}else{function __Value_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&7)){var colval=rowRow[colidx];if(colval===0||colval){if(max==null||colval>max){max=colval;}}}}nexacro.__forLoop(this,0,rows.length,__Value_loopFn);}return max;};_pDataset._getRowsMaxExpr=function(records,rows,exprfn,args){var max=undefined;function __Expr_loopFn(i){var idx=rows[i];var rowRow=this.__getParsedRow(records[idx]);if(rowRow&&(rowRow._rtype&15)){var val=exprfn.call(this,idx,idx,null,this,records,rowRow,args);if(val===0||val){if(max==null||this._compareValue(val,max)>0){max=val;}}}}nexacro.__forLoop(this,0,rows.length,__Expr_loopFn);return max;};_pDataset.__getMax=function(records,expr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +expr;if(val==val){return val;}var colinfo=this.colinfos[expr];if(colinfo){return this._getMaxValue(records,colinfo._index,start,end,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return undefined;}var max=this._getMaxExpr(records,exprfn,start,end,((args instanceof Array)?args:[]));if(max instanceof nexacro.Decimal){return max.isNaN()?undefined:max;}var _max= +max;return _max!=_max?undefined:max;};_pDataset.getMax=function(expr,start,end,args){return this.__getMax(this._viewRecords,expr,start,end,args);};_pDataset.getMaxNF=function(expr,start,end,args){return this.__getMax(this._rawRecords,expr,start,end,args);};_pDataset.__getRowsMax=function(records,rows,expr,args){if(!(rows instanceof Array)||rows.length<=0){return undefined;}var val= +expr;if(val==val){return val;}var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsMaxValue(records,rows,colinfo._index,colinfo.ntype);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return undefined;}var max=this._getRowsMaxExpr(records,rows,exprfn,((args instanceof Array)?args:[]));if(max instanceof nexacro.Decimal){return max.isNaN()?undefined:max;}var _max= +max;return _max!=_max?undefined:max;};_pDataset.getRowsMax=function(rows,expr,args){return this.__getRowsMax(this._viewRecords,rows,expr,args);};_pDataset.getRowsMaxNF=function(rows,expr,args){return this.__getRowsMax(this._rawRecords,rows,expr,args);};_pDataset.__getAvg=function(records,expr,start,end,excludeNaN,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +expr;if(val==val){return val;}excludeNaN=nexacro._toBoolean(excludeNaN);var colinfo=this.colinfos[expr];if(colinfo){return this._getAvgValue(records,colinfo._index,start,end,colinfo.ntype,excludeNaN);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getAvgExpr(records,exprfn,start,end,excludeNaN,((args instanceof Array)?args:[]));};_pDataset.getAvg=function(expr,start,end,excludeNaN,args){return this.__getAvg(this._viewRecords,expr,start,end,((excludeNaN||excludeNaN===false)?excludeNaN:true),args);};_pDataset.getAvgNF=function(expr,start,end,excludeNaN,args){return this.__getAvg(this._rawRecords,expr,start,end,((excludeNaN||excludeNaN===false)?excludeNaN:true),args);};_pDataset.__getRowsAvg=function(records,rows,expr,excludeNaN,args){if(!(rows instanceof Array)||rows.length<=0){return 0;}var val= +expr;if(val==val){return val;}excludeNaN=nexacro._toBoolean(excludeNaN);var colinfo=this.colinfos[expr];if(colinfo){return this._getRowsAvgValue(records,rows,colinfo._index,colinfo.ntype,excludeNaN);}var constVar=this._constVars[expr];if(constVar){return constVar.value;}var exprfn=this._exprFuncs[expr];if(exprfn==null){exprfn=this._exprFuncs[expr]=this._createExprFunc(expr);}if(typeof exprfn!="function"){return 0;}return this._getRowsAvgExpr(records,rows,exprfn,excludeNaN,((args instanceof Array)?args:[]));};_pDataset.getRowsAvg=function(rows,expr,excludeNaN,args){return this.__getRowsAvg(this._viewRecords,rows,expr,((excludeNaN||excludeNaN===false)?excludeNaN:true),args);};_pDataset.getRowsAvgNF=function(rows,expr,excludeNaN,args){return this.__getRowsAvg(this._rawRecords,rows,expr,((excludeNaN||excludeNaN===false)?excludeNaN:true),args);};_pDataset._getCaseCount=function(records,cmpFn,start,end,args){var cnt=0;function __loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){cnt++ ;}}}nexacro.__forLoop(this,start,end,__loopFn);return cnt;};_pDataset.__getCaseCount=function(records,cmpExpr,start,end,args){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +cmpExpr;if(val==val){return (val)?(end-start):0;}var constVar=this._constVars[cmpExpr];if(constVar){return constVar.value?(end-start):0;}var colinfo=this.colinfos[cmpExpr];if(colinfo){return this._getTrueCount(records,colinfo._index,start,end);}var cmpFn=this._exprFuncs[cmpExpr];if(cmpFn==null){cmpFn=this._exprFuncs[cmpExpr]=this._createExprFunc(cmpExpr);}if(typeof cmpFn!="function"){return 0;}return this._getCaseCount(records,cmpFn,start,end,((args instanceof Array)?args:[]));};_pDataset.getCaseCount=function(cmpExpr,start,end,args){return this.__getCaseCount(this._viewRecords,cmpExpr,start,end,args);};_pDataset.getCaseCountNF=function(cmpExpr,start,end,args){return this.__getCaseCount(this._rawRecords,cmpExpr,start,end,args);};_pDataset.__getCaseSum=function(records,cmpExpr,valExpr,start,end,args,valargs){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +cmpExpr;if(val==val){if(val){return this.__getSum(records,valExpr,start,end,valargs);}return 0;}var constVar=this._constVars[cmpExpr];if(constVar){if(constVar.value){return this.__getSum(records,valExpr,start,end,valargs);}return 0;}var colinfo=this.colinfos[cmpExpr];if(colinfo){cmpExpr=colinfo.id;}var cmpFn=this._exprFuncs[cmpExpr];if(cmpFn==null){cmpFn=this._exprFuncs[cmpExpr]=this._createExprFunc(cmpExpr);}if(typeof cmpFn!="function"){return 0;}val= +valExpr;if(val==val){if(val){var cnt=this._getCaseCount(records,cmpFn,start,end,((args instanceof Array)?args:[]));return val*cnt;}return 0;}constVar=this._constVars[valExpr];if(constVar){if(constVar.value){return constVar.value*this._getCaseCount(records,cmpFn,start,end,((args instanceof Array)?args:[]));}return 0;}colinfo=this.colinfos[valExpr];if(colinfo){return this._getCaseSumValue(records,cmpFn,colinfo._index,start,end,colinfo.ntype,((args instanceof Array)?args:[]));}var valFn=this._exprFuncs[valExpr];if(valFn==null){valFn=this._exprFuncs[valExpr]=this._createExprFunc(valExpr);}if(typeof valFn!="function"){return 0;}return this._getCaseSumExpr(records,cmpFn,valFn,start,end,((args instanceof Array)?args:[]),((valargs instanceof Array)?valargs:[]));};_pDataset.getCaseSum=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseSum(this._viewRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset.getCaseSumNF=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseSum(this._rawRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset._getCaseMinValue=function(records,cmpFn,colidx,start,end,coltype,args){var min=undefined;if(coltype==4){function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(min==null||colval.hi<min.hi||(colval.hi==min.hi&&colval.lo<min.lo))){min=colval;}}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);}else{function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval===0||colval){if(min==null||colval<min){min=colval;}}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);}return min;};_pDataset._getCaseMinExpr=function(records,cmpFn,valFn,start,end,args,valargs){var min=undefined;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var val=valFn.call(this,i,i,null,this,records,rowRow,valargs);if(val===0||val){if(min==null||this._compareValue(val,min)<0){min=val;}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);return min;};_pDataset.__getCaseMin=function(records,cmpExpr,valExpr,start,end,args,valargs){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +cmpExpr;if(val==val){if(val){return this.__getMin(records,valExpr,start,end,valargs);}return undefined;}var constVar=this._constVars[cmpExpr];if(constVar){if(constVar.value){return this.__getMin(records,valExpr,start,end,valargs);}return undefined;}var colinfo=this.colinfos[cmpExpr];if(colinfo){cmpExpr=colinfo.id;}var cmpFn=this._exprFuncs[cmpExpr];if(cmpFn==null){cmpFn=this._exprFuncs[cmpExpr]=this._createExprFunc(cmpExpr);}if(typeof cmpFn!="function"){return undefined;}val= +valExpr;var frow;if(val==val){if(val){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return val;}}return undefined;}constVar=this._constVars[valExpr];if(constVar){if(constVar.value){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return constVar.value;}}return undefined;}colinfo=this.colinfos[valExpr];if(colinfo){return this._getCaseMinValue(records,cmpFn,colinfo._index,start,end,colinfo.ntype,((args instanceof Array)?args:[]));}var valFn=this._exprFuncs[valExpr];if(valFn==null){valFn=this._exprFuncs[valExpr]=this._createExprFunc(valExpr);}if(typeof valFn!="function"){return undefined;}return this._getCaseMinExpr(records,cmpFn,valFn,start,end,((args instanceof Array)?args:[]),((valargs instanceof Array)?valargs:[]));};_pDataset.getCaseMin=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseMin(this._viewRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset.getCaseMinNF=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseMin(this._rawRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset._getCaseMaxValue=function(records,cmpFn,colidx,start,end,coltype,args){var max=undefined;if(coltype==4){function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval){if(colval instanceof nexacro.Decimal&&(max==null||colval.hi>max.hi||(colval.hi==max.hi&&colval.lo>max.lo))){max=colval;}}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);}else{function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(colval===0||colval){if(max==null||colval>max){max=colval;}}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);}return max;};_pDataset._getCaseMaxExpr=function(records,cmpFn,valFn,start,end,args,valargs){var max=undefined;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=valFn.call(this,i,i,null,this,records,rowRow,valargs);if(colval===0||colval){if(max==null||this._compareValue(colval,max)>0){max=colval;}}}}}nexacro.__forLoop(this,start,end,__Expr_loopFn);return max;};_pDataset.__getCaseMax=function(records,cmpExpr,valExpr,start,end,args,valargs){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var val= +cmpExpr;if(val==val){if(val){return this.__getMax(records,valExpr,start,end,valargs);}return undefined;}var constVar=this._constVars[cmpExpr];if(constVar){if(constVar.value){return this.__getMax(records,valExpr,start,end,valargs);}return undefined;}var colinfo=this.colinfos[cmpExpr];if(colinfo){cmpExpr=colinfo.id;}var cmpFn=this._exprFuncs[cmpExpr];if(cmpFn==null){cmpFn=this._exprFuncs[cmpExpr]=this._createExprFunc(cmpExpr);}if(typeof cmpFn!="function"){return undefined;}var frow;val= +valExpr;if(val==val){if(val){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return val;}}return undefined;}constVar=this._constVars[valExpr];if(constVar){if(constVar.value){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return constVar.value;}}return undefined;}colinfo=this.colinfos[valExpr];if(colinfo){return this._getCaseMaxValue(records,cmpFn,colinfo._index,start,end,colinfo.ntype,((args instanceof Array)?args:[]));}var valFn=this._exprFuncs[valExpr];if(valFn==null){valFn=this._exprFuncs[valExpr]=this._createExprFunc(valExpr);}if(typeof valFn!="function"){return undefined;}return this._getCaseMaxExpr(records,cmpFn,valFn,start,end,((args instanceof Array)?args:[]),((valargs instanceof Array)?valargs:[]));};_pDataset.getCaseMax=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseMax(this._viewRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset.getCaseMaxNF=function(cmpExpr,valExpr,start,end,args,valargs){return this.__getCaseMax(this._rawRecords,cmpExpr,valExpr,start,end,args,valargs);};_pDataset._getCaseAvgValue=function(records,cmpFn,colidx,start,end,coltype,excludeNaN,args){if(coltype!=2&&coltype!=3&&coltype!=4){return 0;}var cnt,sum;if(coltype==4){cnt=0;sum=new nexacro.Decimal();function __Decimal_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""))){cnt++ ;}if(colval){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble( +colval);}}}}}nexacro.__forLoop(this,start,end,__Decimal_loopFn);if(cnt==0||sum.isNaN()){return NaN;}sum.divDouble(cnt);return sum;}else{cnt=0;sum=0;function __Value_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=rowRow[colidx];if(!excludeNaN||(colval!=null&&(colval!==""))){cnt++ ;}if(colval){sum+=( +colval);}}}}nexacro.__forLoop(this,start,end,__Value_loopFn);if(cnt==0||sum!=sum){return NaN;}return sum/cnt;}};_pDataset._getCaseAvgExpr=function(records,cmpFn,valFn,start,end,excludeNaN,args,valargs){var cnt=0;var sum=0;var isdecimal=false;function __Expr_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&15){var cmp=cmpFn.call(this,i,i,null,this,records,rowRow,args);if(cmp){var colval=valFn.call(this,i,i,null,this,records,rowRow,valargs);if(!excludeNaN||(colval!=null&&!isNaN(colval)&&(colval!==""))){cnt++ ;}if(colval){if(isdecimal){if(colval instanceof nexacro.Decimal){sum.addDecimal(colval);}else{sum.addDouble(colval);}}else{if(colval instanceof nexacro.Decimal){sum=new nexacro.Decimal(sum);sum.addDecimal(colval);isdecimal=true;}else{sum+=(colval);}}}}}}end=records.length<end?records.length:end;nexacro.__forLoop(this,start,end,__Expr_loopFn);if(cnt==0||sum!=sum){return NaN;}if(isdecimal){sum.divDouble(cnt);return sum;}return sum/cnt;};_pDataset.__getCaseAvg=function(records,cmpExpr,valExpr,start,end,excludeNaN,args,valargs){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}excludeNaN=nexacro._toBoolean(excludeNaN);var val= +cmpExpr;if(val==val){if(val){return this.__getAvg(records,valExpr,start,end,excludeNaN,valargs);}return NaN;}var constVar=this._constVars[cmpExpr];if(constVar){if(constVar.value){return this.__getAvg(records,valExpr,start,end,excludeNaN,valargs);}return NaN;}var colinfo=this.colinfos[cmpExpr];if(colinfo){cmpExpr=colinfo.id;}var cmpFn=this._exprFuncs[cmpExpr];if(cmpFn==null){cmpFn=this._exprFuncs[cmpExpr]=this._createExprFunc(cmpExpr);}if(typeof cmpFn!="function"){return NaN;}var frow;val= +valExpr;if(val==val){if(val){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return val;}}return NaN;}constVar=this._constVars[valExpr];if(constVar){if(constVar.value){frow=this._findRowExpr(records,cmpFn,start,end,((args instanceof Array)?args:[]));if(frow>=0){return constVar.value;}}return 0;}colinfo=this.colinfos[valExpr];if(colinfo){return this._getCaseAvgValue(records,cmpFn,colinfo._index,start,end,colinfo.ntype,excludeNaN,((args instanceof Array)?args:[]));}var valFn=this._exprFuncs[valExpr];if(valFn==null){valFn=this._exprFuncs[valExpr]=this._createExprFunc(valExpr);}if(typeof valFn!="function"){return 0;}return this._getCaseAvgExpr(records,cmpFn,valFn,start,end,excludeNaN,((args instanceof Array)?args:[]),((valargs instanceof Array)?valargs:[]));};_pDataset.getCaseAvg=function(cmpExpr,valExpr,start,end,excludeNaN,args,valargs){return this.__getCaseAvg(this._viewRecords,cmpExpr,valExpr,start,end,((excludeNaN||excludeNaN===false)?excludeNaN:true),args,valargs);};_pDataset.getCaseAvgNF=function(cmpExpr,valExpr,start,end,excludeNaN,args,valargs){return this.__getCaseAvg(this._rawRecords,cmpExpr,valExpr,start,end,((excludeNaN||excludeNaN===false)?excludeNaN:true),args,valargs);};_pDataset._findMaxLengthRow=function(records,colidx,start,end){var maxLen=undefined;var maxRow= -1;function __loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(rowRow._rtype&7){var colval=rowRow[colidx];if(colval){var len=colval.toString().length;if(maxLen==null||len>maxLen){maxLen=len;maxRow=i;}}}}nexacro.__forLoop(this,start,end,__loopFn);return maxRow;};_pDataset.__findMaxLengthRow=function(records,colid,start,end){start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var colidx=this.getColIndex(colid);if(colidx>=0){if(colidx<this.colinfos.length){return this._findMaxLengthRow(records,colidx,start,end);}else{return start;}}return  -1;};_pDataset.findMaxLengthRow=function(colid,start,end){return this.__findMaxLengthRow(this._viewRecords,colid,start,end);};_pDataset.findMaxLengthRowNF=function(colid,start,end){return this.__findMaxLengthRow(this._rawRecords,colid,start,end);};_pDataset.__createKeyRowsSortFunc=function(keyList,keyCnt){var pThis=this;return function(a,b){var cmp=0;function __loopFn(i){var value1=a[i];var value2=b[i];cmp=pThis._compareValue(value1,value2,keyList[i].ntype);if(cmp!=0){return true;}}nexacro.__forLoop(pThis,0,keyCnt,__loopFn);return cmp==0?((a._rawidx>b._rawidx)?1: -1):cmp;};};_pDataset._createDataset=function(records,dataset_id,select_list,where_expr,start,end){if(!dataset_id||!(select_list instanceof Array)||select_list.length<=0){return null;}start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var colList=this.colinfos;var constList=this._constVars;var sel_arr=[];var selid,selval;var constVar,colinfo;function __parse_selct_loopFn(i){var selectitem=select_list[i];var seppos=selectitem.indexOf(":");if(seppos>0){selid=selectitem.substring(0,seppos).trim();selval=selectitem.substring(seppos+1).trim();colinfo=this.getColIndex(selval);if(colinfo){sel_arr[sel_arr.length]={id:selid,type:"column",colid:selval,colidx:colinfo};return false;}constVar=constList[selval];if(constVar){sel_arr[sel_arr.length]={id:selid,type:"const",colid:selval,colval:constVar.value};return false;}var valFn=null;if(selval&&selval!=""){valFn=this._exprFuncs[selval];if(valFn==null){valFn=this._exprFuncs[selval]=this._createExprFunc(selval);}if(typeof valFn=="function"){sel_arr[sel_arr.length]={id:selid,type:"expr",exprFn:valFn};return false;}}sel_arr[sel_arr.length]={id:selid,type:"null"};}else{selid=selectitem.trim();colinfo=colList[selid];if(colinfo){sel_arr[sel_arr.length]={id:selid,type:"column",colid:selid,colidx:colinfo._index};return false;}constVar=constList[selid];if(constVar){sel_arr[sel_arr.length]={id:selid,type:"const",colid:selid,colval:constVar.value};return false;}sel_arr[sel_arr.length]={id:selid,type:"null"};}}nexacro.__forLoop(this,0,select_list.length,__parse_selct_loopFn);if(sel_arr.length<=0){return null;}var outDS=new nexacro.NormalDataset(dataset_id,this.parent);outDS.enableevent=false;outDS.updatecontrol=true;outDS.useclientlayout=true;outDS.lazyParsing=false;outDS._eventstat=false;function __create_colinfo_loopFn(j){var selcol=sel_arr[j];if(selcol.type=="column"){outDS._addColumnInfo(selcol.id,colList[selcol.colid]);}else if(selcol.type=="const"){var constVar=constList[selcol.colid];outDS._addConstColumn(selcol.id,selcol.colval,constVar.type,constVar.size);}else{outDS._addColumn(selcol.id,"variant",0);}}nexacro.__forLoop(this,0,sel_arr.length,__create_colinfo_loopFn);var whereFn=null;if(where_expr&&where_expr!=""){whereFn=this._exprFuncs[where_expr];if(whereFn==null){whereFn=this._exprFuncs[where_expr]=this._createExprFunc(where_expr);}if(typeof whereFn!="function"){whereFn=null;}}var outRecords=outDS._rawRecords;function __createDataset_rowdata_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(whereFn){var chk=whereFn.call(this,i,i,null,this,records,rowRow,[]);if(!chk){return false;}}var newRow=[];newRow._rtype=1;newRow._rawidx=i;newRow._orgidx=rowRow._rawidx;newRow._level=0;var k=0;function __create_coldata_loopFn(j){var selcol=sel_arr[j];if(selcol.type=="column"){newRow[k]=rowRow[selcol.colidx];}else if(selcol.type=="const"){return;}else if(selcol.type=="expr"){var val=selcol.exprFn.call(this,i,i,null,this,records,rowRow,[]);newRow[k]=val;}k++ ;}nexacro.__forLoop(this,0,sel_arr.length,__create_coldata_loopFn);outRecords[outRecords.length]=newRow;}nexacro.__forLoop(this,start,end,__createDataset_rowdata_loopFn);sel_arr.length=0;outDS._viewRecords=outDS._rawRecords;outDS.constcount=outDS._constVars.length;outDS.colcount=outDS.colinfos.length+outDS.constcount;outDS.rowcount=outDS._viewRecords.length;return outDS;};_pDataset.createDataset=function(dataset_id,select_list,where_expr,start,end){return this._createDataset(this._viewRecords,dataset_id,select_list,where_expr,start,end);};_pDataset.createDatasetNF=function(dataset_id,select_list,where_expr,start,end){return this._createDataset(this._rawRecords,dataset_id,select_list,where_expr,start,end);};_pDataset._createGrouppingDataset=function(records,dataset_id,select_list,where_expr,groupby,start,end){if(!dataset_id||!(select_list instanceof Array)||select_list.length<=0||!groupby){return null;}start=start|0;if(start<0){start=0;}end=(end==null)?records.length:(end|0);if(end<0||end>records.length){end=records.length;}var colList=this.colinfos;var constList=this._constVars;var sel_arr=[];function __parse_selct_loopFn(i){var selectitem=select_list[i];var seppos=selectitem.indexOf(":");var colinfo;var selid;var selval;var constVar;if(seppos>0){selid=selectitem.substring(0,seppos).trim();selval=selectitem.substring(seppos+1).trim();var aggtype="sum";seppos=selval.indexOf(":");if(seppos>0){aggtype=selval.substring(0,seppos).trim().toLowerCase();if(aggtype=="key"||aggtype=="count"||aggtype=="sum"||aggtype=="min"||aggtype=="max"||aggtype=="avg"){selval=selval.substring(seppos+1).trim();}}colinfo=this.getColIndex(selval);if(colinfo){sel_arr[sel_arr.length]={id:selid,type:"column",colid:selval,colidx:colinfo._index,ntype:colinfo.ntype,aggtype:aggtype};return false;}constVar=constList[selval];if(constVar){sel_arr[sel_arr.length]={id:selid,type:"const",colid:selval,colval:constVar.value};return false;}var valFn=null;if(selval&&selval!=""){valFn=this._exprFuncs[selval];if(valFn==null){valFn=this._exprFuncs[selval]=this._createExprFunc(selval);}if(typeof valFn=="function"){sel_arr[sel_arr.length]={id:selid,type:"expr",exprFn:valFn,ntype: -1,aggtype:aggtype};return false;}}sel_arr[sel_arr.length]={id:selid,type:"null"};}else{selid=selectitem.trim();colinfo=colList[selid];if(colinfo){sel_arr[sel_arr.length]={id:selid,type:"column",colid:selid,colidx:colinfo._index,ntype:colinfo.ntype,aggtype:"sum"};return false;}constVar=constList[selid];if(constVar){sel_arr[sel_arr.length]={id:selid,type:"const",colid:selid,colval:constVar.value};return false;}sel_arr[sel_arr.length]={id:selid,type:"null"};}}nexacro.__forLoop(this,0,select_list.length,__parse_selct_loopFn);if(sel_arr.length<=0){return null;}var group_arr=null;if(groupby&&groupby!=null&&groupby!=""){var g_arr=groupby.split(",");group_arr=[];function __parse_group_loopFn(i){var gid=g_arr[i].trim();function __createDataset_parsegroup_find_loopFn(j){if(sel_arr[j].id==gid){return true;}}var sidx=nexacro.__forLoop(this,0,sel_arr.length,__createDataset_parsegroup_find_loopFn);if(sidx<sel_arr.length){if(sel_arr[sidx].type=="const"||sel_arr[sidx].type=="null"){return false;}var selitem=sel_arr[sidx];selitem.key=group_arr.length;group_arr[group_arr.length]={id:selitem.id,idx:sidx,ntype:selitem.ntype};}}nexacro.__forLoop(this,0,g_arr.length,__parse_group_loopFn);}var outDS=new nexacro.NormalDataset(dataset_id,this.parent);outDS.enableevent=false;outDS.updatecontrol=true;outDS.useclientlayout=true;outDS.lazyParsing=false;outDS._eventstat=false;function __create_colinfo_loopFn(j){var selcol=sel_arr[j];var constVar;if(selcol.key>=0){if(selcol.type=="column"){outDS._addColumnInfo(selcol.id,colList[selcol.colid]);}else if(selcol.type=="const"){constVar=constList[selcol.colid];outDS._addConstColumn(selcol.id,selcol.colval,constVar.type,constVar.size);}else{outDS._addColumn(selcol.id,"variant",0);}}else{if(selcol.type=="const"){constVar=constList[selcol.colid];outDS._addConstColumn(selcol.id,selcol.colval,constVar.type,constVar.size);}else{outDS._addColumn(selcol.id,"variant",0);}}}nexacro.__forLoop(this,0,sel_arr.length,__create_colinfo_loopFn);var whereFn=null;if(where_expr&&where_expr!=""){whereFn=this._exprFuncs[where_expr];if(whereFn==null){whereFn=this._exprFuncs[where_expr]=this._createExprFunc(where_expr);}if(typeof whereFn!="function"){whereFn=null;}}var keyRecords=[];function __create_keydata_loopFn(i){var rowRow=this.__getParsedRow(records[i]);if(whereFn){var chk=whereFn.call(this,i,i,null,this,records,rowRow,[]);if(!chk){return false;}}var grouparraylen=group_arr.length;if(grouparraylen>0){var keyRow=[];keyRow._orgidx=i;function __group_keycol_loopFn(j){var gitem=group_arr[j];var selcol=sel_arr[gitem.idx];if(selcol.type=="column"){keyRow[j]=rowRow[selcol.colidx];}else if(selcol.type=="expr"){var val=selcol.exprFn.call(this,i,i,null,this,records,rowRow,[]);keyRow[j]=val;}}nexacro.__forLoop(this,0,grouparraylen,__group_keycol_loopFn);keyRecords[keyRecords.length]=keyRow;}}nexacro.__forLoop(this,start,end,__create_keydata_loopFn);if(group_arr){var cmpfn=this.__createKeyRowsSortFunc(group_arr,group_arr.length);keyRecords.sort(cmpfn);}var outRecords=outDS._rawRecords;var prev_keyRow=keyRecords[0];var prev_rowRow=records[prev_keyRow._orgidx];var grp_rows=[];grp_rows[0]=prev_keyRow._orgidx;function __create_grpdata_loopFn(i){var keyRow=keyRecords[i];var rowRow=records[keyRow._orgidx];var cmp=0;function __comparegrp_loopFn(j){var val1=prev_keyRow[j];var val2=keyRow[j];cmp=this._compareValue(val1,val2,group_arr[j].ntype);if(cmp!=0){return true;}}nexacro.__forLoop(this,0,group_arr.length,__comparegrp_loopFn);if(cmp!=0){var newRow=[];newRow._rtype=1;newRow._rawidx=outRecords.length;newRow._orgidx=outRecords.length;newRow._level=0;var k=0;function __create_grpcoldata_loopFn(j){var selcol=sel_arr[j];if(selcol.key>=0){newRow[k]=prev_keyRow[selcol.key];}else if(selcol.type=="const"){return;}else{if(selcol.type=="null"){newRow[k]=null;}else if(selcol.type=="column"){if(selcol.aggtype=="key"){newRow[k]=prev_rowRow[selcol.colidx];}else if(selcol.aggtype=="count"){newRow[k]=grp_rows.length;}else if(selcol.aggtype=="sum"){newRow[k]=this._getRowsSumValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="min"){newRow[k]=this._getRowsMinValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="max"){newRow[k]=this._getRowsMaxValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="avg"){newRow[k]=this._getRowsAvgValue(records,grp_rows,selcol.colidx,selcol.ntype,true);}else{newRow[k]=this._getRowsSumValue(records,grp_rows,selcol.colidx,selcol.ntype);}}else if(selcol.type=="expr"){if(selcol.aggtype=="key"){newRow[k]=selcol.exprFn.call(this,prev_keyRow._orgidx,prev_keyRow._orgidx,null,this,records,prev_rowRow,[]);}else if(selcol.aggtype=="count"){newRow[k]=grp_rows.length;}else if(selcol.aggtype=="sum"){newRow[k]=this._getRowsSumExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="min"){newRow[k]=this._getRowsMinExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="max"){newRow[k]=this._getRowsMaxExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="avg"){newRow[k]=this._getRowsAvgExpr(records,grp_rows,selcol.exprFn,true,[]);}else{newRow[k]=this._getRowsSumExpr(records,grp_rows,selcol.exprFn,[]);}}}k++ ;}nexacro.__forLoop(this,0,sel_arr.length,__create_grpcoldata_loopFn);outRecords[outRecords.length]=newRow;prev_keyRow=keyRow;prev_rowRow=rowRow;grp_rows.length=0;grp_rows[0]=keyRow._orgidx;}else{grp_rows[grp_rows.length]=keyRow._orgidx;}}nexacro.__forLoop(this,1,keyRecords.length,__create_grpdata_loopFn);if(grp_rows.length>0){var newRow=[];newRow._rtype=1;newRow._rawidx=outRecords.length;newRow._orgidx=outRecords.length;newRow._level=0;var k=0;function __create_last_grpcoldata_loopFn(j){var selcol=sel_arr[j];if(selcol.key>=0){newRow[k]=prev_keyRow[selcol.key];}else if(selcol.type=="const"){return;}else{if(selcol.type=="null"){newRow[k]=null;}else if(selcol.type=="column"){if(selcol.aggtype=="key"){newRow[k]=prev_rowRow[selcol.colidx];}else if(selcol.aggtype=="count"){newRow[k]=grp_rows.length;}else if(selcol.aggtype=="sum"){newRow[k]=this._getRowsSumValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="min"){newRow[k]=this._getRowsMinValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="max"){newRow[k]=this._getRowsMaxValue(records,grp_rows,selcol.colidx,selcol.ntype);}else if(selcol.aggtype=="avg"){newRow[k]=this._getRowsAvgValue(records,grp_rows,selcol.colidx,selcol.ntype,true);}else{newRow[k]=this._getRowsSumValue(records,grp_rows,selcol.colidx,selcol.ntype);}}else if(selcol.type=="expr"){if(selcol.aggtype=="key"){newRow[k]=selcol.exprFn.call(this,prev_keyRow._orgidx,prev_rowRow._rawidx,null,this,records,prev_rowRow,[]);}else if(selcol.aggtype=="count"){newRow[k]=grp_rows.length;}else if(selcol.aggtype=="sum"){newRow[k]=this._getRowsSumExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="min"){newRow[k]=this._getRowsMinExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="max"){newRow[k]=this._getRowsMaxExpr(records,grp_rows,selcol.exprFn,[]);}else if(selcol.aggtype=="avg"){newRow[k]=this._getRowsAvgExpr(records,grp_rows,selcol.exprFn,true,[]);}else{newRow[k]=this._getRowsSumExpr(records,grp_rows,selcol.exprFn,[]);}}}k++ ;}nexacro.__forLoop(this,0,sel_arr.length,__create_last_grpcoldata_loopFn);outRecords[outRecords.length]=newRow;prev_keyRow=null;prev_rowRow=null;grp_rows.length=0;grp_rows=null;}this._clearRecordData(keyRecords);keyRecords=null;sel_arr.length=0;if(group_arr){group_arr.length=0;}outDS._viewRecords=outDS._rawRecords;outDS.constcount=outDS._constVars.length;outDS.colcount=outDS.colinfos.length+outDS.constcount;outDS.rowcount=outDS._viewRecords.length;return outDS;};_pDataset.createGrouppingDataset=function(dataset_id,select_list,where_expr,groupby,start,end){return this._createGrouppingDataset(this._viewRecords,dataset_id,select_list,where_expr,groupby,start,end);};_pDataset.createGrouppingDatasetNF=function(dataset_id,select_list,where_expr,groupby,start,end){return this._createGrouppingDataset(this._rawRecords,dataset_id,select_list,where_expr,groupby,start,end);};_pDataset._bWorkingstatus=false;_pDataset._endLoad=function(errorcode,errormsg,reason){this._bWorkingstatus=true;this._reFilter();this._resetSortGroup();if(this._eventstat){this.on_fire_onload(errorcode,errormsg,reason);if(this._viewRecords&&this._viewRecords.length>0){var newpos=0;if(newpos>=this.rowcount){newpos= -1;}var oldpos=this.rowposition;var evt;if(newpos!=oldpos){if(this.onrowposchanged&&this.onrowposchanged._has_handlers){evt=new nexacro.DSRowPosChangeEventInfo(this,"onrowposchanged",oldpos,newpos,51);if(newpos>=0||newpos<this.rowcount){this.rowposition=newpos;this.on_fire_onrowposchanged(evt);}}else{this.rowposition=newpos;}}if(this.onvaluechanged&&this.onvaluechanged._has_handlers){evt=new nexacro.DSColChangeEventInfo(this,"onvaluechanged",this.rowposition, -1, -1,"",undefined,undefined);this.on_fire_onvaluechanged(evt);}}}else if(this._viewRecords.length>0){this.rowposition=0;}this._bWorkingstatus=false;};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_pDataset._setContents=function(contents){var ret=false;var strxml="<Dataset id=\""+this.id+"\">"+contents+"</Dataset>";if(strxml.length){var doc=nexacro._parseXMLDocument(strxml);if(doc){this._clearAll();if(doc.nodeName=="Dataset"){ret=this._loadFromDOM(doc);}else{var datasets=doc.getElementsByTagName("Dataset");ret=this._loadFromDOM(datasets[0]);}this.rowposition= -1;}}this.updateSortGroup();if(this.parent&&(!this.parent._is_application&&this.parent._is_form==false)){this.on_created();}return nexacro._toBoolean(ret);};}else{_pDataset._setContents=function(contents){var ret=false;if(contents.length){ret=this._loadFromXMLStr(contents,undefined,undefined,undefined,true);this.rowposition= -1;}this.updateSortGroup();if(this.parent&&(!this.parent._is_application&&this.parent._is_form==false)){this.on_created();}return nexacro._toBoolean(ret);};}_pDataset._loadFromDOM=function(dsDOM,curIdx,loadCnt,bOrgLayout,bClear){this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;if(bClear){if(bOrgLayout){this._clearData();}else{this._clearAll();}}if(dsDOM==null){this.loadstatus=false;this._eventstat=this.enableevent;return 0;}if(!curIdx){curIdx=0;}if(!loadCnt){loadCnt= -1;}this._setColInfoFromDOM(dsDOM,bOrgLayout);curIdx=this._loadRecordFromDOM(dsDOM,curIdx,loadCnt);var viewRecords=this._viewRecords;this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=viewRecords.length;this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;};_pDataset._setColInfoFromDOM=function(dsDOM,bOrgLayout){if(!bOrgLayout){var _colElems=dsDOM.getElementsByTagName("ConstColumn");function __loadFromDOM_const_loopFn(i){var _colElem=_colElems[i];var id=_colElem.getAttribute("id");if(id.length){this._addConstColumn(id,_colElem.getAttribute("value"),_colElem.getAttribute("type"));}}var len=(_colElems?_colElems.length:0);nexacro.__forLoop(this,0,len,__loadFromDOM_const_loopFn);_colElems=dsDOM.getElementsByTagName("Column");function __loadFromDOM_col_loopFn(i){var _colElem=_colElems[i];var id=_colElem.getAttribute("id");if(id.length){this._addColumn(id,_colElem.getAttribute("type"),_colElem.getAttribute("size"),_colElem.getAttribute("prop"),_colElem.getAttribute("sumtext"));}}len=(_colElems?_colElems.length:0);nexacro.__forLoop(this,0,len,__loadFromDOM_col_loopFn);}};_pDataset._loadRecordFromDOM=function(dsDOM,curIdx,loadCnt){var colList=this.colinfos;var _rowElems=dsDOM.getElementsByTagName("Row");var cnt=(_rowElems?_rowElems.length:0);var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var colCnt=colList.length;var templateRow=new Array(colCnt);function __loadRecordFromDOM_temp_loopFn(i){var colinfo=colList[i];if(colinfo.ntype>=4&&colinfo.ntype<=7){templateRow[colinfo._index]=null;}}nexacro.__forLoop(this,0,colCnt,__loadRecordFromDOM_temp_loopFn);function __loadFromDOM_row_loopFn(idx){var curRow=templateRow.slice(0,colCnt);curRow._orgidx=idx;curRow._rawidx=rawRecords.length;curRow._level=0;var _rowElem=_rowElems[idx];var type=_rowElem.getAttribute("type");if(type==null){curRow._rtype=1;}else if(type.charAt(0)=='I'||type.charAt(0)=='i'){curRow._rtype=2;}else if(type.charAt(0)=='U'||type.charAt(0)=='u'){curRow._rtype=4;}else if(type.charAt(0)=='D'||type.charAt(0)=='d'){curRow._rtype=8;}else{curRow._rtype=1;}var _colElems=_rowElem.getElementsByTagName("Col");var len=(_colElems?_colElems.length:0);if(len>0){function __loadRecordFromDOM_coldata_loopFn(j){var _colElem=_colElems[j];var id=_colElem.getAttribute("id");var colinfo=colList[id];if(colinfo){var _textElem=_colElem.firstChild;if(_textElem){curRow[colinfo._index]=colinfo._fromText(_textElem.nodeValue);}else{curRow[colinfo._index]=colinfo._fromText("");}}}nexacro.__forLoop(this,0,len,__loadRecordFromDOM_coldata_loopFn);}if(curRow._rtype==4){var _orgrowElems=_rowElem.getElementsByTagName("OrgRow");var orgcnt=(_orgrowElems?_orgrowElems.length:0);if(orgcnt){var orgRow=templateRow.slice(0,colCnt);_colElems=_orgrowElems[0].getElementsByTagName("Col");len=(_colElems?_colElems.length:0);if(len>0){function __loadRecordFromDOM_orgcoldata_loopFn(j){var _colElem=_colElems[j];var id=_colElem.getAttribute("id");var colinfo=colList[id];if(colinfo){var _textElem=_colElem.firstChild;if(_textElem){orgRow[colinfo._index]=colinfo._fromText(_textElem.nodeValue);}else{orgRow[colinfo._index]=colinfo._fromText("");}}}nexacro.__forLoop(this,0,len,__loadRecordFromDOM_orgcoldata_loopFn);}curRow._orgrow=orgRow;}}if(curRow._rtype==8){delRecords[delRecords.length]=curRow;}else{rawRecords[rawRecords.length]=curRow;}if(loadCnt>0&&(rawRecords.length-delRecords.length)==loadCnt){return true;}}curIdx=nexacro.__forLoop(this,curIdx,cnt,__loadFromDOM_row_loopFn);templateRow.length=0;templateRow=null;return curIdx;};_pDataset.loadFromDOM=function(doc,bClear,bAppend,errorcode,errormsg){if(bClear==null){bClear=true;}bClear=nexacro._toBoolean(bClear);var bOrgLayout=this.useclientlayout;if(doc!=null){this._bWorkingstatus=true;var dsDOM;if(doc.nodeName=="Dataset"){dsDOM=doc;}else{var datasets=doc.getElementsByTagName("Dataset");dsDOM=datasets[0];}if(bAppend){bClear=false;if(this.colinfos&&this.colinfos.length>0){bOrgLayout=true;}}var curIdx=0;if(nexacro._use_firefirstcount&&bClear&&this.firefirstcount>0){curIdx=this._loadFromDOM(dsDOM,curIdx,this.firefirstcount,bOrgLayout,bClear);if(this.firefirstcount==this.rowcount){this._reFilter();this._resetSortGroup();this.on_fire_onload(errorcode,errormsg,1);this._forcesetRowPosition(0,51);this.rowposition=0;this._loadFromDOM(dsDOM,curIdx, -1,bOrgLayout,false);}}else{this._loadFromDOM(dsDOM,curIdx, -1,bOrgLayout,bClear);}if(this.colinfos){this._reFilter();this._resetSortGroup();}if(this._eventstat){this.on_fire_onload(errorcode,errormsg,bClear?0:12);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition( -1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this.rowposition=0;}this._bWorkingstatus=false;return this.rowcount;}};_pDataset._setColInfoFromXMLStr=function(xmlStr){var xml_parse_pos=0;var colInfo=nexacro._getXMLTagData(xmlStr,xml_parse_pos,"<ColumnInfo>","</ColumnInfo>");if(colInfo){xml_parse_pos=colInfo[3];var colinfoData=colInfo[0];var const_parse_pos=0;function __loadFromXMLStr_const_loopFn(){var constVar=nexacro._getXMLTagData2(colinfoData,const_parse_pos,"<ConstColumn ","</ConstColumn>");if(constVar==null){return true;}const_parse_pos=constVar[3];var attrStr=constVar[1];var id=nexacro._getXMLAttributeID(attrStr);var value=nexacro._getXMLAttributeData(attrStr,"value");if(id.length){var type=nexacro._getXMLAttributeType(attrStr);var size=nexacro._getXMLAttributeData(attrStr,"size");this._addConstColumn(id,nexacro._decodeXml(value),type,size);}return false;}nexacro.__whileLoop(this,__loadFromXMLStr_const_loopFn);var colinfo_parse_pos=0;function __loadFromXMLStr_col_loopFn(){var colInfo=nexacro._getXMLTagData4(colinfoData,colinfo_parse_pos,"<Column ");if(colInfo==null){return true;}colinfo_parse_pos=colInfo[3];var attrStr=colInfo[1];var id=nexacro._getXMLAttributeID(attrStr);if(id&&id.length){var type=nexacro._getXMLAttributeType(attrStr);var size=nexacro._getXMLAttributeData(attrStr,"size");var prop=nexacro._getXMLAttributeData(attrStr,"prop");var sumtext=nexacro._getXMLAttributeData(attrStr,"sumtext");this._addColumn(id,type,size,prop,sumtext);}}nexacro.__whileLoop(this,__loadFromXMLStr_col_loopFn);}return xml_parse_pos;};_pDataset._loadRecordFromXMLStr=function(xmlStr,xml_parse_pos,loadCnt){var colList=this.colinfos;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var colCnt=colList.length;var templateRow=new Array(colCnt);function __loadRecordFromDOM_temp_loopFn(i){var colinfo=colList[i];if(colinfo.ntype>=4&&colinfo.ntype<=7){templateRow[colinfo._index]=undefined;}}nexacro.__forLoop(this,0,colCnt,__loadRecordFromDOM_temp_loopFn);var rowidx=rawRecords.length+delRecords.length;if(xml_parse_pos> -1){function __loadFromXMLStr_row_loopFn(){var rowInfo=nexacro._getXMLTagData3(xmlStr,xml_parse_pos,"<Row","</Row>");if(rowInfo==null){return true;}xml_parse_pos=rowInfo[3];var rowStr=rowInfo[0];var attrStr=rowInfo[1];var curRow=templateRow.slice(0,colCnt);curRow._orgidx=rowidx;curRow._rawidx=rawRecords.length;curRow._level=0;rowidx++ ;if(attrStr){var type=nexacro._getXMLAttributeType(attrStr);if(!type){curRow._rtype=1;}else{var typeChar=type.charAt(0);if(typeChar=='I'||typeChar=='i'){curRow._rtype=2;}else if(typeChar=='U'||typeChar=='u'){curRow._rtype=4;}else if(typeChar=='D'||typeChar=='d'){curRow._rtype=8;}else{curRow._rtype=1;}}}else{curRow._rtype=1;}if(curRow._rtype==4){var orgRowInfo=nexacro._getXMLTagData(rowStr,0,"<OrgRow>","</OrgRow>");if(orgRowInfo){rowStr=rowStr.substring(0,orgRowInfo[2])+rowStr.substring(orgRowInfo[3]);var orgStr=orgRowInfo[0];var orgRow=templateRow.slice(0,colCnt);var org_parse_pos=0;function __loadFromXMLStr_orgcolvalue_loopFn(){var colInfo=nexacro._getXMLTagData2(orgStr,org_parse_pos,"<Col ","</Col>");if(colInfo==null){return true;}org_parse_pos=colInfo[3];var attrStr=colInfo[1];var id=nexacro._getXMLAttributeID(attrStr);var colinfo=colList[id];if(colinfo){orgRow[colinfo._index]=colinfo._fromXMLText(colInfo[0]);}}nexacro.__whileLoop(this,__loadFromXMLStr_orgcolvalue_loopFn);curRow._orgrow=orgRow;}}var row_parse_pos=0;function __loadFromXMLStr_colvalue_loopFn(){if(rowStr){var colInfo=nexacro._getXMLTagData2(rowStr,row_parse_pos,"<Col ","</Col>");if(colInfo==null){return true;}row_parse_pos=colInfo[3];var attrStr=colInfo[1];var id=nexacro._getXMLAttributeID(attrStr);var colinfo=colList[id];if(colinfo){curRow[colinfo._index]=colinfo._fromXMLText(colInfo[0]);}return false;}return true;}nexacro.__whileLoop(this,__loadFromXMLStr_colvalue_loopFn);if(curRow._rtype==8){delRecords[delRecords.length]=curRow;}else{rawRecords[rawRecords.length]=curRow;}if(loadCnt>0&&(rawRecords.length-delRecords.length)==loadCnt){return true;}}nexacro.__whileLoop(this,__loadFromXMLStr_row_loopFn);}return xml_parse_pos;};_pDataset._loadFromXMLStr=function(xmlStr,xml_parse_pos,loadCnt,bOrgLayout,bClear){this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;if(!xml_parse_pos){xml_parse_pos=0;}if(!loadCnt){loadCnt= -1;}if(bClear){if(bOrgLayout){this._clearData();}else{this._clearAll();}}if(!xmlStr){this.loadstatus=false;this._eventstat=this.enableevent;return 0;}if(bOrgLayout){if(xml_parse_pos<=0){xml_parse_pos=xmlStr.indexOf("<Rows>");if(xml_parse_pos> -1){xml_parse_pos+=6;}}}else{if(xml_parse_pos<=0){xml_parse_pos=this._setColInfoFromXMLStr(xmlStr);xml_parse_pos=xmlStr.indexOf("<Rows>",xml_parse_pos);if(xml_parse_pos> -1){xml_parse_pos+=6;}}}if(xml_parse_pos> -1){xml_parse_pos=this._loadRecordFromXMLStr(xmlStr,xml_parse_pos,loadCnt);}this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;this.loadstatus=false;this._eventstat=this.enableevent;return xml_parse_pos;};_pDataset.loadFromXMLStr=function(xmlStr,bClear,bAppend,errorcode,errormsg){if(bClear==null){bClear=true;}bClear=nexacro._toBoolean(bClear);var bOrgLayout=this.useclientlayout;this._bWorkingstatus=true;if(xmlStr){this._bWorkingstatus=true;if(bAppend){bClear=false;if(this.colinfos&&this.colinfos.length>0){bOrgLayout=true;}}var xml_parse_pos;if(nexacro._use_firefirstcount&&bClear&&this.firefirstcount>0){xml_parse_pos=this._loadFromXMLStr(xmlStr,0,this.firefirstcount,bOrgLayout,bClear);if(this.firefirstcount==this.rowcount){this._reFilter();this._resetSortGroup();this.on_fire_onload(errorcode,errormsg,1);this._forcesetRowPosition(0,51);this.rowposition=0;this._loadFromXMLStr(xmlStr,xml_parse_pos, -1,bOrgLayout,false);}}else{this._loadFromXMLStr(xmlStr,0, -1,bOrgLayout,bClear);}if(this.colinfos){this._reFilter();this._resetSortGroup();}if(this._eventstat){this.on_fire_onload(errorcode,errormsg,bClear?0:12);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition( -1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this.rowposition=0;}this._bWorkingstatus=false;return this.rowcount;}};_pDataset.loadXML=function(strxml,bClear){return this.loadFromXMLStr(strxml,bClear);};_pDataset._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t","\t\t\t\t\t\t\t"];_pDataset.__writeXMLData=function(list,str,depth){list.push(this._TABS[depth]+str);};_pDataset.__writeXMLNormalRow=function(list,rowRow,depth){this.__writeXMLData(list,"<Row>",depth++ );this.__writeXMLRowData(list,rowRow,depth);this.__writeXMLData(list,"</Row>", --depth);};_pDataset.__writeXMLCrudRow=function(list,rowRow,depth){var buffer="<Row";switch(rowRow._rtype){case 1:break;case 2:buffer+=" type=\"insert\"";break;case 4:buffer+=" type=\"update\"";break;case 8:buffer+=" type=\"delete\"";break;}buffer+=">";this.__writeXMLData(list,buffer,depth++ );this.__writeXMLRowData(list,rowRow,depth);if(rowRow._rtype==4&&rowRow._orgrow){this.__writeXMLData(list,"<OrgRow>",depth++ );this.__writeXMLRowData(list,rowRow._orgrow,depth);this.__writeXMLData(list,"</OrgRow>", --depth);}this.__writeXMLData(list,"</Row>", --depth);};_pDataset.__writeXMLRowData=function(list,rowRow,depth){var colList=this.colinfos;function __writeColData_loopFn(i){var colinfo=colList[i];var id=colinfo.id;var idx=colinfo._index;var value=rowRow[idx];value=this._convertValueBySaveProp(value);value=colinfo._toXMLText(value);if(value!=null){if(value.length==0){this.__writeXMLData(list,"<Col id=\""+id+"\" />",depth);}else{this.__writeXMLData(list,"<Col id=\""+id+"\">"+value+"</Col>",depth);}}}nexacro.__forLoop(this,0,colList.length,__writeColData_loopFn);};_pDataset._saveXML=function(id,type,depth,savenan,saveinfinity,saveinvaliddate){if(!depth){depth=0;}var saveId=(id?id:this.id);var saveType="N";switch(type){case "A":case "a":case "all":case "All":saveType="A";break;case "U":case "u":case "update":case "Update":saveType="U";break;case "N":case "n":case "normal":case "Normal":saveType="N";break;case "V":case "v":case "view":case "View":saveType="V";break;}this._setSaveProp(savenan,saveinfinity,saveinvaliddate);var list=[];this.__writeXMLData(list,"<Dataset id=\""+saveId+"\">",depth++ );var constList=this._constVars;var colList=this.colinfos;if(constList.length+colList.length){this.__writeXMLData(list,"<ColumnInfo>",depth++ );if(constList.length){function __saveXML_constcol_loopFn(i){var constVar=constList[i];var colId=this._constVars.get_id(i);var colVal=constVar.value;var colType=constVar.ntype;var colSize=constVar.size;var typestr="";if(colType!=null&&colType!=9){typestr+=" type=\""+constVar.type+"\"";}if(colSize>0){typestr+=" size=\""+colSize+"\"";}colVal=this._convertValueBySaveProp(colVal);if(colVal!=null){this.__writeXMLData(list,"<ConstColumn id=\""+colId+"\""+typestr+" value=\""+colVal+"\" />",depth);}else{this.__writeXMLData(list,"<ConstColumn id=\""+colId+"\""+typestr+" />",depth);}}nexacro.__forLoop(this,0,constList.length,__saveXML_constcol_loopFn);}function __saveXML_colinfo_loopFn(i){var colinfo=colList[i];var colId=colinfo.id;var colType=colinfo.ntype==9?"STRING":colinfo.type?colinfo.type:nexacro.DataUtils.toTypeName(colinfo.ntype);var colSize=colinfo.ntype==9?nexacro.DataUtils._default_sizes[1]:colinfo.size;var colProp=colinfo.prop;if(colProp=="NONE"||colProp==null||(typeof colProp)=="number"||colProp==""){this.__writeXMLData(list,"<Column id=\""+colId+"\" type=\""+colType+"\" size=\""+colSize+"\" />",depth);}else{var colSumText=colinfo.sumtext;if(colSumText){this.__writeXMLData(list,"<Column id=\""+colId+"\" type=\""+colType+"\" size=\""+colSize+"\" prop=\""+colProp+"\" sumtext=\""+colSumText+"\" />",depth);}else{this.__writeXMLData(list,"<Column id=\""+colId+"\" type=\""+colType+"\" size=\""+colSize+"\" prop=\""+colProp+"\" />",depth);}}}nexacro.__forLoop(this,0,colList.length,__saveXML_colinfo_loopFn);this.__writeXMLData(list,"</ColumnInfo>", --depth);}else{this.__writeXMLData(list,"<ColumnInfo />",depth);}var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;if(rawRecords.length+delRecords.length){this.__writeXMLData(list,"<Rows>",depth++ );if(delRecords.length>0&&(saveType=="A"||saveType=="U")){function __saveXML_delrows_loopFn(i){var rowRow=this.__getParsedRow(delRecords[i]);if(rowRow._rtype&15){this.__writeXMLCrudRow(list,rowRow,depth);}}nexacro.__forLoop(this,0,delRecords.length,__saveXML_delrows_loopFn);}if(saveType=="A"){function __saveXML_allrow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&15){this.__writeXMLCrudRow(list,rowRow,depth);}}nexacro.__forLoop(this,0,rawRecords.length,__saveXML_allrow_loopFn);}else if(saveType=="U"){function __saveXML_updaterow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&14){this.__writeXMLCrudRow(list,rowRow,depth);}}nexacro.__forLoop(this,0,rawRecords.length,__saveXML_updaterow_loopFn);}else if(saveType=="V"){function __saveXML_viewrow_loopFn(i){var rowRow=this.__getParsedRow(viewRecords[i]);this.__writeXMLNormalRow(list,rowRow,depth);}nexacro.__forLoop(this,0,viewRecords.length,__saveXML_viewrow_loopFn);}else{function __saveXML_normalrow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&7){this.__writeXMLNormalRow(list,rowRow,depth);}}nexacro.__forLoop(this,0,rawRecords.length,__saveXML_normalrow_loopFn);}this.__writeXMLData(list,"</Rows>", --depth);}else{this.__writeXMLData(list,"<Rows>",depth);this.__writeXMLData(list,"</Rows>",depth);}this.__writeXMLData(list,"</Dataset>", --depth);return list.join("\n");};_pDataset.saveXML=function(id,type,savenan,saveinfinity,saveinvaliddate){return this._saveXML(id,type,0,savenan,saveinfinity,saveinvaliddate);};_pDataset.__makeDataConvertFunc=function(type){var colinfos=this.colinfos;var colLen=colinfos.length;var expr="(function () { return function (target, arr) { ";var checkud=false;if(type=="S"){expr+=" var ud = String.fromCharCode(3); target.length ="+colLen+";";checkud=true;}for(var idx=0;idx<colLen;idx++ ){var colinfo=colinfos[idx];if(checkud){expr+=" if (ud != arr["+idx+"]) ";}switch(colinfo.ntype){case 1:expr+="target["+idx+"] = arr["+idx+"]; ";break;case 2:expr+="target["+idx+"] = nexacro.DataUtils.toIntFromText(arr["+idx+"]); ";break;case 3:expr+="target["+idx+"] = nexacro.DataUtils.toFloatFromText(arr["+idx+"]); ";break;case 4:expr+="target["+idx+"] = nexacro.DataUtils.toDecimalFromText(arr["+idx+"]); ";break;case 5:expr+="target["+idx+"] = nexacro.DataUtils.toDateFromText(arr["+idx+"]); ";break;case 6:expr+="target["+idx+"] = nexacro.DataUtils.toTimeFromText(arr["+idx+"]); ";break;case 7:expr+="target["+idx+"] = nexacro.DataUtils.toDateTimeFromText(arr["+idx+"]); ";break;case 8:expr+="target["+idx+"] = nexacro.DataUtils.toBlobFromText(arr["+idx+"]); ";break;default:expr+="target["+idx+"] = nexacro.DataUtils.toTextFromvariant(arr["+idx+"]); ";break;}}expr+=" }; })();";return nexacro._executeGlobalEvalStr(expr);};_pDataset.__makeDataMappingFunc=function(colArr,colCnt,type){var i;var idMap={};for(i=0;i<colCnt;i++ ){var colItem=colArr[i].split(":");var id=colItem[0];idMap[id]=i;}var colinfos=this.colinfos;var colLen=colinfos.length;var expr="(function () { return function (target, arr) { ";var checkud=false;if(type=="S"){expr+=" var ud = String.fromCharCode(3); target.length ="+colLen+";";checkud=true;}for(i=0;i<colLen;i++ ){var colinfo=colinfos[i];var idx=idMap[colinfo.id];var colidx=colinfo._index;if(idx!=null){if(checkud){expr+=" if (ud != arr["+idx+"]) ";}switch(colinfo.ntype){case 1:expr+="target["+colidx+"] = arr["+idx+"]; ";break;case 2:expr+="target["+colidx+"] = nexacro.DataUtils.toIntFromText(arr["+idx+"]); ";break;case 3:expr+="target["+colidx+"] = nexacro.DataUtils.toFloatFromText(arr["+idx+"]); ";break;case 4:expr+="target["+colidx+"] = nexacro.DataUtils.toDecimalFromText(arr["+idx+"]); ";break;case 5:expr+="target["+colidx+"] = nexacro.DataUtils.toDateFromText(arr["+idx+"]); ";break;case 6:expr+="target["+colidx+"] = nexacro.DataUtils.toTimeFromText(arr["+idx+"]); ";break;case 7:expr+="target["+colidx+"] = nexacro.DataUtils.toDateTimeFromText(arr["+idx+"]); ";break;case 8:expr+="target["+colidx+"] = nexacro.DataUtils.toBlobFromText(arr["+idx+"]); ";break;default:expr+="target["+colidx+"] = nexacro.DataUtils.toTextFromvariant(arr["+idx+"]); ";break;}}}expr+="}; })();";return nexacro._executeGlobalEvalStr(expr);};_pDataset.__ssvSetConstColInfo=function(strColInfo){var _cs_=nexacro._getSSVUnitSeparator();var _ud_=String.fromCharCode(3);var colArr=strColInfo.split(_cs_);var colCnt=colArr.length;function __ssvSetConstColInfo_loopFn(i){var colStr=colArr[i];var colItem=colStr.split("=");var colInfo=colItem[0];if(colInfo&&colInfo!="_Const_"){var value=colItem[1];var colInfoArr=colInfo.split(":");var id=colInfoArr[0];var type=colInfoArr[1];var size=0;if(type){var bSIdx=type.indexOf("(");if(bSIdx> -1){size=type.substring(bSIdx+1,type.indexOf(")",bSIdx+1))|0;type=type.substring(0,bSIdx);}}if(value==_ud_){value=undefined;}this._addConstColumn(id,value,type,size);}}nexacro.__forLoop(this,0,colCnt,__ssvSetConstColInfo_loopFn);};_pDataset.__ssvSetColInfo=function(strColInfo){var _cs_=nexacro._getSSVUnitSeparator();var colArr=strColInfo.split(_cs_);var colCnt=colArr.length;function __ssvSetColInfo_loopFn(i){var colStr=colArr[i];var colItem=colStr.split(":");var id=colItem[0];var type,size;if(id&&id!="_RowType_"){var colInfo=colItem[1];if(colInfo){var sidx=colInfo.indexOf("(");if(sidx> -1){type=colInfo.substring(0,sidx).toUpperCase();size=colInfo.substring(sidx+1,colInfo.indexOf(")",sidx+1))|0;}else{type=colInfo;}}else{type="STRING";size=256;}this._addColumn(id,type,size,colItem[2],colItem[3]);}}nexacro.__forLoop(this,0,colCnt,__ssvSetColInfo_loopFn);return colCnt;};_pDataset._loadFromSSVArray=function(ssvColLines,ssvLines,curIdx,loadCnt,bOrgLayout,bClear){this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;if(bClear){if(bOrgLayout){this._clearData();}else{this._clearAll();}}var _convertFn=this._setColInfoFromSSVLines(ssvColLines,bOrgLayout);if(!_convertFn){this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;}curIdx=this._loadRecordFromSSVLines(ssvLines,curIdx,loadCnt,_convertFn);this._viewRecords=this._rawRecords;this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;};_pDataset._getColLinesFromSSVLines=function(ssvLines,curIdx){var lineCnt=ssvLines.length;var idx=curIdx;if(idx<lineCnt&&ssvLines[idx].substring(0,7)=="_Const_"){idx++ ;}if(idx<lineCnt&&ssvLines[idx].substring(0,9)=="_RowType_"){idx++ ;}if(idx<lineCnt&&ssvLines[idx].substring(0,7)=="_Const_"){idx++ ;}return ssvLines.slice(curIdx,idx);};_pDataset._setColInfoFromSSVLines=function(colLines,bOrgLayout){var _cs_=nexacro._getSSVUnitSeparator();if(!colLines||colLines.length==0){return null;}var _convertFn=null;var lineCnt=colLines.length;var idx=0;if(bOrgLayout){while(idx<lineCnt&&colLines[idx].substring(0,9)!="_RowType_"){idx++ ;}if(idx>=lineCnt){return null;}var colArr=colLines[idx].split(_cs_);colArr.shift();_convertFn=this.__makeDataMappingFunc(colArr,colArr.length,"S");}else{if(idx<lineCnt&&colLines[idx].substring(0,7)=="_Const_"){this.__ssvSetConstColInfo(colLines[idx]);idx++ ;}if(idx>lineCnt){return null;}if(idx<lineCnt&&colLines[idx].substring(0,9)=="_RowType_"){this.__ssvSetColInfo(colLines[idx]);idx++ ;}if(idx>lineCnt){return null;}if(idx<lineCnt&&colLines[idx].substring(0,7)=="_Const_"){this.__ssvSetConstColInfo(colLines[idx]);idx++ ;}if(idx>lineCnt){return null;}_convertFn=this.__makeDataConvertFunc("S");}return _convertFn;};_pDataset._lazyParseRecordFromSSVLine=function(rowRow,_convertFn){var _cs_=nexacro._getSSVUnitSeparator();var rowData=rowRow._data.split(_cs_);rowData.shift();_convertFn(rowRow,rowData);rowData.length=0;delete rowRow._data;rowData.length=0;if(rowRow._orgdata){rowData=rowRow._orgdata.split(_cs_);rowData.shift();delete rowRow._orgdata;_convertFn(rowData,rowData);rowRow._orgrow=rowData;}};_pDataset._loadRecordFromSSVLines=function(ssvLines,curIdx,loadCnt,_convertFn){var _cs_=nexacro._getSSVUnitSeparator();var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var lazyParsing=this.lazyParsing;if(lazyParsing){this.__loadConvertFn=_convertFn;this.__lazyParseRecordFn=this._lazyParseRecordFromSSVLine;}var rowidx=rawRecords.length+delRecords.length;var prefix='',typePos=0;if(nexacro._Browser=="IE"){prefix='!';typePos=1;}if(lazyParsing){function __lazyLoadRecordFromSSVLines_loopFn(idx){var curLine=ssvLines[idx];if(curLine==""){return true;}curLine=prefix+curLine;var curData;var typeChar=curLine.charAt(typePos);if(typeChar=='I'||typeChar=='i'){curData=[];curData._rtype=2;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;curData._data=curLine;rawRecords[rawRecords.length]=curData;}else if(typeChar=='U'||typeChar=='u'){curData=[];curData._rtype=4;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;curData._data=curLine;rawRecords[rawRecords.length]=curData;}else if(typeChar=='D'||typeChar=='d'){if(curLine.indexOf("Dataset:")==typePos){return true;}curData=[];curData._rtype=8;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;curData._data=curLine;delRecords[delRecords.length]=curData;}else if(typeChar=='O'||typeChar=='o'){rawRecords[rawRecords.length-1]._orgdata=curLine;}else{curData=[];curData._rtype=1;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;curData._data=curLine;rawRecords[rawRecords.length]=curData;}rowidx++ ;if(loadCnt>0&&(rawRecords.length-delRecords.length)==loadCnt){return true;}}curIdx=nexacro.__forLoop(this,curIdx,ssvLines.length,__lazyLoadRecordFromSSVLines_loopFn);}else{function __loadRecordFromSSVLines_loopFn(idx){var curLine=ssvLines[idx];if(curLine==""){return true;}curLine=prefix+curLine;var curData=[];var curSSVData=curLine.split(_cs_);var typeChar=curSSVData.shift().charAt(typePos);_convertFn(curData,curSSVData);if(typeChar=='I'||typeChar=='i'){curData._rtype=2;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;rawRecords[rawRecords.length]=curData;}else if(typeChar=='U'||typeChar=='u'){curData._rtype=4;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;rawRecords[rawRecords.length]=curData;}else if(typeChar=='D'||typeChar=='d'){curData._rtype=8;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;delRecords[delRecords.length]=curData;}else if(typeChar=='O'||typeChar=='o'){rawRecords[rawRecords.length-1]._orgrow=curData;}else{curData._rtype=1;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;rawRecords[rawRecords.length]=curData;}rowidx++ ;if(loadCnt>0&&(rawRecords.length-delRecords.length)==loadCnt){return true;}}curIdx=nexacro.__forLoop(this,curIdx,ssvLines.length,__loadRecordFromSSVLines_loopFn);}return curIdx;};_pDataset.loadFromSSVArray=function(ssvLine,lineCnt,curIdx,bClear,bAppend,errorcode,errormsg){if(bClear==null){bClear=true;}bClear=nexacro._toBoolean(bClear);var bOrgLayout=this.useclientlayout;if(ssvLine){this._bWorkingstatus=true;while(ssvLine[curIdx].substring(0,7)!="Dataset"){curIdx++ ;}if(bAppend){bClear=false;if(this.colinfos&&this.colinfos.length>0){bOrgLayout=true;}}if(curIdx<lineCnt){curIdx++ ;var ssvColLines=this._getColLinesFromSSVLines(ssvLine,curIdx);curIdx+=ssvColLines.length;if(nexacro._use_firefirstcount&&bClear&&this.firefirstcount>0){curIdx=this._loadFromSSVArray(ssvColLines,ssvLine,curIdx,this.firefirstcount,bOrgLayout,bClear);if(this.firefirstcount==this.rowcount){this._reFilter();this._resetSortGroup();this.on_fire_onload(errorcode,errormsg,1);this._forcesetRowPosition(0,51);this.rowposition=0;curIdx++ ;curIdx=this._loadFromSSVArray(ssvColLines,ssvLine,curIdx, -1,bOrgLayout,false);}}else{curIdx=this._loadFromSSVArray(ssvColLines,ssvLine,curIdx, -1,bOrgLayout,bClear);}if(this.colinfos){this._reFilter();this._resetSortGroup();}if(this._eventstat){this.on_fire_onload(errorcode,errormsg,bClear?0:12);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition( -1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this.rowposition=0;}}this._bWorkingstatus=false;return curIdx;}};_pDataset.loadSSV=function(strssv,bClear){var _rs_=nexacro._getSSVRecordSeparator();if(strssv){var ssvLine=strssv.split(_rs_);if(ssvLine.length){this.loadFromSSVArray(ssvLine,ssvLine.length,0,bClear);}}return this.rowcount;};_pDataset.__writeData=function(list,str){list.push(str);};_pDataset.__getRowTypeChar=function(_rtype){var rtnVal=null;switch(_rtype){case 1:rtnVal="N";break;case 2:rtnVal="I";break;case 4:rtnVal="U";break;case 8:rtnVal="D";break;case  -1:rtnVal="O";break;}return rtnVal;};_pDataset.__writeSSVNormalRow=function(list,rowRow){this.__writeSSVRowData(list,"N",rowRow);};_pDataset.__writeSSVCrudRow=function(list,rowRow){this.__writeSSVRowData(list,this.__getRowTypeChar(rowRow._rtype),rowRow);if(rowRow._rtype==4&&rowRow._orgrow){this.__writeSSVRowData(list,this.__getRowTypeChar( -1),rowRow._orgrow);}};_pDataset.__writeSSVRowData=function(list,type,rowRow){var _rs_=nexacro._getSSVRecordSeparator();var _cs_=nexacro._getSSVUnitSeparator();var colList=this.colinfos;this.__writeData(list,type);function __writeSSVColData_loopFn(i){var colinfo=colList[i];var idx=colinfo._index;var value=rowRow[idx];value=this._convertValueBySaveProp(value);value=colinfo._toText(value);if(value===undefined){value=String.fromCharCode(3);}if(value!=null){this.__writeData(list,_cs_+value);}else{this.__writeData(list,_cs_);}}nexacro.__forLoop(this,0,colList.length,__writeSSVColData_loopFn);this.__writeData(list,_rs_);};_pDataset.saveSSV=function(id,type,savenan,saveinfinity,saveinvaliddate){var _rs_=nexacro._getSSVRecordSeparator();var _cs_=nexacro._getSSVUnitSeparator();var saveId=this.id;if(id&&id.length>0){saveId=id;}var saveType="N";switch(type){case "A":case "a":case "all":case "All":saveType="A";break;case "U":case "u":case "update":case "Update":saveType="U";break;case "V":case "v":case "view":case "View":saveType="V";break;}this._setSaveProp(savenan,saveinfinity,saveinvaliddate);var list=[];this.__writeData(list,"Dataset:"+saveId+_rs_);var constList=this._constVars;if(constList.length>0){this.__writeData(list,"_Const_");function __saveSSV_constcol_loopFn(i){var constVar=constList[i];var colId=this._constVars.get_id(i);var colVal=constVar.value;if(colVal===undefined){colVal=String.fromCharCode(3);}var colType=constVar.type;var colSize=constVar.size;if(colType!=null&&constVar.ntype!=9){colId+=":"+colType;if(colSize>0){colId+="("+colSize+")";}}colVal=this._convertValueBySaveProp(colVal);if(colVal){this.__writeData(list,_cs_+colId+"="+colVal);}else{this.__writeData(list,_cs_+colId+"=");}}nexacro.__forLoop(this,0,constList.length,__saveSSV_constcol_loopFn);this.__writeData(list,_rs_);}var colList=this.colinfos;if(colList.length>0){this.__writeData(list,"_RowType_");function __saveSSV_colinfo_loopFn(i){var colinfo=colList[i];var colId=colinfo.id;var colType=colinfo.ntype==9?"STRING":colinfo.type?colinfo.type:nexacro.DataUtils.toTypeName(colinfo.ntype);var colSize=colinfo.ntype==9?nexacro.DataUtils._default_sizes[1]:colinfo.size;var colProp=colinfo.prop;var colStr=_cs_+colId+":"+colType;if(colSize){colStr+="("+colSize+")";}if(colProp){colStr+=":"+colProp;var colSumText=colinfo.sumtext;if(colSumText){colStr+=":"+colSumText;}}this.__writeData(list,colStr);}nexacro.__forLoop(this,0,colList.length,__saveSSV_colinfo_loopFn);this.__writeData(list,_rs_);}else{this.__writeData(list,"_RowType_"+_rs_);}var viewRecords=this._viewRecords;var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;if(delRecords.length){if(saveType=="A"||saveType=="U"){function __saveSSV_delrow_loopFn(i){var rowRow=this.__getParsedRow(delRecords[i]);if(rowRow._rtype&15){this.__writeSSVCrudRow(list,rowRow);}}nexacro.__forLoop(this,0,delRecords.length,__saveSSV_delrow_loopFn);}}if(rawRecords.length){if(saveType=="A"){function __saveSSV_allrow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&15){this.__writeSSVCrudRow(list,rowRow);}}nexacro.__forLoop(this,0,rawRecords.length,__saveSSV_allrow_loopFn);}else if(saveType=="U"){function __saveSSV_updaterow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&14){this.__writeSSVCrudRow(list,rowRow);}}nexacro.__forLoop(this,0,rawRecords.length,__saveSSV_updaterow_loopFn);}else{if(saveType=="V"){function __saveSSV_viewrow_loopFn(i){var rowRow=this.__getParsedRow(viewRecords[i]);if(rowRow._rtype&7){this.__writeSSVNormalRow(list,rowRow);}}nexacro.__forLoop(this,0,viewRecords.length,__saveSSV_viewrow_loopFn);}else{function __saveSSV_normalrow_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&7){this.__writeSSVNormalRow(list,rowRow);}}nexacro.__forLoop(this,0,rawRecords.length,__saveSSV_normalrow_loopFn);}}}this.__writeData(list,_rs_);return list.join("");};_pDataset.__makePPXDataMappingFunc=function(colLines){var _cs_=nexacro._getSSVUnitSeparator();var idMap={};function __makePPXDataMappingFunc_loopFn(i){var curStr=colLines[i];var curType=curStr.charAt(0);if(curType=='C'){var valArr=curStr.split(_cs_);var id=valArr[1];idMap[id]=i;return true;}return true;}nexacro.__forLoop(this,0,colLines.length,__makePPXDataMappingFunc_loopFn);var colinfos=this.colinfos;var colLen=colinfos.length;var expr="(function () { return function (target, arr) { ";for(var i=0;i<colLen;i++ ){var colinfo=colinfos[i];var idx=idMap[colinfo.id];var colidx=colinfo._index;if(idx!=null){switch(colinfo.ntype){case 1:expr+="target["+colidx+"] = arr["+idx+"]; ";break;case 2:expr+="target["+colidx+"] = nexacro.DataUtils.toIntFromText(arr["+idx+"]); ";break;case 3:expr+="target["+colidx+"] = nexacro.DataUtils.toFloatFromText(arr["+idx+"]); ";break;case 4:expr+="target["+colidx+"] = nexacro.DataUtils.toDecimalFromText(arr["+idx+"]); ";break;case 5:expr+="target["+colidx+"] = nexacro.DataUtils.toDateFromText(arr["+idx+"]); ";break;case 6:expr+="target["+colidx+"] = nexacro.DataUtils.toTimeFromText(arr["+idx+"]); ";break;case 7:expr+="target["+colidx+"] = nexacro.DataUtils.toDateTimeFromText(arr["+idx+"]); ";break;case 8:expr+="target["+colidx+"] = nexacro.DataUtils.toBlobFromText(arr["+idx+"]); ";break;default:expr+="target["+colidx+"] = nexacro.DataUtils.toTextFromvariant(arr["+idx+"]); ";break;}}}expr+="}; })();";return nexacro._executeGlobalEvalStr(expr);};_pDataset._setColInfoFromPPXLines=function(colLines){var _cs_=nexacro._getSSVUnitSeparator();function __setColInfoFromPPXLines_loopFn(i){var curStr=colLines[i];var curType=curStr.charAt(0);var valArr;if(curType=='V'){valArr=curStr.split(_cs_);this._addConstColumn(valArr[1],valArr[3],valArr[2]);return false;}else if(curType=='C'){valArr=curStr.split(_cs_);this._addColumn(valArr[1],valArr[2],valArr[3],valArr[4],valArr[5]);return false;}return true;}nexacro.__forLoop(this,0,colLines.length,__setColInfoFromPPXLines_loopFn);};_pDataset._loadFromPPXArray=function(ppxColLines,ppxLines,curIdx,loadCnt,bOrgLayout,bClear){this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;var _convertFn=null;if(bClear){if(bOrgLayout){this._clearData();}else{this._clearAll();}}if(!ppxColLines||ppxColLines.length==0){this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;}if(bOrgLayout){_convertFn=this.__makePPXDataMappingFunc(ppxColLines);}else{this._setColInfoFromPPXLines(ppxColLines);_convertFn=this.__makeDataConvertFunc("P");}curIdx=this._loadRecordFromSSVLines(ppxLines,curIdx,loadCnt,_convertFn);this._viewRecords=this._rawRecords;this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;};_pDataset._getColLinesFromPPXLines=function(ppxLines,curIdx){var lineCnt=ppxLines.length;var idx=curIdx;while(true){var type=ppxLines[idx].charAt(0);if(idx<lineCnt&&(type=="C"||type=="V")){idx++ ;}else{break;}}return ppxLines.slice(curIdx,idx);};_pDataset.loadFromPPXArray=function(ppxLine,lineCnt,curIdx,bClear,bAppend,errorcode,errormsg){if(bClear==null){bClear=true;}bClear=nexacro._toBoolean(bClear);var bOrgLayout=this.useclientlayout;if(ppxLine){this._bWorkingstatus=true;while(ppxLine[curIdx].charAt(0)!="D"){curIdx++ ;}if(bAppend){bClear=false;if(this.colinfos&&this.colinfos.length>0){bOrgLayout=true;}}if(curIdx<lineCnt){curIdx++ ;var ppxColLines=this._getColLinesFromPPXLines(ppxLine,curIdx);curIdx+=ppxColLines.length;if(nexacro._use_firefirstcount&&bClear&&this.firefirstcount>0){curIdx=this._loadFromPPXArray(ppxColLines,ppxLine,curIdx,this.firefirstcount,bOrgLayout,bClear);if(this.firefirstcount==this.rowcount){this._reFilter();this._resetSortGroup();this.on_fire_onload(errorcode,errormsg,1);this._forcesetRowPosition(0,51);this.rowposition=0;curIdx=this._loadFromPPXArray(ppxColLines,ppxLine,curIdx, -1,bOrgLayout,false);}}else{curIdx=this._loadFromPPXArray(ppxColLines,ppxLine,curIdx, -1,bOrgLayout,bClear);}if(this.colinfos){this._reFilter();this._resetSortGroup();}if(this._eventstat){this.on_fire_onload(errorcode,errormsg,bClear?0:12);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition( -1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this.rowposition=0;}}this._bWorkingstatus=false;return curIdx;}};_pDataset.__splitCSVRowData=function(strRow,base_colCnt){var colArr=strRow.split(",");var idx=0;var quote=null;var tmp_str="";function __splitCSVRowData_loopFn(i){var colStr=colArr[i];if(quote==null){quote=colStr.charAt(0);if(quote=="\""||quote=="\'"){if(colStr[colStr.length-1]==quote){colArr[idx++ ]=nexacro._unQuoteStr(colStr);quote=null;}else{tmp_str=colStr;}}else{quote=null;colArr[idx++ ]=colStr;}}else{if(colStr[colStr.length-1]==quote){colArr[idx++ ]=nexacro._unQuoteStr(tmp_str+","+colStr);tmp_str="";quote=null;}else{tmp_str+=","+colStr;}}}nexacro.__forLoop(this,0,colArr.length,__splitCSVRowData_loopFn);if(idx!=colArr.length){colArr.length=idx;}return colArr;};_pDataset.__csvSetColInfo=function(strColInfo){var colArr=strColInfo.split(",");var colCnt=colArr.length;function __csvSetColInfo_loopFn(i){var colStr=colArr[i];var colItem=colStr.split(":");var id=colItem[0];var type,size;if(id){var colInfo=colItem[1];if(colInfo){var sidx=colInfo.indexOf("(");if(sidx> -1){type=colInfo.substring(0,sidx).toUpperCase();size=colInfo.substring(sidx+1,colInfo.indexOf(")",sidx+1))|0;}else{type=colInfo;}}else{type="STRING";size=256;}this._addColumn(id,type,size,colItem[2],colItem[3]);}}nexacro.__forLoop(this,0,colArr.length,__csvSetColInfo_loopFn);return colCnt;};_pDataset._setColInfoFromCSVLine=function(csvColLine,bOrgLayout){if(!csvColLine||csvColLine.length==0){return null;}var _convertFn=null,csvColCnt;if(bOrgLayout){var colArr=csvColLine.split(",");csvColCnt=colArr.length;_convertFn=this.__makeDataMappingFunc(colArr,csvColCnt,"C");}else{this.__csvSetColInfo(csvColLine);_convertFn=this.__makeDataConvertFunc("C");}return _convertFn;};_pDataset._lazyParseRecordFromCSVLine=function(rowRow,_convertFn){var rowData=this.__splitCSVRowData(rowRow._data,this.colinfos.length);_convertFn(rowRow,rowData);delete rowRow._data;rowData.length=0;return rowRow;};_pDataset._loadRecordFromCSVLines=function(csvLines,curIdx,loadCnt,_convertFn){var rawRecords=this._rawRecords;var delRecords=this._deletedRecords;var lazyParsing=this.lazyParsing;if(lazyParsing){this.__loadConvertFn=_convertFn;this.__lazyParseRecordFn=this._lazyParseRecordFromCSVLine;}var colCnt=this.colinfos.length;var rowidx=rawRecords.length+delRecords.length;var postfix='';if(nexacro._Browser=="IE"){postfix=',';}if(lazyParsing){function __lazyLoadRecordFromCSVLines_loopFn(i){var curLine=csvLines[i];if(curLine==""){return true;}curLine+=postfix;var curData=[];curData._rtype=1;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;curData._data=curLine;rawRecords[rawRecords.length]=curData;rowidx++ ;if(loadCnt>0&&rawRecords.length==loadCnt){return true;}}curIdx=nexacro.__forLoop(this,curIdx,csvLines.length,__lazyLoadRecordFromCSVLines_loopFn);}else{function __loadRecordFromCSVLines_loopFn(i){var curLine=csvLines[i];if(curLine==""){return true;}curLine+=postfix;var curData=this.__splitCSVRowData(curLine,colCnt);_convertFn(curData,curData);curData._rtype=1;curData._orgidx=rowidx;curData._rawidx=rawRecords.length;curData._level=0;rawRecords[rawRecords.length]=curData;rowidx++ ;if(loadCnt>0&&rawRecords.length==loadCnt){return true;}}curIdx=nexacro.__forLoop(this,curIdx,csvLines.length,__loadRecordFromCSVLines_loopFn);}if(csvLines[curIdx]==""){curIdx++ ;}return curIdx;};_pDataset._loadFromCSVArray=function(csvColLine,csvLines,curIdx,loadCnt,bOrgLayout,bClear){this.loadstatus=true;this._eventstat=!this.loadstatus&&this.enableevent;if(bClear){if(bOrgLayout){this._clearData();}else{this._clearAll();}}var _convertFn=this._setColInfoFromCSVLine(csvColLine,bOrgLayout);if(!_convertFn){this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;}curIdx=this._loadRecordFromCSVLines(csvLines,curIdx,loadCnt,_convertFn);this._viewRecords=this._rawRecords;this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;this.loadstatus=false;this._eventstat=this.enableevent;return curIdx;};_pDataset.loadFromCSVArray=function(csvLine,lineCnt,curIdx,bClear,bAppend,errorcode,errormsg){if(bClear==null){bClear=true;}bClear=nexacro._toBoolean(bClear);var bOrgLayout=this.useclientlayout;if(csvLine){this._bWorkingstatus=true;function __findDatasetStart_loopFn(i){if(csvLine[i].substring(0,7)=="Dataset"){return true;}curIdx++ ;}curIdx=nexacro.__forLoop(this,curIdx,lineCnt,__findDatasetStart_loopFn);if(bAppend){bClear=false;if(this.colinfos&&this.colinfos.length>0){bOrgLayout=true;}}if(curIdx<(lineCnt-1)){curIdx++ ;var csvColLine=csvLine[curIdx++ ];if(nexacro._use_firefirstcount&&bClear&&this.firefirstcount>0){curIdx=this._loadFromCSVArray(csvColLine,csvLine,curIdx,this.firefirstcount,bOrgLayout,bClear);if(this.firefirstcount==this.rowcount){this._reFilter();this._resetSortGroup();this.on_fire_onload(errorcode,errormsg,1);this._forcesetRowPosition(0,51);this.rowposition=0;curIdx=this._loadFromCSVArray(csvColLine,csvLine,curIdx, -1,bOrgLayout,false);}}else{curIdx=this._loadFromCSVArray(csvColLine,csvLine,curIdx, -1,bOrgLayout,bClear);}if(this.colinfos){this._reFilter();this._resetSortGroup();}if(this._eventstat){this.on_fire_onload(errorcode,errormsg,bClear?0:12);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition( -1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this.rowposition=0;}}else if(curIdx<lineCnt){curIdx++ ;}this._bWorkingstatus=false;return curIdx;}};_pDataset.loadCSV=function(strcsv,bClear){if(strcsv){var csvLine=strcsv.split(/\r\n|\n/);if(csvLine.length){this.loadFromCSVArray(csvLine,csvLine.length,0,bClear);}}return this.rowcount;};_pDataset.__writeCSVRowData=function(list,rowRow){var colList=this.colinfos;var colCnt=colList.length;function __writeCSVColData_loopFn(i){var colinfo=colList[i];var value=rowRow[colinfo._index];value=this._convertValueBySaveProp(value);value=colinfo._toText(value);if(value!=null){if(colinfo.ntype==1){if(i==(colCnt-1)){this.__writeData(list,nexacro._quoteStr(value)+"\r\n");}else{this.__writeData(list,nexacro._quoteStr(value)+",");}}else{if(i==(colCnt-1)){this.__writeData(list,value+"\r\n");}else{this.__writeData(list,value+",");}}}else{if(i==(colCnt-1)){this.__writeData(list,"\r\n");}else{this.__writeData(list,",");}}}nexacro.__forLoop(this,0,colList.length,__writeCSVColData_loopFn);};_pDataset.saveCSV=function(id,savenan,saveinfinity,saveinvaliddate){var saveId=this.id;if(id&&id.length>0){saveId=id;}this._setSaveProp(savenan,saveinfinity,saveinvaliddate);var list=[];this.__writeData(list,"Dataset:"+saveId+"\r\n");var colList=this.colinfos;var colCnt=colList.length;if(colCnt>0){function __saveCSV_colinfo_loopFn(i){var colinfo=colList[i];var colId=colinfo.id;var colType=colinfo.ntype==9?"STRING":colinfo.type?colinfo.type:nexacro.DataUtils.toTypeName(colinfo.ntype);var colSize=colinfo.ntype==9?nexacro.DataUtils._default_sizes[1]:colinfo.size;var colStr;if(i==0){colStr=colId+":"+colType;}else{colStr=","+colId+":"+colType;}if(colSize){colStr+="("+colSize+")";}var colProp=colinfo.prop;if(colProp){colStr+=":"+colProp;var colSumText=colinfo.sumtext;if(colSumText){colStr+=":"+colSumText;}}this.__writeData(list,colStr);}nexacro.__forLoop(this,0,colList.length,__saveCSV_colinfo_loopFn);this.__writeData(list,"\r\n");}else{this.__writeData(list,"\r\n");}var rawRecords=this._rawRecords;if(rawRecords.length>0){function __saveCSV_row_loopFn(i){var rowRow=this.__getParsedRow(rawRecords[i]);if(rowRow._rtype&7){this.__writeCSVRowData(list,rowRow);}}nexacro.__forLoop(this,0,rawRecords.length,__saveCSV_row_loopFn);}this.__writeData(list,"\r\n");return list.join("");};_pDataset.loadBIN=function(binData){if(binData){var ssvdata=nexacro._convertDatasetBINToSSV(binData);if(ssvdata){return this.loadSSV(ssvdata);}}return this.rowcount;};_pDataset.saveBIN=function(id,strSaveType){var ssvdata=this.saveSSV(id,strSaveType);if(ssvdata){return nexacro._convertDatasetSSVToBIN(ssvdata);}return ssvdata;};_pDataset._setSaveProp=function(savenan,saveinfinity,saveinvaliddate){this._savenan=nexacro._isNull(savenan)?this.getSaveNan():(savenan?"include":"exclude");this._saveinfinity=nexacro._isNull(saveinfinity)?this.getSaveInfinity():(saveinfinity?"include":"exclude");this._saveinvaliddate=nexacro._isNull(saveinvaliddate)?this.getSaveInvalidDate():(saveinvaliddate?"include":"exclude");};_pDataset._convertValueBySaveProp=function(v){if(nexacro._isNull(v)){return v;}var savenan=this._savenan;var saveinfinity=this._saveinfinity;var saveinvaliddate=this._saveinvaliddate;if(savenan=="exclude"){if(v!=v){return undefined;}else if(v instanceof nexacro.Decimal&&v.isNaN()){return undefined;}}if(saveinfinity=="exclude"){if(typeof v=="number"&&!isNaN(v)&&!isFinite(v)){return undefined;}else if(v instanceof nexacro.Decimal&&v.isInfinity()){return undefined;}}if((saveinvaliddate=="exclude")&&(v instanceof nexacro.Date)&&isNaN(v.valueOf())){return undefined;}return v;};delete _pDataset;nexacro.TransactionItem=function(path,context,svcid,inDatasetsParam,outDatasetsParam,argsParam,datatype,async,last_modified,version){nexacro._CommunicationItem.call(this,path,"data",false,last_modified,version);this.context=context;this.svcid=svcid;this.inputDatasets=this._parseDSParam(inDatasetsParam);this.outputDatasets=this._parseDSParam(outDatasetsParam);this.parameters=this._parseVarParam(argsParam);this.datatype=(!datatype?0:datatype);this._sendData=this._serializeData();this._usewaitcursor=async&&nexacro._usewaitcursor;this._remain_data=null;this._progress_data=null;this._is_unknowntype_data=false;this._recieved_data=null;this._async_progress_timer_id=null;this._has_firstcount_dataset=this._hasFirstCountDs();if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<8){this._check_responseXML=true;}else{this._check_responseXML=false;}var hascookie=nexacro._hasCookieVariables();if(hascookie==false&&!this.parameters&&!this.inputDatasets){this._http_method="GET";}else{this._http_method="POST";}};var _pTransactionItem=nexacro._createPrototype(nexacro._CommunicationItem,nexacro.TransactionItem);nexacro.TransactionItem.prototype=_pTransactionItem;_pTransactionItem.handle=null;_pTransactionItem.callbackList=[];_pTransactionItem.type="data";_pTransactionItem.bcache=false;_pTransactionItem._type_name="TransactionItem";_pTransactionItem.on_start=function(){if(this._usewaitcursor){this._showWaitCursor(this.context);}nexacro._appendCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,0);}};_pTransactionItem.on_load_data=function(data,cookie,last_modified){var datasets=null;var parameters=null;var errorinfo;var bcache=this.bcache;var ret=null;this._addCookieToCookieVariable(cookie);if(data&&data._type_name=="DataCache"){bcache=false;errorinfo=data._loadData(this);}else{if(data&&this._protocol<0){data=this.on_decrypt(data);}if(this._progress_data){this.on_progress_data(data,true);errorinfo=this._progress_data._error_info;if(bcache){var target_ds=null;datasets=new nexacro.Collection();for(var buff_ds in this._progress_data._datasets){if(this._progress_data._datasets[buff_ds]._isEnable){target_ds=this._progress_data._datasets[buff_ds]._target_ds;datasets.add_item(target_ds.id,new nexacro._DataSetCache(target_ds.id,target_ds.colinfos,target_ds._constVars,target_ds._rawRecords));}}this._progress_data._datasets=null;parameters=this._progress_data._parameters;}}else{ret=this._deserializeData(data,0);if(bcache){parameters=ret[1];datasets=ret[2];}errorinfo=ret[0];}}if(bcache){var d_cache=nexacro._DataCacheList[this.path];if(!d_cache){nexacro._DataCacheList[this.path]=new nexacro._DataCache(parameters,datasets,last_modified,this.version);}else{d_cache.parameters=parameters;d_cache.datasets=datasets;d_cache.last_modified=last_modified?last_modified:"";d_cache.version=this.version;}}var errorcode=0;var errormsg="SUCCESS";if(errorinfo){errorcode=errorinfo[0];errormsg=errorinfo[1];}if(this._usewaitcursor){this._hideWaitCursor(this.context);}nexacro._removeCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,1);}var callbackList=this.callbackList;var n=callbackList.length;if(n>0){var loadmanager=this.context._load_manager;var dataitem=loadmanager?loadmanager.getDataItem(this.svcid):null;if(dataitem){dataitem._is_cancel=undefined;}for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){if(this._is_unknowntype_data){item.callback.call(target,this.svcid,errorcode,errormsg,"comm_fail_loaddetail",10599,this.path,this.path);}else{item.callback.call(target,this.svcid,errorcode,errormsg);}}}callbackList.splice(0,n);}this.handle=null;};_pTransactionItem.on_load_xmldom=function(xmldom,cookie,last_modified){this._addCookieToCookieVariable(cookie);var ret=this.__deserializeXML("",xmldom);var errorcode=0;var errormsg="SUCCESS";var errorinfo=ret[0];if(this.bcache){var d_cache=nexacro._DataCacheList[this.path];if(!d_cache){nexacro._DataCacheList[this.path]=new nexacro._DataCache(ret[1],ret[2],last_modified,this.version);}else{d_cache.parameters=ret[1];d_cache.datasets=ret[2];d_cache.last_modified=last_modified;d_cache.version=this.version;}}if(errorinfo){errorcode=errorinfo[0];errormsg=errorinfo[1];}if(this._usewaitcursor){this._hideWaitCursor(this.context);}nexacro._removeCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,1);}var callbackList=this.callbackList;var n=callbackList.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){if(this._is_unknowntype_data){item.callback.call(target,this.svcid,errorcode,errormsg,"comm_fail_loaddetail",10599,this.path,this.path);}else{item.callback.call(target,this.svcid,errorcode,errormsg);}}}callbackList.splice(0,n);}this.handle=null;};_pTransactionItem.on_progress=nexacro._emptyFn;_pTransactionItem.on_progress_data=function(data,bFinal){if(!this._progress_data){if(data.charAt(0)===" "){data=nexacro.trimLeft(data);}var data_type=this._getStreamType(data);switch(data_type){case "CSV":this._progress_data=new nexacro._ProgressDataCSV(this);break;case "SSV":this._progress_data=new nexacro._ProgressDataSSV(this);break;case "PPX":this._progress_data=new nexacro._ProgressDataPPX(this);break;case "XML":this._progress_data=new nexacro._ProgressDataXML(this);break;case "UNKNOWN":this._is_unknowntype_data=true;return;default:return;}}this._progress_data._on_progress(data,bFinal);};_pTransactionItem._async_progress_data=function(){if(this._b_recieved_all_data){this._recieved_data=null;return;}this.on_progress_data(this._recieved_data,false);this._b_block_onprogress=false;this._recieved_data=null;};_pTransactionItem.on_error=function(errstatus,fireerrorcode,returncode,locationurl,extramsg){if(this._usewaitcursor){this._hideWaitCursor(this.context);}var callbackList=this.callbackList;var n=callbackList.length;var ret=false;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){ret=item.callback.call(target,this.svcid, -1,"FAILED",fireerrorcode,returncode,this.path,locationurl,extramsg);if(ret){if(this._usewaitcursor){this._showWaitCursor(this.context);}continue;}}}if(ret){return true;}}var loadmanager=this.context._load_manager;var dataitem=loadmanager?loadmanager.getDataItem(this.svcid):null;if(dataitem&&!dataitem._is_cancel){return;}callbackList.splice(0,n);nexacro._removeCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,1);}this.handle=null;};_pTransactionItem._loadFromData=function(data){var ret=this._deserializeData(data,0);var errorcode=0;var errormsg="SUCCESS";var bcache=this.bcache;var last_modified=this.last_modified;var errorinfo=ret[0];if(errorinfo){errorcode=errorinfo[0];errormsg=errorinfo[1];}if(bcache){var parameters=ret[1];var datasets=ret[2];var d_cache=nexacro._DataCacheList[this.path];if(!d_cache){nexacro._DataCacheList[this.path]=new nexacro._DataCache(parameters,datasets,last_modified,this.version);}else{d_cache.parameters=parameters;d_cache.datasets=datasets;d_cache.last_modified=last_modified?last_modified:"";d_cache.version=this.version;}}var callbackList=this.callbackList;var n=callbackList.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){item.callback.call(target,this.svcid,errorcode,errormsg);}}callbackList.splice(0,n);}this.handle=null;};_pTransactionItem._showWaitCursor=function(context){if(context){context._waitCursor(true,context);if(nexacro._refcommuni&&nexacro._refcommuni>=0){nexacro._refcommuni++ ;}else{nexacro._refcommuni=0;}}};_pTransactionItem._hideWaitCursor=function(context){if(context){context._waitCursor(false,context);if(nexacro._refcommuni>0){nexacro._refcommuni-- ;}}};_pTransactionItem._parseDSParam=function(paramStr){if(!paramStr){return undefined;}var list=[];var expr=/([a-zA-Z가-힣_$][a-zA-Z가-힣0-9_$]*)\s*=\s*([a-zA-Z가-힣_$][a-zA-Z가-힣0-9_$]*(?:\:[aAuUnNPp])?)/g;var splitedParams=paramStr.match(expr);if(!splitedParams||splitedParams.length==0){return undefined;}var splitedParamCnt=splitedParams.length;var i;for(i=0;i<splitedParamCnt;i++ ){var param=splitedParams[i].split("=");var key=param[0].trim();var value=param[1].trim();var bduplicate=false;for(var j=0;j<i;j++ ){var checkparam=splitedParams[j].split("=");var checkkey=checkparam[0].trim();if(key==checkkey){bduplicate=true;}}if(bduplicate){i++ ;return false;}var type="N";var index=value.indexOf(":");if(index> -1){type=value.substring(index+1);value=value.substring(0,index);}var paramObj={lval:key,rval:value,saveType:type};list.push(paramObj);}return list;};_pTransactionItem._parseVarParam=function(paramStr){if(!paramStr){return;}paramStr=paramStr.replace(/^\s*|\s*$/g,'');if(paramStr.length==0){return undefined;}var list=[];var expr=/([a-zA-Z_][a-zA-Z0-9_]*)\s*="([^"]*)"|([a-zA-Z_][a-zA-Z0-9_]*)\s*='([^']*)'|([a-zA-Z_][a-zA-Z0-9_]*)\s*=([^ ]*)/g;var splitedParams=paramStr.match(expr);if(splitedParams){var splitedParamCnt=splitedParams.length;for(var i=0;i<splitedParamCnt;i++ ){var param=splitedParams[i].split("=");var len=param.length;var key=param[0].trim();var value=param[1].trim();for(var j=2;j<len;j++ ){value=value+"="+param[j].trim();}var type="N";len=value.length;if(len>0){value=nexacro.stripQuote(value);}var paramObj={lval:key,rval:value,saveType:type};list.push(paramObj);}}return list;};_pTransactionItem._serializeData=function(){if(this.datatype==1){return this.__serializeBIN();}else if(this.datatype==2){return this.__serializeSSV();}else{return this.__serializeXML();}};_pTransactionItem.__serializeXML=function(){var depth=0;var list=[],cookievar=[],pro;var argParamsCnt=0;var cookievarCnt=0;var i;var id,val;var enginecookievars=nexacro._getCookieVariables(4);if(enginecookievars){for(pro in enginecookievars){cookievar.push({id:pro,value:enginecookievars[pro].value});}}enginecookievars=nexacro._getCookieVariables(6);if(enginecookievars){for(pro in enginecookievars){cookievar.push({id:pro,value:enginecookievars[pro].value});}}this._writeData(list,"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",depth);this._writeData(list,"<Root xmlns=\"http://www.nexacroplatform.com/platform/dataset\">",depth++ );var argParams=this.parameters;if(argParams){argParamsCnt=argParams.length;}cookievarCnt=cookievar.length;if(argParamsCnt>0||cookievarCnt>0){this._writeData(list,"<Parameters>",depth++ );if(cookievarCnt){for(i=0;i<cookievarCnt;i++ ){var cookie=cookievar[i];if(!cookie){continue;}id=cookie.id;val=cookie.value;if(val&&val.length){val=nexacro._encodeXml(val);this._writeData(list,"<Parameter id=\""+id+"\">"+val+"</Parameter>",depth);}else{this._writeData(list,"<Parameter id=\""+id+"\" />",depth);}}}if(argParamsCnt>0){for(i=0;i<argParamsCnt;i++ ){id=argParams[i].lval;val=argParams[i].rval;if(val&&val.length){val=nexacro._encodeXml(val);this._writeData(list,"<Parameter id=\""+id+"\">"+val+"</Parameter>",depth);}else{this._writeData(list,"<Parameter id=\""+id+"\" />",depth);}}}this._writeData(list,"</Parameters>", --depth);}else{this._writeData(list,"<Parameters />",depth);}var datasetParams=this.inputDatasets;if(datasetParams&&datasetParams.length){var datasetCnt=datasetParams.length;for(i=0;i<datasetCnt;i++ ){id=datasetParams[i].rval;var ds=this.context._getDatasetObject(id);if(ds){list.push(ds._saveXML(datasetParams[i].lval,datasetParams[i].saveType,depth));}}}this._writeData(list,"</Root>", --depth);var rntVal;if(argParamsCnt==0&&cookievarCnt==0&&(!datasetParams||datasetParams.length==0)){rntVal="";}else{rntVal=list.join("\n");}return rntVal;};_pTransactionItem.__serializeSSV=function(){var _rs_=nexacro._getSSVRecordSeparator();var list=[],cookievar=[],pro;var enginecookievars=nexacro._getCookieVariables(4);if(enginecookievars){for(pro in enginecookievars){cookievar.push({id:pro,value:enginecookievars[pro].value});}}enginecookievars=nexacro._getCookieVariables(6);if(enginecookievars){for(pro in enginecookievars){cookievar.push({id:pro,value:enginecookievars[pro].value});}}var id,val,ds,i;list.push("SSV:utf-8"+_rs_);var argParamsCnt=0;var cookievarCnt=0;var argParams=this.parameters;if(argParams){argParamsCnt=argParams.length;}cookievarCnt=cookievar.length;if(cookievarCnt>0){for(i=0;i<cookievarCnt;i++ ){var cookie=cookievar[i];if(!cookie){continue;}id=cookie.id;val=cookie.value;if(val&&val.length){list.push(id+"="+val+_rs_);}else{list.push(id+"="+_rs_);}}}if(argParamsCnt>0){for(i=0;i<argParamsCnt;i++ ){id=argParams[i].lval;val=argParams[i].rval;if(val){list.push(id+"="+val+_rs_);}else{list.push(id+"="+_rs_);}}}var datasetParams=this.inputDatasets;if(datasetParams&&datasetParams.length){var datasetCnt=datasetParams.length;for(i=0;i<datasetCnt;i++ ){id=datasetParams[i].rval;ds=this.context._getDatasetObject(id);if(ds){list.push(ds.saveSSV(datasetParams[i].lval,datasetParams[i].saveType));}}}var rtnVal=list.join("");return rtnVal;};_pTransactionItem.__serializeBIN=function(){var ssvdata=this.__serializeSSV();if(ssvdata){return nexacro._convertStreamSSVToBIN(ssvdata);}return "";};_pTransactionItem._deserializeData=function(strRecvData,bPending){if(!strRecvData){return [[ -1,"Stream Data is null!"],[],new nexacro.Collection()];}if(strRecvData.charAt(0)==" "){strRecvData=strRecvData.trim();}var fstr=strRecvData.substring(0,3);if(fstr=="SSV"){return this.__deserializeSSV(strRecvData);}else if(fstr=="CSV"){return this.__deserializeCSV(strRecvData);}else if(fstr=="PPX"){return this.__deserializePPX(strRecvData);}else{return this.__deserializeXML(strRecvData);}};_pTransactionItem._setParamter=function(id,val){var form=this.context;if(id in form){if(nexacro._isNull(form[id])||!nexacro._isObject(form[id])){form[id]=val;}}else{var app=nexacro.getApplication();if(app&&app._existVariable(id)){app[id]=val;}else{var hasvariable=nexacro._hasEnvironmentVariable(id);if(hasvariable){nexacro.setEnvironmentVariable(id,val);}}}};_pTransactionItem._getDataset=function(id){var form=this.context;var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(var i=0;i<outDataCnt;i++ ){var param=outDatasets[i];if(param.rval==id){return form._getDatasetObject(param.lval);}}}};_pTransactionItem._hasFirstCountDs=function(){if(!this.outputDatasets){return false;}var outDataCnt=this.outputDatasets.length;var form=this.context;for(var i=0;i<outDataCnt;i++ ){var param=this.outputDatasets[i];var ds=form._getDatasetObject(param.lval);if(ds){if(ds.firefirstcount>0){return true;}}}return false;};_pTransactionItem.__deserializeXML=function(strRecvData,doc){var parameters=[];var datasets=new nexacro.Collection();var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;if(strRecvData.length>0&&!this._check_responseXML){var fstr=strRecvData.substr(0,10).toLowerCase();if(fstr.indexOf("<?xml")<0){this._is_unknowntype_data=true;return [[ -1,"invalid nexacro communication format"],parameters,datasets];}return this.__deserializeXMLFromStr(strRecvData);}if(!doc){if(strRecvData.indexOf("&quot;")>=0){strRecvData=nexacro._replaceAll(strRecvData,"&quot;","\"");}if(strRecvData.indexOf("&apos;")>=0){strRecvData=nexacro._replaceAll(strRecvData,"&apos;","\'");}doc=nexacro._parseXMLDocument(strRecvData);}if(doc.parseError&&doc.parseError.errorCode!=0){this._is_unknowntype_data=true;message="invalid nexacro communication format";code= -1;}if(code<= -1){return [[code,message],parameters,datasets];}var form=this.context;var errorinfo=[code,message];var i,ret=nexacro._getCommDataFromDom(doc,this);if(ret){var variable=ret[0];var len=variable.length;for(i=0;i<len;i++ ){if(variable[i].id=="ErrorCode"){errorinfo[0]=variable[i].val;}else if(variable[i].id=="ErrorMsg"){errorinfo[1]=variable[i].val;}if(this.bcache){parameters[parameters.length]=new nexacro._ParametersCache(variable[i].id,variable[i].val);}}if(this.bcache){var dataset_list=ret[1];len=dataset_list.length;for(i=0;i<len;i++ ){datasets.add_item(dataset_list[i].id,new nexacro._DataSetCache(dataset_list[i].id,dataset_list[i].colinfos,dataset_list[i]._constVars,dataset_list[i]._rawRecords));}}}doc=null;if(errorinfo[0]&&errorinfo[0]<= -1&&datasetloadtype=="onsuccess"){return [errorinfo,parameters,datasets];}var inDatasets=this.inputDatasets;if(errorinfo[0]>=0&&inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(i=0;i<inDataCnt;i++ ){var param=inDatasets[i];var ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}return [errorinfo,parameters,datasets];};_pTransactionItem.__deserializeXMLFromStr=function(strRecvData){var parameters=[];var datasets=new nexacro.Collection();var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;var i,param,attrStr,ds;if(!strRecvData){return [[ -1,"Stream Data is null!"],null,null];}var form=this.context;var xml_parse_pos=strRecvData.indexOf("<Dataset ");var headerData;if(xml_parse_pos> -1){headerData=strRecvData.substring(0,xml_parse_pos);}else{headerData=strRecvData;}var head_parse_pos=0;var paramsInfo=nexacro._getXMLTagData(headerData,head_parse_pos,"<Parameters>","</Parameters>");if(paramsInfo){var paramsData=paramsInfo[0];var param_parse_pos=0;var varInfo=nexacro._getXMLTagData2(paramsData,param_parse_pos,"<Parameter ","</Parameter>");while(varInfo){param_parse_pos=varInfo[3];attrStr=varInfo[1];var id=nexacro._getXMLAttributeID(attrStr);if(id&&id.length){var val=varInfo[0];if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}val=code;}else if(id=="ErrorMsg"){val=nexacro._decodeXml(val);message=val;}else if(id in form){if(nexacro._isNull(form[id])||!nexacro._isObject(form[id])){val=nexacro._decodeXml(val);form[id]=val;}}else{var app=nexacro.getApplication();if(app&&app._existVariable(id)){val=nexacro._decodeXml(val);app[id]=val;}else{var hasvariable=nexacro._hasEnvironmentVariable(id);if(hasvariable){val=nexacro._decodeXml(val);nexacro.setEnvironmentVariable(id,val);}}}if(this.bcache){parameters[parameters.length]=new nexacro._ParametersCache(id,val);}}varInfo=nexacro._getXMLTagData2(paramsData,param_parse_pos,"<Parameter ","</Parameter>");}}if(code<= -1&&datasetloadtype=="onsuccess"){return [[code,message],parameters,datasets];}var inDatasets=this.inputDatasets;if(code>=0&&inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(i=0;i<inDataCnt;i++ ){param=inDatasets[i];ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}var dsIds={};var dsTypes={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(i=0;i<outDataCnt;i++ ){param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;dsTypes[param.rval]=param.saveType;}}}if(xml_parse_pos>= -1){var datasetInfo=nexacro._getXMLTagData2(strRecvData,xml_parse_pos,"<Dataset ","</Dataset>");while(datasetInfo){xml_parse_pos=datasetInfo[3];attrStr=datasetInfo[1];var remoteId=nexacro._getXMLAttributeID(attrStr);if(remoteId&&remoteId.length){var localId=dsIds[remoteId];var type=dsTypes[remoteId];ds=form._getDatasetObject(localId);if(ds){ds.rowposition= -1;ds.loadFromXMLStr(datasetInfo[0],null,(type=="P"),code,message);if(this.bcache){datasets.add_item(localId,new nexacro._DataSetCache(localId,ds.colinfos,ds._constVars,ds._rawRecords));}}}datasetInfo=nexacro._getXMLTagData2(strRecvData,xml_parse_pos,"<Dataset ","</Dataset>");}}return [[code,message],parameters,datasets];};nexacro._getCommDataFromDom=function(doc,target){var variablelist=[];var paramElems=doc.getElementsByTagName("Parameter");var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;var i;if(paramElems&&paramElems.length){var varCnt=paramElems.length;for(i=0;i<varCnt;i++ ){var paramElem=paramElems[i];var id=paramElem.getAttribute("id");if(id&&id.length){var val=(paramElem.textContent||(paramElem.firstChild?paramElem.firstChild.nodeValue:""));if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}variablelist.push({id:id,val:code});}else if(id=="ErrorMsg"){message=val;variablelist.push({id:id,val:val});}else{target._setParamter(id,val);}}}}if(code<= -1&&datasetloadtype=="onsuccess"){return [variablelist,null];}var dsIds={};var dsTypes={};var outDatasets=target.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(i=0;i<outDataCnt;i++ ){var param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;dsTypes[param.rval]=param.saveType;}}}var form=target.context;var datasetlist=[];var datasets=doc.getElementsByTagName("Dataset");if(datasets&&datasets.length){var dataCnt=datasets.length;for(i=0;i<dataCnt;i++ ){var remoteId=datasets[i].getAttribute("id");if(remoteId&&remoteId.length){var localId=dsIds[remoteId];var ds=form._getDatasetObject(localId);var type=dsTypes[remoteId];if(!ds){ds=new nexacro.Dataset(remoteId);}ds.rowposition= -1;ds.loadFromDOM(datasets[i],null,(type=="P"),code,message);datasetlist.push(ds);}}}return [variablelist,datasetlist];};_pTransactionItem.__deserializePPX=function(strRecvData){var parameters=[];var datasets=new nexacro.Collection();var _rs_=nexacro._getSSVRecordSeparator();var _cs_=nexacro._getSSVUnitSeparator();var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;if(!strRecvData){return [[ -1,"Stream Data is null!"],null,null];}var form=this.context;var ppxLines=strRecvData.split(_rs_);var lineCnt=ppxLines.length;var curIdx=1;var param,curStr,ds;var i;for(;curIdx<lineCnt;curIdx++ ){curStr=ppxLines[curIdx];var curType=curStr.charAt(0);if(curType=="P"){var paramArr=curStr.split(_cs_);var id=paramArr[1];var val=paramArr[2];if(val==String.fromCharCode(3)){val=undefined;}if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}val=code;}else if(id=="ErrorMsg"){message=paramArr[2];}else if(id in form){if(nexacro._isNull(form[id])||!nexacro._isObject(form[id])){form[id]=val;}}else{var app=nexacro.getApplication();if(app&&app._existVariable(id)){app[id]=val;}else{var hasvariable=nexacro._hasEnvironmentVariable(id);if(hasvariable){nexacro.setEnvironmentVariable(id,val);}}}if(this.bcache){parameters[parameters.length]=new nexacro._ParametersCache(id,val);}}else{break;}}if(code<= -1&&datasetloadtype=="onsuccess"){ppxLines.length=0;strRecvData=null;return [[code,message],parameters,datasets];}var inDatasets=this.inputDatasets;if(code>=0&&inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(i=0;i<inDataCnt;i++ ){param=inDatasets[i];ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}var dsIds={};var dsTypes={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(i=0;i<outDataCnt;i++ ){param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;dsTypes[param.rval]=param.saveType;}}}function __find_next_dataset_loopFn(i){var curStr=ppxLines[i];if(curStr.charAt(0)=="D"){return true;}}while(true){curIdx=nexacro.__forLoop(this,curIdx,lineCnt,__find_next_dataset_loopFn);if(curIdx>=lineCnt){break;}curStr=ppxLines[curIdx];var valArr=curStr.split(_cs_);var remoteId=valArr[1];if(remoteId&&remoteId.length){var localId=dsIds[remoteId];ds=form._getDatasetObject(localId);var type=dsTypes[remoteId];if(ds){ds.rowposition= -1;curIdx=ds.loadFromPPXArray(ppxLines,lineCnt,curIdx,true,(type=="P"),code,message);if(this.bcache){datasets.add_item(localId,new nexacro._DataSetCache(localId,ds.colinfos,ds._constVars,ds._rawRecords));}}else{curIdx++ ;}}else{curIdx++ ;}}ppxLines.length=0;return [[code,message],parameters,datasets];};_pTransactionItem.__deserializeSSV=function(strRecvData){var parameters=[];var datasets=new nexacro.Collection();var _rs_=nexacro._getSSVRecordSeparator();var _cs_=nexacro._getSSVUnitSeparator();var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;if(!strRecvData){return [[ -1,"Stream Data is null!"],null,null];}var form=this.context;var ssvLines=strRecvData.split(_rs_);var lineCnt=ssvLines.length;var curIdx=1;var i,param,curStr,sep_pos,ds;for(;curIdx<lineCnt;curIdx++ ){curStr=ssvLines[curIdx];if(curStr.substring(0,7)!="Dataset"){var paramArr=curStr.split(_cs_);var paramCnt=paramArr.length;for(i=0;i<paramCnt;i++ ){var paramStr=paramArr[i];var varInfo=paramStr;var val=undefined;sep_pos=paramStr.indexOf("=");if(sep_pos>=0){varInfo=paramStr.substring(0,sep_pos);val=paramStr.substring(sep_pos+1);if(val==String.fromCharCode(3)){val=undefined;}}if(varInfo){var id=varInfo;sep_pos=varInfo.indexOf(":");if(sep_pos>=0){id=varInfo.substring(0,sep_pos);}if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}val=code;}else if(id=="ErrorMsg"){message=val;}else if(id in form){if(nexacro._isNull(form[id])||!nexacro._isObject(form[id])){form[id]=val;}}else{var app=nexacro.getApplication();if(app&&app._existVariable(id)){app[id]=val;}else{var hasvariable=nexacro._hasEnvironmentVariable(id);if(hasvariable){nexacro.setEnvironmentVariable(id,val);}}}if(this.bcache){parameters[parameters.length]=new nexacro._ParametersCache(id,val);}}}}else{break;}}if(code<= -1&&datasetloadtype=="onsuccess"){ssvLines.length=0;strRecvData=null;return [[code,message],parameters,datasets];}var inDatasets=this.inputDatasets;if(code>=0&&inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(i=0;i<inDataCnt;i++ ){param=inDatasets[i];ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}var dsIds={};var dsTypes={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(i=0;i<outDataCnt;i++ ){param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;dsTypes[param.rval]=param.saveType;}}}function __find_next_dataset_loopFn(i){var curStr=ssvLines[i];if(curStr.substring(0,7)=="Dataset"){return true;}}while(true){curIdx=nexacro.__forLoop(this,curIdx,lineCnt,__find_next_dataset_loopFn);if(curIdx>=lineCnt){break;}curStr=ssvLines[curIdx];sep_pos=curStr.indexOf(":");if(sep_pos>=0){var remoteId=curStr.substring(sep_pos+1);if(remoteId&&remoteId.length){var localId=dsIds[remoteId];ds=form._getDatasetObject(localId);var type=dsTypes[remoteId];if(ds){ds.rowposition= -1;curIdx=ds.loadFromSSVArray(ssvLines,lineCnt,curIdx,true,(type=="P"),code,message);if(this.bcache){datasets.add_item(localId,new nexacro._DataSetCache(localId,ds.colinfos,ds._constVars,ds._rawRecords));}}else{curIdx++ ;}}else{curIdx++ ;}}else{curIdx++ ;}}ssvLines.length=0;return [[code,message],parameters,datasets];};_pTransactionItem.__deserializeCSV=function(strRecvData){var parameters=[];var datasets=new nexacro.Collection();var code=0;var message="SUCCESS";var env=nexacro.getEnvironment();var datasetloadtype=env.datasetloadtype;if(!strRecvData){return [[ -1,"Stream Data is null!"],null,null];}var form=this.context;var csvLines=strRecvData.split(/\r\n|\n/);var lineCnt=csvLines.length;var curIdx=1;var i,param,curStr,sep_pos,ds;for(;curIdx<lineCnt;curIdx++ ){curStr=csvLines[curIdx];if(curStr.substring(0,7)=="Dataset"){break;}var paramArr=curStr.split(",");var paramCnt=paramArr.length;for(i=0;i<paramCnt;i++ ){var paramStr=paramArr[i];if(paramStr.charAt(0)=="\""||paramStr.charAt(0)=="\'"){paramStr=paramStr.substring(1,paramStr.length-1);}var varInfo=paramStr;var val=undefined;sep_pos=paramStr.indexOf("=");if(sep_pos>=0){varInfo=paramStr.substring(0,sep_pos);val=paramStr.substring(sep_pos+1);}if(varInfo){var id=varInfo;sep_pos=varInfo.indexOf(":");if(sep_pos>=0){id=varInfo.substring(0,sep_pos);}if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}val=code;}else if(id=="ErrorMsg"){message=val;}else if(id in form){if(nexacro._isNull(form[id])||!nexacro._isObject(form[id])){form[id]=val;}}else{var app=nexacro.getApplication();if(app&&app._existVariable(id)){app[id]=val;}else{var hasvariable=nexacro._hasEnvironmentVariable(id);if(hasvariable){nexacro.setEnvironmentVariable(id,val);}}}if(this.bcache){parameters[parameters.length]=new nexacro._ParametersCache(id,val);}}}}if(code<= -1&&datasetloadtype=="onsuccess"){csvLines.length=0;strRecvData=null;return [[code,message],parameters,datasets];}var inDatasets=this.inputDatasets;if(code>=0&&inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(i=0;i<inDataCnt;i++ ){param=inDatasets[i];ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}var dsIds={};var dsTypes={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(i=0;i<outDataCnt;i++ ){param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;dsTypes[param.rval]=param.saveType;}}}function __find_next_dataset_loopFn(i){var curStr=csvLines[i];if(curStr.substring(0,7)=="Dataset"){return true;}}while(true){curIdx=nexacro.__forLoop(this,curIdx,lineCnt,__find_next_dataset_loopFn);if(curIdx>=lineCnt){break;}curStr=csvLines[curIdx];sep_pos=curStr.indexOf(":");if(sep_pos>=0){var remoteId=curStr.substring(sep_pos+1);if(remoteId&&remoteId.length){var localId=dsIds[remoteId];ds=form._getDatasetObject(localId);var type=dsTypes[remoteId];if(ds){ds.rowposition= -1;curIdx=ds.loadFromCSVArray(csvLines,lineCnt,curIdx,true,(type=="P"),code,message);if(this.bcache){datasets.add_item(localId,new nexacro._DataSetCache(localId,ds.colinfos,ds._constVars,ds._rawRecords));}}else{curIdx++ ;}}else{curIdx++ ;}}else{curIdx++ ;}}csvLines.length=0;return [[code,message],parameters,datasets];};_pTransactionItem._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t"];_pTransactionItem._writeData=function(list,str,depth){list[list.length]=this._TABS[depth]+str;};_pTransactionItem._dsUpdate=function(ds){if(ds){var dsCnt;var viewRecords=ds._viewRecords;var viewRecLength=viewRecords.length;if(ds._deletedRecords.length>0){viewRecords=ds._viewRecords=[];var len=ds._rawRecords.length;for(dsCnt=0;dsCnt<len;dsCnt++ ){var _currowData=ds._rawRecords[dsCnt];if(_currowData._rtype!=8){viewRecords[viewRecLength]=_currowData;}}}ds.colcount=ds.colinfos.length;ds.rowcount=ds._viewRecords.length;ds.loadstatus=false;ds._eventstat=ds.enableevent;ds._reFilter();ds._resetSortGroup();}};_pTransactionItem._dsOnload=function(ds,reason){if(ds){if(ds._viewRecords.length>0){ds.rowposition=0;}if(ds._eventstat){if(reason){ds.on_fire_onload(0,"",reason);}else{ds.on_fire_onload(0,"",0);}}}};_pTransactionItem._getStreamType=function(strRecvData){if(!strRecvData){return null;}var data=strRecvData;var type=data.slice(0,10).toUpperCase();if(type.indexOf("CSV")==0){return "CSV";}else if(type.indexOf("SSV")==0){return "SSV";}else if(type.indexOf("PPX")==0){return "PPX";}else if(type.indexOf("<?XML")==0){return "XML";}else if(type.length==10){return "UNKNOWN";}return null;};_pTransactionItem._destroy=function(){this._sendData=null;this._recieved_data=null;if(this._b_block_onprogress&&this._async_progress_timer_id!=null){clearTimeout(this._async_progress_timer_id);}};delete _pTransactionItem;}
if(!nexacro.InputEventInfo){nexacro.InputEventInfo=function(obj,id){this.id=this.eventid=id||"oninput";this.fromobject=this.fromreferenceobject=obj;};var _pInputEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.InputEventInfo);nexacro.InputEventInfo.prototype=_pInputEventInfo;_pInputEventInfo._type_name="InputEventInfo";delete InputEventInfo;nexacro.EditClickEventInfo=function(obj,id,caretpos,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){nexacro.ClickEventInfo.call(this,obj,id||"oneditclick",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);this.caretpos=(caretpos==null)?0:caretpos;};var _pEditClickEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.EditClickEventInfo);nexacro.EditClickEventInfo.prototype=_pEditClickEventInfo;_pEditClickEventInfo._type_name="EditClickEventInfo";delete _pEditClickEventInfo;_pEditClickEventInfo=null;nexacro._substrByUnit=function(str,start,length,unit){if(str===undefined){return str;}start=Math.max(start,0);length=Math.max(length,0);if(unit=="utf8"){return nexacro._substrByUtf8(str,start,length);}else if(unit=="ascii"){return nexacro._substrByAscii(str,start,length);}else{return str.substr(start,length);}};nexacro._getLengthByUnit=function(str,unit){if(unit=="utf8"){return nexacro._getUtf8Length(str);}else if(unit=="ascii"){return nexacro._getAsciiLength(str);}else{return str.length;}};nexacro.__utf8Len=function(codePoint){if(codePoint>=0xD800&&codePoint<=0xDFFF){throw new Error("Illegal argument: "+codePoint);}if(codePoint<0){throw new Error("Illegal argument: "+codePoint);}if(codePoint<=0x7F){return 1;}if(codePoint<=0x7FF){return 2;}if(codePoint<=0xFFFF){return 3;}if(codePoint<=0x1FFFFF){return 4;}if(codePoint<=0x3FFFFFF){return 5;}if(codePoint<=0x7FFFFFFF){return 6;}throw new Error("Illegal argument: "+codePoint);};nexacro.__isHighSurrogate=function(codeUnit){return codeUnit>=0xD800&&codeUnit<=0xDBFF;};nexacro.__isLowSurrogate=function(codeUnit){return codeUnit>=0xDC00&&codeUnit<=0xDFFF;};nexacro.__toCodepoint=function(highCodeUnit,lowCodeUnit){if(!nexacro.__isHighSurrogate(highCodeUnit)){throw new Error("Illegal argument: "+highCodeUnit);}if(!nexacro.__isLowSurrogate(lowCodeUnit)){throw new Error("Illegal argument: "+lowCodeUnit);}highCodeUnit=(0x3FF&highCodeUnit)<<10;var u=highCodeUnit|(0x3FF&lowCodeUnit);return u+0x10000;};nexacro._substrByUtf8=function(str,start,length){var count=0;var end=str.length-start;for(var i=start;i<end;i++ ){var ch=str.charCodeAt(i);if(nexacro.__isHighSurrogate(ch)){var high=ch;var low=str.charCodeAt( ++i);count+=nexacro.__utf8Len(nexacro.__toCodepoint(high,low));}else{count+=nexacro.__utf8Len(ch);}if(length==count){end=i-start+1;break;}else if(length<count){end=i-start;break;}}return str.substring(start,end);};nexacro._substrByAscii=function(str,start,length){var count=0;var end=str.length-start;for(var i=start;i<end;i++ ){var ch=str.charCodeAt(i);if(ch>255){count++ ;}count++ ;if(length==count){end=i-start+1;break;}else if(length<count){end=i-start;break;}}return str.substring(start,end);};nexacro._getUtf8Length=function(str){var length=str.length;var utf8_length=0;for(var i=0;i<length;i++ ){var ch=str.charCodeAt(i);if(nexacro.__isHighSurrogate(ch)){var high=ch;var low=str.charCodeAt( ++i);utf8_length+=nexacro.__utf8Len(nexacro.toCodepoint(high,low));}else{utf8_length+=nexacro.__utf8Len(ch);}}return utf8_length;};nexacro._getAsciiLength=function(str){var length=str.length;var ascii_length=0;for(var i=0;i<length;i++ ){var ch=str.charCodeAt(i);if(ch>255){ascii_length++ ;}ascii_length++ ;}return ascii_length;};nexacro._getWCharLen=function(v){var c=v.charCodeAt(0);if(((c&0xff80)==0)||c==0x20a9){return 1;}else if((c&0xff00)<0x0800){return 2;}else{return 3;}};nexacro._is_hangul=function(v){var r=new RegExp("[\\uac00-\\ud7af\\u3130-\\u318f\\u1100-\\u11ff]");if(r.test(v)){return true;}return false;};nexacro._is_english=function(v){var r=new RegExp("[\\u0041-\\u007a]");if(r.test(v)){return true;}return false;};nexacro._is_half_japaness=function(v){var r=new RegExp("[\\uff61-\\uff9f]");if(r.test(v)){return true;}return false;};nexacro._is_japanese=function(keycode,v){var regexp_nipon=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u31F0-\u31FF]|[\uFF01-\uFFEF]|[\u3000-\u3002]|[\u300C]|[\u300D]|[\u309B]|[\u309C]|[\u2010-\u201F]/;var regexp_hanja=/[\u2E80-\u2EFF]|[\u3400-\u4DBF]|[\u4E00-\u9FBF]|[\uF900-\uFAFF]|[\u20000-\u2A6DF]|[\u2F8000-\u2FA1F]/;var regexp_ascii=/[\u0000-\u007F]/;var regexp_greek=/[\u0370-\u03FF]/;if(regexp_nipon.test(v)||regexp_hanja.test(v)){return true;}if(keycode==nexacro.KeyCode_ImeInput){if(regexp_ascii.test(v)){return true;}if(regexp_greek.test(v)){return true;}}return false;};nexacro._ImeLocale=function(){this._locale=this._prev_locale=nexacro.System.locale?nexacro.System.locale.substring(0,2):"";};var _pImeLocale=nexacro._createPrototype(nexacro.Object,nexacro._ImeLocale);nexacro._ImeLocale.prototype=_pImeLocale;_pImeLocale._find_imeLocale=function(v){var r;if(this._locale){var _locale=this._locale.substring(0,2);var _locale_unicode=nexacro._locale_unicode[_locale];if(_locale_unicode){r=new RegExp(_locale_unicode);if(r.test(v)){return _locale;}}}for(var i in nexacro._locale_unicode){r=new RegExp(nexacro._locale_unicode[i]);if(r.test(v)){return i;}}return null;};_pImeLocale.setLocale=function(v){this._prev_locale=this._locale;this._locale=v;};_pImeLocale.getLocale=function(){return this._locale;};_pImeLocale.IsChangeLocale=function(){return this._prev_locale!=this._locale;};_pImeLocale.updateLocale=function(v){if(!v){return;}this._prev_locale=this._locale;var ret=this._find_imeLocale(v);if(ret){this._locale=ret;}};delete _pImeLocale;_pImeLocale=null;nexacro._CompositionState=function(){this.status=0;this.startOffset=0;this.endOffset=0;this.hasCandidateWindow=false;this._delay_status=undefined;this._prev_status=undefined;this._delay_status_pos= -1;};nexacro._CompositionState.NONE=0;nexacro._CompositionState.START=1;nexacro._CompositionState.COMPOSING=2;nexacro._CompositionState.END=3;var _pCompositeState=nexacro._createPrototype(nexacro.Object,nexacro._CompositionState);nexacro._CompositionState.prototype=_pCompositeState;_pCompositeState.isComposing=function(){return (this.status==nexacro._CompositionState.START||this.status==nexacro._CompositionState.COMPOSING);};_pCompositeState.setStatus=function(status,offset,skip_caret){this._prev_status=this.status;this.status=status;switch(status){case nexacro._CompositionState.NONE:case nexacro._CompositionState.START:this.startOffset=offset;this.endOffset=offset;this.hasCandidateWindow=undefined;break;case nexacro._CompositionState.COMPOSING:if(!skip_caret){this.endOffset=offset;}break;case nexacro._CompositionState.END:this.endOffset=offset;break;}this._delay_status=undefined;this._delay_status_pos= -1;};_pCompositeState.setDelayStatus=function(status,pos){this._delay_status=status;this._delay_status_pos=pos==undefined? -1:pos;};_pCompositeState.setOffset=function(begin,end){if(this.status!=nexacro._CompositionState.NONE){this.startOffset=begin;this.endOffset=end;}};_pCompositeState.getOffset=function(){return {begin:this.startOffset,end:this.endOffset};};_pCompositeState.isHasCandiateWindow=function(chars,recheck){if(this.status!=nexacro._CompositionState.NONE){if((chars&&chars.length>0)&&(this.hasCandidateWindow===undefined||recheck)){var hangul_unicode_block=/[\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFFA0-\uFFDF]/g;var charCount=chars.match(hangul_unicode_block);this.hasCandidateWindow=!(charCount&&charCount.length>0);}return this.hasCandidateWindow;}return false;};delete _pCompositeState;_pCompositeState=null;nexacro._EditInputFilter=function(filter){this.pattern=null;if(filter){this._parse(filter);}};var _pEditInputFilter=nexacro._createPrototype(nexacro.Object,nexacro._EditInputFilter);nexacro._EditInputFilter.prototype=_pEditInputFilter;nexacro._EditInputFilter.MAP={alpha:"a-zA-Z",digit:"0-9",comma:",",dot:".",sign:"+\\-",space:" \t",symbol:"!\"#$%&'()*\\/;:<=>?@\\[\\\\\\]\\^_`{|}~'\\\\\\u20a9"};_pEditInputFilter.init=function(filter){this.pattern=null;this._parse(filter);};_pEditInputFilter._parse=function(filter){if(filter){var buffer="";var arr=filter.split(",");var len=arr.length;for(var i=0;i<len;i++ ){var regex=nexacro._EditInputFilter.MAP[arr[i]];if(regex){buffer+=regex;}}this.pattern=(buffer.length?new RegExp("["+buffer+"]"):null);}};_pEditInputFilter.test=function(ch){if(ch!=''&&this.pattern){return this.pattern.test(ch);}return false;};_pEditInputFilter.apply=function(value){if(!value){value="";}if(value&&this.pattern){var len=value.length;var valArr=value.split("");var text=[];for(var i=0;i<len;i++ ){var ch=valArr[i];if(this.pattern.test(ch)){continue;}text.push(ch);}return text.join("");}return value;};delete _pEditInputFilter;_pEditInputFilter=null;nexacro._EditInputType=function(type){this.typepattern=null;this.filterpattern=null;this.imedisable=false;this._imedisable=false;this.keypadtype="text";if(type){this._parse(type);}};var _pEditInputType=nexacro._createPrototype(nexacro.Object,nexacro._EditInputType);nexacro._EditInputType.prototype=_pEditInputType;nexacro._EditInputType.MAP={alpha:"a-zA-Z",comma:",",digit:"0-9",dot:".",english:"a-zA-Z",symbol:"!\"#$%&'()*\\/;:<=>?@[\\\\\\]\\^_`{|}~'\\u20a9",number:"0-9\\-.,",numberandenglish:"0-9\\-.,\\a-zA-Z",sign:"+\\-",space:" \t",half:"\\uff61-\\uffdc\\uffe8-\\uffee",full:"\\u3000\\uff01-\\uff60\\uffe0-\\uffe6",wide:"\\u2E80-\\u2FFB\\u3001-\\u303E\\u3041-\\u4DBF\\u4E00-\\uA4C6\\uAC00-\\uD7A3\\ud800-\\udbff\\udc00-\\udfff\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE6B"};_pEditInputType.init=function(type){this.typepattern=null;this.filterpattern=null;this.imedisable=false;this.keypadtype="text";this._parse(type);};_pEditInputType._parse=function(type){if(type){if(type.indexOf("full")> -1&&type.indexOf("half")> -1){return;}var arrType=type.split(/\s*,\s*/);var arrTypeFilter=[];if(type.indexOf("half")> -1){this._imedisable=true;arrTypeFilter.push("full");arrTypeFilter.push("wide");arrType=[];}else if(type.indexOf("full")> -1){arrType.push("wide");}else if(type.indexOf("normal")<= -1){this._imedisable=true;if(!this.password&&type.indexOf("normal")<0&&type.indexOf("alpha")<0&&type.indexOf("english")<0&&type.indexOf("numberandenglish")<0&&type.indexOf("symbol")<0){this.keypadtype="number";}else{this.keypadtype="text";}}var bufferType="";var i,regex,lenType=arrType.length;for(i=0;i<lenType;i++ ){regex=nexacro._EditInputType.MAP[arrType[i]];if(regex){bufferType+=regex;}}var bufferTypeFilter="";var lenFilter=arrTypeFilter.length;for(i=0;i<lenFilter;i++ ){regex=nexacro._EditInputType.MAP[arrTypeFilter[i]];if(regex){bufferTypeFilter+=regex;}}this.typepattern=(bufferType.length?new RegExp("["+bufferType+"]"):null);this.filterpattern=(bufferTypeFilter.length?new RegExp("["+bufferTypeFilter+"]"):null);}};_pEditInputType.test=function(ch){if(ch!=''){if(this.filterpattern&&this.filterpattern.test(ch)){return false;}if(this.typepattern){if(this.typepattern.test(ch)){return true;}}else{return true;}}return false;};_pEditInputType.apply=function(value){if(!value){value="";}if(value&&(this.typepattern||this.filterpattern)){value=value.replace(/\r\n/g,"\n");var len=value.length;var valArr=value.split("");var text=[];for(var i=0;i<len;i++ ){var ch=valArr[i];if(this.filterpattern&&this.filterpattern.test(ch)){continue;}if(ch!="\n"&&this.typepattern&&!this.typepattern.test(ch)){continue;}text.push(ch);}return text.join("");}return value;};delete _pEditInputType;_pEditInputType=null;nexacro._EditUndoStack=function(target){nexacro.Object.call(this);if(target){this.target=target;}this.stack=[];this.index= -1;this._processing_onundoredo=false;};var _pEditUndoStack=nexacro._createPrototype(nexacro.Object,nexacro._EditUndoStack);nexacro._EditUndoStack.prototype=_pEditUndoStack;_pEditUndoStack.target=null;_pEditUndoStack.push=function(value,start,end){if(this._processing_onundoredo){return;}var stack=this.stack;var index=this.index;if(stack.length>0){if(index>0){var item=stack[index];if(!item){return;}var cur_value=stack[index].value;if(cur_value==value){return;}}var remove_cnt=stack.length-index-1;if(remove_cnt){stack.splice(index+1,remove_cnt);}}this.index=stack.length;this.stack.push({"value":value,"start":start,"end":end});};_pEditUndoStack.update=function(start,end){var stack=this.stack;var index=this.index;if(stack){var item=stack[index];if(!item){return;}item.start=start;item.end=end;}};_pEditUndoStack.undo=function(){var stack=this.stack;var target=this.target;var item=null,prev_index=this.index-1;if(prev_index>=0){item=stack[prev_index];}if(target._on_input_undo){this._processing_onundoredo=true;if(target._on_input_undo(item)&&item){this.index=prev_index;}this._processing_onundoredo=false;}};_pEditUndoStack.redo=function(){var stack=this.stack;var target=this.target;var item=null,next_index=this.index+1;if(next_index<stack.length){item=stack[next_index];}if(target._on_input_redo){this._processing_onundoredo=true;if(target._on_input_redo(item)&&item){this.index=next_index;}this._processing_onundoredo=false;}};_pEditUndoStack.clear=function(){this.stack=[];this.index= -1;};_pEditUndoStack.destroy=function(){this.target=null;};delete _pEditUndoStack;_pEditUndoStack=null;nexacro._EditMaskType=function(){this.mask="";this.locale="";this.limittype="none";this.maskchar="";this.fillchar="";this._is_editing=false;this._input_mode="text";};var _pMaskType=nexacro._createPrototype(nexacro.Object,nexacro._EditMaskType);nexacro._EditMaskType.prototype=_pMaskType;_pMaskType._type_name="MaskType";_pMaskType.setMask=function(mask){if(this.mask!=mask){this.mask=mask;}};_pMaskType.setLocale=function(v){if(v!=this.locale){this.locale=v;}};_pMaskType.setLimitType=function(v){if(this.limittype!=v){this.limittype=v;}};_pMaskType.setMaskChar=function(ch){if(this.maskchar!=ch){this.maskchar=ch;}};_pMaskType.setFillChar=function(ch){if(this.fillchar!=ch){this.fillchar=ch;}};_pMaskType.setEditStatus=function(v){if(this._is_editing!=v){this._is_editing=v;}};_pMaskType.applyMask=function(value){return value;};_pMaskType.arrangeMask=function(input_text,begin,end){return {"text":input_text,"pos":end};};_pMaskType.removeMask=function(masked_text){return masked_text;};_pMaskType.keyPressed=function(){};_pMaskType.findNearEditablePos=function(pos){return pos;};_pMaskType.isDeletableChar=function(){return true;};_pMaskType.isFilterChar=function(){return false;};_pMaskType.isFilled=function(){return false;};_pMaskType.getInputMode=function(){return this._input_mode;};_pMaskType.getEditStatus=function(){return this._is_editing;};delete _pMaskType;_pMaskType=null;nexacro._EditMaskTypeNumber=function(){nexacro._EditMaskType.call(this);this.mask="";this.limittype="none";this.maskchar="";this.fillchar="0";this._input_mode="number";this._decimal_point=".";this._thousands_sep=",";this._mask_decimal_point=".";this._mask_thousands_sep=",";this._init();};var _pMaskTypeNumber=nexacro._createPrototype(nexacro._EditMaskType,nexacro._EditMaskTypeNumber);nexacro._EditMaskTypeNumber.prototype=_pMaskTypeNumber;_pMaskTypeNumber._type_name="MaskTypeNumber";nexacro._EditMaskTypeNumber._put_thousand_seperator=function(text,grouping){if(!text||!grouping){return text;}var group=grouping[0];if(!group||group<1){return text;}var reg;if(grouping.length>1){grouping.shift();reg=new RegExp("(\\d+)(\\d{"+group+"})($|\\.\\d+)");if(reg.test(text)){return text.replace(reg,function(str,p1,p2,p3){return nexacro._EditMaskTypeNumber._put_thousand_seperator(p1,grouping)+','+p2+p3;});}}else{reg=new RegExp("\\B(?=(\\d{"+group+"})+(?!\\d))","g");if(reg.test(text)){return text.replace(reg,',');}}return text;};_pMaskTypeNumber._init=function(){this.locale="";this._grouping=[];this._sign_type=3;this._sign_sep_by_space=0;this._init_digits();this._masked_empty_text="";this._is_max_intpart=false;this._is_max_decpart=false;this._use_grouping=false;this._is_intpart_zero=true;this._is_decpart_zero=true;this._is_intpart_nine=false;};_pMaskTypeNumber._init_digits=function(){this._is_integer_mask=false;this._int_digits_min=0;this._int_digits_max= -1;this._dec_digits_min=0;this._dec_digits_max= -1;this._dec_min_sharp= -1;this._dec_max_sharp= -1;};_pMaskTypeNumber.setMask=function(mask){if(this.mask!=mask){this.mask=mask;this._parseMask(mask);}};_pMaskTypeNumber.setUseGrouping=function(bgroup){if(this._use_grouping!=bgroup){this._use_grouping=bgroup;}};_pMaskTypeNumber._parseMask=function(mask){this._init_digits();if(!mask||mask==="."){return;}var reg_valid=/(^[\+\-\!]?\s*[#09]{1,}[#09,]*(?:$|\.[#09]*)|^\.[#09]*$)/;if(!reg_valid.test(mask)){return;}var sign_char=mask[0];switch(sign_char){case '-':this._sign_type=0;break;case '+':this._sign_type=1;break;case '!':this._sign_type=2;break;default:{this._sign_type=3;sign_char='';}break;}var len=mask.length;var sign_sep_by_space=0;var empty_value,i;if(this._sign_type!=3){for(i=1;i<len;i++ ){var c=mask[i];if(c=='#'||c=='9'||c=='0'){break;}if(c!=' '){return;}sign_sep_by_space++ ;}}this._sign_sep_by_space=sign_sep_by_space;var point_char=this._mask_decimal_point;var point_idx=mask.indexOf(point_char);this._is_integer_mask=(point_idx<0);var int_part="",dec_part="";if(this._is_integer_mask){int_part=mask.substring(sign_char.length+sign_sep_by_space);}else{int_part=mask.substring((sign_char.length+sign_sep_by_space),point_idx);dec_part=mask.substring(point_idx+1);if(dec_part){var idx_sharp,is_fixed_min_sharp;idx_sharp=dec_part.indexOf("#");if(idx_sharp> -1){is_fixed_min_sharp=false;this._dec_max_sharp=idx_sharp;for(i=dec_part.length-1;i>=idx_sharp;i-- ){if(dec_part[i]=="#"){if(this._dec_min_sharp== -1){this._dec_min_sharp=i;}if(this._dec_max_sharp<i){this._dec_max_sharp=i;}if(this._dec_min_sharp>i&&is_fixed_min_sharp==false){this._dec_min_sharp=i;}}else if(this._dec_min_sharp!= -1){is_fixed_min_sharp=true;}}}}}var idx,prev_idx=int_part.length-1;var thousands_sep=this._mask_thousands_sep;if(int_part.lastIndexOf(thousands_sep,prev_idx)> -1){this.setUseGrouping(true);}else{this.setUseGrouping(false);}int_part=int_part.split(thousands_sep).join('');var int_digits=int_part.length;this._int_digits_max=int_digits;idx=int_part.indexOf('0');if(idx> -1){this._int_digits_min=int_digits-idx;}var last_int_mask=int_digits?int_part[int_digits-1]:"";if(idx== -1){if(last_int_mask=="#"){this._is_intpart_zero=false;}else if(last_int_mask=="9"){this._is_intpart_zero=false;this._is_intpart_nine=true;}}if(this._int_digits_min>0){empty_value="";for(i=0;i<this._int_digits_min;i++ ){empty_value+='0';}var grouping=this._grouping.slice(0);if(grouping.length>0){this._masked_empty_text=nexacro._EditMaskTypeNumber._put_thousand_seperator(empty_value,grouping);}else{this._masked_empty_text=empty_value;}}else{this._masked_empty_text="";}if(this._is_integer_mask){return;}dec_part=dec_part.replace(/[.]/g,'');var dec_digits=dec_part.length;this._dec_digits_max=dec_digits;idx=dec_part.lastIndexOf('0');if(idx> -1){this._dec_digits_min=idx+1;}var last_dec_mask=dec_digits?dec_part[0]:"";if(idx== -1&&last_dec_mask=="#"){this._is_decpart_zero=false;}if(this._dec_digits_min>0){empty_value=".";for(i=0;i<this._dec_digits_min;i++ ){empty_value+='0';}this._masked_empty_text+=empty_value;}};_pMaskTypeNumber.setLocale=function(v){if(v!=this.locale){this.locale=v;var info=nexacro.Locale.getLocaleInfo(v);var first_group=info.grouping[0];this._decimal_point=info.decimal_point;this._thousands_sep=info.thousands_sep?info.thousands_sep:this._mask_thousands_sep;if(first_group==0||first_group== -1){this._grouping=[3];}else{this._grouping=info.grouping;}}};_pMaskTypeNumber.setLimitType=function(v){if(this.limittype!=v){this.limittype=v;this._check_int_max=(v=="both"||v=="integer");this._check_dec_max=(v=="both"||v=="decimal");}};_pMaskTypeNumber.applyMask=function(value){var bfillzero=!this._is_editing;this._is_max_intpart=false;this._is_max_decpart=false;var text=nexacro._toString(value);if(!text){return (bfillzero?this._masked_empty_text:"");}text=text.replace(/^\s\s*/,'').replace(/[,]/g,'');var pos=0;var len=text.length;var bmask=(this._int_digits_max== -1&&this._dec_digits_max== -1)?false:true;var sign_char=text[pos++ ];if(sign_char!='+'&&sign_char!='-'){pos-=1;sign_char='';}for(;pos<len;pos++ ){var c=text[pos];if((c>='0'&&c<='9')||c==','||c=='.'){break;}if(c!=' '){return (bfillzero?this._masked_empty_text:"");}}var point_char=this._mask_decimal_point;var point_idx=text.indexOf(point_char);var int_part="",dec_part="";if(point_idx<0){int_part=text.substring(pos);int_part=!bmask?int_part.padLeft(1,"0"):int_part;}else{int_part=text.substring(pos,point_idx);dec_part=text.substring(point_idx+1);int_part=!bmask?int_part.padLeft(1,"0"):int_part;dec_part=!bmask?dec_part.padLeft(1,"0"):dec_part;}if(!this._is_intpart_zero){if(!this._is_intpart_nine||dec_part){int_part=(int_part.length&& +int_part===0)?"":int_part;}}if(!this._is_decpart_zero){dec_part=(dec_part.length&& +dec_part===0)?"":dec_part;}if((int_part.length>0&&!(/^(?:[0-9]*)$/.test(int_part)))||(dec_part.length>0&&!(/^(?:[0-9]*)$/.test(dec_part)))){return (bfillzero?this._masked_empty_text:"");}var i,idx,prev_idx=int_part.length-1;var thousands_sep=this._thousands_sep;var grouping=[];if(this._use_grouping){grouping=this._grouping.slice(0);}for(i=0;;i++ ){idx=int_part.lastIndexOf(thousands_sep,prev_idx);if(idx<0){break;}var group=grouping[(i<grouping.length?i:grouping.length-1)];if(!group||(prev_idx-idx)!=group){return (bfillzero?this._masked_empty_text:"");}prev_idx=idx-1;}var masked_text=sign_char;if(sign_char!=''){for(i=0;i<this._sign_sep_by_space;i++ ){masked_text+=' ';}}int_part=int_part.split(thousands_sep).join('');var int_digits=int_part.length;var int_max=this._int_digits_max;if(int_digits>=int_max){this._is_max_intpart=true;}var int_min=this._int_digits_min;var fillcnt;if(bfillzero&&int_min>0){fillcnt=int_min-int_digits;for(i=0;i<fillcnt;i++ ){int_part='0'+int_part;}}int_part=nexacro._EditMaskTypeNumber._put_thousand_seperator(int_part,grouping);int_part=int_part.replace(/,/g,thousands_sep);masked_text+=int_part;if(this._is_integer_mask){return masked_text;}var dec_digits=dec_part.length;var dec_min=this._dec_digits_min;var dec_max=this._dec_digits_max;if(dec_digits>=dec_max){this._is_max_decpart=true;}if(bfillzero&&dec_min>0){fillcnt=dec_min-dec_digits;for(i=0;i<fillcnt;i++ ){dec_part+='0';}}if(this._check_dec_max&&dec_max> -1&&dec_part.length>dec_max){dec_part=dec_part.substring(0,dec_max);}var dec_max_sharp=this._dec_max_sharp;if(dec_max_sharp>=dec_max-1){var dec_min_zero= -1;var dec_min_sharp=this._dec_min_sharp;for(i=dec_max_sharp;i>=dec_min_sharp;i-- ){if(dec_part[i]==0){dec_min_zero=i;}else if(dec_max_sharp==i){break;}}if(dec_min_zero> -1){dec_part=dec_part.slice(0,dec_min_zero);}}if(dec_part!=""){masked_text+=this._decimal_point;masked_text+=dec_part;}else if(this._is_editing&&point_idx> -1){masked_text+=this._decimal_point;}return masked_text;};_pMaskTypeNumber.arrangeMask=function(input_text,begin,end){this._is_max_intpart=false;this._is_max_decpart=false;var text=nexacro._toString(input_text);if(!text){return {"text":"","pos":end};}var result_buf=[];var decimal_point=this._decimal_point;var thousands_sep=this._thousands_sep;text=text.replace(/^\s\s*/,'');var input_ch=input_text.substring(begin,end);if(input_ch=='+'||input_ch=='-'){text=text.substring(0,begin)+text.substring(end);}var textlen=text.length;var pos=0,end_rpos=input_text.length-end;var ch=text[pos];if(input_ch=='+'&&(this._sign_type==1||this._sign_type==3)){if(ch=='+'){result_buf.push("");pos++ ;}else{result_buf.push(input_ch);if(ch=='-'){pos++ ;}}}else if(input_ch=='-'&&(this._sign_type==0||this._sign_type==3)){if(ch=='-'){result_buf.push("");pos++ ;}else{result_buf.push(input_ch);if(ch=='+'){pos++ ;}}}for(;pos<textlen;pos){ch=text[pos];if((ch>='0'&&ch<='9')||ch==','||ch=='.'){break;}if(ch!=' '&&ch!='-'&&ch!='+'){return null;}result_buf.push(ch);pos++ ;}var int_buf=[],buf_len=0;var bTrimZero=true,intpart_last_char;var int_begin_pos=pos,splice_begin= -1,changed_cnt=0;while(pos<textlen){ch=text[pos];if(!ch||ch==decimal_point){break;}pos++ ;if(ch==thousands_sep){continue;}if(!(ch>='0'&&ch<='9')){continue;}intpart_last_char=ch;if(bTrimZero){if(ch=='0'){continue;}bTrimZero=false;}buf_len=int_buf.push(ch);if(pos<=end){if(pos>begin){changed_cnt++ ;}splice_begin=buf_len;}}var int_len=int_buf.length;var int_max=this._int_digits_max;var chk_int_max=(this._check_int_max&&int_max> -1);var over_cnt;if(chk_int_max&&begin<pos&&end>int_begin_pos){over_cnt=int_len-int_max;if(over_cnt>0&&changed_cnt>0){if(over_cnt>changed_cnt){int_buf.splice(splice_begin-changed_cnt,changed_cnt);}else{int_buf.splice(splice_begin-over_cnt,over_cnt);}int_len=int_buf.length;}}if(int_buf.length==0&&intpart_last_char=='0'){int_len=int_buf.push('0');}if(int_len>=int_max){this._is_max_intpart=true;}if(int_buf.length>0){var grouping=[];if(this._use_grouping){grouping=this._grouping.slice(0);}var int_part=nexacro._EditMaskTypeNumber._put_thousand_seperator(int_buf.join(''),grouping);result_buf.push(int_part.replace(/,/g,thousands_sep));}if(pos<textlen){if(this._is_integer_mask){return null;}ch=text[pos++ ];if(ch!=decimal_point){return null;}result_buf.push(ch);}var dec_buf=[];var dec_begin_pos=pos;splice_begin= -1;changed_cnt=0;while(pos<textlen){ch=text[pos];if(!(ch>='0'&&ch<='9')){return null;}pos++ ;buf_len=dec_buf.push(ch);if(pos<=end){if(pos>begin){changed_cnt++ ;}splice_begin=buf_len;}}var dec_max=this._dec_digits_max;var chk_dec_max=(this._check_dec_max&&dec_max> -1);var dec_len=dec_buf.length;if(chk_dec_max&&end>begin&&end>dec_begin_pos){over_cnt=dec_len-dec_max;if(over_cnt>0&&changed_cnt>0){if(over_cnt>changed_cnt){dec_buf.splice(splice_begin-changed_cnt,changed_cnt);}else{dec_buf.splice(splice_begin-over_cnt,over_cnt);}}dec_len=dec_buf.length;}if(dec_len>=dec_max){this._is_max_decpart=true;}if(dec_buf.length>0){result_buf.push(dec_buf.join(''));}input_text=result_buf.join('');var newpos=(input_text.length<end_rpos?end:input_text.length-end_rpos);return {"text":input_text,"pos":newpos};};_pMaskTypeNumber.removeMask=function(masked_text){var text=nexacro._toString(masked_text);if(!text){return "";}text=text.replace(/^\s\s*/,'');var textlen=text.length;var result_buf=[];var decimal_point=this._decimal_point;var thousands_sep=this._thousands_sep;var pos=0;var ch=text[pos];if(ch=='+'||ch=='-'){if(ch=='-'){result_buf.push(ch);}pos++ ;}for(;pos<textlen;pos++ ){ch=text[pos];if((ch>='0'&&ch<='9')||ch==','||ch=='.'){break;}if(ch!=' '){return result_buf.join('');}}if(pos==textlen){return "";}var bTrimZero=true;while(pos<textlen){ch=text[pos];if(!ch||ch==decimal_point){break;}pos++ ;if(ch==thousands_sep){continue;}if(!(ch>='0'&&ch<='9')){return result_buf.join('');}if(bTrimZero){if(ch=='0'){continue;}bTrimZero=false;}result_buf.push(ch);}var int_is_zero=false;if(bTrimZero){result_buf.push('0');int_is_zero=true;}if(this._is_integer_mask){return result_buf.join('');}if(pos<textlen){ch=text[pos++ ];if(ch!=decimal_point){return result_buf.join('');}}var dec_buf=[];var dec_max=this._dec_digits_max;var chk_dec_max=(this._check_dec_max&&dec_max> -1);var dec_digits=textlen-pos;if(chk_dec_max&&dec_digits>dec_max){dec_digits=dec_max;}if(dec_digits>0){ch=text[pos];if(!(ch>='0'&&ch<='9')){return result_buf.join('');}dec_buf.push(ch);}bTrimZero=true;for(var i=dec_digits-1;i>0;i-- ){ch=text[pos+i];if(!(ch>='0'&&ch<='9')){return result_buf.join('');}if(bTrimZero){if(ch=='0'){continue;}bTrimZero=false;}dec_buf[i]=ch;}if(dec_buf.length>0){var dec=dec_buf.join('');if(!int_is_zero||dec!='0'){result_buf.push(this._mask_decimal_point);result_buf.push(dec);}}return result_buf.join('');};_pMaskTypeNumber.isDeletableChar=function(ch){if(ch==this._thousands_sep){return false;}return true;};_pMaskTypeNumber.isFilterChar=function(ch){if(/[,\.\+\-0-9\s]/.test(ch)){return false;}return true;};_pMaskTypeNumber.isFilled=function(){var isfill=false;if(this._is_integer_mask){isfill=this._is_max_intpart;}else{isfill=this._is_max_decpart;}return isfill;};delete _pMaskTypeNumber;_pMaskTypeNumber=null;nexacro._EditMaskTypeString=function(){nexacro._EditMaskType.call(this);this.mask="";this.maskchar="_";this.fillchar=" ";this._input_mode="text";this._char_buf=[];this._is_filled=false;this._is_mismatch=false;this._init();};var _pMaskTypeString=nexacro._createPrototype(nexacro._EditMaskType,nexacro._EditMaskTypeString);nexacro._EditMaskTypeString.prototype=_pMaskTypeString;_pMaskTypeString._type_name="MaskTypeString";_pMaskTypeString._init=function(){this._masked_empty_text="";this._mask_buf=[];this._value_buf=[];this._input_mode="text";this._is_filled=false;this._is_mismatch=false;};_pMaskTypeString.setMask=function(mask){if(this.mask!=mask){this.mask=mask;this._parseMask(mask);}};_pMaskTypeString._parseMask=function(mask){this._init();if(!mask){return;}var ch,pos=0;var mask_buf=this._mask_buf;var value_buf=this._value_buf;var empty_buf=[];var maskchar=this.maskchar;var bNumberMaskOnly;var bQuote=false;var nBrace=0;while((ch=mask[pos++ ])){switch(ch){case '@':{mask_buf.push(/[\u0020-\u00ff]/);value_buf.push(nBrace>0?'*':'$1');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case '#':{mask_buf.push(/\d/);value_buf.push(nBrace>0?'*':'$1');empty_buf.push(maskchar);if(bNumberMaskOnly==undefined){bNumberMaskOnly=true;}}break;case '*':{mask_buf.push(/[a-zA-Z]/);value_buf.push(nBrace>0?'*':'$1');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case '9':{mask_buf.push(/[a-zA-Z0-9]/);value_buf.push(nBrace>0?'*':'$1');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case 'A':{mask_buf.push(/[a-zA-Z]/);value_buf.push(nBrace>0?'*.toUpperCase()':'$1.toUpperCase()');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case 'a':{mask_buf.push(/[a-zA-Z]/);value_buf.push(nBrace>0?'*.toLowerCase()':'$1.toLowerCase()');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case 'Z':{mask_buf.push(/[a-zA-Z0-9]/);value_buf.push(nBrace>0?'*.toUpperCase()':'$1.toUpperCase()');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case 'z':{mask_buf.push(/[a-zA-Z0-9]/);value_buf.push(nBrace>0?'*.toLowerCase()':'$1.toLowerCase()');empty_buf.push(maskchar);bNumberMaskOnly=false;}break;case '\'':{bQuote=true;while((ch=mask[pos++ ])){if(ch=='\''){bQuote=false;break;}if(ch=='\\'){ch=mask[pos++ ];}if(ch){mask_buf.push(ch);value_buf.push('');empty_buf.push(ch);}}if(bQuote){return;}}break;case '{':{nBrace++ ;}break;case '}':{nBrace-- ;}break;case '\\':{ch=mask[pos++ ];if(ch){mask_buf.push(ch);value_buf.push('');empty_buf.push(ch);}}break;default:{mask_buf.push(ch);value_buf.push('');empty_buf.push(ch);}break;}}if(bNumberMaskOnly){this._input_mode="number";}this._masked_empty_text=empty_buf.join('');};_pMaskTypeString.setMaskChar=function(ch){if(this.maskchar!=ch){this.maskchar=ch;this._parseMask(this.mask);}};_pMaskTypeString.applyMask=function(value){this._is_filled=false;this._is_mismatch=false;var text=nexacro._toString(value);if(!text){return this._masked_empty_text;}var mask_buf=this._mask_buf;var value_buf=this._value_buf;var char_buf=this._char_buf;var result_buf=[];var ch,mask,val;var bufpos=0,txtpos=0;var maskchar=this.maskchar;var fillchar=this.fillchar;var is_filled=true;while((mask=mask_buf[bufpos])){val=value_buf[bufpos];if(val==""){result_buf.push(mask);if((this.mask.length==text.length)&&(mask==text[txtpos])){txtpos++ ;}}else{do{ch=text[txtpos++ ];if(ch&&!(mask.test(ch))&&!(ch==fillchar)&&!(ch=="\u200e")){this._is_mismatch=true;continue;}else{break;}}while(true)if(!ch||(fillchar!=""&&ch==fillchar)||!mask.test(ch)){char_buf[bufpos]='';result_buf.push(maskchar);is_filled=false;}else if(val=="*"){char_buf[bufpos]=ch;result_buf.push(val);}else if(val=="$1"){char_buf[bufpos]=ch;result_buf.push(ch);}else if(val[0]=='*'){ch=nexacro._executeEvalStr(val.replace("*","\""+ch+"\""));char_buf[bufpos]=ch;result_buf.push('*');}else{ch=nexacro._executeEvalStr(val.replace("$1","\""+ch+"\""));char_buf[bufpos]=ch;result_buf.push(ch);}}bufpos++ ;}this._is_filled=is_filled;return result_buf.join('');};_pMaskTypeString.arrangeMask=function(input_text,begin,end){var mask_buf=this._mask_buf;var value_buf=this._value_buf;var char_buf=this._char_buf;var mask_len=mask_buf.length;if(mask_len==0){return {"text":input_text,"pos":end};}var text=nexacro._toString(input_text);var over_cnt=text.length-mask_len;var target_text=text.substr(0,over_cnt);var over_text=text.substr(over_cnt);if(target_text==over_text){return {"text":target_text,"pos":end};}var text_buf=text.split('');var mask,ch;var maskchar=this.maskchar;var val,i,fillchar=this.fillchar;for(i=begin;i<end;i++ ){val=value_buf[i];if(val==null){break;}if(val==""){if(text_buf[i]!=mask_buf[i]){end++ ;over_cnt++ ;text_buf.splice(i,0,mask_buf[i]);}}else{mask=mask_buf[i];ch=text_buf[i];if(!ch||(fillchar!=""&&ch==fillchar)||!mask.test(ch)){char_buf[i]='';text_buf[i]=maskchar;}else if(val=="*"){char_buf[i]=ch;text_buf[i]='*';}else if(val=="$1"){char_buf[i]=ch;text_buf[i]=ch;}else if(val[0]=='*'){ch=nexacro._executeEvalStr(val.replace("*","\""+ch+"\""));char_buf[i]=ch;text_buf[i]='*';}else{ch=nexacro._executeEvalStr(val.replace("$1","\""+ch+"\""));char_buf[i]=ch;text_buf[i]=ch;}}}if(end<mask_len){if(over_cnt>0){text_buf.splice(end,over_cnt);}else if(over_cnt<0){over_cnt= -(over_cnt);for(i=0;i<over_cnt;i++ ){var pos=end+i;val=value_buf[pos];if(val==""){text_buf.splice(pos,0,mask_buf[pos]);}else{text_buf.splice(pos,0,maskchar);char_buf[pos]="";}}}}else{end=mask_len;text_buf.splice(end,(text_buf.length-end));}return {"text":text_buf.join(''),"pos":end};};_pMaskTypeString.removeMask=function(masked_text){var mask_buf=this._mask_buf;var value_buf=this._value_buf;var char_buf=this._char_buf;this._is_filled=false;var mask_len=mask_buf.length;if(mask_len==0){return masked_text;}var maskchar=this.maskchar;var fillchar=this.fillchar;var text=nexacro._toString(masked_text);var ch,val,bufpos=0;var result_buf=[];var is_filled=true;while((mask_buf[bufpos])){val=value_buf[bufpos];if(val!=""){ch=text[bufpos];if(!ch){if(fillchar!=""){result_buf.push(fillchar);}is_filled=false;}else if(ch==maskchar){ch=char_buf[bufpos];if(ch&&ch==maskchar){result_buf.push(ch);}else{if(fillchar!=""){result_buf.push(fillchar);}is_filled=false;}}else if(ch=='*'&&val[0]=='*'){ch=char_buf[bufpos];if(ch){result_buf.push(ch);}else{if(fillchar!=""){result_buf.push(fillchar);}is_filled=false;}}else{result_buf.push(ch);}}bufpos++ ;}this._is_filled=is_filled;return result_buf.join('');};_pMaskTypeString.keyPressed=function(ch,pos){this._char_buf[pos]=ch;};_pMaskTypeString.findNearEditablePos=function(pos,direction){var value_buf=this._value_buf;var ch,len=value_buf.length;if(direction>0){if(pos==len){return pos;}else{while(pos<len){ch=value_buf[pos];if(ch!=""){return pos;}pos++ ;}}}else if(direction<0){while(pos> -1){ch=value_buf[pos];if(ch!=""){return pos;}pos-- ;}}else{if((value_buf[pos])){return pos;}}return  -1;};_pMaskTypeString.isDeletableChar=function(ch,pos){if(this._value_buf[pos]){return true;}return false;};_pMaskTypeString.isFilterChar=function(ch,pos){var mask=this._mask_buf[pos];if(mask&&typeof mask!="string"&&mask.test(ch)){return false;}return true;};_pMaskTypeString.isFilled=function(){return this._is_filled;};delete _pMaskTypeString;_pMaskTypeString=null;nexacro._EditMaskTypeDate=function(){nexacro._EditMaskType.call(this);this.maskchar=" ";this.date="";this.editmask="";this.datemask="";this._input_mode="number";this._is_filled=false;this._use_edit_buf=true;this._init();};var _pMaskTypeDate=nexacro._createPrototype(nexacro._EditMaskType,nexacro._EditMaskTypeDate);nexacro._EditMaskTypeDate.prototype=_pMaskTypeDate;_pMaskTypeDate._type_name="MaskTypeDate";_pMaskTypeDate._dateformatMap=[["yyyy","yy"],["MM","M","MMMM"],["dd","d"],["HH","H","hh","h"],["mm","m"],["ss","s"],["sss"],["ddd","dddd"]];_pMaskTypeDate._DateTypeConst={DATE:0,TIME:1,DATETIME:2};_pMaskTypeDate._DateFormatConst={YEAR:["yyyy","yy"],MONTH:["MM","M","MMMM"],DAY:["dd","d"],HOUR:["HH","H","hh","h"],MINUTE:["mm","m"],SECOND:["ss","s"],MILLISECOND:["sss"],DAYOFWEEK:["ddd","dddd"],NORMALFORMAT_DATE:["YEAR","MONTH","DAY"],NORMALFORMAT_TIME:["HOUR","MINUTE","SECOND","MILLISECOND"],NORMALFORMAT_DATETIME:["YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","MILLISECOND"]};_pMaskTypeDate._init=function(){this.locale="";this._datelistS=["일","월","화","수","목","금","토"];this._datelistL=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];this._initdate();this._initeditmask();this._initdatemask();};_pMaskTypeDate._initdate=function(){this._date=[];this._dateObj=null;};_pMaskTypeDate._initeditmask=function(){this._editmask_type= -1;this._editmasked_empty_text="";this._editmask=[];this._edit_char_buf=[];this._edit_value_buf=[];this._edit_mask_buf=[];this._edit_type_buf=[];};_pMaskTypeDate._initdatemask=function(){this._datemask_type= -1;this._datemasked_empty_text="";this._datemask=[];this._date_char_buf=[];this._date_value_buf=[];this._date_mask_buf=[];this._date_type_buf=[];};_pMaskTypeDate.setInputMode=function(mode){this._input_mode=mode;};_pMaskTypeDate.setUseEditBuffer=function(use){this._use_edit_buf=use;};_pMaskTypeDate.setDate=function(date){this.date=date;};_pMaskTypeDate._parseDate=function(date){this._initdate();if(!date){return;}var info=this._date;var y,M,d;switch(this._is_editing?this.getEditFormatType():this.getDateFormatType()){case 0:y=date.substr(0,4);M=date.substr(4,2);d=date.substr(6,2);info.push(y);info.push(M);info.push(d);break;case 1:y="0000";M="01";d="01";info.push(y);info.push(M);info.push(d);info.push(date.substr(0,2));info.push(date.substr(2,2));info.push(date.substr(4,2));info.push(date.substr(6,3));break;case 2:y=date.substr(0,4);M=date.substr(4,2);d=date.substr(6,2);info.push(y);info.push(M);info.push(d);info.push(date.substr(8,2));info.push(date.substr(10,2));info.push(date.substr(12,2));info.push(date.substr(14,3));break;}this._dateObj=new Date(y, +M-1,d);(function(_y,_obj){if(_y<=99&&_y>=0){var base_date=new Date(0,0,1);var base_fullyear=base_date.getFullYear();var fullyear=_obj.getFullYear();var calc_year=fullyear-base_fullyear;_obj.setFullYear(calc_year);}})(y,this._dateObj);};_pMaskTypeDate.setEditMask=function(mask){if(this.editmask!=mask){this.editmask=mask;this._parseEditMask(mask);if(this.date){this._parseDate(this.date);}}};_pMaskTypeDate._parseEditMask=function(mask){this._initeditmask();if(!mask){return;}if(mask=="SHORTDATE"||mask=="LONGDATE"){var locale=this._getLocale();mask=nexacro.Locale._makeDateMaskString(locale,mask);}var maskchar=this.maskchar;var mask_buf=this._edit_mask_buf;var value_buf=this._edit_value_buf;var type_buf=this._edit_type_buf;var empty_buf=[];var info=this._editmask;var ch,str;var type;var updateinfos=[];var updateinfo={};var bApostrophe=false;var bDateMask=false;var bTimeMask=false;var pos=0,idx=0;do{ch=mask[pos];if(this.isMaskChar(ch)&&!bApostrophe){if(!str){str=ch;idx=pos;}else{if(ch==mask[pos-1]){str+=ch;}else{type=this.changeMaskToType(str);info.push({mask:str,type:type});for(idx;idx<pos;idx++ ){if(str=="dddd"||str=="MMMM"){mask_buf[idx]=str[0];value_buf[idx]="";}type_buf[idx]=type;}str=ch;idx=pos;}}empty_buf.push(maskchar);value_buf.push('$1');mask_buf.push(/\d/);}else{if(str){type=this.changeMaskToType(str);info.push({mask:str,type:type});if((type>=10&&type<=69)&&((type%10)>0)){updateinfos.push({pos:pos,type:type});}for(idx;idx<pos;idx++ ){if(str=="dddd"||str=="MMMM"){mask_buf[idx]=str[0];value_buf[idx]="";}type_buf[idx]=type;}}else if(ch=="'"&&bApostrophe){bApostrophe=false;continue;}else if(ch=="'"&&!bApostrophe){bApostrophe=true;continue;}if(!nexacro._isNull(ch)){info.push({mask:ch,type: -1});empty_buf.push(ch);value_buf.push('');mask_buf.push(ch);type_buf.push( -1);}str="";}if(type>=0&&type<=29){bDateMask=true;}if(type>=30&&type<=69){bTimeMask=true;}}while(mask[pos++ ])for(var i=updateinfos.length-1;i>=0;i-- ){updateinfo=updateinfos[i];mask_buf.splice(updateinfo.pos,0,/\d/);type_buf.splice(updateinfo.pos,0,updateinfo.type);value_buf.splice(updateinfo.pos,0,"$1");empty_buf.splice(updateinfo.pos,0,maskchar);}if(bDateMask){if(bTimeMask){this._editmask_type=2;}else{this._editmask_type=0;}}else{if(bTimeMask){this._editmask_type=1;}else{this._editmask_type= -1;}}this._editmasked_empty_text=empty_buf.join('');};_pMaskTypeDate.setDateMask=function(mask){if(this.datemask!=mask){this.datemask=mask;this._parseDateMask(this.datemask);}};_pMaskTypeDate._parseDateMask=function(mask){this._initdatemask();if(!mask){return;}if(mask=="SHORTDATE"||mask=="LONGDATE"){var locale=this._getLocale();mask=nexacro.Locale._makeDateMaskString(locale,mask);}var maskchar=this.maskchar;var mask_buf=this._date_mask_buf;var value_buf=this._date_value_buf;var type_buf=this._date_type_buf;var empty_buf=[];var info=this._datemask;var ch,str;var type;var bApostrophe=false;var bDateMask=false;var bTimeMask=false;var pos=0,idx=0;do{ch=mask[pos];if(this.isMaskChar(ch)&&!bApostrophe){if(!str){str=ch;idx=pos;}else{if(ch==mask[pos-1]){str+=ch;}else{type=this.changeMaskToType(str);info.push({mask:str,type:type});for(idx;idx<pos;idx++ ){type_buf[idx]=type;}str=ch;idx=pos;}}empty_buf.push(maskchar);value_buf.push('$1');mask_buf.push(/\d/);}else{if(str){type=this.changeMaskToType(str);info.push({mask:str,type:type});for(idx;idx<pos;idx++ ){type_buf[idx]=type;}}else if(ch=="'"&&bApostrophe){bApostrophe=false;continue;}else if(ch=="'"&&!bApostrophe){bApostrophe=true;continue;}if(!nexacro._isNull(ch)){info.push({mask:ch,type: -1});empty_buf.push(ch);value_buf.push('');mask_buf.push(ch);type_buf.push( -1);}str="";}if(type>=0&&type<=29){bDateMask=true;}if(type>=30&&type<=69){bTimeMask=true;}}while(mask[pos++ ])if(bDateMask){if(bTimeMask){this._datemask_type=2;}else{this._datemask_type=0;}}else{if(bTimeMask){this._datemask_type=1;}else{this._datemask_type= -1;}}this._datemasked_empty_text=empty_buf.join('');};_pMaskTypeDate.setLocale=function(locale){this.locale=locale;var locale_info=nexacro.Locale.getLocaleInfo(locale);this._datelistS=locale_info.weekday_names_short;this._datelistL=locale_info.weekday_names_long;this._monthlistS=locale_info.month_names_short;this._monthlistL=locale_info.month_names_long;this._parseEditMask(this.editmask);this._parseDateMask(this.datemask);};_pMaskTypeDate.applyMask=function(value){if(!this.datemask||!this.editmask){return value;}if(this.date!=value){this.setDate(value);}this._parseDate(this.date);if(!value){if(this._is_editing){return this._editmasked_empty_text;}else{return this._datemasked_empty_text;}}if(this._is_editing){this._edit_char_buf=[];}var pos=0;var info,mask,type;var infos=this._is_editing?this._editmask:this._datemask;var tmpStr="";var resultStr="";while(info=infos[pos]){mask=info.mask;type=info.type;if(type>=0){tmpStr=this._appliedMaskString(info);if(this._is_editing){if(type==12||type==70||type==71){tmpStr=mask;}else if(type>10&&type<69){tmpStr=tmpStr.length==1?" "+tmpStr:tmpStr;}}}else{tmpStr=mask;}resultStr+=tmpStr;if(this._is_editing){this._edit_char_buf=this._edit_char_buf.concat(tmpStr.split(''));}pos++ ;}return resultStr;};_pMaskTypeDate.applyMaskSpin=function(caretPos,diff){var editmask=this._editmask;var type_buf=this._edit_type_buf.slice(0);var char_buf=this._edit_char_buf;caretPos=(caretPos==type_buf.length)?caretPos-1:caretPos;var caretType=type_buf[caretPos];if(caretType== -1){caretPos=caretPos>0?caretPos-1:caretPos;caretType=type_buf[caretPos];if(caretType== -1){return char_buf.join('');}}var pos=0;var type= -1;var tmpStr="";var changeidx_buf=[];var info={};while(!nexacro._isNull(type=type_buf[pos])){if(caretType==type){tmpStr+=char_buf[pos];changeidx_buf.push(pos);}if(editmask[pos]&&editmask[pos].type==caretType){info=editmask[pos];}pos++ ;}var intVal= +tmpStr+diff;switch(caretType){case 0:case 1:if(intVal<0){intVal=9999;}else if(intVal>9999){intVal=0;}break;case 10:case 11:if(intVal<1){intVal=12;}else if(intVal>12){intVal=1;}break;case 20:case 21:var endday=this.getEndDay(this._date[0],this._date[1]);if(intVal<1){intVal=endday;}else{if(intVal>endday){intVal=1;}}break;case 30:case 31:if(intVal<0){intVal=23;}else if(intVal>23){intVal=0;}break;case 32:case 33:if(intVal<0){intVal=11;}else if(intVal>11){intVal=0;}break;case 40:case 41:case 50:case 51:if(intVal<0){intVal=59;}else if(intVal>59){intVal=0;}break;case 60:if(intVal<0){intVal=999;}else if(intVal>999){intVal=0;}break;}var text_buf=[];tmpStr=this._appliedMaskString(info,intVal.toString());if(caretType>10&&caretType<69){tmpStr=tmpStr.length==1?" "+tmpStr:tmpStr;}text_buf=tmpStr.split('');for(var i=0;i<changeidx_buf.length;i++ ){char_buf[changeidx_buf[i]]=text_buf[i];}return char_buf.join('');};_pMaskTypeDate.arrangeMask=function(input_text,begin,end){var mask_buf=this._edit_mask_buf;var value_buf=this._edit_value_buf;var char_buf=this._edit_char_buf;var mask_len=mask_buf.length;if(mask_len==0){return {"text":input_text,"pos":end};}var text=nexacro._toString(input_text);var text_buf=text.split('');var mask;var maskchar=this.maskchar;var i,val,over_cnt=(text.length-mask_len);for(i=begin;i<end;i++ ){val=value_buf[i];if(val==null){break;}if(val==""){if(!isNaN(nexacro.toNumber(text_buf[i]))){end++ ;over_cnt++ ;text_buf.splice(i,0,mask_buf[i]);}}else{mask=mask_buf[i];var ch=text_buf[i];if(val=="$1"&&mask.test(ch)){char_buf[i]=ch;text_buf[i]=ch;}else{char_buf[i]=maskchar;text_buf[i]=maskchar;}}}if(end<mask_len){if(over_cnt>0){text_buf.splice(end,over_cnt);}else if(over_cnt<0){over_cnt= -(over_cnt);for(i=0;i<over_cnt;i++ ){var pos=end+i;val=value_buf[pos];if(val==""){text_buf.splice(pos,0,mask_buf[pos]);}else{text_buf.splice(pos,0,maskchar);char_buf[pos]=maskchar;}}}}else{end=mask_len;text_buf.splice(end,(text_buf.length-end));}return {"text":text_buf.join(''),"pos":end};};_pMaskTypeDate.removeMask=function(char_buf){if(!char_buf){char_buf=this._edit_char_buf;}var type_buf=this._edit_type_buf;var tmp_str="";var result_buf=[];var pos=0,type=0,ch="";do{if(type_buf[pos]> -1){ch=char_buf[pos]?char_buf[pos]:"";if(tmp_str===""){type=type_buf[pos];}tmp_str=tmp_str.concat(ch);}else{if(tmp_str!==""){result_buf[type]=this._getRemoveMaskString(type,tmp_str);tmp_str="";}}pos++ ;}while(!nexacro._isNull(type_buf[pos]))if(tmp_str!==""){result_buf[type]=this._getRemoveMaskString(type,tmp_str);}return result_buf.join('');};_pMaskTypeDate.keyPressed=function(ch,pos){this._edit_char_buf[pos]=ch;var value_buf=this._edit_value_buf;var value_len=value_buf.length;for(var i=value_len;i>0;i-- ){if(value_buf[i]&&value_buf[i]=="$1"){break;}}if((this._edit_char_buf.length==value_len)&&(pos==i)){this._is_filled=true;}else{this._is_filled=false;}};_pMaskTypeDate.findNearEditablePos=function(pos,direction){var value_buf=this._edit_value_buf;var ch,len=value_buf.length;if(direction>0){while(pos<len){ch=value_buf[pos];if(ch!=""){return pos;}pos++ ;}}else if(direction<0){while(pos> -1){ch=value_buf[pos];if(ch!=""){return pos;}pos-- ;}}else{if(value_buf[pos]){return pos;}}return  -1;};_pMaskTypeDate.isDeletableChar=function(ch,pos){if(this._edit_value_buf[pos]){return true;}return false;};_pMaskTypeDate.isFilterChar=function(ch,pos_begin,pos_end){if(!/[0-9]/.test(ch)){return true;}var char_buf=this._edit_char_buf.slice(0);var ch_len=ch.length;var buf_len=char_buf.length;var i,j;var changed_type;var changed_str="";var changed_buf={};if(ch.length>1){for(i=pos_begin,j=0;j<ch_len;i++ ,j++ ){char_buf[i]=ch[j];}}else{char_buf[pos_begin]=ch;changed_str=ch;changed_type=this._edit_type_buf[pos_begin];for(i=pos_begin-1;i>=0;i-- ){if(changed_type==this._edit_type_buf[i]){changed_str=char_buf[i]+changed_str;}else{break;}}for(i=pos_begin+1;i<char_buf.length;i++ ){if(changed_type==this._edit_type_buf[i]){changed_str+=char_buf[i];}else{break;}}changed_buf[this.changeTypeToDate(changed_type)]=changed_str;}if(pos_end&&pos_begin<pos_end){for(i=(pos_begin+1);i<pos_end&&i<buf_len;i++ ){char_buf[i]="";}}var val=this.removeMask(char_buf);var y,M,d;var h,m,s,ss;var editmask_type=this.getEditFormatType();switch(editmask_type){case 0:y=val.substr(0,4);M=val.substr(4,2);d=val.substr(6,2);break;case 1:h=val.substr(0,2);m=val.substr(2,2);s=val.substr(4,2);ss=val.substr(6,3);break;case 2:y=val.substr(0,4);M=val.substr(4,2);d=val.substr(6,2);h=val.substr(8,2);m=val.substr(10,2);s=val.substr(12,2);ss=val.substr(14,3);break;}for(i in changed_buf){if(i=="MONTH"){if((changed_str=="00")&&(M=="00")){return true;}}else if(i=="DAY"){if((changed_str=="00")&&(d=="00")){return true;}}}if((y&&isNaN(y= +y))||(M&&isNaN(M= +M))||(d&&isNaN(d= +d))||(h&&isNaN(h= +h))||(m&&isNaN(m= +m))||(s&&isNaN(s= +s))||(ss&&isNaN(ss= +ss))){return true;}var maxDay=this.getEndDay(y,M);if((editmask_type!=1&&!maxDay)||(M&&( +M>12))||(d&&( +d>maxDay))||(h&&( +h>=24))||(m&&( +m>=60))||(s&&( +s>=60))||(ss&&( +ss>=1000))){return true;}return false;};_pMaskTypeDate.isFilled=function(){return this._is_filled;};_pMaskTypeDate.isMaskChar=function(ch){if(ch=="y"||ch=="M"||ch=="d"||ch=="H"||ch=="h"||ch=="m"||ch=="s"){return true;}return false;};_pMaskTypeDate.isMaskString=function(str){if(str==="yyyy"||str==="yy"||str==="MMMM"||str==="MMM"||str==="MM"||str==="M"||str==="dddd"||str==="ddd"||str==="dd"||str==="d"){return true;}return false;};_pMaskTypeDate.getEditFormatType=function(){return this._editmask_type;};_pMaskTypeDate.getEditFormatStringType=function(){for(var i in this._DateTypeConst){if(this._DateTypeConst[i]==this._editmask_type){break;}}return i;};_pMaskTypeDate.getDateFormatType=function(){return this._datemask_type;};_pMaskTypeDate.getCurrentText=function(){return this._edit_char_buf.join('');};_pMaskTypeDate.getEmptyText=function(){if(this._is_editing){return this._editmasked_empty_text;}else{return this._datemasked_empty_text;}};_pMaskTypeDate.getDatePickerValue=function(){var date=this._date;if(date.length==0){var currentDate=new Date();var year=nexacro._toString(currentDate.getFullYear()).padLeft(4,"0");var month=nexacro._toString(currentDate.getMonth()+1).padLeft(2,"0");var day=nexacro._toString(currentDate.getDate()).padLeft(2,"0");return year+month+day;}else{return date[0]+date[1]+date[2];}};_pMaskTypeDate.getCurrentDate=function(){var year,month,day;var currDate=new Date();year=currDate.getFullYear();month=currDate.getMonth()+1;day=currDate.getDate();return {year:year,month:month,day:day};};_pMaskTypeDate.getEndDay=function(y,m){var endDayN=new Array(31,28,31,30,31,30,31,31,30,31,30,31);var endDayL=new Array(31,29,31,30,31,30,31,31,30,31,30,31);var ret="";var year= +y;var month= +m;if(isNaN(year)||isNaN(month)){return;}if(month==0){month=1;}if(year==0){ret=endDayN[month-1];return ret;}if((year%4)==0&&(year%100)!=0||(year%400)==0){ret=endDayL[month-1];}else{ret=endDayN[month-1];}return ret;};_pMaskTypeDate.changeNormalizeValue=function(v){if(v instanceof nexacro.Date){v=v.toString();}if(nexacro._isNull(v)||v===""||v.trim()===""){return v;}var y,M,d;var h,m,s,ss;var str="";var editformattype=this.getEditFormatType();switch(editformattype){case 0:y=v.substr(0,4);M=v.substr(4,2)||"01";d=v.substr(6,2)||"01";break;case 1:y="0000";M="01";d="01";h=v.substr(0,2);m=v.substr(2,2);s=v.substr(4,2);ss=v.substr(6,3);break;case 2:y=v.substr(0,4);M=v.substr(4,2)||"01";d=v.substr(6,2)||"01";h=v.substr(8,2);m=v.substr(10,2);s=v.substr(12,2);ss=v.substr(14,3);break;default:return v;}if(!nexacro._isNull(y)){y=y.padLeft(4,"0");}if(!nexacro._isNull(M)){M=M.padLeft(2,"0");M-=1;}if(!nexacro._isNull(d)){d=d.padLeft(2,"0");}if(!nexacro._isNull(h)){h=h.padLeft(2,"0");}if(!nexacro._isNull(m)){m=m.padLeft(2,"0");}if(!nexacro._isNull(s)){s=s.padLeft(2,"0");}if(!nexacro._isNull(ss)){ss=ss.padLeft(3,"0");}var date=new nexacro.Date(y,M,d,h,m,s,ss);if(editformattype==1){date._timeonly=true;}str=date.toString();return str;};_pMaskTypeDate.changeNormalizeValueFromBuffer=function(){var i=0;var j,date_obj;var y,M,d,h,m,s,ms;var edit_datetype;var normal_datetype;var edit_formattype=this.getEditFormatStringType();var normal_format=this._DateFormatConst["NORMALFORMAT_"+edit_formattype].concat();var edit_char_buf=this._edit_char_buf;var edit_type_buf=this._edit_type_buf;var before_idx= -1;var curr_idx= -1;var curr_date=this._date;while(i<=edit_type_buf.length){edit_datetype=this.changeTypeToDate(edit_type_buf[i]);before_idx=curr_idx;curr_idx=normal_format.indexOf(edit_datetype);if(before_idx>=0&&before_idx!=curr_idx){delete normal_format[before_idx];}if(curr_idx>=0){if(edit_datetype=="YEAR"){if(!y){y="";}y+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="MONTH"){if(!M){M="";}M+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="DAY"){if(!d){d="";}d+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="HOUR"){if(!h){h="";}h+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="MINUTE"){if(!m){m="";}m+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="SECOND"){if(!s){s="";}s+=edit_char_buf[i]?edit_char_buf[i]:"";}if(edit_datetype=="MILLISECOND"){if(!ms){ms="";}ms+=edit_char_buf[i]?edit_char_buf[i]:"";}}i++ ;}while(normal_format.length>0){normal_datetype=normal_format.pop();if(normal_datetype){if(normal_datetype=="YEAR"){y=curr_date[0]?curr_date[0]:"0000";}if(normal_datetype=="MONTH"){M=curr_date[1]?curr_date[1]:"01";}if(normal_datetype=="DAY"){d=curr_date[2]?curr_date[2]:"01";}if(normal_datetype=="HOUR"){h=curr_date[3]?curr_date[3]:"00";}if(normal_datetype=="MINUTE"){m=curr_date[4]?curr_date[4]:"00";}if(normal_datetype=="SECOND"){s=curr_date[5]?curr_date[5]:"00";}if(normal_datetype=="MILLISECOND"){ms=curr_date[6]?curr_date[6]:"000";}}}if(edit_formattype=="TIME"){y=curr_date[0]?curr_date[0]:"0000";M=curr_date[1]?curr_date[1]:"01";d=curr_date[2]?curr_date[2]:"01";}if(!nexacro._isNull(y)){y=y.padLeft(4,"0");}if(!nexacro._isNull(M)){M=M.padLeft(2,"0");if(M!="00"){M-=1;}}if(!nexacro._isNull(d)){d=d.padLeft(2,"0");if(d=="00"){d="01";}}if(!nexacro._isNull(h)){h=h.padLeft(2,"0");}if(!nexacro._isNull(m)){m=m.padLeft(2,"0");}if(!nexacro._isNull(s)){s=s.padLeft(2,"0");}if(!nexacro._isNull(ms)){ms=ms.padLeft(3,"0");}date_obj=new nexacro.Date(y,M,d,h,m,s,ms);if(edit_formattype=="TIME"){date_obj._timeonly=true;}return date_obj.toString();};_pMaskTypeDate.convertToDateObject=function(v,type){if(v instanceof nexacro.Date){v=v.toString();}if(nexacro._isNull(v)||v===""||v.trim()===""){return v;}var y,M,d;var h,m,s,ss;var editformattype=this.getEditFormatType();if(!nexacro._isNull(type)){editformattype=type;}switch(editformattype){case 0:y=v.substr(0,4);M=v.substr(4,2)||"01";d=v.substr(6,2)||"01";break;case 1:y="0000";M="01";d="01";h=v.substr(0,2);m=v.substr(2,2);s=v.substr(4,2);ss=v.substr(6,3);break;case 2:default:y=v.substr(0,4);M=v.substr(4,2)||"01";d=v.substr(6,2)||"01";h=v.substr(8,2);m=v.substr(10,2);s=v.substr(12,2);ss=v.substr(14,3);break;}if(!nexacro._isNull(y)){y=y.padLeft(4,"0");}if(!nexacro._isNull(M)){M=M.padLeft(2,"0");M-=1;}if(!nexacro._isNull(d)){d=d.padLeft(2,"0");}if(!nexacro._isNull(h)){h=h.padLeft(2,"0");}if(!nexacro._isNull(m)){m=m.padLeft(2,"0");}if(!nexacro._isNull(s)){s=s.padLeft(2,"0");}if(!nexacro._isNull(ss)){ss=ss.padLeft(3,"0");}var date=new nexacro.Date(y,M,d,h,m,s,ss);if(type==1){date._timeonly=true;}return date;};_pMaskTypeDate.changeMaskToType=function(mask){var type= -1;var i,j;var maskList=[];var map=this._dateformatMap;var bFindMask=false;for(i=0;i<map.length;i++ ){maskList=map[i];if(bFindMask){break;}for(j=0;j<maskList.length;j++ ){if(maskList[j]==mask){type= +(nexacro._toString(i)+nexacro._toString(j));bFindMask=true;break;}}}return type;};_pMaskTypeDate.changeTypeToDate=function(type){var ret="";if(type>=0&&type<10){ret="YEAR";}else if(type>=10&&type<20){ret="MONTH";}else if(type>=20&&type<30){ret="DAY";}else if(type>=30&&type<40){ret="HOUR";}else if(type>=40&&type<50){ret="MINUTE";}else if(type>=50&&type<60){ret="SECOND";}else if(type>=60&&type<70){ret="MILLISECOND";}return ret;};_pMaskTypeDate._appliedMaskString=function(info,text){var ret="";var type=info.type;var typeStr=nexacro._toString(type).padLeft(2,"0");var mask=info.mask;var masklen=mask.length;var maskchar=this.maskchar;var date=this._date;var val=text?text:date[typeStr[0]];var bValidate=(date.length&&!val)?true:false;var intVal=( +val|0);var jsDate=new Date(date[0], +date[1]-1,date[2]);(function(_y,_obj){if(_y<=99&&_y>=0){var base_date=new Date(0,0,1);var base_fullyear=base_date.getFullYear();var fullyear=_obj.getFullYear();var calc_year=fullyear-base_fullyear;_obj.setFullYear(calc_year);}})(date[0],jsDate);if(!val){val="";for(var i=0;i<masklen;i++ ){val+=maskchar;}}switch(type){case 0:ret=val.padLeft(4,"0");break;case 1:ret=val.substr(2,2);break;case 10:case 20:ret=val.padLeft(2,"0");break;case 30:case 40:case 50:ret=bValidate?"00":val.padLeft(2,"0");break;case 11:case 21:case 41:case 51:ret=nexacro._toString(intVal);break;case 31:if(intVal<10){ret=nexacro._toString(intVal);}else{ret=val;}break;case 32:if(intVal>12&&intVal<24){intVal-=12;val=nexacro._toString(intVal);}ret=val.padLeft(2,"0");break;case 33:if(intVal>12&&intVal<24){intVal-=12;val=nexacro._toString(intVal);}ret=val;break;case 60:ret=bValidate?"000":val.padLeft(3,"0");break;case 12:ret=this._monthlistL[intVal-1];break;case 70:ret=this._datelistS[jsDate.getDay()];break;case 71:ret=this._datelistL[jsDate.getDay()];break;default:break;}return ret;};_pMaskTypeDate._getRemoveMaskString=function(type,val){var ret="";val=val.trim();switch(type){case 0:ret=val.padLeft(4,"0").replace(/ /gi,"0");break;case 1:if(val){if(val.length==4){ret=val;}else if(val.length==2){ret=this._date.length?this._date[0].substr(0,2)+val:"19"+val;}else{ret=val.padLeft(4,"0");}}else{ret=val.padLeft(4,"0");}break;case 10:case 11:ret=(val&&val!=="0")?val.padLeft(2,"0"):"01";break;case 12:ret=this._date.length?this._date[1]:"01";break;case 20:case 21:ret=(val&&val!=="0")?val.padLeft(2,"0"):"01";break;case 30:case 31:case 32:case 33:case 40:case 41:case 50:case 51:ret=val.padLeft(2,"0");break;case 60:ret=val.padLeft(3,"0");break;}return ret;};_pMaskTypeDate._getLocale=function(){if(this.locale){return this.locale;}else{return nexacro._getLocale();}};delete _pMaskTypeDate;_pMaskTypeDate=null;nexacro._GridMaskTypeNumber=function(){nexacro._EditMaskTypeNumber.call(this);this._init();};var _pGridMaskTypeNumber=nexacro._createPrototype(nexacro._EditMaskTypeNumber,nexacro._GridMaskTypeNumber);nexacro._GridMaskTypeNumber.prototype=_pGridMaskTypeNumber;_pGridMaskTypeNumber._type_name="GridTypeNumber";delete _pGridMaskTypeNumber;_pGridMaskTypeNumber=null;}
if(!nexacro.Form){nexacro.LayoutChangeEventInfo=function(obj,id,curlayout_name,newlayout_name,cur_width,new_width,cur_height,new_height){this.id=this.eventid=id||"onlayoutchanged";this.fromobject=this.fromreferenceobject=obj;this.bubbles=true;this.oldlayout=curlayout_name;this.newlayout=newlayout_name;this.oldlayoutwidth=cur_width;this.newlayoutwidth=new_width;this.oldlayoutheight=cur_height;this.newlayoutheight=new_height;};var _pLayoutChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.LayoutChangeEventInfo);nexacro.LayoutChangeEventInfo.prototype=_pLayoutChangeEventInfo;_pLayoutChangeEventInfo._type_name="LayoutChangeEventInfo";delete _pLayoutChangeEventInfo;nexacro.DeviceButtonEventInfo=function(obj,e){this.eventid="ondevicebutton";this.fromobject=obj;this.fromreferenceobject=obj;this.button=e.button;};var _pDeviceButtonEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DeviceButtonEventInfo);nexacro.DeviceButtonEventInfo.prototype=_pDeviceButtonEventInfo;_pDeviceButtonEventInfo._type_name="DeviceButtonEventInfo";delete _pDeviceButtonEventInfo;nexacro.BindingValueChangedEventInfo=function(obj,id,row,col,colidx,columnid,oldvalue,newvalue){this.id=this.eventid=id||"onbindingvaluechanged";this.fromobject=this.fromreferenceobject=obj;this.row=row;this.col=col;this.colidx=colidx;this.columnid=columnid;this.oldvalue=oldvalue;this.newvalue=newvalue;};var _pBindingValueChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.BindingValueChangedEventInfo);nexacro.BindingValueChangedEventInfo.prototype=_pBindingValueChangedEventInfo;_pBindingValueChangedEventInfo._type_name="BindingValueChangedEventInfo";delete _pBindingValueChangedEventInfo;nexacro.BindItem=function(name,compid,propid,dsid,columnid){nexacro.Object.call(this);this.name=name||"";this.compid=compid||"";this.propid=propid||"";this.datasetid=dsid||"";this.columnid=columnid||"";this._en_type=1;this._dataset=null;this._comp=null;};var _pBindItem=nexacro.BindItem.prototype=nexacro._createPrototype(nexacro.Object,nexacro.BindItem);_pBindItem._type_name="BindItem";_pBindItem.set_compid=function(v){if(v&&this.compid!=v){this.compid=v;}};_pBindItem.set_propid=function(v){if(v&&this.propid!=v){this.propid=v;}};_pBindItem.set_datasetid=function(v){if(v&&this.datasetid!=v){this.datasetid=v;}};_pBindItem.set_columnid=function(v){if(v&&this.columnid!=v){this.columnid=v;}};_pBindItem.init=function(name,compid,propid,datasetid,columnid){this.set_name(name);this.set_compid(compid);this.set_propid(propid);this.set_datasetid(datasetid);this.set_columnid(columnid);};_pBindItem.destroy=function(){this._dataset=null;this._comp=null;nexacro.Object.prototype.destroy.call(this);return true;};_pBindItem.bind=function(){if(this.parent&&!this.parent._is_loading){if(this.compid==""||this.propid==""||this.datasetid==""||this.columnid==""){return;}this.parent._bind_manager._setBinditem(this,false);this.parent._bind_manager._notify(this);}};_pBindItem._checkType=function(propid){var bindprops=propid;if(bindprops&&typeof (bindprops)=="object"){propid=bindprops[0];}if(typeof propid=="string"&&propid==this.propid){this._en_type=2;}};delete _pBindItem;nexacro.BindManager=function(form){nexacro.Object.call(this);this.datasets={};this.exception="";this._form=form;};var _pBindManager=nexacro.BindManager.prototype=nexacro._createPrototype(nexacro.Object,nexacro.BindManager);_pBindManager._type_name="BindManager";_pBindManager.destroy=function(){this.datasets=null;this._form=null;nexacro.Object.prototype.destroy.call(this);};_pBindManager.on_changevalue=function(obj,e){var prop_id=e.propid;var bind_item=this._findBindItem(obj,prop_id);var val=e.val;if(bind_item&&bind_item._en_type==2){this.exception=obj;var ds=bind_item._dataset;var row_idx=ds.rowposition;var col=ds.getColIndex(bind_item.columnid);if(col!==undefined){var ret=ds.setColumn(row_idx,col,val);if(ret==true){this.exception=null;return true;}else{this.exception=null;return false;}}}this.exception=null;return true;};_pBindManager.on_valuechanged=function(obj,e){var ds=obj;var row=e.row;var col=e.col;var col_id=e.columnid;var val=e.newvalue;if(ds.rowposition==row||row<0){var ret=false;if(col<0){ret=this._notifyAll(ds.name,null, -1,true,null);}else{ret=this._notifyAll(ds.name,col_id,col,false,val);}var form=this._form;if(form){form.on_notify_onbindingvaluechanged(obj,e);}return ret;}return true;};_pBindManager._delayBinds=function(){var len=this._form.binds.length;for(var sx=0;sx<len;sx++ ){var bind_item=this._form.binds[sx];if(bind_item._dataset){continue;}this._setBinditem(bind_item,false);this._notify(bind_item);}};_pBindManager._setBinditem=function(bind_item,close_flag){if(!bind_item){return;}var ds_id=bind_item.datasetid;var ds=bind_item._dataset;var comp=bind_item._comp;if(!bind_item._dataset){ds=this._form._getDatasetObject(bind_item.datasetid);}if(!bind_item._comp){if(this._form._findChildObject){comp=this._form._findChildObject(bind_item.compid);}}if(!ds||!comp){return;}if(!close_flag){bind_item._dataset=ds;bind_item._comp=comp;bind_item._checkType(comp.on_getBindableProperties());if(this.datasets[ds_id]){this.datasets[ds_id].push(bind_item);}else{this.datasets[ds_id]=[];this.datasets[ds_id].push(bind_item);ds.setEventHandler("onvaluechanged",this.on_valuechanged,this);}if(!comp._bind_event){comp._bind_event=new nexacro.EventListener("onbinditem");comp._bind_event._setHandler(this,this.on_changevalue);}}else{if(this.datasets[ds_id]){var cidx=nexacro._indexOf(this.datasets[ds_id],bind_item);if(cidx> -1){this.datasets[ds_id].splice(cidx,1);if(this.datasets[ds_id].length==0){ds.removeEventHandler("onvaluechanged",this.on_valuechanged,this);delete this.datasets[ds_id];}}}if(comp._bind_event){comp._bind_event._removeHandler(this,this.on_changevalue);delete comp._bind_event;}}};_pBindManager._findBindItem=function(comp,propid){for(var sx=0;sx<this._form.binds.length;sx++ ){var bind_item=this._form.binds[sx];if(bind_item._comp==comp&&bind_item.propid==propid&&bind_item.datasetid&&bind_item.columnid){return bind_item;}}return null;};_pBindManager._dettachSBindItem=function(comp){if(!comp._bind_event){return;}comp._bind_event._removeHandler(this);var binds=this._form.binds;var cnt=binds.length;for(var i=0;i<cnt;i++ ){if(binds[i]._comp==comp){var datasetid=binds[i].datasetid;if(this.datasets[datasetid]){var cidx=nexacro._indexOf(this.datasets[datasetid],binds[i]);if(cidx> -1){this.datasets[datasetid][cidx].destroy();this.datasets[datasetid].splice(cidx,1);}binds[i]._comp=null;}}}};_pBindManager._notify=function(bindItem){var ds=bindItem._dataset;var comp=bindItem._comp;var col;if(ds&&comp){var row_idx=ds.rowposition;if(bindItem._en_type==2){if(comp.enable&&comp.parent._isEnable()){if(row_idx<0){comp._setEnable(false);}else{comp._setEnable(true);}}col=ds.getColIndex(bindItem.columnid);if(col>=0&&comp.on_change_bindSource){comp.on_change_bindSource(bindItem.propid,bindItem._dataset,row_idx,col, -1);}}else{if(bindItem.columnid&&bindItem.columnid!=""){col=ds.getColIndex(bindItem.columnid);var val=ds.getColumn(row_idx,col);if(bindItem.propid){if(comp["set_"+bindItem.propid]){comp["set_"+bindItem.propid](val);}}}}}};_pBindManager._notifyAll=function(ds_id,col_id,col,all_flag,val){var arr_bind=this.datasets[ds_id];var bind_item=null;var row_idx= -1;if(!arr_bind){return true;}for(var sx=0;sx<arr_bind.length;sx++ ){bind_item=arr_bind[sx];if(!bind_item._dataset){continue;}if(bind_item.columnid==""){continue;}var ds=bind_item._dataset;row_idx=ds.rowposition;var comp=bind_item._comp;if(comp&&comp._is_alive){if(bind_item._en_type==2){if(all_flag){if(comp.enable&&comp.parent._isEnable()){if(row_idx<0){comp._setEnable(false);}else{comp._setEnable(true);}}col=ds.getColIndex(bind_item.columnid);if(col>=0){if(comp.on_change_bindSource){comp.on_change_bindSource(bind_item.propid,bind_item._dataset,row_idx,col, -1);}}else{if(comp.on_init_bindSource){comp.on_init_bindSource(bind_item.columnid,bind_item.propid,bind_item._dataset);}}}else{if(col>=0){if(bind_item.columnid==col_id&&comp.on_change_bindSource){comp.on_change_bindSource(bind_item.propid,bind_item._dataset,row_idx,col, -1);}}else{if(bind_item.columnid==col_id&&comp.on_init_bindSource){comp.on_init_bindSource(bind_item.columnid,bind_item.propid,bind_item._dataset);}}}}else{var val0;if(all_flag){col=ds.getColIndex(bind_item.columnid);val0=ds.getColumn(row_idx,col);}else{if(col_id==bind_item.columnid){val0=val;}else{continue;}}if(bind_item.propid){if(comp["set_"+bind_item.propid]){comp["set_"+bind_item.propid](val0);}}}}}return true;};delete _pBindManager;nexacro.FormBase=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.all=new nexacro.Collection();this.components=new nexacro.Collection();this.objects=new nexacro.Collection();this.binds=new nexacro.Collection();this._bind_manager=new nexacro.BindManager(this);this._layout_list=new nexacro.Collection();this._child_list=[];this._load_manager=new nexacro._LoadManager(this);this._timerManager=new nexacro._TimerManager(this);this._includescriptlist=[];this._hotkey_list=[];this._load_callbacklist=[];this._refform=this;};var _pFormBase=nexacro.FormBase.prototype=nexacro._createPrototype(nexacro.Component,nexacro.FormBase);_pFormBase._type_name="FormBase";_pFormBase.scrollbars="autoboth";_pFormBase.dragscrolltype="all";_pFormBase._is_form=true;_pFormBase._is_loaded=false;_pFormBase._is_completed=false;_pFormBase._is_scrollable=true;_pFormBase._url="";_pFormBase._base_url="";_pFormBase._async=true;_pFormBase._last_focused=null;_pFormBase._hittest_type="";_pFormBase._default_layout=null;_pFormBase._current_layout_name="default";_pFormBase._cur_real_layout="default";_pFormBase._obj_mousemove=null;_pFormBase._searchNextHeadingFocus=nexacro._emptyFn;_pFormBase._searchPrevHeadingFocus=nexacro._emptyFn;_pFormBase._getHeadingOrderNext=nexacro._emptyFn;_pFormBase._getHeadingOrderFirst=nexacro._emptyFn;_pFormBase._getHeadingOrderLast=nexacro._emptyFn;_pFormBase.on_create=nexacro._emptyFn;_pFormBase.createComponent=function(bCreateOnly){if(this._is_loading){return;}var parent_elem=null;if(!this._is_window){parent_elem=this.parent._control_element;if(!parent_elem){return false;}}var layout_list;var control_elem=this._control_element;var _window;if(!control_elem){if(this._unique_id.length<=0){this._unique_id=this.parent._unique_id?(this.parent._unique_id+"."+this.id):(this.id?this.id:"");}control_elem=this.on_create_control_element(parent_elem);if(this._is_nc_control){control_elem._is_nc_element=true;}this._initControl(control_elem);layout_list=this._layout_list;if(layout_list&&layout_list.length>=1&&!(layout_list.length==1&&layout_list[0]==this._default_layout)){this._initLayoutManager();}else{nexacro._getLayoutManager().loadLayout(this,null,this._default_layout,this._default_layout);this._current_layout_name=this._cur_real_layout="default";}this._initContents(control_elem);if(!nexacro._isNull(this.tooltiptext)){this.on_apply_prop_tooltip();}if(nexacro._enableaccessibility){this.on_apply_accessibility();}this.on_apply_positionstep();if(this._hittest_type){this.on_apply_hittesttype();}if(!bCreateOnly&&(this._is_window||(parent_elem&&parent_elem.handle))){_window=this._getWindow();var ret=this.on_created(_window);if(ret){this._on_activate();}}}else{var _oldscrollleft=control_elem.scroll_left;var _oldscrolltop=control_elem.scroll_top;if(parent_elem&&parent_elem.handle){parent_elem.appendChildElement(control_elem);control_elem.parent=this;this._initControl(control_elem);layout_list=this._layout_list;if(layout_list&&layout_list.length>=1&&!(layout_list.length==1&&layout_list[0]==this._default_layout)){this._initLayoutManager();}else{nexacro._getLayoutManager().loadLayout(this,null,this._default_layout,this._default_layout);this._current_layout_name=this._cur_real_layout="default";}this._initContents(control_elem);if(this._hittest_type){this.on_apply_hittesttype();}if(!nexacro._isNull(this.tooltiptext)){this.on_apply_prop_tooltip();}if(!bCreateOnly){var window=this._getWindow();this.on_created(window);}}else{this._initControl(control_elem);layout_list=this._layout_list;if(layout_list&&layout_list.length>=1&&!(layout_list.length==1&&layout_list[0]==this._default_layout)){this._initLayoutManager();}else{nexacro._getLayoutManager().loadLayout(this,null,this._default_layout,this._default_layout);this._current_layout_name=this._cur_real_layout="default";}this._initContents(control_elem);if(this._hittest_type){this.on_apply_hittesttype();}if(!nexacro._isNull(this.tooltiptext)){this.on_apply_prop_tooltip();}}if(this._delayedfocuscomp){if(this._is_scrollable&&this.parent&&this.parent._is_frame&&this.parent._window_type==5){if(this._getWindow()){if(_oldscrollleft!=undefined&&_oldscrollleft!=control_elem.scroll_left){control_elem.scroll_left=_oldscrollleft;}if(_oldscrolltop!=undefined&&_oldscrolltop!=control_elem.scroll_top){control_elem.scroll_top=_oldscrolltop;}this._onResetScrollBar();}}}}if(this._delayedfocuscomp){_window=this._getWindow();if(this.parent&&this.parent._is_frame&&this.parent._window_type==5&&_window&&_window._prepared_flag!=true){}else{this._delayedfocuscomp=null;delete this._delayedfocuscomp;}}return true;};_pFormBase.on_create_contents=function(){var comps=this.components;var len=comps.length;for(var i=0;i<len;i++ ){var comp=comps[i];comp.createComponent(true);if(this._locale&&comp._is_locale_control){comp._setLocale(this._locale);}}};_pFormBase.on_created_contents=function(win){var len=this.objects.length;var i;for(i=0;i<len;i++ ){this.objects[i].on_created();}if(this._cssclass_exprfn){nexacro._toString(this._cssclass_exprfn.call(null,this));}nexacro._createdContents(this);if(this.binds){for(i=0;i<this.binds.length;i++ ){this.binds[i].bind();}}if(this.stepselector){this.stepselector.on_created(win);}this.resetScroll();if(this._is_scrollable){var control_elem=this._control_element;if(control_elem&&this.stepselector){control_elem.setElementHScrollPos(control_elem.client_width*control_elem._step_index);}}nexacro._refreshWindow(this._getWindow().handle);};_pFormBase.on_destroy_contents=function(){if(this._timerManager){this._timerManager.destroy();this._timerManager=null;}var i;if(this._load_manager){var load_manager=this._load_manager;var tr_list=load_manager.transactionList;if(tr_list){for(i=tr_list.length-1;i>=0;i-- ){var tr_item=tr_list[i];if(tr_item._usewaitcursor){tr_item._hideWaitCursor(this);}}}this._load_manager.destroy();this._load_manager=null;}var binds=this.binds;var len=binds.length;for(i=0;i<len;i++ ){var bindname=binds.get_id(i);this._bind_manager._setBinditem(binds.get_item(bindname),true);this[bindname]=null;}var components=this.components;len=components.length;for(i=len-1;i>=0;i-- ){var compname=components.get_id(i);if(this[compname]){if(this[compname]._destroy){this[compname]._destroy();this[compname]=null;}}}var objects=this.objects;len=objects.length;for(i=len-1;i>=0;i-- ){var objname=objects.get_id(i);if(this[objname]){if(this[objname].destroy){this[objname].destroy();}objects.delete_item(objname);delete this[objname];this[objname]=null;}}var layouts=this._layout_list;len=layouts.length;for(i=len-1;i>=0;i-- ){var layout=layouts.get_id(i);if(layout){if(layouts[layout].destroy){layouts[layout].destroy();}layouts.delete_item(layout);}}if(this._bind_manager){this._bind_manager.destroy();this._bind_manager=null;}this.all.clear();this.all=null;this.components.clear();this.components=null;this.objects.clear();this.objects=null;this.binds.clear();this.binds=null;this._layout_list.clear();this._layout_list=null;this._child_list=null;this._includescriptlist=null;this._hotkey_list=null;this._load_callbacklist=null;this._is_fired_onload=false;if(this._default_layout){if(this._default_layout.destroy){this._default_layout.destroy();}this._default_layout=null;}this._obj_mousemove=null;};_pFormBase._clearUserFunctions=function(){var objPrototype=null;if(this._type_name=="Div"){objPrototype=nexacro.Div.prototype;}else if(this._type_name=="Tab"){objPrototype=nexacro.Tab.prototype;}else if(this._type_name=="Tabpage"){objPrototype=nexacro.Tabpage.prototype;}else if(this._type_name=="PopupDiv"){objPrototype=nexacro.PopupDiv.prototype;}else if(this instanceof nexacro.Tab){objPrototype=nexacro.Tab.prototype;}else if(this instanceof nexacro.Tabpage){objPrototype=nexacro.Tabpage.prototype;}else if(this instanceof nexacro.PopupDiv){objPrototype=nexacro.PopupDiv.prototype;}else if(this instanceof nexacro.Div){objPrototype=nexacro.Div.prototype;}else if(this instanceof nexacro.Form){objPrototype=nexacro.Form.prototype;}else if(this instanceof nexacro.Frame){objPrototype=nexacro.Frame.prototype;}for(var func in this){if(typeof this[func]==="function"&&objPrototype&&!objPrototype[func]){this[func]=null;}}};_pFormBase._clear=function(){var control_elem=this.getElement();if(control_elem){this._clearEventListeners();if(this._timerManager&&this._timerManager.timerList.length>0){this._timerManager.clearAll();}control_elem.clearContents();if(this.stepselector){this._destroyStepControl();delete this.stepselector;}var binds=this.binds;var i,len=binds.length;for(i=0;i<len;i++ ){var bindname=binds.get_id(i);this._bind_manager._setBinditem(binds.get_item(bindname),true);delete this[bindname];}var components=this.components;var objects=this.objects;this.all=new nexacro.Collection();this.components=new nexacro.Collection();this.objects=new nexacro.Collection();len=components.length;for(i=0;i<len;i++ ){var compname=components.get_id(i);if(this[compname]){if(this[compname]._destroy){this[compname]._destroy();}}}components.clear();len=objects.length;for(i=0;i<len;i++ ){var objname=objects.get_id(i);if(this[objname]){if(this[objname].destroy){this[objname].destroy();}delete this[objname];}}objects.clear();this.all.clear();this.components.clear();this.objects.clear();this.binds.clear();if(this._is_scrollable){this._onRecalcScrollSize();this._onResetScrollBar();}}this._is_loaded=false;this._is_created=false;this._default_layout=null;this._is_fired_onload=false;this._current_layout_name="";this._cur_real_layout="";};_pFormBase.on_initEvent=nexacro._emptyFn;_pFormBase._init=nexacro._emptyFn;_pFormBase.loadIncludeScript=nexacro._emptyFn;_pFormBase.loadPreloadList=nexacro._emptyFn;_pFormBase._onHttpSystemError=function(obj,bfireevent,errorobj,errortype,url,returncode,requesturi,locationuri,extramsg){this.on_create=nexacro._emptyFn;if(this.parent._onHttpSystemError){this.parent._onHttpSystemError(obj,bfireevent,errorobj,errortype,url,returncode,requesturi,locationuri,extramsg);}};_pFormBase._onHttpTransactionError=function(obj,bfireevent,errorobj,errortype,url,returncode,requesturi,locationuri,extramsg,svcid){var ret=false;var commerrorobj=nexacro.MakeCommunicationError(this,errortype,url,returncode,requesturi,locationuri,extramsg);if(bfireevent){ret=this.on_fire_onerror(obj,commerrorobj.name,commerrorobj.message,errorobj,returncode,requesturi,locationuri,svcid);if(!ret){var environment=nexacro.getEnvironment();if(environment){ret=environment.on_fire_onerror(obj,commerrorobj.name,commerrorobj.message,errorobj,returncode,requesturi,locationuri,svcid);}}}return ret;};_pFormBase.create=function(){this.on_create();};_pFormBase.initEvent=function(){this._init_status=1;this.on_initEvent();};_pFormBase._on_init=function(){if(this._is_created){this._clear();}if(this._is_loading){this._clearEventListeners();}this._init();this.create();this._is_loading=false;if(this.parent&&this.parent.form==this){this.parent._loadedForm();}this._executeScript(this);this.initEvent();this._is_loaded=true;};_pFormBase._addPreloadList=function(type,url,id,args){if(!url){return;}var fullurl;var service=nexacro._getServiceObject(url);if(type=="data"){fullurl=nexacro._getServiceLocation(url);this._load_manager.addPreloadItem(type,fullurl,id,args,service);}else{fullurl=nexacro._getFDLLocation(url);this._load_manager.addPreloadItem(type,fullurl,this,null,service);}};_pFormBase._loadInclude=function(mainurl,url,asyncmode,service_url){var service;if(service_url&&service_url.length>0){service=nexacro._getServiceObject(service_url);}else{service=nexacro._getServiceObject(url);}this._load_manager.loadIncludeModule(url,null,asyncmode,service);};_pFormBase.executeIncludeScript=function(url,scriptstr){var suburl;if(scriptstr){suburl=nexacro._getServiceLocation(url);var moudle=nexacro._executeScript(scriptstr);var async=this._async;this._async=false;moudle.call(this,suburl);this._executeScript(this,suburl);this._async=async;}else{suburl=nexacro._getServiceLocation(url);var scriptlist=this._includescriptlist;var len=scriptlist.length;var item;for(var i=0;i<len;i++ ){item=scriptlist[i];if(item.url==suburl&&!item.isexecuted){item.isexecuted=true;item.fn.call(this);break;}}}};_pFormBase._executeScript=function(context){if(context&&context._registerscriptfn){context._registerscriptfn.call(context);}context._registerscriptfn=null;context._includescriptlist.length=0;};_pFormBase.registerScript=function(filename,fn){var scriptlist=this._includescriptlist;var len=scriptlist.length;for(var i=0;i<len;i++ ){if(scriptlist[i].url==filename){scriptlist[i].fn=fn;return;}}this._registerscriptfn=fn;};_pFormBase.addIncludeScript=function(mainurl,url){if(url&&this._is_loading){var _svcurl;if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){_svcurl=url;}var suburl=nexacro._getServiceLocation(url);var includescript;var len=this._includescriptlist.length;for(var i=0;i<len;i++ ){includescript=this._includescriptlist[i];if(includescript.url==suburl){return;}}this._includescriptlist.push({target:mainurl,url:suburl,fn:nexacro._emptyFn,isload:false,isexecuted:false,service_url:_svcurl});}};_pFormBase.loadIncludeScript=function(mainurl){var includescript;var len=this._includescriptlist.length;for(var i=0;i<len;i++ ){includescript=this._includescriptlist[i];if(includescript.isload==false){includescript.isload=true;if(nexacro._viewtoollog==true&&this._asyncformload!=this._async&&this._asyncformload!=undefined){this._loadInclude.call(this,mainurl,includescript.url,this._asyncformload,includescript.service_url);}else{this._loadInclude.call(this,mainurl,includescript.url,this._async,includescript.service_url);}}}};_pFormBase.setFocus=function(bResetScroll,bInnerFocus){if(this.parent._is_frame){var win=this._getRootWindow();if(!this.getElement()){return;}if(win&&win._is_active_window==false){if(win._is_active_window==false){win._setFocus();}}}return nexacro.Component.prototype.setFocus.call(this,bResetScroll,bInnerFocus);};_pFormBase._findForm=function(){return this;};_pFormBase._getReferenceContext=function(){return this;};_pFormBase._getDlgCode=function(keycode,altKey,ctrlKey,shiftKey){var last_focused_comp=this._getLastFocused();if(last_focused_comp&&last_focused_comp!=this){return last_focused_comp._getDlgCode(keycode,altKey,ctrlKey,shiftKey);}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pFormBase.setSize=function(width,height){if(this._adjust_width!=width||this._adjust_height!=height){this._adjustPosition(this.left,this.top,null,null,width,height,this.parent._getClientWidth(),this.parent._getClientHeight());var control_elem=this._control_element;if(control_elem){control_elem.setElementSize(width,height);}}};_pFormBase._waitCursor=function(wait_flag,context){var ownerframe=this.getOwnerFrame();if(ownerframe){ownerframe._waitCursor(wait_flag,context);}};_pFormBase._destroy=function(callremovechild){if(!this._is_alive){return;}return this.destroyComponent(callremovechild);};_pFormBase.destroy=function(){if(!this._is_alive){return;}var confirm_message=this._on_beforeclose();if(this._checkAndConfirmClose(confirm_message)==false){return false;}if(this._window){this._window._ignore_close_confirm=true;}this._on_close();this._is_fired_onload=false;return this.destroyComponent();};_pFormBase.loadCss=function(url,base_url,async){if(!base_url){base_url=this._base_url;}var cssurl=nexacro._getServiceLocation(url,base_url,null,false);var cssmapurl=cssurl;var pos=cssurl.lastIndexOf('/');cssurl=cssurl.substring(0,pos+1)+nexacro._getCSSFileName(cssurl.substring(pos+1,cssurl.length-4));pos=cssmapurl.lastIndexOf('.');cssmapurl=cssmapurl.substring(0,pos+1)+"map.js";var service=nexacro._getServiceObject(url);var env=nexacro.getEnvironment();var checkversion=env.checkversion;if(checkversion){var version=service.version;if(!nexacro._isNull(version)&&version!==""){cssurl+=nexacro._getVersionQueryString(cssurl,null,version);cssmapurl+=nexacro._getVersionQueryString(cssmapurl,null,version);}}this._load_manager.loadCssModule(cssurl,null,async,service,true,1);this._load_manager.loadCssModule(cssmapurl,null,async,service);};_pFormBase.move=function(left,top,width,height,right,bottom){nexacro.Component.prototype.move.call(this,left,top,width,height,right,bottom);if(this._layout_list&&this._layout_list.length>0){this._checkValidLayout();}};_pFormBase.resize=function(w,h){if(w<0||h<0){return;}if(w==this._adjust_width&&h==this._adjust_height){return;}var old_width=this._adjust_width;var old_height=this._adjust_height;var bsize=false;if(old_width!=this._adjust_left+w||old_height!=this._adjust_top+h){this.width=w;this.height=h;bsize=true;}this._update_position(bsize,false);if(this._layout_list&&this._layout_list.length>0){this._checkValidLayout();}};_pFormBase.confirm=function(strText,strCaption,strType){var win=this._getWindow();if(!win){return;}nexacro._skipDragEventAfterMsgBox=true;return nexacro._confirm(win.frame,strText,strCaption,strType);};_pFormBase.alert=function(strText,strCaption,strType){var win=this._getWindow();if(!win){return;}nexacro._skipDragEventAfterMsgBox=true;nexacro._alert(win.frame,strText,strCaption,strType);};_pFormBase.getOwnerFrame=function(){var frame=null;if(this.parent&&!(this.parent instanceof nexacro.Frame)){frame=this.parent.getOwnerFrame();}else{frame=this.parent;}return frame;};_pFormBase.lookup=function(name){for(var f=this;(f!=null);f=f.parent){if(name in f){return f[name];}}};_pFormBase.lookupSetter=function(name,fnname){if(!fnname){fnname="set_"+name;}for(var f=this;(f!=null);f=f.parent){var fn=f[fnname];if(fn){return new nexacro.SetterBinder(f,name,fn);}if(name in f){return new nexacro.PropBinder(f,name);}}return null;};_pFormBase.lookupFunc=function(name){for(var f=this;(f!=null);f=f.parent){var fn=f[name];if(fn){return new nexacro.FuncBinder(f,fn);}}return null;};_pFormBase.getLayoutInfo=function(name,key){var layout=this._layout_list[name];if(layout){return layout[key];}return;};_pFormBase._on_activate=function(){if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_onactivate();}};_pFormBase._on_deactivate=function(){if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_ondeactivate();}};_pFormBase.on_fire_onactivate=function(){if(this.onactivate&&this.onactivate._has_handlers){var evt=new nexacro.ActivateEventInfo(this,"onactivate",true,this,this);this.onactivate._fireEvent(this,evt);}};_pFormBase.on_fire_ondeactivate=function(){if(this.ondeactivate&&this.ondeactivate._has_handlers){var evt=new nexacro.ActivateEventInfo(this,"ondeactivate",false,this,this);this.ondeactivate._fireEvent(this,evt);}};_pFormBase._on_beforeclose=function(root_closing_comp){if(!this._is_alive||(this._is_form&&!this._is_loaded)){return;}if(!root_closing_comp){root_closing_comp=this;}var msg="";var components=this.components;var len=components.length;for(var i=0;i<len;i++ ){var comp=components[i];if(!(comp instanceof nexacro.FormBase)){continue;}var comp_msg=comp._on_beforeclose(root_closing_comp);msg=this._appendBeforeCloseMsg(msg,comp_msg);}var self_msg=this._on_bubble_beforeclose(root_closing_comp);msg=this._appendBeforeCloseMsg(msg,self_msg);return msg;};_pFormBase._on_bubble_beforeclose=function(root_closing_comp,event_bubbles,fire_comp,refer_comp){var first_call=false;if(event_bubbles===undefined){first_call=true;fire_comp=this;if(!refer_comp){refer_comp=this;}}var msg="";if(this.visible&&this._isEnable()){if(this.enableevent){if(first_call){event_bubbles=false;}msg=this.on_fire_onbeforeclose(this,fire_comp,refer_comp,root_closing_comp);}}var bubbled_msg="";if((!this.onbeforeclose||(this.onbeforeclose&&!this.onbeforeclose.stoppropagation))&&event_bubbles!==true&&this.parent&&!this.parent._is_application){bubbled_msg=this.parent._on_bubble_beforeclose(root_closing_comp,event_bubbles,fire_comp,refer_comp);}return this._appendBeforeCloseMsg(msg,bubbled_msg);};_pFormBase._on_close=function(){if(!this._is_alive||(this._is_form&&!this._is_loaded)){return true;}this._last_focused=null;var components=this.components;var len=components.length;for(var i=0;i<len;i++ ){var comp=components[i];if(!(comp instanceof nexacro.FormBase)){continue;}comp._on_close();}this._on_bubble_close();};_pFormBase._on_bubble_close=function(event_bubbles,fire_comp,refer_comp){var first_call=false;if(event_bubbles===undefined){first_call=true;fire_comp=this;if(!refer_comp){refer_comp=this;}}if(this.visible&&this._isEnable()){if(this.enableevent){if(first_call){event_bubbles=false;}this.on_fire_onclose(this,fire_comp,refer_comp);}}var parent=this.parent;if(parent){if((!this.onclose||(this.onclose&&!this.onclose.stoppropagation))&&event_bubbles!==true&&!parent._is_application){return parent._on_bubble_close(event_bubbles,fire_comp,refer_comp);}}};_pFormBase.on_fire_onbeforeclose=function(obj,from_comp,refer_comp,root_closing_comp){if(this.onbeforeclose&&this.onbeforeclose._has_handlers){var evt=new nexacro.CloseEventInfo(obj,"onbeforeclose",from_comp,refer_comp,root_closing_comp);return this.onbeforeclose._fireEvent(this,evt);}};_pFormBase.on_fire_onclose=function(obj,from_comp,refer_comp){if(this.onclose&&this.onclose._has_handlers){var evt=new nexacro.CloseEventInfo(obj,"onclose",from_comp,refer_comp);return this.onclose._fireEvent(this,evt);}return true;};_pFormBase.on_fire_onerror=function(obj,errortype,errormsg,errorobj,statuscode,requesturi,locationuri,errordata){if(this.onerror&&this.onerror._has_handlers){var evt=new nexacro.ErrorEventInfo(obj,"onerror",errortype,errormsg,errorobj,statuscode,requesturi,locationuri,errordata);return this.onerror._fireEvent(this,evt);}return false;};_pFormBase.on_notify_onbindingvaluechanged=function(obj,event_info){return this.on_fire_onbindingvaluechanged(obj,event_info.fromobject,event_info.fromreferenceobject,event_info.row,event_info.col,event_info.colidx,event_info.columnid,event_info.oldvalue,event_info.newvalue);};_pFormBase.on_fire_onbindingvaluechanged=function(obj,from_obj,refer_obj,row,col,colidx,columnid,oldvalue,newvalue){if(this.onbindingvaluechanged&&this.onbindingvaluechanged._has_handlers){var evt=new nexacro.BindingValueChangedEventInfo(obj,"onbindingvaluechanged",row,col,colidx,columnid,oldvalue,newvalue);return this.onbindingvaluechanged._fireEvent(this,evt);}};_pFormBase.loadForm=function(formurl,async,reload,baseurl){if(this._load_manager){var url=nexacro._getFDLLocation(formurl,baseurl);this._url=url;this._base_url=nexacro._getBaseUrl(url);if(this._load_manager){this._load_manager.clearAllLoad();}this._clearUserFunctions();this._is_loading=true;if(this.parent._is_frame&&this.parent.form==this){if(this.parent._window_type!=2){var application=nexacro.getApplication();if(application){application._registerLoadforms(this);}}}var service=nexacro._getServiceObject(formurl);this._asyncformload=async;this._load_manager.loadMainModule(url,undefined,async,reload,service);}};_pFormBase.getParentContext=function(){};_pFormBase._getFormBaseUrl=function(){return this._base_url;};_pFormBase._findChildObject=function(queryid){var npos=queryid.indexOf(".");if(npos>0){var querythis=queryid.substring(0,npos).trim();var pthis=this;var findobj;while(querythis&&pthis){findobj=pthis[querythis];queryid=queryid.substring(npos+1,queryid.length).trim();npos=queryid.indexOf(".");if(npos>0){querythis=queryid.substring(0,npos).trim();}else{return findobj?findobj[queryid]:null;}pthis=findobj;}}else{if(queryid=="this"){return this;}return this[queryid];}};_pFormBase._getDatasetObject=function(queryid){var _ds=queryid?this[queryid]:null;if(_ds==null&&this.parent&&!this.parent._is_application){var p=this.parent;while(p.parent&&(p._is_container||p._is_containerset)){p=p.parent;}_ds=p._getDatasetObject?p._getDatasetObject(queryid):null;}if(_ds==null&&queryid){var application=nexacro.getApplication();if(application){_ds=application[queryid];}}if(_ds&&_ds._isDataset&&!_ds._isDataset()){_ds=null;}return _ds;};_pFormBase._getTabOrderLast=function(filter_type){if(nexacro._isNull(filter_type)){filter_type=4;}var ar=this._getComponentsByTaborder(this,filter_type);if(ar&&ar.length>0){return ar[ar.length-1];}return null;};_pFormBase._getTabOrderFirst=function(filter_type){if(nexacro._isNull(filter_type)){filter_type=4;}var ar=this._getComponentsByTaborder(this,filter_type);if(ar&&ar.length>0){return ar[0];}return null;};_pFormBase._getTabOrderNext=function(current,direction,filter_type){if(nexacro._isNull(filter_type)){filter_type=4;}var ar=this._getComponentsByTaborder(this,filter_type,undefined,current);var cur_idx=nexacro._indexOf(ar,current._getRootComponent(current));if(cur_idx<0){var ar_all=this._getComponentsByTaborder(this,nexacro._enableaccessibility?(8+7):7);var cur_all_idx=nexacro._indexOf(ar_all,current._getRootComponent(current));var comp,i;if(cur_all_idx<0){return null;}i=cur_all_idx;while(((i+direction)>=0&&(i+direction)<ar_all.length)){comp=ar_all[i+direction];cur_idx=nexacro._indexOf(ar,comp._getRootComponent(comp));if(cur_idx>=0){return comp;}i+=direction;}return null;}return ar[cur_idx+direction];};_pFormBase._getComponentsByTaborder=function(p,filter_type,include_not_created){if(filter_type===undefined){filter_type=4;}var ar=[];var comps=p.components;if(comps){var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){var comp=comps[i];if(!comp||(!include_not_created&&!comp._is_created)||!comp.visible||((comp._isEnable&&!comp._isEnable()||!comp.enable)&&!(filter_type&2))||comp._popup){continue;}if(!(filter_type&1)&&!comp.on_get_prop_tabstop()){continue;}if(((filter_type&8)?!comp._isAccessibilityEnable():false)){if(!comp._hasContainer()&&!comp._is_listtype){continue;}}var tabidx=comp.taborder;if(tabidx<0){tabidx=0;}var j=ar.length;while(j>0&&ar[j-1].taborder>tabidx){ar[j]=ar[j-1];j-- ;}var cur_stepindx=this.getStepIndex();if(cur_stepindx=== -1){ar[j]=comp;}else if(cur_stepindx===comp.positionstep||comp.positionstep=== -1){ar[j]=comp;}}}return ar;};_pFormBase.addLayout=function(name,obj){if(!obj){return;}if(name=="default"){this._default_layout=obj;}var curscreenid=nexacro._getCurrentScreenID();if(curscreenid){if(!obj.screenid||obj.screenid==""){this._layout_list.add_item(name,obj);return;}var screenid_list=obj.screenid.split(',');var cnt=screenid_list.length;for(var i=0;i<cnt;i++ ){if(curscreenid==screenid_list[i]){this._layout_list.add_item(name,obj);break;}}}};_pFormBase._setPos=function(left,top){if(this._adjust_left!=left||this._adjust_top!=top){this._adjust_left=this.left=left;this._adjust_top=this.top=top;if(this.parent){this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,this.parent._getClientWidth(),this.parent._getClientHeight());}else{this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,0,0);}this.on_update_position(false,true);}};_pFormBase._setSize=function(width,height,update){if(this._adjust_width!=width||this._adjust_height!=height){this._adjust_width=this.width=width;this._adjust_height=this.height=height;if(this.parent){this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,this.parent._getClientWidth(),this.parent._getClientHeight());}else{this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,0,0);}this.on_update_position(true,false,update);}};_pFormBase._initLayoutManager=function(){var layout_name="default";var layout_list_len=this._layout_list.length;if(layout_list_len>=1){var old_layout_name=this._current_layout_name;this._current_layout_name="";this._cur_real_layout="";var xy={cx:this._adjust_width,cy:this._adjust_height};var idx=nexacro._getLayoutManager().checkValid(this,xy);var ret;var old_layout=this._layout_list[old_layout_name];var new_layout=this._layout_list[idx];var oldwidth=0,oldheight=0;oldwidth=old_layout?old_layout.width:0;oldheight=old_layout?old_layout.height:0;if(old_layout_name!=new_layout.name){ret=this.on_fire_canlayoutchange(this,"canlayoutchange",old_layout_name,new_layout.name,oldwidth,new_layout.width,oldheight,new_layout.height);if(ret===true||ret===undefined){nexacro._getLayoutManager().loadLayout(this,null,new_layout);if(old_layout_name!=new_layout.name){this.on_fire_onlayoutchanged(this,"onlayoutchanged",old_layout_name,new_layout.name,oldwidth,new_layout.width,oldheight,new_layout.height);}this._current_layout_name=new_layout.name;this._cur_real_layout=new_layout.name;}else{if(old_layout_name){layout_name=old_layout_name;}this._current_layout_name=layout_name;this._cur_real_layout=layout_name;}}else{nexacro._getLayoutManager().refreshStepControl(this,null,new_layout);this._current_layout_name=new_layout.name;this._cur_real_layout=new_layout.name;}}};_pFormBase._checkValidLayout=function(){var pManager=nexacro._getLayoutManager();if(pManager){var old_layout_name=this._current_layout_name;var new_layout=null;var xy={cx:this._adjust_width,cy:this._adjust_height};var new_idx=pManager.checkValid(this,xy);if(new_idx> -1){new_layout=this._layout_list[new_idx];}else{return pManager.getCurrentLayout(this);}if(new_layout&&old_layout_name!=new_layout.name){var len=this.all.length;for(var i=0;i<len;i++ ){if(this.all[i]._is_form&&this.all[i]._layout_list.length>0){this.all[i]._checkValidLayout(xy);}}var old_layout=this._layout_list[old_layout_name];var oldwidth=0,oldheight=0;oldwidth=old_layout?old_layout.width:0;oldheight=old_layout?old_layout.height:0;var ret=this.on_fire_canlayoutchange(this,"canlayoutchange",old_layout_name,new_layout.name,oldwidth,new_layout.width,oldheight,new_layout.height);if(ret===true||ret===undefined){if(new_layout.name!="default"){pManager.changeLayout(this,this._default_layout);}pManager.changeLayout(this,new_layout);this.on_fire_onlayoutchanged(this,"onlayoutchanged",old_layout_name,new_layout.name,oldwidth,new_layout.width,oldheight,new_layout.height);}if(this._is_scrollable){this.resetScroll();}return new_layout;}}};_pFormBase._on_prepare_stepcontents=function(old_stepcount,old_stepindex,new_stepcount,new_stepindex){var control_elem=this.getElement();if(control_elem){if(this._is_created&&(old_stepcount>0||new_stepcount>0)){var comps=this.components;var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){var comp_elem=comps[i].getElement();control_elem.removeChildElement(comp_elem);}}control_elem.setElementStepCount(new_stepcount);control_elem.setElementStepIndex(new_stepindex);if(new_stepindex> -1&&control_elem._step_count>new_stepindex){control_elem.setElementHScrollPos(control_elem.client_width*new_stepindex);}}};_pFormBase._on_refresh_stepcontents=function(old_stepcount,old_stepindex,new_stepcount,new_stepindex){var control_elem=this.getElement();if(control_elem){if(this._is_created&&(old_stepcount>0||new_stepcount>0)){var comps=this.components;var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){var comp_elem=comps[i].getElement();control_elem.appendChildElement(comp_elem);}}}if(new_stepcount>0){if(!this.stepselector){this._createStepControl(new_stepcount,new_stepindex);if(this._is_created){this.stepselector.on_created();}}else{this.stepselector.set_stepcount(new_stepcount);this.stepselector.set_stepindex(new_stepindex);}}else if(old_stepcount!=new_stepcount){this.stepselector.set_stepcount(new_stepcount);this.stepselector.set_stepindex(new_stepindex);}};_pFormBase._on_restore_stepscroll=function(obj){var control_elem=this.getElement();if(control_elem){this._onRecalcScrollSize();this._onResetScrollBar();var stepindex=obj.stepindex;var client_elem=control_elem.getContainerElement(stepindex);if(this._vscroll_pos!=client_elem._scroll_top){this._scrollTo(null,client_elem._scroll_top,undefined,undefined,undefined,"stepchange");}}};_pFormBase._createStepControl=function(stepcnt,stepidx){if(!this.stepselector){var step_ctrl=this.stepselector=new nexacro.StepControl("stepselector",0,0,0,0,null,null,null,null,null,null,this);step_ctrl.set_stepcount(stepcnt);step_ctrl.set_stepindex(stepidx);step_ctrl.set_stepitemsize(this.stepitemsize);step_ctrl.set_stepitemgap(this.stepitemgap);step_ctrl.createComponent(true);this._setEventHandler("onstepchanged",this._on_stepchanged,this);}};_pFormBase._destroyStepControl=function(){var step_ctrl=this.stepselector;if(step_ctrl){step_ctrl.destroy();this.stepselector=null;}};_pFormBase._recalcStepLayout=function(){var control_elem=this.getElement();var step_ctrl=this.stepselector;if(control_elem&&step_ctrl){var form_width=this._getClientWidth();var form_height=this._getClientHeight();var step_area=step_ctrl._getItemAreaSize();var parts=this.stepalign.split(/\s+/);var halign=parts[0];var valign=parts[1];var left,top;var border=this._getCurrentStyleBorder();var border_l=0,border_t=0,border_r=0,border_b=0;if(border){border_l=border.left._width;border_t=border.top._width;border_r=border.right._width;border_b=border.bottom._width;}switch(halign){case "left":left=border_l;break;case "center":left=(form_width-step_area.width-border_l-border_r)/2;break;case "right":left=form_width-step_area.width-border_r;break;}switch(valign){case "top":top=0;break;case "middle":top=(form_height-step_area.height-border_t-border_b)/2;break;case "bottom":top=form_height-step_area.height-border_b;break;}step_ctrl.move(left,top,step_area.width,step_area.height,null,null);if(nexacro._Browser!="Runtime"){if(control_elem.handle){var client_elem_handle=control_elem._client_elem?control_elem._client_elem.handle:null;if(client_elem_handle){if(control_elem._step_count>0){nexacro.__setDOMStyle_ScrollLimitX(client_elem_handle.style,0);}else{nexacro.__setDOMStyle_ScrollLimitX(client_elem_handle,control_elem._scroll_type&0x10);}}}}}};_pFormBase._on_stepchanged=function(){var stepselector=this.stepselector;var control_elem=this.getElement();if(stepselector&&control_elem){var zoomFactor=this._getZoom()/100;var client_width=control_elem.client_width/zoomFactor;var is_invalid_pos=(control_elem.scroll_left!=(client_width*stepselector.stepindex));if(!is_invalid_pos){return;}this._createStepChangeAnimation(stepselector.stepindex,400);}};_pFormBase.on_fire_sys_onflingstart=function(elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp){return nexacro.Component.prototype.on_fire_sys_onflingstart.call(this,elem,fling_handler,xstartvalue,ystartvalue,xdeltavalue,ydeltavalue,touchlen,from_comp,from_refer_comp);};_pFormBase.on_fire_sys_onslidestart=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp){if(this.stepselector){this._is_step_vscrolling=false;this._is_step_hscrolling=false;if(this._stepchange_info){this._on_cancel_stepchange_animation();}var control_elem=this.getElement();if(control_elem){control_elem.setElementTranslateStart();}}return nexacro.Component.prototype.on_fire_sys_onslidestart.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp);};_pFormBase.on_fire_sys_onslideend=function(elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp){var control_elem;if(touch_manager&&touch_manager._scroll_comp==this){control_elem=this.getElement();var stepselector=this.stepselector;if(!control_elem||!stepselector){return;}control_elem.setElementTranslateEnd();var client_width=control_elem.client_width;var is_invalid_pos=(control_elem.scroll_left!=(client_width*stepselector.stepindex));if(!is_invalid_pos){return;}var target_pos=control_elem.scroll_left-(client_width/2);var session=touch_manager._touch_session;if(session){var cur_scale=session._scale;var data=session._cur_data;if(data){target_pos-=(data.distanceX*cur_scale);}}var target_index=nexacro.round(target_pos/(client_width)+0.5);var cur_stepindex=stepselector.stepindex;var next_stepindex=cur_stepindex;if(target_index==cur_stepindex){this._createStepChangeAnimation(target_index,600);}else{if(xaccvalue>0){next_stepindex-- ;}else{next_stepindex++ ;}}var ret=stepselector.set_stepindex(next_stepindex);if(ret){control_elem.setElementHScrollPos(client_width*stepselector.stepindex);}touch_manager._touch_session._fling_blocked=true;}else{control_elem=this.getElement();if(control_elem&&this.stepselector){control_elem.setElementTranslateEnd();}return nexacro.Component.prototype.on_fire_sys_onslideend.call(this,elem,touch_manager,touchinfos,xaccvalue,yaccvalue,xdeltavalue,ydeltavalue,from_comp,from_refer_comp);}return false;};_pFormBase._createStepChangeAnimation=function(target_index,duration){if(this._stepchange_info){this._on_cancel_stepchange_animation();}var control_elem=this.getElement();if(control_elem){var info={};info.is_alive=true;info.target_index=target_index;info.starttime=new Date().getTime();info.duration=duration;var hscroll_step=control_elem.hscroll_limit/(control_elem._step_count-1);info.startpos=control_elem.scroll_left;info.endpos=hscroll_step*target_index;if(this.stepshowtype=="action"){var stepselector=this.stepselector;if(stepselector){stepselector.set_visible(true);}}var comps=this.components;var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){comps[i].on_apply_positionstep();}var pThis=this;info.timer=new nexacro.AnimationFrame(this,function(){pThis._on_stepchange_animation();});info.timer.start();this._stepchange_info=info;}};_pFormBase._on_stepchange_animation=function(){var control_elem=this.getElement();if(!control_elem){return;}var info=this._stepchange_info;if(info&&info.is_alive){var t=new Date().getTime()-info.starttime;var d=info.duration;var q=t/d-1;var c=Math.min((q*q*q+1),1);var curpos=info.startpos+((info.endpos-info.startpos)*c);control_elem.setElementHScrollPos(curpos);if(t>=info.duration){this._on_end_stepchange_animation();}else{info.timer.start();}}};_pFormBase._on_end_stepchange_animation=function(){var info=this._stepchange_info;if(!info){return;}info.is_alive=false;if(info.timer){info.timer.stop();}var control_elem=this.getElement();var stepselector=this.stepselector;if(control_elem&&stepselector){var new_index=info.target_index;delete info;var hscroll_step=control_elem.hscroll_limit/(control_elem._step_count-1);control_elem.setElementHScrollPos(hscroll_step*new_index);this.on_apply_stepshowtype(this.stepshowtype);this._stepchange_info=null;this.resetScroll();}};_pFormBase._on_cancel_stepchange_animation=function(){var info=this._stepchange_info;if(!info){return;}info.is_alive=false;if(info.timer){info.timer.stop();}delete info;this._stepchange_info=null;};_pFormBase._searchNextTabFocus=function(current,b_search_from_first,opt_force_cycle,filter_type){if(filter_type===undefined){filter_type=4;}var opt_cycle=(opt_force_cycle==undefined)?(nexacro._tabkeycirculation==0):opt_force_cycle;var ret,next;var my_tapstop_childs=this._getComponentsByTaborder(this,filter_type);var my_tabstop_child_cnt=my_tapstop_childs?my_tapstop_childs.length:0;var parent=this.parent;while((parent&&parent._hasContainer&&!parent._hasContainer()&&!parent._is_frame)){parent=parent.parent;}if(my_tabstop_child_cnt>0&&current&&!b_search_from_first){next=this._getTabOrderNext(current,1,filter_type);if(opt_cycle&&!next&&this._isPopupVisible()){next=this._getTabOrderFirst(filter_type);}if(!next){var parent_tabstop_childs=parent._getComponentsByTaborder(parent,filter_type);var parent_tabstop_child_cnt=parent_tabstop_childs?parent_tabstop_childs.length:0;if(!opt_cycle&&(parent._is_frame||this._is_window)){ret=[null,this,1];}else if(parent._hasContainer()&&parent_tabstop_child_cnt>0){ret=parent._searchNextTabFocus(this,false,opt_cycle,filter_type);}else{next=this._getTabOrderFirst(filter_type);}}}else{next=this._getTabOrderFirst(filter_type);if(!next){if(!nexacro._isNull(parent)&&parent._hasContainer){ret=parent._searchNextTabFocus(this,false,opt_cycle,filter_type);}else{ret=null;}}}if(next){var next_tabstop_childs=(next._hasContainer()?next._getComponentsByTaborder(next,filter_type):null);var next_tabstop_child_cnt=next_tabstop_childs?next_tabstop_childs.length:0;if(next._hasContainer()&&next._checkContainerTabFocus()==true&&(filter_type&4)&&((filter_type&8)?next._isAccessibilityEnable():true)){ret=[next];}else if(next._hasContainer()&&next_tabstop_child_cnt>0){ret=next._searchNextTabFocus(null,true,undefined,filter_type);}else{ret=[next];}}return ret;};_pFormBase._searchPrevTabFocus=function(current,bSearchFromLast,opt_force_cycle,filter_type){var opt_cycle=(opt_force_cycle==undefined)?(nexacro._tabkeycirculation==0):opt_force_cycle;var ret,next;var my_tapstop_childs=this._getComponentsByTaborder(this,filter_type);var my_tabstop_child_cnt=my_tapstop_childs?my_tapstop_childs.length:0;var parent=this.parent;while((parent&&parent._hasContainer&&!parent._hasContainer()&&!parent._is_frame)){parent=parent.parent;}if(my_tabstop_child_cnt&&current&&!bSearchFromLast){next=this._getTabOrderNext(current, -1,filter_type);if(opt_cycle&&!next&&this._isPopupVisible()){next=this._getTabOrderLast(filter_type);}if(!next){if(filter_type&4&&parent._hasContainer()){next=parent;}else{var parent_tabstop_childs=parent._getComponentsByTaborder(parent,filter_type);var parent_tabstop_child_cnt=parent_tabstop_childs?parent_tabstop_childs.length:0;if(opt_cycle==false&&(parent._is_frame||this._is_window)){ret=[null,this, -1];}else if(parent._hasContainer()&&parent_tabstop_child_cnt>0){ret=parent._searchPrevTabFocus(this,undefined,undefined,filter_type);}else{next=this._getTabOrderLast(filter_type);}}}}else{if(!bSearchFromLast){if(this instanceof nexacro.PopupDiv){next=this._getTabOrderLast(filter_type);}else{ret=parent._searchPrevTabFocus(this,undefined,undefined,filter_type);}}if(!ret){next=this._getTabOrderLast(filter_type);if(!next&&ret!==null){if(this._checkContainerTabFocus()==true){ret=[this];}else{ret=parent._searchPrevTabFocus(this,undefined,undefined,filter_type);}}}}if(next){var next_tabstop_childs=(next._hasContainer()?next._getComponentsByTaborder(next,filter_type):null);var next_tabstop_child_cnt=next_tabstop_childs?next_tabstop_childs.length:0;if(next._hasContainer()&&next_tabstop_child_cnt>0){if(this.parent===next){return [next];}ret=next._searchPrevTabFocus(null,true,undefined,filter_type);}else{ret=[next];}}return ret;};_pFormBase._processArrowKey=function(bdown,newfocus_comp){if(newfocus_comp[0] instanceof nexacro.Form&&newfocus_comp[0]._last_focused){var win=this._getWindow();win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}var dir=2;if(!bdown){dir=3;}newfocus_comp[0]._setFocus(true,dir,false);var env=nexacro.getEnvironment(),comp,_label;if(env.accessibilityfirstovermessage&&newfocus_comp[0]==this._getTabOrderFirst()){comp=newfocus_comp[0];_label=comp._getAccessibilityReadLabel()+" "+env.accessibilityfirstovertext;comp.getElement().notifyAccessibility(_label,"focus");}else if(env.accessibilitylastovermessage&&newfocus_comp[0]==this._getTabOrderLast()){comp=newfocus_comp[0];_label=comp._getAccessibilityReadLabel()+" "+env.accessibilitylastovertext;comp.getElement().notifyAccessibility(_label,"focus");}};_pFormBase._processHotkey=function(keycode,altKey,ctrlKey,shiftKey,obj){var parent=null;if(obj){parent=obj.parent;}var hotkey_list=this._hotkey_list;for(var i=0;i<hotkey_list.length;i++ ){var hotkey_info=hotkey_list[i];if(hotkey_info[1]==keycode&&hotkey_info[2]==altKey&&hotkey_info[3]==ctrlKey&&hotkey_info[4]==shiftKey){var comp=hotkey_info[0];if(parent&&parent instanceof nexacro.Tabpage&&obj!=comp&&comp.parent instanceof nexacro.Tabpage){continue;}if(!comp.enable){return true;}comp._on_hotkey(keycode,altKey,ctrlKey,shiftKey);return true;}}if(this._is_frame&&this._is_window&&(this._window_type==1||this._window_type==4)){return;}var owner_frame=this.getOwnerFrame();if(owner_frame){return owner_frame._processHotkey(keycode,altKey,ctrlKey,shiftKey);}};_pFormBase._appendBeforeCloseMsg=function(current_message,new_message){if(typeof (new_message)=="boolean"){new_message=nexacro._toString(new_message);}if(new_message===undefined||new_message==""||new_message===null){return current_message;}if(current_message===undefined||current_message===null){current_message="";}else if(current_message!=""){current_message+="\n";}return (current_message+new_message);};_pFormBase._checkAndConfirmClose=function(confirm_message){if(confirm_message===undefined||confirm_message==""||confirm_message===null){return true;}if(this._window&&this._window._ignore_close_confirm){return true;}return nexacro._confirm(this,confirm_message);};delete _pFormBase;nexacro.Form=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.FormBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this._based_tree={};this._fitcontents_list=[];this._chk_recalc_scroll=[];};var _pForm=nexacro._createPrototype(nexacro.FormBase,nexacro.Form);nexacro.Form.prototype=_pForm;_pForm._type_name="Form";_pForm.layout="";_pForm.opener=null;_pForm.resizebutton=null;_pForm.statustext="";_pForm.titletext="";_pForm.stepalign="center bottom";_pForm.stepitemgap=undefined;_pForm.stepitemsize=undefined;_pForm.stepshowtype="always";_pForm.locale="";_pForm._url="";_pForm._locale="";_pForm._init_width=0;_pForm._init_height=0;_pForm._defaultbutton=null;_pForm._escapebutton=null;_pForm.accessibilityrole="none";_pForm._zoomFactor=undefined;_pForm._autofittedZoomFactor=undefined;_pForm._init_status=0;_pForm._is_fired_onload=false;_pForm._event_list={"onbindingvaluechanged":1,"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmousedown":1,"onmouseup":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"ontouch":1,"onvscroll":1,"onhscroll":1,"onactivate":1,"onbeforeclose":1,"onclose":1,"ondeactivate":1,"onsyscommand":1,"ontimer":1,"oninit":1,"onload":1,"canlayoutchange":1,"canstepchange":1,"onlayoutchanged":1,"onstepchanged":1,"ondevicebuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onorientationchange":1,"oncontextmenu":1,"onerror":1,"onextendedcommand":1};_pForm._getPrevHeadingComponent=nexacro._emptyFn;_pForm._getNextHeadingComponent=nexacro._emptyFn;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion>8){_pForm._use_translate_scroll=false;}_pForm.on_created=function(_window){var ret=nexacro.FormBase.prototype.on_created.call(this,_window);if(ret){if(this._init_status==1){this.on_fire_oninit(this);}this.on_fire_onload(this,this._url);}return ret;};_pForm.on_change_containerRect=function(width,height){var chk=this._chk_recalc_scroll;for(var i=0,n=chk.length;i<n;i++ ){if(chk[i].w==width&&chk[i].h==height){return;}}chk.push({w:width,h:height});var comp;var comps=this.components;var _move_scroll=false;var comp_bottom,comp_scroll_pos,last_comp,form_bottom;if(nexacro._OS=="Android"&&this.vscrollbar&&this.vscrollbar.visible){_move_scroll=true;last_comp=this._getLastFocused();form_bottom=this.getOffsetBottom();}var rtl=this._isRtl();for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp._control_element){if(_move_scroll&&comp instanceof nexacro.Edit){comp_bottom=comp.getOffsetBottom();comp_scroll_pos=comp_bottom-form_bottom;if(this.vscrollbar.pos<comp_scroll_pos&&form_bottom<comp_bottom&&last_comp==comp){this.vscrollbar.set_pos(comp_scroll_pos);}}comp._update_position(rtl);}}if(this.stepselector){this._recalcStepLayout();var control_elem=this.getElement();if(control_elem){var stepcount=this.stepselector.stepcount;var stepindex=this.stepselector.stepindex;if(stepcount>0&&stepindex>=0){control_elem.setElementHScrollPos(control_elem.client_width*this.stepselector.stepindex);}}}if(this._is_scrollable){this._onRecalcScrollSize();this._onResetScrollBar();}this._chk_recalc_scroll=[];};_pForm.on_destroy_contents=function(){nexacro.FormBase.prototype.on_destroy_contents.call(this);this._based_tree=null;this._fitcontents_list=null;this._chk_recalc_scroll=null;};_pForm._on_load=function(obj,url){if(!this._load_callbacklist){return;}var parent_foraddcallback=this.parent;if(this.parent&&this.parent.form==this){parent_foraddcallback=nexacro;}if(parent_foraddcallback&&parent_foraddcallback._addLoadCallbacklist){var pthis=this;var ret=parent_foraddcallback._addLoadCallbacklist({target:pthis,callback:pthis._on_loadcallback,url:this.url});if(!ret){this._on_loadcallback(obj,url);}}};_pForm._addLoadCallbacklist=function(item){if(!this._is_loaded&&this._url&&this._url.length>0){if(!this.parent._load_callbacklist){this.parent._load_callbacklist=[];}this._load_callbacklist.push(item);return true;}return false;};_pForm._on_loadcallback=function(){var callbacklist=this._load_callbacklist;var target;var n=callbacklist.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbacklist[i];target=item.target;var _url=item.url;if(target._is_alive!=false){item.callback.call(target,target,_url);}}callbacklist.splice(0,n);}this.createComponent(true);this.on_fire_oninit(this);var _window,ret;if(!this._is_created){_window=this._getWindow();ret=this.on_created(_window);}if(ret&&!(this instanceof nexacro.Tabpage)&&!_window._bnoactivate){this._on_activate();}var parent=this.parent;if(parent){if(parent._is_frame&&parent.form==this){parent._createdForm();if(parent._window_type!=2){var application=nexacro.getApplication();if(application){application._notifyLoadforms(this);}}}else{if(!_window){_window=this._getRootWindow();}if(_window&&_window.frame&&_window.frame._activate==true){var cur_focus_paths=_window.getCurrentFocusPaths();target=this;if(this instanceof nexacro._InnerForm){target=parent;}if(cur_focus_paths&&nexacro._indexOf(cur_focus_paths,target)> -1){if(nexacro._enableaccessibility&&nexacro._accessibilitywholereadtype>1){this._playAccessibilityWholeReadLabel("wholeread");}this._on_focus(true);}else if(nexacro._enableaccessibility&&nexacro._accessibilitywholereadtype>1){this._playAccessibilityWholeReadLabel("wholeread");}}}}return ret;};_pForm.on_apply_custom_css=function(pseudo){var i,n,comp;var comps=this.components;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];comp.on_apply_prop_class(comps[i],pseudo);}};_pForm.on_update_position=function(resize_flag,move_flag,update){var control_elem=this._control_element;if(control_elem){control_elem.setElementPosition(this._adjust_left,this._adjust_top);if(resize_flag){var val=this._calcScrollMaxSize();control_elem.container_maxwidth=val.w;control_elem.container_maxheight=val.h;}control_elem.setElementSize(this._adjust_width,this._adjust_height,update);if(this._init_status<2){if(this.parent&&this.parent._window_type==5){return;}}if(move_flag){this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(resize_flag){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}};_pForm.on_get_accessibility_label=function(){return this.titletext?this.titletext:"";};_pForm.on_get_prop_tabstop=function(){return this.tabstop;};_pForm.set_opener=nexacro._emptyFn;_pForm.set_layout=nexacro._emptyFn;_pForm.set_statustext=function(v){var parent=this.parent;if(parent&&parent._is_frame){if(this.statustext!=v){this.statustext=v;parent._applyStatusText();}}else{this.statustext=v;}};_pForm.set_titletext=function(v){if(this.parent&&this.parent._is_frame){if(this.titletext!=v){this.titletext=v;this.parent._applyTitleText();}}else{this.titletext=v;}};_pForm.set_dragscrolltype=function(v){var dragscrolltype_enum=["none","vert","horz","both","all"];if(dragscrolltype_enum.indexOf(v)== -1){return;}if(this.dragscrolltype!=v){this.dragscrolltype=v;}};_pForm.set_locale=function(v){if(this.locale!=v){this.locale=v;this._locale=v;this.on_apply_locale(v);}};_pForm.on_apply_locale=function(locale){var i,n,comp;var comps=this.components;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp._is_locale_control){comp._setLocale(locale);}}};_pForm.set_stepalign=function(v){var halign_enum=["left","center","right"];var valign_enum=["top","middle","bottom"];var parts1=v.split(/\s+/);var parts2=this.stepalign.split(/\s+/);if(halign_enum.indexOf(parts1[0])> -1){parts2[0]=parts1[0];}if(valign_enum.indexOf(parts1[1])> -1){parts2[1]=parts1[1];}v=parts2.join(" ");if(this.stepalign!=v){this.stepalign=v;this.on_apply_stepalign(v);}};_pForm.on_apply_stepalign=function(){this._recalcStepLayout();};_pForm.set_stepitemgap=function(v){if(v!==undefined){if(isNaN(v= +v)){return;}}if(this.stepitemgap!=v){this.stepitemgap=v;this.on_apply_stepitemgap(v);}};_pForm.on_apply_stepitemgap=function(stepitemgap){var step_ctrl=this.stepselector;if(step_ctrl){step_ctrl.set_stepitemgap(stepitemgap);}};_pForm.set_stepitemsize=function(v){if(v!==undefined){if(isNaN(v= +v)){return;}}if(this.stepitemsize!=v){this.stepitemsize=v;this.on_apply_stepitemsize(v);}};_pForm.on_apply_stepitemsize=function(stepitemsize){var step_ctrl=this.stepselector;if(step_ctrl){step_ctrl.set_stepitemsize(stepitemsize);}};_pForm.set_stepshowtype=function(v){var stepshowtype_enum=["always","action"];if(stepshowtype_enum.indexOf(v)== -1){return;}if(this.stepshowtype!=v){this.stepshowtype=v;this.on_apply_stepshowtype(v);}};_pForm.on_apply_stepshowtype=function(stepshowtype){var step_ctrl=this.stepselector;if(step_ctrl){switch(stepshowtype){case "action":step_ctrl.set_visible(false);break;case "always":default:step_ctrl.set_visible(true);break;}}};_pForm.on_apply_prop_enable=function(enable){nexacro.Component.prototype.on_apply_prop_enable.call(this,enable);var i,n,comp;var comps=this.components;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];comp._setEnable(enable);}};_pForm._on_activate=function(){if(!this.parent){return;}var owner_frame=this.getOwnerFrame();if(!owner_frame||!owner_frame._activate){return;}nexacro.FormBase.prototype._on_activate.call(this);};_pForm._on_deactivate=function(){if(!this.parent){return;}var owner_frame=this.getOwnerFrame();if(!owner_frame||owner_frame._activate){return;}nexacro.FormBase.prototype._on_deactivate.call(this);};_pForm._on_starttrack=function(){if(!this._is_alive){return false;}if(nexacro._isTouchInteraction){return false;}var ownerframe=this.getOwnerFrame();if(ownerframe){return ownerframe._on_titlebar_starttrack();}return false;};_pForm._on_endtrack=function(x,y,dragdata){if(!this._is_alive){return;}var ownerframe=this.getOwnerFrame();if(ownerframe){ownerframe._on_titlebar_endtrack(x,y,dragdata);}};_pForm._on_movetrack=function(x,y,dragdata,windowX,windowY){if(!this._is_alive){return;}var ownerframe=this.getOwnerFrame();if(ownerframe){ownerframe._on_titlebar_movetrack(x,y,dragdata,windowX,windowY);}};_pForm._on_devicebuttonup=function(e){var ret=this.on_fire_ondevicebuttonup(this,e);if(!ret&&this.parent&&this.parent instanceof nexacro.Form){return this.parent._on_devicebuttonup(e);}return ret;};_pForm._on_orientationchange=function(orientation){this.on_fire_onorientationchange(orientation);var i,n,comp;var comps=this.components;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp._hasContainer()&&comp._on_orientationchange){comp._on_orientationchange(orientation);}}};_pForm.on_fire_sys_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Component.prototype.on_fire_sys_onrbuttonup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);nexacro._quickview_mode=true;if(nexacro._quickview_mode&&ret!==true&&this.parent instanceof nexacro.ChildFrame){if(from_refer_comp&&!from_refer_comp._input_element){return nexacro._showQuickviewMenu(this,screenX,screenY);}}return ret;};_pForm.on_fire_user_onkeydown=function(keycode,alt_key,ctrl_key,shift_key,fire_comp,refer_comp){if(!this._is_alive){return;}var newfocus_comp;var lastfocus_comp=this._last_focused;var focusedComp=refer_comp;if(!focusedComp){focusedComp=this.getFocus();}if(!focusedComp){focusedComp=this;}if(focusedComp){focusedComp=focusedComp._getRootComponent(focusedComp);if(!focusedComp){return;}}var win=this._getWindow();var root_win=this._getRootWindow();var env=nexacro.getEnvironment();var keydown_elem=root_win._keydown_element;var dlgc=focusedComp._getDlgCode(keycode,alt_key,ctrl_key,shift_key);if(keycode==nexacro.Event.KEY_TAB){if(!dlgc.want_tab){if(keydown_elem){keydown_elem._event_stop=true;}if(!shift_key){newfocus_comp=this._searchNextTabFocus(this._last_focused,undefined,undefined,0);}else{newfocus_comp=this._searchPrevTabFocus(this._last_focused,undefined,undefined,0);}if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0]._hasContainer()&&newfocus_comp[0]._last_focused){win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,(!shift_key?0:1),true);}else if(newfocus_comp&&newfocus_comp[2]== -1){if(lastfocus_comp){lastfocus_comp.getElement().notifyAccessibility(env.accessibilityfirstovertext,"notify",true);}}else if(newfocus_comp&&newfocus_comp[2]==1){if(lastfocus_comp){lastfocus_comp.getElement().notifyAccessibility(env.accessibilitylastovertext,"notify",true);}}return true;}}else if(keycode==nexacro.Event.KEY_RETURN){if(!dlgc.want_return){if(this instanceof nexacro.Form){var defaultbutton=this._defaultbutton;if(!focusedComp._isPopupVisible()){if(defaultbutton&&defaultbutton.enableevent&&defaultbutton._isEnable()){defaultbutton._click(keycode);}}}}}else if(keycode==nexacro.Event.KEY_ESC){if(nexacro._stopTransaction(this,1)<=0&&!dlgc.want_escape){if(this instanceof nexacro.Form){var escapebutton=this._escapebutton;if(escapebutton&&escapebutton.enableevent&&escapebutton._isEnable()){escapebutton._click(keycode);}}}}if(nexacro._enableaccessibility){var filter_type;if(keycode==nexacro.Event.KEY_DOWN&&!alt_key&&!ctrl_key&&!shift_key){filter_type=7+8;if(!dlgc.want_arrows){if(lastfocus_comp&&lastfocus_comp._hasContainer()){newfocus_comp=lastfocus_comp._searchNextTabFocus(null,true,undefined,filter_type);}else{newfocus_comp=this._searchNextTabFocus(lastfocus_comp,undefined,undefined,filter_type);}if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0]._hasContainer()&&newfocus_comp[0]._last_focused){var _win=this._getWindow();_win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,2,true);}if(keydown_elem){keydown_elem._event_stop=true;}return true;}}else if(keycode==nexacro.Event.KEY_UP&&!alt_key&&!ctrl_key&&!shift_key){if(!dlgc.want_arrows){filter_type=7;var first_comp=this._getTabOrderFirst(7);filter_type+=8;if(this instanceof nexacro._InnerForm&&first_comp==lastfocus_comp){if(this.parent._isAccessibilityEnable()){newfocus_comp=[this.parent];}else{var refform=this.parent._getForm();if(this.parent instanceof nexacro.PopupDiv){refform=this.parent;}newfocus_comp=refform._searchPrevTabFocus(this.parent,undefined,undefined,filter_type);}}else{newfocus_comp=this._searchPrevTabFocus(lastfocus_comp,undefined,undefined,filter_type);}if(newfocus_comp&&newfocus_comp[0]){if(newfocus_comp[0] instanceof nexacro.Form&&newfocus_comp[0]._last_focused){win._removeFromCurrentFocusPath(newfocus_comp[0]._last_focused);}newfocus_comp[0]._setFocus(true,3,true);}if(keydown_elem){keydown_elem._event_stop=true;}return true;}}}var ret=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,keycode,alt_key,ctrl_key,shift_key,this,refer_comp);if(!this.onkeydown||(this.onkeydown&&!this.onkeydown.defaultprevented)){var line;if(keycode==nexacro.Event.KEY_LEFT||keycode==nexacro.Event.KEY_RIGHT){var hscrollbar=this.hscrollbar;if(hscrollbar&&hscrollbar.visible&&ctrl_key==true){if(!dlgc.want_arrows){line=hscrollbar.line;if(line<=0){line=hscrollbar._linedown;}if(keycode==nexacro.Event.KEY_LEFT){line*= -1;}hscrollbar.set_pos(hscrollbar.pos+line);return true;}}}else if(keycode==nexacro.Event.KEY_UP||keycode==nexacro.Event.KEY_DOWN){var vscrollbar=this.vscrollbar;if(vscrollbar&&vscrollbar.visible&&ctrl_key==true){if(!dlgc.want_arrows){line=vscrollbar.line;if(line<=0){line=vscrollbar._linedown;}if(keycode==nexacro.Event.KEY_UP){line*= -1;}vscrollbar.set_pos(vscrollbar.pos+line);return true;}}}}return ret;};_pForm.on_fire_oninit=function(obj){if(this._init_status!=1){return true;}this._init_status=2;if(this.oninit&&this.oninit._has_handlers){var evt=new nexacro.Event(obj,"oninit");return this.oninit._fireEvent(this,evt);}return true;};_pForm.on_fire_canstepchange=function(obj){if(this.canstepchange&&this.canstepchange._has_handlers){var evt=new nexacro.StepChangeEventInfo(obj,"canstepchange",obj._prestepindex,obj._poststepindex);return this.canstepchange._fireCheckEvent(this,evt);}return true;};_pForm.on_fire_onstepchanged=function(obj){this._on_restore_stepscroll(obj);if(this.onstepchanged&&this.onstepchanged._has_handlers){var evt=new nexacro.StepChangeEventInfo(obj,"onstepchanged",obj._prestepindex,obj._poststepindex);return this.onstepchanged._fireEvent(this,evt);}};_pForm.on_fire_canlayoutchange=function(obj,eventid,curlayoutname,newlayoutname,curlayoutwidth,newlayoutwidth,curlayoutheight,newlayoutheight){if(this.canlayoutchange&&this.canlayoutchange._has_handlers){var evt=new nexacro.LayoutChangeEventInfo(obj,eventid,curlayoutname,newlayoutname,curlayoutwidth,newlayoutwidth,curlayoutheight,newlayoutheight);return this.canlayoutchange._fireCheckEvent(this,evt);}return true;};_pForm.on_fire_onlayoutchanged=function(obj,eventid,curlayoutname,newlayoutname,curlayoutwidth,newlayoutwidth,curlayoutheight,newlayoutheight){if(this.onlayoutchanged&&this.onlayoutchanged._has_handlers){var evt=new nexacro.LayoutChangeEventInfo(obj,eventid,curlayoutname,newlayoutname,curlayoutwidth,newlayoutwidth,curlayoutheight,newlayoutheight);return this.onlayoutchanged._fireEvent(this,evt);}return true;};_pForm.on_fire_onbeforelayoutchange=function(obj,eventid,curlayout,newlayout){if(this.onbeforelayoutchange&&this.onbeforelayoutchange._has_handlers){var evt=new nexacro.LayoutChangeEventInfo(obj,eventid,curlayout,newlayout);return this.onbeforelayoutchange._fireEvent(this,evt);}return true;};_pForm.on_fire_onload=function(obj,url){if(this._is_fired_onload){return true;}if(this.onload&&this.onload._has_handlers){this._bFireLoadEvent=true;var evt=new nexacro.LoadEventInfo(obj,"onload",url);var ret=this.onload._fireEvent(this,evt);this._bFireLoadEvent=false;evt.destroy();this._is_fired_onload=true;return ret;}return true;};_pForm.on_fire_ondevicebuttonup=function(obj,e){if(this.ondevicebuttonup&&this.ondevicebuttonup._has_handlers){var evt=new nexacro.DeviceButtonEventInfo(obj,e);return this.ondevicebuttonup._fireEvent(this,evt);}return true;};_pForm.on_fire_onorientationchange=function(orientation){if(this.onorientationchange&&this.onorientationchange._has_handlers){var evt=new nexacro.OrientationChangeEventInfo(this,"onorientationchange",orientation);this.onorientationchange._fireEvent(this,evt);}};_pForm.on_fire_sys_onaccessibilitygesture=function(direction,fire_comp,refer_comp){if(!this._is_alive){return;}var _window=this._getWindow();var comp=null;var filter_type;var my_tapstop_childs,my_tapstop_childs_cnt;var new_comp;if(!direction){filter_type=3+8;comp=this._searchPrevTabFocus(_window._accessibility_last_focused_comp,undefined,undefined,filter_type);while(comp&&comp[0]&&comp[0]._hasContainer()){my_tapstop_childs=comp[0]._searchPrevTabFocus(null,undefined,undefined,filter_type);my_tapstop_childs_cnt=my_tapstop_childs?my_tapstop_childs.length:0;if(my_tapstop_childs_cnt==0){break;}new_comp=comp[0]._searchPrevTabFocus(null,undefined,undefined,filter_type);if(comp[0]==new_comp[0]){comp=new_comp;break;}comp=new_comp;}}else{filter_type=3+8;comp=this._searchNextTabFocus(_window._accessibility_last_focused_comp,undefined,undefined,filter_type);while(comp&&comp[0]&&comp[0]._hasContainer()){my_tapstop_childs=comp[0]._searchNextTabFocus(null,undefined,undefined,filter_type);my_tapstop_childs_cnt=my_tapstop_childs?my_tapstop_childs.length:0;if(my_tapstop_childs_cnt==0){break;}new_comp=comp[0]._searchNextTabFocus(null,undefined,undefined,filter_type);if(comp[0]==new_comp[0]){comp=new_comp;break;}comp=new_comp;}}if(comp&&comp[0]){comp[0]._setAccessibilityNotifyEvent(direction);return true;}return false;};_pForm.addChild=function(id,obj){var ret= -1;if(id&&id.length<=0){return  -1;}if(!obj){throw nexacro.MakeReferenceError(this,"reference_not_define",id);}if(this[id]){throw nexacro.MakeNativeError(this,"native_exist_id",id);}var is_component=false;var oldwindow,newwindow;if(obj._is_component){is_component=true;}if(is_component){oldwindow=obj._getWindow();}if(!obj.id){obj.id=obj.name=id;}else{obj.id=id;}obj.parent=this;obj._refform=this;if(is_component){newwindow=obj._getWindow();}this[id]=obj;this.all.add_item(id,obj);if(this.visible&&!this._real_visible){obj._real_visible=false;}else{obj._real_visible=this.visible;}if(is_component){ret=this.components.add_item(id,obj);this._child_list.push(obj);if(oldwindow!=newwindow){}else if(obj._is_alive&&obj._is_created){this._control_element.appendChildElement(obj.getElement());}}else if(obj instanceof nexacro.BindItem){ret=this.binds.add_item(id,obj);}else{ret=this.objects.add_item(id,obj);}return ret;};_pForm.resetScroll=function(){if(this._is_created_contents){var comp;var comps=this.components;for(var i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp._arrange_info||(comp.fittocontents!="none")){comp._update_position();}}}if(this._is_scrollable){this._onRecalcScrollSize();this._onResetScrollBar();}};_pForm.close=function(arg){if(this._closing){return;}if(!this.parent||!this.parent._is_frame){return;}this.setWaitCursor(false,null);var childframe=this.parent;var confirm_message=childframe._on_beforeclose();if(childframe._checkAndConfirmClose(confirm_message)==false){return false;}if(childframe._window){childframe._window._ignore_close_confirm=true;}this._closing=true;childframe._on_close();this._closing=null;if(typeof (arg)=="object"){arg=null;}if(this.parent){this.parent._closeForm(arg);}};_pForm.getFirstComponent=function(no_composite_flag){if(no_composite_flag!==true){no_composite_flag=false;}var ar=this._getComponentsByTaborder(this,6);var comp=null;if(ar&&ar.length>0){comp=ar[0];}if(no_composite_flag){var first=comp;while(first&&first._hasContainer()){first=first._getTabOrderFirst(6);if(!first){break;}comp=first;}}if(comp&&comp instanceof nexacro.Tabpage){comp=comp.parent;}return comp;};_pForm.getLastComponent=function(no_composite_flag){if(no_composite_flag!==true){no_composite_flag=false;}var ar=this._getComponentsByTaborder(this,6);var comp=null;if(ar&&ar.length>0){comp=ar[ar.length-1];}if(no_composite_flag){var last=comp;while(last&&last._hasContainer()){last=last._getTabOrderLast(6);if(!last){break;}comp=last;}}if(comp&&comp instanceof nexacro.Tabpage){comp=comp.parent;}return comp;};_pForm._getNextComponent=function(comp,no_composite_flag,only_enable_flag){if(no_composite_flag!==true){no_composite_flag=false;}if(only_enable_flag!==true){only_enable_flag=false;}var tabstop_ar=this._getComponentsByTaborder(this,6);var all_ar=this._getComponentsByTaborder(this,7);var cur_idx=nexacro._indexOf(tabstop_ar,comp._getRootComponent(comp));if(cur_idx<0){var cur_all_idx=nexacro._indexOf(all_ar,comp._getRootComponent(comp));var i;if(cur_all_idx<0){return null;}i=cur_all_idx-1;while((i>=0&&i<all_ar.length)){comp=all_ar[i];cur_idx=nexacro._indexOf(tabstop_ar,comp._getRootComponent(comp));if(cur_idx>=0){break;}i-- ;}}var next;if(only_enable_flag){next=this._searchNextTabFocus(comp,false,undefined,no_composite_flag?0:4);}else{next=this._searchNextTabFocus(comp,false,undefined,no_composite_flag?2:6);}if(next&&next.length>0){return next[0];}return null;};_pForm.getNextComponent=function(comp,no_composite_flag){return this._getNextComponent(comp,no_composite_flag);};_pForm._getPrevComponent=function(comp,no_composite_flag,only_enable_flag){if(no_composite_flag!==true){no_composite_flag=false;}if(only_enable_flag!==true){only_enable_flag=false;}var tabstop_ar=this._getComponentsByTaborder(this,6);var all_ar=this._getComponentsByTaborder(this,7);var cur_idx=nexacro._indexOf(tabstop_ar,comp._getRootComponent(comp));if(cur_idx<0){var cur_all_idx=nexacro._indexOf(all_ar,comp._getRootComponent(comp));var i;if(cur_all_idx<0){return null;}i=cur_all_idx+1;while((i>=0&&i<all_ar.length)){comp=all_ar[i];cur_idx=nexacro._indexOf(tabstop_ar,comp._getRootComponent(comp));if(cur_idx>=0){break;}i++ ;}}var prev=null;if(only_enable_flag){if(no_composite_flag){prev=this._searchPrevTabFocus(comp,false,undefined,0);}else{prev=this._searchPrevTabFocus(comp,false,undefined,4);}}else{if(no_composite_flag){prev=this._searchPrevTabFocus(comp,false,undefined,2);}else{if(cur_idx>0){prev=tabstop_ar[cur_idx-1];}}}return prev;};_pForm.getPrevComponent=function(comp,no_composite_flag){return this._getPrevComponent(comp,no_composite_flag);};_pForm.getFocus=function(){var last_focus=this._find_lastFocused();if(last_focus==null){return this;}return last_focus;};_pForm.go=function(v){if(this._url!=v){if(this._url!=""){var confirm_message=this._on_beforeclose();if(this._checkAndConfirmClose(confirm_message)==false){return;}this._on_close();}this._url=v;this._base_url=nexacro._getBaseUrl(v);this._apply_formurl();}};_pForm.hasPopupFrame=function(){var frame;var i,len;var popupframes=nexacro.getPopupFrames(this);if(popupframes){for(i=0,len=popupframes.length;i<len;i++ ){frame=popupframes[i];if(frame&&this===frame.opener){return true;}}}var win=this._getWindow();var modalframes=win._modal_frame_stack;var modal_info;if(modalframes){for(i=0,len=modalframes.length;i<len;i++ ){modal_info=modalframes[i];frame=modal_info[0];if(frame&&this===frame.opener){return true;}}}return false;};_pForm.insertChild=function(idx,id,obj){if(id&&id.length<=0){return  -1;}if(!obj){return  -1;}if(this[id]){return  -1;}if(!obj.id){obj.id=obj.name=id;}else{obj.id=id;}obj.parent=this;obj._refform=this;this[id]=obj;this.all.add_item(id,obj);var ret;if(obj._is_component){ret=this.components.insert_item(idx,id,obj);this._child_list.push(obj);if(obj._is_alive&&obj._is_created){var beforecomp=this.components[idx+1];this._control_element.insertChildElement(obj.getElement(),beforecomp?beforecomp.getElement():null);}}else if(obj instanceof nexacro.BindItem){ret=this.binds.insert_item(idx,id,obj);}else{ret=this.objects.insert_item(idx,id,obj);}return ret;};_pForm.isValidObject=function(target){if(typeof target=="string"){if(this[target]){return true;}}else if(target instanceof Object){var len=this.all.length;for(var i=0;i<len;i++ ){if(this.all[i]==target){return true;}}}else{if(nexacro._indexOf(this.all,target)> -1){return true;}}return false;};_pForm.killTimer=function(nTimerID){this._timerManager.deleteTimer(nTimerID);};_pForm.setTimer=function(nTimerID,nElapse){var timer=new nexacro._EventTimer(this,nTimerID,nElapse);timer.start();};_pForm.loadStyle=function(url,bclear){if((typeof (url)!="string")||url.length==0){return;}bclear=bclear==false?false:true;var exceptcssselector=true;if(bclear){exceptcssselector=false;}this._clearCssInfo(exceptcssselector);var base_url=this._base_url;var cssurl=[];cssurl.push(nexacro._getServiceLocation(url,base_url));cssurl.push(".js");var service=nexacro._getServiceObject(url);this._load_manager.reloadCssModule(cssurl.join(""),null,false,service);this._resetFormStatus(this);};_pForm.reload=function(){var _win=this._getRootWindow();_win._removeFromCurrentFocusPath(this._last_focused,true);_win=this._getWindow();_win.clearCurrentFocusPaths();this._last_focused=null;if(!this._url){this._url=this.parent._formurl;}this._base_url=nexacro._getBaseUrl(this._url);this._apply_formurl();};_pForm.removeChild=function(id){if(!id||id.length<=0){return null;}var obj=this[id];if(!obj){return null;}if(obj._is_component){var is_focused=false;var _window=this._getWindow();if(_window){is_focused=(_window._indexOfCurrentFocusPaths(obj)> -1);}if(this._defaultbutton==obj){this._defaultbutton=null;}if(this._escapebutton==obj){this._escapebutton=null;}if(this._bind_manager){this._bind_manager._dettachSBindItem(obj);}this.components.delete_item(id);var cidx=nexacro._indexOf(this._child_list,obj);if(cidx> -1){this._child_list.splice(cidx,1);}if(this._is_alive&&obj._control_element){if(obj._control_element){obj._control_element._removeFromContainer();}if(is_focused){if(obj instanceof nexacro.Form){obj._on_deactivate();}_window._removeFromCurrentFocusPath(obj,true);_window._last_focused_elem=this._control_element;this._on_focus(true);}}}else if(obj instanceof nexacro.BindItem){this._bind_manager._setBinditem(obj,true);this.binds.delete_item(id);}else{this.objects.delete_item(id);}obj.parent=null;delete this[id];this.all.delete_item(id);return obj;};_pForm.setWaitCursor=function(wait_flag,forcely_flag){var wait=wait_flag;var forcely=forcely_flag;if(wait==undefined){wait=true;}if(forcely==undefined){forcely=false;}if(!forcely&&!nexacro._usewaitcursor){return;}this._waitCursor(wait,null);};_pForm.sleep=function(nMilliseconds){var then=new Date().getTime();var now=then;while((now-then)<nMilliseconds){now=new Date().getTime();}};_pForm.transaction=function(id,url,inDatasetsParam,outDatasetsParam,argsParam,callbackFn,isAsync,datatype,isCompress){var realurl=nexacro._getServiceLocation(url,this._base_url,null,false);var service=nexacro._getServiceObject(url,true);this._load_manager.loadDataModule(realurl,id,inDatasetsParam,outDatasetsParam,argsParam,callbackFn,isAsync,datatype,isCompress,service);};_pForm.cancelTransaction=function(id){if(!this._load_manager){return  -1;}var datalist=this._load_manager.dataList;if(!datalist){return  -1;}if(id!=undefined){var datalistid=(typeof id=="string")?id.split(","):id;if(datalistid.length>0){var datalistfilter=[];for(var k=0;k<datalist.length;k++ ){datalistfilter[k]=datalist[k].url;}var j,i,datalistfiltered=[];for(j=0;datalistfilter.length>j;j++ ){var datalistfound=false;for(i=0;datalistid.length>i;i++ ){if(datalistid[i]==datalistfilter[j]){datalistfound=true;break;}}if(!datalistfound){datalistfiltered.push(datalistfilter[j]);}}for(j=datalistfiltered.length-1;j>=0;j-- ){for(i=datalist.length-1;i>=0;i-- ){if(datalist[i].url==datalistfiltered[j]){datalist=nexacro._removedatalist(datalist,i);}}}}}this._stopTransaction(true);};_pForm.updateWindow=function(){};_pForm.getStepCount=function(){var step_ctrl=this.stepselector;if(step_ctrl){return step_ctrl.stepcount;}return 0;};_pForm.setStepIndex=function(index){var step_ctrl=this.stepselector;if(step_ctrl){return step_ctrl.set_stepindex(index);}return false;};_pForm.getStepIndex=function(){var step_ctrl=this.stepselector;if(step_ctrl){return step_ctrl.stepindex;}return  -1;};_pForm.applyChange=function(){var comp=this._last_focused;if(!comp){return;}comp.applyto_bindSource("value",comp.value);var binds=this.binds;var len=binds.length;for(var i=0;i<len;i++ ){var bind_item=binds[i];if(bind_item._comp==comp&&bind_item.propid=="value"){this._bind_manager._notify(bind_item);return;}}};_pForm._onRecalcScrollSize=function(fromComp){var control_elem=this._control_element;if(this._is_scrollable&&control_elem){var w=0,h=0;var container_width=control_elem.getContainerElement(control_elem._step_index).width;var container_height=control_elem.getContainerElement(control_elem._step_index).height;var container_maxwidth=control_elem.container_maxwidth;var container_maxheight=control_elem.container_maxheight;var zoom_factor=this._getZoom()/100;var offsetbottom;container_width=container_width/zoom_factor;container_height=container_height/zoom_factor;container_maxwidth=container_maxwidth/zoom_factor;container_maxheight=container_maxheight/zoom_factor;if(!fromComp){var i,n,comp,comps=this.components;if(this.stepselector&&this.stepselector.stepcount>0){var cur_stepindex=this.stepselector.stepindex;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp&&comp.visible&&comp.positionstep==cur_stepindex){offsetbottom=comp.getOffsetBottom();h=Math.max(h,offsetbottom);}}w=this.width*this.stepselector._poststepcount;}else{for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp&&comp.visible){var offsetright=comp.getOffsetRight();offsetbottom=comp.getOffsetBottom();w=Math.max(w,offsetright);h=Math.max(h,offsetbottom);}}}w=Math.max(w,container_width);if(!this.stepselector){h=Math.max(h,container_height);}h=Math.max(h,container_height);control_elem.setElementScrollMaxSize(w,h);}else if(fromComp.visible){var offsetRight=fromComp.getOffsetRight();var offsetBottom=fromComp.getOffsetBottom();if(container_maxwidth<offsetRight||container_maxheight<offsetBottom){w=Math.max(container_maxwidth,offsetRight);h=Math.max(container_maxheight,offsetBottom);control_elem.setElementScrollMaxSize(w,h);}}}};_pForm._resetScrollPos=function(target_comp,left,top,right,bottom,focus_direction){var control_elem=this.getElement();if(control_elem){if(this._is_frame){return;}var parent=this.parent;var hscroll=this.hscrollbar;var vscroll=this.vscrollbar;var hpos=0;var vpos=0;var form_left=(this instanceof nexacro._InnerForm)?parent._adjust_left:this._adjust_left;var form_top=(this instanceof nexacro._InnerForm)?parent._adjust_top:this._adjust_top;var client_width=control_elem.getClientWidth();var client_height=control_elem.getClientHeight();if(hscroll&&(hscroll.visible||(hscroll instanceof nexacro.ScrollIndicatorControl))){hpos=hscroll.pos;if(this.scrolltype!="vertical"&&this.scrolltype!="none"){if(left-hpos<client_width&&right-hpos>client_width){if(focus_direction==1&&right-left>client_width){hscroll.set_pos(right-client_width);}else{hscroll.set_pos(left);}}else if(hpos>left||(left-hpos>client_width)){var _hpos;if(focus_direction==1&&right-left>client_width){_hpos=right-client_width;}else{_hpos=left;}hscroll.set_pos(_hpos);}}hpos=hscroll.pos;}if(vscroll&&(vscroll.visible||(vscroll instanceof nexacro.ScrollIndicatorControl))){vpos=vscroll.pos;if(this.scrolltype!="horizontal"&&this.scrolltype!="none"){if(top-vpos<client_height&&bottom-vpos>client_height){if(focus_direction==1&&bottom-top>client_height){vscroll.set_pos(bottom-client_height);}else{vscroll.set_pos(top);}}else if((vpos>top)||(top-vpos>=client_height)){var _vpos;if(focus_direction==1&&bottom-top>client_height){_vpos=bottom-client_height;}else{_vpos=top;}vscroll.set_pos(_vpos);}}vpos=vscroll.pos;}left=form_left+left-hpos;top=form_top+top-vpos;right=form_left+right-hpos;bottom=form_top+bottom-vpos;if(!this._is_popup_control&&parent&&parent!=this){parent._resetScrollPos(this,left,top,right,bottom,focus_direction);}}};_pForm._resetFormStatus=function(obj){var i,n,comp;var comps=obj.components;for(i=0,n=comps.length;i<n;i++ ){comp=comps[i];if(comp){if(comp._is_form){comp._apply_status("");this._resetFormStatus(comp);}else{comp._apply_status("");}}}this._apply_status("");};_pForm._resetFitToContents=function(){var comp;var list=this._fitcontents_list;for(var i in list){if(comp=this[list[i]]){comp._update_position(true,false);}}};_pForm._calcScrollMaxSize=function(){var control_elem=this._control_element;if(this._is_scrollable&&control_elem){var _w=0,_h=0;var comps=this.components;for(var i=0,n=comps.length;i<n;i++ ){var comp=comps[i];if(comp&&comp.visible){var offsets=comp._getFixedOffsetValue();_w=Math.max(_w,offsets.right);_h=Math.max(_h,offsets.bottom);}}return {w:_w,h:_h};}return {w: -1,h: -1};};_pForm._setSize=function(width,height){if(this._adjust_width!=width||this._adjust_height!=height){var keyboardheight=this._height-height;var focused_comp=null;this.width=this._width=width;this.height=this._height=height;this._adjustPosition();var bAdjustVScroll=false;if(this._layout_list&&this._layout_list.length>0){var layoutmanger=nexacro._getLayoutManager();if(layoutmanger&&layoutmanger._cancelChangeLayout!==undefined){if(this.getOwnerFrame()._activate){layoutmanger._cancelChangeLayout=false;}focused_comp=this._last_focused;var input_top=0,input_height=0;if(focused_comp){input_top=focused_comp._adjust_top;input_height=focused_comp._adjust_height;while(focused_comp.form){if(!focused_comp.form._last_focused){break;}focused_comp=focused_comp.form._last_focused;input_top+=focused_comp._adjust_top;input_height=focused_comp._adjust_height;}}bAdjustVScroll=this._vscroll_pos+height<input_top+input_height;}else{var layout=this._checkValidLayout();if(layout){var control_elem=layout._form.getElement();if(control_elem){control_elem.setElementSize(width,height);}}}}this.on_update_position(true,false);if(bAdjustVScroll){this.getElement().setElementVScrollPos(this._vscroll_pos+keyboardheight);if(this.getOwnerFrame()._activate){focused_comp.setFocus();}}}};_pForm._setZoom=function(v){var prevZoomFactor=this._getZoom();if(typeof v=="string"&&v.charAt(v.length-1)=="%"){v=v.slice(0,v.length-1);}v=parseFloat(v)|0;if(v<=0||v==prevZoomFactor){return prevZoomFactor;}var control_elem=this._control_element;if(control_elem){this._zoomFactor=v;control_elem.container_maxwidth=0;control_elem.container_maxheight=0;control_elem.setElementScrollMaxSize(0,0);this._client_width=0;this._client_height=0;control_elem.setElementZoom(v);nexacro._applyZoomEdge(control_elem,v);var popups=nexacro._current_popups;var len=popups.length;for(var i=0;i<len;i++ ){if(this._contains(popups[i])){popups[i].parent._applyZoomPopup();}}}this.on_fire_onzoom(v,this,this);return prevZoomFactor;};_pForm._getZoom=function(){var control_elem=this._control_element;if(control_elem){return (this._zoomFactor!==undefined)?this._zoomFactor:control_elem.zoom;}return 100;};_pForm._setFormPosition=function(width,height){this._init_width=width;this._init_height=height;};_pForm._setDragMove=function(v,is_windowframe){this._is_track=v;if(v&&is_windowframe){this._hittest_type="caption";}else{this._hittest_type="none";}this.on_apply_hittesttype();};_pForm._stopTransaction=function(is_cancel){if(!this._load_manager){return  -1;}var datalist=this._load_manager.dataList;if(!datalist){return  -1;}var trlist=this._load_manager.transactionList;var idx=0;var pre_len=datalist.length;var canceledCnt=0;var tritem;while(idx<datalist.length){var dataitem=datalist[idx];if(!dataitem){idx++ ;continue;}var dataitem_handle=dataitem.handle;if(!dataitem_handle){idx++ ;continue;}if(dataitem._is_cancel||dataitem._is_process){idx++ ;pre_len=datalist.length;continue;}if(!is_cancel){dataitem_handle._user_aborted=false;tritem=trlist[idx];if(tritem){var ret=tritem.on_error( -1,"comm_stop_transaction_byesc",nexacro._CommunicationStatusTable.stop_transaction_byesc,"");if(ret){dataitem._is_process=true;dataitem_handle._user_aborted=undefined;idx++ ;continue;}}}dataitem_handle._user_aborted=true;dataitem._is_cancel=true;if(nexacro._Browser=="Runtime"){nexacro._cancelLoad(dataitem_handle);}else{tritem=trlist[idx];nexacro._cancelLoad(dataitem_handle);if(tritem){tritem.on_error(0,"comm_cancel_byuser",nexacro._CommunicationStatusTable.cancel_byuser);}}canceledCnt++ ;if(pre_len==datalist.length){idx++ ;}else{idx=0;pre_len=datalist.length;}}return canceledCnt;};_pForm._dragEnd=function(info){var control_elem=this.getElement();if(control_elem){var stepselector=this.stepselector;if(stepselector){var step_count=control_elem._step_count;var step_index=control_elem._step_index;var direction=info.direction;if(step_count>0){var new_index= -1;if(direction=="L"){new_index=step_index+1;}else if(direction=="R"){new_index=step_index-1;}if(new_index<0||new_index>=step_count){return;}stepselector.set_stepindex(new_index);}}}};_pForm._getDefaultButton=function(){var comps=this.components;if(comps){var comp;for(var i=0;i<comps.length;i++ ){comp=comps[i];if(comp._is_form){var btn=comp._getDefaultButton();if(btn){return btn;}}else if(nexacro._toBoolean(comp.defaultbutton)){return comp;}}}return null;};_pForm._getEscapeButton=function(){var comps=this.components;if(comps){var comp;for(var i=0;i<comps.length;i++ ){comp=comps[i];if(comp._is_form){var btn=comp._getEscapeButton();if(btn){return btn;}}else if(nexacro._toBoolean(comp.escapebutton)){return comp;}}}return null;};_pForm._apply_formurl=function(){this._clear();if(this._url){this.loadForm(this._url,this._async,true);this.set_visible(true);}};_pForm._getAccessibilityWholeReadLabel=function(){var readlabel="";var comp,ar=this._getSortedDecendants(this,true,true);for(var i=0;i<ar.length;i++ ){comp=ar[i];if(comp._isAccessibilityEnable()){var label=comp._getAccessibilityReadLabel(true);if(label){label=label.trim();if(label&&label.length>0){readlabel+=label+" ";}}}}return readlabel;};_pForm._playAccessibilityWholeReadLabel=function(type){if(!nexacro._isDesktop()){return;}var control=this.getElement();if(control){var label=this._getAccessibilityWholeReadLabel();control.notifyAccessibility(label,type);}};_pFormBase._getSortedDecendants=function(p,include_not_tabstop,bAccessibility){if(include_not_tabstop===undefined){include_not_tabstop=false;}var ar=[];var comps=p.components;if(comps){var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){var comp=comps[i];if(!comp||!comp._is_created||!comp.visible||((comp._isEnable&&!comp._isEnable()||!comp.enable)&&(!nexacro._enableaccessibility||nexacro._accessibilitytype!=5))||comp._popup){continue;}if(!bAccessibility&&!include_not_tabstop&&!comp.on_get_prop_tabstop()){continue;}var tabidx=comp._taborder;if(tabidx<0){tabidx=0;}var j=ar.length;while(j>0&&ar[j-1]._taborder>tabidx){ar[j]=ar[j-1];j-- ;}ar[j]=comp;}}return ar;};_pForm._getAsync=function(){return this._async;};delete _pForm;if(!nexacro._InnerForm){nexacro._InnerForm=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Form.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pInnerForm=nexacro._createPrototype(nexacro.Form,nexacro._InnerForm);nexacro._InnerForm.prototype=_pInnerForm;_pInnerForm._type_name="Form";_pInnerForm._is_subcontrol=false;_pInnerForm.on_created_contents=function(win){nexacro.FormBase.prototype.on_created_contents.call(this,win);this._changeUserStatus("contents",true);};_pInnerForm.on_update_position=function(resize_flag,move_flag,update){nexacro.Form.prototype.on_update_position.call(this,resize_flag,move_flag,update);};_pInnerForm.on_changeUserStatus=function(changestatus,value,applyuserstatus){if(value){return changestatus;}return applyuserstatus;};_pInnerForm._on_load=function(obj,url){nexacro.Form.prototype._on_load.call(this,obj,url);if(this.parent){this.parent.applyTransitionEffect();}};_pInnerForm.set_url=function(v){this.parent.set_url(v);};_pInnerForm.loadForm=function(formurl,async,reload,baseurl){var parent_context=this.getParentContext();var is_async;if(async){while(parent_context&&parent_context._is_form){is_async=parent_context._getAsync();if(!parent_context._is_fired_onload&&is_async===false){async=false;break;}parent_context=parent_context.getParentContext();}}if(this._load_manager){var url=nexacro._getFDLLocation(formurl,baseurl);var parent=this.parent;while(parent&&!parent._is_frame){if(parent._is_form){var _p_url=parent._url;if(url==_p_url){trace("[ERROR] can not use same url with parent form");return;}}parent=parent.parent;}this._url=url;this._base_url=nexacro._getBaseUrl(url);if(this._load_manager){this._load_manager.clearAllLoad();}this._clearUserFunctions();this._is_loading=true;if(this.parent._is_frame&&this.parent.form==this){var application=nexacro.getApplication();if(application){application._registerLoadforms(this);}}var service=nexacro._getServiceObject(formurl);if(this.parent._urlchangeeffect){this.parent.beginTransitionEffect(this.parent._urlchangeeffect);this._load_manager._use_transition_effect=true;}this._asyncformload=async;this._load_manager.loadMainModule(url,undefined,async,reload,service);}};_pInnerForm.addChild=function(id,obj){var ret= -1;if(id&&id.length<=0){return  -1;}if(!obj){throw nexacro.MakeReferenceError(this,"reference_not_define",id);}if(this[id]){throw nexacro.MakeNativeError(this,"native_exist_id",id);}if(!obj.id){obj.id=obj.name=id;}else{obj.id=id;}obj.parent=this;obj._refform=this;this[id]=obj;this.all.add_item(id,obj);if(this.visible&&!this._real_visible){obj._real_visible=false;}else{obj._real_visible=this.visible;}if(obj._is_component){ret=this.components.add_item(id,obj);this._child_list.push(obj);if(obj._is_alive&&obj._is_created){this._control_element.appendChildElement(obj.getElement());}}else if(obj instanceof nexacro.BindItem){ret=this.binds.add_item(id,obj);}else{ret=this.objects.add_item(id,obj);}if(obj._is_component){this.parent._destroyTextElement();}return ret;};_pInnerForm.insertChild=function(idx,id,obj){var ret=nexacro.Form.prototype.insertChild.call(this,idx,id,obj);if(ret!= -1){if(obj._is_component){this.parent._destroyTextElement();}}return ret;};_pInnerForm.removeChild=function(id){var ret=nexacro.Form.prototype.removeChild.call(this,id);if(this.parent){this.parent.on_apply_text();}return ret;};_pInnerForm.reload=function(){this.parent.reload();};_pInnerForm.getOwnerFrame=function(){var frame=null;if(this.parent&&!(this.parent instanceof nexacro.Frame)){frame=this.parent.getOwnerFrame();}else{frame=this.parent;}return frame;};_pInnerForm.getParentContext=function(){return this.parent.getParentContext();};_pInnerForm.on_fire_onclick=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){this.parent.on_fire_onclick(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);};_pInnerForm.on_fire_ondblclick=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){this.parent.on_fire_ondblclick(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);};_pInnerForm.on_fire_onhscroll=function(eventid,pos,strType,evtkind){nexacro.Component.prototype.on_fire_onhscroll.call(this,eventid,pos,strType,evtkind);nexacro.Component.prototype.on_fire_onhscroll.call(this.parent,eventid,pos,strType,evtkind);};_pInnerForm.on_fire_onvscroll=function(eventid,pos,strType,evtkind){nexacro.Component.prototype.on_fire_onvscroll.call(this,eventid,pos,strType,evtkind);nexacro.Component.prototype.on_fire_onvscroll.call(this.parent,eventid,pos,strType,evtkind);};_pInnerForm._parseArrangeInfo=nexacro._emptyFn;delete _pInnerForm;}if(!nexacro._CompositeComponent){nexacro._CompositeComponent=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.form=new nexacro._CompositeForm("form",0,0,width,height,null,null,null,null,null,null,this);};var _pCompositeComponent=nexacro._CompositeComponent.prototype=nexacro._createPrototype(nexacro.Component,nexacro._CompositeComponent);_pCompositeComponent._type_name="CompositeComponent";_pCompositeComponent._apply_client_padding=false;_pCompositeComponent._is_simple_control=true;_pCompositeComponent._is_container=true;_pCompositeComponent.accessibilityrole="form";_pCompositeComponent._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pCompositeComponent._getFormPosition=function(){var left=0;var top=0;var width=0;var height=0;width=this._getClientWidth();height=this._getClientHeight();if(!this._is_initcssselector){this._initCSSSelector();}return {left:left,top:top,width:width,height:height};};_pCompositeComponent.getParentContext=function(){return this.parent;};_pCompositeComponent.getOwnerFrame=function(){return this._getOwnerFrame();};_pCompositeComponent._destroyTextElement=function(){};_pCompositeComponent._destroyFormControl=function(){if(this.form){this.form._destroy();this.form=null;}};_pCompositeComponent.on_create_contents=function(){this._load_module();};_pCompositeComponent.on_created_contents=function(win){var form=this.form;if(form._is_loaded&&!form._is_created){form.createComponent();}this._recalcLayout();};_pCompositeComponent._load_module=function(){var refform=this._refform;if(refform){var baseurl=refform._getRefFormBaseUrl();var form=this.form;var module=this._get_form_module();if(module){var url=nexacro._getFDLLocation("CompositeInner.xfdl",baseurl);form.loadModule(url,module);}}};_pCompositeComponent.on_destroy_contents=function(){this._destroyFormControl();};_pCompositeComponent.on_create_contents_command=function(){var str="";return str;};_pCompositeComponent.on_attach_contents_handle=function(win){var form=this.form;if(form._is_loaded&&!form._is_created){form.createComponent();}this._recalcLayout();};_pCompositeComponent.on_change_containerRect=function(width,height){this._recalcLayout();};_pCompositeComponent.on_change_containerPos=function(){};_pCompositeComponent.on_apply_prop_enable=function(v){if(this.form){this.form._setEnable(v);}};_pCompositeComponent.on_get_css_assumedtypename=function(){return this._type_name;};_pCompositeComponent.set_padding=nexacro._emptyFn;_pCompositeComponent.set_scrollbarbarminsize=function(scrollbarbarminsize){if(scrollbarbarminsize!==undefined){scrollbarbarminsize=parseInt(scrollbarbarminsize);if(isNaN(scrollbarbarminsize)){return;}}if(this.scrollbarbarminsize!=scrollbarbarminsize){this.scrollbarbarminsize=scrollbarbarminsize;nexacro.Component.prototype.set_scrollbarbarminsize.call(this.form,scrollbarbarminsize);}};_pCompositeComponent.set_scrollbarbaroutsize=function(scrollbarbaroutsize){if(scrollbarbaroutsize!==undefined){scrollbarbaroutsize=parseInt(scrollbarbaroutsize);if(isNaN(scrollbarbaroutsize)){return;}}if(this.scrollbarbaroutsize!=scrollbarbaroutsize){this.scrollbarbaroutsize=scrollbarbaroutsize;nexacro.Component.prototype.set_scrollbarbaroutsize.call(this.form,scrollbarbaroutsize);}};_pCompositeComponent.set_scrollbardecbuttonsize=function(scrollbardecbuttonsize){if(scrollbardecbuttonsize!==undefined){scrollbardecbuttonsize=parseInt(scrollbardecbuttonsize);if(isNaN(scrollbardecbuttonsize)){return;}}if(this.scrollbardecbuttonsize!=scrollbardecbuttonsize){this.scrollbardecbuttonsize=scrollbardecbuttonsize;nexacro.Component.prototype.set_scrollbardecbuttonsize.call(this.form,scrollbardecbuttonsize);}};_pCompositeComponent.set_scrollbarincbuttonsize=function(scrollbarincbuttonsize){if(scrollbarincbuttonsize!==undefined){scrollbarincbuttonsize=parseInt(scrollbarincbuttonsize);if(isNaN(scrollbarincbuttonsize)){return;}}if(this.scrollbarincbuttonsize!=scrollbarincbuttonsize){this.scrollbarincbuttonsize=scrollbarincbuttonsize;nexacro.Component.prototype.set_scrollbarincbuttonsize.call(this.form,scrollbarincbuttonsize);}};_pCompositeComponent.set_scrollbarsize=function(scrollbarsize){if(scrollbarsize!==undefined){scrollbarsize=parseInt(scrollbarsize);if(isNaN(scrollbarsize)){return;}}if(this.scrollbarsize!=scrollbarsize){this.scrollbarsize=scrollbarsize;nexacro.Component.prototype.set_scrollbarsize.call(this.form,scrollbarsize);}};_pCompositeComponent.set_scrollbartrackbarsize=function(scrollbartrackbarsize){if(scrollbartrackbarsize!==undefined){scrollbartrackbarsize=parseInt(scrollbartrackbarsize);if(isNaN(scrollbartrackbarsize)){return;}}if(this.scrollbartrackbarsize!=scrollbartrackbarsize){this.scrollbartrackbarsize=scrollbartrackbarsize;nexacro.Component.prototype.set_scrollbartrackbarsize.call(this.form,scrollbartrackbarsize);}};_pCompositeComponent.set_scrollbartype=function(scrollbartype){if(this.scrollbartype!=scrollbartype){this.scrollbartype=nexacro.Component.prototype.set_scrollbartype.call(this.form,scrollbartype);}};_pCompositeComponent.set_scrollindicatorsize=function(scrollindicatorsize){if(scrollindicatorsize!==undefined){scrollindicatorsize=parseInt(scrollindicatorsize);if(isNaN(scrollindicatorsize)){return;}}if(this.scrollindicatorsize!=scrollindicatorsize){this.scrollindicatorsize=scrollindicatorsize;nexacro.Component.prototype.set_scrollindicatorsize.call(this.form,scrollindicatorsize);}};_pCompositeComponent.set_scrolltype=function(scrolltype){if(this.scrolltype!=scrolltype){this.scrolltype=nexacro.Component.prototype.set_scrolltype.call(this.form,scrolltype);}};_pCompositeComponent.getFocus=function(){return this.parent?this.parent.getFocus():null;};_pCompositeComponent._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);if(this.form){this.form._on_activate();}return true;};_pCompositeComponent._on_deactivate=function(){nexacro.Component.prototype._on_deactivate.call(this);if(this.form){this.form._on_deactivate();}return true;};_pCompositeComponent._on_bubble_beforeclose=function(root_closing_comp,event_bubbles,fire_comp,refer_comp){return this.parent._on_bubble_beforeclose(root_closing_comp,event_bubbles,fire_comp,refer_comp);};_pCompositeComponent._on_bubble_close=function(event_bubbles,fire_comp,refer_comp){return this.parent._on_bubble_close(event_bubbles,fire_comp,refer_comp);};_pCompositeComponent._clearUserFunctions=nexacro._emptyFn;_pCompositeComponent._loadedForm=nexacro._emptyFn;_pCompositeComponent._closeForm=function(){this._destroyFormControl();};_pCompositeComponent._recalcLayout=function(){var form=this.form;if(form){var pos=this._getFormPosition();form._setPos(pos.left,pos.top);form._setSize(pos.width,pos.height);}};_pCompositeComponent._on_orientationchange=function(orientation){if(this.form){this.form._on_orientationchange(orientation);}};_pCompositeComponent._getComponentsByTaborder=function(){if(!this.form._isEnable()||!this.form._child_list||this.form._child_list.length==0){return null;}return [this.form];};_pCompositeComponent._searchNextTabFocus=function(current,bSearchFromFirst,opt_force_cycle,filter_type){var ret=nexacro.FormBase.prototype._searchNextTabFocus.call(this,current,bSearchFromFirst,opt_force_cycle,filter_type);if(bSearchFromFirst&&ret&&ret[0]===this.form){return this.parent._searchNextTabFocus(this,undefined,undefined,filter_type);}return ret;};_pCompositeComponent._searchPrevTabFocus=function(current,bSearchFromLast,opt_force_cycle,filter_type){var ret=nexacro.FormBase.prototype._searchPrevTabFocus.call(this,current,bSearchFromLast,opt_force_cycle,filter_type);if(bSearchFromLast&&ret&&ret[0]===this.form){return [this];}return ret;};_pCompositeComponent._getTabOrderNext=function(current,direction,filter_type){return nexacro.FormBase.prototype._getTabOrderNext.call(this,current,direction,filter_type);};_pCompositeComponent._getTabOrderFirst=function(filter_type){return nexacro.FormBase.prototype._getTabOrderFirst.call(this,filter_type);};_pCompositeComponent._getTabOrderLast=function(filter_type){return nexacro.FormBase.prototype._getTabOrderLast.call(this,filter_type);};delete _pCompositeComponent;nexacro._CompositeForm=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._InnerForm.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pCompositeForm=nexacro._createPrototype(nexacro._InnerForm,nexacro._CompositeForm);nexacro._CompositeForm.prototype=_pCompositeForm;_pCompositeForm._type_name="Form";_pCompositeForm._is_subcontrol=false;_pCompositeForm.loadModule=function(url,module){this._url=url;this._base_url=nexacro._getBaseUrl(url);this._load_manager.loadMainModuleByScript(url,module);};delete _pCompositeForm;if(nexacro._LoadManager){var __pLoadManager=nexacro._LoadManager.prototype;if(__pLoadManager){__pLoadManager.loadMainModuleByScript=function(url,module){this.main_url=url;this.status=1;this.on_load_main(url,0,module);};}}}}
if(!nexacro.TitleBarControl){nexacro.TitleBarControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Form.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.titleicon=new nexacro._TitleBarIconTextControl("titleicon",0,0,0,0,null,null,null,null,null,null,this);this.minbutton=new nexacro._TitleBarButtonControl("minbutton",0,0,0,0,null,null,null,null,null,null,this);this.maxbutton=new nexacro._TitleBarButtonControl("maxbutton",0,0,0,0,null,null,null,null,null,null,this);this.normalbutton=new nexacro._TitleBarButtonControl("normalbutton",0,0,0,0,null,null,null,null,null,null,this);this.closebutton=new nexacro._TitleBarButtonControl("closebutton",0,0,0,0,null,null,null,null,null,null,this);if(parent&&parent._is_frame&&parent._is_window){this._is_track=false;}else{this._is_track=true;}};var _pTitleBarControl=nexacro._createPrototype(nexacro.Form,nexacro.TitleBarControl);nexacro.TitleBarControl.prototype=_pTitleBarControl;_pTitleBarControl._type_name="TitleBarControl";_pTitleBarControl.minbutton=null;_pTitleBarControl.normalbutton=null;_pTitleBarControl.maxbutton=null;_pTitleBarControl.closebutton=null;_pTitleBarControl.titleicon=null;_pTitleBarControl.buttonsize=undefined;_pTitleBarControl.buttongap=undefined;_pTitleBarControl.showtitleicon=true;_pTitleBarControl._is_scrollable=false;_pTitleBarControl._is_nc_control=true;_pTitleBarControl._is_focus_accept=false;_pTitleBarControl._is_subcontrol=true;_pTitleBarControl._buttonsize=undefined;_pTitleBarControl._buttongap=1;_pTitleBarControl._is_verticalmin=false;_pTitleBarControl._absolute_style=0;_pTitleBarControl._state_openstatus=0;_pTitleBarControl._skip_mobile_tabfocus=true;_pTitleBarControl._setNotifyHandler=function(obj,fnclickminbutton,fnclickmaxbutton,fnclicknormalbutton,fnclickclosebutton,fndblclick){this._notify_target=obj;this._notify_clickminbutton=fnclickminbutton;this._notify_clickmaxbutton=fnclickmaxbutton;this._notify_clicknormalbutton=fnclicknormalbutton;this._notify_clickclosebutton=fnclickclosebutton;this._notify_dblclick=fndblclick;};_pTitleBarControl._unBindEvent=function(){this.minbutton._removeEventHandler("onclick",this._notify_clickminbutton,this._notify_target);this.maxbutton._removeEventHandler("onclick",this._notify_clickmaxbutton,this._notify_target);this.normalbutton._removeEventHandler("onclick",this._notify_clicknormalbutton,this._notify_target);this.closebutton._removeEventHandler("onclick",this._notify_clickclosebutton,this._notify_target);this.titleicon._removeEventHandler("ondblclick",this._notify_dblclick,this._notify_target);this._removeEventHandler("ondblclick",this._notify_dblclick,this._notify_target);};_pTitleBarControl._bindEvent=function(){this.minbutton._setEventHandler("onclick",this._notify_clickminbutton,this._notify_target);this.maxbutton._setEventHandler("onclick",this._notify_clickmaxbutton,this._notify_target);this.normalbutton._setEventHandler("onclick",this._notify_clicknormalbutton,this._notify_target);this.closebutton._setEventHandler("onclick",this._notify_clickclosebutton,this._notify_target);this.titleicon._setEventHandler("ondblclick",this._notify_dblclick,this._notify_target);this._setEventHandler("ondblclick",this._notify_dblclick,this._notify_target);};_pTitleBarControl._on_notify_minbutton=function(obj,fn){this._notify_minbutton=fn;};_pTitleBarControl._on_notify_maxbutton=function(obj,fn){this._notify_maxbutton=fn;};_pTitleBarControl._on_notify_normalbutton=function(obj,fn){this._notify_normalbutton=fn;};_pTitleBarControl._on_notify_closebutton=function(obj,fn){this._notify_closebutton=fn;};_pTitleBarControl.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){var titleicon=this.titleicon;var minbutton=this.minbutton;var maxbutton=this.maxbutton;var normalbutton=this.normalbutton;var closebutton=this.closebutton;normalbutton.set_visible(false);var frame=this.parent;titleicon._is_fiticonsize=frame?frame._is_main:false;titleicon.set_hittesttype(this._hittest_type);titleicon.createComponent();minbutton.createComponent();maxbutton.createComponent();normalbutton.createComponent();closebutton.createComponent();if(this._displaytext){titleicon.on_apply_text(this._displaytext);}}};_pTitleBarControl.on_created_contents=function(win){this._bindEvent();this.on_apply_showtitleicon(this.showtitleicon);this._recalcLayout(this._getClientWidth(),this._getClientHeight());this.titleicon.on_created(win);this.minbutton.on_created(win);this.maxbutton.on_created(win);this.normalbutton.on_created(win);this.closebutton.on_created(win);this._setAccessibilityStatHidden(true);var frame=this.parent;if(frame&&frame._is_window){var _window=frame._getWindow();if(_window){var icon=this.titleicon._getCurrentIcon();nexacro._setWindowHandleIconObject(_window.handle,icon);}}};_pTitleBarControl.on_destroy_contents=function(callremovechild){this._unBindEvent();this._notify_target=null;this._notify_clickmaxbutton=null;this._notify_clickmaxbutton=null;this._notify_clicknormalbutton=null;this._notify_clickclosebutton=null;this._notify_dblclick=null;var titleicon=this.titleicon;var minbutton=this.minbutton;var maxbutton=this.maxbutton;var normalbutton=this.normalbutton;var closebutton=this.closebutton;if(titleicon){titleicon.destroy(callremovechild);this.titleicon=null;}if(minbutton){minbutton.destroy(callremovechild);this.minbutton=null;}if(maxbutton){maxbutton.destroy(callremovechild);this.maxbutton=null;}if(normalbutton){normalbutton.destroy(callremovechild);this.normalbutton=null;}if(closebutton){closebutton.destroy(callremovechild);this.closebutton=null;}if(this._movetrack_animationframe){this._movetrack_animationframe.stop();this._movetrack_animationframe.destroy();}};_pTitleBarControl.on_change_containerRect=function(width,height){if(this._is_created_contents){nexacro.Form.prototype.on_change_containerRect.call(this,width,height);this._recalcLayout(width,height);}};_pTitleBarControl.on_changeStatus=function(){var parent=this.parent;if(parent&&parent._activate==false){return "deactivate";}else{return "enabled";}};_pTitleBarControl.on_apply_status=function(status){var v=(status=="deactivate");if(this.titleicon){this.titleicon._changeStatus("deactivate",v);}if(this.minbutton){this.minbutton._changeStatus("deactivate",v);}if(this.maxbutton){this.maxbutton._changeStatus("deactivate",v);}if(this.normalbutton){this.normalbutton._changeStatus("deactivate",v);}if(this.closebutton){this.closebutton._changeStatus("deactivate",v);}};_pTitleBarControl.set_showtitleicon=function(showtitleicon){showtitleicon=nexacro._toBoolean(showtitleicon);if(this.showtitleicon!=showtitleicon){this.showtitleicon=showtitleicon;if(this._is_created){this.on_apply_showtitleicon(this.showtitleicon);}}};_pTitleBarControl.on_apply_showtitleicon=function(showtitleicon){var titleicon=this.titleicon;if(titleicon){titleicon.set_icon(showtitleicon?null:"none");}};_pTitleBarControl.on_apply_text=function(text){if(this.titleicon){this.titleicon.set_text(text);}};_pTitleBarControl.set_buttongap=function(buttongap){if(this.buttongap!=buttongap){this.buttongap=buttongap;this._buttongap=parseInt(buttongap);if(this._buttongap<0){this._buttongap=0;}if(this._is_created){this._recalcLayout();}}};_pTitleBarControl.set_buttonsize=function(v){if(this.buttonsize!=v){this.buttonsize=v;v=nexacro._toString(v);this._buttonsize=v.trim().split(" ");if(this._is_created){this._recalcLayout();}}};_pTitleBarControl._on_starttrack=function(){if(!this._is_alive){return false;}var ownerframe=this.getOwnerFrame();if(ownerframe){return ownerframe._on_titlebar_starttrack();}return false;};_pTitleBarControl._on_endtrack=function(x,y,dragdata){if(!this._is_alive){return;}var ownerframe=this.getOwnerFrame();var _window=this._getWindow();var wheelZoom=1.0;if(_window&&(_window._wheelZoom!=undefined)){wheelZoom=_window._wheelZoom/100;if(ownerframe.getElement().zoom!=100){wheelZoom=1.0;}}if(ownerframe){ownerframe._on_titlebar_endtrack(x/wheelZoom,y/wheelZoom,dragdata);}};_pTitleBarControl._on_movetrack=function(x,y,dragdata,windowX,windowY){if(!this._is_alive){return;}var ownerframe=this.getOwnerFrame();var _window=this._getWindow();var wheelZoom=1.0;if(_window&&(_window._wheelZoom!=undefined)){wheelZoom=_window._wheelZoom/100;if(ownerframe.getElement().zoom!=100){wheelZoom=1.0;}}if(ownerframe){if(nexacro._SupportAnimationFrame){var callbackfunc=function(){ownerframe._on_titlebar_movetrack(x/wheelZoom,y/wheelZoom,dragdata,windowX,windowY);};if(!this._movetrack_animationframe){var pThis=this;this._movetrack_animationframe=new nexacro.AnimationFrame(pThis,callbackfunc);}else{this._movetrack_animationframe._setCallback(callbackfunc);}this._movetrack_animationframe.start();}else{ownerframe._on_titlebar_movetrack(x/wheelZoom,y/wheelZoom,dragdata,windowX,windowY);}}};_pTitleBarControl._recalcLayout=function(width,height){if(!this.closebutton){return;}if(!width||!height){width=this._getClientWidth();height=this._getClientHeight();}var top=this._getClientTop();var left=this._getClientLeft();var buttonsize=this._buttonsize;var buttonwidth=height;var buttonheight=height;if(buttonsize&&buttonsize.length>0){buttonwidth=nexacro._toInt(buttonsize[0]);buttonheight=nexacro._toInt(buttonsize[buttonsize.length-1]);}buttonwidth=width<buttonwidth?width:buttonwidth;buttonheight=height<buttonheight?height:buttonheight;var buttontop,display_as_minimize=((this._state_openstatus==2)||this._is_verticalmin);if(!this._is_verticalmin){var leftgap=buttonwidth+this._buttongap;buttontop=top+(height-buttonheight)/2;var curleft=width;curleft-=buttonwidth;this.closebutton.move(curleft,buttontop,buttonwidth,buttonheight);curleft-=leftgap;this.maxbutton.move(curleft,buttontop,buttonwidth,buttonheight);if(!display_as_minimize){this.normalbutton.move(curleft,buttontop,buttonwidth,buttonheight);}curleft-=leftgap;this.minbutton.move(curleft,buttontop,buttonwidth,buttonheight);if(display_as_minimize){this.normalbutton.move(curleft,buttontop,buttonwidth,buttonheight);}this.titleicon.move(this._getClientLeft(),top,curleft,height);}else{var topgap=this._buttongap;var buttonleft=left+(width-buttonwidth)/2;buttontop=height-buttonheight;this.closebutton.move(buttonleft,buttontop,buttonwidth,buttonheight);buttontop-=topgap+buttonheight;this.maxbutton.move(buttonleft,buttontop,buttonwidth,buttonheight);if(!display_as_minimize){this.normalbutton.move(buttonleft,buttontop,buttonwidth,buttonheight);}buttontop-=topgap+buttonheight;this.minbutton.move(buttonleft,buttontop,buttonwidth,buttonheight);if(display_as_minimize){this.normalbutton.move(buttonleft,buttontop,buttonwidth,buttonheight);}var curbottom=buttontop;this.titleicon.move(left,this._getClientTop(),width,curbottom);}};_pTitleBarControl._changeOpenStatus=function(cur){var pre=this._prestate_openstatus=this._state_openstatus;this._state_openstatus=cur;if(this._is_verticalmin){cur=2;}if(pre!=cur){var absolute_style=this._absolute_style;switch(cur){case 0:if((absolute_style&0x0001)==0){this.minbutton.set_visible(true);}if((absolute_style&0x0002)==0){this.maxbutton.set_visible(true);}if((absolute_style&0x0008)==0){this.closebutton.set_visible(true);}this.normalbutton.set_visible(false);break;case 1:break;case 2:this.minbutton.set_visible(false);if((absolute_style&0x0002)==0){this.maxbutton.set_visible(true);}if((absolute_style&0x0008)==0){this.closebutton.set_visible(true);}if((absolute_style&0x0004)==0){this.normalbutton.set_visible(true);}break;case 3:if((absolute_style&0x0001)==0){this.minbutton.set_visible(true);}this.maxbutton.set_visible(false);if((absolute_style&0x0008)==0){this.closebutton.set_visible(true);}if((absolute_style&0x0004)==0){this.normalbutton.set_visible(true);}break;}this._recalcLayout(this._getClientWidth(),this._getClientHeight());}};_pTitleBarControl._setVerticalMin=function(v){if(this._is_verticalmin==v){return;}var pre= -1;if(v==false){pre=2;}this._is_verticalmin=v;var real_openstatus=this._state_openstatus;if(pre!=( -1)){this._state_openstatus=pre;}this._changeOpenStatus(real_openstatus);};_pTitleBarControl._setDragMove=function(v,is_windowframe){if(v&&is_windowframe){this._hittest_type="caption";}else{this._hittest_type="none";}this.on_apply_hittesttype();var titleicon=this.titleicon;if(titleicon){titleicon.set_hittesttype(this._hittest_type);}};_pTitleBarControl._setAbsoluteStyle=function(_add,_remove,_apply){this._absolute_style&=~(_remove);this._absolute_style|=_add;if(_apply==undefined||_apply==true){this._applyAbsoluteStyle();}};_pTitleBarControl._applyAbsoluteStyle=function(){var minbutton=this.minbutton;var maxbutton=this.maxbutton;var normalbutton=this.normalbutton;var closebutton=this.closebutton;var absolute_style=this._absolute_style;if(minbutton){if((absolute_style&0x0001)>0){minbutton.set_visible(false);}else if((absolute_style&0x0100)>0){minbutton.set_visible(true);}if((absolute_style&0x0010)>0){minbutton.set_enable(false);}else if((absolute_style&0x1000)>0){minbutton.set_enable(true);}}if(maxbutton){if((absolute_style&0x0002)>0){maxbutton.set_visible(false);}else if((absolute_style&0x0200)>0){maxbutton.set_visible(true);}if((absolute_style&0x0020)>0){maxbutton.set_enable(false);}else if((absolute_style&0x2000)>0){maxbutton.set_enable(true);}}if(normalbutton){if((absolute_style&0x0004)>0){normalbutton.set_visible(false);}else if((absolute_style&0x0400)>0){normalbutton.set_visible(true);}if((absolute_style&0x0040)>0){normalbutton.set_enable(false);}else if((absolute_style&0x4000)>0){normalbutton.set_enable(true);}}if(closebutton){if((absolute_style&0x0008)>0){closebutton.set_visible(false);}else if((absolute_style&0x08)>0){closebutton.set_visible(true);}if((absolute_style&0x0080)>0){closebutton.set_enable(false);}else if((absolute_style&0x8000)>0){closebutton.set_enable(true);}}};delete _pTitleBarControl;}
if(!nexacro.StatusBarControl){nexacro.StatusBarControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Form.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pStatusBarControl=nexacro._createPrototype(nexacro.Form,nexacro.StatusBarControl);nexacro.StatusBarControl.prototype=_pStatusBarControl;_pStatusBarControl._type_name="StatusBarControl";_pStatusBarControl.statustext=null;_pStatusBarControl.progressbar=null;_pStatusBarControl.resizegrip=null;_pStatusBarControl.resizable=false;_pStatusBarControl.progressbardirection="forward";_pStatusBarControl.progressbargap=undefined;_pStatusBarControl.progressbarsize=undefined;_pStatusBarControl._progressbargap=1;_pStatusBarControl._progressbarsize=200;_pStatusBarControl.progressbarsmooth=false;_pStatusBarControl._is_nc_control=true;_pStatusBarControl._is_scrollable=false;_pStatusBarControl._is_subcontrol=true;nexacro.StatusBarControl._default_progressbarwidth=200;nexacro.StatusBarControl._default_progressbarheight=19;nexacro.StatusBarControl._default_progressbargap=1;_pStatusBarControl.set_progressbarsize=function(val){if(this.progressbarsize!=val){this.progressbarsize=val;this._progressbarsize=parseInt(val);if(this._progressbarsize<0){this._progressbarsize=0;}this.on_apply_progressbar();}};_pStatusBarControl.set_progressbargap=function(val){if(this.progressbargap!=val){this.progressbargap=val;this._progressbargap=parseInt(val);if(this._progressbargap<0){this._progressbargap=0;}this.on_apply_progressbar();}};_pStatusBarControl.on_apply_progressbar=function(){var progressbar=this.progressbar;if(progressbar&&progressbar.visible&&this._is_created){this._recalcLayout(this._getClientWidth(),this._getClientHeight());}};_pStatusBarControl.set_progressbardirection=function(val){if(this.progressbardirection!=val){this.progressbardirection=val;this.on_apply_progressbardirection(val);}};_pStatusBarControl.on_apply_progressbardirection=function(v){var progressbar=this.progressbar;if(progressbar){progressbar.set_direction(v);}};_pStatusBarControl.set_progressbarsmooth=function(val){if(this.progressbarsmooth!=val){this.progressbarsmooth=val;this.on_apply_progressbarsmooth(val);}};_pStatusBarControl.on_apply_progressbarsmooth=function(v){var progressbar=this.progressbar;if(progressbar){progressbar.set_smooth(v);}};_pStatusBarControl.set_resizable=function(val){val=nexacro._toBoolean(val);if(this.resizable!=val){this.resizable=val;this.on_apply_resizable(val);}};_pStatusBarControl._createResizeGrip=function(){var resizegrip=this.resizegrip=new nexacro._Icon("resizegrip",0,0,0,0,null,null,null,null,null,null,this);resizegrip._on_starttrack=this._on_starttrack;resizegrip._on_movetrack=this._on_movetrack;resizegrip._on_endtrack=this._on_endtrack;resizegrip._setControl();resizegrip.createComponent();return resizegrip;};_pStatusBarControl.on_apply_resizable=function(resizable){var resizegrip=this.resizegrip;var ownerframe=this.getOwnerFrame();if(this._is_created&&resizable&&!resizegrip){resizegrip=this._createResizeGrip();resizegrip.on_created(this._getWindow());}if(ownerframe&&resizegrip){resizegrip._is_track=resizable;resizegrip.set_cursor(resizable?"se-resize":"arrow");var resizegrip_controlelem=resizegrip.getElement();if(resizegrip_controlelem){resizegrip_controlelem.setElementHittestType(resizable&&ownerframe._is_window?"resizingborder_bottomright":undefined);}}this._recalcLayout(this._getClientWidth(),this._getClientHeight());};_pStatusBarControl.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){var statustext=this.statustext=new nexacro.Static("statustext",0,0,0,0,null,null,null,null,null,null,this);statustext._setControl();if(this._displaytext){statustext.set_text(this._displaytext);}statustext.createComponent();var progressbar=this.progressbar=new nexacro.ProgressBar("progressbar",0,0,0,0,null,null,null,null,null,null,this);progressbar._setControl();progressbar.createComponent();this._createResizeGrip();}};_pStatusBarControl.on_created_contents=function(win){this.on_apply_resizable(this.resizable);this.statustext.on_created(win);this.progressbar.on_created(win);this.resizegrip.on_created(win);};_pStatusBarControl.on_destroy_contents=function(callremovechild){var statustext=this.statustext;var progressbar=this.progressbar;var resizegrip=this.resizegrip;if(statustext){statustext.destroy(callremovechild);this.statustext=null;}if(progressbar){progressbar.destroy(callremovechild);this.progressbar=null;}if(resizegrip){resizegrip.destroy(callremovechild);this.resizegrip=null;}};_pStatusBarControl.on_change_containerRect=function(width,height){if(this._is_created_contents){nexacro.Form.prototype.on_change_containerRect.call(this,width,height);this._recalcLayout(width,height);}};_pStatusBarControl.on_apply_text=function(text){if(this.statustext){this.statustext.set_text(text);}};_pStatusBarControl._on_load_resizegripicon=function(){};_pStatusBarControl._recalcLayout=function(width,height){var left=width;var top=this._getClientTop();var resizegrip=this.resizegrip;if(resizegrip){var resizegripwidth=0;if(this.resizable){var padding=resizegrip._getCurrentStylePadding();var border=resizegrip._getCurrentStyleBorder();var icon=resizegrip.icon?resizegrip.icon:resizegrip._getCSSStyleValue("icon");if(border){resizegripwidth=border._getBorderWidth();}if(padding){resizegripwidth+=padding.left+padding.right;}if(icon){var iconsize=nexacro._getImageSize(icon.value,this._on_load_resizegripicon,this);if(iconsize){resizegripwidth+=iconsize.width;}}left=width-resizegripwidth;}resizegrip.move(left,top,resizegripwidth,height);}var progressbar=this.progressbar;if(progressbar){var progressbarwidth=this._progressbarsize;left-=(this._progressbargap+progressbarwidth);progressbar.move(left,top,progressbarwidth,height);}var statustext=this.statustext;if(statustext){statustext.move(this._getClientLeft(),top,left,height);}};_pStatusBarControl._on_starttrack=function(){var ownerframe=this.parent.getOwnerFrame();ownerframe._on_border_starttrack(this.cursor);};_pStatusBarControl._on_endtrack=function(x,y,dragdata){var ownerframe=this.parent.getOwnerFrame();ownerframe._on_border_endtrack(x,y,dragdata);};_pStatusBarControl._on_movetrack=function(x,y,dragdata){var ownerframe=this.parent.getOwnerFrame();ownerframe._on_border_movetrack(x,y,dragdata);};delete _pStatusBarControl;}
if(!nexacro.Frame){"use strict";var _process=true;nexacro.Frame=function(id,left,top,width,height,right,bottom,parent,is_main){nexacro.FormBase.call(this,id,left,top,width,height,right,bottom,null,null,null,null,parent);this._frames=new nexacro.Collection();if(parent){this._is_top_frame=(parent._type_name=="Application");}this._is_main=is_main;};var _pFrame=nexacro._createPrototype(nexacro.FormBase,nexacro.Frame);nexacro.Frame.prototype=_pFrame;_pFrame._type_name="Frame";_pFrame.titlebar=null;_pFrame.statusbar=null;_pFrame.openalign="";_pFrame.openstatus="normal";_pFrame.showcascadestatustext=false;_pFrame.showcascadetitletext=true;_pFrame.showstatusbar=false;_pFrame.showtitlebar=true;_pFrame.showtitleicon=true;_pFrame.statustext="";_pFrame.titletext="";_pFrame.topmost=false;_pFrame.statusbarheight=undefined;_pFrame.titlebarheight=undefined;_pFrame.titlebartype="normal";_pFrame.titlebarbuttonsize=undefined;_pFrame.titlebarbuttongap=undefined;_pFrame.progressbardirection=undefined;_pFrame.progressbargap=undefined;_pFrame.progressbarsmooth=undefined;_pFrame.progressbarsize=undefined;_pFrame._event_list={"onactivate":1,"ondeactivate":1,"onbeforeclose":1,"onclose":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"ondevicebuttondown":1,"ondevicebuttonpush":1,"ondevicebuttonup":1,"onsyscommand":1,"onorientationchange":1};_pFrame._state_openstatus=0;_pFrame._is_click_openstatus=false;_pFrame._is_verticalmin=false;_pFrame._restore_position=null;_pFrame._starttrack_position=null;_pFrame._resizemode=null;_pFrame._defaulttitleheight=20;_pFrame._defaultstatusheight=20;_pFrame._titlebarheight=undefined;_pFrame._statusbarheight=undefined;_pFrame._is_frameset=false;_pFrame._is_frame=true;_pFrame._is_form=false;_pFrame._window=null;_pFrame._activate=false;_pFrame._window_type= -1;_pFrame.accessibilityrole="none";_pFrame._is_scrollable=false;_pFrame.set_padding=function(){};_pFrame.set_titlebarheight=function(titlebarheight){if(this.titlebarheight!=titlebarheight){this.titlebarheight=titlebarheight;this._titlebarheight=this._getAppliedTitleHeight(parseInt(titlebarheight));if(this._isShowTitleBar()){this.on_apply_titlebarheight(this._titlebarheight);}}};_pFrame.on_apply_titlebarheight=function(titlebarheight){var control_elem=this._control_element;if(control_elem){control_elem.setTitleBarControl(this.titlebar,titlebarheight);}};_pFrame.set_statusbarheight=function(statusbarheight){if(this.statusbarheight!=statusbarheight){this.statusbarheight=statusbarheight;this._statusbarheight=this._getAppliedStatusHeight(parseInt(statusbarheight));this.on_apply_statusbarheight(this._statusbarheight);}};_pFrame.on_apply_statusbarheight=function(statusbarheight){var control_elem=this._control_element;if(control_elem){control_elem.setStatusBarControl(this.statusbar,statusbarheight);}};_pFrame.set_titlebartype=function(titlebartype){if(this.titlebartype!=titlebartype){this.titlebartype=titlebartype;this.on_apply_titlebartype(titlebartype);}};_pFrame.on_apply_titlebartype=function(){};_pFrame.set_titlebarbuttonsize=function(titlebarbuttonsize){if(this.titlebarbuttonsize!=titlebarbuttonsize){this.titlebarbuttonsize=titlebarbuttonsize;this.on_apply_titlebarbuttonsize(titlebarbuttonsize);}};_pFrame.on_apply_titlebarbuttonsize=function(titlebarbuttonsize){var titlebar=this.titlebar;if(titlebar){titlebar.set_buttonsize(titlebarbuttonsize);}};_pFrame.set_titlebarbuttongap=function(titlebarbuttongap){titlebarbuttongap=parseInt(titlebarbuttongap);if(this.titlebarbuttongap!=titlebarbuttongap){this.titlebarbuttongap=titlebarbuttongap;this.on_apply_titlebarbuttongap(titlebarbuttongap);}};_pFrame.on_apply_titlebarbuttongap=function(titlebarbuttongap){var titlebar=this.titlebar;if(titlebar){titlebar.set_buttongap(titlebarbuttongap);}};_pFrame.set_progressbardirection=function(progressbardirection){if(this.progressbardirection!=progressbardirection){this.progressbardirection=progressbardirection;this.on_apply_progressbardirection(progressbardirection);}};_pFrame.on_apply_progressbardirection=function(progressbardirection){var statusbar=this.statusbar;if(statusbar){statusbar.set_progressbardirection(progressbardirection);}};_pFrame.set_progressbargap=function(progressbargap){progressbargap=parseInt(progressbargap);if(this.progressbargap!=progressbargap){this.progressbargap=progressbargap;this.on_apply_progressbargap(progressbargap);}};_pFrame.on_apply_progressbargap=function(progressbargap){var statusbar=this.statusbar;if(statusbar){statusbar.set_progressbargap(progressbargap);}};_pFrame.set_progressbarsmooth=function(progressbarsmooth){progressbarsmooth=nexacro._toBoolean(progressbarsmooth);if(this.progressbarsmooth!=progressbarsmooth){this.progressbarsmooth=progressbarsmooth;this.on_apply_progressbarsmooth(progressbarsmooth);}};_pFrame.on_apply_progressbarsmooth=function(progressbarsmooth){var statusbar=this.statusbar;if(statusbar){statusbar.set_progressbarsmooth(progressbarsmooth);}};_pFrame.set_progressbarsize=function(progressbarsize){progressbarsize=parseInt(progressbarsize);if(this.progressbarsize!=progressbarsize){this.progressbarsize=progressbarsize;this.on_apply_progressbarsize(progressbarsize);}};_pFrame.on_apply_progressbarsize=function(progressbarsize){var statusbar=this.statusbar;if(statusbar){statusbar.set_progressbarsize(progressbarsize);}};_pFrame._on_window_loaded=nexacro._emptyFn;_pFrame.on_created_contents=function(win){var titlebar=this.titlebar;if(this._isShowTitleBar()&&titlebar){this._applyTitleBarProperties();titlebar.on_created(win);}var statusbar=this.statusbar;if(statusbar){this._applyStatusBarProperties();statusbar.on_created(win);}};_pFrame.createComponent=function(bCreateOnly){var parent_elem=null;if(this._is_window==false){parent_elem=this.parent._control_element;if(!parent_elem){return false;}}else{if(this._window){nexacro._checkWindowActive(this._window);}}var control_elem=this._control_element;if(!control_elem){if(this._unique_id.length<=0){this._unique_id=(this.parent&&this.parent._unique_id)?(this.parent._unique_id+"."+this.id):(this.id?this.id:"");}control_elem=this.on_create_control_element(parent_elem);this._initControl(control_elem);this._initContents(control_elem);if(nexacro._enableaccessibility){this.on_apply_accessibility();}if(!bCreateOnly&&parent_elem&&parent_elem.handle){this.on_created();}}return true;};_pFrame._isShowTitleBar=function(){return this.showtitlebar;};_pFrame._isShowStatusBar=function(){return this.showstatusbar;};_pFrame.on_create_contents=function(){this.titlebar=this._createTitleBar();if(this._isShowTitleBar()){this._setNotifyTitleBar();}if(this._isShowStatusBar()){this.statusbar=this._createStatusBar();}if(!nexacro._is_loaded_application){this._on_focus(true);}};_pFrame.on_created=function(_window){var is_created=this._is_created;var titlebar=this.titlebar;if(this._isShowTitleBar()&&titlebar){this._applyTitleBarProperties();}var statusbar=this.statusbar;if(statusbar){this._applyStatusBarProperties();}if(nexacro._isEmbedded){if(this.form){if(this.form._control_element){this.form._on_load(this,this._url);}}nexacro.FormBase.prototype.on_created.call(this,_window);}else{nexacro.FormBase.prototype.on_created.call(this,_window);if(this.form){if(this.form._control_element){this.form._on_load(this,this._url);}}}if(!is_created&&this._state_openstatus!=0){var cur_enableevent=this.enableevent;var cur_openstatus=this.openstatus;this.enableevent=false;this.openstatus="normal";this._state_openstatus=0;this._on_syscommand(this._control_element,cur_openstatus);this.enableevent=cur_enableevent;}var control_elem=this._control_element;if(control_elem){control_elem._setResizable(this._canDragResize());}if(this._is_window){this._applyTitleText();this._applyStatusText();}};_pFrame.on_destroy_contents=function(callremovechild){if(this.statusbar){this.statusbar.destroyComponent(callremovechild);this.statusbar=null;}if(this.titlebar){this.titlebar.destroyComponent(callremovechild);this.titlebar=null;}};_pFrame._createTitleBar=function(){var titlebar=this.titlebar;if(!titlebar){titlebar=new nexacro.TitleBarControl("titlebar",0,0,this._adjust_width,0,null,null,null,null,null,null,this);}if(this._isTopFrame()){titlebar._hittest_type="caption";}else{if(this&&this._is_frame&&this._is_window&&this._dragmovetype!=0){titlebar._hittest_type="caption";}}titlebar.createComponent(true);return titlebar;};_pFrame._setNotifyTitleBar=function(){var titlebar=this.titlebar;if(titlebar){titlebar._setNotifyHandler(this,this._on_minbutton_click,this._on_maxbutton_click,this._on_normalbutton_click,this._on_closebutton_click,this._on_titlebar_dblclick);}};_pFrame._createStatusBar=function(){var statusbar;if(this._isTopFrame()){statusbar=new nexacro._MainStatusBarControl("statusbar",0,0,this._adjust_width,0,null,null,null,null,null,null,this);}else{statusbar=new nexacro.StatusBarControl("statusbar",0,0,this._adjust_width,0,null,null,null,null,null,null,this);}statusbar.createComponent(true);return statusbar;};_pFrame._applyStatusBarProperties=function(){var statusbar=this.statusbar;if(statusbar){var value=this.progressbardirection;if(value){statusbar.set_progressbardirection(value);}value=this.progressbargap;if(value!=undefined){statusbar.set_progressbargap(value);}value=this.progressbarsmooth;if(value){statusbar.set_progressbarsmooth(value);}value=this.progressbarsize;if(value!=undefined){statusbar.set_progressbarsize(value);}value=this._getStatusText(this.showcascadestatustext);if(value){statusbar.set_text(value);}value=this._statusbarheight!==undefined?this._statusbarheight:(this._statusbarheight=this._getAppliedStatusHeight(this._defaultstatusheight));if(value){this.on_apply_statusbarheight(value);}statusbar.set_resizable(this._canDragResize());}};_pFrame._applyTitleBarProperties=function(){var titlebar=this.titlebar;if(titlebar){var value=this.titlebarbuttonsize;if(value!==undefined){titlebar.set_buttonsize(value);}titlebar.set_showtitleicon(this.showtitleicon);value=this.titlebarbuttongap;if(value!==undefined){titlebar.set_buttongap(value);}value=this._getTitleText(this.showcascadetitletext);if(value){titlebar.set_text(value);}value=this._titlebarheight!==undefined?this._titlebarheight:(this._titlebarheight=this._getAppliedTitleHeight(this._defaulttitleheight));if(value){this.on_apply_titlebarheight(value);}this._resetTitleAbsoluteStyle();}};_pFrame.on_changeStatus=function(changestatus,value,applystatus,currentstatus,currentuserstatus){if(changestatus=="mouseover"){return currentstatus;}if(changestatus=="deactivate"){this._changeStateActivate(value?false:true);return value?"deactivate":"activate";}else{if(changestatus=="disabled"&&value==true){return "disabled";}if(changestatus=="focused"){if(value!=false){var win=this._getWindow();if(win._is_active_window==false){this._changeStateFocus(true);return "deactivate";}else{this._changeStateActivate(true);}}}else{this._changeStateActivate(true);}return "enable";}};_pFrame.on_apply_status=function(status,userstatus){if(status=="deactivate"){this._changeStateActivate(false);}else if(status=="enabled"||status=="focused"||userstatus=="pushed"){this._changeStateActivate(true);}};_pFrame.setFocus=function(bResetScroll){var win=this._window;if(this._is_window&&win&&win.handle){win._setFocus();}else{if(this._active_frame){this._active_frame.setFocus();}else if(this.form){this.form._setFocus();}}};_pFrame._update_position=function(bsize,bmove){var old_left=this._left;var old_top=this._top;var old_width=this._adjust_width;var old_height=this._adjust_height;var update=false;if(this._is_window&&this._window){this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,0,0);}else{if(this.parent){this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,this.parent._getClientWidth(),this.parent._getClientHeight());}else{this._adjustPosition(this.left,this.top,this.right,this.bottom,this.width,this.height,0,0);}}if(this._adjust_width!=old_width||this._adjust_height!=old_height){bsize=true;if(old_width==0||old_height==0){update=true;}}if(this._left!=old_left||this._top!=old_top){bmove=true;}this.on_update_position(bsize,bmove);if(update){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pFrame._adjustPosition=function(left,top,right,bottom,width,height,parentWidth,parentHeight){var val=null;var bRtl=this._isRtl();if(this._is_window&&this._window){width=parentWidth=width?width:nexacro._getWindowHandleClientWidth(this._window.handle);height=parentHeight=height?height:nexacro._getWindowHandleClientHeight(this._window.handle);}else{var parent=this.parent;if(parent){parentWidth=parent._getClientWidth();parentHeight=parent._getClientHeight();}}var _left=left;var _right=right;for(var i=0;i<6;i++ ){switch(i){case 0:val=_left;if(_left!=null){if(i%2==0){val=this._convToPixel(_left,parentWidth);}else{val=this._convToPixel(_left,parentHeight);}}if(isNumber(val)||val===null){this.left=left;this._left=val;this._adjust_left=val;}break;case 1:val=top;if(top!=null){if(i%2==0){val=this._convToPixel(top,parentWidth);}else{val=this._convToPixel(top,parentHeight);}}if(isNumber(val)||val===null){this.top=top;this._top=val;this._adjust_top=val;}break;case 2:val=_right;if(_right!=null){if(i%2==0){val=this._convToPixel(_right,parentWidth);}else{val=this._convToPixel(_right,parentHeight);}}if(isNumber(val)||val===null){this.right=right;this._right=val;}break;case 3:val=bottom;if(bottom!=null){if(i%2==0){val=this._convToPixel(bottom,parentWidth);}else{val=this._convToPixel(bottom,parentHeight);}}if(isNumber(val)||val===null){this.bottom=bottom;this._bottom=val;}break;case 4:val=width;if(width!=null){if(i%2==0){val=this._convToPixel(width,parentWidth);}else{val=this._convToPixel(width,parentHeight);}}if(isNumber(val)||val===null){this.width=width;this._width=val;}break;case 5:val=height;if(height!=null){if(i%2==0){val=this._convToPixel(height,parentWidth);}else{val=this._convToPixel(height,parentHeight);}}if(isNumber(val)||val===null){this.height=height;this._height=val;}break;}}this._adjust_width=this._width!=null?this._width:parentWidth-this._left-this._right;this._adjust_height=this._height!=null?this._height:parentHeight-this._top-this._bottom;if(this._is_window){this._adjust_top=this._adjust_left=0;}else{if(this._left!=null||this._right!=null){this._adjust_left_ltr=this._adjust_left=this._left!=null?this._left:parentWidth-this._right-this._adjust_width;}else{this._adjust_left_ltr=this._adjust_left=0;}if(this._top!=null||this._bottom!=null){this._adjust_top=this._top!=null?this._top:parentHeight-this._bottom-this._adjust_height;}else{this._adjust_top=0;}if(bRtl){this._adjust_left_ltr=this._right!=null?this._right:parentWidth-this._left-this._adjust_width;}}};_pFrame._waitCursor=function(wait_flag,context){var owner_frame=this.getOwnerFrame();if(owner_frame){owner_frame._waitCursor(wait_flag,context);}};_pFrame.on_get_accessibility_label=function(){return this._getTitleText(this.showcascadetitletext);};_pFrame.on_update_position=function(resize_flag,move_flag,update){var ret=nexacro.FormBase.prototype.on_update_position.call(this,resize_flag,move_flag,update);if(this._is_window&&nexacro._Browser=="Runtime"){var _window=this._window;if(_window){if(!this._is_initcssselector){this._initCSSSelector();}if(resize_flag){_window.setSize(this._adjust_width,this._adjust_height);}if(move_flag){_window.moveTo(this._left,this._top);}}}return ret;};_pFrame.set_left=function(propVal){if(!this._canMove()){return;}return nexacro.FormBase.prototype.set_left.call(this,propVal);};_pFrame.set_top=function(propVal){if(!this._canMove()){return;}return nexacro.FormBase.prototype.set_top.call(this,propVal);};_pFrame.set_right=function(propVal){if(!this._canMove()){return;}return nexacro.FormBase.prototype.set_right.call(this,propVal);};_pFrame.set_bottom=function(propVal){if(!this._canMove()){return;}return nexacro.FormBase.prototype.set_bottom.call(this,propVal);};_pFrame.set_width=function(propVal){if(!this._canResize()){return;}return nexacro.FormBase.prototype.set_width.call(this,propVal);};_pFrame.set_height=function(propVal){if(!this._canResize()){return;}return nexacro.FormBase.prototype.set_height.call(this,propVal);};_pFrame.set_openstatus=function(v){if(this.openstatus!=v){switch(v){case "minimize":case "maximize":break;case "normal":default:if(this._state_openstatus==2||this._state_openstatus==3){v="restore";}break;}this._on_syscommand(this._control_element,v);}};_pFrame.set_showcascadestatustext=function(v){var showcascadestatustext=nexacro._toBoolean(v);if(this.showcascadestatustext!=showcascadestatustext){this.showcascadestatustext=showcascadestatustext;this._applyStatusText();}};_pFrame.set_showcascadetitletext=function(v){var showcascadetitletext=nexacro._toBoolean(v);if(this.showcascadetitletext!=showcascadetitletext){this.showcascadetitletext=showcascadetitletext;this._applyTitleText();}};_pFrame.set_showstatusbar=function(v){var showstatusbar=nexacro._toBoolean(v);if(this.showstatusbar!=showstatusbar){this.showstatusbar=showstatusbar;this.on_apply_showstatusbar(showstatusbar);}};_pFrame.on_apply_showstatusbar=function(bshow){var statusbar=this.statusbar;if(bshow){if(!statusbar){if(this._isShowStatusBar()){statusbar=this.statusbar=this._createStatusBar();this._applyStatusBarProperties();statusbar.on_created();}}else{statusbar.set_visible(true);this.on_apply_statusbarheight(this._statusbarheight);}}else{if(statusbar){statusbar.set_visible(false);this.on_apply_statusbarheight(0);}}};_pFrame.set_showtitlebar=function(v){var showtitlebar=nexacro._toBoolean(v);if(this.showtitlebar!=showtitlebar){this.showtitlebar=showtitlebar;this.on_apply_showtitlebar(showtitlebar);}};_pFrame.on_apply_showtitlebar=function(bshow){var titlebar=this.titlebar;if(bshow){if(this._isShowTitleBar()){if(!titlebar||!titlebar._is_created){titlebar=this.titlebar=this._createTitleBar();}if(!titlebar._is_created){this._setNotifyTitleBar();this._applyTitleBarProperties();titlebar.on_created();}}titlebar.set_visible(true);this.on_apply_titlebarheight(this._titlebarheight);}else{if(titlebar){titlebar.set_visible(false);this.on_apply_titlebarheight(0);}}this._applyDragMoveType();};_pFrame.set_showtitleicon=function(v){var showtitleicon=nexacro._toBoolean(v);if(this.showtitleicon!=showtitleicon){this.showtitleicon=showtitleicon;this.on_apply_showtitleicon(showtitleicon);}};_pFrame.on_apply_showtitleicon=function(showtitleicon){var titlebar=this.titlebar;if(titlebar){titlebar.set_showtitleicon(showtitleicon);}};_pFrame.set_statustext=function(v){if(this.statustext!=v){this.statustext=v;this._applyStatusText();}};_pFrame.set_titletext=function(v){if(this.titletext!=v){this.titletext=v;this._applyTitleText();}};_pFrame.set_topmost=function(v){var topmost=nexacro._toBoolean(v);if(this.topmost!=topmost){this.topmost=topmost;if(!this._is_window){return;}var _window=this._getWindow();if(_window){nexacro._setWindowTopmost(_window.handle,topmost);}}};_pFrame._applyElementVisible=function(v){this._control_element.setElementDisplay(v?"":"none");};_pFrame.set_visible=function(v){nexacro.FormBase.prototype.set_visible.call(this,v);v=nexacro._toBoolean(v);if(this._is_window&&nexacro._Browser=="Runtime"){var _window=this._getWindow();if(_window){nexacro._setPopupWindowHandleVisible(_window.handle,v);}}if(this.visible!=v){var parent=this.parent;if(parent&&parent._is_frameset&&this._state_openstatus==3&&!v){var nextframe=parent._getNextOrderFrame(this);if(nextframe){nextframe._changeOpenStatus(3);}}}};_pFrame.alert=function(strText,strCaption,strType){nexacro._alert(this,strText,strCaption,strType);};_pFrame.confirm=function(strText,strCaption,strType){return nexacro._confirm(this,strText,strCaption,strType);};_pFrame.getHandle=function(){return  -1;};_pFrame.getOwnerFrame=function(){if(this.parent&&this.parent._is_frame){return this.parent;}return null;};_pFrame.addChild=function(id,obj){if(id&&id.length<=0){return  -1;}if(!obj){throw nexacro.MakeReferenceError(this,"reference_not_define",id);}if(this[id]){throw nexacro.MakeNativeError(this,"native_exist_id",id);}if(!obj._is_frame){throw nexacro.MakeTypeError(this,"type_invalid",id);}obj.parent=this;if(!obj.id){obj.id=obj.name=id;}else{obj.id=id;}this[id]=obj;this.all.add_item(id,obj);var idx=this._frames.add_item(id,obj);if(this._is_frameset){this.frames.add_item(id,obj);this._zordermap.add_item(id,obj);if(this._max_frame&&this._max_frame!=obj&&obj._state_openstatus==3){this._max_frame._changeOpenStatus(0);}if(this._state_openstatus==2||this._is_autorecalc_frame==true){var control_elem=this._control_element;if(control_elem){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}}return idx;};_pFrame.insertChild=function(idx,id,obj){if(id&&id.length<=0){return  -1;}if(!obj){throw nexacro.MakeReferenceError(this,"reference_not_define",id);}if(this[id]){throw nexacro.MakeNativeError(this,"native_exist_id",id);}if(!obj._is_frame){throw nexacro.MakeTypeError(this,"type_invalid",id);}obj.parent=this;if(!obj.id){obj.id=obj.name=id;}else{obj.id=id;}this[id]=obj;this.all.add_item(id,obj);idx=this._frames.insert_item(idx,id,obj);if(this._is_frameset){this.frames.insert_item(idx,id,obj);if(this._is_autorecalc_frame==true){var control_elem=this._control_element;if(control_elem){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}}return idx;};_pFrame.removeChild=function(id){if(id&&id.length<=0){return null;}if(!this[id]){return null;}var obj=this[id];if(obj){var _window=this._getWindow();var nextframe=null;if(this._is_frameset){nextframe=this._getNextOrderFrame(obj);}if(obj._is_frame){if(obj._activate==true){obj._changeStateActivate(false);if(this._is_alive){if(_window.id==obj._getWindow().id){_window._removeFromCurrentFocusPath(obj,true);_window._last_focused_elem=this._control_element;}}}if(_window.id!=obj._getWindow().id){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){if(obj._window_type==5){nexacro._unregisterPopupFrame(id,_window,undefined,true);}else{nexacro._unregisterPopupFrame(id,_window);}}else{nexacro._unregisterPopupFrame(id,_window);}nexacro._getLocalStorageforService();}}this._frames.remove_item(id);delete this[id];this.all.remove_item(id);if(this._is_frameset){this.frames.remove_item(id);this._zordermap.remove_item(id);}if(this._is_alive&&obj._control_element){obj._control_element._removeFromContainer();}if(this._is_frameset){var maximized=false;if(this._max_frame==obj){this._max_frame=null;maximized=true;}if(this._active_frame==obj){this._active_frame=null;}if(maximized&&nextframe){nextframe._changeOpenStatus(3);}}if(this._is_frameset&&(this._state_openstatus==2||this._is_autorecalc_frame==true)){var control_elem=this._control_element;if(control_elem){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}if(nextframe){nextframe.setFocus();}if(this._window_type<0){this._applyTitleText();}}return obj;};_pFrame.move=function(left,top,width,height,right,bottom){if(!this._canMove()){return;}this._move(left,top,width,height,right,bottom);};_pFrame._move=function(left,top,width,height,right,bottom){var old_left=this._left;var old_top=this._top;var old_width=this._adjust_width;var old_height=this._adjust_height;var bsize=false,bmove=false;if(this._is_window&&this._window){this._adjustPosition(left,top,right,bottom,width,height,null,null);}else{if(this.parent){this._adjustPosition(left,top,right,bottom,width,height,this.parent._getClientWidth(),this.parent._getClientHeight());}else{this._adjustPosition(left,top,right,bottom,width,height,null,null);}}if(this._adjust_width!=old_width||this._adjust_height!=old_height){bsize=true;}if(this._left!=old_left||this._top!=old_top){bmove=true;}this.on_update_position(bsize,bmove,bmove?false:this._isRtl(this.parent));};_pFrame.resize=function(w,h){if(!this._canResize()){return;}return nexacro.FormBase.prototype.resize.call(this,w,h);};_pFrame._on_titlebar_dblclick=function(obj,e){if(this.resizable==false){return;}switch(this._state_openstatus){case 0:this._on_maxbutton_click();break;case 2:case 3:this._on_normalbutton_click();break;}};_pFrame._on_titlebar_starttrack=function(){if(!this._canDragMove()){this._starttrack_position=null;return false;}this._starttrack_position={left:this._adjust_left_ltr,top:this._adjust_top,width:this._adjust_width,height:this._adjust_height};var owner_frame=this.getOwnerFrame();if(owner_frame&&owner_frame._is_frameset){owner_frame._on_child_starttrack(this);}};_pFrame._on_titlebar_endtrack=function(x,y,dragdata){if(this._starttrack_position==null){return;}var owner_frame=this.getOwnerFrame();if(owner_frame&&owner_frame._is_frameset){owner_frame._on_child_endtrack(this,x,y,dragdata);}delete this._starttrack_position;};_pFrame._on_titlebar_movetrack=function(x,y,dragdata,windowX,windowY){var _pos=this._starttrack_position;if(_pos==null){return;}if(!this._is_window&&(windowX!=undefined&&windowY!=undefined)){var mainframe;var _win=this._getWindow();if(_win){mainframe=_win.frame;}mainframe=mainframe?mainframe:nexacro.getApplication().mainframe;var mainframe_left=nexacro._toInt(mainframe.left);var mainframe_top=nexacro._toInt(mainframe.left);var mainframe_width=nexacro._toInt(mainframe._adjust_width);var mainframe_height=nexacro._toInt(mainframe._adjust_height);var winX=(windowX?windowX:0)+mainframe_left;var winY=(windowY?windowY:0)+mainframe_top;var r=mainframe_left+mainframe_width;var b=mainframe_top+mainframe_height;if(!(mainframe_left<=winX&&r>=winX&&mainframe_top<=winY&&b>=winY)){return;}}if(!this._is_window){this._move(_pos.left+x,_pos.top+y,_pos.width,_pos.height);}else if(this._is_window&&(this._window_type==5||this._window_type==2)){var winPos=this._getWindow();this._move(winPos.left+x,winPos.top+y,_pos.width,_pos.height);}var owner_frame=this.getOwnerFrame();if(owner_frame&&owner_frame._is_frameset){owner_frame._on_child_movetrack(this,x,y,dragdata);}};_pFrame._on_border_starttrack=function(resize_cursor){if(!this._canDragResize()){this._starttrack_position=null;return false;}this._starttrack_position={left:this._adjust_left,top:this._adjust_top,width:this._adjust_width,height:this._adjust_height};this._resizemode=resize_cursor;if(this.form){this.form._on_focus(true,"lbuttondown");}};_pFrame._on_border_endtrack=function(x,y,dragdata){if(this._starttrack_position==null){return;}this._resizemode=null;delete this._starttrack_position;};_pFrame._on_border_movetrack=function(x,y,dragdata){if(this._starttrack_position==null){return;}var _window=this._getWindow();if(_window&&(_window._wheelZoom!=undefined)){var wheelZoom=_window._wheelZoom/100;x=x/wheelZoom;y=y/wheelZoom;}var left,top,width,height;left=this._starttrack_position.left;top=this._starttrack_position.top;width=this._starttrack_position.width;height=this._starttrack_position.height;var minmaxinfo=this._getMinMaxInfo();if(this._resizemode.value=="n-resize"||this._resizemode.value=="nw-resize"||this._resizemode.value=="ne-resize"){top+=y;height-=y;if(height<minmaxinfo.cy){top-=(minmaxinfo.cy-height);height=minmaxinfo.cy;}}if(this._resizemode.value=="s-resize"||this._resizemode.value=="sw-resize"||this._resizemode.value=="se-resize"){height+=y;if(height<minmaxinfo.cy){height+=(minmaxinfo.cy-height);}}if(this._resizemode.value=="w-resize"||this._resizemode.value=="nw-resize"||this._resizemode.value=="sw-resize"){left+=x;width-=x;if(width<minmaxinfo.cx){left-=(minmaxinfo.cx-width);width=minmaxinfo.cx;}}if(this._resizemode.value=="e-resize"||this._resizemode.value=="ne-resize"||this._resizemode.value=="se-resize"){width+=x;if(width<minmaxinfo.cx){width+=(minmaxinfo.cx-width);}}this._move(left,top,width,height);};_pFrame.on_fire_sys_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,canvasX,canvasY,screenX,screenY,event_bubbles,fire_comp,refer_comp){this._changeStateActivate(true);};_pFrame._on_minbutton_click=function(obj,e){this._is_click_openstatus=true;this._on_syscommand(this._control_element,"minimize",undefined,this,obj);this._is_click_openstatus=false;};_pFrame._on_maxbutton_click=function(obj,e){this._is_click_openstatus=true;this._on_syscommand(this._control_element,"maximize",undefined,this,obj);this._is_click_openstatus=false;};_pFrame._on_normalbutton_click=function(obj,e){this._is_click_openstatus=true;this._on_syscommand(this._control_element,"restore",undefined,this,obj);this._is_click_openstatus=false;};_pFrame._on_closebutton_click=function(obj,e){var confirm_message=this._on_beforeclose();if(this._checkAndConfirmClose(confirm_message)==false){return;}this._on_close();var owner_frame=this.getOwnerFrame();var callremovechild=true;if(owner_frame){owner_frame.removeChild(this.id);callremovechild=false;if(owner_frame._control_element){owner_frame.on_change_containerRect(owner_frame._getClientWidth(),owner_frame._getClientHeight());}}else if(this._window&&this._window._parentwindowforopen&&this._window_type==2){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){nexacro._unregisterPopupFrame(this.id,this._window._parentwindowforopen,undefined,true);}}if(this._is_window&&this._window&&this._window._is_alive){this._window.destroy();}else{this._destroy(callremovechild);}if(this._control_element){this._control_element.destroy();}this._control_element=null;};_pFrame._on_beforeclose=function(root_closing_comp){if(!root_closing_comp){root_closing_comp=this;}var msg="";var child_msg;if(this.form){var form_msg=this.form._on_beforeclose(root_closing_comp);msg=this.form._appendBeforeCloseMsg(msg,form_msg);}if(this.frames){var frames=this.frames;var len=frames.length;for(var i=0;i<len;i++ ){child_msg=frames[i]._on_beforeclose(root_closing_comp);msg=this._appendBeforeCloseMsg(msg,child_msg);}}if(this.frame){child_msg=this.frame._on_beforeclose(root_closing_comp);msg=this._appendBeforeCloseMsg(msg,child_msg);}var self_msg=this._on_bubble_beforeclose(root_closing_comp);msg=this._appendBeforeCloseMsg(msg,self_msg);return msg;};_pFrame._on_close=function(){if(this.form){this.form._on_close();}if(this.frames){var frames=this.frames;var len=frames.length;for(var i=0;i<len;i++ ){if(frames[i]){if(this._getWindow()!=frames[i]._getWindow()){continue;}frames[i]._on_close();}}}if(this.frame){this.frame._on_close();}this._on_bubble_close();return true;};_pFrame._canMove=function(){if(this._state_openstatus!=0){return false;}return true;};_pFrame._canDragMove=function(){if(!this._canMove()){return false;}if(this._dragmovetype==0){return false;}if(!this._is_window){if(this._window_type==1||this._window_type==4){return true;}var owner_frame=this.getOwnerFrame();if(owner_frame){if(owner_frame._on_child_starttrack==undefined){return false;}}}return true;};_pFrame._canResize=function(){if(this._state_openstatus!=0){return false;}return true;};_pFrame._canDragResize=function(){if(nexacro._isTouchInteraction){return false;}if(!this._canResize()){return false;}if(nexacro._Browser!="Runtime"&&this._is_window){return false;}if(this.resizable==false){return false;}var owner_frame=this.getOwnerFrame();if(owner_frame&&!this._is_window&&(this._window_type!=1&&this._window_type!=4)){if(owner_frame._is_autorecalc_frame){return false;}}return true;};_pFrame._procSysCommand=function(systemcommand){var statevalue= -1;switch(systemcommand){case "restore":statevalue=1;break;case "minimize":statevalue=2;break;case "maximize":statevalue=3;break;}if(this._is_window&&this._window){if(statevalue!=( -1)){this._window._procSysCommand(statevalue);}}if(statevalue==1){if(this._is_window&&this._window&&this._state_openstatus==2){systemcommand=["normal","restore","minimize","maximize"][this._prestate_openstatus];statevalue=this._prestate_openstatus;}else{systemcommand="normal";statevalue=0;}}if(statevalue!=( -1)){this.openstatus=systemcommand;this._changeOpenStatus(statevalue);}};_pFrame._on_syscommand=function(elem,systemcommand,event_bubbles,fire_comp,refer_comp){if(event_bubbles===undefined){if(!refer_comp){refer_comp=this;}}if(this.visible&&this._isEnable()&&this.enableevent){event_bubbles=this.on_fire_syscommand(this,systemcommand);if(event_bubbles===false){return false;}}if((event_bubbles!==false)&&this.parent&&!this.parent._is_application&&!this.parent._is_form){var ret=this.parent._on_syscommand(elem,systemcommand,false,fire_comp?fire_comp:this,refer_comp);if(ret==false){return false;}}if(fire_comp&&fire_comp!=this){return true;}this._procSysCommand(systemcommand);};_pFrame._on_activate=function(){nexacro.FormBase.prototype._on_activate.call(this);if(this.form){this.form._on_activate();}if(this.titlebar){this.titlebar._changeStatus("deactivate",false);}return true;};_pFrame._on_deactivate=function(){if(this.form){this.form._on_deactivate();}nexacro.FormBase.prototype._on_deactivate.call(this);if(this.titlebar){this.titlebar._changeStatus("deactivate",true);}return true;};_pFrame._on_orientationchange=function(orientation){this.on_fire_onorientationchange(orientation);var form=this.form;if(form){form._on_orientationchange(orientation);}var frames=this.frames;if(frames){var len=frames.length;for(var i=0;i<len;i++ ){if(frames[i]){if(this._getWindow()!=frames[i]._getWindow()){continue;}frames[i]._on_orientationchange(orientation);}}}var frame=this.frame;if(frame){frame._on_orientationchange(orientation);}return true;};_pFrame._getRootLayerFrame=function(){var frame=this;while(frame){if(frame._is_window){return frame;}if(frame._window_type==1||frame._window_type==4){return frame;}if(frame.getOwnerFrame()){frame=frame.getOwnerFrame();}else{break;}}return frame;};_pFrame._isRootLayerFrame=function(){if(this._is_window){return true;}if(this._window_type==1||this._window_type==4){return true;}return false;};_pFrame.on_fire_syscommand=function(obj,systemcommand){var evt,ret;if(this.onsyscommand&&this.onsyscommand._has_handlers){evt=new nexacro.SysCommandEventInfo(obj,"onsyscommand",systemcommand);ret=this.onsyscommand._fireCheckEvent(this,evt);if(!ret){return false;}}if(this.form&&this.form.onsyscommand&&this.form.onsyscommand._has_handlers){evt=new nexacro.SysCommandEventInfo(obj,"onsyscommand",systemcommand);ret=this.form.onsyscommand._fireCheckEvent(this.form,evt);if(!ret){return false;}}return true;};_pFrame._applyDragMoveType=nexacro._emptyFn;_pFrame.lookup=nexacro._emptyFn;_pFrame.lookupSetter=nexacro._emptyFn;_pFrame.lookupFunc=nexacro._emptyFn;_pFrame._setVerticalMin=function(v){if(this._is_verticalmin==v){return;}this._is_verticalmin=v;var control_elem=this._control_element;var titlebar=this.titlebar;if(control_elem){control_elem._is_verticalmin=v;if(titlebar){control_elem.bringToFrontElement(titlebar.getElement());}}if(titlebar){titlebar._setVerticalMin(v);}};_pFrame._resetTitleAbsoluteStyle=function(){var titlebar=this.titlebar;if(!titlebar){return;}var _style=0;var owner_frame=this.getOwnerFrame();var is_modal=(this._window_type==1||this._window_type==4);if(!this.resizable){if(this._isNested()){_style|=0x0020;}else{_style|=0x0001|0x0002;}}else{_style|=0x0100|0x0200;}if(owner_frame&&!this._isRootLayerFrame()){if(owner_frame._isTopFrame()){_style|=0x0010|0x0020|0x0040;}if(owner_frame.fullframemaximize==false){_style|=0x0001;}}if(is_modal){_style|=0x0001;if(!this.resizable){_style|=0x0002;}}titlebar._setAbsoluteStyle(_style,0xffff);};_pFrame._getMinMaxInfo=function(){var cx=110,cy=0;var border=this._getCSSStyleValue("border",this._status,this._userstatus);if(border){cx+=border._getBorderWidth();cy+=border._getBorderHeight();}if(this._isShowTitleBar()){cy+=this._titlebarheight;}if(this._isShowStatusBar()){cy+=this._statusbarheight;}return {cx:cx,cy:cy};};_pFrame._isTopFrame=function(){return (this._is_top_frame);};_pFrame._getWindow=function(){if(this._is_window){return this._window;}var parent=this.parent;if(parent){return parent._getWindow();}return nexacro._findWindow(nexacro._getMainWindowHandle());};_pFrame._isEnable=function(){return nexacro.FormBase.prototype._isEnable.call(this);};_pFrame._isNested=function(){return !this._is_window;};_pFrame._getTitleText=function(brecursive){return this.titletext;};_pFrame._applyTitleText=function(){if(this._control_element){var cascade=this.showcascadetitletext;var titletext=this._getTitleText(cascade);var titlebar=this.titlebar;if(titlebar){titlebar.set_text(titletext);}if(this._isNested()){var parent=this.parent;if(parent&&parent._is_frame){parent._applyTitleText();}}if(this._is_window){this._window._setTitleText(titletext);}}};_pFrame._applyStatusText=function(){if(this._control_element){var cascade=this.showcascadestatustext;var statustext=this._getStatusText(cascade);var statusbar=this.statusbar;if(statusbar){statusbar.set_text(statustext);}if(this._isNested()){var parent=this.parent;if(parent&&parent._is_frame){parent._applyStatusText();}}if(this._is_window){this._window._setStatusText(statustext);}}};_pFrame._changeOpenStatus=function(cur){var pre=this._prestate_openstatus=this._state_openstatus;this._state_openstatus=cur;if(cur==1){return;}if(pre!=cur){var owner_frame=this.getOwnerFrame();var control_elem=this._control_element;if(pre==2){this._setVerticalMin(false);}if(pre==3&&!this._is_window){if(owner_frame&&owner_frame._is_frame==true&&owner_frame._is_frameset==true){owner_frame._max_frame=null;}}if(pre==0&&(cur==2||cur==3)){if(!this._is_window){if(this._restore_position){this._restore_position=null;}if((owner_frame&&owner_frame._is_frameset&&!owner_frame._is_autorecalc_frame)||(this._window_type==1||this._window_type==4)){this._restore_position={left:this.left,top:this.top,width:this.width,height:this.height,right:this.right,bottom:this.bottom};}}if(control_elem){control_elem._setResizable(false);}}if((pre==2||pre==3)&&cur==0){if(!this._is_window){var restore=this._restore_position;if(restore){if(pre==2||this._window_type==1||this._window_type==4||(owner_frame&&owner_frame.restorechildpositiontype!="keepmaximizeposition")){this._move(restore.left,restore.top,restore.width,restore.height,restore.right,restore.bottom);}this._restore_position=null;}}if(control_elem){control_elem._setResizable(this._canDragResize());}}if(cur==3&&!this._is_window){if(owner_frame&&owner_frame._is_frame==true&&owner_frame._is_frameset==true){if(owner_frame._max_frame&&owner_frame._max_frame!=this){owner_frame._max_frame._changeOpenStatus(0);}owner_frame._max_frame=this;}else if(this._window_type==1||this._window_type==4){var win=this._getWindow();this._move(0,0,win.clientWidth,win.clientHeight);}}var titlebar=this.titlebar;if(titlebar){titlebar._changeOpenStatus(cur);}if(this._prestate_openstatus!=this._state_openstatus){if(owner_frame){var ownerframe_elem=owner_frame.getElement();if(ownerframe_elem){owner_frame.on_change_containerRect(owner_frame._getClientWidth(),owner_frame._getClientHeight());}}}if(cur==3&&!this._is_window){if(owner_frame&&owner_frame._is_frameset==true){this.setFocus();}}this.openstatus=["normal","restore","minimize","maximize"][cur];}};_pFrame._changeStateActivate=function(cur){if(this._activate==false&&cur==true){this._activate=cur;if(this._control_element){var owner_frame=this.getOwnerFrame();if(owner_frame){var _win=this._getWindow();var owner_win=owner_frame._getWindow();if(_win==owner_win&&this._window_type!=1){owner_frame._changeStateActivate(cur,this);}}this._applyTitleText();this._applyStatusText();}this._on_activate();}else if(this._activate==true&&cur==false){this._activate=cur;this._on_deactivate();}};_pFrame._changeStateFocus=function(cur){if(this._activate==false&&cur==true){if(this._control_element){var owner_frame=this.getOwnerFrame();if(owner_frame){var _win=this._getWindow();var owner_win=owner_frame._getWindow();if(_win==owner_win&&this._window_type!=1){owner_frame._changeStateFocus(cur,this);}}this._applyTitleText();this._applyStatusText();}}};_pFrame._getAppliedTitleHeight=function(h){if(h<0){return 0;}return nexacro._appliedTitleBarHeight(this,h);};_pFrame._getAppliedStatusHeight=function(h){if(h<0){return 0;}return nexacro._appliedStatusBarHeight(this,h);};_pFrame._getWaitComponentElement=nexacro._emptyFn;_pFrame._accessibilityModalLock=nexacro._emptyFn;_pFrame._accessibilityModalUnLock=nexacro._emptyFn;nexacro.MainFrame=function(id,left,top,width,height,right,bottom,parent){nexacro.Frame.call(this,id,left,top,width,height,right,bottom,parent,true);this._openalign=null;this._window=new nexacro._Window(id,null,true);};var _pMainFrame=nexacro._createPrototype(nexacro.Frame,nexacro.MainFrame);nexacro.MainFrame.prototype=_pMainFrame;_pMainFrame._type_name="MainFrame";_pMainFrame.frame=null;_pMainFrame.resizable=true;_pMainFrame.layered=false;_pMainFrame._ref_comm=0;_pMainFrame._defaulttitleheight=30;_pMainFrame._defaultstatusheight=30;_pMainFrame._is_window=true;_pMainFrame._is_autorecalc_frame=true;_pMainFrame.accessibilityrole="none";_pMainFrame.getActiveFrame=function(){return this.frame;};_pMainFrame.on_createBodyFrame=nexacro._emptyFn;_pMainFrame.createComponent=function(){this.createWindow();if(nexacro._locale){this._on_apply_locale(nexacro._locale);}return nexacro.Frame.prototype.createComponent.call(this);};_pMainFrame.createWindow=function(){var _win=this._window;if(_win==null){_win=this._window=new nexacro._Window(this.name,null,true);}_win.create(null,this.name,this._width,this._height,this._left,this._top,this.resizable);_win.attachFrame(this,false);_win._setSystemMenuResizable(this.resizable);this._setSize(nexacro._getMainWindowWidth(_win),nexacro._getMainWindowHeight(_win));};_pMainFrame.createBodyFrame=function(){this.on_createBodyFrame();};_pMainFrame.on_create_contents=function(){nexacro.Frame.prototype.on_create_contents.call(this);if(this.frame){this.frame._setPos(0,0);this.frame._setSize(this._getClientWidth(),this._getClientHeight());this.frame.createComponent();this.frame._changeOpenStatus(3);}};_pMainFrame.on_created_contents=function(win){nexacro.Frame.prototype.on_created_contents.call(this,win);if(this.frame){this.frame.on_created(win);}var control_element=this._control_element;if(control_element){control_element.setElementRtl(nexacro._rtl);}var width=this._adjust_width;var height=this._adjust_height;var after_align_pos=this._getOpenAlignPos(this._getWindow(),this._adjust_left,this._adjust_top,width,height);if(after_align_pos){this._move(after_align_pos.left,after_align_pos.top,width,height);}if(control_element){nexacro._refreshWindowRegion(win.handle,control_element.handle);}};_pMainFrame.destroyComponent=function(){if(this._waitcomp){this._waitcomp.destroy();this._waitcomp=null;}this._openalign=null;if(nexacro._com_waiting){nexacro._com_waiting=false;}if(this._window&&this._window._is_alive){this._window.destroy();this._window=null;}else if(this._is_alive){nexacro.Frame.prototype.destroyComponent.call(this);}return true;};_pMainFrame.on_destroy_contents=function(){nexacro.Frame.prototype.on_destroy_contents.call(this);if(this.frame){this.frame.destroyComponent();this.frame=null;}};_pMainFrame._on_deactivate=function(){var window=this._getWindow();if(window){window._keydown_element=null;}return nexacro.Frame.prototype._on_deactivate.call(this);};_pMainFrame.on_change_containerPos=function(left,top){var frame=this.frame;if(frame){frame._setPos(0,0);}};_pMainFrame.on_change_containerRect=function(width,height){var frame=this.frame;if(frame){frame._setSize(width,height);}};_pMainFrame.on_update_position=function(resize_flag,move_flag,update){var ret=nexacro.FormBase.prototype.on_update_position.call(this,resize_flag,move_flag,update);if(this._is_window&&(nexacro._Browser=="Runtime"||(nexacro._allow_default_pinchzoom&&!nexacro._isDesktop()))){var _window=this._window;if(_window){if(resize_flag){if(nexacro._isDesktop()){_window.setSize(this._adjust_width,this._adjust_height);}}if(move_flag){_window.moveTo(this._left,this._top);}}}return ret;};_pMainFrame._isShowTitleBar=function(){return nexacro._isShowTitleBar(this,this.showtitlebar);};_pMainFrame._isShowStatusBar=function(){return nexacro._isShowStatusBar(this,this.showstatusbar);};_pMainFrame._waitCursor=function(wait_flag,context){if(this._window){var waitcomp=this._waitcomp;if(wait_flag==true){if(this._ref_comm==0){nexacro._com_waiting=true;if(waitcomp==null){waitcomp=this._waitcomp=new nexacro._WaitControl("waitwindow",0,0,0,0,null,null,null,null,null,null,this);waitcomp.createComponent();waitcomp.on_created();}var waitcursor_imgurl=nexacro._getLoadingImageUrl();waitcomp.setImage(waitcursor_imgurl);this._window._updateWrapper(true);this._window._cancelEvent();this._window._blockImeInput(true);waitcomp.show();}waitcomp._addContext(context);this._ref_comm++ ;}else{this._window._updateWrapper(false);if(this._ref_comm>0){this._ref_comm-- ;}if(waitcomp){waitcomp._removeContext(context);if(this._ref_comm<=0){this._ref_comm=0;nexacro._com_waiting=false;this._window._blockImeInput(false);waitcomp.hide();}}}}};_pMainFrame.set_visible=function(v){if(v===undefined||v===null){return;}v=nexacro._toBoolean(v);if(this.visible!=v){nexacro.Component.prototype.set_visible.call(this,v);var _win=this._getRootWindow();if(_win&&_win.handle){nexacro._setPopupWindowHandleVisible(_win.handle,v);}}};_pMainFrame.set_openalign=function(v){this.openalign=v;if(this._openalign==null||(this._openalign&&this._openalign.value!=v)){this._openalign=nexacro.AlignObject(v);this.on_apply_prop_openalign(this._openalign);}};_pMainFrame.set_resizable=function(v){var resizable=nexacro._toBoolean(v);if(this.resizable!=resizable){this.resizable=resizable;this._resetTitleAbsoluteStyle();var control_elem=this._control_element;if(control_elem){control_elem._setResizable(this._canDragResize());}var win=this._window;if(win){win._setSystemMenuResizable(resizable);}}};_pMainFrame.set_layered=function(v){v=nexacro._toBoolean(v);if(this.layered!=v){this.layered=v;}};_pMainFrame.on_apply_prop_openalign=function(){var openalign=this._openalign;if(!openalign&&this._is_created){var left=this._adjust_left;var top=this._adjust_top;var width=this._adjust_width;var height=this._adjust_height;var after_align_pos=this._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){this._move(after_align_pos.left,after_align_pos.top,width,height);}}};_pMainFrame.on_apply_borderRadius=function(borderRadius){nexacro.Component.prototype.on_apply_borderRadius.call(this,borderRadius);var control_element=this._control_element;var window=this._window;if(control_element&&window){nexacro._refreshWindowRegion(window.handle,control_element.handle);}};_pMainFrame._getParentEnable=function(v){return true;};_pMainFrame.on_apply_prop_enable=function(v){var frame=this.frame;if(frame){frame._setEnable(v);}};_pMainFrame._on_beforeclose=function(root_closing_comp){if(!root_closing_comp){root_closing_comp=this;}var msg=nexacro.Frame.prototype._on_beforeclose.call(this,root_closing_comp);var application=nexacro.getApplication();if(application){var application_msg=application.on_fire_onbeforeexit();msg=this._appendBeforeCloseMsg(msg,application_msg);}return msg;};_pMainFrame._on_syscommand=function(elem,systemcommand,event_bubbles,fire_comp,refer_comp){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){if(this._inProcSysCommand===true){return;}if(this._iscallfromresize!==true){this.on_fire_syscommand(this,systemcommand);}if(fire_comp&&fire_comp!=this){return true;}this._inProcSysCommand=true;this._procSysCommand(systemcommand);this._inProcSysCommand=false;}else{this.on_fire_syscommand(this,systemcommand);if(fire_comp&&fire_comp!=this){return true;}this._procSysCommand(systemcommand);}};_pMainFrame._on_closebutton_click=function(obj,e){var application=nexacro.getApplication();if(application){application.exit();}};_pMainFrame._getOpenAlignPos=function(parent_win,left,top,width,height){var openalign=this._openalign;if(openalign){return nexacro._getWindowRectforOpenAlign(openalign.halign,openalign.valign,parent_win.left,parent_win.top,left,top,width,height);}return null;};_pMainFrame._changeStateActivate=function(cur){if(cur==false){var frame=this.frame;if(frame){frame._changeStateActivate(false);}}nexacro.Frame.prototype._changeStateActivate.call(this,cur);};_pMainFrame._getTitleText=function(brecursive){var titletext;titletext=this.titletext;if(brecursive){var frame=this.frame;if(frame){var subtitletext=frame._getTitleText(true);if(subtitletext.length>0){if(titletext.length>0){titletext+=" - ";}titletext+=subtitletext;}}}return titletext;};_pMainFrame._getStatusText=function(brecursive){var statustext;statustext=this.statustext;if(brecursive){var frame=this.frame;if(frame){var substatustext=frame._getStatusText(true);if(substatustext.length>0){if(statustext.length>0){statustext+=" - ";}statustext+=substatustext;}}}return statustext;};_pMainFrame._getWaitComponentElement=function(){var waitComp=this._waitcomp;if(waitComp){return waitComp.getElement();}return null;};_pMainFrame._on_apply_locale=function(v){var frame=this.frame;if(frame){frame._on_apply_locale(v);}};nexacro.ChildFrame=function(id,left,top,width,height,right,bottom,url,parent){nexacro.Frame.call(this,id,left,top,width,height,right,bottom,parent);this.titlebar=new nexacro.TitleBarControl("titlebar",0,0,this._adjust_width,0,null,null,null,null,null,null,this);this._openalign=null;if(url){this.set_formurl(url);}};var _pChildFrame=nexacro._createPrototype(nexacro.Frame,nexacro.ChildFrame);nexacro.ChildFrame.prototype=_pChildFrame;_pChildFrame._type_name="ChildFrame";_pChildFrame.opener=null;_pChildFrame.form=null;_pChildFrame.autosize=true;_pChildFrame.resizable=false;_pChildFrame.layered=false;_pChildFrame.showontaskbar=null;_pChildFrame.dragmovetype="normal";_pChildFrame.overlaycolor=null;_pChildFrame._ref_comm=0;_pChildFrame._waitcomp=null;_pChildFrame._window_type=0;_pChildFrame._dragmovetype=1;_pChildFrame._is_popup_frame=false;_pChildFrame._is_loadform_failed=false;_pChildFrame._init_openstatus=null;_pChildFrame._close_callback=null;_pChildFrame._close_argument=undefined;_pChildFrame.widget=false;nexacro.ChildFrame._default_overlaycolor=nexacro.BackgroundObject("rgba(0,0,0,0.5)");_pChildFrame.on_apply_prop_openalign=function(){};_pChildFrame.on_apply_prop_enable=function(v){if(this.form){this.form._setEnable(v);}};_pChildFrame.set_overlaycolor=function(val){this.overlaycolor=val;if(val){if(this._overlaycolor==null||this._overlaycolor.value!=val){var background=nexacro.BackgroundObject(val);this._overlaycolor=background;this.on_apply_overlaycolor(background);}}else{if(this._overlaycolor){this._overlaycolor=null;this.on_apply_overlaycolor(null);}}};_pChildFrame.on_apply_overlaycolor=function(overlaycolor){var modal_overlay_elem=this._modal_overlay_elem;if(modal_overlay_elem){modal_overlay_elem.setElementBackground(overlaycolor);}};_pChildFrame.on_create_contents=function(){nexacro.Frame.prototype.on_create_contents.call(this);if(this.form){this.form._setPos(0,0);this.form._setSize(this._getClientWidth(),this._getClientHeight());this.form.createComponent();}};_pChildFrame.destroyComponent=function(callremovechild){if(this._window_type==1||this._window_type==4){this._setModalUnlock();this._runCallback();if(this._window_type==4){var _win=this._getWindow();var _virtual_handle=this._virtual_handle;nexacro._unblockScript(_win._handle,_virtual_handle);this._virtual_handle=null;}}else if(this._window_type==5){this._setModalUnlock();}if(this._waitcomp){this._waitcomp.destroy();this._waitcomp=null;}this._openalign=null;if(nexacro._com_waiting){nexacro._com_waiting=false;}if(this._window&&this._window._is_alive){this._window.destroy();this._window=null;return true;}else{return nexacro.Frame.prototype.destroyComponent.call(this,callremovechild);}};_pChildFrame.on_destroy_contents=function(callremovechild){if(this._overlaycolor){this._overlaycolor=null;}if(this._waitcomp){this._waitcomp.destroy();this._waitcomp=null;}nexacro.Frame.prototype.on_destroy_contents.call(this,callremovechild);if(this._variables){var len=this._variables.length;for(var i=0;i<len;i++ ){delete this[this._variables[i]];}}if(this.form){this.form.destroyComponent(callremovechild);this.form=null;}};_pChildFrame._unregisterPopupFrame=function(win,closedpopupframeid){if(this._window_type==2){nexacro._unregisterPopupFrame(closedpopupframeid,win,true);}};_pChildFrame._runCallback=function(){var callback=this._close_callback;if(callback){if(typeof (callback)=="string"){if(this.opener){var _call_callback_fn=this.opener[callback];if(_call_callback_fn){_call_callback_fn.call(this.opener,this.name,this._close_argument);}}}else if(typeof (callback)=="function"){callback.call(this.opener,this.name,this._close_argument);}}};_pChildFrame.on_created_contents=function(win){var left,top,calculated_size,width,height,after_align_pos,recalculated_pos;if(this._is_window&&this._window){var window=this._window;win=window;var delayedwindowpos=this._delayed_window_pos;if(delayedwindowpos&&window.handle){if(nexacro._OS=="Windows"){if(this._window_type==5&&this.form&&this.form._is_loaded==true&&window._prepared_flag==false){left=delayedwindowpos.left;top=delayedwindowpos.top;calculated_size=this._getAutosizedFrameSize(true);width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}recalculated_pos=this._recalcModalPosition(left,top,width,height);window.moveTo(delayedwindowpos.left,delayedwindowpos.top);this._move(delayedwindowpos.left,delayedwindowpos.top,recalculated_pos.width,recalculated_pos.height);}else{window.setSize(delayedwindowpos.left,delayedwindowpos.top);}}else{window.moveTo(delayedwindowpos.left,delayedwindowpos.top);window.setSize(delayedwindowpos.width,delayedwindowpos.height);if(this._window_type==5&&this.form&&this.form._is_loaded==true&&window._prepared_flag==false){this._move(delayedwindowpos.left,delayedwindowpos.top,delayedwindowpos.width,delayedwindowpos.height);}}delete this._delayed_window_pos;}if(window.handle){window._setSystemMenuResizable(this.resizable);}}else if((this._window_type==1||this._window_type==4)&&this.form&&this.autosize){left=this._adjust_left;top=this._adjust_top;calculated_size=this._getAutosizedFrameSize(true);width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}recalculated_pos=this._recalcModalPosition(left,top,width,height);this._move(recalculated_pos.left,recalculated_pos.top,recalculated_pos.width,recalculated_pos.height);}nexacro.Frame.prototype.on_created_contents.call(this,win);if(!this._formurl){this._changeStateActivate(true);}this._createForm();};_pChildFrame.on_change_containerPos=function(left,top){if(this.form){this.form._setPos(0,0);}};_pChildFrame.on_change_containerRect=function(width,height){if(this.form){this.form._setSize(width,height);}if(this.titlebar){this.titlebar._update_position(false,true);}};_pChildFrame._isShowTitleBar=function(){return nexacro._isShowTitleBar(this,this.showtitlebar);};_pChildFrame._isShowStatusBar=function(){return nexacro._isShowStatusBar(this,this.showstatusbar);};_pChildFrame.createComponent=function(bCreateOnly){if(this._window_type!=1&&this._window_type!=4){return nexacro.Frame.prototype.createComponent.call(this,bCreateOnly);}var modal_overlay_elem=this._modal_overlay_elem;var parent_elem=modal_overlay_elem;var control_elem=this._control_element;if(!control_elem){if(this._unique_id.length<=0){this._unique_id=this.parent._unique_id?(this.parent._unique_id+"."+this.id):(this.id?this.id:"");}control_elem=this.on_create_control_element(parent_elem);this._initControl(control_elem);this._initContents(control_elem);if(!bCreateOnly&&parent_elem&&parent_elem.handle){this.on_created();}}return true;};_pChildFrame._checkValidLayout=function(){if(this.form!=null){this.form._checkValidLayout();}};_pChildFrame._waitCursor=function(wait_flag,context){if(this._isNested()){return nexacro.Frame.prototype._waitCursor.call(this,wait_flag,context);}if(this._window){var waitcomp=this._waitcomp;if(wait_flag==true){if(waitcomp==null){waitcomp=this._waitcomp=new nexacro._WaitControl("waitwindow",0,0,0,0,null,null,null,null,null,null,this);waitcomp.createComponent();waitcomp.on_created(this._window);}this._window._updateWrapper(true);if(this._ref_comm==0){nexacro._com_waiting=true;var waitcursor_imgurl=nexacro._getLoadingImageUrl();waitcomp.setImage(waitcursor_imgurl);this._window._cancelEvent();this._window._blockImeInput(true);waitcomp.show();}waitcomp._addContext(context);this._ref_comm++ ;}else{this._window._updateWrapper(false);if(this._ref_comm>0){this._ref_comm-- ;}if(waitcomp){waitcomp._removeContext(context);if(this._ref_comm<=0){this._ref_comm=0;nexacro._com_waiting=false;this._window._blockImeInput(false);waitcomp.hide();}}}}};_pChildFrame.set_autosize=function(v){if(this.autosize!=v){this.autosize=nexacro._toBoolean(v);}};_pChildFrame.set_dragmovetype=function(v){if(this.dragmovetype!=v){switch(v){case "all":this.dragmovetype=v;this._dragmovetype=2;break;case "normal":this.dragmovetype=v;this._dragmovetype=1;break;case "none":this.dragmovetype=v;this._dragmovetype=0;break;}this._applyDragMoveType();}};_pChildFrame.set_openalign=function(v){this.openalign=v;if(this._openalign==null||(this._openalign&&this._openalign.value!=v)){this._openalign=nexacro.AlignObject(v);}};_pChildFrame.set_formurl=function(url){var realurl=nexacro._getFDLLocation(url);if(this._formurl!=realurl){if(this.form&&this.form._control_element){var confirm_message=this._on_beforeclose();if(this._checkAndConfirmClose(confirm_message)==false){return;}this._on_close();}this.formurl=url;this._formurl=realurl;this._is_loadform_failed=false;if(this._is_created){this._createForm();}}};_pChildFrame.set_resizable=function(v){var resizable=nexacro._toBoolean(v);if(this.resizable!=resizable){this.resizable=resizable;this._resetTitleAbsoluteStyle();if(this._control_element){this._control_element._setResizable(this._canDragResize());}if(this._window){this._window._setSystemMenuResizable(resizable);}}};_pChildFrame.set_layered=function(v){var layered=nexacro._toBoolean(v);if(this.layered!=layered){this.layered=layered;nexacro._on_apply_layered(this,this.layered);}};_pChildFrame.set_showontaskbar=function(v){var showontaskbar=nexacro._toBoolean(v);if(this.showontaskbar!=showontaskbar){this.showontaskbar=showontaskbar;}};_pChildFrame.set_widget=function(v){var widget=nexacro._toBoolean(v);if(this.widget!=widget){this.widget=widget;}};_pChildFrame.init=function(id,left,top,width,height,right,bottom,strurl){if(id){this.id=this.name=id;}var old_left=this._adjust_left;var old_top=this._adjust_top;var old_width=this._adjust_width;var old_height=this._adjust_height;var bsize=false,bmove=false;var check_arg_count=6;if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){check_arg_count=5;}if(arguments.length>=check_arg_count){if(this._is_window&&this._window){this._adjustPosition(left,top,right,bottom,width,height);}else{this._adjustPosition(left,top,right,bottom,width,height,this.parent?this.parent._getClientWidth():0,this.parent?this.parent._getClientHeight():0);}if(this._adjust_width!=old_width||this._adjust_height!=old_height){bsize=true;}if(this._adjust_left!=old_left||this._adjust_top!=old_top){bmove=true;}this.on_update_position(bsize,bmove);}if(strurl){this.set_formurl(strurl);}};_pChildFrame._addVariable=function(id,val){this[id]=val;if(!this._variables){this._variables=[];}this._variables.push(id);};_pChildFrame.showModal=function(str_id,_parent_frame,arr_arg,opener,callback,is_async){if(nexacro._current_popups.length>0){nexacro._checkClosePopupComponent(null);}var ret,parent_frame,id;if(!(str_id instanceof nexacro.Frame)&&str_id!=null){this.id=id=arguments[0];parent_frame=arguments[1];this._arg=arguments[2];this.opener=arguments[3];this._close_callback=arguments[4];}else{id=this.id;parent_frame=arguments[0];this._arg=arguments[1];this.opener=arguments[2];this._close_callback=arguments[3];}var _win=parent_frame?parent_frame._getWindow():this._getWindow();if(_win){_win._updateWrapper(undefined,"hide");}var child_frame=null;if(parent_frame==null){var application=nexacro.getApplication();if(application){parent_frame=application.mainframe;}}if(parent_frame){ret=parent_frame.addChild(id,this);}if(ret== -1){if(_win){_win._updateWrapper(undefined,"show");}return false;}else{child_frame=this;}if(child_frame&&child_frame._arg){for(var param in child_frame._arg){child_frame._addVariable(param,child_frame._arg[param]);}}var parent_window=parent_frame?parent_frame._getWindow():null;if(nexacro._registerPopupFrame(id,this,parent_window)<0){if(_win){_win._updateWrapper(undefined,"show");}throw nexacro.MakeNativeError(this,"native_exist_id",id);}child_frame._is_window=false;child_frame._window_type=1;var wheelZoomScale=1.0;var _window=this._getWindow();if(_window&&(_window._wheelZoom!=undefined)&&(_window._wheelZoom!=100)){wheelZoomScale=_window._wheelZoom/100.0;}var left=child_frame._adjust_left;var top=child_frame._adjust_top;var width=child_frame._adjust_width;var height=child_frame._adjust_height;if(this.left==null){if((this.width||this.right)&&!(isNaN(this.width)||isNaN(this.right))){if(_window){this.left=_window.clientWidth/wheelZoomScale-this.width-this.right;}}}if(this.top==null){if((this.height||this.bottom)&&!(isNaN(this.height)||isNaN(this.bottom))){if(_window){this.top=_window.clientHeight/wheelZoomScale-this.height-this.bottom;}}}if(this.width==null){if((this.left||this.right)&&!(isNaN(this.left)||isNaN(this.right))){if(_window){this.width=_window.clientWidth/wheelZoomScale-this.left-this.right;}}}if(this.height==null){if((this.top||this.bottom)&&!(isNaN(this.top)||isNaN(this.bottom))){if(_window){this.height=_window.clientHeight/wheelZoomScale-this.top-this.bottom;}}}if(this.autosize){var calculated_size=this._getAutosizedFrameSize(true);this.width=width=calculated_size.width;this.height=height=calculated_size.height;}var after_align_pos=child_frame._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){this.left=after_align_pos.left;this.top=after_align_pos.top;}if(opener==null){var _focus_obj=null;if(parent_frame&&parent_frame._focusManager){_focus_obj=parent_frame._focusManager[0];}if(_focus_obj){if(_focus_obj.parent._is_form){this.opener=_focus_obj.parent;}else{this.opener=parent_frame.form;}}else{this.opener=parent_frame?parent_frame.form:null;}}if(this.form){this.form.opener=this.opener;}var mainframe=this._getMainFrame();if(mainframe){mainframe._changeStateActivate(false,this);}var recalculated_pos=this._recalcModalPosition((this.left==null)?null:this.left*wheelZoomScale,(this.top==null)?null:this.top*wheelZoomScale,this.width,this.height);this.left=recalculated_pos.left;this.top=recalculated_pos.top;this.width=recalculated_pos.width;this.height=recalculated_pos.height;this._setModalLock();this._cancelTouchEvent();this.createComponent(true);this.on_created();if(_win){_win._updateWrapper(undefined,"show");}if(wheelZoomScale!=1.0){if(this.form._is_loaded){var frameElem=this.getElement();if(frameElem){frameElem.setElementZoom(_window._wheelZoom);frameElem.setElementSize(frameElem._unscaledwidth,frameElem._unscaledheight,false,true);}}else{this._isNotProcessedWheelZoom=true;this.set_visible(false);}}return true;};_pChildFrame._showModalSync=function(str_id,_parent_frame,arr_arg,opener){var ret,parent_frame,id;if(!(str_id instanceof nexacro.Frame)&&str_id!=null){this.id=id=arguments[0];parent_frame=arguments[1];this._arg=arguments[2];this.opener=arguments[3];}else{id=this.id;parent_frame=arguments[0];this._arg=arguments[1];this.opener=arguments[2];}var child_frame=null;if(parent_frame==null){var application=nexacro.getApplication();if(application){parent_frame=application.mainframe;}}if(parent_frame){ret=parent_frame.addChild(id,this);}if(ret== -1){return false;}else{child_frame=this;}if(child_frame&&child_frame._arg){for(var param in child_frame._arg){child_frame._addVariable(param,child_frame._arg[param]);}}var parent_window=parent_frame?parent_frame._getWindow():null;if(nexacro._registerPopupFrame(id,this,parent_window)<0){throw nexacro.MakeNativeError(this,"native_exist_id",id);}child_frame._is_window=false;child_frame._window_type=4;var left=child_frame._adjust_left;var top=child_frame._adjust_top;var width=child_frame._adjust_width;var height=child_frame._adjust_height;if(this.autosize){var calculated_size=this._getAutosizedFrameSize(true);this.width=width=calculated_size.width;this.height=height=calculated_size.height;}var after_align_pos=child_frame._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){this.left=after_align_pos.left;this.top=after_align_pos.top;}if(opener==null){var _focus_obj=null;if(parent_frame&&parent_frame._focusManager){_focus_obj=parent_frame._focusManager[0];}if(_focus_obj){if(_focus_obj.parent._is_form){this.opener=_focus_obj.parent;}else{this.opener=parent_frame.form;}}else{this.opener=parent_frame?parent_frame.form:null;}}if(this.form){this.form.opener=this.opener;}var _window=this._getWindow();var wheelZoomScale=1.0;if(_window&&(_window._wheelZoom!=undefined)&&(_window._wheelZoom!=100)){wheelZoomScale=_window._wheelZoom/100.0;}var recalculated_pos=this._recalcModalPosition((this.left==null)?null:this.left*wheelZoomScale,(this.top==null)?null:this.top*wheelZoomScale,this.width,this.height);this.left=recalculated_pos.left;this.top=recalculated_pos.top;this.width=recalculated_pos.width;this.height=recalculated_pos.height;this._setModalLock();this._cancelTouchEvent();this.createComponent(true);this.on_created();if(wheelZoomScale!=1.0){var frameElem=this.getElement();frameElem.setElementZoom(_window._wheelZoom);frameElem.setElementSize(frameElem._unscaledwidth,frameElem._unscaledheight,false,true);}var win=this._getWindow();if(win&&win.handle){var _virtual_handle=nexacro._createVirtualWindowHandle(win.handle);this._virtual_handle=_virtual_handle;nexacro._blockScript(win.handle,_virtual_handle);}return true;};_pChildFrame._showModalWindow=function(str_id,_parent_frame,arr_arg,opener,_lockmode){this._is_popup_frame=true;var ret,parent_frame,id,lockmode;var shift_argument=0;if(!(str_id instanceof nexacro.Frame)&&str_id!=null){this.id=id=arguments[0];}else{shift_argument= -1;id=this.id;}parent_frame=arguments[1+shift_argument];this._arg=arguments[2+shift_argument];if(arguments[3+shift_argument]){this.opener=arguments[3+shift_argument];}lockmode=1;if(parent_frame){ret=parent_frame.addChild(id,this);}if(ret== -1){throw nexacro.MakeNativeError(this,"native_exist_id",id);}if(this&&this._arg){for(var param in this._arg){this._addVariable(param,this._arg[param]);}}var parent_window=parent_frame?parent_frame._getWindow():null;if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){if(nexacro._registerPopupFrame(id,this,parent_window)<0){throw nexacro.MakeNativeError(this,"native_exist_id",id);}}else{if(nexacro._registerPopupFrame(id,this)<0){throw nexacro.MakeNativeError(this,"native_exist_id",id);}}if(this._init_formurl){this.set_formurl(this._init_formurl);}this._is_window=true;this._window_type=5;var left=this._adjust_left;var top=this._adjust_top;var width=this._adjust_width;var height=this._adjust_height;if(parent_window){left=parent_window.getLeft();top=parent_window.getTop();}var is_form_loaded=false;if(this.autosize&&this.form&&this.form._control_element){width=this.form._init_width;height=this.form._init_height;is_form_loaded=true;}parent_window=parent_frame?parent_frame._getWindow():null;if(!is_form_loaded){var after_align_pos=this._getOpenAlignPos(parent_window,left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}}if(!this.opener||(this.opener&&!this.opener._is_form&&!this.opener._is_application)){this.opener=parent_frame?parent_frame.form:null;}if(this.form){this.form.opener=this.opener;}if(this.autosize&&!is_form_loaded){this._delayed_create_window=true;this._delayed_create_parent=parent_window;}this._window=new nexacro._Window(this.name,parent_window,false);this._window.attachFrame(this,false);if(this.form&&this.form._load_manager.status>=7){this._loadedForm();}if(parent_frame&&parent_frame._setModalLock){this._setModalLock(this._overlaycolor);}return this._window.createModal(parent_window,this.id,width,height,left,top,this.resizable,this.layered,lockmode);};_pChildFrame._on_init=function(){if(this._is_popup_frame&&this._window_type==2){var formurl;var openstyle;var parent_frame;var left,top,width,height;var arr_args;var name=this.name;var popupframeoption=nexacro._popupframeoption[name];if(popupframeoption){delete nexacro._popupframeoption[name];formurl=popupframeoption._formurl;openstyle=popupframeoption._openstyles;parent_frame=popupframeoption._parentframe;left=popupframeoption._left;top=popupframeoption._top;width=popupframeoption._width;height=popupframeoption._height;arr_args=popupframeoption._args;this.opener=popupframeoption._opener;}if(parent_frame){parent_frame.addChild(name,this);}if(arr_args){for(var param in arr_args){this._addVariable(param,arr_args[param]);}}if(openstyle){var openlist=openstyle.split(" ");for(var i=0,len=openlist.length;i<len;i++ ){var prop=openlist[i].split("=");if(prop[0]){if(prop[1]&&prop[1].indexOf("'")> -1){prop[1]=prop[1].replace("'","");for(var j=i;j<len;j++ ){var addstr=openlist[ ++i];if(addstr){prop[1]+=" "+addstr;if(addstr.indexOf("'")> -1){prop[1]=prop[1].replace("'","");break;}}}}}if(prop[0]=="openstatus"){this._init_openstatus=prop[1];continue;}if(this["set_"+prop[0]]){this["set_"+prop[0]](prop[1]);}}}var locale=nexacro._locale?nexacro._locale:nexacro._getLocale();if(locale){this._setLocale(locale);}this.init(this.name,left,top,width,height,null,null,formurl);}};_pChildFrame._on_load=function(){this.createComponent();this._on_focus(true);this.on_created();this._changeStateActivate(true);};_pChildFrame._loadApplicationCSS=function(){if(nexacro._cssurls){var url,len=nexacro._cssurls.length;for(var i=0;i<len;i++ ){url=nexacro._cssurls[i];if(url){var loadurl=url.replace("::","_");var cssurl,base_url;cssurl=nexacro._getServiceLocation("theme://"+loadurl,nexacro._project_absolutepath,null,false);if(nexacro._localcache_path){base_url=cssurl.substring(nexacro._project_absolutepath.length,cssurl.length);cssurl=nexacro._localcache_path+base_url;}var cssmapurl=cssurl;var pos=cssurl.lastIndexOf('/');cssurl=cssurl.substring(0,pos+1)+nexacro._getCSSFileName(cssurl.substring(pos+1,cssurl.length-5));pos=cssmapurl.lastIndexOf('.');cssmapurl=cssmapurl.substring(0,pos+1)+"map.js";var service=nexacro._getServiceObject(url);var env=nexacro.getEnvironment();var checkversion=env.checkversion;if(checkversion){var version=service.version;if(!nexacro._isNull(version)&&version!==""){cssurl+=nexacro._getVersionQueryString(cssurl,null,version);cssmapurl+=nexacro._getVersionQueryString(cssmapurl,null,version);}}this._load_manager.loadCssModule(cssurl,null,null,service,true,1);this._load_manager.loadCssModule(cssmapurl,null,null,service);}}}};_pChildFrame._loadEnvironment=function(){this._loadTheme(nexacro._curthemeid);this._loadInitValueFile(nexacro._initvaluefileid);};_pChildFrame._loadTheme=function(themeid){if(!themeid){return;}var cssurl,base_url,service;var bLocalCacheType=false;if(nexacro._localcache_path&&nexacro._hasLocalCacheUrl(themeid)){cssurl=nexacro._getLocalCacheUrl(themeid);if(cssurl){service=nexacro._getServiceObject(themeid);this._load_manager.loadCssModule(cssurl,null,null,service);return;}bLocalCacheType=true;base_url=nexacro._localcache_path;}cssurl=nexacro._theme_uri+"/"+nexacro._getCSSFileName("theme");cssurl=nexacro._getServiceLocation(cssurl,base_url);if(bLocalCacheType){nexacro._addLocalCacheUrl(themeid,cssurl);}service=nexacro._getServiceObject(cssurl);this._load_manager.loadCssModule(cssurl,null,null,service,true,0);cssurl=nexacro._theme_uri+"/theme.map";cssurl=nexacro._getServiceLocation(cssurl,base_url);cssurl+=".js";if(bLocalCacheType){nexacro._addLocalCacheUrl(themeid,cssurl);}service=nexacro._getServiceObject(cssurl);this._load_manager.loadCssModule(cssurl,null,null,service);};_pChildFrame._loadInitValueFile=function(initvaluefile){if(!initvaluefile){return;}var initvalueurl,base_url,service;var localcachetype=false;if(nexacro._localcache_path&&nexacro._hasLocalCacheUrl(initvaluefile)){initvalueurl=nexacro._getLocalCacheUrl(initvaluefile);if(initvalueurl){service=nexacro._getServiceObject(initvaluefile);this._load_manager.loadGlobalModule(initvaluefile,null,null,service);return;}localcachetype=true;base_url=nexacro._localcache_path;}initvalueurl=nexacro._getServiceLocation(initvaluefile,base_url);if(localcachetype){nexacro._addLocalCacheUrl(initvaluefile,initvalueurl);}service=nexacro._getServiceObject(initvalueurl);this._load_manager.loadGlobalModule(initvalueurl,null,null,service);};_pChildFrame._showModeless=function(name,target_win){this._is_popup_frame=true;this._is_window=true;this._window=target_win;this._window.frame=this;this._window_type=2;this._load_manager.status=2;this._load_manager._is_mainloaded=true;this._loadEnvironment();this._loadApplicationCSS();};_pChildFrame.hideModal=function(){};_pChildFrame.hideModeless=function(){};_pChildFrame.getForm=function(){return this.form?this.form:null;};_pChildFrame.on_fire_sys_onkeydown=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onkeydown.call(this,key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onkeyup=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onkeyup.call(this,key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onlbuttondown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_loadform_failed&&this._isShowTitleBar()==false){var owner_frame=this.getOwnerFrame();if(owner_frame){owner_frame.removeChild(this.id);var ownerframe_elem=owner_frame.getElement();if(ownerframe_elem){owner_frame.on_change_containerRect(owner_frame._getClientWidth(),owner_frame._getClientHeight());}}if(this._is_window&&this._window&&this._window._is_alive){this._window.destroy();}else{this._destroy();}if(this._control_element){this._control_element.destroy();}this._control_element=null;}if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onlbuttonup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onrbuttondown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onrbuttonup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onmousedown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onmouseup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_sys_onmouseenter.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_sys_onmouseleave.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_sys_onmousemove.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_sys_onmousewheel=function(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_sys_onmousewheel.call(this,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onkeydown=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onkeydown.call(this,key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onkeyup=function(key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onkeyup.call(this,key_code,alt_key,ctrl_key,shift_key,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onlbuttondown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){var ret=nexacro.Frame.prototype.on_fire_user_onlbuttonup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onrbuttondown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){var ret=nexacro.Frame.prototype.on_fire_user_onrbuttonup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){var ret=nexacro.Frame.prototype.on_fire_user_onmouseup.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onmousedown.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onmouseenter.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onmouseleave.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._window_type==1){return true;}var ret=nexacro.Frame.prototype.on_fire_user_onmousemove.call(this,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame.on_fire_user_onmousewheel=function(wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret=nexacro.Frame.prototype.on_fire_user_onmousewheel.call(this,wheelDeltaX,wheelDeltaY,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this._is_window){return true;}return ret;};_pChildFrame._createForm=function(){var formurl=this.formurl;if(!formurl){formurl="";}var form=this.form;if(form){if(form._url!=this._formurl){form.destroyComponent();form=new nexacro.Form("form",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);form.opener=this.opener;this.form=form;form.loadForm(formurl);if(this._control_element){form.createComponent();}}}else{form=new nexacro.Form("form",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);form.opener=this.opener;this.form=form;if(this._formurl){form.loadForm(formurl);}if(this._control_element){form.createComponent();}}return form;};_pChildFrame._closeForm=function(arg){var ownerframe;if(this._is_window){if(arg!==undefined){this._close_argument=arg;this._window.returnValue=arg;}var allobj=this.all;var allcnt=allobj.length-1;for(var i=allcnt;i>=0;i-- ){var childid=allobj.get_id(i);var child=allobj[i];if(child&&child._is_window&&child._window&&child._is_alive){this.removeChild(childid);child._window.destroy();child._window=null;}}ownerframe=this.getOwnerFrame();if(ownerframe){ownerframe.removeChild(this.id);}else if(this._window&&this._window._parentwindowforopen&&this._window_type==2){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){nexacro._unregisterPopupFrame(this.id,this._window._parentwindowforopen,undefined,true);}}if(this.form&&this.form._is_alive){this.form._destroy();this.form=null;}if(this._window&&this._window._is_alive){this._window.destroy();this._window=null;}}else{if(arg!==undefined){this._close_argument=arg;}var callremovechild=true;ownerframe=this.getOwnerFrame();if(ownerframe){ownerframe.removeChild(this.id);callremovechild=false;}if(this.form&&this.form._is_alive){this.form._destroy();this.form=null;}this._destroy(callremovechild);}};_pChildFrame._destroyForm=function(){if(this.form){this.form._destroy();this.form=null;}};_pChildFrame._loadedForm=function(){this._setLastFocus(this.form);if(this._is_loadform_failed){return;}this._applyDragMoveType();if(this.autosize){var after_align_pos,parent_window=this._delayed_create_parent;var left=this._left;var top=this._top;var width;var height;var calculated_size,_adjust_width,_adjust_height;if(this._is_window&&this._window_type==2){if(this._delayed_create_window){calculated_size=this._getAutosizedFrameSize(nexacro._Browser=="Runtime");width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(parent_window,left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}this._move(this._adjust_left,this._adjust_top,width,height);var _window=this._window=new nexacro._Window(this.name,parent_window,false);_window.attachFrame(this,false);_window.create(parent_window,this.id,width,height,left,top,this.resizable,this.layered,this.showontaskbar);delete this._delayed_create_parent;delete this._delayed_create_window;}else{if(this._window){calculated_size=this._getAutosizedFrameSize(nexacro._Browser=="Runtime");width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(this._window.parent,left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}this._move(left,top,width,height);if(this._init_openstatus){this.set_openstatus(this._init_openstatus);if(this._init_openstatus!="normal"){this._init_openstatus=null;return;}this._init_openstatus=null;}_adjust_width=width+this._window._gap_client_width;_adjust_height=height+this._window._gap_client_height;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){function getWindowSize(win){var win_handle=win.handle;var wW,wH;if(win_handle.outerWidth){wW=win_handle.outerWidth;wH=win_handle.outerHeight;}else{win.setSize(_adjust_width,_adjust_height);var barsW=_adjust_width-nexacro._getWindowHandleOuterWidth(win_handle);var barsH=_adjust_height-nexacro._getWindowHandleOuterHeight(win_handle);wW=barsW+_adjust_width;wH=barsH+_adjust_height;}return {width:wW,height:wH};}var win_rect=getWindowSize(this._window);if(win_rect.width!=_adjust_width||win_rect.height!=_adjust_height){this._window.setSize(win_rect.width,win_rect.height);}}else{this._window.setSize(_adjust_width,_adjust_height);}}}}else if(this._window_type==5){if(this._delayed_create_window){{calculated_size=this._getAutosizedFrameSize(nexacro._Browser=="Runtime");width=calculated_size.width;height=calculated_size.height;}after_align_pos=this._getOpenAlignPos(parent_window,left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}if(this._window.handle){this._window.moveTo(left,top);if(this._state_openstatus==0){this._move(left,top,width,height);}else{this._restore_position={left:left,top:top,width:width,height:height,right:this.right,bottom:this.bottom};}}else{this._delayed_window_pos={left:left,top:top,width:width,height:height};}delete this._delayed_create_parent;delete this._delayed_create_window;}else{if(this._window){calculated_size=this._getAutosizedFrameSize(nexacro._Browser=="Runtime");width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(this._window.parent,left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}this._move(left,top,width,height);_adjust_width=width+this._window._gap_client_width;_adjust_height=height+this._window._gap_client_height;this._window.setSize(_adjust_width,_adjust_height);}}}else if(this._window_type==1||this._window_type==4){calculated_size=this._getAutosizedFrameSize(true);width=calculated_size.width;height=calculated_size.height;after_align_pos=this._getOpenAlignPos(this._getWindow(),left,top,width,height);if(after_align_pos){left=after_align_pos.left;top=after_align_pos.top;}var recalculated_pos=this._recalcModalPosition(left,top,width,height);this._move(recalculated_pos.left,recalculated_pos.top,recalculated_pos.width,recalculated_pos.height);}}};_pChildFrame._on_window_loaded=function(){this._checkValidWindowSize();if(!this._is_created){this.createComponent();this._on_focus(true);this.on_created();}if(this._lockmode){delete this._lockmode;this._lockmode=null;}};_pChildFrame._onHttpSystemError=function(obj,bfireevent,errorobj,errortype,url,returncode,requesturi,locationuri,extramsg){this._is_loadform_failed=true;};_pChildFrame._createdForm=function(){var _window;if(this._window_type==1){if(this._isNotProcessedWheelZoom==true){_window=this._getWindow();var wheelZoomScale=1.0;if(_window&&(_window._wheelZoom!=undefined)&&(_window._wheelZoom!=100)){wheelZoomScale=_window._wheelZoom/100.0;}var after_align_pos=this._getOpenAlignPos(_window,this.left,this.top,this.width,this.height);if(after_align_pos){this.left=after_align_pos.left;this.top=after_align_pos.top;}var recalculated_pos=this._recalcModalPosition(this.left,this.top,this.width,this.height);this.left=recalculated_pos.left;this.top=recalculated_pos.top;this.width=recalculated_pos.width;this.height=recalculated_pos.height;if(wheelZoomScale!=1.0){var frameElem=this.getElement();if(frameElem){frameElem.setElementZoom(_window._wheelZoom);frameElem.setElementSize(recalculated_pos.width,recalculated_pos.height,false,true);this.set_visible(true);}}}}if(this._state_openstatus!=2){var owner_frame=this.getOwnerFrame();var _win=this._getWindow();var is_active_layer;if(owner_frame){var proc_focus=false;if(owner_frame._is_frameset&&owner_frame._getTopOrderFrame()==this){proc_focus=true;}else if(!owner_frame._is_frameset&&owner_frame._is_frame){proc_focus=true;}if(proc_focus){if(this._getWindow()==owner_frame._getWindow()){this._changeStateActivate(true);}else if(this._window_type==5){if(_win&&_win._prepared_flag==true){this._changeStateActivate(true);}}if(nexacro._enableaccessibility&&(nexacro._accessibilitywholereadtype==1||nexacro._accessibilitywholereadtype==3)){this._setFocus();this.form._playAccessibilityWholeReadLabel("wholeread");}else{is_active_layer=_win._isActiveLayerComponent(this.form);if(is_active_layer){this.form._on_focus(true);}}}}else{this._changeStateActivate(true);if(nexacro._enableaccessibility&&(nexacro._accessibilitywholereadtype==1||nexacro._accessibilitywholereadtype==3)){this._setFocus();this.form._playAccessibilityWholeReadLabel("wholeread");}else{is_active_layer=_win._isActiveLayerComponent(this.form);if(is_active_layer){this.form._on_focus(true);}}}}if(this._is_window&&this.autosize!=true){this._checkValidWindowSize();}if(this.form&&this.form._delayedfocuscomp){if(this._window_type==5){_window=this._getWindow();if(_window&&_window._prepared_flag==true){this.form._delayedfocuscomp=null;delete this.form._delayedfocuscomp;}}else{this.form._delayedfocuscomp=null;delete this.form._delayedfocuscomp;}}};_pChildFrame._applyDragMoveType=function(){var form=this.form;if(form){var allow_dragform=false;if(this._dragmovetype==2||(this._dragmovetype==1&&!this._isShowTitleBar())){allow_dragform=true;}{form._setDragMove(allow_dragform,this._is_window);}}if(this.titlebar){this.titlebar._setDragMove(this._dragmovetype!=0,this._is_window);}};_pChildFrame._cancelTouchEvent=function(){var win=this._getWindow();var touch_manager=win?win._gesture_manager:null;if(touch_manager){var session=touch_manager._touch_session;if(session&&session._cur_input){session._cur_input.preventAction();}}};_pChildFrame._getTitleText=function(brecursive){var titletext;titletext=this.titletext;if(brecursive){if(this.form&&this.form.titletext.length>0){if(titletext.length>0){titletext+=" - ";}titletext+=this.form.titletext;}}return titletext;};_pChildFrame._getStatusText=function(brecursive){var statustext;statustext=this.statustext;if(brecursive){if(this.form&&this.form.statustext.length>0){if(statustext.length>0){statustext+=" - ";}statustext+=this.form.statustext;}}return statustext;};_pChildFrame._getOpenAlignPos=function(parent_win,left,top,width,height){if(this._openalign){if(parent_win==null){return;}var _window=this._getWindow();var wheelZoomScale=1.0;if(_window&&(_window._wheelZoom!=undefined)&&(_window._wheelZoom!=100)){wheelZoomScale=_window._wheelZoom/100.0;}var is_modal=(this._window_type==1||this._window_type==4);var p_l=is_modal?0:(parent_win.left|0);var p_t=is_modal?0:(parent_win.top|0);var p_w=parent_win.clientWidth;var p_h=parent_win.clientHeight;switch(this._openalign.halign){case "left":left=p_l;break;case "center":left=p_l+Math.round((p_w-width*wheelZoomScale)/2);break;case "right":left=p_l+p_w-width*wheelZoomScale;break;}switch(this._openalign.valign){case "top":top=p_t;break;case "middle":top=p_t+Math.round((p_h-height*wheelZoomScale)/2);break;case "bottom":top=p_t+p_h-height*wheelZoomScale;break;}return {left:left,top:top};}return null;};if(nexacro._Browser=="IE"||nexacro._Browser=="Gecko"){_pChildFrame._checkValidWindowSize=function(){var _window=this._window;if(!_window){return;}var width=this._adjust_width;var height=this._adjust_height;if((_window.clientWidth!=width||_window.clientHeight!=height)&&(_window.clientWidth!=0&&_window.clientHeight!=0)){if(this.autosize!=true&&this._control_element){var control_elem=this._control_element;control_elem.setElementSize(width,height);control_elem.setElementSize(this._adjust_width,this._adjust_height);}this._move(this._adjust_left,this._adjust_top,_window.clientWidth,_window.clientHeight);if(this.autosize!=true){this.on_change_containerRect(this._adjust_width,this._adjust_height);}return false;}return true;};}else{_pChildFrame._checkValidWindowSize=nexacro._emptyFn;}_pChildFrame._setModalLock=function(modalWindowOverlayColor){var win;if(this._window_type==5){win=this.parent?this.parent._getWindow():null;}else{win=this._getWindow();}if(!win){win=nexacro._getMainWindowHandle()?nexacro._getMainWindowHandle()._linked_window:null;}if(!win){return;}var cur_focus_path=win.getCurrentFocusPaths()?win.getCurrentFocusPaths().slice(0):null;win._removeFromCurrentFocusPath(null,false);if(cur_focus_path){var cur_focus_path_len=cur_focus_path.length;var comp;for(var i=cur_focus_path_len;i>0;i-- ){comp=cur_focus_path[i-1];comp._changeStatus("mouseover",false);}}var overlaycolor=nexacro.ChildFrame._default_overlaycolor;if(modalWindowOverlayColor){overlaycolor=modalWindowOverlayColor;}else if(this._overlaycolor){overlaycolor=this._overlaycolor;}var zindex=nexacro._zindex_firstmodal;var modal_stack=win._modal_frame_stack;if(modal_stack.length>0){var modal_info=modal_stack[modal_stack.length-1];zindex=modal_info[1]+1;}var parent;if(this._window_type==5){parent=this.parent?((this.parent._window_type==5)?this.parent:this.parent.parent):null;}else{parent=this.parent;}if(!parent){var application=nexacro.getApplication();if(application){parent=application.mainframe;}}var modal_overlay_elem;if(parent){if(this._window_type==5){modal_overlay_elem=this._modal_overlay_elem=new nexacro.ModalOverlayElement(parent._control_element);modal_overlay_elem.setLinkedControl(parent);modal_overlay_elem.setElementZIndex(zindex);modal_overlay_elem.name="modal_overlay";if(overlaycolor){modal_overlay_elem.setElementBackground(overlaycolor);}modal_overlay_elem.create(win);parent._accessibilityModalLock(modal_stack);win._modal_frame_stack.push([this,zindex,cur_focus_path]);}else{modal_overlay_elem=this._modal_overlay_elem=new nexacro.ModalOverlayElement(parent._control_element);modal_overlay_elem.setLinkedControl(this);modal_overlay_elem.setElementZIndex(zindex);modal_overlay_elem.name="modal_overlay";if(overlaycolor){modal_overlay_elem.setElementBackground(overlaycolor);}modal_overlay_elem.create(win);this._accessibilityModalLock(modal_stack);win._modal_frame_stack.push([this,zindex,cur_focus_path]);}}};_pChildFrame._setModalUnlock=function(){var win;if(this._window_type==5){win=this.parent?this.parent._getWindow():null;}else{win=this._getWindow();}if(!win){win=nexacro._getMainWindowHandle()?nexacro._getMainWindowHandle()._linked_window:null;}if(!win){return;}var modal_stack=win._modal_frame_stack;var modal_stack_len=modal_stack.length;var modal_info;for(var i=0;i<modal_stack_len;i++ ){modal_info=modal_stack[i];if(modal_info[0]==this){for(var j=i;j<modal_stack_len-1;j++ ){modal_stack[j]=modal_stack[j+1];}modal_stack.length=modal_stack_len-1;break;}}nexacro._unregisterPopupFrame(this.id,win);this._accessibilityModalUnLock(modal_stack);if(modal_info){var old_focus_path=modal_info[2];if(old_focus_path&&old_focus_path.length>0){var old_focus_path_len=old_focus_path.length;for(i=0;i<old_focus_path_len;i++ ){var comp=old_focus_path[i];if(comp instanceof nexacro.ChildFrame){comp._changeStateActivate(true);continue;}else if(comp._is_form){comp._on_focus(true);break;}if(i==(old_focus_path_len-1)){comp._on_focus(true);}}}}if(this._modal_overlay_elem){this._modal_overlay_elem.destroy();this._modal_overlay_elem=null;}};_pChildFrame._setModalOverlaySize=function(width,height){this._modal_overlay_elem.setElementSize(width,height);if(this._state_openstatus==3){this._setSize(width,height);}};_pChildFrame._recalcModalPosition=function(left,top,width,height){var _window=this._getWindow();var wheelZoomScale=1.0;if(_window&&(_window._wheelZoom!=undefined)&&(_window._wheelZoom!=100)){wheelZoomScale=_window._wheelZoom/100.0;}left=parseInt(left);top=parseInt(top);width=parseInt(width);height=parseInt(height);var win=this._getWindow();if(!win){return {left:left,top:top,width:width,height:height};}var titleheight=parseInt(this._titlebarheight|0);if(titleheight<=0){titleheight=this._defaulttitleheight;}if(left+width*wheelZoomScale>win.clientWidth){left=win.clientWidth-width*wheelZoomScale;}if(top+titleheight*wheelZoomScale>win.clientHeight){top=win.clientHeight-titleheight*wheelZoomScale;}if(left<0){left=0;}if(top<0){top=0;}return {left:left,top:top,width:width,height:height};};_pChildFrame._getAutosizedFrameSize=function(include_frame_nc){var width=this._adjust_width;var height=this._adjust_height;var form=this.form;if(form&&form._is_loading==false){width=form._init_width;height=form._init_height;}if(include_frame_nc){var titleheight=0,statusheight=0;if(this._isShowTitleBar()){titleheight=parseInt(this._titlebarheight)|0;}if(this._isShowStatusBar()){statusheight=parseInt(this._statusbarheight)|0;}height+=titleheight+statusheight;}return {"width":width,"height":height};};_pChildFrame._on_apply_locale=function(v){var form=this.form;if(form){form._setLocale(v);}};_pChildFrame._getMainFrame=function(){var pThis=this;while(pThis){pThis=pThis.parent;if(pThis&&pThis._is_main){return pThis;}}return null;};nexacro.FrameSetBase=function(id,left,top,width,height,right,bottom,parent){nexacro.Frame.call(this,id,left,top,width,height,right,bottom,parent);this.frames=new nexacro.Collection();this._zordermap=new nexacro.Collection();this._separatesize=[];};var _pFrameSetBase=nexacro._createPrototype(nexacro.Frame,nexacro.FrameSetBase);nexacro.FrameSetBase.prototype=_pFrameSetBase;_pFrameSetBase._type_name="FrameSetBase";_pFrameSetBase.separatesize="";_pFrameSetBase.keepseparatesizewhenswap=false;_pFrameSetBase.ctrltaborder="active";_pFrameSetBase.ctrltabtype="order";_pFrameSetBase.showstatusbar=false;_pFrameSetBase.showtitlebar=false;_pFrameSetBase._max_frame=null;_pFrameSetBase._track_frame=null;_pFrameSetBase._active_frame=null;_pFrameSetBase._is_frameset=true;_pFrameSetBase._is_autorecalc_frame=true;_pFrameSetBase.on_create_contents=function(){nexacro.Frame.prototype.on_create_contents.call(this);var cnt=this.frames.length;for(var i=0;i<cnt;i++ ){var frame=this.frames[i];if(frame.set_resizable){frame.set_resizable(true);}frame.createComponent();this._zordermap.add_item(frame.name,frame);}};_pFrameSetBase.on_change_containerRect=function(width,height){var control_elem=this._control_element;if(control_elem){}};_pFrameSetBase.on_created_contents=function(win){nexacro.Frame.prototype.on_created_contents.call(this,win);var lastx=0,lasty=0;var defaultwidth=0,defaultheight=0;var control_elem=this._control_element;if(control_elem){defaultwidth=control_elem.client_width/5*3;defaultheight=control_elem.client_height/5*3;lasty=control_elem.client_top;}var cascadegap=this._titlebarheight;var cnt=this.frames.length;var frames=this.frames;for(var i=0;i<cnt;i++ ){var frame_item=frames[i];if(frame_item.position){if(frame_item._adjust_width==0&&frame_item._adjust_height==0){frame_item._move(lastx,lasty,defaultwidth,defaultheight);lastx+=cascadegap;lasty+=cascadegap;}}frame_item.on_created();}};_pFrameSetBase.on_destroy_contents=function(){nexacro.Frame.prototype.on_destroy_contents.call(this);var cnt=this.frames.length;for(var i=cnt-1;i>=0;i-- ){var frame_item=this.frames[i];if(frame_item){frame_item.destroyComponent();}}this.frames=null;};_pFrameSetBase.set_ctrltaborder=function(){};_pFrameSetBase.set_ctrltabtype=function(){};_pFrameSetBase.set_separatesize=function(v){if(v&&this.separatesize!=v){this.separatesize=v;this._separatesize=v.split(",");var control_elem=this._control_element;if(control_elem){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}};_pFrameSetBase.set_keepseparatesizewhenswap=function(v){var keepseparatesizewhenswap=nexacro._toBoolean(v);if(this.keepseparatesizewhenswap!=keepseparatesizewhenswap){this.keepseparatesizewhenswap=keepseparatesizewhenswap;}};_pFrameSetBase.set_minimizedchildposition=function(v){var pre=this.minimizedchildposition;if(pre==v){return;}switch(v){case "left":this._minimizedchildposition=0;this.minimizedchildposition=v;break;case "top":this._minimizedchildposition=1;this.minimizedchildposition=v;break;case "right":this._minimizedchildposition=2;this.minimizedchildposition=v;break;case "bottom":this._minimizedchildposition=3;this.minimizedchildposition=v;break;}var control_elem=this._control_element;if(this.minimizedchildposition==v&&control_elem){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pFrameSetBase._on_child_movetrack=function(child,x,y,dragdata){var checkx=(this._type_name=="VFrameSet")?false:true;var checky=(this._type_name=="HFrameSet")?false:true;var curx=child._adjust_left+(child._adjust_width/2);var cury=child._adjust_top+(child._adjust_height/2);var hitidx= -1;var frames=this.frames;var len=frames.length;for(var i=0;i<len;i++ ){var frame=frames[i];if(frame==child){continue;}if(frame._state_openstatus==2){continue;}if(checkx){var loopleft=frame._adjust_left;var loopright=loopleft+frame._adjust_width;if(loopleft>curx){continue;}if(loopright<curx){continue;}}if(checky){var looptop=frame._adjust_top;var loopbottom=looptop+frame._adjust_height;if(looptop>cury){continue;}if(loopbottom<cury){continue;}}hitidx=i;break;}if(hitidx!=( -1)){var curidx=frames.indexOf(child.name);var hitchild=frames[hitidx];frames.remove_item(hitchild.name);frames.insert_item(curidx,hitchild.name,hitchild);frames.remove_item(child.name);frames.insert_item(hitidx,child.name,child);if(this._control_element){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}};_pFrameSetBase._on_child_starttrack=function(child,x,y,dragdata){if(child){this._track_frame=child;}};_pFrameSetBase._on_child_endtrack=function(child,x,y,dragdata){this._track_frame=null;if(this._control_element){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pFrameSetBase._changeStateActivate=function(cur,activated_child){if(cur==true){if(activated_child){var cur_active=this.getActiveFrame();if(cur_active&&cur_active!=activated_child){cur_active._changeStateActivate(false,null);}this._active_frame=activated_child;if(activated_child._control_element){if(this._zordermap.indexOf(activated_child)<0){this._zordermap.insert_item(0,activated_child,activated_child.id);}if(this._zordermap.length>1){if(this._control_element){this._control_element.bringToFrontElement(activated_child._control_element);}this._zordermap.remove_item(activated_child.id);this._zordermap.add_item(activated_child.id,activated_child);}if(this._max_frame&&this._max_frame!=activated_child){activated_child._changeOpenStatus(3);}}}}else if(cur==false){var frames=this.frames;var frames_len=frames.length;for(var i=0;i<frames_len;i++ ){var child=frames[i];if(child._isNested()){child._changeStateActivate(false);}}}nexacro.Frame.prototype._changeStateActivate.call(this,cur);};_pFrameSetBase._changeStateFocus=function(cur,activated_child){if(cur==true){if(activated_child){var cur_active=this.getActiveFrame();if(cur_active&&cur_active!=activated_child){cur_active._changeStateActivate(false,null);}this._active_frame=activated_child;if(activated_child._control_element){if(this._zordermap.indexOf(activated_child)<0){this._zordermap.insert_item(0,activated_child,activated_child.id);}if(this._zordermap.length>1){if(this._control_element){this._control_element.bringToFrontElement(activated_child._control_element);}this._zordermap.remove_item(activated_child.id);this._zordermap.add_item(activated_child.id,activated_child);}if(this._max_frame&&this._max_frame!=activated_child){activated_child._changeOpenStatus(3);}}}}else if(cur==false){var frames=this.frames;var frames_len=frames.length;for(var i=0;i<frames_len;i++ ){var child=frames[i];if(child._isNested()){child._changeStateActivate(false);}}}nexacro.Frame.prototype._changeStateFocus.call(this,cur);};_pFrameSetBase.on_apply_prop_enable=function(v){var frames=this.frames;var len=frames.length;for(var i=0;i<len;i++ ){var frame=frames[i];frame._setEnable(v);}};_pFrameSetBase.getActiveFrame=function(){if(this._active_frame){return this._active_frame;}return this._getTopOrderFrame();};_pFrameSetBase.getHandle=function(){};_pFrameSetBase._getTopOrderFrame=function(){var len=this._zordermap.length;if(len>0){var obj=this._zordermap.get_item(len-1);return obj;}return null;};_pFrameSetBase._getNextOrderFrame=function(target){var len=this._zordermap.length;if(len>0){var idx=this._zordermap.indexOf(target.id);if(idx-1>len-1&&idx-1<0){return null;}var obj=this._zordermap.get_item(idx-1);return obj;}return null;};_pFrameSetBase._visibleFrameCount=function(){return this.frames.length;};_pFrameSetBase._getMinimizeFrameCount=function(){var cnt=0;var frames=this.frames;var len=frames.length;for(var i=0;i<len;i++ ){if(this.frames[i]._state_openstatus==2){cnt++ ;}}return cnt;};_pFrameSetBase._recalcSeparateFrameSize=function(totalsize,inframecnt,inseparatecnt){var separateframesize=[];var framecnt=((inframecnt)?inframecnt:this._visibleFrameCount());var dividecnt=0,fixedcnt=0;var totalfixedsize=0,dividesize=0;var separatesize=this._separatesize;var i;for(i=0;i<framecnt;i++ ){var str=separatesize[i];var pos= -1;var size= -1;if(str){str.trim();pos=str.indexOf("*");size=((pos<0)&&(str.length>0))?nexacro._parseInt(str): -1;}if(size== -1){var ntimes= -1;if(str){ntimes=nexacro._parseInt(str.substring(0,pos));}if(ntimes>0){dividecnt+=ntimes;separateframesize[i]=ntimes*size;}else{dividecnt++ ;separateframesize[i]=size;}}else{fixedcnt++ ;totalfixedsize+=size;if(totalfixedsize<=totalsize){separateframesize[i]=size;}else if(fixedcnt==1){separateframesize[i]=totalsize;}else{totalfixedsize-=size;}}}dividesize=dividecnt>0?(totalsize-totalfixedsize)/dividecnt:0;for(i=0;i<framecnt;i++ ){if(separateframesize[i]<0){separateframesize[i]=Math.abs(separateframesize[i])*dividesize;}else if(separateframesize[i]==undefined){separateframesize[i]=0;}}return separateframesize;};_pFrameSetBase._getTitleText=function(brecursive){var titletext;titletext=this.titletext;if(brecursive){var activeframe=this.getActiveFrame();if(activeframe){var subtitletext=activeframe._getTitleText(true);if(subtitletext&&subtitletext.length>0){if(titletext.length>0){titletext+=" - ";}titletext+=subtitletext;}}}return titletext;};_pFrameSetBase._getStatusText=function(brecursive){var statustext;statustext=this.statustext;if(brecursive){var activeframe=this.getActiveFrame();if(activeframe){var substatustext=activeframe._getStatusText(true);if(substatustext.length>0){if(statustext.length>0){statustext+=" - ";}statustext+=substatustext;}}}return statustext;};_pFrameSetBase._on_apply_locale=function(v){var frames=this.frames;if(frames){var frame;for(var i=0;i<frames.length;i++ ){frame=frames[i];if(frame){frame._on_apply_locale(v);}}}};nexacro.FrameSet=function(id,left,top,width,height,right,bottom,parent){nexacro.FrameSetBase.call(this,id,left,top,width,height,right,bottom,parent);this._separatesize=[];};var _pFrameSet=nexacro._createPrototype(nexacro.FrameSetBase,nexacro.FrameSet);nexacro.FrameSet.prototype=_pFrameSet;_pFrameSet._type_name="FrameSet";_pFrameSet.separatesize="";_pFrameSet.keepseparatesizewhenswap=false;_pFrameSet.ctrltaborder=0;_pFrameSet.ctrltabtype=0;_pFrameSet.minimizedchildposition="bottom";_pFrameSet.restorechildpositiontype="normal";_pFrameSet._minimizedchildposition=3;_pFrameSet._is_autorecalc_frame=false;_pFrameSet.set_minimizewidth=function(minimizewidth){minimizewidth=parseInt(minimizewidth);this.minimizewidth=minimizewidth;this.on_apply_minimizewidth(minimizewidth);};_pFrameSet.on_apply_minimizewidth=function(){if(this._is_created){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pFrameSet.set_minimizeheight=function(minimizeheight){minimizeheight=parseInt(minimizeheight);this.minimizeheight=minimizeheight;this.on_apply_minimizeheight(minimizeheight);};_pFrameSet.on_apply_minimizeheight=function(){if(this._is_created){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pFrameSet.set_restorechildpositiontype=function(val){var restorechildpositiontype=val;if(this.restorechildpositiontype!=restorechildpositiontype){switch(restorechildpositiontype){case "normal":case "keepmaximizeposition":this.restorechildpositiontype=restorechildpositiontype;break;default:break;}}};_pFrameSet.on_change_containerRect=function(width,height){var control_elem=this._control_element;if(control_elem){var client_width=this._getClientWidth();var client_height=this._getClientHeight();var frameleft=0;var frametop=0;var framewidth=client_width;var frameheight=client_height;var frameright=frameleft+client_width;var framebottom=frametop+client_height;if(this._max_frame){this._max_frame._move(frameleft,frametop,framewidth,frameheight);}var i;var frames=this.frames;var len=frames.length;for(i=0;i<len;i++ ){var child=frames[i];if(child==this._max_frame){continue;}if(child._state_openstatus==2){child._setVerticalMin(false);var minwidth=this.minimizewidth?this.minimizewidth:125;var minheight=this.minimizeheight;if(!minheight){minheight=child._titlebarheight;}switch(this._minimizedchildposition){case 0:framebottom=frametop+minheight;child._move(frameleft,frametop,minwidth,minheight);frametop=framebottom;break;case 1:frameright=frameleft+minwidth;child._move(frameleft,frametop,minwidth,minheight);frameleft=frameright;break;case 2:framebottom=frametop+minheight;child._move(frameright-minwidth,frametop,minwidth,minheight);frametop=framebottom;break;case 3:frameright=frameleft+minwidth;child._move(frameleft,framebottom-minheight,minwidth,minheight);frameleft=frameright;break;}}}}};_pFrameSet.arrange=function(v){var max_frame=this._max_frame;if(max_frame){max_frame._on_syscommand(max_frame.getElement(),"restore",true,max_frame,null);}var arrangecnt=0;var frames=this.frames;var len=frames.length;var i,j,child,fixed,colcnt,rowcnt,left,col,rc,width,height,row;for(i=0;i<len;i++ ){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}arrangecnt++ ;}var frameleft=0;var frametop=0;var framewidth=this._getClientWidth();var frameheight=this._getClientHeight();if(v=="cascade"){var cascadecnt=0;for(var temp=100;;cascadecnt++ ){if(this._getClientHeight()<temp){break;}temp+=(60+(cascadecnt*10));}var cascadegapx=parseInt(this._titlebarheight)|this._defaulttitleheight;var cascadegapy=cascadegapx;framewidth=this._getClientWidth()-(cascadegapx*cascadecnt);frameheight=this._getClientHeight()-(cascadegapy*cascadecnt);for(i=0,j=0;i<this.frames.length;i++ ){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}frameleft=cascadegapx*(j%(cascadecnt+1));frametop=cascadegapy*(j%(cascadecnt+1));child._move(frameleft,frametop,framewidth,frameheight);j++ ;}}if(v=="tilevertical"){fixed=true;rowcnt=parseInt(Math.sqrt(arrangecnt))|0;colcnt=parseInt(arrangecnt/rowcnt)|0;if((arrangecnt%rowcnt)!=0){rowcnt+=1;fixed=false;}left=arrangecnt;for(col=0,i=0;col<colcnt;col++ ){for(row=0;row<rowcnt;){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}rc={left:frameleft,top:frametop,right:frameleft+framewidth,bottom:frametop+frameheight};rc.right=rc.left+((rc.right-rc.left)/colcnt);rc.bottom=rc.top+((rc.bottom-rc.top)/rowcnt);width=rc.right-rc.left;height=rc.bottom-rc.top;rc.left+=(colcnt-col-1)*width;rc.top+=(rowcnt-row-1)*height;rc.right+=(colcnt-col-1)*width;rc.bottom+=(rowcnt-row-1)*height;child._move(rc.left,rc.top,rc.right-rc.left,rc.bottom-rc.top);row++ ;i++ ;left-- ;}if(!fixed&&rowcnt>2&&(left%(rowcnt-1))==0){rowcnt-- ;fixed=true;}}}if(v=="tilehorizontal"){fixed=true;colcnt=parseInt(Math.sqrt(arrangecnt))|0;rowcnt=parseInt(arrangecnt/colcnt)|0;if((arrangecnt%colcnt)!=0){rowcnt+=1;fixed=false;}left=arrangecnt;for(col=0,i=0;col<colcnt;col++ ){for(row=0;row<rowcnt;){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}rc={left:frameleft,top:frametop,right:frameleft+framewidth,bottom:frametop+frameheight};rc.right=rc.left+((rc.right-rc.left)/colcnt);rc.bottom=rc.top+((rc.bottom-rc.top)/rowcnt);width=rc.right-rc.left;height=rc.bottom-rc.top;rc.left+=(colcnt-col-1)*width;rc.top+=(rowcnt-row-1)*height;rc.right+=(colcnt-col-1)*width;rc.bottom+=(rowcnt-row-1)*height;child._move(rc.left,rc.top,rc.right-rc.left,rc.bottom-rc.top);row++ ;i++ ;left-- ;}if(!fixed&&rowcnt>2&&(left%(rowcnt-1))==0){rowcnt-- ;fixed=true;}}}if(v=="vertical"){for(i=0,j=0;i<this.frames.length;i++ ){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}child._move(frameleft+(j*(framewidth/arrangecnt)),frametop,(framewidth/arrangecnt),frameheight);j++ ;}}if(v=="horizontal"){var top=frametop;for(i=0;i<this.frames.length;i++ ){child=this._zordermap[i];if(child.visible==false||child._state_openstatus==2){continue;}rc={left:frameleft,top:frametop,right:frameleft+framewidth,bottom:frametop+frameheight};rc.top=top;rc.bottom=rc.top+(frameheight/arrangecnt);var miny=0;if(rc.bottom-rc.top<miny){rc.bottom=rc.top+miny;}top=rc.bottom+1;child._move(frameleft,rc.top,framewidth,rc.bottom-rc.top);}}};nexacro.VFrameSet=function(id,left,top,width,height,right,bottom,parent){nexacro.FrameSetBase.call(this,id,left,top,width,height,right,bottom,parent);};var _pVFrameSet=nexacro._createPrototype(nexacro.FrameSetBase,nexacro.VFrameSet);nexacro.VFrameSet.prototype=_pVFrameSet;_pVFrameSet._type_name="VFrameSet";_pVFrameSet.on_change_containerRect=function(width,height){nexacro.Frame.prototype.on_change_containerRect.call(this,width,height);var control_elem=this._control_element;if(control_elem){var framesize=this._recalcSeparateFrameSize(height);var cnt=this.frames.length;var frameleft=0;var frametop=0;var framebottom=0;var frameright=frameleft+width;var maxframeheight=this._getClientHeight();var child,i,minheight,titleheight;if(this._max_frame){var maxidx= -1;for(i=0;i<cnt;i++ ){child=this.frames[i];if(child==this._max_frame){maxidx=i;continue;}titleheight=child._titlebarheight;minheight=parseInt(titleheight)|0;maxframeheight-=minheight;framesize[i]=minheight;}framesize[maxidx]=maxframeheight;}var preframe_minimized=false;var gap=0;for(i=0;i<cnt;i++ ){child=this.frames[i];if(preframe_minimized){frametop=framebottom;preframe_minimized=false;}if(child._state_openstatus==2){child._setVerticalMin(false);titleheight=child._titlebarheight;minheight=parseInt(titleheight)|0;gap+=framesize[i]-minheight;framesize[i]=minheight;preframe_minimized=true;}if(child._state_openstatus!=2){framesize[i]+=gap;gap=0;}framebottom=framesize[i]+frametop;if(child!=this._track_frame){child._move(frameleft,frametop,frameright-frameleft,framebottom-frametop);}frametop=framebottom;}}};_pVFrameSet.arrange=nexacro._emptyFn;_pVFrameSet.set_minimizedchildposition=nexacro._emptyFn;nexacro.HFrameSet=function(id,left,top,width,height,right,bottom,parent){nexacro.FrameSetBase.call(this,id,left,top,width,height,right,bottom,parent);};var _pHFrameSet=nexacro._createPrototype(nexacro.FrameSetBase,nexacro.HFrameSet);nexacro.HFrameSet.prototype=_pHFrameSet;_pHFrameSet._type_name="HFrameSet";_pHFrameSet.on_change_containerRect=function(width,height){nexacro.Frame.prototype.on_change_containerRect.call(this,width,height);var control_elem=this._control_element;if(control_elem){var framesize=this._recalcSeparateFrameSize(width);var cnt=this.frames.length;var frameleft=0;var frametop=0;var frameright=0;var framebottom=frametop+height;var maxframewidth=this._getClientWidth();var child,i,minwidth,titleheight;if(this._max_frame){var maxidx= -1;for(i=0;i<cnt;i++ ){child=this.frames[i];if(child==this._max_frame){maxidx=i;continue;}titleheight=child._titlebarheight;minwidth=parseInt(titleheight)|0;maxframewidth-=minwidth;framesize[i]=minwidth;}framesize[maxidx]=maxframewidth;}var preframe_minimized=false;var gap=0;for(i=0;i<cnt;i++ ){child=this.frames[i];if(preframe_minimized){frameleft=frameright;preframe_minimized=false;}if(child._state_openstatus==2){child._setVerticalMin(true);titleheight=child._titlebarheight;minwidth=parseInt(titleheight)|0;gap+=framesize[i]-minwidth;framesize[i]=minwidth;preframe_minimized=true;}if(child._state_openstatus!=2){if(this._max_frame&&child!=this._max_frame){child._setVerticalMin(true);}else{child._setVerticalMin(false);}framesize[i]+=gap;gap=0;}frameright=framesize[i]+frameleft;if(child!=this._track_frame){child._move(frameleft,frametop,frameright-frameleft,framebottom-frametop);}frameleft=frameright;}}};_pHFrameSet.arrange=nexacro._emptyFn;_pHFrameSet.set_minimizedchildposition=nexacro._emptyFn;nexacro.TileFrameSet=function(id,left,top,width,height,right,bottom,parent){nexacro.FrameSetBase.call(this,id,left,top,width,height,right,bottom,parent);};var _pTileFrameSet=nexacro._createPrototype(nexacro.FrameSetBase,nexacro.TileFrameSet);nexacro.TileFrameSet.prototype=_pTileFrameSet;_pTileFrameSet._type_name="TileFrameSet";_pTileFrameSet.separatetype="horizontal";_pTileFrameSet.separatecount=1;_pTileFrameSet.fullframemaximize=true;_pTileFrameSet.minimizedchildposition="bottom";_pTileFrameSet._separatetype=0;_pTileFrameSet._minimizedchildposition=3;_pTileFrameSet.on_change_containerRect=function(width,height){nexacro.Frame.prototype.on_change_containerRect.call(this,width,height);var control_elem=this._control_element;if(control_elem){var framecnt=this.frames.length;var fullframewidth=this._getClientWidth();var fullframeheight=this._getClientHeight();var i;if(this.fullframemaximize==false){if(this._max_frame){for(i=0;i<this.frames.length;i++ ){if(this._max_frame!=this.frames[i]&&this.frames[i]._state_openstatus!=2){this.frames[i].openstatus="minimize";this.frames[i]._changeOpenStatus(2);}}}else{for(i=0;i<this.frames.length;i++ ){if(this.frames[i]._state_openstatus==2){this.frames[i].openstatus="normal";this.frames[i]._changeOpenStatus(0);}}}}var minimizeframecnt=this._getMinimizeFrameCount();var normalframecnt=(framecnt-minimizeframecnt)>0?framecnt-minimizeframecnt:1;var separatecnt=this.separatecount>0?this.separatecount:1;var framerowcnt=parseInt(normalframecnt/separatecnt)+(parseInt(normalframecnt%separatecnt)>0?1:0);var horzminarea=false;if(this._minimizedchildposition==1||this._minimizedchildposition==3){horzminarea=true;}var minareawidth=0,minareaheight=0;if(horzminarea){minareawidth=width;if(minimizeframecnt>0){minareaheight=this._getMaxMinimizedHeight();}}else{minareaheight=height;if(minimizeframecnt>0){minareawidth=this._getMaxMinimizedWidth();}}var displayframewidth=0,displayframeheight=0;if(this._separatetype==1){displayframewidth=(width-(horzminarea?0:minareawidth))/framerowcnt;displayframeheight=height-(horzminarea?minareaheight:0);}else{displayframewidth=width-(horzminarea?0:minareawidth);displayframeheight=(height-(horzminarea?minareaheight:0))/framerowcnt;}var realcolcnt=normalframecnt-separatecnt>0?separatecnt:normalframecnt;var realtotalsize=0;if(this._separatetype==1){realtotalsize=height;if(horzminarea){realtotalsize-=minareaheight;}}else{realtotalsize=width;if(!horzminarea){realtotalsize-=minareawidth;}}var framesize=this._recalcSeparateFrameSize(realtotalsize,realcolcnt,realcolcnt);var frameleft=0;var frametop=0;var frameright=frameleft+width;var framebottom=frametop+height;if(minimizeframecnt>0){switch(this._minimizedchildposition){case 0:frameleft+=minareawidth;break;case 1:frametop+=minareaheight;break;case 2:frameright-=minareawidth;break;case 3:framebottom-=minareaheight;break;}}if(this._separatetype==1){frameright=frameleft+displayframewidth;}else{framebottom=frametop+displayframeheight;}if(this._max_frame){if(this.fullframemaximize){this._max_frame._move(0,0,fullframewidth,fullframeheight);}else{this._max_frame._move(frameleft,frametop,frameright-frameleft,framebottom-frametop);}if(this._control_element&&this._max_frame._control_element){this._control_element.bringToFrontElement(this._max_frame._control_element);}}else if(this.fullframemaximize==false){for(i=0;i<this.frames.length;i++ ){if(this.frames[i]._state_openstatus==2){this.frames[i]._changeOpenStatus(1);}}}var j=0,k=0;var child;for(i=0;i<framerowcnt;i++ ){for(j=0;j<realcolcnt&&k<framecnt;k++ ){child=this.frames[k];if(child==this._max_frame){continue;}if(child._state_openstatus==2){continue;}if(this._separatetype==1){framebottom=framesize[j]+frametop;}else{frameright=framesize[j]+frameleft;}if(child!=this._track_frame){child._move(frameleft,frametop,frameright-frameleft,framebottom-frametop);}if(this._separatetype==1){frametop=framebottom;}else{frameleft=frameright;}j++ ;}if(this._separatetype==1){frametop=0;frameleft=frameright;frameright=frameleft+displayframewidth;if(this._minimizedchildposition==1){frametop+=minareaheight;}}else{frameleft=0;frametop=framebottom;framebottom=frametop+displayframeheight;if(this._minimizedchildposition==0){frameleft+=minareawidth;}}}if(minimizeframecnt<=0){return;}var minframeleft=0;var minframetop=0;var minframeright=minframeleft+this._getClientWidth();var minframebottom=minframetop+this._getClientHeight();switch(this._minimizedchildposition){case 0:minframeright=minframeleft+minareawidth;break;case 1:minframebottom=minframetop+minareaheight;break;case 2:minframeleft=minframeright-minareawidth;break;case 3:minframetop=minframebottom-minareaheight;break;}var defaultminwidth=this.minimizewidth?this.minimizewidth:150;var minwidth=width-(minimizeframecnt*defaultminwidth);minwidth=minwidth>0?defaultminwidth:(width/minimizeframecnt);minwidth=minwidth<100?100:minwidth;for(i=0;i<framecnt;i++ ){child=this.frames[i];if(child._state_openstatus==2){child._setVerticalMin(false);var minheight=this.minimizeheight;if(!minheight){var titleheight=child._titlebarheight;minheight=parseInt(titleheight)|0;var border=child._getCurrentStyleBorder();if(border){minheight+=border._getBorderHeight();}}switch(this._minimizedchildposition){case 0:case 2:minframebottom=minframetop+minheight;child._move(minframeleft,minframetop,minframeright-minframeleft,minheight);minframetop=minframebottom;break;case 1:case 3:minframeright=minframeleft+minwidth;child._move(minframeleft,minframetop,minwidth,minframebottom-minframetop);minframeleft=minframeright;break;}}}}};_pTileFrameSet.set_separatetype=function(v){if(this.separatetype!=v){this.separatetype=v;this._separatetype=(v=="vertical"?1:0);if(this._control_element){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}};_pTileFrameSet.set_separatecount=function(v){var separatecount=nexacro._parseInt(v);if(this.separatecount!=separatecount){if(separatecount<0){this.separatecount=1;}else{this.separatecount=separatecount;}if(this._control_element){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}};_pTileFrameSet.set_fullframemaximize=function(v){var fullframemaximize=nexacro._toBoolean(v);if(this.fullframemaximize!=fullframemaximize){this.fullframemaximize=fullframemaximize;for(var i=0;i<this.frames.length;i++ ){var child=this.frames[i];if(child.titlebar){if(fullframemaximize==false){child.titlebar._setAbsoluteStyle(0x0001,0);}else{child.titlebar._setAbsoluteStyle(0x0100,0x0001);child.titlebar._setAbsoluteStyle(0,0x0100);}}}if(this._control_element){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}}};_pTileFrameSet.set_minimizewidth=function(minimizewidth){minimizewidth=parseInt(minimizewidth);this.minimizewidth=minimizewidth;this.on_apply_minimizewidth(minimizewidth);};_pTileFrameSet.on_apply_minimizewidth=function(){if(this._is_created){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pTileFrameSet.set_minimizeheight=function(minimizeheight){minimizeheight=parseInt(minimizeheight);this.minimizeheight=minimizeheight;this.on_apply_minimizeheight(minimizeheight);};_pTileFrameSet.on_apply_minimizeheight=function(){if(this._is_created){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());}};_pTileFrameSet.arrange=nexacro._emptyFn;_pTileFrameSet._getMaxMinimizedWidth=function(){return this.minimizewidth?this.minimizewidth:150;};_pTileFrameSet._getMaxMinimizedHeight=function(){var max= -1;for(var i=0;i<this.frames.length;i++ ){var child=this.frames[i];if(child._state_openstatus!=2){continue;}var minheight=this.minimizeheight;if(!minheight){var titleheight=child._titlebarheight;minheight=parseInt(titleheight)|0;var border=child._getCurrentStyleBorder();if(border){minheight+=border._getBorderHeight();}if(minheight>max){max=minheight;}}}return max>0?max:(this.minimizeheight?this.minimizeheight:25);};if(!nexacro._MainStatusBarControl){nexacro._MainStatusBarControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.StatusBarControl.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var __pMainStatusBarControl=nexacro._createPrototype(nexacro.StatusBarControl,nexacro._MainStatusBarControl);nexacro._MainStatusBarControl.prototype=__pMainStatusBarControl;__pMainStatusBarControl._type_name="StatusBarControl";__pMainStatusBarControl._is_subcontrol=true;__pMainStatusBarControl._comm_progress_ref=0;__pMainStatusBarControl._comm_progress_timer=null;if(nexacro._Browser=="Runtime"){__pMainStatusBarControl._beginCommProgress=function(){var cur_ref= ++this._comm_progress_ref;if(cur_ref==1){var progressbar=this.progressbar;if(progressbar){progressbar.set_max(1000);progressbar.set_pos(0);}var progress_timer=new nexacro._CallbackTimer(this,function(){var progressbar=this.progressbar;if(!progressbar){return;}var cur_pos=progressbar.pos;cur_pos+=Math.max(1,(1000-cur_pos)/(100*this._comm_progress_ref));if(cur_pos>990){cur_pos=990;}progressbar.set_pos(cur_pos);},500);progress_timer.start();this._comm_progress_timer=progress_timer;}};__pMainStatusBarControl._stepCommProgress=function(current,overall){var progressbar=this.progressbar;if(progressbar){progressbar.set_max(overall);progressbar.set_pos(current);}};__pMainStatusBarControl._endCommProgress=function(){var cur_ref= --this._comm_progress_ref;if(cur_ref==0){var progressbar=this.progressbar;if(progressbar){progressbar.set_pos(0);}if(this._comm_progress_timer){this._comm_progress_timer.stop();}}};}else{__pMainStatusBarControl._beginCommProgress=nexacro._emptyFn;__pMainStatusBarControl._stepCommProgress=nexacro._emptyFn;__pMainStatusBarControl._endCommProgress=nexacro._emptyFn;}}}if(_process){delete _process;delete _pFrame;delete _pMainFrame;delete _pChildFrame;delete _pFrameSetBase;delete _pFrameSet;delete _pVFrameSet;delete _pHFrameSet;delete _pTileFrameSet;delete __pMainStatusBarControl;}
if(!nexacro.ScrollBarControl){nexacro.ScrollBarControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this._rectshaft=new nexacro.Rect();};nexacro.ScrollBarControl.TRACKBAR_SIZE_MIN=6;nexacro.ScrollBarControl.TRACKFIRSTOVER=1;nexacro.ScrollBarControl.TRACKLASTOVER=2;var _pScrollBar=nexacro._createPrototype(nexacro.Component,nexacro.ScrollBarControl);nexacro.ScrollBarControl.prototype=_pScrollBar;_pScrollBar._type_name="ScrollBarControl";_pScrollBar.incbutton=null;_pScrollBar.decbutton=null;_pScrollBar.trackbar=null;_pScrollBar.barminsize=undefined;_pScrollBar.baroutsize=undefined;_pScrollBar.decbuttonsize=undefined;_pScrollBar.imgoutsize= -1;_pScrollBar.incbuttonsize=undefined;_pScrollBar.trackbarsize=undefined;_pScrollBar.direction="vertical";_pScrollBar.line=1;_pScrollBar.page=3;_pScrollBar.view= -1;_pScrollBar.max=0;_pScrollBar.min=0;_pScrollBar.pos=0;_pScrollBar._event_list={"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onrbuttondown":1,"onrbuttonup":1,"onsize":1,"onscroll":1};_pScrollBar._mousepoint={};_pScrollBar._max=0;_pScrollBar._min=0;_pScrollBar._orgmax=0;_pScrollBar._trackbarsize= -1;_pScrollBar._pos=0;_pScrollBar._lineup=1;_pScrollBar._linedown=1;_pScrollBar._pageup=3;_pScrollBar._pagedown=3;_pScrollBar._trackover=0;_pScrollBar._is_repeat=true;_pScrollBar._start_page_navi=null;_pScrollBar._is_tracking=false;_pScrollBar._reset_trackbar_fix=false;_pScrollBar._set_real=false;_pScrollBar._is_nc_control=true;_pScrollBar._is_focus_accept=false;_pScrollBar._is_subcontrol=true;_pScrollBar.on_get_css_assumedtypename=function(){if(this.direction=="vertical"){return "VScrollBarControl";}else if(this.direction=="horizontal"){return "HScrollBarControl";}return this._type_name;};_pScrollBar.on_create_contents=function(){var control_elem=this._control_element;if(control_elem){this.decbutton=new nexacro.Button("decbutton",0,0,0,0,null,null,null,null,null,null,this);this.decbutton.accessibilityenable=false;this.incbutton=new nexacro.Button("incbutton",0,0,0,0,null,null,null,null,null,null,this);this.incbutton.accessibilityenable=false;this.trackbar=new nexacro.Button("trackbar",0,0,0,0,null,null,null,null,null,null,this);this.trackbar._use_translate_move=true;this.trackbar.accessibilityenable=false;this.decbutton._setControl();this.incbutton._setControl();this.trackbar._setControl();this.trackbar._is_track=true;this.trackbar._on_starttrack=this._on_starttrack;this.trackbar._on_movetrack=this._on_movetrack;this.trackbar._on_endtrack=this._on_endtrack;if(!nexacro._allow_default_pinchzoom){this.trackbar._no_slide_scroll=true;}this.decbutton.createComponent();this.trackbar.createComponent();this.incbutton.createComponent();}};_pScrollBar.on_created_contents=function(win){var decbutton=this.decbutton;if(decbutton){decbutton.on_created(win);}var incbutton=this.incbutton;if(incbutton){incbutton.on_created(win);}this._recalcLayout();};_pScrollBar.on_destroy_contents=function(){if(this.decbutton){this.decbutton.destroy();this.decbutton=null;}if(this.trackbar){this.trackbar.destroy();this.trackbar=null;}if(this.incbutton){this.incbutton.destroy();this.incbutton=null;}this._rectshaft=null;this._mousepoint=null;};_pScrollBar.on_create_contents_command=function(){this._recalcLayout();var str="";if(this.decbutton){str+=this.decbutton.createCommand();}if(this.trackbar){str+=this.trackbar.createCommand();}if(this.incbutton){str+=this.incbutton.createCommand();}return str;};_pScrollBar.on_attach_contents_handle=function(win){if(this.decbutton){this.decbutton.attachHandle(win);}if(this.trackbar){this.trackbar.attachHandle(win);}if(this.incbutton){this.incbutton.attachHandle(win);}};_pScrollBar.on_change_containerRect=function(){this._recalcLayout();};_pScrollBar._on_repeat=function(fromComp,x,y){var scale=this._getCumulativeZoomFactor()/100.0;if(!this._is_alive){return;}var _window=this._getWindow();var wheelZoom=1.0;if(_window&&(_window._wheelZoom!=undefined)){wheelZoom=_window._wheelZoom/100;}var fromObject=fromComp;var btn,left,top,width,height;if(fromObject==this.decbutton){btn=this.decbutton;left=btn._adjust_left;top=btn._adjust_top;width=btn._adjust_width*scale*wheelZoom;height=btn._adjust_height*scale*wheelZoom;if(left<=x&&(left+width)>=x&&top<=y&&(top+height)>=y){this.on_decbutton_lbuttondown(this);}}else if(fromObject==this.incbutton){btn=this.incbutton;left=btn._adjust_left;top=btn._adjust_top;width=btn._adjust_width*scale*wheelZoom;height=btn._adjust_height*scale*wheelZoom;if(left<=x&&(left+width)>=x&&top<=y&&(top+height)>=y){this.on_incbutton_lbuttondown(this);}}else if(fromObject==this){this.on_page_click(this,x/wheelZoom,y/wheelZoom);}};_pScrollBar._on_startrepeat=function(fromComp,x,y){var scale=this._getCumulativeZoomFactor()/100.0;if(!this._is_alive){return;}var _window=this._getWindow();var wheelZoom=1.0;if(_window&&(_window._wheelZoom!=undefined)){wheelZoom=_window._wheelZoom/100;}var btn,fromObject=fromComp;var left,top,width,height;if(fromObject==this.decbutton){btn=this.decbutton;left=btn._adjust_left;top=btn._adjust_top;width=btn._adjust_width*scale*wheelZoom;height=btn._adjust_height*scale*wheelZoom;if(left<=x&&(left+width)>=x&&top<=y&&(top+height)>=y){this.on_decbutton_lbuttondown(this,null);}}else if(fromObject==this.incbutton){btn=this.incbutton;left=btn._adjust_left;top=btn._adjust_top;width=btn._adjust_width*scale*wheelZoom;height=btn._adjust_height*scale*wheelZoom;if(left<=x&&(left+width)>=x&&top<=y&&(top+height)>=y){this.on_incbutton_lbuttondown(this,null);}}else if(fromObject==this){btn=this.trackbar;left=btn._adjust_left;top=btn._adjust_top;width=btn._adjust_width*scale;height=btn._adjust_height*scale;var eType="";if(this.direction=="vertical"){if(y/wheelZoom<top){eType="pageup";}else if(y/wheelZoom>(top+height)){eType="pagedown";}}else{if(x/wheelZoom<left){eType="pageleft";}else if(x/wheelZoom>(left+width)){eType="pageright";}}this._start_page_navi=eType;this.on_page_click(this,x/wheelZoom,y/wheelZoom);}};_pScrollBar.set_barminsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.barminsize!=v){this.barminsize=v;this._recalcLayout();}};_pScrollBar.set_baroutsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.baroutsize!=v){this.baroutsize=v;this._recalcLayout();}};_pScrollBar.set_decbuttonsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.decbuttonsize!=v){this.decbuttonsize=v;this._recalcLayout();}};_pScrollBar.set_imgoutsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.imgoutsize!=v){this.imgoutsize=v;this._recalcLayout();}};_pScrollBar.set_incbuttonsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.incbuttonsize!=v){this.incbuttonsize=v;this._recalcLayout();}};_pScrollBar.set_trackbarsize=function(v){if(v!=undefined){v=nexacro._toInt(v);}if(this.trackbarsize!=v){this.trackbarsize=v;this._recalcLayout();}};_pScrollBar.set_pos=function(v){this._setPos(v);};_pScrollBar.on_apply_resize=function(){this._recalcLayout();this.on_fire_onsize(this._adjust_width,this._adjust_height);};_pScrollBar.on_apply_move=function(){this._recalcLayout();this.on_fire_onmove(this._adjust_left,this._adjust_top);};_pScrollBar.on_apply_prop_enable=function(v){var enable=v;if(v==undefined){enable=this.enable;}if(this.incbutton){this.incbutton._setEnable(enable);}if(this.decbutton){this.decbutton._setEnable(enable);}if(this.trackbar){this.trackbar._setEnable(enable);}};_pScrollBar.on_fire_onscroll=function(pos,strType,isscrolling,sdir,evtkind){if(this.onscroll&&this.onscroll._has_handlers){pos=(pos+0.5)|0;var eventid=(this.direction=="vertical")?"onvscroll":"onhscroll";var evt=new nexacro.ScrollEventInfo(this,eventid,pos,strType,this,this.parent);if(isscrolling!==undefined){evt.touchscrolling=isscrolling;evt.touchscrolldir=sdir;}evt._evtkind=evtkind;var ret=this.onscroll._fireEvent(this,evt);return ret;}return true;};_pScrollBar.on_incbutton_lbuttondown=function(obj){var max=this._max;var pos=this._pos;var nInc=this.line;if(nInc== -1){nInc=this._lineup;}var newpos=pos+nInc;var temp=this._getIncNewPosPixel();if(temp!==undefined){newpos=temp;}var posarr;if(pos>=max){posarr=this._scroll_reverse_convert(max);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,"lastover",undefined,undefined,this.direction);}else if(newpos>=max){posarr=this._scroll_reverse_convert(max);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,(this.direction=="vertical"?"linedown":(this._isRtl()?"lineleft":"lineright")),undefined,undefined,this.direction);this.on_fire_onscroll(this.pos,"last",undefined,undefined,this.direction);}else{posarr=this._scroll_reverse_convert(newpos);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,(this.direction=="vertical"?"linedown":(this._isRtl()?"lineleft":"lineright")),undefined,undefined,this.direction);}var rc=this._rectshaft;this._resetTrackBar(rc.left,rc.top,rc.right,rc.bottom);};_pScrollBar.on_decbutton_lbuttondown=function(obj){var min=this._min;var pos=this._pos;var nDec=this.line;if(nDec== -1){nDec=this._linedown;}var newpos=pos-nDec;var temp=this._getDecNewPosPixel();if(temp!==undefined){newpos=temp;}var posarr;if(pos<=min){posarr=this._scroll_reverse_convert(min);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,"firstover",undefined,undefined,this.direction);}else if(newpos<=min){posarr=this._scroll_reverse_convert(min);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,(this.direction=="vertical"?"lineup":(this._isRtl()?"lineright":"lineleft")),undefined,undefined,this.direction);this.on_fire_onscroll(this.pos,"first",undefined,undefined,this.direction);}else{posarr=this._scroll_reverse_convert(newpos);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,(this.direction=="vertical"?"lineup":(this._isRtl()?"lineright":"lineleft")),undefined,undefined,this.direction);}var rc=this._rectshaft;this._resetTrackBar(rc.left,rc.top,rc.right,rc.bottom);};_pScrollBar._on_starttrack=function(){if(!this._is_alive){return;}var p=this.parent;p._mousepoint={x:0,y:0};nexacro.ScrollBarControl.prototype._starttrack.call(p);p._is_tracking=true;};_pScrollBar._on_endtrack=function(){if(!this._is_alive){return;}var p=this.parent;nexacro.ScrollBarControl.prototype._endtrack.call(p);p._is_tracking=false;};_pScrollBar._on_movetrack=function(x,y){if(!this._is_alive){return;}var p=this.parent;nexacro.ScrollBarControl.prototype._movetrack.call(p,x,y);};_pScrollBar.on_page_click=function(obj,nX,nY){var min=this._min;var max=this._max;var pos=this._pos;var page=this.page;var pageup=this._pageup;var pagedown=this._pagedown;if(page!= -1){pageup=page;pagedown=page;}var trackbar=this.trackbar;if(trackbar._adjust_width<=0||trackbar._adjust_height<=0){return;}var top=trackbar._adjust_top;var left=trackbar._adjust_left;var right=trackbar._adjust_left+trackbar._adjust_width;var bottom=trackbar._adjust_top+trackbar._adjust_height;var newpos=pos,eType;if(this.direction=="vertical"){if(this._start_page_navi=="pageup"&&nY<top){newpos=(pos-pageup);newpos=(newpos<min?min:newpos);eType="pageup";}else if(this._start_page_navi=="pagedown"&&nY>bottom){newpos=(pos+pagedown);newpos=(newpos>max?max:newpos);eType="pagedown";}else{eType="";}}else{if(this._start_page_navi=="pageleft"&&nX<left){newpos=(pos-pageup);newpos=(newpos<min?min:newpos);eType="pageleft";}else if(this._start_page_navi=="pageright"&&nX>right){newpos=(pos+pagedown);newpos=(newpos>max?max:newpos);eType="pageright";}else{eType="";}if(this._isRtl()&&eType){if(eType=="pageleft"){eType="pageright";}else{eType="pageleft";}}}if(this._pos==newpos){return;}var posarr=this._scroll_reverse_convert(newpos);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,eType,undefined,undefined,this.direction);if(this.direction=="vertical"){if(nY<top&&newpos==min){this.on_fire_onscroll(this.pos,"first",undefined,undefined,this.direction);}else if(nY>bottom&&newpos==max){this.on_fire_onscroll(this.pos,"last",undefined,undefined,this.direction);}else{if(newpos==min){this.on_fire_onscroll(this.pos,"first",undefined,undefined,this.direction);}else if(newpos==max){this.on_fire_onscroll(this.pos,"last",undefined,undefined,this.direction);}}}else{if(nX<left&&newpos==min){this.on_fire_onscroll(this.pos,"first",undefined,undefined,this.direction);}else if(nX>right&&newpos==max){this.on_fire_onscroll(this.pos,"last",undefined,undefined,this.direction);}else{if(newpos==min){this.on_fire_onscroll(this.pos,"first",undefined,undefined,this.direction);}else if(newpos==max){this.on_fire_onscroll(this.pos,"last",undefined,undefined,this.direction);}}}var rc=this._rectshaft;this._resetTrackBar(rc.left,rc.top,rc.right,rc.bottom);};_pScrollBar.set_direction=function(v){if(this.direction!=v){switch(v){case "vertical":case "horizontal":this.direction=v;this._recalcLayout();break;}}return v;};_pScrollBar._scroll_convert_pixel=function(v){return v;};_pScrollBar._scroll_reverse_convert=function(v){return [v,v];};_pScrollBar._setPos=function(v,evtkind,bfireevent){if(v<this.min){v=this.min;}if(v>this.max){v=this.max;}if(this.pos!=v){this.pos=v;this._pos=this._scroll_convert_pixel(v);var rc=this._rectshaft;this._resetTrackBar(rc.left,rc.top,rc.right,rc.bottom);}if(bfireevent!==false){this.on_fire_onscroll(this.pos,"none",undefined,undefined,evtkind);}};_pScrollBar._setScrollPos=function(si_pos){if(this._is_tracking){return;}var posarr=this._scroll_reverse_convert(si_pos);this.pos=posarr[0];this._pos=posarr[1];if(this._pos<this._min){this.pos=this.min;this._pos=this._min;}if(this._pos>this._max){this.pos=this.max;this._pos=this._max;}this._recalcLayout();};_pScrollBar.set_min=function(min){min=parseInt(min);var posarr=this._scroll_reverse_convert(min);this.min=posarr[0];this._min=posarr[1];if(this._pos<this._min){this.pos=this.min;this._pos=this._min;}this._recalcLayout();};_pScrollBar.set_max=function(max){max=parseInt(max);var posarr=this._scroll_reverse_convert(max);this.max=posarr[0];this._max=posarr[1];if(this._pos>this._max){this.pos=this.max;this._pos=this._max;}this._recalcLayout();};_pScrollBar._setScrollInfo=function(left,top,width,height,si_min,si_max,si_line,si_page,si_view,si_enable,si_pos){var posarr=this._scroll_reverse_convert(si_min);this.min=posarr[0];this._min=posarr[1];posarr=this._scroll_reverse_convert(si_max,false,true);this.max=posarr[0];this._max=posarr[1];this._orgmax=si_max;this.line=si_line;this.page=si_page;this.view=si_view;posarr=this._scroll_reverse_convert(si_pos);this.pos=posarr[0];this._pos=posarr[1];if(this._pos<this._min){this.pos=this.min;this._pos=this._min;}if(this._pos>this._max){this.pos=this.max;this._pos=this._max;}var old_left=this._adjust_left;var old_top=this._adjust_top;var old_width=this._adjust_width;var old_height=this._adjust_height;var bsize=false;if(old_left!=left||old_top!=top||old_width!=width||old_height!=height){bsize=true;}if(bsize){this.move(left,top,width,height,null,null);var control_elem=this._control_element;if(control_elem){control_elem.setElementPosition(this._adjust_left,this._adjust_top);control_elem.setElementSize(this._adjust_width,this._adjust_height);if(old_left!=this._adjust_left||old_top!=this._adjust_top){this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(old_width!=this._adjust_width||old_height!=this._adjust_height){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}this._recalcLayout();this._setEnable(si_enable);};_pScrollBar._recalcLayout=function(){var control_elem=this._control_element;if(control_elem&&this._is_created_contents){var client_width=control_elem.client_width;var client_height=control_elem.client_height;if(client_width<=0||client_height<=0){return;}var client_left=this._getClientLeft();var client_top=this._getClientTop();var l=0,r=0,t=0,b=0;var decsize=this.decbuttonsize!=undefined?this.decbuttonsize: -1;var incsize=this.incbuttonsize!=undefined?this.incbuttonsize: -1;var tracksize=0,diff;var shaftsize,view,barminsize,baroutsize,size;if(this.direction=="vertical"){if(decsize<0){decsize=client_width;}if(incsize<0){incsize=client_width;}diff=client_height-(decsize+incsize);if(diff<0){decsize=((client_height+(client_height%2))/2)|0;incsize=client_height-decsize;}var client_bottom=client_top+client_height;l=client_left;r=l+client_width;t=client_top+decsize;b=client_bottom-incsize;if(decsize==0){this.decbutton.move(l, -100,client_width,decsize);}else{this.decbutton.move(l,client_top,client_width,decsize);}if(incsize==0){this.incbutton.move(l, -100,client_width,client_height-b);}else{this.incbutton.move(l,b,client_width,client_height-b);}shaftsize=b-t;if(shaftsize>0){view=this.view;barminsize=this.barminsize!=undefined?this.barminsize: -1;baroutsize=this.baroutsize!=undefined?this.baroutsize: -1;size=this._max-this._min;if(baroutsize<0){baroutsize=r-l;}if(barminsize<0){barminsize=((r-l)*0.60)|0;if(barminsize<nexacro.ScrollBarControl.TRACKBAR_SIZE_MIN){barminsize=nexacro.ScrollBarControl.TRACKBAR_SIZE_MIN;}}if(view<0){view=1;}if(shaftsize>baroutsize){if(this.trackbarsize!=undefined&&this.trackbarsize>0){this._trackbarsize=this.trackbarsize;}else{tracksize=(shaftsize*(view/(view+size)))|0;this._trackbarsize=(tracksize<barminsize)?barminsize:tracksize;}}else{this._trackbarsize=0;}}else{this._trackbarsize=0;}if(shaftsize<this._trackbarsize){this._trackbarsize=shaftsize;}}else{if(decsize<0){decsize=client_height;}if(incsize<0){incsize=client_height;}diff=client_width-(decsize+incsize);if(diff<0){decsize=((client_width+(client_width%2))/2)|0;incsize=client_width-decsize;}var client_right=client_left+client_width;l=client_left+decsize;r=client_right-incsize;t=client_top;b=client_top+client_height;if(decsize==0){this.decbutton.move(client_left, -100,decsize,client_height);}else{this.decbutton.move(client_left,t,decsize,client_height);}if(incsize==0){this.incbutton.move(r, -100,client_width-r,client_height);}else{this.incbutton.move(r,t,client_width-r,client_height);}shaftsize=r-l;if(shaftsize>0){view=this.view;barminsize=this.barminsize!=undefined?this.barminsize: -1;baroutsize=this.baroutsize!=undefined?this.baroutsize: -1;size=this._max-this._min;if(baroutsize<0){baroutsize=b-t;}if(barminsize<0){barminsize=parseInt((b-t)*0.60);if(barminsize<nexacro.ScrollBarControl.TRACKBAR_SIZE_MIN){barminsize=nexacro.ScrollBarControl.TRACKBAR_SIZE_MIN;}}if(view<0){view=1;}this._barminsize=barminsize;this._baroutsize=baroutsize;if(shaftsize>baroutsize){if(this.trackbarsize!=undefined&&this.trackbarsize>0){this._trackbarsize=this.trackbarsize;}else{tracksize=(shaftsize*(view/(view+size)))|0;this._trackbarsize=(tracksize<barminsize)?barminsize:tracksize;}}else{this._trackbarsize=0;}}else{this._trackbarsize=0;}if(shaftsize<this._trackbarsize){this._trackbarsize=shaftsize;}}this._rectshaft.set(l,t,r-l,b-t);this._resetTrackBar(l,t,r,b);}};_pScrollBar._resetTrackBar=function(l,t,r,b){if(this._trackbarsize<=0){if(this.trackbar){this.trackbar.set_visible(false);}return;}if(this.trackbar._is_created!=true){this.trackbar.on_created(this._getWindow());}this.trackbar.set_visible(true);var rl=0,rt=0,rr=0,rb=0;var min=this._min;var pos=this._pos;var tracksize=this._trackbarsize;var size=this._max-this._min;if(size>0){var shaftsize,trackstart;if(this.direction=="vertical"){shaftsize=b-t;trackstart=((pos-min)*(shaftsize-tracksize)/size)|0;rl=l;rr=r;rt=t+trackstart;rb=rt+tracksize;if(rb>b){rb=b;rt=b-tracksize;}}else{shaftsize=r-l;trackstart=parseInt((pos-min)*(shaftsize-tracksize)/size);rl=l+trackstart;rr=rl+tracksize;rt=t;rb=b;if(rr>r){rr=r;rl=r-tracksize;}}}if((rl<=0&&rt<=0&&rr-rl<=0&&rb-rt<=0)){this._set_real=true;this._setRealEnable(false);this.trackbar.set_visible(false);}else if(this._set_real){this._set_real=false;this._setRealEnable(true);this.trackbar.set_visible(true);}if(!this._reset_trackbar_fix){this.trackbar.move(rl,rt,rr-rl,rb-rt);}this._reset_trackbar_fix=false;};_pScrollBar._setRealEnable=function(enable){if(enable==undefined){enable=this.enable;}if(this._real_enable!=enable){this._real_enable=enable;this._is_enable_changing=true;this._changeStatus("disabled",!enable);this._is_enable_changing=false;if(this.incbutton){this.incbutton._setEnable(enable);}if(this.decbutton){this.decbutton._setEnable(enable);}if(this.trackbar){this.trackbar._setEnable(enable);}}};_pScrollBar._moveTrackBar=function(rctrack,rcbound){var width=rctrack.right-rctrack.left;var height=rctrack.bottom-rctrack.top;if(rctrack.left<rcbound.left){rctrack.left=rcbound.left;rctrack.right=rctrack.left+width;}if(rctrack.right>rcbound.right){rctrack.right=rcbound.right;rctrack.left=rctrack.right-width;}if(rctrack.top<rcbound.top){rctrack.top=rcbound.top;rctrack.bottom=rctrack.top+height;}if(rctrack.bottom>rcbound.bottom){rctrack.bottom=rcbound.bottom;rctrack.top=rctrack.bottom-height;}this.trackbar.move(rctrack.left,rctrack.top,rctrack.right-rctrack.left,rctrack.bottom-rctrack.top);};_pScrollBar._starttrack=function(){this.on_fire_onscroll(this.pos,"trackstart",undefined,undefined,this.direction);};_pScrollBar._endtrack=function(){this.on_fire_onscroll(this.pos,"trackend",undefined,undefined,this.direction);var rc=this._rectshaft;this._resetTrackBar(rc.left,rc.top,rc.right,rc.bottom);};_pScrollBar._movetrack=function(x,y){var nX=x;var nY=y;var _window=this._getWindow();if(_window&&(_window._wheelZoom!=undefined)){nX=nX*100/_window._wheelZoom;nY=nY*100/_window._wheelZoom;}var min=this._min;var max=this._max;var pos=this._pos;var nDiff=0;var size=max-min;var newpos=pos;var trackbar=this.trackbar;var rctrackorigin={left:trackbar._adjust_left,top:trackbar._adjust_top,right:trackbar._adjust_left+trackbar._adjust_width,bottom:trackbar._adjust_top+trackbar._adjust_height};var w=rctrackorigin.right-rctrackorigin.left;var h=rctrackorigin.bottom-rctrackorigin.top;if(w<=0||h<=0){return;}var rctrack={left:rctrackorigin.left,top:rctrackorigin.top,right:rctrackorigin.right,bottom:rctrackorigin.bottom};var rc;if(this.direction=="vertical"){rc=this._rectshaft;nDiff=nY-this._mousepoint.y;if((nDiff<0&&rctrackorigin.top>rc.top)||(nDiff>0&&rctrackorigin.bottom<rc.bottom)){rctrack.top+=nDiff;rctrack.bottom+=nDiff;newpos=(size*(rctrack.top-rc.top)/((rc.bottom-rc.top)-(rctrack.bottom-rctrack.top)));this._moveTrackBar(rctrack,rc);if(trackbar._adjust_top-rctrackorigin.top==0){this._mousepoint.x=nX;this._mousepoint.y=nY;}else{this._mousepoint.x=nX;this._mousepoint.y=this._mousepoint.y+(trackbar._adjust_top-rctrackorigin.top);}}}else{rc=this._rectshaft;nDiff=nX-this._mousepoint.x;if((nDiff<0&&rctrackorigin.left>rc.left)||(nDiff>0&&rctrackorigin.right<rc.right)){rctrack.left+=nDiff;rctrack.right+=nDiff;newpos=parseInt(size*((rctrack.left-rc.left)/((rc.right-rc.left)-(rctrack.right-rctrack.left))));this._moveTrackBar(rctrack,rc);if(trackbar._adjust_left-rctrackorigin.left==0){this._mousepoint.x=nX;this._mousepoint.y=nY;}else{this._mousepoint.x=this._mousepoint.x+(trackbar._adjust_left-rctrackorigin.left);this._mousepoint.y=nY;}}}var posarr;if(newpos<=min){posarr=this._scroll_reverse_convert(min);this.pos=posarr[0];this._pos=posarr[1];if(!(this._trackover&nexacro.ScrollBarControl.TRACKFIRSTOVER)){this.on_fire_onscroll(this.pos,"trackfirst",undefined,undefined,this.direction);this._trackover=nexacro.ScrollBarControl.TRACKFIRSTOVER;}else{this.on_fire_onscroll(this.pos,"trackfirstover",undefined,undefined,this.direction);}}else if(newpos>=max){posarr=this._scroll_reverse_convert(max);this.pos=posarr[0];this._pos=posarr[1];if(!(this._trackover&nexacro.ScrollBarControl.TRACKLASTOVER)){this.on_fire_onscroll(this.pos,"tracklast",undefined,undefined,this.direction);this._trackover=nexacro.ScrollBarControl.TRACKLASTOVER;}else{this.on_fire_onscroll(this.pos,"tracklastover",undefined,undefined,this.direction);}}else{posarr=this._scroll_reverse_convert(newpos);this.pos=posarr[0];this._pos=posarr[1];this.on_fire_onscroll(this.pos,"track",undefined,undefined,this.direction);this._trackover=0;}};_pScrollBar._getIncNewPosPixel=function(){};_pScrollBar._getDecNewPosPixel=function(){};delete _pScrollBar;}if(!nexacro.ScrollIndicatorControl){nexacro.ScrollIndicatorControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.ScrollBarControl.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pScrollIndicatorControl=nexacro._createPrototype(nexacro.ScrollBarControl,nexacro.ScrollIndicatorControl);nexacro.ScrollIndicatorControl.prototype=_pScrollIndicatorControl;_pScrollIndicatorControl.accessibilityenable=false;_pScrollIndicatorControl._type_name="ScrollIndicatorControl";_pScrollIndicatorControl._is_subcontrol=true;_pScrollIndicatorControl._is_repeat=false;_pScrollIndicatorControl.on_get_css_assumedtypename=function(){if(this.direction=="vertical"){return "VScrollIndicatorControl";}else if(this.direction=="horizontal"){return "HScrollIndicatorControl";}return this._type_name;};_pScrollIndicatorControl.on_create_contents=function(){var control_elem=this._control_element;if(control_elem){this.trackbar=new nexacro.Button("trackbar",0,0,0,0,null,null,null,null,null,null,this);this.trackbar._use_translate_move=true;this.trackbar.accessibilityenable=false;this.trackbar._setControl();this.trackbar.createComponent();}};_pScrollIndicatorControl.on_created_contents=function(){this._recalcLayout();};_pScrollIndicatorControl.on_destroy_contents=function(){if(this.trackbar){this.trackbar.destroy();this.trackbar=null;}this._rectshaft=null;this._mousepoint=null;};_pScrollIndicatorControl.on_create_contents_command=function(){this._recalcLayout();var str="";if(this.trackbar){str+=this.trackbar.createCommand();}return str;};_pScrollIndicatorControl.on_attach_contents_handle=function(win){if(this.trackbar){this.trackbar.attachHandle(win);}};_pScrollIndicatorControl.set_pos=function(v){this._setPos(v);};_pScrollIndicatorControl.on_apply_prop_enable=function(v){var enable=v;if(v==undefined){enable=this.enable;}if(this.trackbar){this.trackbar._setEnable(enable);}};_pScrollIndicatorControl._setRealEnable=function(enable){if(enable==undefined){enable=this.enable;}if(this._real_enable!=enable){this._real_enable=enable;if(this.trackbar){this.trackbar._setEnable(enable);}}};_pScrollIndicatorControl._recalcLayout=function(){var control_elem=this._control_element;if(control_elem&&this._is_created_contents){var client_width=control_elem.client_width;var client_height=control_elem.client_height;if(client_width<=0||client_height<=0){return;}var client_left=this._getClientLeft();var client_top=this._getClientTop();var l=0,r=0,t=0,b=0;var shaftsize,tracksize=0;var view,barminsize,baroutsize,size;if(this.direction=="vertical"){l=client_left;r=l+client_width;t=client_top;b=client_top+client_height;shaftsize=client_height;if(shaftsize>0){view=this.view;barminsize=this.barminsize!=undefined?this.barminsize: -1;baroutsize=this.baroutsize!=undefined?this.baroutsize: -1;size=this._max-this._min;if(baroutsize<0){baroutsize=client_width;}if(barminsize<0){barminsize=(client_width*0.60)|0;if(barminsize<nexacro.ScrollIndicatorControl.TRACKBAR_SIZE_MIN){barminsize=nexacro.ScrollIndicatorControl.TRACKBAR_SIZE_MIN;}}if(view<0){view=1;}if(shaftsize>baroutsize){if(this.trackbarsize!=undefined&&this.trackbarsize>0){this._trackbarsize=this.trackbarsize;}else{tracksize=(shaftsize*(view/(view+size)))|0;this._trackbarsize=(tracksize<barminsize)?barminsize:tracksize;}}else{this._trackbarsize=0;}}else{this._trackbarsize=0;}if(shaftsize<this._trackbarsize){this._trackbarsize=shaftsize;}}else{l=client_left;r=l+client_width;t=client_top;b=client_top+client_height;shaftsize=client_width;if(shaftsize>0){view=this.view;barminsize=this.barminsize!=undefined?this.barminsize: -1;baroutsize=this.baroutsize!=undefined?this.baroutsize: -1;size=this._max-this._min;if(baroutsize<0){baroutsize=client_height;}if(barminsize<0){barminsize=parseInt(client_height*0.60)|0;if(barminsize<nexacro.ScrollIndicatorControl.TRACKBAR_SIZE_MIN){barminsize=nexacro.ScrollIndicatorControl.TRACKBAR_SIZE_MIN;}}if(view<0){view=1;}this._barminsize=barminsize;this._baroutsize=baroutsize;if(shaftsize>baroutsize){if(this.trackbarsize!=undefined&&this.trackbarsize>0){this._trackbarsize=this.trackbarsize;}else{tracksize=(shaftsize*(view/(view+size)))|0;this._trackbarsize=(tracksize<barminsize)?barminsize:tracksize;}}else{this._trackbarsize=0;}}else{this._trackbarsize=0;}if(shaftsize<this._trackbarsize){this._trackbarsize=shaftsize;}}this._rectshaft.set(l,t,r-l,b-t);this._resetTrackBar(l,t,r,b);}};_pScrollBar.set_imgoutsize=nexacro._emptyFn;_pScrollIndicatorControl._on_repeat=nexacro._emptyFn;_pScrollIndicatorControl._on_startrepeat=nexacro._emptyFn;_pScrollIndicatorControl._on_starttrack=nexacro._emptyFn;_pScrollIndicatorControl._on_endtrack=nexacro._emptyFn;_pScrollIndicatorControl._on_movetrack=nexacro._emptyFn;_pScrollIndicatorControl.on_page_click=nexacro._emptyFn;_pScrollIndicatorControl._getIncNewPosPixel=function(){};_pScrollIndicatorControl._getDecNewPosPixel=function(){};delete _pScrollIndicatorControl;}
if(!nexacro.StepControl){nexacro.StepChangeEventInfo=function(obj,id,preindex,postindex){this.id=this.eventid=id||"onstepchanged";this.fromobject=obj._form||obj;this.fromreferenceobject=obj;this.preindex=preindex;this.postindex=postindex;};var _pEventStepChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.StepChangeEventInfo);nexacro.StepChangeEventInfo.prototype=_pEventStepChangeEventInfo;_pEventStepChangeEventInfo._type_name="StepChangeEventInfo";delete _pEventStepChangeEventInfo;nexacro.StepMouseEventInfo=function(obj,id,index,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){nexacro.ClickEventInfo.call(this,obj,id||"onstepmouse",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this.index=index<0? -1:index;};var _pEventStepMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.StepMouseEventInfo);nexacro.StepMouseEventInfo.prototype=_pEventStepMouseEventInfo;_pEventStepMouseEventInfo._type_name="StepMouseEventInfo";delete _pEventStepMouseEventInfo;nexacro.StepDragEventInfo=function(obj,id,index,dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){nexacro.DragEventInfo.call(this,obj,id||"onstepdrag",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this.index=index? -1:index;};var _pEventStepDragEventInfo=nexacro._createPrototype(nexacro.DragEventInfo,nexacro.StepDragEventInfo);nexacro.StepDragEventInfo.prototype=_pEventStepDragEventInfo;_pEventStepDragEventInfo._type_name="StepDragEventInfo";delete _pEventStepDragEventInfo;nexacro.StepControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this._items=[];this._icon_info={width:0,height:0,isloaded:false};this._form=parent;};var _pStepControl=nexacro._createPrototype(nexacro.Component,nexacro.StepControl);nexacro.StepControl.prototype=_pStepControl;_pStepControl._type_name="StepControl";_pStepControl.stepcount=0;_pStepControl.stepindex=0;_pStepControl.stepitemsize=undefined;_pStepControl.stepitemgap=undefined;_pStepControl._itemid="stepitem";_pStepControl._prestepindex=null;_pStepControl._poststepindex=null;_pStepControl._prestepcount=null;_pStepControl._poststepcount=null;_pStepControl._stepiconsize=undefined;_pStepControl._is_nc_control=true;_pStepControl._is_subcontrol=true;_pStepControl.accessibilityrole="step";_pStepControl._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"ondragend":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canstepchange":1,"onstepchanged":1};_pStepControl.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){var items=this._items;var stepButton;var stepcount=this.stepcount;for(var i=0;i<stepcount;i++ ){stepButton=items[i]=new nexacro.StepImageButtonControl(this._itemid+i,0,0,0,0,null,null,null,null,null,null,this);stepButton._is_focus_accept=false;stepButton._setEventHandler("onclick",this._on_button_onclick,this);stepButton.createComponent();}}};_pStepControl.on_created_contents=function(){var stepbutton=this._items.length?this._items[0]:null;var img=stepbutton?stepbutton._getCSSStyleValue("icon"):null;if(img){var info=this._icon_info;var size=nexacro._getImageSize(img.url,this._on_icon_onload,this);if(size){info.width=size.width;info.height=size.height;info.isloaded=true;this._setStepIconSize(size.width,size.height);}}this._updateStepLayout();this._redrawStepButton();};_pStepControl.on_destroy_contents=function(){var items=this._items;var item_len=items.length;for(var i=0;i<item_len;i++ ){items[i].destroy();items[i]=null;}this._items=[];};_pStepControl.on_create_contents_command=nexacro._emptyFn;_pStepControl.on_attach_contents_handle=nexacro._emptyFn;_pStepControl.on_change_containerRect=function(){if(this._is_created){this._redrawStepButton();}};_pStepControl.on_change_containerPos=nexacro._emptyFn;_pStepControl._on_getAccessibilityAdditionalLabel=function(){return this.stepindex+" "+this.stepcount;};_pStepControl.set_stepitemsize=function(v){if(v!==undefined){if(isNaN(v= +v)){return;}}if(this.stepitemsize!=v){this.stepitemsize=v;this.on_apply_stepitemsize();}};_pStepControl.on_apply_stepitemsize=function(){var control_elem=this.getElement();if(control_elem){this._updateStepLayout();this._redrawStepButton();}};_pStepControl.set_stepitemgap=function(v){if(v!==undefined){if(isNaN(v= +v)){return;}}if(this.stepitemgap!=v){this.stepitemgap=v;this.on_apply_stepitemgap();}};_pStepControl.on_apply_stepitemgap=function(){var control_elem=this.getElement();if(control_elem){this._updateStepLayout();this._redrawStepButton();}};_pStepControl.set_stepcount=function(v){if(isNaN(v= +v)||v<0){return;}this._prestepindex=this.stepindex;this._prestepcount=this.stepcount;this._poststepcount=v;if(this.stepcount!=v){this.stepcount=v;if(this.stepindex>=v){this.stepindex=v-1;}this.on_apply_stepcount(v);}};_pStepControl.on_apply_stepcount=function(){var control_elem=this.getElement();if(control_elem){this._updateStepLayout();this._redrawStepButton();}};_pStepControl.set_stepindex=function(v){if(isNaN(v= +v)||v<0){return;}if(this.stepindex!=v){var check_count=this.stepcount<=v||v<0;if(!check_count){this._prestepindex=this.stepindex;this._poststepindex=v;var ret=this.on_fire_canstepchange(this);if(ret){var form=this._form;if(form){ret=form.on_fire_canstepchange(this);if(ret){this.stepindex=v;this.on_apply_stepindex(v);this.on_fire_onstepchanged(this);form.on_fire_onstepchanged(this);return true;}else{var _form=this._form;if(_form){_form._createStepChangeAnimation(this._prestepindex,600);}var cur_button=this._items[v];if(cur_button){cur_button._changeStatus("focused",false);}}}}}}return false;};_pStepControl.on_apply_stepindex=function(stepindex){var control_elem=this.getElement();if(control_elem){var pre_idx=this._prestepindex;if(pre_idx!=stepindex){var pre_button=this._items[pre_idx];if(pre_button){pre_button._changeUserStatus("selected",false);}var cur_button=this._items[stepindex];if(cur_button){cur_button._changeUserStatus("selected",true);}var form=this._form;if(form){var form_control_elem=form.getElement();if(form_control_elem){form_control_elem.setElementStepIndex(stepindex);form._setHscrollPos(form_control_elem.client_width*stepindex);var comp;var comps=form.components;var comp_len=comps.length;for(var i=0;i<comp_len;i++ ){comp=comps[i];comp.on_apply_positionstep();comp._update_position();}}var layoutmanager=nexacro._getLayoutManager();if(layoutmanager){layoutmanager.setStepIndex(form,stepindex);}}}}};_pStepControl.getStepCount=function(){return this.stepcount;};_pStepControl.stepIt=function(forward,rotate){var stepindex=this.stepindex;var max_step=this.stepcount;if(forward==undefined){forward=true;}else{forward=nexacro._toBoolean(forward);}rotate=nexacro._toBoolean(rotate);if(forward){stepindex++ ;if(stepindex>=max_step){stepindex=max_step-1;if(rotate){stepindex=0;}}}else{stepindex-- ;if(stepindex<0){stepindex=0;if(rotate){stepindex=max_step-1;}}}return this.set_stepindex(stepindex);};_pStepControl._on_icon_onload=function(url,width,height){var info=this._icon_info;if(!info.isloaded){info.width=width;info.height=height;info.isloaded=true;this._setStepIconSize(width,height);this._updateStepLayout();this._redrawStepButton();}};_pStepControl._on_button_onclick=function(obj){var itemid=nexacro._toString(obj.id);var itemindex=itemid.slice(this._itemid.length);this.set_stepindex(itemindex);};_pStepControl.on_fire_canstepchange=function(obj){if(this.canstepchange&&this.canstepchange._has_handlers){var evt=new nexacro.StepChangeEventInfo(obj,"canstepchange",obj._prestepindex,obj._poststepindex);return this.canstepchange._fireCheckEvent(this,evt);}return true;};_pStepControl.on_fire_onstepchanged=function(obj){if(this.onstepchanged&&this.onstepchanged._has_handlers){var evt=new nexacro.StepChangeEventInfo(obj,"onstepchanged",obj._prestepindex,obj._poststepindex);return this.onstepchanged._fireEvent(this,evt);}};_pStepControl._redrawStepButton=function(){var stepcount=this.stepcount;if(stepcount>0){var items=this._items;var items_len=items.length;var stepindex=this.stepindex;var stepitemsize=this._getStepItemSize();var stepitemgap=this._getStepItemGap();var btn_l=0;var stepbutton,removed_item;for(var i=0;i<stepcount;i++ ){stepbutton=items[i];if(!stepbutton){stepbutton=items[i]=new nexacro.StepImageButtonControl("stepitem"+i,btn_l,0,stepitemsize,stepitemsize,null,null,null,null,null,null,this);stepbutton._is_focus_accept=false;stepbutton._setEventHandler("onclick",this._on_button_onclick,this);stepbutton.createComponent();}else{stepbutton.move(btn_l,0,stepitemsize,stepitemsize);}if(!stepbutton._is_created){stepbutton.on_created();}stepbutton.on_apply_icon();stepbutton.on_apply_iconPosition();btn_l=btn_l+stepitemsize+stepitemgap;if(stepindex==i){stepbutton._changeUserStatus("selected",true);}}if(items_len>stepcount){while(items.length!=stepcount){removed_item=items.pop();removed_item.destroy();}}}};_pStepControl._updateStepLayout=function(){var form=this._form;if(form){form._recalcStepLayout();}};_pStepControl._setStepIconSize=function(width,height){var items=this._items;if(items.length){var item=items[0];var total_w=0;var total_h=0;var border=item._getCurrentStyleBorder();if(border){total_w+=border._getBorderWidth();total_h+=border._getBorderHeight();}var padding=item._getCurrentStylePadding();if(padding){total_w+=padding.left+padding.right;total_h+=padding.top+padding.bottom;}this._stepiconsize=Math.max(width+total_w,height+total_h);}};_pStepControl._getStepItemSize=function(){var stepitemsize=this.stepitemsize;var stepiconsize=this._stepiconsize;if(nexacro._isNull(stepitemsize)&&!nexacro._isNull(stepiconsize)){return stepiconsize;}var maxsize=0;var items=this._items;if(items.length){var item=items[0];var total_w=0;var total_h=0;var border=item._getCurrentStyleBorder();if(border){total_w+=border._getBorderWidth();total_h+=border._getBorderHeight();}var padding=item._getCurrentStylePadding();if(padding){total_w+=padding.left+padding.right;total_h+=padding.top+padding.bottom;}var info=this._icon_info;if(!nexacro._isNull(stepitemsize)){maxsize=stepitemsize+Math.max(total_w,total_h);}else{maxsize=Math.max(info.width+total_w,info.height+total_h);}}return maxsize;};_pStepControl._getStepItemGap=function(){return this.stepitemgap?this.stepitemgap:3;};_pStepControl._getItemAreaSize=function(){var total_w=0;var total_h=0;var padding=this._getCurrentStylePadding();if(padding){total_w+=padding.left+padding.right;total_h+=padding.top+padding.bottom;}var border=this._getCurrentStyleBorder();if(border){total_w+=border._getBorderWidth();total_h+=border._getBorderHeight();}var stepcount=this.stepcount;var stepitemsize=this._getStepItemSize();var stepitemgap=this._getStepItemGap();total_w+=stepitemsize*stepcount+stepitemgap*(stepcount-1);total_h+=stepitemsize;return {width:total_w,height:total_h};};delete _pStepControl;}
if(!nexacro.Animation){"use strict";var _process=true;(function(root,factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof module==='object'&&module.exports){module.exports=factory();}else{root.anime=factory();}}(this,function(){var defaultInstanceSettings={update:undefined,begin:undefined,run:undefined,complete:undefined,loop:1,direction:'normal',autoplay:false,offset:0};var defaultTweenSettings={duration:1000,delay:0,easing:'easeOutElastic',elasticity:500,round:0};var validTransforms=['translateX','translateY','translateZ','rotate','rotateX','rotateY','rotateZ','scale','scaleX','scaleY','scaleZ','skewX','skewY'];var transformString;function stringContains(str,text){return str.indexOf(text)> -1;}var crossBrowserSplit;crossBrowserSplit=function(undef){var nativeSplit=String.prototype.split,compliantExecNpcg=/()??/.exec("")[1]===undef,self;self=function(str,separator,limit){if(Object.prototype.toString.call(separator)!=="[object RegExp]"){return nativeSplit.call(str,separator,limit);}var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0,separator2,match,lastIndex,lastLength;separator=new RegExp(separator.source,flags+"g");str+="";if(!compliantExecNpcg){separator2=new RegExp("^"+separator.source+"$(?!\\s)",flags);}limit=limit===undef? -1>>>0:limit>>>0;while(match=separator.exec(str)){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(str.slice(lastLastIndex,match.index));if(!compliantExecNpcg&&match.length>1){match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++ ){if(arguments[i]===undef){match[i]=undef;}}});}if(match.length>1&&match.index<str.length){Array.prototype.push.apply(output,match.slice(1));}lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=limit){break;}}if(separator.lastIndex===match.index){separator.lastIndex++ ;}}if(lastLastIndex===str.length){if(lastLength||!separator.test("")){output.push("");}}else{output.push(str.slice(lastLastIndex));}return output.length>limit?output.slice(0,limit):output;};return self;}();var is={arr:function(a){return nexacro._isArray(a);},obj:function(a){return stringContains(Object.prototype.toString.call(a),'Object');},dom:function(a){return a.nodeType;},str:function(a){return typeof a==='string';},fnc:function(a){return typeof a==='function';},und:function(a){return typeof a==='undefined';},hex:function(a){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a);},rgb:function(a){return /^rgb/.test(a);},hsl:function(a){return /^hsl/.test(a);},col:function(a){return (is.hex(a)||is.rgb(a)||is.hsl(a)||isNamedColor(a));}};var bezier=function(){var kSplineTableSize=11;var kSampleStepSize=1.0/(kSplineTableSize-1.0);function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;}function B(aA1,aA2){return 3.0*aA2-6.0*aA1;}function C(aA1){return 3.0*aA1;}function calcBezier(aT,aA1,aA2){return ((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;}function getSlope(aT,aA1,aA2){return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);}function binarySubdivide(aX,aA,aB,mX1,mX2){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>0.0000001&& ++i<10)return currentT;}function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){for(var i=0;i<4; ++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;}function _bezier(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1)){return;}var sampleValues=new Array(kSplineTableSize);if(mX1!==mY1||mX2!==mY2){for(var i=0;i<kSplineTableSize; ++i){sampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2);}}function getTForX(aX){var intervalStart=0.0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX; ++currentSample){intervalStart+=kSampleStepSize;}-- currentSample;var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=0.001){return newtonRaphsonIterate(aX,guessForT,mX1,mX2);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2);}}return function(x){if(mX1===mY1&&mX2===mY2){return x;}if(x===0){return 0;}if(x===1){return 1;}return calcBezier(getTForX(x),mY1,mY2);};}return _bezier;}();var easings=function(){var names=['Quad','Cubic','Quart','Quint','Sine','Expo','Circ','Back','Elastic','Bounce'];function elastic(t,p){return t===0||t===1?t: -Math.pow(2,10*(t-1))*Math.sin((((t-1)-(p/(Math.PI*2.0)*Math.asin(1)))*(Math.PI*2))/p);}function bounce(t){if(t<(1/2.75)){return (7.5625*t*t);}else if(t<(2/2.75)){t-=(1.5/2.75);return (7.5625*(t)*t+0.75);}else if(t<(2.5/2.75)){t-=(2.25/2.75);return (7.5625*(t)*t+.9375);}else{t-=(2.625/2.75);return (7.5625*(t)*t+.984375);}}var equations={In:[[0.550,0.085,0.680,0.530],[0.550,0.055,0.675,0.190],[0.895,0.030,0.685,0.220],[0.755,0.050,0.855,0.060],[0.470,0.000,0.745,0.715],[0.950,0.050,0.795,0.035],[0.600,0.040,0.980,0.335],[0.600, -0.280,0.735,0.045],elastic,function(t){return 1-bounce(1-t);}],Out:[[0.250,0.460,0.450,0.940],[0.215,0.610,0.355,1.000],[0.165,0.840,0.440,1.000],[0.230,1.000,0.320,1.000],[0.390,0.575,0.565,1.000],[0.190,1.000,0.220,1.000],[0.075,0.820,0.165,1.000],[0.175,0.885,0.320,1.275],function(t,f){return 1-elastic(1-t,f);},bounce],InOut:[[0.455,0.030,0.515,0.955],[0.645,0.045,0.355,1.000],[0.770,0.000,0.175,1.000],[0.860,0.000,0.070,1.000],[0.445,0.050,0.550,0.950],[1.000,0.000,0.000,1.000],[0.785,0.135,0.150,0.860],[0.680, -0.550,0.265,1.550],function(t,f){return t<.5?elastic(t*2,f)/2:1-elastic(t* -2+2,f)/2;},function(t){return t<.5?(1-bounce(1-(t*2)))*0.5:bounce(t*2-1)*0.5+0.5;}]};var functions={linear:bezier(0.250,0.250,0.750,0.750)};var that=this;for(var type in equations){if(equations.hasOwnProperty(type)){for(var i=0;i<equations[type].length;i++ ){var f=equations[type][i];functions[('ease'+type+names[i]).toLowerCase()]=is.fnc(f)?f:bezier.apply(that,f);}}}return functions;}();function stringToHyphens(str){return str.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();}function selectString(str){if(is.col(str)){return;}try{}catch(e){return;}}function arrayLength(arr){return arr.length;}function filterArray(arr,callback){var len=arr.length;var thisArg=arguments.length>=2?arguments[1]:void 0;var result=[];for(var i=0;i<len;i++ ){if(i in arr){var val=arr[i];if(callback.call(thisArg,val,i,arr)){result.push(val);}}}return result;}function flattenArray(arr){return arr.reduce(function(a,b){return a.concat(is.arr(b)?flattenArray(b):b);},[]);}function toArray(o){if(is.arr(o)){return o;}if(is.str(o)){o=selectString(o)||o;}return [o];}function arrayContains(arr,val){return arr.some(function(a){return a===val;});}function objectHas(obj,prop){return obj.hasOwnProperty(prop);}function cloneObject(o){var clone={};for(var p in o){clone[p]=o[p];}return clone;}function replaceObjectProps(o1,o2){var o=cloneObject(o1);for(var p in o1){o[p]=objectHas(o2,p)?o2[p]:o1[p];}return o;}function mergeObjects(o1,o2){var o=cloneObject(o1);for(var p in o2){o[p]=is.und(o1[p])?o2[p]:o1[p];}return o;}function rgbToRgba(rgbValue){var rgb=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(rgbValue);return rgb?'rgba('+rgb[1]+',1)':rgbValue;}function hexToRgba(hexValue){var rgx=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;var hex=hexValue.replace(rgx,function(m,r,g,b){return r+r+g+g+b+b;});var rgb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);var r=parseInt(rgb[1],16);var g=parseInt(rgb[2],16);var b=parseInt(rgb[3],16);return 'rgba('+r+','+g+','+b+',1)';}function hslToRgba(hslValue){var hsl=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(hslValue)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(hslValue);var h=parseInt(hsl[1])/360;var s=parseInt(hsl[2])/100;var l=parseInt(hsl[3])/100;var a=hsl[4]||1;function hue2rgb(p,q,t){if(t<0){t+=1;}if(t>1){t-=1;}if(t<1/6){return p+(q-p)*6*t;}if(t<1/2){return q;}if(t<2/3){return p+(q-p)*(2/3-t)*6;}return p;}var r,g,b;if(s==0){r=g=b=l;}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}return 'rgba('+(r*255)+','+(g*255)+','+(b*255)+','+a+')';}function colorToRgb(val){if(is.rgb(val)){return rgbToRgba(val);}if(is.hex(val)){return hexToRgba(val);}if(is.hsl(val)){return hslToRgba(val);}if(isNamedColor(val)){return hexToRgba(nexacro._xreNamedColorList[val]||'#000000');}}function getUnit(val){var split=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg|rad|turn)?/.exec(val);if(split){return split[2];}}function getTransformUnit(propName){if(stringContains(propName,'translate')){return 'px';}if(stringContains(propName,'rotate')||stringContains(propName,'skew')){return 'deg';}}function parseFloatValue(val){return parseFloat(val);}function minMaxValue(val,min,max){return Math.min(Math.max(val,min),max);}function getFunctionValue(val,animatable){if(!is.fnc(val)){return val;}return val(animatable.target,animatable.id,animatable.total);}function getCSSValue(el,prop){if(prop in el.style){return getComputedStyle(el).getPropertyValue(stringToHyphens(prop))||'0';}}function getAnimationType(el,prop){if(is.dom(el)&&arrayContains(validTransforms,prop)){return 'transform';}if(is.dom(el)&&(el.getAttribute(prop)||(is.svg(el)&&el[prop]))){return 'attribute';}if(is.dom(el)&&(prop!=='transform'&&getCSSValue(el,prop))){return 'css';}if(el[prop]!=null){return 'object';}}function getTransformValue(el,propName){var defaultUnit=getTransformUnit(propName);var defaultVal=stringContains(propName,'scale')?1:0+defaultUnit;var str=el.style.transform;if(!str){return defaultVal;}var match=[];var props=[];var values=[];var rgx=/(\w+)\((.+?)\)/g;while(match=rgx.exec(str)){props.push(match[1]);values.push(match[2]);}var value=values.filter(function(val,i){return (props[i]===propName);});return arrayLength(value)?value[0]:defaultVal;}function getOriginalTargetValue(target,propName){switch(getAnimationType(target,propName)){case 'transform':return getTransformValue(target,propName);case 'css':return getCSSValue(target,propName);case 'attribute':return target.getAttribute(propName);}return target[propName]||0;}function getRelativeValue(to,from){var operator=/^(\*=|\+=|-=)/.exec(to);if(!operator){return to;}var x=parseFloatValue(from);var y=parseFloatValue(to.replace(operator[0],''));switch(operator[0][0]){case '+':return x+y;case '-':return x-y;case '*':return x*y;}}function validateValue(val,unit){if(is.col(val)){return colorToRgb(val);}var originalUnit=getUnit(val);var unitLess=originalUnit?val.substr(0,arrayLength(val)-arrayLength(originalUnit)):val;return unit?unitLess+unit:unitLess;}function isPath(val){return is.obj(val)&&objectHas(val,'totalLength');}function isNamedColor(val){return nexacro._xreNamedColorList.hasOwnProperty(val);}function setDashoffset(el){var pathLength=el.getTotalLength();el.setAttribute('stroke-dasharray',pathLength);return pathLength;}function getPath(path,percent){var el=is.str(path)?selectString(path)[0]:path;var p=percent||100;return function(prop){return {el:el,property:prop,totalLength:el.getTotalLength()*(p/100)};};}function getPathProgress(path,progress){function point(offset){var l=progress+offset>=1?progress+offset:0;return path.el.getPointAtLength(l);}var p=point(0);var p0=point( -1);var p1=point( +1);switch(path.property){case 'x':return p.x;case 'y':return p.y;case 'angle':return Math.atan2(p1.y-p0.y,p1.x-p0.x)*180/Math.PI;}}function decomposeValue(val,unit){var rgx=/-?\d*\.?\d+/g;var value=validateValue((isPath(val)?val.totalLength:val),unit)+'';return {original:value,numbers:value.match(rgx)?value.match(rgx).map(Number):[0],strings:crossBrowserSplit(value,rgx)};}function parseTargets(targets){var targetsArray=targets?(flattenArray(is.arr(targets)?targets.map(toArray):toArray(targets))):[];return targetsArray.filter(function(item,pos,self){return self.indexOf(item)===pos;});}function getAnimatables(targets){var parsed=parseTargets(targets);return parsed.map(function(t,i){return {target:t,id:i,total:arrayLength(parsed)};});}function normalizePropertyTweens(prop,tweenSettings){var settings=cloneObject(tweenSettings);if(is.arr(prop)){var l=arrayLength(prop);var isFromTo=(l===2&&!is.obj(prop[0]));if(!isFromTo){if(!is.fnc(tweenSettings.duration)){settings.duration=tweenSettings.duration/l;}}else{prop={value:prop};}}return toArray(prop).map(function(v,i){var delay=!i?tweenSettings.delay:0;var obj=is.obj(v)&&!isPath(v)?v:{value:v};if(is.und(obj.delay)){obj.delay=delay;}return obj;}).map(function(k){return mergeObjects(k,settings);});}function getProperties(instanceSettings,tweenSettings,animatables,params){var properties=[];var settings=mergeObjects(instanceSettings,tweenSettings);animatables.map(function(animatable){var props=params.props[animatable.target.id];for(var p in props){properties.push({name:p,animatableid:animatable.id,offset:settings["offset"],tweens:normalizePropertyTweens(props[p],tweenSettings)});}});return properties;}function normalizeTweenValues(tween,animatable){var t={};for(var p in tween){var value=getFunctionValue(tween[p],animatable);if(is.arr(value)){value=value.map(function(v){return getFunctionValue(v,animatable);});if(arrayLength(value)===1){value=value[0];}}t[p]=value;}t.duration=parseFloatValue(t.duration);t.delay=parseFloatValue(t.delay);return t;}function normalizeEasing(val){return is.arr(val)?bezier.apply(this,val):easings[val];}function normalizeTweens(prop,animatable){var previousTween;return prop.tweens.map(function(t){var tween=normalizeTweenValues(t,animatable);var tweenValue=tween.value;var originalValue=getOriginalTargetValue(animatable.target,prop.name);var previousValue=previousTween?previousTween.to.original:originalValue;var from=is.arr(tweenValue)?tweenValue[0]:previousValue;var to=getRelativeValue(is.arr(tweenValue)?tweenValue[1]:tweenValue,from);var unit=getUnit(to)||getUnit(from)||getUnit(originalValue);tween.isPath=isPath(tweenValue);tween.from=decomposeValue(from,unit);tween.to=decomposeValue(to,unit);tween.start=previousTween?previousTween.end:prop.offset;tween.end=tween.start+tween.delay+tween.duration;tween.easing=normalizeEasing(tween.easing);tween.elasticity=(1000-minMaxValue(tween.elasticity,1,999))/1000;tween.isColor=is.col(tween.from.original);if(tween.isColor){tween.round=1;}previousTween=tween;return tween;});}var setTweenProgress={css:function(t,p,v){t.style[p]=v;},attribute:function(t,p,v){t.setAttribute(p,v);},object:function(t,p,v){(t["set_"+p]&&t["set_"+p](v))||(t[p]=v);},transform:function(t,p,v,transforms,id){if(!transforms[id]){transforms[id]=[];}transforms[id].push(""+p+""+v);}};function createAnimation(animatable,prop){var animType=getAnimationType(animatable.target,prop.name);if(animType){var tweens=normalizeTweens(prop,animatable);return {type:animType,property:prop.name,animatable:animatable,tweens:tweens,duration:tweens[arrayLength(tweens)-1].end,delay:tweens[0].delay};}}function getAnimations(animatables,properties){return flattenArray(animatables.map(function(animatable){return properties.map(function(prop){if(prop.animatableid==animatable.id){return createAnimation(animatable,prop);}});})).filter(function(a){return !is.und(a);});}function getInstanceTimings(type,animations,tweenSettings){var math=(type==='delay')?Math.min:Math.max;return arrayLength(animations)?math.apply(Math,animations.map(function(anim){return anim[type];})):tweenSettings[type];}function createNewInstance(params){var instanceSettings=replaceObjectProps(defaultInstanceSettings,params);var tweenSettings=replaceObjectProps(defaultTweenSettings,params);var animatables=getAnimatables(params.targets);var properties=getProperties(instanceSettings,tweenSettings,animatables,params);var animations=getAnimations(animatables,properties);return mergeObjects(instanceSettings,{children:[],animatables:animatables,animations:animations,duration:getInstanceTimings('duration',animations,tweenSettings),delay:getInstanceTimings('delay',animations,tweenSettings)});}var activeInstances=[];var raf=0;function step(t){var activeLength=arrayLength(activeInstances);if(activeLength){var i=0;if(!Date.now){Date.now=function(){return new Date().getTime();};}while(i<activeLength){if(activeInstances[i]){activeInstances[i].tick(Date.now());}i++ ;}raf.start();}else{raf.stop();raf=0;}}function anime(params){var now,startTime,lastTime=0;var instance=createNewInstance(params);instance._rafTarget=params._rafTarget;instance.reset=function(){var direction=instance.direction;var loops=instance.loop;instance.currentTime=0;instance.progress=0;instance.paused=true;instance.began=false;instance.completed=false;instance.reversed=direction==='reverse';instance.remaining=direction==='alternate'&&loops===1?2:loops;for(var i=arrayLength(instance.children);i-- ;){var child=instance.children[i];child.seek(child.offset);child.reset();}};function toggleInstanceDirection(){instance.reversed=!instance.reversed;}function adjustTime(time){return instance.reversed?instance.duration-time:time;}function syncInstanceChildren(time){var i;var children=instance.children;if(time>=instance.currentTime){for(i=0;i<arrayLength(children);i++ ){children[i].seek(time);}}else{for(i=arrayLength(children);i-- ;){children[i].seek(time);}}}function setAnimationsProgress(insTime){var i=0,n;var transforms={};var animations=instance.animations;var animationsLength=animations.length;while(i<animationsLength){var anim=animations[i];var animatable=anim.animatable;var tweens=anim.tweens;var tweenLength=tweens.length-1;var tween=tweens[tweenLength];if(tweenLength){tween=filterArray(tweens,function(t){return (insTime<t.end);})[0]||tween;}var elapsed=minMaxValue(insTime-tween.start-tween.delay,0,tween.duration)/tween.duration;var eased=isNaN(elapsed)?1:tween.easing(elapsed,tween.elasticity);var strings=tween.to.strings;var round=tween.round;var numbers=[];var progress;var toNumbersLength=tween.to.numbers.length;for(n=0;n<toNumbersLength;n++ ){var value;var toNumber=tween.to.numbers[n];var fromNumber=tween.from.numbers[n];if(!tween.isPath){value=fromNumber+(eased*(toNumber-fromNumber));}else{value=getPathProgress(tween.value,eased*toNumber);}if(round){if(!(tween.isColor&&n>2)){value=Math.round(value*round)/round;}}numbers.push(value);}var stringsLength=strings.length;if(!stringsLength){progress=numbers[0];}else{progress=strings[0];for(var s=0;s<stringsLength;s++ ){var b=strings[s+1];var l=numbers[s];if(!isNaN(l)){if(!b){progress+=l+' ';}else{progress+=l+b;}}}}if(!isNaN(progress)&&isFinite(progress)){progress=Math.round(progress);}setTweenProgress[anim.type](animatable.target,anim.property,progress,transforms,animatable.id);anim.currentValue=progress;i++ ;}var transformsLength=0;if(Object.keys){transformsLength=Object.keys(transforms).length;}else{for(var prop in transforms){if(transforms.hasOwnProperty(prop)){transformsLength++ ;}}}if(transformsLength){for(var id=0;id<transformsLength;id++ ){if(!transformString){var t='transform';transformString=(getCSSValue(document.body,t)?t:'-webkit-'+t);}instance.animatables[id].target.style[transformString]=transforms[id].join(' ');}}instance.currentTime=insTime;instance.progress=(insTime/instance.duration)*100;}function setCallback(cb){if(instance[cb]){instance[cb](instance);}}function countIteration(){if(instance.remaining&&instance.remaining!==true){instance.remaining-- ;}}function setInstanceProgress(engineTime){var insDuration=instance.duration;var insOffset=instance.offset;var insDelay=instance.delay;var insCurrentTime=instance.currentTime;var insReversed=instance.reversed;var insTime=minMaxValue(adjustTime(engineTime),0,insDuration);if(instance.children){syncInstanceChildren(insTime);}if(insTime>=(insOffset+insDelay)&&insTime<insDuration){setAnimationsProgress(insTime);if(!instance.began&&insTime>=insDelay){instance.began=true;setCallback('begin');}setCallback('run');}else{if(insTime<=insOffset&&insCurrentTime!==0){setAnimationsProgress(0);if(insReversed){countIteration();}}if(insTime>=insDuration&&insCurrentTime!==insDuration){setAnimationsProgress(insDuration);if(!insReversed){countIteration();}}}if(engineTime>=insDuration){if(instance.remaining){startTime=now;if(instance.direction==='alternate'){toggleInstanceDirection();}}else{instance.pause();if(!instance.completed){instance.completed=true;setCallback('complete');}}lastTime=0;}setCallback('update');}instance.tick=function(t){now=t;if(!startTime){startTime=now;}var engineTime=(lastTime+now-startTime)*anime.speed;setInstanceProgress(engineTime);};instance.seek=function(time){setInstanceProgress(adjustTime(time));};instance.pause=function(){var i=activeInstances.indexOf(instance);if(i> -1){activeInstances.splice(i,1);}instance.paused=true;};instance.play=function(){if(!instance.paused){return;}instance.paused=false;startTime=0;lastTime=adjustTime(instance.currentTime);activeInstances.push(instance);if(!raf){raf=new nexacro.AnimationFrame(instance._rafTarget,step);raf.start();}};instance.reverse=function(){toggleInstanceDirection();startTime=0;lastTime=adjustTime(instance.currentTime);};instance.restart=function(){instance.pause();instance.reset();instance.play();};instance.destroy=function(){if(raf){raf.stop();raf.destroy();raf=0;}};instance.reset();if(instance.autoplay){instance.play();}return instance;}function removeTargets(targets){var targetsArray=parseTargets(targets);for(var i=arrayLength(activeInstances);i-- ;){var instance=activeInstances[i];var animations=instance.animations;for(var a=arrayLength(animations);a-- ;){if(arrayContains(targetsArray,animations[a].animatable.target)){animations.splice(a,1);if(!arrayLength(animations)){instance.pause();}}}}}function timeline(params){var tl=anime(params);tl.pause();tl.duration=0;tl.add=function(instancesParams){var i;for(i=0;i<tl.children.length;i++ ){tl.children[i].began=true;tl.children[i].completed=true;}var arrInstance=toArray(instancesParams);for(i=0;i<arrInstance.length;i++ ){var tlDuration=tl.duration;var insOffset=arrInstance[i].offset;arrInstance[i].autoplay=false;arrInstance[i].offset=is.und(insOffset)?tlDuration:getRelativeValue(insOffset,tlDuration);tl.seek(arrInstance[i].offset);var ins=anime(arrInstance[i]);if(ins.duration>tlDuration){tl.duration=ins.duration;}ins.began=true;tl.children.push(ins);}tl.reset();tl.seek(0);if(tl.autoplay){tl.restart();}return tl;};return tl;}anime.version='2.0.2';anime.speed=1;anime.running=activeInstances;anime.remove=removeTargets;anime.getValue=getOriginalTargetValue;anime.path=getPath;anime.setDashoffset=setDashoffset;anime.bezier=bezier;anime.easings=easings;anime.timeline=timeline;anime.random=function(min,max){return Math.floor(Math.random()*(max-min+1))+min;};return anime;}));nexacro.AnimationItem=function(id,componentid,props){nexacro.Object.call(this,id);this.componentid=componentid||"";this.props=props||"";};var _pAnimationItem=nexacro._createPrototype(nexacro.Object,nexacro.AnimationItem);nexacro.AnimationItem.prototype=_pAnimationItem;_pAnimationItem._type_name="AnimationItem";_pAnimationItem.set_componentid=function(componentid){if(this.componentid!=componentid){this.componentid=componentid;}};nexacro.AnimationEventInfo=function(obj,id){this.id=this.eventid=id;this.fromobject=this.fromreferenceobject=obj;this.direction=obj._anime.reversed?"reverse":"normal";this.loopcount=(obj._anime.loop===true&&obj._anime.remaining===true)?0:(obj._anime.loop===false?1:obj.loopcount-obj._anime.remaining+1);this.reversed=obj._anime.reversed;this.paused=obj._anime.paused;this.currenttime=obj._anime.currentTime;};var _pAnimationEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.AnimationEventInfo);nexacro.AnimationEventInfo.prototype=_pAnimationEventInfo;_pAnimationEventInfo._type_name="AnimationEventInfo";nexacro.Animation=function(id,parent){nexacro._EventSinkObject.call(this,id,parent);this.items=new nexacro.Collection();};var _pAnimation=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Animation);nexacro.Animation.prototype=_pAnimation;_pAnimation._type_name="Animation";_pAnimation.enableevent=true;_pAnimation.items=null;_pAnimation.loop=false;_pAnimation.loopcount=undefined;_pAnimation.direction="normal";_pAnimation.duration=1000;_pAnimation.delay=0;_pAnimation.easing="easeOutElastic";_pAnimation.beziercurve="";_pAnimation.elasticity=0;_pAnimation._anime=null;_pAnimation._event_list={"onupdate":1,"onrun":1,"onbegin":1,"oncomplete":1};_pAnimation.on_created=function(){this._createAnimeJSObject();};_pAnimation.destroy=function(){nexacro.Object.prototype.destroy.call(this);if(this._anime){this.pause();this._anime.destroy();}this._anime=null;};_pAnimation.set_enableevent=function(v){v=nexacro._toBoolean(v);if(this.enableevent!=v){this.enableevent=v;}};_pAnimation.setTargets=function(obj){this.targets=obj;};_pAnimation.set_targets=function(v){if(nexacro._isObject(v)){this.setTargets(v);}else{this.targets=nexacro._toString(v);}};_pAnimation.set_loop=function(v){var loop=nexacro._toBoolean(v)?v:false;if(this.loop!=loop){this.loop=loop;}};_pAnimation.set_loopcount=function(v){var loopcount=nexacro._isInt(v)?(v>0?v:undefined):undefined;if(this.loopcount!=loopcount){this.loopcount=loopcount;}};_pAnimation.set_direction=function(v){var direction=nexacro._toString(v);if(this.direction!=direction){this.direction=direction;}};_pAnimation.set_offset=function(v){var offset=nexacro._toInt(v);if(this.offset!=offset){this.offset=offset;}};_pAnimation.set_duration=function(v){var duration=nexacro._toInt(v);if(this.duration!=duration){this.duration=duration;}};_pAnimation.set_delay=function(v){var delay=nexacro._toInt(v);if(this.delay!=delay){this.delay=delay;}};_pAnimation.set_easing=function(v){var easing=nexacro._toString(v);if(this.easing!=easing){this.easing=easing;}};_pAnimation.set_beziercurve=function(v){var beziercurve=nexacro._toString(v);if(this.beziercurve!=beziercurve){this.beziercurve=beziercurve;}};_pAnimation.set_elasticity=function(v){var elasticity=nexacro._toInt(v);if(this.elasticity!=elasticity){this.elasticity=elasticity;}};_pAnimation.set_round=function(v){var round=nexacro._toInt(v);if(this.round!=round){this.round=round;}};_pAnimation.set_targetprops=function(v){this.targetprops=nexacro._toString(v);};_pAnimation.play=function(){if(!this._anime){this.reset();}else if(!(this.getPausedStatus()&&this.getBeginStatus())||this.getCompletedStatus()){this.pause();this.reset();}this._anime.play();};_pAnimation.stop=function(){this.pause();this.seek(0);this.reset();};_pAnimation.pause=function(){if(this._anime){this._anime.pause();}};_pAnimation.restart=function(){if(this._anime){this._anime.restart();}};_pAnimation.seek=function(time){this.play();this.pause();if(this._anime){this._anime.seek(time);}};_pAnimation.reverse=function(){if(this._anime){this._anime.reverse();}};_pAnimation.reset=function(){if(this._anime){this._anime.reset();}this._createAnimeJSObject();};_pAnimation.getReversedStatus=function(){if(this._anime){return this._anime.reversed;}return false;};_pAnimation.getCurrentTime=function(){if(this._anime){return this._anime.currentTime;}return 0;};_pAnimation.getPausedStatus=function(){if(this._anime){return this._anime.paused;}return false;};_pAnimation.getBeginStatus=function(){if(this._anime){return this._anime.began;}return false;};_pAnimation.getCompletedStatus=function(){if(this._anime){return this._anime.completed;}return false;};_pAnimation.removeTarget=function(id){var ret=null;var item=this.items[id];if(item){ret=item;this.removeChild(item.componentid);this.items.remove_item(id);}return ret;};_pAnimation.addTarget=function(id,compobj,props){var ret= -1;var item=this.items[id];if(!item){item=new nexacro.AnimationItem(id,compobj.id,props);ret=this.addChild(compobj.id,compobj);if(ret==0){ret=this.items.add_item(id,item);}}return ret;};_pAnimation.addChild=function(id,obj){if(id&&id.length<=0){return  -1;}if(!obj){throw nexacro.MakeReferenceError(this,"reference_not_define",id);}if(this[id]){throw nexacro.MakeNativeError(this,"native_exist_id",id);}this[id]=obj;return 0;};_pAnimation.removeChild=function(id){if(!id||id.length<=0){return null;}var obj=this[id];if(!obj){return null;}delete this[id];return obj;};_pAnimation._on_update=function(){if(this._refobject&&this._refobject.enableevent){this._refobject.on_fire_update();}};_pAnimation.on_fire_update=function(){if(this.onupdate&&this.onupdate._has_handlers){var evt=new nexacro.AnimationEventInfo(this,"onupdate");this.onupdate._fireEvent(this,evt);}};_pAnimation._on_begin=function(){if(this._refobject&&this._refobject.enableevent){this._refobject.on_fire_begin();}};_pAnimation.on_fire_begin=function(){if(this.onbegin&&this.onbegin._has_handlers){var evt=new nexacro.AnimationEventInfo(this,"onbegin");this.onbegin._fireEvent(this,evt);}};_pAnimation._on_run=function(){if(this._refobject&&this._refobject.enableevent){this._refobject.on_fire_run();}};_pAnimation.on_fire_run=function(){if(this.onrun&&this.onrun._has_handlers){var evt=new nexacro.AnimationEventInfo(this,"onrun");this.onrun._fireEvent(this,evt);}};_pAnimation._on_complete=function(){if(this._refobject&&this._refobject.enableevent){this._refobject.on_fire_complete();}};_pAnimation.on_fire_complete=function(){if(this.oncomplete&&this.oncomplete._has_handlers){var evt=new nexacro.AnimationEventInfo(this,"oncomplete");this.oncomplete._fireEvent(this,evt);}};_pAnimation._makeParamsObject=function(offset){var objParams={};if(this._anime){this._anime=null;}objParams._rafTarget=this.parent;var items=this.items;var targets=[];var props={};for(var i=0,n=items.length;i<n;i++ ){var item=items[i];if(item){targets.push(this[item.componentid]);eval('var prop = {'+item.props+'}');props[item.componentid]=prop;}}objParams.targets=targets;objParams.props=props;if(this.loop===true&&this.loopcount>1){objParams.loop=this.loopcount;}else{objParams.loop=this.loop;}if(this.direction.length>0){objParams.direction=this.direction;}if(this.duration>0){objParams.duration=this.duration;}if(this.delay>0){objParams.delay=this.delay;}if(this.easing=="custom"){if(this.beziercurve){objParams.easing=this.beziercurve.split(",");}}else if(this.easing){objParams.easing=this.easing.toLowerCase();}if(this.elasticity>=0){objParams.elasticity=this.elasticity;}if(this.round>0){objParams.round=this.round;}if(!isNaN(offset)){if(offset>0){objParams.offset="+="+offset;}}return objParams;};_pAnimation._createAnimeJSObject=function(){var _anime=anime(this._makeParamsObject());this._anime=_anime;_anime._refobject=this;_anime.update=this._on_update;_anime.begin=this._on_begin;_anime.run=this._on_run;_anime.complete=this._on_complete;};nexacro.AnimationTimelineItem=function(id,animationid,offset){nexacro.Object.call(this,id);this.animationid=animationid||"";this.offset=offset||0;};var _pAnimationTimelineItem=nexacro._createPrototype(nexacro.Object,nexacro.AnimationTimelineItem);nexacro.AnimationTimelineItem.prototype=_pAnimationTimelineItem;_pAnimationTimelineItem._type_name="AnimationTimelineItem";_pAnimationTimelineItem.animationid="";_pAnimationTimelineItem.offset=0;_pAnimationTimelineItem.set_offset=function(v){if(this.offset!=v){this.offset=v;}};nexacro.AnimationTimeline=function(id,parent){nexacro.Animation.call(this,id,parent);};var _pAnimationTimeline=nexacro._createPrototype(nexacro.Animation,nexacro.AnimationTimeline);nexacro.AnimationTimeline.prototype=_pAnimationTimeline;_pAnimationTimeline._type_name="AnimationTimeline";_pAnimationTimeline._makeParamsObject=function(){var objParams={};if(this._anime){this._anime=null;}objParams._rafTarget=this.parent;if(this.loop> -1){objParams.loop=this.loop;}if(this.direction.length>0){objParams.direction=this.direction;}if(this.duration>0){objParams.duration=this.duration;}if(this.delay>0){objParams.delay=this.delay;}if(this.easing){objParams.easing=this.easing;}if(this.elasticity>=0){objParams.elasticity=this.elasticity;}if(this.round>0){objParams.round=this.round;}return objParams;};_pAnimationTimeline._createAnimeJSObject=function(){this._anime=anime.timeline(this._makeParamsObject());this._anime._refobject=this;for(var i=0,len=this.items.length;i<len;i++ ){var item=this.items[i];this._anime.add(this[item.animationid]._makeParamsObject(item.offset));}this._anime.update=this._on_update;this._anime.begin=this._on_begin;this._anime.run=this._on_run;this._anime.complete=this._on_complete;};_pAnimationTimeline.addTarget=function(id,obj,offset){var ret= -1;var item=this.items[id];if(!item){item=new nexacro.AnimationTimelineItem(id,obj.id,offset);this.addChild(obj.id,obj);ret=this.items.add_item(id,item);}return ret;};_pAnimationTimeline.insertTarget=function(index,id,obj,offset){var ret= -1;var item=this.items[id];if(!item){item=new nexacro.AnimationTimelineItem(id,obj.id,offset);}else{this.items.removeTarget(id);}this.addChild(obj.id,obj);ret=this.items.insert_item(index,id,item);return ret;};}if(_process){_pAnimationItem=null;_pAnimationEventInfo=null;_pAnimation=null;_pAnimationTimelineItem=null;_pAnimationTimeline=null;}
