if(nexacro.Version!=17){var msg='넥사크로플랫폼 17용 Eco-Library 입니다.\n넥사크로플랫폼 '+nexacro.Version+'용 Eco-Library를 사용해야 합니다.';trace(msg);alert(msg);}if(!JsNamespace){var JsNamespace={namespaceCache:{},dummyNamespace:{},exist:function(name){var pThis=this;if(typeof name!='string'){throw new Error("100","[JsNamespace.exist] Invalid name, must be a string");}var cache=pThis.namespaceCache;if(cache.hasOwnProperty(name)){return true;}return false;},declare:function(name,value){if(!value){return;}var pThis=JsNamespace;var obj=pThis.getGlobalContext(),cache=pThis.namespaceCache,dummyCache=pThis.dummyNamespace,names=name.split('.'),len=names.length-1,leaf=names[len],i,nm,fullnm="";for(i=0;i<len;i++ ){nm=names[i];if(i==0){fullnm+=nm;}else{fullnm+="."+nm;}if(cache[fullnm]){obj=cache[fullnm];}else{if(!dummyCache[fullnm]){obj[nm]={};pThis.dummyNamespace[fullnm]=obj[nm];}obj=obj[nm];}}if(dummyCache[name]){var prop,dummy=dummyCache[name];for(prop in dummy){if(dummy.hasOwnProperty(prop)){if(!value.hasOwnProperty(prop)){value[prop]=dummy[prop];}}}delete dummyCache[name];}obj[leaf]=value;pThis.namespaceCache[name]=value;value._className=name;if(value.prototype!==undefined){pThis.setDebugInfo(name,value);pThis.setDebugInfo(name,value.prototype,value);}else{pThis.setDebugInfo(name,value);}return obj[leaf];},setDebugInfo:function(name,value,owner){if(!value){return;}if(!owner){owner=value;}var nm,type,prop;for(nm in value){if(value.hasOwnProperty(nm)){prop=value[nm];type=typeof prop;if(type=="function"){if(!prop._thisName){prop._thisName=nm;}if(!prop._thisOwner){prop._thisOwner=owner;}}}}},_create:Object.create||(nexacro.Browser=="IE"&&nexacro.BrowserVersion<=8?function(proto){function inheritance(){};inheritance.prototype=proto;return new inheritance();}:function(proto){return {__proto__:proto};}),_defineProperties:function(proto,properties,owner){var map=Eco.object.merge({},proto._propertiesMap||{},properties);var capitalize=Eco.string.capitalize;proto._propertiesMap=map;for(var nm in properties){if(properties.hasOwnProperty(nm)){var mName=capitalize(nm),getName="get"+mName,setName="set"+mName,mapVal=properties[nm],memberName=nm;if(mapVal.memberName!==undefined){memberName=mapVal.memberName;}if(mapVal.value!==undefined){proto._initVals[memberName]=mapVal.value;}if(mapVal.get){proto[getName]=mapVal.get;}else{proto[getName]=new Function("return this."+memberName+";");}mapVal["getter"]=getName;if(mapVal.set){proto[setName]=mapVal.set;}else{var script="";if(mapVal.checkValue){mapVal.checkValue._thisName=setName;mapVal.checkValue._thisOwner=owner;script+="\tvar newVal = this._propertiesMap[\""+nm+"\"].checkValue.call(this, value);\r\n";}else{script+="var newVal = value;\r\n";}script+="var oldVal = this."+memberName+";\r\n";script+="if ( !Eco.equals(newVal, oldVal) )\r\n";script+="{\r\n";if(mapVal.updateValue){mapVal.updateValue._thisName=setName;mapVal.updateValue._thisOwner=owner;script+="\tthis._propertiesMap[\""+nm+"\"].updateValue.call(this, newVal);\r\n";}else{script+="\tthis."+memberName+" = newVal;\r\n";}script+="\tthis._propertyChange(\""+nm+"\", newVal, oldVal);\r\n";script+="}";proto[setName]=new Function("value",script);}mapVal["setter"]=setName;}}},_defineEvents:function(proto,events){var map=Eco.object.merge({},proto._eventsMap||{});var entry;for(var nm in events){if(events.hasOwnProperty(nm)){entry=events[nm];var isString=(typeof entry==='string'),eventName=isString?entry:nm;map[eventName]=isString?{}:entry;}}proto._eventsMap=map;if(!proto["fireEvent"]){var eventHelper=this._eventHelper,func;for(var key in eventHelper){if(key!="_className"&&eventHelper.hasOwnProperty(key)){func=eventHelper[key];proto[key]=func;if(!func._thisName){func._thisName=key;}if(!func._thisOwner){func._thisOwner=eventHelper;}}}}},_eventHelper:{"_className":"JsNamespace._eventHelper",addEventHandler:function(eventName,func,scope){if(typeof eventName!=='string'){scope=func;for(var key in eventName){if(eventName.hasOwnProperty(key)){this.addEventHandler(key,eventName[key],scope);}}return;}if(!Eco.isFunction(func)){return;}var entry=this._eventsMap[eventName];if(entry){var handlers=this._handlers=this._handlers||{};handlers=handlers[eventName]=handlers[eventName]||[];if(Eco.array.indexOf(handlers,func,null,true)== -1){scope=scope||this;handlers.push({"handler":func,"scope":scope});if(entry.install&&handlers.length==1){entry.install.call(this,eventName);}}}},"insertEventHandler":function(eventName,idx,func,scope){if(!Eco.isFunction(func)){return;}var entry=this._eventsMap[eventName];if(entry){var handlers=this._handlers=this._handlers||{};handlers=handlers[eventName]=handlers[eventName]||[];if(Eco.array.indexOf(handlers,func,null,true)== -1){scope=scope||this;if(idx>handlers.length){idx=handlers.length;}handlers.splice(idx,0,{"handler":func,"scope":scope});if(entry.install&&handlers.length==1){entry.install.call(this,eventName);}}}},"findEventHandler":function(eventName,func){var handlers=this._handlers&&this._handlers[eventName];if(!handlers){return  -1;}var handler;for(var i=0,len=handlers.length;i<len;i++ ){handler=handlers[i];if(func===handler.handler){return i;}}return  -1;},"getEventHandler":function(eventName,idx){var handlers=this._handlers&&this._handlers[eventName];if(!handlers){return null;}if(idx==null){return handlers;}else{var handler=handlers[idx];if(handler){return handler.handler;}}return null;},"clearEventHandler":function(eventName){var handlers=this._handlers;if(handlers){if(handlers[eventName]){var entry=this._eventsMap[eventName];if(entry.uninstall){entry.uninstall.call(this,eventName);}delete handlers[eventName];}}},"removeEventHandler":function(eventName,func){if(typeof eventName!=='string'){Eco.object.Each(eventName,function(key,value){this.removeEventHandler(key,value);},this);return;}var entry=this._eventsMap[eventName],handlers=this._handlers&&this._handlers[eventName],index= -1;if(entry&&handlers){if(func){for(var i=0,len=handlers.length;i<len;i++ ){handler=handlers[i];if(func===handler.handler){index=i;break;}}}if(index!= -1&&handlers.length==1){if(entry.uninstall){entry.uninstall.call(this,eventName);}delete this._handlers[eventName];}else if(index!= -1){handlers.splice(index,1);}}},"fireEvent":function(eventName,e){var handlers=this._handlers&&this._handlers[eventName];if(!handlers||!handlers.length){return null;}var handler,func,scope,ret;for(var i=0,len=handlers.length;i<len;i++ ){handler=handlers[i];func=handler.handler;scope=handler.scope;ret=func.call(scope,this,e);if(e._prevented||ret===false){ret=false;break;}}return ret;},"hasEventHandler":function(eventName){return !!(this._handlers&&this._handlers[eventName]&&this._handlers[eventName].length);},"getEventHandlerLength":function(eventName){if(this._handlers&&this._handlers[eventName]){return this._handlers[eventName].length;}return 0;},getEventsNames:function(){var curCls=this.constructor;var eventsNames=curCls._eventsNames;if(!eventsNames){eventsNames=Eco.object.getPropertyNames(this._eventsMap);curCls._eventsNames=eventsNames;}return eventsNames;}},_classHelper:{_className:"JsNamespace._classHelper",_propertyChange:function(nm,newVal,oldVal){},getClassName:function(){var cls=this.constructor;return cls._className;},getPropertiesNames:function(){var curCls=this.constructor;var propertiesNames=curCls._propertiesNames;if(!propertiesNames){propertiesNames=Eco.object.getPropertyNames(this._propertiesMap);curCls._propertiesNames=propertiesNames;}return propertiesNames;},getGetter:function(propertyNm,isFunc){var props=this._propertiesMap,val=props[propertyNm];if(val){if(isFunc){return this[val.getter];}else{return val.getter;}}},getSetter:function(propertyNm,isFunc){var props=this._propertiesMap,val=props[propertyNm];if(val){if(isFunc){return this[val.setter];}else{return val.setter;}}},getPropertiesValues:function(){var property;var props=this._propertiesMap,res={};Eco.object.Each(props,function(propNm,val){res[propNm]=this[val.getter]();},this);return res;},getMethodsNames:function(){var curCls=this.constructor;var methodsNames=curCls._methodsNames;if(!methodsNames){var startsWith=Eco.string.startsWith,isFunction=Eco.isFunction,propMap=this._propertiesMap,proto=curCls.prototype;methodsNames=[];for(var nm in proto){if((nm!="constructor"&&nm!="initialize"&&nm!="toString"&&nm!="valueOf")&&isFunction(proto[nm])){if(startsWith(nm,"get")||startsWith(nm,"set")){var propNm=nm.charAt(3).toLowerCase()+nm.substr(4);if(!propMap||!propMap[propNm]){methodsNames.push(nm);}}else if(!/^_/.test(nm)){methodsNames.push(nm);}}}curCls._methodsNames=methodsNames;}return methodsNames;},setProperties:function(){var props=this._propertiesMap,val;if(arguments.length==1){var arg0=arguments[0];if(arg0){if(!arg0.length&&Eco.isObject(arg0)){for(var prop in arg0){if(arg0.hasOwnProperty(prop)){val=props[prop];if(val){this[val.setter](arg0[prop]);}}}}else if(arg0.length||Eco.isArray(arg0)){var propNames=this.getPropertiesNames();for(var i=0,len=arg0.length;i<len;i++ ){val=props[propNames[i]];this[val.setter](arg0[i]);}}}}else{var propNames=this.getPropertiesNames();for(var i=0,len=arguments.length;i<len;i++ ){val=props[propNames[i]];this[val.setter](arguments[i]);}}},callParent:function(args){var method=this.callParent.caller,curCls=method._thisOwner||this.constructor;if(!curCls){Eco.Logger.error("class 선언이 JsNamespaces.declareClass 함수를 이용하여 처리되지 않았습니다.");}var superCls=curCls._superClass;if(!superCls){Eco.Logger.error(curCls._className+"는 상속 되지 않은 Class입니다.");}var superMethod;while(superCls){superMethod=superCls[method._thisName];if(!superMethod){superMethod=superCls.prototype[method._thisName];}if(superMethod){break;}superCls=superCls._superClass;}if(!superMethod){Eco.Logger.error("this.callParent() was called but there's no such method ("+method._thisName+") found in the parent class ("+(superCls._className||'Object')+")");}return superMethod.apply(this,args);}},declareClass:function(className,defineData){if(!className||!className.length){return;}var pThis=this;var obj=pThis.getGlobalContext(),cache=pThis.namespaceCache,dummyCache=pThis.dummyNamespace,names=className.split('.'),len=names.length-1,leaf=names[len],i,nm,fullnm="";for(i=0;i<len;i++ ){nm=names[i];if(i==0){fullnm+=nm;}else{fullnm+="."+nm;}if(cache[fullnm]){obj=cache[fullnm];}else{if(!dummyCache[fullnm]){obj[nm]={};pThis.dummyNamespace[fullnm]=obj[nm];}obj=obj[nm];}}eval(className+" = function  ()\n"+"{\n"+"\tfor ( var nm in this._initVals )\n"+"\t{\n"+"\t\tif (this._initVals.hasOwnProperty(nm))\n"+"\t\t{\n"+"\t\t\tvar val = this._initVals[nm];\n"+"\t\t\tif ( val != null ) this[nm] = val;\n"+"\t\t}\n"+"\t}\n"+"\tvar ret = this.initialize.apply(this, arguments);\n"+"\treturn ret||this;\n"+"};");var cls=obj[leaf];pThis.namespaceCache[className]=cls;if(dummyCache[className]){var prop,dummy=dummyCache[className];for(prop in dummy){if(dummy.hasOwnProperty(prop)){if(!cls.hasOwnProperty(prop)){cls[prop]=dummy[prop];}}}delete dummyCache[className];}var proto=cls.prototype,isSuperCls=false,isDefineInitialize=false,pThis=this;if(defineData){var exStr=defineData["extends"];if(exStr){if(/^nexacro\./.test(exStr)){var paths=exStr.split("."),pCls=nexacro,i=1;while(pCls){pCls=pCls[paths[i]];i++ ;}if(i==paths.length-1){cls.prototype=pThis._create(pCls.prototype);cls.prototype.constructor=cls;proto=cls.prototype;isSuperCls=true;}}else{var pCls=pThis.namespaceCache[defineData["extends"]];if(pCls){cls.prototype=pThis._create(pCls.prototype);cls.prototype.constructor=cls;proto=cls.prototype;isSuperCls=true;}}}if(defineData.initialize){isDefineInitialize=true;}if(isSuperCls){cls.__inheritStatics=Eco.object.merge({},pCls.__inheritStatics||{});defineData.statics=Eco.object.merge({},defineData.statics||{},cls.__inheritStatics);}if(defineData.statics){Eco.object.copyProperties(cls,defineData.statics);}if(defineData.inheritStatics){Eco.object.copyProperties(cls,defineData.inheritStatics);cls.__inheritStatics=Eco.object.merge({},cls.__inheritStatics||{},defineData.inheritStatics);}if(isSuperCls){proto._initVals=Eco.object.merge({},proto._initVals);cls._superClass=pCls;}else{proto._initVals={};}if(defineData.properties){pThis._defineProperties(proto,defineData.properties,cls);}if(defineData.events){pThis._defineEvents(proto,defineData.events);}}if(!proto._initVals){proto._initVals={};}if(!proto["callParent"]){var classHelper=this._classHelper,func;for(var key in classHelper){if(key!="_className"&&classHelper.hasOwnProperty(key)){func=classHelper[key];proto[key]=func;if(!func._thisName){func._thisName=key;}if(!func._thisOwner){func._thisOwner=classHelper;}}}}Eco.object.Each(defineData,function(nm,val){if(nm=="properties"||nm=="statics"||nm=="inheritStatics"||nm=="events"||nm=="extends"){return;}if(Eco.isFunction(val)){this[nm]=val;}else{this._initVals[nm]=val;}},proto);if(!isDefineInitialize){proto.initialize=function(){return this;};}cls._className=className;pThis.setDebugInfo(className,cls);pThis.setDebugInfo(className,cls.prototype,cls);return cls;},_setDebugInfoForAddMethods:function(target,nms,owner){var targetVal;if(Eco.isString(nms)){targetVal=target[nms];if(Eco.isFunction(targetVal)){targetVal._thisName=nms;targetVal._thisOwner=owner;}}else if(Eco.isArray(nms)){for(var i=0,len=nms.length;i<len;i++ ){targetVal=target[nms[i]];if(Eco.isFunction(targetVal)){targetVal._thisName=nms[i];targetVal._thisOwner=owner;}}}},addMethods:function(list,Class,isStatic,func){var memberName,setDebugFunc=this._setDebugInfoForAddMethods;if(Eco.isArray(list)){if(isStatic){for(var i=0,len=list.length;i<len;i++ ){memberName=func.call(Class,list[i],i);setDebugFunc(Class,memberName,Class);}}else{var proto=Class.prototype;for(var i=0,len=list.length;i<len;i++ ){memberName=func.call(proto,list[i],i);setDebugFunc(proto,memberName,Class);}}}else if(Eco.isObject(list)){if(isStatic){for(var prop in list){if(list.hasOwnProperty(prop)){memberName=func.call(Class,prop,list[prop]);setDebugFunc(Class,memberName,Class);}}}else{var proto=Class.prototype;for(var prop in list){if(list.hasOwnProperty(prop)){memberName=func.call(proto,prop,list[prop]);setDebugFunc(proto,memberName,Class);}}}}},addProperties:function(list,Class,func,scope){var proto=Class.prototype,props={};if(Eco.isObject(list)){var flag=false;for(var prop in list){if(list.hasOwnProperty(prop)){flag=true;props[prop]=func.call(scope||this,prop,list[prop]);}}if(flag){this._defineProperties(proto,props,Class);}}},getGlobalContext:function(){var context;if(nexacro._Browser=="Runtime"){context=_global_context;}else{if(window&&(window._popup===true)){context=window;}else{context=_global_context;}}return context;}};}
if(!JsNamespace.exist("Eco")){JsNamespace.declare("Eco",{isString:function(value){return typeof value==='string';},isNumber:function(value){return typeof value==='number'&&isFinite(value);},isBoolean:function(value){return typeof value=='boolean';},isNull:function(value){return value===null;},isUndefined:function(value){return value===undefined;},isObject:function(value){if(value===null||value===undefined){return false;}if(Eco.isXComponent(value)){return false;}if(value instanceof nexacro.Object){return false;}return typeof value=="object"&&'constructor' in value&&value.constructor===Object;},isArray:Array.isArray?function(value){return Array.isArray(value);}:function(value){return Eco._toString.call(value)==='[object Array]';},isError:function(e){return typeof e==='object'&&(Eco._toString.call(e)==='[object Error]'||e instanceof Error);},_toString:(Object.prototype.toString),_hasOwnProperty:(Object.prototype.hasOwnProperty),_isIE8Below:(nexacro.Browser=="IE"&&nexacro.BrowserVersion<9),isDate:function(value){return Eco._toString.call(value)==='[object Date]';},isStringDate:function(value){var stringWrapper=new String(value);value=stringWrapper.toString();if(value.length!==8){return false;}var iMonth=Math.floor(stringWrapper.slice(4,6),10);var iDate=Math.floor(stringWrapper.slice(6,8),10);if(iMonth<1||iMonth>12){return false;}if(iDate<1||iDate>Eco.date.getLastDayOfMonth(value)){return false;}return true;},isFunction:function(value){return Eco._toString.call(value)==='[object Function]';},isRegExp:function(value){return Eco._toString.call(value)==='[object RegExp]';},isPrimitive:function(value){return value===null||/^[usbn]/.test(typeof value);},isEmpty:function(value){if(value==null){return true;}if(Eco.isString(value)||Eco.isArray(value)){return value.length==0?true:false;}else if(Eco.isObject(value)){for(var p in value){if(value.hasOwnProperty(p)){return false;}}return true;}return false;},isXComponent:function(value){if(value===null||value===undefined){return false;}return value instanceof nexacro.Component;},isSpace:function(value){return value==' ';},clone:function(value,deep,exclude){if(Eco.isObject(value)||Eco.isArray(value)){var objectClone,chkFunc=Eco.array.indexOf;if(value.constructor==Array){objectClone=[];}else{objectClone={};}for(var property in value){if(value.hasOwnProperty(property)&&(!exclude||chkFunc(exclude,property)== -1)){if(!deep){objectClone[property]=value[property];}else if(typeof value[property]=='object'){objectClone[property]=Eco.clone(value[property],deep,exclude);}else{objectClone[property]=value[property];}}}return objectClone;}else if(Eco.isDate(value)){var dateClone=new Date();dateClone.setTime(value.getTime());return dateClone;}else if(Eco.isXComponent(value)){trace("[Eco.clone] TO-DO==> clone if nexacro Component");return null;}else if(Eco.isPrimitive(value)){return value;}else if(value&&(typeof value.clone=="function")){return value.clone();}else if(value&&value._className&&value._className.length){var clone=new value.constructor();var values=value.getPropertiesValues(),val,resetValues={};for(var i in values){if((exclude==null||Eco.array.indexOf(exclude,i)<0)){val=values[i];if(deep){resetValues[i]=Eco.clone(val,deep,exclude);}else{resetValues[i]=val;}}}clone.setProperties(resetValues);return clone;}else{return null;}},iif:function(expr,trueValue,falseValue){return expr?trueValue:falseValue;},decode:function(){var i;var count=arguments.length;for(i=1;i<count;i+=2){if(arguments[0]===arguments[i]){return arguments[i+1];}}return arguments[i-2];},_ALPHA_CHAR_CODES:[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102],getUniqueId:function(prefix,separator){if(Eco.isEmpty(prefix)){prefix="";}if(Eco.isEmpty(separator)){separator=45;}else{separator=separator.charCodeAt(0);}var pThis=Eco,charcode=pThis._ALPHA_CHAR_CODES,math=Math;var seq=0;var seq0;var tmpArray=new Array(36);var idx= -1;while(seq<8){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}seq=0;while(seq<3){tmpArray[ ++idx]=separator;seq0=0;while(seq0<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq0++ ;}seq++ ;}tmpArray[ ++idx]=separator;var tmpStr=(new Date()).getTime();tmpStr=("0000000"+tmpStr.toString(16)).substr( -8);seq=0;while(seq<8){tmpArray[ ++idx]=tmpStr.charCodeAt(seq);seq++ ;}seq=0;while(seq<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}return prefix+String.fromCharCode.apply(null,tmpArray);},getSequenceId:function(form,prefix){if(Eco.isEmpty(form)){Eco.Logger.error({message:"1st argument doesn't exist !!",stack:true});return null;}if(Eco.isEmpty(prefix)){Eco.Logger.error({message:"2nd argument doesn't exist !!",stack:true});return null;}if(!(form instanceof Form)){Eco.Logger.error({message:"1st argument must be a Form !!",stack:true});return null;}var cache=form._sequenceIdCache;if(Eco.isEmpty(cache)){cache=form._sequenceIdCache={};}var sequence=cache[prefix];if(Eco.isEmpty(sequence)){sequence= -1;}sequence++ ;cache[prefix]=sequence;return prefix+sequence;},"_checkKeys":function(o1,o2){for(var i in o1){if(o1.hasOwnProperty(i)&&typeof o2[i]==='undefined'){return false;}}return true;},"equals":function(obj1,obj2){if(obj1===obj2){return true;}if(Eco.isBoolean(obj1)&&obj2==null){obj2=!!obj2;return obj1==obj12;}if(Eco.isBoolean(obj2)&&obj1==null){obj1=!!obj1;return obj1==obj12;}if(obj1&&obj2){if(obj1.equals){return obj1.equals(obj2);}if(obj2.equals){return obj2.equals(obj1);}}if(Eco.isDate(obj1)&&Eco.isDate(obj2)){if(obj1.getTime()==obj2.getTime()){return true;}return false;}if(Eco.isArray(obj1)&&Eco.isArray(obj2)){if(obj1.length!==obj2.length){return false;}for(var i=0,l=obj1.length;i<l;i++ ){if(!Eco.equals(obj1[i],obj2[i])){return false;}}return true;}if(obj1&&(typeof obj1==='object')&&obj1.hasOwnProperty&&obj2&&(typeof obj2==='object')&&obj2.hasOwnProperty){if(!Eco._checkKeys(obj1,obj2)||!Eco._checkKeys(obj2,obj1)){return false;}for(var i in obj1){if(obj1.hasOwnProperty(i)&&!Eco.equals(obj1[i],obj2[i])){return false;}}return true;}return obj1==obj2;}});}
if(!JsNamespace.exist("Eco.array")){var array=JsNamespace.declare("Eco.array",{Each:function(array,func,scope,reverse){var i,len=array.length;if(reverse!==true){for(i=0;i<len;i++ ){if(func.call(scope||array[i],array[i],i,array)===false){return i;}}}else{for(i=len-1;i> -1;i-- ){if(func.call(scope||array[i],array[i],i,array)===false){return i;}}}return true;},forEach:function(array,func,scope){var i,len=array.length;for(i=0;i<len;i++ ){func.call(scope,array[i],i,array);}},indexOf:function(array,item,from,strict){var len=array.length;if(from==null){from=0;};strict==!!strict;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(strict){for(;from<len;from++ ){if(array[from]===item){return from;}}}else{for(;from<len;from++ ){if(array[from]==item){return from;}}}return  -1;},lastIndexOf:function(array,item,from,strict){var i;if(from==null){from=array.length-1;}else if(from<0){from=Math.max(0,array.length+from);}var strict=strict||false;if(strict){for(i=from;i>=0;i-- ){if(array[i]===item){return i;}}}else{for(i=from;i>=0;i-- ){if(array[i]==item){return i;}}}return  -1;},contains:function(array,item,strict){if(Eco.array.indexOf(array,item,null,strict)=== -1){return false;}else{return true;}},toArray:function(iterant,start,end){if(!iterant||!iterant.length){return [];}if(Eco.isArray(iterant)){if(arguments.length==1){return iterant;}else if(arguments.length==2){return iterant.slice(start);}else{return iterant.slice(start,end);}}if(typeof iterant==="string"){iterant=iterant.split("");}var i,array=[],start=start||0;end=end?((end<0)?iterant.length+end:end):iterant.length;for(i=start;i<end;i++ ){array.push(iterant[i]);}return array;},map:function(array,func,scope){if(!func||!(typeof func==="function")){return;}var results=[],i=0,len=array.length;for(;i<len;i++ ){results[i]=func.call(scope,array[i],i,array);}return results;},every:function(array,func,scope){if(!func||!(typeof func==="function")){return;}var i=0,len=array.length;for(;i<len; ++i){if(!func.call(scope,array[i],i,array)){return false;}}return true;},some:function(array,func,scope){if(!func||!(typeof func==="function")){return;}var i=0,len=array.length;for(;i<len; ++i){if(func.call(scope,array[i],i,array)){return true;}}return false;},equals:function(array1,array2){var i,len1=array1.length,len2=array2.length;if(array1===array2){return true;}if(len1!==len2){return false;}for(i=0;i<len1; ++i){if(array1[i]!==array2[i]){return false;}}return true;},clean:function(array){var results=[],i=0,len=array.length,item;for(;i<len;i++ ){item=array[i];if(!Eco.isEmpty(item)){results.push(item);}}return results;},unique:function(array){var i=0,uniqueArray=[],len=array.length,item,findKey={},pThis=Eco.array;for(;i<len;i++ ){item=array[i];findKey[item]=item;}for(i in findKey){uniqueArray.push(findKey[i]);}return uniqueArray;},filter:function(array,func,scope){if(!func||!(typeof func==="function")){return;}var results=[],i=0,len=array.length;for(;i<len;i++ ){if(func.call(scope,array[i],i,array)){results.push(array[i]);}}return results;},insertAt:function(array,index,items){array.splice(index,0,items);},insertBefore:function(array,items,items2){var index=Eco.array.indexOf(array,items2);if(index== -1){array.push(items);}else{array.splice(index,0,items);}},removeAt:function(array,index){array.splice(index,1);},remove:function(array,item){var index=Eco.array.indexOf(array,item);if(index!== -1){array.splice(index,1);}},clone:function(array){return array.slice(0);},reduce:Array.prototype.reduce?function(arr,fn,initValue){if(Eco.isEmpty(initValue)){return arr.reduce(fn);}else{return arr.reduce(fn,initValue);}}:function(arr,fn,initValue){if(arr==null){Eco.Logger.info("arr is null or undefined !!");return;}if(typeof fn!=='function'){Eco.Logger.info("Type of fn is not function!!");return;}var len=arr.length>>>0,k=0,value;if(arguments.length==3){value=arguments[2];}else{while(k<len&&(arr[k]==null)){k++ ;}if(k>=len){Eco.Logger.info("Reduce of empty array with no initial value.");return;}value=arr[k++ ];}for(;k<len;k++ ){if(arr[k]!=null){value=fn(value,arr[k],k,arr);}}return value;},_rtnFlatten:[],flatten:function(array){_rtnFlatten=[];return Eco.array._flatten(array);},_flatten:function(array){var i,len,v,pThis=Eco.array;for(i=0,len=array.length;i<len;i++ ){v=array[i];if(Eco.isArray(v)){pThis._flatten(v);}else{_rtnFlatten.push(v);}}return _rtnFlatten;},max:function(array){return Math.max.apply(Math,array);},min:function(array){return Math.min.apply(Math,array);},sum:function(array,start,len){if(start==null){start=0;}if(len==null){len=array.length;}var sum=0;for(var i=start;i<len;sum+=array[i++ ]){}return sum;},exchange:function(array,from,to){if(array[from]&&array[to]){var remove1=array.splice(from,1,"");var remove2=array.splice(to,1,"");array.splice(from,1,remove2.pop());array.splice(to,1,remove1.pop());return true;}else{return false;}},move:function(array,from,to){var i,tmp;from=parseInt(from,10);to=parseInt(to,10);if(from!==to&&0<=from&&from<=array.length&&0<=to&&to<=array.length){tmp=array[from];if(from<to){for(i=from;i<to;i++ ){array[i]=array[i+1];}}else{for(i=from;i>to;i-- ){array[i]=array[i-1];}}array[to]=tmp;return true;}return false;},sortOn:function(array){var arr,i,args=[];arr=array.slice(0);if(!arguments.length){return arr.sort();}for(i=0;i<arguments.length;i++ ){args.push(arguments[i]);}return arr.sort(function(a,b){var compareProp,prop,i0,i1;compareProp=args.slice(0);prop=compareProp.shift();while(a[prop]==b[prop]&&compareProp.length){prop=compareProp.shift();}i0=a[prop];i1=b[prop];if(i0===undefined&&i1!==undefined){return 1;}else if(i0!==undefined&&i1===undefined){return  -1;}return i0==i1?0:i0>i1?1: -1;});},sortTwoDimensional:function(arr,sortOrders){return arr.sort(function(a,b){var len=sortOrders.length;for(var s=0;s<len;s++ ){if(sortOrders[s]=="ASC"){if(a[s]<b[s]){return  -1;}if(a[s]>b[s]){return 1;}}else if(sortOrders[s]=="DESC"){if(a[s]<b[s]){return 1;}if(a[s]>b[s]){return  -1;}}}return 0;});},indexOfProp:function(array,prop,item,from,strict){var len=array.length,from=Number(from)||0,strict=strict||false,obj,propValue;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(strict){for(;from<len;from++ ){if(from in array&&array[from]){obj=array[from],propValue=obj[prop];if(propValue===item){return from;}}}}else{for(;from<len;from++ ){if(from in array&&array[from]){obj=array[from],propValue=obj[prop];if(propValue==item){return from;}}}}return  -1;},lastIndexOfProp:function(array,prop,item,from,strict){var i,obj,propValue;if(from==null){from=array.length-1;}else if(from<0){from=Math.max(0,array.length+from);}var strict=strict||false;if(strict){for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue===item){return i;}}}}else{for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue==item){return i;}}}}return  -1;},difference:function(arr,arr1){var clone=Eco.array.clone(arr),cln=clone.length,i,j,arrLen;for(i=0,arrLen=arr1.length;i<arrLen;i++ ){for(j=0;j<cln;j++ ){if(clone[j]===arr1[i]){Eco.array.removeAt(clone,j);j-- ;cln-- ;}}}return clone;},arrayCopy:function(src,srcPos,dest,destPos,length){if(!length){return;}var cnt=length+srcPos;if(src==dest){src=src.slice(srcPos,cnt);cnt=src.length;for(var i=0,j=destPos;i<cnt;i++ ,j++ ){dest[j]=src[i];}}else{for(var i=srcPos,j=destPos;i<cnt;i++ ,j++ ){dest[j]=src[i];}}},_defaultCompare:function(a,b){if(a!=null){if(b!=null){if(a==b){return 0;}if(a>b){return 1;}}return  -1;}if(b!=null){return 1;}return 0;},binarySearch:function(arr,start,len,item,compareFn){if(!compareFn){compareFn=Eco.array._defaultCompare;}var high=start+len-1,low=start;while(low<=high){var i=low+((high-low)>>1);var order=compareFn(arr[i],item);if(order==0){return i;}if(order<0){low=i+1;}else{high=i-1;}}return ~low;}});}
if(!JsNamespace.exist("Eco.date")){JsNamespace.declare("Eco.date",{weekName:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],weekShortName:["일","월","화","수","목","금","토"],monthName:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthShortName:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],ttName:["오전","오후"],lunarMonthTable:[[2,1,2,1,2,1,2,2,1,2,1,2],[1,2,1,1,2,1,2,5,2,2,1,2],[1,2,1,1,2,1,2,1,2,2,2,1],[2,1,2,1,1,2,1,2,1,2,2,2],[1,2,1,2,3,2,1,1,2,2,1,2],[2,2,1,2,1,1,2,1,1,2,2,1],[2,2,1,2,2,1,1,2,1,2,1,2],[1,2,2,4,1,2,1,2,1,2,1,2],[1,2,1,2,1,2,2,1,2,1,2,1],[2,1,1,2,2,1,2,1,2,2,1,2],[1,5,1,2,1,2,1,2,2,2,1,2],[1,2,1,1,2,1,2,1,2,2,2,1],[2,1,2,1,1,5,1,2,2,1,2,2],[2,1,2,1,1,2,1,1,2,2,1,2],[2,2,1,2,1,1,2,1,1,2,1,2],[2,2,1,2,5,1,2,1,2,1,1,2],[2,1,2,2,1,2,1,2,1,2,1,2],[1,2,1,2,1,2,2,1,2,1,2,1],[2,3,2,1,2,2,1,2,2,1,2,1],[2,1,1,2,1,2,1,2,2,2,1,2],[1,2,1,1,2,1,5,2,2,1,2,2],[1,2,1,1,2,1,1,2,2,1,2,2],[2,1,2,1,1,2,1,1,2,1,2,2],[2,1,2,2,3,2,1,1,2,1,2,2],[1,2,2,1,2,1,2,1,2,1,1,2],[2,1,2,1,2,2,1,2,1,2,1,1],[2,1,2,5,2,1,2,2,1,2,1,2],[1,1,2,1,2,1,2,2,1,2,2,1],[2,1,1,2,1,2,1,2,2,1,2,2],[1,5,1,2,1,1,2,2,1,2,2,2],[1,2,1,1,2,1,1,2,1,2,2,2],[1,2,2,1,1,5,1,2,1,2,2,1],[2,2,2,1,1,2,1,1,2,1,2,1],[2,2,2,1,2,1,2,1,1,2,1,2],[1,2,2,1,6,1,2,1,2,1,1,2],[1,2,1,2,2,1,2,2,1,2,1,2],[1,1,2,1,2,1,2,2,1,2,2,1],[2,1,4,1,2,1,2,1,2,2,2,1],[2,1,1,2,1,1,2,1,2,2,2,1],[2,2,1,1,2,1,4,1,2,2,1,2],[2,2,1,1,2,1,1,2,1,2,1,2],[2,2,1,2,1,2,1,1,2,1,2,1],[2,2,1,2,2,4,1,1,2,1,2,1],[2,1,2,2,1,2,2,1,2,1,1,2],[1,2,1,2,1,2,2,1,2,2,1,2],[1,1,2,4,1,2,1,2,2,1,2,2],[1,1,2,1,1,2,1,2,2,2,1,2],[2,1,1,2,1,1,2,1,2,2,1,2],[2,5,1,2,1,1,2,1,2,1,2,2],[2,1,2,1,2,1,1,2,1,2,1,2],[2,2,1,2,1,2,3,2,1,2,1,2],[2,1,2,2,1,2,1,1,2,1,2,1],[2,1,2,2,1,2,1,2,1,2,1,2],[1,2,1,2,4,2,1,2,1,2,1,2],[1,2,1,1,2,2,1,2,2,1,2,2],[1,1,2,1,1,2,1,2,2,1,2,2],[2,1,4,1,1,2,1,2,1,2,2,2],[1,2,1,2,1,1,2,1,2,1,2,2],[2,1,2,1,2,1,1,5,2,1,2,2],[1,2,2,1,2,1,1,2,1,2,1,2],[1,2,2,1,2,1,2,1,2,1,2,1],[2,1,2,1,2,5,2,1,2,1,2,1],[2,1,2,1,2,1,2,2,1,2,1,2],[1,2,1,1,2,1,2,2,1,2,2,1],[2,1,2,3,2,1,2,1,2,2,2,1],[2,1,2,1,1,2,1,2,1,2,2,2],[1,2,1,2,1,1,2,1,1,2,2,2],[1,2,5,2,1,1,2,1,1,2,2,1],[2,2,1,2,2,1,1,2,1,2,1,2],[1,2,2,1,2,1,5,2,1,2,1,2],[1,2,1,2,1,2,2,1,2,1,2,1],[2,1,1,2,2,1,2,1,2,2,1,2],[1,2,1,1,5,2,1,2,2,2,1,2],[1,2,1,1,2,1,2,1,2,2,2,1],[2,1,2,1,1,2,1,1,2,2,2,1],[2,2,1,5,1,2,1,1,2,2,1,2],[2,2,1,2,1,1,2,1,1,2,1,2],[2,2,1,2,1,2,1,5,2,1,1,2],[2,1,2,2,1,2,1,2,1,2,1,1],[2,2,1,2,1,2,2,1,2,1,2,1],[2,1,1,2,1,6,1,2,2,1,2,1],[2,1,1,2,1,2,1,2,2,1,2,2],[1,2,1,1,2,1,1,2,2,1,2,2],[2,1,2,3,2,1,1,2,2,1,2,2],[2,1,2,1,1,2,1,1,2,1,2,2],[2,1,2,2,1,1,2,1,1,5,2,2],[1,2,2,1,2,1,2,1,1,2,1,2],[1,2,2,1,2,2,1,2,1,2,1,1],[2,1,2,2,1,5,2,2,1,2,1,2],[1,1,2,1,2,1,2,2,1,2,2,1],[2,1,1,2,1,2,1,2,2,1,2,2],[1,2,1,1,5,1,2,1,2,2,2,2],[1,2,1,1,2,1,1,2,1,2,2,2],[1,2,2,1,1,2,1,1,2,1,2,2],[1,2,5,2,1,2,1,1,2,1,2,1],[2,2,2,1,2,1,2,1,1,2,1,2],[1,2,2,1,2,2,1,5,2,1,1,2],[1,2,1,2,2,1,2,1,2,2,1,2],[1,1,2,1,2,1,2,2,1,2,2,1],[2,1,1,2,3,2,2,1,2,2,2,1],[2,1,1,2,1,1,2,1,2,2,2,1],[2,2,1,1,2,1,1,2,1,2,2,1],[2,2,2,3,2,1,1,2,1,2,1,2],[2,2,1,2,1,2,1,1,2,1,2,1],[2,2,1,2,2,1,2,1,1,2,1,2],[1,5,2,2,1,2,1,2,1,2,1,2],[1,2,1,2,1,2,2,1,2,2,1,1],[2,1,2,1,2,1,5,2,2,1,2,2],[1,1,2,1,1,2,1,2,2,2,1,2],[2,1,1,2,1,1,2,1,2,2,1,2],[2,2,1,1,5,1,2,1,2,1,2,2],[2,1,2,1,2,1,1,2,1,2,1,2],[2,1,2,2,1,2,1,1,2,1,2,1],[2,1,6,2,1,2,1,1,2,1,2,1],[2,1,2,2,1,2,1,2,1,2,1,2],[1,2,1,2,1,2,1,2,5,2,1,2],[1,2,1,1,2,1,2,2,2,1,2,1],[2,1,2,1,1,2,1,2,2,1,2,2],[2,1,1,2,3,2,1,2,1,2,2,2],[1,2,1,2,1,1,2,1,2,1,2,2],[2,1,2,1,2,1,1,2,1,2,1,2],[2,1,2,5,2,1,1,2,1,2,1,2],[1,2,2,1,2,1,2,1,2,1,2,1],[2,1,2,1,2,2,1,2,1,2,1,2],[1,5,2,1,2,1,2,2,1,2,1,2],[1,2,1,1,2,1,2,2,1,2,2,1],[2,1,2,1,1,5,2,1,2,2,2,1],[2,1,2,1,1,2,1,2,1,2,2,2],[1,2,1,2,1,1,2,1,1,2,2,2],[1,2,2,1,5,1,2,1,1,2,2,1],[2,2,1,2,2,1,1,2,1,1,2,2],[1,2,1,2,2,1,2,1,2,1,2,1],[2,1,5,2,1,2,2,1,2,1,2,1],[2,1,1,2,1,2,2,1,2,2,1,2],[1,2,1,1,2,1,2,1,2,2,5,2],[1,2,1,1,2,1,2,1,2,2,2,1],[2,1,2,1,1,2,1,1,2,2,1,2],[2,2,1,2,1,4,1,1,2,2,1,2],[2,2,1,2,1,1,2,1,1,2,1,2],[2,2,1,2,1,2,1,2,1,1,2,1],[2,2,1,2,5,2,1,2,1,2,1,1],[2,1,2,2,1,2,2,1,2,1,2,1],[2,1,1,2,1,2,2,1,2,2,1,2],[1,5,1,2,1,2,1,2,2,2,1,2],[1,2,1,1,2,1,1,2,2,1,2,2]],addDate:function(value,offset){var dt;if(Eco.isDate(value)){dt=new Date();dt.setFullYear(value.getFullYear(),value.getMonth(),value.getDate()+offset);dt.setHours(value.getHours(),value.getMinutes(),value.getSeconds());dt.setMilliseconds(value.getMilliseconds());return dt;}else{dt=new Date();dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2)-1),parseInt(value.substr(6,2))+offset);dt.setHours(0,0,0);dt.setMilliseconds(0);return Eco.date.getMaskFormatString(dt,"yyyyMMdd");}},addMonth:function(value,offset){var pThis=Eco.date;var dt;if(Eco.isDate(value)){var nTmpday=value.getDate();dt=new Date();dt.setFullYear(value.getFullYear(),value.getMonth()+offset,value.getDate());dt.setHours(value.getHours(),value.getMinutes(),value.getSeconds());dt.setMilliseconds(value.getMilliseconds());if(dt.getDate()!=nTmpday){dt.setMonth(dt.getMonth()-1);dt.setDate(pThis.getLastDayOfMonth(dt));}return dt;}else{var nTmpday=parseInt(value.substr(6,2));dt=new Date();dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2)-1)+offset,nTmpday);dt.setHours(0,0,0);dt.setMilliseconds(0);if(dt.getDate()!=nTmpday){dt.setMonth(dt.getMonth()-1);dt.setDate(pThis.getLastDayOfMonth(dt));}return pThis.getMaskFormatString(dt,"yyyyMMdd");}},getDiffDay:function(fromDate,toDate){var pThis=Eco.date;if(Eco.isString(fromDate)&&Eco.isString(toDate)){fromDate=new Date(parseInt(fromDate.substring(0,4),10),parseInt(fromDate.substring(4,6)-1,10),parseInt(fromDate.substring(6,8),10));toDate=new Date(parseInt(toDate.substring(0,4),10),parseInt(toDate.substring(4,6)-1,10),parseInt(toDate.substring(6,8),10));}var flag=1,nDay;if(fromDate>toDate){flag= -1;var tmpDt=toDate;toDate=fromDate;fromDate=tmpDt;}if(fromDate.getFullYear()!=toDate.getFullYear()){nDay=(pThis.isLeapYear(fromDate.getFullYear())?366:365)-pThis.getDayOfYear(fromDate)+pThis.getDayOfYear(toDate);var nYear=fromDate.getFullYear();while(nYear++ <toDate.getFullYear()-1){nDay=nDay+(pThis.isLeapYear(nYear)?366:365);}}else{nDay=pThis.getDayOfYear(toDate)-pThis.getDayOfYear(fromDate);}return nDay*flag;},getDiffMonth:function(fromDate,toDate){var pThis=Eco.date;if(Eco.isString(fromDate)&&Eco.isString(toDate)){fromDate=new Date(parseInt(fromDate.substring(0,4),10),parseInt(fromDate.substring(4,6)-1,10),parseInt(fromDate.substring(6,8),10));toDate=new Date(parseInt(toDate.substring(0,4),10),parseInt(toDate.substring(4,6)-1,10),parseInt(toDate.substring(6,8),10));}var flag=1,nMonth,nDay;if(fromDate>toDate){flag= -1;var tmpDt=toDate;toDate=fromDate;fromDate=tmpDt;}if(fromDate.getDate()==1){nMonth=1;nDay=0;}else{nMonth=0;var lastday=pThis.getLastDayOfMonth(fromDate);nDay=Math.floor((lastday-fromDate.getDate()+1)/lastday,2);}if(toDate.getDate()==pThis.getLastDayOfMonth(toDate)){nMonth+=1;}else{nDay+=Math.floor(toDate.getDate()/pThis.getLastDayOfMonth(toDate),2);}if(fromDate.getFullYear()!=toDate.getFullYear()){nMonth+=12-(fromDate.getMonth()+1)+toDate.getMonth();var nYear=fromDate.getFullYear();while(nYear++ <toDate.getFullYear()-1){nMonth=nMonth+12;}}else{nMonth+=toDate.getMonth()-(fromDate.getMonth()+1);}return (nMonth+nDay)*flag;},getLastDayOfMonth:function(value){var nMonth,nLastDate;if(Eco.isDate(value)){nMonth=value.getMonth()+1;}else{nMonth=parseInt(value.substr(4,2),10);}if(nMonth==1||nMonth==3||nMonth==5||nMonth==7||nMonth==8||nMonth==10||nMonth==12){nLastDate=31;}else if(nMonth==2){if(Eco.date.isLeapYear(value)==true){nLastDate=29;}else{nLastDate=28;}}else{nLastDate=30;}return nLastDate;},getWeekOfYear:function(date){if(Eco.isString(date)){date=this.strToDate(date);}if(!Eco.isDate(date)){return  -1;}var onejan=new Date();onejan.setYear(date.getFullYear());onejan.setMonth(0);onejan.setDate(1);return Math.ceil((((date-onejan)/86400000)+onejan.getDay()+1)/7);},_dayOfYearOffset:[0,31,59,90,120,151,181,212,243,273,304,334],getDayOfYear:function(date){var pThis=Eco.date;if(Eco.isString(date)){date=pThis.strToDate(date);}if(!Eco.isDate(date)){Eco.Logger.error({"message":"invalid date","stack":true});}var nMonth=date.getMonth();var nDay=pThis._dayOfYearOffset[nMonth]+date.getDate();if(pThis.isLeapYear(date.getFullYear())&&nMonth>1){nDay=nDay+1;}return nDay;},strToDate:function(value){var dt=new Date();if(value.length==4){dt.setFullYear(parseInt(value),0,0);dt.setHours(0,0,0);dt.setMilliseconds(0);}else if(value.length==6){dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,0);dt.setHours(0,0,0);dt.setMilliseconds(0);}else if(value.length==8){dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,parseInt(value.substr(6,2)));dt.setHours(0,0,0);dt.setMilliseconds(0);}else if(value.length==10){dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,parseInt(value.substr(6,2)));dt.setHours(parseInt(value.substr(8,2)),0,0);dt.setMilliseconds(0);}else if(value.length==12){dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,parseInt(value.substr(6,2)));dt.setHours(parseInt(value.substr(8,2)),parseInt(value.substr(10,2)),0);dt.setMilliseconds(0);}else if(value.length==14){dt.setFullYear(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,parseInt(value.substr(6,2)));dt.setHours(parseInt(value.substr(8,2)),parseInt(value.substr(10,2)),parseInt(value.substr(12,2)));dt.setMilliseconds(0);}return dt;},isLeapYear:function(value){var result;var year;if(Eco.isEmpty(value)){return false;}else if(Eco.isString(value)){year=parseInt(value.substring(0,4),10);}else if(Eco.isNumber(value)){year=value;}else if(value instanceof nexacro.Date){value=value.toString();if(Eco.isEmpty(value)){return false;}year=parseInt(value.substring(0,4),10);}else if(Eco.isDate(value)){year=value.getFullYear();}if((year%4)==0){if((year%100)!=0||(year%400)==0){result=true;}else{result=false;}}else{result=false;}return result;},_getYearMonthDay:function(value){var year,month,day;if(Eco.isDate(value)){year=value.getFullYear();month=value.getMonth()+1;day=value.getDate();}else if(Eco.isString(value)){year=parseInt(value.substr(0,4),10);month=parseInt(value.substr(4,2),10);day=parseInt(value.substr(6,2),10);}else{Eco.Logger.error({"message":"invalid data type.","stack":true});return;}return {"year":year,"month":month,"day":day};},solarToLunar:function(value){var year,month,day;var dateInfo=this._getYearMonthDay(value);if(Eco.isEmpty(dateInfo)){return;}year=dateInfo.year;month=dateInfo.month;day=dateInfo.day;if(Eco.isDate(value)){year=value.getFullYear();month=value.getMonth()+1;day=value.getDate();}else if(Eco.isString(value)){year=parseInt(value.substr(0,4),10);month=parseInt(value.substr(4,2),10);day=parseInt(value.substr(6,2),10);}else{Eco.Logger.error({"message":"invalid data type.","stack":true});return;}var date=this._lunarSolarConverter(year,month,day,1);if(Eco.isEmpty(date)){return;}var resultStr=""+date.leapMonth+date.year+String(date.month).padLeft(2,"0")+String(date.day).padLeft(2,"0");return resultStr;},lunarToSolar:function(value,leapMonth){var year,month,day;var dateInfo=this._getYearMonthDay(value);if(Eco.isEmpty(dateInfo)){return;}year=dateInfo.year;month=dateInfo.month;day=dateInfo.day;leapMonth=(leapMonth)?1:0;var date=this._lunarSolarConverter(year,month,day,2,leapMonth);if(Eco.isEmpty(date)){return;}var resultStr=""+date.year+String(date.month).padLeft(2,"0")+String(date.day).padLeft(2,"0");return resultStr;},_lunarSolarConverter:function(year,month,day,type,leapmonth){var solYear,solMonth,solDay;var lunYear,lunMonth,lunDay;var lunLeapMonth,lunMonthDay;var i,lunIndex;var solMonthDay=[31,0,31,30,31,30,31,31,30,31,30,31];if(year<1900||year>2040){alert('1900년부터 2040년까지만 지원합니다');return;}if(year>=2000){solYear=2000;solMonth=1;solDay=1;lunYear=1999;lunMonth=11;lunDay=25;lunLeapMonth=0;solMonthDay[1]=29;lunMonthDay=30;}else if(year>=1970){solYear=1970;solMonth=1;solDay=1;lunYear=1969;lunMonth=11;lunDay=24;lunLeapMonth=0;solMonthDay[1]=28;lunMonthDay=30;}else if(year>=1940){solYear=1940;solMonth=1;solDay=1;lunYear=1939;lunMonth=11;lunDay=22;lunLeapMonth=0;solMonthDay[1]=29;lunMonthDay=29;}else{solYear=1900;solMonth=1;solDay=1;lunYear=1899;lunMonth=12;lunDay=1;lunLeapMonth=0;solMonthDay[1]=28;lunMonthDay=30;}lunIndex=lunYear-1899;while(true){if(type==1&&year==solYear&&month==solMonth&&day==solDay){return {"year":lunYear,"month":lunMonth,"day":lunDay,"leapMonth":lunLeapMonth};}else if(type==2&&year==lunYear&&month==lunMonth&&day==lunDay&&leapmonth==lunLeapMonth){return {"year":solYear,"month":solMonth,"day":solDay,"leapMonth":0};}if(solMonth==12&&solDay==31){solYear++ ;solMonth=1;solDay=1;if(solYear%400==0){solMonthDay[1]=29;}else if(solYear%100==0){solMonthDay[1]=28;}else if(solYear%4==0){solMonthDay[1]=29;}else{solMonthDay[1]=28;}}else if(solMonthDay[solMonth-1]==solDay){solMonth++ ;solDay=1;}else{solDay++ ;}if(lunMonth==12&&((this.lunarMonthTable[lunIndex][lunMonth-1]==1&&lunDay==29)||(this.lunarMonthTable[lunIndex][lunMonth-1]==2&&lunDay==30))){lunYear++ ;lunMonth=1;lunDay=1;lunIndex=lunYear-1899;if(lunIndex>144){alert("날짜 범위를 벗어났습니다.");return;}if(this.lunarMonthTable[lunIndex][lunMonth-1]==1){lunMonthDay=29;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==2){lunMonthDay=30;}}else if(lunDay==lunMonthDay){if(this.lunarMonthTable[lunIndex][lunMonth-1]>=3&&lunLeapMonth==0){lunDay=1;lunLeapMonth=1;}else{lunMonth++ ;lunDay=1;lunLeapMonth=0;}if(this.lunarMonthTable[lunIndex][lunMonth-1]==1){lunMonthDay=29;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==2){lunMonthDay=30;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==3){lunMonthDay=29;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==4&&lunLeapMonth==0){lunMonthDay=29;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==4&&lunLeapMonth==1){lunMonthDay=30;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==5&&lunLeapMonth==0){lunMonthDay=30;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==5&&lunLeapMonth==1){lunMonthDay=29;}else if(this.lunarMonthTable[lunIndex][lunMonth-1]==6){lunMonthDay=30;}}else{lunDay++ ;}}},getFirstDate:function(value){if(Eco.isDate(value)){var dt=new Date();dt.setFullYear(value.getFullYear(),value.getMonth(),1);dt.setHours(value.getHours(),value.getMinutes(),value.getSeconds());dt.setMilliseconds(value.getMilliseconds());return dt;}else{var sRtn="";var dDate=new Date(parseInt(value.substr(0,4)),parseInt(value.substr(4,2))-1,1);sRtn=dDate.getFullYear()+(dDate.getMonth()+1).toString().padLeft(2,"0")+dDate.getDate().toString().padLeft(2,"0");return sRtn;}},getDiffTime:function(date1,date2){var dFrom,dTo;if(Eco.isDate(date1)&&Eco.isDate(date2)){dFrom=date2;dTo=date1;}else{dFrom=new Date(date2.substring(0,4),date2.substring(4,6)-1,date2.substring(6,8),date2.substring(8,10),date2.substring(10,12),date2.substring(12,14));dTo=new Date(date1.substring(0,4),date1.substring(4,6)-1,date1.substring(6,8),date1.substring(8,10),date1.substring(10,12),date1.substring(12,14));}var nGap=(dFrom.getTime()-dTo.getTime())/1000;var nSec=nGap%60;var nMin=Math.floor(nGap/(60))%60;var nHour=Math.floor(nGap/(60*60))%24;var nDay=Math.floor(nGap/(60*60*24));var sRtn=nDay+""+nHour+""+nMin+""+nSec+"";return [nDay,nHour,nMin,nSec];},_dateMaskCache:{},_parseDateMask:function(strMask){var pThis=Eco.date;var res=pThis._dateMaskCache[strMask];if(res){return res;}var arrMask=[],tokenStr,seq=0,bEscape=false,bQuote=false,maskArr=strMask.split(""),tmpStr;for(var i=0,len=maskArr.length;i<len;){tokenStr=maskArr[i];if(bEscape==false&&tokenStr=="'"){if(bQuote==false){bQuote=true;}else{bQuote=false;}i++ ;continue;}if(bEscape==false&&tokenStr=="\\"&&!bQuote){bEscape=true;i++ ;continue;}else if(bEscape){arrMask[seq]=i;seq++ ;bEscape=false;}else if(bQuote==false){tmpStr=strMask.substr(i,4);if(tmpStr=="yyyy"||tmpStr=="MMMM"||tmpStr=="dddd"){arrMask[seq]=tmpStr;i+=4;seq++ ;continue;}tmpStr=strMask.substr(i,3);if(tmpStr=="MMM"||tmpStr=="ddd"||tmpStr=="sss"){arrMask[seq]=tmpStr;i+=3;seq++ ;continue;}tmpStr=strMask.substr(i,2);if(tmpStr=="yy"||tmpStr=="MM"||tmpStr=="dd"||tmpStr=="HH"||tmpStr=="mm"||tmpStr=="ss"||tmpStr=="hh"||tmpStr=="tt"||tmpStr=="tt"){arrMask[seq]=tmpStr;i+=2;seq++ ;continue;}if(tokenStr=="M"||tokenStr=="d"||tokenStr=="H"||tokenStr=="h"||tokenStr=="m"||tokenStr=="s"||tokenStr=="W"){arrMask[seq]=tokenStr;seq++ ;}else{arrMask[seq]=i;seq++ ;}}i++ ;}pThis._dateMaskCache[strMask]=arrMask;return arrMask;},getMaskFormatString:function(dt,strMask){var pThis=Eco.date;var arrMask=pThis._parseDateMask(strMask),arrDt=[],mask,h;for(var i=0,len=arrMask.length;i<len;i++ ){mask=arrMask[i];if(mask> -1){arrDt[arrDt.length]=strMask.charAt(mask);}else{switch(mask){case "yyyy":arrDt[arrDt.length]=new String(dt.getFullYear());break;case "MMMM":arrDt[arrDt.length]=pThis.monthName[dt.getMonth()];break;case "dddd":arrDt[arrDt.length]=pThis.weekName[dt.getDay()];break;case "MMM":arrDt[arrDt.length]=pThis.monthShortName[dt.getMonth()];break;case "ddd":arrDt[arrDt.length]=pThis.weekShortName[dt.getDay()];break;case "sss":arrDt[arrDt.length]=new String(dt.getMilliseconds()).padLeft(3,'0');break;case "yy":arrDt[arrDt.length]=new String(dt.getFullYear()%1000).padLeft(2,'0');break;case "MM":arrDt[arrDt.length]=new String(dt.getMonth()+1).padLeft(2,'0');break;case "WW":arrDt[arrDt.length]=new String(getWeekNumber(dt)).padLeft(2,'0');break;case "dd":arrDt[arrDt.length]=new String(dt.getDate()).padLeft(2,'0');break;case "HH":arrDt[arrDt.length]=new String(dt.getHours()).padLeft(2,'0');break;case "hh":arrDt[arrDt.length]=new String(((h=dt.getHours()%12)?h:12)).padLeft(2,'0');break;case "mm":arrDt[arrDt.length]=new String(dt.getMinutes()).padLeft(2,'0');break;case "ss":arrDt[arrDt.length]=new String(dt.getSeconds()).padLeft(2,'0');break;case "tt":arrDt[arrDt.length]=dt.getHours()<12?pThis.ttName[0]:pThis.ttName[1];break;case "M":arrDt[arrDt.length]=new String(dt.getMonth()+1);break;case "d":arrDt[arrDt.length]=new String(dt.getDate());break;case "H":arrDt[arrDt.length]=new String(dt.getHours());break;case "h":arrDt[arrDt.length]=new String(((h=dt.getHours()%12)?h:12));break;case "m":arrDt[arrDt.length]=new String(dt.getMinutes());break;case "s":arrDt[arrDt.length]=new String(dt.getSeconds());break;case "W":arrDt[arrDt.length]=new String(pThis.getWeekOfYear(dt));break;}}}return arrDt.join("");}});}
if(!JsNamespace.exist("Eco.number")){JsNamespace.declare("Eco.number",{point:".",separator:",",separatorGrouping:"\\3",_adjustFloat:function(n){return parseFloat(n.toPrecision(14));},_getMaxPrecision:function(values){var maxPrecision=0,currentPrecision,tempValue;total=0,len=values.length;var adjustFloat=Eco.number._adjustFloat;for(var i=0;i<len;i++ ){tempValue=adjustFloat(values[i]);currentPrecision=(tempValue.toString().match(/\.\d+/)||[''])[0].length;if(currentPrecision>maxPrecision){maxPrecision=currentPrecision;}}return maxPrecision;},plus:function(){var maxPrecision=0,currentPrecision,total=0,len=arguments.length;maxPrecision=Eco.number._getMaxPrecision(arguments);maxPrecision=Math.pow(10,(maxPrecision-1));for(i=0;i<len;i++ ){total+=(arguments[i]*maxPrecision);}return total/maxPrecision;},divide:function(){var maxPrecision=0;var total=0;var count=arguments.length-1;var tempValues=[arguments[0]];var i=1;var pThis=Eco.number;var getMaxPrecision=pThis._getMaxPrecision;var adjustFloat=pThis._adjustFloat;do{tempValues.push(arguments[i]);i++ ;maxPrecision=Math.pow(10,(getMaxPrecision(tempValues)-1));for(var j=0;j<2;j++ ){tempValues[j]*=maxPrecision;}total=adjustFloat(tempValues[0]/tempValues[1]);total=(tempValues[0]/tempValues[1]);tempValues=[total];}while( --count)return total;},multiply:function(){var maxPrecision=0;var total=0;var count=arguments.length-1;var tempValues=[arguments[0]];var i=1;var pThis=Eco.number;var getMaxPrecision=pThis._getMaxPrecision;var adjustFloat=pThis._adjustFloat;var resultPrecision=0;do{tempValues.push(arguments[i]);resultPrecision=getMaxPrecision(tempValues);if(resultPrecision==0){maxPrecision=1;}else{maxPrecision=Math.pow(10,(resultPrecision-1));}for(var j=0;j<2;j++ ){tempValues[j]=adjustFloat(tempValues[j]*maxPrecision);}total=(tempValues[0]*tempValues[1]/Math.pow(maxPrecision,2));tempValues=[total];i++ ;}while( --count)return total;},intToHanGul:function(val){if(!Eco.isString(val)){val=String(val);}var arrhn=["영","일","이","삼","사","오","육","칠","팔","구"];var arrhj=["","만","억","조","경","해"];var arrul=["영천","영백","영십","영"];var arrtm=[];var sRtn="";var sTm2="";if(val.charAt(0)=="-"){sRtn="마이너스 ";val=val.substr(1,val.length-1);}else if(val.charAt(0)=="+"){val=val.substr(1,val.length-1);}var nPoint=val.indexOf('.'),strNumber="",bPoint,strDecimal="";if(nPoint<0){strNumber=val;bPoint=false;}else{strNumber=val.substr(0,nPoint);strDecimal=val.substr(nPoint+1);bPoint=true;}var nSize=Math.ceil(strNumber.length/4);sTmpPrice="";for(var i=strNumber.length;i>=0;i-- ){sTmpPrice+=strNumber.substring(i,i-1);}strNumber=sTmpPrice;for(var i=0;i<nSize;i++ ){sSum=arrhj[i]+" ";arrtm[i]=strNumber.substr(i*4,4);sTm2="";for(var j=arrtm[i].length;j>=0;j-- ){sTm2+=arrtm[i].substring(j,j-1);}arrtm[i]=sTm2;sPart=arrtm[i].length;for(var j=0;j<10;j++ ){for(var k=0;k<10;k++ ){arrtm[i]=arrtm[i].replace(k,arrhn[k]);}}if(sPart==4){arrtm[i]=arrtm[i].charAt(0)+"천"+arrtm[i].charAt(1)+"백"+arrtm[i].charAt(2)+"십"+arrtm[i].charAt(3);}else if(sPart==3){arrtm[i]=arrtm[i].charAt(0)+"백"+arrtm[i].charAt(1)+"십"+arrtm[i].charAt(2);}else if(sPart==2){arrtm[i]=arrtm[i].charAt(0)+"십"+arrtm[i].charAt(1);}else{arrtm[i]=arrtm[i].charAt(0);}for(var j=0;j<4;j++ ){if(arrtm[i].match(arrul[j])){sPart-- ;arrtm[i]=arrtm[i].replace(arrul[j],"");}}if(sPart!=0){arrtm[i]+=sSum;}}for(nSize;nSize> -1;nSize-- ){sRtn+=arrtm[nSize];}sRtn=sRtn.replace("undefined","");if(bPoint){sRtn+=" 소수점 ";for(var i=0,n=strDecimal.length;i<n;i++ ){sRtn+=arrhn[parseInt(strDecimal.charAt(i))];}}return sRtn;},intToHanJa:function(val){if(!Eco.isString(val)){val=String(val);}var arrhn=["零","壹","貳","參","四","五","六","七","八","九"];var arrhj=["","萬","億","兆"];var arrul=["零千","零百","零拾","零"];var arrtm=[];var sRtn="";var sTm2="";if(val.charAt(0)=="-"){sRtn="陰數";val=val.substr(1,val.length-1);}else if(val.charAt(0)=="+"){val=val.substr(1,val.length-1);}var nPoint=val.indexOf('.'),strNumber="",bPoint,strDecimal="";if(nPoint<0){strNumber=val;bPoint=false;}else{strNumber=val.substr(0,nPoint);strDecimal=val.substr(nPoint+1);bPoint=true;}var nSize=Math.ceil(strNumber.length/4);sTmpPrice="";for(var i=strNumber.length;i>=0;i-- ){sTmpPrice+=strNumber.substring(i,i-1);}strNumber=sTmpPrice;for(var i=0;i<nSize;i++ ){sSum=arrhj[i]+" ";arrtm[i]=strNumber.substr(i*4,4);sTm2="";for(var j=arrtm[i].length;j>=0;j-- ){sTm2+=arrtm[i].substring(j,j-1);}arrtm[i]=sTm2;sPart=arrtm[i].length;for(var j=0;j<10;j++ ){for(var k=0;k<10;k++ ){arrtm[i]=arrtm[i].replace(k,arrhn[k]);}}if(sPart==4){arrtm[i]=arrtm[i].charAt(0)+"千"+arrtm[i].charAt(1)+"百"+arrtm[i].charAt(2)+"拾"+arrtm[i].charAt(3);}else if(sPart==3){arrtm[i]=arrtm[i].charAt(0)+"百"+arrtm[i].charAt(1)+"拾"+arrtm[i].charAt(2);}else if(sPart==2){arrtm[i]=arrtm[i].charAt(0)+"拾"+arrtm[i].charAt(1);}else{arrtm[i]=arrtm[i].charAt(0);}for(var j=0;j<4;j++ ){if(arrtm[i].match(arrul[j])){sPart-- ;arrtm[i]=arrtm[i].replace(arrul[j],"");}}if(sPart!=0){arrtm[i]+=sSum;}}for(nSize;nSize> -1;nSize-- ){sRtn+=arrtm[nSize];}sRtn=sRtn.replace("undefined","");if(bPoint){sRtn+=" 小數點 ";for(var i=0,n=strDecimal.length;i<n;i++ ){sRtn+=arrhn[parseInt(strDecimal.charAt(i))];}}return sRtn;},bytesToSize:function(bytes,precision,unit){if(precision===null||precision===undefined||precision===""){precision=1;}if(unit!==false){unit=true;}var units=['B','KB','MB','GB','TB','PB','EB','ZB','YB'];var i=0;while(bytes>=1024){bytes/=1024; ++i;}if(!unit){return bytes.toFixed(precision);}else{if(precision>0){return bytes.toFixed(precision)+' '+units[i];}else{return Math.round(bytes)+' '+units[i];}}},evenRound:function(num,decimalPlaces){var d=decimalPlaces||0;var m=Math.pow(10,d);var n= +(d?num*m:num).toFixed(8);var i=Math.floor(n),f=n-i;var r=(f==0.5)?((i%2==0)?i:i+1):Math.round(n);return d?r/m:r;},_numberMaskCache:{},_parseNumberMask:function(strMask){var pThis=Eco.number;var res=pThis._numberMaskCache[strMask];if(res){return res;}var dispComma=false,nMin=0,nMax=0,nDecimalMin= -1,nDecimalMax=0;strMask=nexacro.trimLeft(strMask);if(strMask.length<=0){return [dispComma,nMin,nMax,nDecimalMin,nDecimalMax];}nDecimalMax=0;nDecimalMin=0;dispComma=(strMask.indexOf(",")>=0);var c,bFindPoint=false;for(var i=0,n=strMask.length;i<n;i++ ){c=strMask.charAt(i);if(c=='.'){bFindPoint=true;}else if(c=='#'||c=='0'||c=='9'||c==','){if(bFindPoint){if(c=='0'){nDecimalMax++ ;nDecimalMin=nDecimalMax;}else{nDecimalMax++ ;}}else{if(c=='0'){nMin++ ;}else if(nMin>0){nMin++ ;}nMax++ ;}}}res=[dispComma,nMin,nMax,nDecimalMin,nDecimalMax];pThis._numberMaskCache[strMask]=res;return res;},_numberSplit:function(strText){var pThis=Eco.number;var nBegin=0,nSign;if((nBegin=strText.indexOf('+'))>=0){nSign= +1;nBegin=1;}else if((nBegin=strText.indexOf('-'))>=0){nSign= -1;nBegin=1;}else{nSign=0;nBegin=0;}var nPoint=strText.indexOf(pThis.point,nBegin),strNumber="",bPoint,strDecimal="";if(nPoint<0){strNumber=strText.substr(nBegin);bPoint=false;}else{strNumber=strText.substr(nBegin,nPoint-nBegin);strDecimal=strText.substr(nPoint+1);bPoint=true;}return [nSign,bPoint,strNumber,strDecimal];},_removeMask:function(str){var pThis=Eco.number;str=str.trim();var ntxtLen=str.length,i,pointVal=pThis.point,separatorVal=pThis.separator;bPoint=false,bInside=false,buf=[];for(i=0;i<ntxtLen;i++ ){var c=str.charAt(i);if((c=='+'||c=='-')&&(bInside===false)){buf.push(c);bInside=true;}else if(nexacro.isNumeric(c)){buf.push(c);bInside=true;}else if(c==pointVal&&bPoint===false){buf.push(c);bPoint=true;bInside=true;}else if(c!=separatorVal){return "";}}return buf.join("");},_applyComma:function(strNumber){var pThis=Eco.number;var grouping=pThis.separatorGrouping;var thousands_sep=pThis.separator;if(thousands_sep.length>0){var dec_buf=strNumber.split(""),dec_size=strNumber.length,out_size=(thousands_sep.length+1)*strNumber.length,out_buf=[],cur_group=0,d_size=dec_size,endpos=out_size,groupingIdx=0,g;grouping=grouping.split("");while(grouping[groupingIdx]&&d_size>0){g=grouping[groupingIdx];if(g=="\\"){groupingIdx++ ;g=parseInt(grouping[groupingIdx]);}if(g>0){cur_group=g;while(g-- >0&&d_size>0){out_buf[ --endpos]=dec_buf[ --d_size];}if(d_size>0){out_buf[ --endpos]=thousands_sep;}}else if(g==0&&d_size>cur_group){g=cur_group;while(g-- >0){out_buf[ --endpos]=dec_buf[ --d_size];}if(d_size>0){out_buf[ --endpos]=thousands_sep;}}else if(g==0&&d_size<=cur_group&&d_size>0){g=d_size;while(g-- >0){out_buf[ --endpos]=dec_buf[ --d_size];}}else{break;}}return out_buf.slice(endpos,out_size+endpos).join("");}return strNumber;},_normalizeValue:function(strValue,bTrim){var pThis=Eco.number;if(strValue.length<=0){return strValue;}if(bTrim===undefined){bTrim=true;}strValue=pThis._removeMask(strValue);if(strValue.charAt(strValue.length-1)==pThis.point){strValue=strValue+"0";}if(bTrim){var bSign=(strValue.charAt(0)=='-')?1:0;var pointVal=pThis.point;while(strValue.charAt(0+bSign)=='0'&&strValue.charAt(1+bSign)!=pointVal&&strValue.length!=(1+bSign)){strValue=strValue.substring(0,0+bSign)+strValue.substr(0+bSign+1,strValue.length);}var nPoint=strValue.indexOf(pointVal);if(nPoint>=0){var i;for(i=strValue.length-1;i>nPoint+1;i-- ){if(strValue.charAt(i)!='0'){break;}}strValue=strValue.substring(0,i+1);}}if(strValue.charAt(0)=='+'){strValue=strValue.substr(1);}else if(strValue.length<=0||parseFloat(strValue)==0.0){if(strValue.charAt(0)=='-'){strValue=strValue.substr(1);}}return strValue;},getMaskFormatString:function(value,strMask){var pThis=Eco.number;var strText=value+"";strText=pThis._normalizeValue(strText,true);var nDecimalLen=0;var nIntegerLen=0;var ret=pThis._numberSplit(strText),nSign=ret[0],bPoint=ret[1],strNumber=ret[2],strDecimal=ret[3];nIntegerLen=strNumber.length;nDecimalLen=strDecimal?strDecimal.length:0;var maskInfo=pThis._parseNumberMask(strMask),dispComma=maskInfo[0],nMin=maskInfo[1],nMax=maskInfo[2],nDecimalMin=maskInfo[3],nDecimalMax=maskInfo[4];if(nMin>nIntegerLen){var tmpStr="";for(var i=0,n=nMin-nIntegerLen;i<n;i++ ){tmpStr+="0";}strNumber=tmpStr+strNumber;}if(nDecimalMin>nDecimalLen){var tmpStr="";for(var i=0,n=nDecimalMin-nDecimalLen;i<n;i++ ){tmpStr+="0";}strDecimal=strDecimal+tmpStr;}else if(nDecimalMax!= -1&&nDecimalMax<nDecimalLen){strDecimal=strDecimal.substring(0,nDecimalMax)+strDecimal.substr(nDecimalLen,strDecimal.length);}if(dispComma){strNumber=pThis._applyComma(strNumber);}if(nSign<0){strText="-";}else if(nSign>0){strText="+";}else{strText="";}strText+=strNumber;if(strDecimal.length>0){strText+=pThis.point;strText+=strDecimal;}return strText;}});}
if(!JsNamespace.exist("Eco.string")){JsNamespace.declare("Eco.string",{indexOfIgnoreCase:function(value,sFind,nStart){return value.toLowerCase().indexOf(sFind.toLowerCase(),nStart);},replaceIgnoreCase:function(sOrg,sRepFrom,sRepTo){var pos,nStart=0,sRet="";var pThis=Eco.string;while(1){pos=pThis.indexOfIgnoreCase(sOrg,sRepFrom,nStart);if(pos<0){sRet+=sOrg.substr(nStart);break;}else{sRet+=sOrg.substr(nStart,pos-nStart);sRet+=sRepTo;nStart=pos+sRepFrom.length;}}return sRet;},lastIndexOfIgnoreCase:function(source,target,opt_start){if(opt_start===undefined||opt_start<0||opt_start>source.length){opt_start=source.length-1;}return source.toLowerCase().lastIndexOf(target.toLowerCase(),opt_start);},getRightStr:function(source,length){if(source.length<length){return source;}else{return source.substr(source.length-length,length);}},removeStr:function(source,target,direction,opt_ignoreCase){direction=direction||"left";if(opt_ignoreCase!==false){opt_ignoreCase=true;}var tempSource,tempTarget,pos;var sourceLen=source.length;var targetLen=target.length;tempSource=source;tempTarget=target;if(!opt_ignoreCase){tempSource=source.toLowerCase();tempTarget=target.toLowerCase();}if(direction=="left"){pos=tempSource.indexOf(tempTarget);}else if(direction=="right"){pos=tempSource.lastIndexOf(tempTarget);}else{return;}if(pos<0){return source;}else if(tempSource==tempTarget){return "";}else if(pos==0){return tempSource.substr(targetLen);}else if(pos>0){return tempSource.substr(0,pos)+tempSource.substr(pos+targetLen);}},_formatRegExp:/\{(\d+)\}/g,format:function(){var str=arguments[0];var args=Eco.array.toArray(arguments,1);return str.replace(Eco.string._formatRegExp,function(m,i){return args[i];});},getLength:function(str,unit){if(!str){return 0;}var pThis=Eco.string;if(unit=="utf8"){return pThis._utf8ByteCount(str);}else if(unit=="ascii"){return pThis._asciiByteCount(str);}else{return str.length;}},_utf8ByteCount:function(str){if(str===undefined){return 0;}var pThis=Eco.string;var count=0,ch,high,low,isHighSurrogate=pThis._isHighSurrogate,utf8Len=pThis._utf8Len,toCodepoint=pThis._toCodepoint;for(var i=0,n=str.length;i<n;i++ ){ch=str.charCodeAt(i);if(isHighSurrogate(ch)){high=ch;low=str.charCodeAt( ++i);count+=utf8Len(toCodepoint(high,low));}else{count+=utf8Len(ch);}}return count;},_asciiByteCount:function(str){if(str===undefined){return 0;}var i,j=0,val;for(i=0,n=str.length;i<n;i++ ){val=str.charCodeAt(i);if(val>255){j++ ;}j++ ;}return j;},_utf8Len:function(codePoint){if(codePoint>=0xD800&&codePoint<=0xDFFF){Eco.Logger.error({"message":"Illegal argument: "+codePoint,"stack":true});}if(codePoint<0){Eco.Logger.error({"message":"Illegal argument: "+codePoint,"stack":true});}if(codePoint<=0x7F){return 1;}if(codePoint<=0x7FF){return 2;}if(codePoint<=0xFFFF){return 3;}if(codePoint<=0x1FFFFF){return 4;}if(codePoint<=0x3FFFFFF){return 5;}if(codePoint<=0x7FFFFFFF){return 6;}Eco.Logger.error({"message":"Illegal argument: "+codePoint,"stack":true});},_isHighSurrogate:function(codeUnit){return codeUnit>=0xD800&&codeUnit<=0xDBFF;},_isLowSurrogate:function(codeUnit){return codeUnit>=0xDC00&&codeUnit<=0xDFFF;},_toCodepoint:function(highCodeUnit,lowCodeUnit){var pThis=Eco.string;if(!pThis._isHighSurrogate(highCodeUnit)){Eco.Logger.error({"message":"Illegal argument: "+highCodeUnit,"stack":true});}if(!pThis._isLowSurrogate(lowCodeUnit)){Eco.Logger.error({"message":"Illegal argument: "+lowCodeUnit,"stack":true});}highCodeUnit=(0x3FF&highCodeUnit)<<10;var u=highCodeUnit|(0x3FF&lowCodeUnit);return u+0x10000;},countNonword:function(str){var regExp=/\W/g;var rtn=str.match(regExp);return (!rtn)?0:rtn.length;},strFullToHalf:function(str){var i,c,sHalf="";var count=str.length;for(i=0;i<count;i++ ){var c=str.charCodeAt(i);if(c==12288){sHalf+=unescape("%20");}else if((c>=65281)&&(c<=65374)){sHalf+=unescape("%"+(c-65248).toString(16));}else{sHalf+=str.charAt(i);}}return sHalf;},strHalfToFull:function(str){var rTmp="";var iTmp="";var i,incount=str.length;var tempCode;for(i=0;i<incount;i++ ){tempCode=str.charCodeAt(i);if((tempCode>=32)&&(tempCode<=126)){if(tempCode==32){iTmp=unescape("%u"+(12288).toString(16));}else{iTmp=tempCode+65248;}}else{iTmp=tempCode;}if(tempCode==32){rTmp=rTmp+(iTmp);}else{rTmp=rTmp+String.fromCharCode(iTmp);}}return rTmp;},repeatStr:function(str,count){var rtn="".padLeft(count,str);return rtn;},hanGulToUnicode:function(str){return escape(str).replace(/%/gi,"\\");},unicodeToHanGul:function(str){return unescape(str.replace(/\\/gi,"%"));},replaceInvalidFileNameChars:function(str,opt_newvalue){if(opt_newvalue===null||opt_newvalue===undefined){opt_newvalue="_";}var filename=str.replace(/[\\\/:*?"<>|]/,opt_newvalue);return filename;},removeMultibyteChar:function(str){var rtn="";var arrStr=str.split(""),len=arrStr.length,chr;for(var i=0;i<len;i++ ){chr=arrStr[i];chr=escape(chr);if(chr.charAt(1)!="u"){rtn+=arrStr[i];}}return rtn;},startsWith:function(str,prefix){return str.lastIndexOf(prefix,0)==0;},endsWith:function(str,suffix){var l=str.length-suffix.length;return l>=0&&str.indexOf(suffix,l)==l;},unicodeToDecimal:function(val,leftDelimiter,rightDelimiter){if(Eco.isEmpty(leftDelimiter)){leftDelimiter="&#";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=";";}var res="";val=val.replace(/^\s+/,'');if(val.length==0){return "";}var code;for(var i=0,n=val.length;i<n;i++ ){code=val.charCodeAt(i);res+=leftDelimiter+code+rightDelimiter;}return res;},decimalToUnicode:function(val,leftDelimiter,rightDelimiter){if(Eco.isEmpty(leftDelimiter)){leftDelimiter="&#";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=";";}var res="";val=val.replace(/^\s+/,'');if(val.length==0){return "";}var delimiter=rightDelimiter+leftDelimiter;var arr=val.split(delimiter),chr;arr[0]=arr[0].substr(leftDelimiter.length);var lastE=arr[arr.length-1];arr[arr.length-1]=lastE.substr(0,lastE.length-rightDelimiter.length);for(var i=0,n=arr.length;i<n;i++ ){chr=String.fromCharCode(arr[i]);res+=chr;}return res;},unicodeToHex:function(val,leftDelimiter,rightDelimiter){if(Eco.isEmpty(leftDelimiter)){leftDelimiter="&#x";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=";";}var res="";val=val.replace(/^\s+/,'');if(val.length==0){return "";}var code;for(var i=0,n=val.length;i<n;i++ ){code=val.charCodeAt(i);res+=leftDelimiter+code.toString(16).toUpperCase()+rightDelimiter;}return res;},hexToUnicode:function(val,leftDelimiter,rightDelimiter){if(Eco.isEmpty(leftDelimiter)){leftDelimiter="&#x";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=";";}var res="";val=val.replace(/^\s+/,'');if(val.length==0){return "";}var delimiter=rightDelimiter+leftDelimiter;var arr=val.split(delimiter),chr;arr[0]=arr[0].substr(leftDelimiter.length);var lastE=arr[arr.length-1];arr[arr.length-1]=lastE.substr(0,lastE.length-rightDelimiter.length);for(var i=0,n=arr.length;i<n;i++ ){chr=String.fromCharCode(parseInt(arr[i],16));res+=chr;}return res;},_hex:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],_toHex:function(val){var hexs=Eco.string._hex;return hexs[(val>>4)&0xF]+hexs[val&0xF];},unicodeToUtf8:function(val,leftDelimiter,rightDelimiter){if(Eco.isEmpty(leftDelimiter)){leftDelimiter="";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=" ";}var res="";val=val.replace(/^\s+/,'');if(val.length==0){return "";}var code,toHex=Eco.string._toHex;for(var i=0,n=val.length;i<n;i++ ){code=val.charCodeAt(i);if(i>0){res+=rightDelimiter;}if(code<=0x7F){res+=leftDelimiter+toHex(code);}else if(code<=0x7FF){res+=leftDelimiter+toHex(0xC0|((code>>6)&0x1F))+rightDelimiter+leftDelimiter+toHex(0x80|(code&0x3F));}else if(code<=0xFFFF){res+=leftDelimiter+toHex(0xE0|((code>>12)&0x0F))+rightDelimiter+leftDelimiter+toHex(0x80|((code>>6)&0x3F))+rightDelimiter+leftDelimiter+toHex(0x80|(code&0x3F));}else if(code<=0x10FFFF){outputString+=leftDelimiter+toHex(0xF0|((code>>18)&0x07))+rightDelimiter+leftDelimiter+toHex(0x80|((code>>12)&0x3F))+rightDelimiter+leftDelimiter+toHex(0x80|((code>>6)&0x3F))+rightDelimiter+leftDelimiter+toHex(0x80|(code&0x3F));}else{res+=leftDelimiter+code.toString(16).toUpperCase();}}res+=rightDelimiter;return res;},utf8ToUnicode:function(val,leftDelimiter,rightDelimiter){val=val.replace(/^\s+/,'');val=val.replace(/ $/,'');if(val.length==0){return "";}if(Eco.isEmpty(leftDelimiter)){leftDelimiter="";}if(Eco.isEmpty(rightDelimiter)){rightDelimiter=" ";}var delimiter=rightDelimiter+leftDelimiter,arr;arr=val.split(delimiter);if(leftDelimiter.length&&rightDelimiter.length){arr[0]=arr[0].substr(leftDelimiter.length);var lastE=arr[arr.length-1];arr[arr.length-1]=lastE.substr(0,lastE.length-rightDelimiter.length);}var valLen=arr.length,res="",code,compte=0,tmpcode=0;for(var i=0;i<valLen;i++ ){code=parseInt(arr[i],16);switch(compte){case 0:if(0<=code&&code<=0x7F){res+=String.fromCharCode(code);}else if(0xC0<=code&&code<=0xDF){compte=1;tmpcode=code&0x1F;}else if(0xE0<=code&&code<=0xEF){compte=2;tmpcode=code&0xF;}else if(0xF0<=code&&code<=0xF7){compte=3;tmpcode=code&0x7;}else{res+=String.fromCharCode(code);}break;case 1:if(code<0x80||code>0xBF){res+=String.fromCharCode(code);}compte-- ;res+=String.fromCharCode((tmpcode<<6)|(code-0x80));tmpcode=0;break;case 2:case 3:if(code<0x80||code>0xBF){res+=String.fromCharCode(code);}tmpcode=(tmpcode<<6)|(code-0x80);compte-- ;break;}}return res;},_maskChr:{"@":/[\x20-\x7D]/,"#":/[0-9]/,"*":/[a-zA-Z]/,"9":/[a-zA-Z0-9]/,"A":/[A-Z]/,"a":/[a-z]/,"Z":/[A-Z0-9]/,"z":/[a-z0-9]/},_defaultPassChar:"*",_defaultMaskChar:"_",_PASSWORD_PAIR:["{","}"],_stringMaskCache:{},_chkEmpty:String.fromCharCode(0x08),_parseStringMask:function(strMask){var pThis=Eco.string;var res=pThis._stringMaskCache[strMask];if(res){return res;}var len=strMask.length,arrMask=[],arrPass=[],arrOrgMask=[],bQuote=false,bEscape=false,bPasswd=false,Mask=0,i,nIdx,cMasks=strMask.split(""),rMaskChr,ReserveMasks=pThis._maskChr;for(i=0,nIdx=0;i<len;i++ ){if(bEscape==false&&cMasks[i]=="'"){if(bQuote==false){bQuote=true;}else{bQuote=false;}continue;}Mask=0;if(bEscape==false&&cMasks[i]=="\\"&&!bQuote){bEscape=true;continue;}else if(bEscape){bEscape=false;}else if(bQuote==false){rMaskChr=ReserveMasks[cMasks[i]];if(rMaskChr){Mask=rMaskChr;}if(cMasks[i]==this._PASSWORD_PAIR[0]){bPasswd=true;continue;}if(cMasks[i]==this._PASSWORD_PAIR[1]){bPasswd=false;continue;}}arrMask[nIdx]=Mask;arrPass[nIdx]=bPasswd;arrOrgMask[nIdx]=cMasks[i];nIdx++ ;}res=[arrMask,arrPass,arrOrgMask];pThis._stringMaskCache[strMask]=res;return res;},_makeMaskedValue:function(arrVal,arrMask,arrOrgMask){var bOverlappedValue=false;var Mask;var c;var nXCharLen=0;var nLen=arrVal.length;var i,j;if(nLen==arrMask.length){for(i=0;i<nLen;i++ ){if(arrMask[i]==0&&arrVal[i]==arrMask[i]){continue;}else if(arrMask[i]==0){break;}}if(i==arrVal.length){bOverlappedValue=true;}}var strMaskedValue=[];nLen=arrOrgMask.length;var ReserveMasks=this._maskChr;for(i=0,j=0;i<nLen;i++ ){c=arrOrgMask[i];Mask=arrMask[i];if(Mask!=0&&ReserveMasks[c]){do{c=arrVal[j];j++ ;}while(c&&!Mask.test(c))if(Eco.isEmpty(c)){c=_chkEmpty;}}else if(bOverlappedValue&&arrOrgMask[i]==c){j++ ;}strMaskedValue[i]=c;}return strMaskedValue;},getMaskFormatString:function(val,strMask,maskChr){var pThis=Eco.string;if(!maskChr){maskChr=pThis._defaultMaskChar;}var maskInfo=pThis._parseStringMask(strMask),arrMask=maskInfo[0],arrPass=maskInfo[1],arrOrgMask=maskInfo[2],arrVal=val.split("");var maskedValue=pThis._makeMaskedValue(arrVal,arrMask,arrOrgMask);var i;var strText=[];var c;var Mask,Pass,strMask;var nLen=arrOrgMask.length;for(i=0;i<nLen;i++ ){c=maskedValue[i];Mask=arrMask[i];Pass=arrPass[i];strMask=arrOrgMask[i];if(Mask!=0){if(Eco.isEmpty(c)||c==pThis._chkEmpty){c=maskChr;}else if(Pass){c=pThis._defaultPassChar;}else if(strMask=="A"||strMask=="Z"){c=c.toUpperCase();}else if(strMask=="a"||strMask=="z"){c=c.toLowerCase();}}strText[i]=c;}return strText.join("");},_cacheEscapeXML:{},escapeXML:function(str){var pThis=Eco.string;if(typeof str!="string"){str=new String(str);}var ret=pThis._cacheEscapeXML[str];if(Eco.isEmpty(ret)){ret=str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/\"/g,"&quot;").replace(/\t/g,"&#9;").replace(/\r/g,"&#13;").replace(/\n/g,"&#10;");pThis._cacheEscapeXML[str]=ret;}return ret;},capitalize:function(str){if(!str){Eco.Logger.error({message:"str is null!",stack:true});}return str.replace(/\b[a-z]/g,function(match){return match.toUpperCase();});},camelize:function(str){return str.replace(/-(.)/g,function(all,chr){return chr.toUpperCase();});},hyphenate:function(str){return str.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();}});}
if(!JsNamespace.exist("Eco.object")){JsNamespace.declare("Eco.object",{getServiceArgumenets:function(object){var p,objects=[],i,len,value,obj,params=[],isEmpty=Eco.isEmpty,pThis=Eco.object;for(p in object){if(object.hasOwnProperty(p)){objects=objects.concat(pThis._toArgumentObjects(p,object[p],true));}}for(i=0,len=objects.length;i<len;i++ ){obj=objects[i];if(!obj||isEmpty(obj.name)){continue;}name=obj.name;value=obj.value;if(typeof value==="string"){value=nexacro.wrapQuote(value);}params.push(name+'='+value);}return params.join(" ");},getServiceDatasets:function(object){var p,objects=[],i,len,value,obj,params=[],isEmpty=Eco.isEmpty,pThis=Eco.object;for(p in object){if(object.hasOwnProperty(p)){objects=objects.concat(pThis._toArgumentObjects(p,object[p]));}}for(i=0,len=objects.length;i<len;i++ ){obj=objects[i];if(!obj||isEmpty(obj.name)){continue;}name=obj.name;value=obj.value;params.push(name+'='+value);}return params.join(" ");},_toArgumentObjects:function(name,value,recursive){var thisFunc=Eco.object._toArgumentObjects,objects=[],i,len,p;if(Eco.isXComponent(value)){if(value instanceof Static||value instanceof Button){value=value.text;}else{value=value.value;}objects.push({name:name,value:value});}else if(Eco.isArray(value)){for(i=0,len=value.length;i<len;i++ ){if(recursive){objects=objects.concat(thisFunc(name+'_'+i,value[i],true));}else{objects.push({name:name,value:value[i]});}}}else if(Eco.isObject(value)){for(p in value){if(value.hasOwnProperty(p)){if(recursive){objects=objects.concat(thisFunc(name+'_'+p,value[p],true));}else{objects.push({name:name,value:value[p]});}}}}else if(value instanceof Dataset){value=value.name;objects.push({name:name,value:value});}else{objects.push({name:name,value:value});}return objects;},Each:function(object,func,scope){var p,scope=scope||object;for(p in object){if(object.hasOwnProperty(p)){if(func.call(scope,p,object[p],object)===false){return;}}}},merge:function(tarobject){var i=1,func,scope,ln=arguments.length,mergeFunc=Eco.object.merge,isObjectFunc=Eco.isObject,o,prop,val,tarval;if(!tarobject){return;}if(typeof arguments[ln-1]=="function"){ln=ln-1;func=arguments[ln];}else if(typeof arguments[ln-2]=="function"){ln=ln-2;func=arguments[ln];scope=arguments[ln+1]||this;}if(func){for(;i<ln;i++ ){o=arguments[i];for(prop in o){if(o.hasOwnProperty(prop)){val=o[prop];if(func.call(scope,prop,val,tarobject)!==false){tarobject[prop]=val;}}}}}else{for(;i<ln;i++ ){o=arguments[i];for(prop in o){if(o.hasOwnProperty(prop)){val=o[prop];if(!tarobject[prop]){tarobject[prop]=val;}}}}}return tarobject;},copyProperties:function(tarobject,srcobject){if(tarobject&&srcobject){var p,value;for(p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];tarobject[p]=value;}}}},copyPropertiesIf:function(tarobject,srcobject,condition,scope){if(tarobject&&srcobject){var p,value,ret;if(condition&&Eco.isFunction(condition)){for(var p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];ret=condition.call(scope||this,p,value,srcobject);if(ret){tarobject[p]=value;}}}}else{for(var p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];if(tarobject[p]===condition){tarobject[p]=value;}}}}}},getValues:function(object){var values=[],p;for(p in object){if(object.hasOwnProperty(p)){values.push(object[p]);}}return values;},_hasDontEnumBug:!({toString:null}).propertyIsEnumerable('toString'),_dontEnums:['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],getPropertyNames:Object.keys?function(object){return Object.keys(object);}:function(object){var names=[],p;for(p in object){if(object.hasOwnProperty(p)){names.push(p);}}var pThis=Eco.object;if(pThis._hasDontEnumBug){var enums=pThis._dontEnums;for(var i=0,len=enums.length;i<len;i++ ){if(object.hasOwnProperty(enums[i])){names.push(enums[i]);}}}return names;},getSize:function(object){var len=0,p;for(p in object){if(object.hasOwnProperty(p)){len++ ;}}return len;},equal:function(object0,object1){if(object0===object1){return true;}if(object0&&object1){return this._equalProperty(object0,object1)&&this._equalProperty(object1,object0);}else if(!object0&&!object1){return object0===object1;}else{return false;}},_equalProperty:function(object0,object1){var p;for(p in object0){if(object0.hasOwnProperty(p)){if(object0[p]!==object1[p]){return false;}}}return true;},getArray:function(object){var array=[],p,values;for(p in object){if(object.hasOwnProperty(p)){values={};values[p]=object[p];array.push(values);}}return array;},toDataset:function(object,ds,dir){var p,i,len,value;if(dir=="vert"){if(!Eco.isEmpty(object)){ds.addColumn("name","string",256);ds.addColumn("value","string",256);}for(p in object){if(object.hasOwnProperty(p)){value=object[p]||"";len=ds.addRow();ds.setColumn(len,"name",p);ds.setColumn(len,"value",value);}}}else{if(!Eco.isEmpty(object)){for(p in object){if(object.hasOwnProperty(p)){ds.addColumn(p,"string",256);}}len=ds.addRow();for(p in object){if(object.hasOwnProperty(p)){value=object[p]||"";ds.setColumn(len,p,value);}}}}},fromDataset:function(object,ds,dir){var i,len,name,value,isEmpty=Eco.isEmpty;if(dir=="vert"){for(i=0,len=ds.getRowCount();i<len;i++ ){name=ds.getColumn(i,"name");if(isEmpty(name)){continue;}value=ds.getColumn(i,"value")||"";object[name]=value;}}else{for(i=0,len=ds.getColCount();i<len;i++ ){name=ds.getColID(i);if(isEmpty(name)){continue;}value=ds.getColumn(0,name)||"";object[name]=value;}}}});}
if(!JsNamespace.exist("Eco.XComp.Style")){JsNamespace.declare("Eco.XComp.Style",{_runtimeStyleList:["background","border","border-radius","box-shadow","color","edge","font","icon","icon-position ","letter-spacing","line-height","opacity","padding","text-align","text-decoration","text-padding","vertical-align","word-wrap","word-spacing"],getBorderWidth:function(xComp){var border=xComp._getCurrentStyleBorder();var leftWidth=0,topWidth=0,rightWidth=0,bottomWidth=0;if(border){leftWidth=border.left.width;topWidth=border.top.width;rightWidth=border.right.width;bottomWidth=border.bottom.width;leftWidth=nexacro.toNumber(leftWidth.replace("px",""),0);topWidth=nexacro.toNumber(topWidth.replace("px",""),0);rightWidth=nexacro.toNumber(rightWidth.replace("px",""),0);bottomWidth=nexacro.toNumber(bottomWidth.replace("px",""),0);return [leftWidth,topWidth,rightWidth,bottomWidth];}return [0,0,0,0];},getPadding:function(xComp){var padding=xComp._getCurrentStylePadding();var leftSize=0,topSize=0,rightSize=0,bottomSize=0;if(padding){topSize=(isNaN(padding.top)?0:padding.top);bottomSize=(isNaN(padding.bottom)?0:padding.bottom);leftSize=(isNaN(padding.left)?0:padding.left);rightSize=(isNaN(padding.right)?0:padding.right);}return [leftSize,topSize,rightSize,bottomSize];},getMargin:function(xComp){return [0,0,0,0];},getCurrentStyle:function(xComp){return {};},getStyle:function(xComp,pseudoElt){if(Eco.isXComponent(xComp)){var elem;var cellElem;var ctrlElem;var cellElemStyle;var rtn={};if(nexacro._Browser!="Runtime"){elem=this._getElements(xComp);cellElem=elem.cell;ctrlElem=elem.control;if(!ctrlElem){trace(xComp.name+"에 element가 존재하지 않습니다!!!");return;}if(cellElem){cellElemStyle=cellElem.style;}pseudoElt=(pseudoElt)?pseudoElt:null;var style=window.getComputedStyle(ctrlElem,pseudoElt);var i=0;var value;if(style.getPropertyValue){while(style[i]){var prop=style[i];value=style.getPropertyValue(prop);rtn[prop]=value;i++ ;}}else{while(style[i]){var prop=style[i];value=style.getAttribute(prop);rtn[prop]=value;i++ ;}}return rtn;}else{var styleList=this._runtimeStyleList;var i=0;var value;var runtimeName;while(styleList[i]){var prop=styleList[i];runtimeName=Eco.string.camelize(prop);value=xComp[runtimeName];rtn[prop]=value;i++ ;}return rtn;}}},createCSSSelector:function(selector,styleValue){if(nexacro._Browser!="Runtime"){if(!selector||!styleValue){return;}if(!Eco.isString(selector)){return;}if(!Eco.isObject(styleValue)){return;}if(selector.substr(0,1)!="."){trace("selector 첫시작은 '.'이 되어야 합니다");return;}var style;var prevStyleValue,value;var styleStr="";var newValue={};for(var name in styleValue){if(styleValue[name]&&styleValue.hasOwnProperty(name)){styleStr+=name+":"+styleValue[name]+";";newValue[name]=styleValue[name];}}this._createCSSSelector(selector,styleStr);}},_setCSSSelector:function(xComp,selector,type){if(!Eco.isArray(xComp)||xComp.length==0){return;}var elem;var cellElem;var ctrlElem;var i=0;while(xComp[i]){var item=xComp[i];elem=this._getElements(item);cellElem=elem.cell;ctrlElem=elem.control;if(!ctrlElem){trace(xComp.name+"에 element가 존재하지 않습니다!!!");return;}if(type=="text"&&cellElem){cellElem.className=selector;}else{ctrlElem.className=selector;}i++ ;}},_createCSSSelector:function(selector,style){if(!document.styleSheets){return;}if(document.getElementsByTagName('head').length==0){return;}var styleSheet,mediaType;var styleSheetList=document.styleSheets;var styleSheetLen=document.styleSheets.length;if(styleSheetLen>0){for(var i=0,l=styleSheetLen;i<l;i++ ){if(styleSheetList[i].disabled){continue;}var media=styleSheetList[i].media;mediaType=typeof media;if(mediaType==='string'){if(media===''||(media.indexOf('screen')!== -1)){styleSheet=styleSheetList[i];}}else if(mediaType=='object'){if(media.mediaText===''||(media.mediaText.indexOf('screen')!== -1)){styleSheet=styleSheetList[i];}}if(typeof styleSheet!=='undefined'){break;}}}if(typeof styleSheet==='undefined'){var styleSheetElement=document.createElement('style');styleSheetElement.type='text/css';document.getElementsByTagName('head')[0].appendChild(styleSheetElement);for(i=0;i<styleSheetLen;i++ ){if(styleSheetList[i].disabled){continue;}styleSheet=styleSheetList[i];}mediaType=typeof styleSheet.media;}if(mediaType==='string'){for(var i=0,l=styleSheet.rules.length;i<l;i++ ){var styleSheetRule=styleSheet.rules[i];if(styleSheetRule.selectorText&&styleSheetRule.selectorText.toLowerCase()==selector.toLowerCase()){styleSheetRule.style.cssText=style;return;}}styleSheet.addRule(selector,style);}else if(mediaType==='object'){var styleSheetLength=(styleSheet.cssRules)?styleSheet.cssRules.length:0;for(var i=0;i<styleSheetLength;i++ ){var styleSheetCssRule=styleSheet.cssRules[i];if(styleSheetCssRule.selectorText&&styleSheetCssRule.selectorText.toLowerCase()==selector.toLowerCase()){styleSheetCssRule.style.cssText=style;return;}}styleSheet.insertRule(selector+'{'+style+'}',styleSheetLength);}},_getElements:function(xComp){var elem={};var control;var cell;if(xComp instanceof nexacro.Div){xComp=xComp.form;}control=xComp._control_element.handle;if(xComp._cell_elem){cell=xComp._cell_elem.handle;}else if(xComp._input_element){cell=xComp._input_element.handle;}elem.control=control;elem.cell=cell;return elem;},setStyle:function(xComp,styleValue,pseudoElt,priority){if(Eco.isXComponent(xComp)){var elem;var cellElem;var ctrlElem;var cellElemStyle;if(nexacro._Browser!="Runtime"){elem=this._getElements(xComp);cellElem=elem.cell;ctrlElem=elem.control;if(!ctrlElem){trace(xComp.name+"에 element가 존재하지 않습니다!!!");return;}if(cellElem){cellElemStyle=cellElem.style;}priority=(priority)?priority:null;var applyStyle={};var ctrlElemStyle=ctrlElem.style;if(ctrlElemStyle.setProperty){var style=window.getComputedStyle(ctrlElem,pseudoElt);var isEmpty=Eco.isEmpty;var isFunction=Eco.isFunction;var prevStyleValue,value;var newValue={};for(var name in styleValue){newValue[name]=styleValue[name];}for(var name in newValue){if(newValue.hasOwnProperty(name)){value=newValue[name];if(cellElemStyle&&(name.substr(0,4)=="text"||name=="vertical-align")){cellElemStyle.setProperty(name,value,priority);}else{ctrlElemStyle.setProperty(name,value,priority);}}}}else{var style=window.getComputedStyle(ctrlElem,pseudoElt);var isEmpty=Eco.isEmpty;var isFunction=Eco.isFunction;var prevStyleValue,value;var newValue={};for(var name in styleValue){var camelName=Eco.string.camelize(name);newValue[camelName]=styleValue[name];}for(var name in newValue){if(newValue.hasOwnProperty(name)){value=newValue[name];if(cellElemStyle&&(name.substr(0,4)=="text"||name=="vertical-align")){cellElemStyle.setAttribute(name,value);}else{ctrlElemStyle.setAttribute(name,value);}}}}}else{var styleList=this._runtimeStyleList;for(var name in styleValue){var propertyName=Eco.string.camelize(name);if(xComp[propertyName]!==undefined){var value=styleValue[name];xComp["set_"+propertyName].call(xComp,value);}}}}},setStyleIf:function(xComp,styleValue,condition,scope){if(condition===null||condition===undefined){condition="";}var pThis=Eco.XComp.Style;var elem;var cellElem;var ctrlElem;var cellElemStyle;if(xComp&&styleValue){var value,ret,isFunc=false;if(condition&&Eco.isFunction(condition)){isFunc=true;}if(nexacro._Browser!="Runtime"){elem=this._getElements(xComp);cellElem=elem.cell;ctrlElem=elem.control;if(!ctrlElem){trace(xComp.name+"에 element가 존재하지 않습니다!!!");return;}if(cellElem){cellElemStyle=cellElem.style;}if(!elem){return;}var priority=null;var pseudoElt;var ctrlElemStyle=ctrlElem.style;if(ctrlElemStyle.setProperty){var style=window.getComputedStyle(ctrlElem,pseudoElt);var isEmpty=Eco.isEmpty;var isFunction=Eco.isFunction;var prevStyleValue,value;var newValue={};for(var name in styleValue){newValue[name]=styleValue[name];}for(var name in newValue){if(newValue.hasOwnProperty(name)){value=newValue[name];if(cellElemStyle&&(name.substr(0,4)=="text"||name=="vertical-align")){cellElemStyle.setProperty(name,value,priority);}else{ctrlElemStyle.setProperty(name,value,priority);}}}}else{var style=window.getComputedStyle(ctrlElem,pseudoElt);var isEmpty=Eco.isEmpty;var isFunction=Eco.isFunction;var prevStyleValue,value;var newValue={};for(var name in styleValue){var camelName=Eco.string.camelize(name);newValue[camelName]=styleValue[name];}for(var name in newValue){if(newValue.hasOwnProperty(name)){value=newValue[name];if(cellElemStyle&&(name.substr(0,4)=="text"||name=="vertical-align")){cellElemStyle.setAttribute(name,value);}else{ctrlElemStyle.setAttribute(name,value);}}}}}else{for(var name in styleValue){if(name.substr(0,1)=="_"){continue;}if(styleValue.hasOwnProperty(name)){var runtimeName=Eco.string.camelize(name);value=styleValue[name];if(isFunc){if(condition.call(scope,xComp,name,value)){xComp["set_"+runtimeName](value);}}else if(condition==""&&Eco.isEmpty(xComp[name])){xComp["set_"+runtimeName](value);}else if(xComp[name]==condition){xComp["set_"+runtimeName](value);}}}}}}});}
if(!JsNamespace.exist("Eco.Logger")){JsNamespace.declare("Eco.Logger",{_LEVEL_STRING:["fatal","error","warn","info","debug"],logLevel:4,_logBuffer:[],_logBufferMax:1000,_indent:'    ',_startLoggerTime:(new Date()).getTime(),_startElapsedTime:null,_filter:"",_getDateFormatString:function(){var objDate=new Date();return Eco.date.getMaskFormatString(objDate,"yyyy-MM-dd HH:mm:ss.sss");},_getFuncFullName:function(func){var name="";if(func._thisOwner){name+=(func._thisOwner._className||Eco.XComp.getPathName(func._thisOwner))+".";}if(func._thisName){name+=func._thisName;}else{var funcName="";if('name' in func){funcName=func.name;}else{var reg=/function\s*([\w\-$]+)?\s*\(/i;funcName=reg.test(func.toString())?RegExp.$1:"";}if(funcName.length==0){funcName="anonymous function";}name+=funcName;}return name;},_getElapsed:function(isTotal){var logger=Eco.Logger;var stratTime=logger._startElapsedTime;if(!stratTime){stratTime=logger._startLoggerTime;}logger._startElapsedTime=null;var currentTime=(new Date()).getTime();var elpased=(currentTime-stratTime);var sec=parseInt(elpased/1000,10);var msec=parseInt(elpased%1000,10).toString().padLeft(3,"0");if(logger._totalElapsedTime!=null){logger._totalElapsedTime+=elpased;}if(isTotal){var elpased0=logger._totalElapsedTime;delete logger._totalElapsedTime;var sec1=parseInt(elpased0/1000,10);var msec1=parseInt(elpased0%1000,10).toString().padLeft(3,"0");return [(sec+"."+msec),(sec1+"."+msec1)];}return sec+"."+msec;},_xCompPropertyObjRe:/position|position2|positiontype|anchor|tooltiptype|tooltiptext|dropformat|currentstyle|style|scrollbars/,_getDumpString:function(object,bArguments){var logger=Eco.Logger;var member,type,value,nm,members=[];if(bArguments){if(object!=null){for(var i=0,n=object.length;i<n;i++ ){value=object[i];type=typeof value;if(type=="function"){members.push("function refer");continue;}if(Eco.isPrimitive(value)){member=value;}else if(Eco.isXComponent(value)){member=value.name||value;}else if(Eco.isArray(value)){member='[ ]';}else if(Eco.isObject(value)){member='{ }';}else{member=value;}if(type=="undefined"||type=="null"){members.push(type);}else{members.push(type+': '+member);}}}}else{if(object!=null){if(object.hasOwnProperty){for(nm in object){if(object.hasOwnProperty(nm)){value=object[nm];type=typeof value;if(type=="function"){continue;}if(Eco.isPrimitive(value)){member=value;}else if(Eco.isXComponent(value)){member=value.name||value;}else if(Eco.isArray(value)){member='[ ]';}else if(Eco.isObject(value)){member='{ }';}else{member=type;}members.push(nm+': '+member);}}}else{for(nm in object){value=object[nm];type=typeof value;if(type=="function"){continue;}if(value instanceof UserEvent||nm=="canvas"){continue;}if(logger._xCompPropertyObjRe.test(nm)){member=value.toString?value.toString():value;}else if(Eco.isXComponent(value)){member=value.name||value;}else if(Eco.isPrimitive(type)){member=value;}else if(Eco.isArray(value)){member='[ ]';}else if(Eco.isObject(value)){member='{ }';}else{member=type;}members.push(nm+': '+member);}}}}if(members.length){if(bArguments){return members.join(', ');}else{return ' \nData: {\n  '+members.join(',\n  ')+'\n}';}}return '';},inspect:function(obj,showHidden,depth,colors,customInspect){var ctx={seen:[],styles:Eco.Logger._inspectstyles,stylize:Eco.Logger._stylizeNoColor};ctx.depth=depth;ctx.colors=colors;ctx.showHidden=showHidden;ctx.customInspect=customInspect;if(typeof ctx.showHidden==='undefined'){ctx.showHidden=false;}if(typeof ctx.depth==='undefined'){ctx.depth=2;}if(typeof ctx.colors==='undefined'){ctx.colors=false;}if(typeof ctx.customInspect==='undefined'){ctx.customInspect=true;}if(ctx.colors){ctx.stylize=Eco.Logger._stylizeWithColor;}return Eco.Logger._formatValue(ctx,obj,ctx.depth);},_formatValue:function(ctx,value,recurseTimes){if(ctx.customInspect&&value&&typeof value.inspect==='function'&&value.inspect!==Eco.Logger.inspect&&!(value.constructor&&value.constructor.prototype===value)){return String(value.inspect(recurseTimes));}var pThis=Eco.Logger;var primitive=pThis._formatPrimitive(ctx,value);if(primitive){return primitive;}var keys=Eco.object.getPropertyNames(value);var visibleKeys=pThis._arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);}if(keys.length===0){if(typeof value==='function'){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}if(Eco.isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}if(Eco.isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}if(Eco.isError(value)){return pThis._formatError(value);}}var base='',array=false,braces=['{','}'];if(Eco.isArray(value)){array=true;braces=['[',']'];}if(typeof value==='function'){var n=value.name?': '+value.name:'';base=' [Function'+n+']';}if(Eco.isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);}if(Eco.isDate(value)){base=' '+Date.prototype.toUTCString.call(value);}if(Eco.isError(value)){base=' '+pThis._formatError(value);}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}if(recurseTimes<0){if(Eco.isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else{return ctx.stylize('[Object]','special');}}ctx.seen.push(value);var output;if(array){output=pThis._formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else{output=Eco.array.map(keys,function(key){return pThis._formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}ctx.seen.pop();return pThis._reduceToSingleString(output,base,braces);},_formatPrimitive:function(ctx,value){switch(typeof value){case 'undefined':return ctx.stylize('undefined','undefined');case 'string':var simple='\''+Eco.Json.encode(value).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string');case 'number':return ctx.stylize(''+value,'number');case 'boolean':return ctx.stylize(''+value,'boolean');}if(value===null){return ctx.stylize('null','null');}},_formatError:function(value){return '['+Error.prototype.toString.call(value)+']';},_formatArray:function(ctx,value,recurseTimes,visibleKeys,keys){var output=[],hasOwnProperty=Eco._hasOwnProperty;var pThis=Eco.Logger;for(var i=0,l=value.length;i<l; ++i){if(hasOwnProperty.call(value,String(i))){output.push(pThis._formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else{output.push('');}}Eco.array.forEach(keys,function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;},_formatProperty:function(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(!Eco._isIE8Below){desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else{str=ctx.stylize('[Getter]','special');}}else{if(desc.set){str=ctx.stylize('[Setter]','special');}}}else{desc={value:value[key]};}var hasOwnProperty=Eco._hasOwnProperty,pThis=Eco.Logger;if(!hasOwnProperty.call(visibleKeys,key)){name='['+key+']';}if(!str){if(Eco.array.indexOf(ctx.seen,desc.value,null,true)<0){if(recurseTimes===null){str=pThis._formatValue(ctx,desc.value,null);}else{str=pThis._formatValue(ctx,desc.value,recurseTimes-1);}if(str.indexOf('\n')> -1){if(array){str=str.split('\n');str=Eco.array.map(str,function(line){return '  '+line;});str=str.join('\n').substr(2);}else{str=str.split('\n');str=Eco.array.map(str,function(line){return '   '+line;});str='\n'+str.join('\n');}}}else{str=ctx.stylize('[...]','special');}}if(typeof name==='undefined'){if(array&&key.match(/^\d+$/)){return str;}name=Eco.Json.encode(''+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,'string');}}return name+': '+str;},_reduceToSingleString:function(output,base,braces){var numLinesEst=0;var length=Eco.array.reduce(output,function(prev,cur){numLinesEst++ ;if(cur.indexOf('\n')>=0){numLinesEst++ ;}return prev+cur.length+1;},0);if(length>60){return braces[0]+(base===''?'':base+'\n ')+' '+output.join(',\n  ')+' '+braces[1];}return braces[0]+base+' '+output.join(', ')+' '+braces[1];},_inspectstyles:{'special':'blue','number':'red','boolean':'blue','undefined':'bold','null':'bold','string':'hotpink','date':'blue','regexp':'blue'},_stylizeWithColor:function(str,styleType){var style=this.styles[styleType];if(style){if(style=="bold"){return '<b>'+str+'</b>';}else{return '<font color="'+style+'">'+str+'</font>';}}else{return str;}},_stylizeNoColor:function(str,styleType){return str;},_arrayToHash:function(arr){var hash={};Eco.array.forEach(arr,function(val,idx){hash[val]=true;});return hash;},_logging:function(level,msg){var logger=Eco.Logger;var logLevel=logger.logLevel;if(level>1&&logLevel<level){return;}var message,dump,stack,elapsed,elapsedTotal,filter,showStackAnonymous;if(typeof msg!='string'){message=msg.message||'';dump=msg.dump;stack=msg.stack;elapsed=msg.elapsed;elapsedTotal=msg.elapsedTotal;filter=msg.filter;showStackAnonymous=msg.showStackAnonymous;}else{message=msg;}var logFunc=logger._logging.caller;var callFunc=logFunc.caller;var dateString=logger._getDateFormatString();var levelString=logger._LEVEL_STRING[level];var funcString=logger._getFuncFullName(callFunc);var resultMessage=dateString+" ["+levelString+"] "+funcString+" - "+message;var elapsedTime="";if(elapsed){elapsedTime=logger._getElapsed(elapsedTotal);if(elapsedTotal){resultMessage+=" (Elapsed Time : "+elapsedTime[0]+" sec -- Total Time : "+elapsedTime[1]+" sec) ";}else{resultMessage+=" (Elapsed Time : "+elapsedTime+" sec)";}}var dumpString="";if(dump){dumpString=logger._getDumpString(dump);resultMessage+="\n*****************PRINTING DUMP************************";resultMessage+=dumpString;resultMessage+="\n*****************COMPLETE DUMP************************";}var stackString="";if(stack){stackString=logger._getCallStackString(logFunc,showStackAnonymous);resultMessage+="\n*****************PRINTING STACK************************";resultMessage+=stackString;resultMessage+="\n*****************COMPLETE STACK************************";}if(filter){if(logger._filter==filter){logger._writeLog(resultMessage);}}else{logger._writeLog(resultMessage);}var buffer=logger._logBuffer;var max=logger._logBufferMax;if(logLevel> -1&&logLevel>=level){if(buffer.length>=max){buffer.splice(0,1);}var buff={date:dateString,level:levelString,message:message,from:funcString,elapsed:elapsedTime,dump:dumpString,stack:stackString};logger._logBuffer.push(buff);}if(level==0||level==1){var e=new Error(message);throw e;}},_writeLog:function(message){nexacro.getApplication().trace(message);},_getCallStackString:function(func,showStackAnonymous){var logger=Eco.Logger;var f=func,indstr="",indentStr=logger._indent,ret="",index,stackLine="";var stack=[f];var startFunc=f.caller;while(f){f=f.caller;index= -1;for(var i=0,len=stack.length;i<len;i++ ){if(f==stack[i]){index=i;break;}}if(index<0){stack.push(f);stackLine=logger._getCallStackLine(indstr,f);if(stackLine.indexOf("anonymous function")> -1){if(showStackAnonymous){ret+="\n"+stackLine;indstr+=indentStr;}}else if(stackLine.length>0){ret+="\n"+stackLine;indstr+=indentStr;}}else{ret+="\n"+indstr+"stack overflow...";break;}}return ret;},_getCallStackLine:function(indstr,func){var logger=Eco.Logger;var nm=indstr;if(func){nm+=logger._getFuncFullName(func);nm+="("+logger._getDumpString(func.arguments,true)+")";return nm;}else{return "";}},getLogBuffer:function(){return Eco.Logger._logBuffer;},startElapsed:function(isTotal){Eco.Logger._startElapsedTime=(new Date()).getTime();if(isTotal){Eco.Logger._totalElapsedTime=0;}},getFilter:function(){return Eco.Logger._filter;},setFilter:function(filter){Eco.Logger._filter=filter;},fatal:function(msg){Eco.Logger._logging(0,msg);},error:function(msg){Eco.Logger._logging(1,msg);},warn:function(msg){Eco.Logger._logging(2,msg);},info:function(msg){Eco.Logger._logging(3,msg);},debug:function(msg){Eco.Logger._logging(4,msg);},setDebugInfoFunctions:function(form){for(var nm in form){if(form.hasOwnProperty(nm)&&typeof form[nm]=="function"){form[nm]._thisName=nm;form[nm]._thisOwner=form;}}}});}
if(!JsNamespace.exist("Eco.Color")){JsNamespace.declare("Eco.Color",{basicColors:[['#ff8080','#ffff80','#80ff80','#00ff80','#80ffff','#0080ff','#ff80c0','#ff80ff'],['#ff0000','#ffff00','#80ff00','#00ff40','#00ffff','#0080c0','#8080c0','#ff00ff'],['#804040','#ff8040','#00ff00','#008080','#004080','#8080ff','#800040','#ff0080'],['#800000','#ff8000','#008000','#008040','#0000ff','#0000a0','#800080','#8000ff'],['#400000','#804000','#004000','#004040','#000080','#000040','#400040','#400080'],['#000000','#808000','#808040','#808080','#408080','#c0c0c0','#400040','#ffffff']],HSLMAX:240,RGBMAX:255,HUE_VALUE_WHEN_SATURATION_IS_ZERO:160,rgbToHsl:function(R,G,B){var pThis=Eco.Color;var HSLMAX=pThis.HSLMAX;var RGBMAX=pThis.RGBMAX;var cMax=Math.max(Math.max(R,G),B);var cMin=Math.min(Math.min(R,G),B);var L=Math.floor((((cMax+cMin)*HSLMAX)+RGBMAX)/(2*RGBMAX));var H=0;if(cMax==cMin){S=0;H=pThis.HUE_VALUE_WHEN_SATURATION_IS_ZERO;}else{if(L<=(HSLMAX/2)){S=Math.floor((((cMax-cMin)*HSLMAX)+((cMax+cMin)/2))/(cMax+cMin));}else{S=Math.floor((((cMax-cMin)*HSLMAX)+((2*RGBMAX-cMax-cMin)/2))/(2*RGBMAX-cMax-cMin));}var Rdelta=Math.floor((((cMax-R)*(HSLMAX/6))+((cMax-cMin)/2))/(cMax-cMin));var Gdelta=Math.floor((((cMax-G)*(HSLMAX/6))+((cMax-cMin)/2))/(cMax-cMin));var Bdelta=Math.floor((((cMax-B)*(HSLMAX/6))+((cMax-cMin)/2))/(cMax-cMin));if(R==cMax){H=Bdelta-Gdelta;}else if(G==cMax){H=(HSLMAX/3)+Rdelta-Bdelta;}else{H=((2*HSLMAX)/3)+Gdelta-Rdelta;}if(H<0){H+=HSLMAX;}if(H>HSLMAX){H-=HSLMAX;}}var res=[];res[0]=Math.floor(H);res[1]=Math.floor(S);res[2]=Math.floor(L);return res;},hueToRgb:function(n1,n2,hue){var HSLMAX=Eco.Color.HSLMAX;n1=Math.floor(n1);n2=Math.floor(n2);hue=Math.floor(hue);if(hue<0){hue+=HSLMAX;}if(hue>HSLMAX){hue-=HSLMAX;}if(hue<(HSLMAX/6)){return Math.floor(n1+Math.floor((((n2-n1)*hue+(HSLMAX/12))/(HSLMAX/6))));}if(hue<(HSLMAX/2)){return (n2);}if(hue<((HSLMAX*2)/3)){return Math.floor(n1+Math.floor((((n2-n1)*(((HSLMAX*2)/3)-hue)+(HSLMAX/12))/(HSLMAX/6))));}else{return Math.floor(n1);}},hslToRgb:function(hue,sat,lum){var R,G,B;var pThis=Eco.Color;var HSLMAX=pThis.HSLMAX;var RGBMAX=pThis.RGBMAX;if(sat==0){R=G=B=(lum*RGBMAX)/HSLMAX;if(hue!=pThis.HUE_VALUE_WHEN_SATURATION_IS_ZERO){}}else{var Magic1,Magic2;if(lum<=(HSLMAX/2)){Magic2=Math.floor((lum*(HSLMAX+sat)+(HSLMAX/2))/HSLMAX);}else{Magic2=(lum+sat-Math.floor(((lum*sat)+(HSLMAX/2))/HSLMAX));}Magic1=2*lum-Magic2;var hueToRgb=pThis.hueToRgb;R=(hueToRgb(Magic1,Magic2,hue+(HSLMAX/3))*RGBMAX+(HSLMAX/2))/HSLMAX;G=(hueToRgb(Magic1,Magic2,hue)*RGBMAX+(HSLMAX/2))/HSLMAX;B=(hueToRgb(Magic1,Magic2,hue-(HSLMAX/3))*RGBMAX+(HSLMAX/2))/HSLMAX;}res=[];res[0]=Math.floor(R);res[1]=Math.floor(G);res[2]=Math.floor(B);return res;},rgbToHex:function(red,green,blue,alpha){var numberToHex=Eco.Color.numberToHex;return "#"+numberToHex(red)+numberToHex(green)+numberToHex(blue)+numberToHex(alpha);},numberToHex:function(value){if(Eco.isEmpty(value)){return "";}var hex=value.toString(16).padLeft(2,"0");return hex.toUpperCase();},hexToHsl:function(str){if(Eco.isEmpty(str)){alert("Arguments is empty!");return;}var pThis=Eco.Color;var rgb=pThis.hexToRgb(str);return pThis.rgbToHsl(rgb[0],rgb[1],rgb[2]);},hexToRgb:function(str){if(Eco.isEmpty(str)){alert("Arguments is empty!");return;}if(!(str.match(/^#[0-9a-f]{3,8}$/i))){str=nexacro._xreNamedColorList[str];}var hex;if(str.length==9){hex=str.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})(\w{1,2})$/);}else{hex=str.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);}if(hex.length>=4){var rgb=[0,0,0];for(var i=0;i<3;i++ ){var value=hex[i+1];rgb[i]=parseInt(value.length==1?value+value:value,16);}if(hex[4]&&hex[4].length>0){rgb.push(parseInt(hex[4],16));}else{rgb.push(255);}return rgb;}}});}
if(!JsNamespace.exist("Eco.XComp")){JsNamespace.declare("Eco.XComp",{_operators:{"equal":function(a,v){if(Eco.isEmpty(v)){return Eco.isEmpty(a);}return a==v;},"notEqual":function(a,v){return a!=v;},"greaterThan":function(a,v){return a>v;},"greaterThanEqual":function(a,v){return a>=v;},"lessThan":function(a,v){return a<v;},"lessThanEqual":function(a,v){return a<=v;},"contains":function(a,v){return a&&a.indexOf(v)> -1;},"startWith":function(a,v){return a&&a.substr(0,v.length)==v;},"endWith":function(a,v){return a&&a.substr(a.length-v.length)==v;}},typeOf:function(obj){var type;if(obj&&(typeof obj=="object")){var s=obj.toString();if(s=="[object Object]"){return type;}type=s.substr(8,s.length-9);}return type;},isVisible:function(obj){if(!("visible" in obj)){return false;}if(obj.visible==false){return false;}var ret=true;var p=obj.parent;while(p){if(p instanceof ChildFrame){break;}if(p.visible===false){ret=false;break;}p=p.parent;}return ret;},isVisual:function(obj){if(obj["show"]===undefined||(typeof obj["show"]!="function")){return false;}return true;},isEnable:function(obj){if(!("enable" in obj)){return false;}if(obj.enable==false){return false;}var ret=true;var p=obj.parent;while(p){if(p instanceof ChildFrame){break;}if(p.enable===false){ret=false;break;}p=p.parent;}return ret;},_parseQueryCache:[],_tokenizeQueryWhere:function(str){var c;var i=0;var s;var n;var q;var result=[];var prefix='<>&|=*^$!';var suffix='=>&|';var length=str.length;c=str.charAt(i);while(c){if(c<=' '){i+=1;c=str.charAt(i);}else if((c>='a'&&c<='z')||(c>='A'&&c<='Z')||c=='_'){s=c;i+=1;for(;;){c=str.charAt(i);if((c>='a'&&c<='z')||(c>='A'&&c<='Z')||(c>='0'&&c<='9')||c==='_'){s+=c;i+=1;}else{break;}}if(s=='true'||s=='false'){result.push({type:'boolean',value:s});}else{result.push({type:'named',value:s});}}else if(c>='0'&&c<='9'){s=c;i+=1;for(;;){c=str.charAt(i);if(c<'0'||c>'9'){break;}i+=1;s+=c;}if(c==='.'){i+=1;s+=c;for(;;){c=str.charAt(i);if(c<'0'||c>'9'){break;}i+=1;s+=c;}}if(c==='e'||c==='E'){i+=1;s+=c;c=str.charAt(i);if(c==='-'||c==='+'){i+=1;s+=c;c=str.charAt(i);}if(c<'0'||c>'9'){trace("Bad exponent");}do{i+=1;s+=c;c=str.charAt(i);}while(c>='0'&&c<='9')}if(c>='a'&&c<='z'){s+=c;i+=1;trace("Bad number");}n= +s;if(isFinite(n)){result.push({type:'number',value:n});}else{trace("Bad number");}}else if(c==='\''||c==='"'){s='';q=c;i+=1;for(;;){c=str.charAt(i);if(c<' '){if(c==='\n'||c==='\r'||c===''){trace("Unterminated string.");}else{trace("Control character in string.");}}if(c===q){break;}if(c==='\\'){i+=1;if(i>=length){trace("Unterminated string");}c=str.charAt(i);switch(c){case 'b':c='\b';break;case 'f':c='\f';break;case 'n':c='\n';break;case 'r':c='\r';break;case 't':c='\t';break;case 'u':if(i>=length){trace("Unterminated string");}c=parseInt(str.substr(i+1,4),16);if(!isFinite(c)||c<0){trace("Unterminated string");}c=String.fromCharCode(c);i+=4;break;}}s+=c;i+=1;}i+=1;result.push({type:'string',value:s});c=str.charAt(i);}else if(c==='/'&&str.charAt(i+1)==='/'){i+=1;for(;;){c=str.charAt(i);if(c==='\n'||c==='\r'||c===''){break;}i+=1;}}else if(prefix.indexOf(c)>=0){s=c;i+=1;while(true){c=str.charAt(i);if(i>=length||suffix.indexOf(c)<0){break;}s+=c;i+=1;}result.push({type:'operator',value:s});}else{if("()[]".indexOf(c)> -1){result.push({type:'bracket',value:c});}else{result.push({type:'operator',value:c});}i+=1;c=str.charAt(i);}}return result;},_parseQueryWhere:function(where){var pThis=Eco.XComp;var cache=pThis._parseQueryCache[where];if(cache){return cache;}var token,type,value,temp;var tokens=pThis._tokenizeQueryWhere(where);var depth=0,maxDepth=0;var syntax=[];for(var i=0,len=tokens.length;i<len;i++ ){token=tokens[i];type=token.type;value=token.value;if(type=="bracket"){if(value=="("){syntax.push({depth:depth,type:"value",value:"("});depth+=1;maxDepth=depth;}else if(value==")"){depth-=1;syntax.push({depth:depth,type:"value",value:")"});}}else if(type=="named"){if(value=="prop"){i+=1;token=tokens[i];if(token.type=="bracket"&&token.value=="["){i+=1;token=tokens[i];syntax.push({depth:depth,type:"operand",value:"Eco.XComp._getQueryCompValue(obj, \""+value+"\", \""+token.value+"\")"});}i+=1;}else if(value=="typeOf"||value=="isVisible"||value=="isVisual"||value=="isEnable"){syntax.push({depth:depth,type:"operand",value:"Eco.XComp."+value+"(obj)"});}}else if(type=="operator"){if(value=="&&"||value=="||"){syntax.push({depth:depth,type:"operator",value:value});}else{temp="";switch(value){case '==':temp="equal";break;case '!=':temp="notEqual";break;case '>':temp="greaterThan";break;case '>=':temp="greaterThanEqual";break;case '<':temp="lessThan";break;case '<=':temp="lessThanEqual";break;case '*=':temp="contains";break;case '^=':temp="startWith";break;case '$=':temp="endWith";break;}syntax.push({depth:depth,type:"replaceOperator",value:"Eco.XComp._operators."+temp+"($1, $2)"});}}else if(type=="string"){syntax.push({depth:depth,type:"operand",value:"\""+value+"\""});}else if(type=="number"||type=="boolean"){syntax.push({depth:depth,type:"operand",value:value});}}var s,s0,s1;for(var i=maxDepth;i>=0;i-- ){pThis._replaceOperator(i,syntax);}var result=[];for(var i=0,len=syntax.length;i<len;i++ ){s=syntax[i];result.push(syntax[i].value);}var fn="var f = function(obj) {\n	return "+result.join(" ")+";\n}";try{eval(fn);}catch(e){trace("eval error:"+e.description);}pThis._parseQueryCache[where]=f;return f;},_replaceOperator:function(depth,syntax){var s;for(var i=0,len=syntax.length;i<len;i++ ){s=syntax[i];if(s.depth==depth){if(s.type=="replaceOperator"){s0=syntax[i-1];s1=syntax[i+1];if(s0&&s0.depth==depth&&s0.type=="operand"&&s1&&s1.depth==depth&&s1.type=="operand"){temp=s.value;temp=temp.replace("$1",s0.value);temp=temp.replace("$2",s1.value);s.depth=s.depth-1;s.type="operand";s.value=temp;s0.depth=null;s1.depth=null;i+=1;}}}}for(var i=(syntax.length-1);i>=0;i-- ){s=syntax[i];if(s.depth==null){syntax.splice(i,1);i-- ;}}},_getQueryCompValue:function(obj,type,name){var ret;if(type=="prop"){ret=obj[name];}if(ret&&typeof ret=="object"){if(ret.toString){ret=ret.toString();}else{ret=ret+"";}ret=ret.trim();}return ret;},_getAll:function(c){var children=[];var cs=c.all;if(c instanceof nexacro.Div){children.push(c.form);return children;}else if(c instanceof nexacro.PopupDiv){children.push(c.form);return children;}else if(c instanceof nexacro.Tab){c=c.tabpages;return c;}else if(c instanceof nexacro.Tabpage){children.push(c.form);return children;}if(cs){for(var i=0,len=cs.length;i<len;i++ ){children.push(cs[i]);}}else{cs=c.objects;if(cs){for(var i=0,len=cs.length;i<len;i++ ){children.push(cs[i]);}}cs=c.components;if(cs){for(var i=0,len=cs.length;i<len;i++ ){children.push(cs[i]);}}}return children;},_getChildren:function(from,depth){var pThis=Eco.XComp;var formChild=[];var children=pThis._getAll(from);var results=[],c,cs0,recvCs;depth.current+=1;for(var i=0,len=children.length;i<len;i++ ){c=children[i];if(depth.max>depth.current){results.push(c);cs0=pThis._getAll(c);if(cs0&&cs0.length>0){recvCs=pThis._getChildren(c,depth);results=results.concat(recvCs);depth.current-=1;}}else{results.push(c);}}return results;},query:function(from,where,deep){var pThis=Eco.XComp;if(!from||!Eco.isXComponent(from)){return [];}var depth={};depth.current=0;if(Eco.isNumber(deep)){depth.max=deep;}else if(nexacro.isNumeric(deep)){depth.max=parseInt(deep);}else{depth.max=Number.MAX_VALUE;}var results=[];var targets=pThis._getChildren(from,depth);if(Eco.isEmpty(where)){results=targets.slice(0);}else{var func=pThis._parseQueryWhere(where);var target,check;for(var i=0,len=targets.length;i<len;i++ ){target=targets[i];check=func.call(pThis,target);if(check){results.push(target);}}}return results;},getPathName:function(obj,refParent){var c=obj,arr=[];while(c){if(c instanceof ChildFrame){break;}if(refParent&&c===refParent){break;}arr.push(c.name);c=c.parent;}arr=arr.reverse();return arr.join(".");},getCompByPathName:function(pathName,p){var comps=[],i,len,comp;comps=pathName.split(".");for(i=0,len=comps.length;i<len;i++ ){comp=comps[i];p=p[comp];if(!p){break;}}return p;},lookup:function(p,name){var o;while(p){o=p.components;if(o&&o[name]){return o[name];}o=p.objects;if(o&&o[name]){return o[name];}p=p.parent;}return null;},contains:function(p,target){while(target){if(target==p){return true;}target=target.parent;}return false;},getTopLevelForm:function(curForm){var p=curForm;while(p&&!(p instanceof ChildFrame)){p=p.parent;}return p.form;},getPopupArguments:function(scope,varNameList){var p=scope;while(p&&!(p instanceof ChildFrame)){p=p.parent;}var valueList={};for(var i=0,len=varNameList.length;i<len;i++ ){valueList[varNameList[i]]=p[varNameList[i]];}return valueList;},getScriptForm:function(c){var p=c;while(p){if((p instanceof nexacro.Form)||(p.parent instanceof ChildFrame)){break;}p=p.parent;}return p;},setProperties:function(){var XComp=Eco.XComp;var count=arguments.length;if(count<=0){Eco.Logger.error({message:"argument doesn't exist!!",stack:true});}var target=arguments[0];if(Eco.isUndefined(XComp.typeOf(target))){Eco.Logger.error({message:"target must be a nexacro Component(Object) !!",stack:true});}var prop;for(var i=1;i<count;i+=2){prop=arguments[i];value=arguments[i+1];if(prop in target){if(target["set_"+prop]){target['set_'+prop](value);}}}},getProperties:function(){var XComp=Eco.XComp;var count=arguments.length;if(count<=0){Eco.Logger.error({message:"argument doesn't exist!!",stack:true});}var target=arguments[0];if(Eco.isUndefined(XComp.typeOf(target))){Eco.Logger.error({message:"target must be a nexacro Component(Object) !!",stack:true});}var results=[];var prop;for(var i=1;i<count;i++ ){results.push(target[arguments[i]]);}return results;},_CRLF:String.fromCharCode(13,10),_INDENT:"	",_getLayoutString:function(container,depth){if(Eco.isEmpty(depth)){depth=0;}var pThis=Eco.XComp;var CRLF=pThis._CRLF;var INDENT=pThis._INDENT;var n=depth;var indent="";while(n>0){indent+=INDENT;n-- ;}var layout="";var list=container.components;if(list){var comp,type;var typeOf=Eco.XComp.typeOf;for(var i=0,len=list.length;i<len;i++ ){comp=list[i];type=typeOf(comp);if(type=="Div"||type=="Tabpage"){layout+=indent+"<"+type+" id=\""+comp.name+"\""+pThis._getPropString(comp);if(Eco.isEmpty(comp.url)&&comp.components.length>0){layout+=">"+CRLF;layout+=indent+INDENT+"<Layouts>"+CRLF;layout+=indent+INDENT+INDENT+"<Layout>"+CRLF;layout+=pThis._getLayoutString(comp,depth+3);layout+=indent+INDENT+INDENT+"</Layout>"+CRLF;layout+=indent+INDENT+"</Layouts>"+CRLF;layout+=indent+"</"+type+">"+CRLF;}else{layout+="/>"+CRLF;}}else if(type=="Tab"){layout+=indent+"<Tab id=\""+comp.name+"\""+pThis._getPropString(comp);if(comp.components.length>0){layout+=">"+CRLF;layout+=indent+INDENT+"<Tabpages>"+CRLF;layout+=pThis._getLayoutString(comp,depth+2);layout+=indent+INDENT+"</Tabpages>"+CRLF;layout+=indent+"</Tab>"+CRLF;}else{layout+="/>"+CRLF;}}else{layout+=indent+pThis._getCompTagString(comp,indent);}}}return layout;},_getCompTagString:function(comp,indent){if(!Eco.isXComponent(comp)){return "";}var pThis=Eco.XComp;var CRLF=pThis._CRLF;var INDENT=pThis._INDENT;var type=pThis.typeOf(comp);var layout="<"+type+" id=\""+comp.name+"\""+pThis._getPropString(comp);var needEndTag=false;if(type=="Grid"||type=="Splitter"){var formatid=comp.formatid||"default";var format=comp.getFormatString();var search="<Format id=\""+formatid+"\">";var sIndex=format.indexOf(search);var eIndex=format.indexOf("</Format>",sIndex)+9;var curFormat="";curFormat+=format.substring(0,sIndex);curFormat+=comp.getCurFormatString();curFormat+=format.substr(eIndex);curFormat=curFormat.replace(/SplitterItmes/g,"SplitterItems");var formatXml=curFormat.split(String.fromCharCode(10));curFormat="";for(var i=0,len=formatXml.length;i<len;i++ ){curFormat+=indent+INDENT+formatXml[i]+CRLF;}layout+=">"+CRLF;layout+=curFormat;needEndTag=true;}else if(type=="Panel"){var items=comp.items;var len=items.length;if(len>0){layout+=">"+CRLF;layout+=indent+INDENT+"<PanelItems id=\"items\">"+CRLF;var item,str;for(var i=0;i<len;i++ ){item=items[i];str="<PanelItem id=\""+item.name+"\"";for(var p in item){if(p!="name"&&item.hasOwnProperty(p)){str+=" "+p+"=\""+item[p]+"\"";}}str+="/>";layout+=indent+INDENT+INDENT+str+CRLF;}layout+=indent+INDENT+"</PanelItems>"+CRLF;needEndTag=true;}}var innerDs=comp.innerdataset;if(pThis.typeOf(innerDs)=="Dataset"){var ds=pThis.lookup(comp.parent,innerDs.name);if(Eco.isEmpty(ds)){var dsXml=innerDs.saveXML().split(CRLF);var dsStr="";for(var i=0,len=dsXml.length;i<len;i++ ){dsStr+=indent+INDENT+dsXml[i]+CRLF;}layout+=">"+CRLF;layout+=dsStr;needEndTag=true;}}if(needEndTag){layout+=indent+"</"+type+">"+CRLF;}else{layout+="/>"+CRLF;}return layout;},_ignoreDefaultProps:["name","parent","opener","all","components","objects","binds","bindgestureset","hscrollbar","vscrollbar","resizebutton","position","position2","positiontype","stepcontrol","canvas","popupwindow","innerdataset"],_ignoreCompProps:{'Form':["taborder","tabstop","layout"],'Div':["layout"],'PopupDiv':["layout"],'Combo':["dropbutton","comboedit","combolist"],'Menu':["popupmenu"],'Tab':["tabpages"],'Tabpage':["layout"],'Calendar':["popupcalendar","calendaredit","spinupbutton","spindownbutton"],'Grid':["formats","head","body","summ","summary","controltextarea","controlmaskedit","controlcombo","controlcalendar","controlbutton","controlcheckbox","controlprogressbar","controlexpand"],'Spin':["spinupbutton","spindownbutton","spinedit"],'Splitter':["formats","items"],'Panel':["items"]},_cacheIgnoreProps:{},_cacheCompareComp:{},_getPropString:function(targetComp){var pThis=Eco.XComp;var type=pThis.typeOf(targetComp);var form=pThis._serializeFormTarget;var defaultComp=pThis._cacheCompareComp[type];if(!defaultComp){defaultComp=new form[type]("_serializeForm_"+type,0,0,0,0);pThis._cacheCompareComp[type]=defaultComp;}var ignoreProps=pThis._cacheIgnoreProps[type];if(!ignoreProps){var ignoreComp=pThis._ignoreCompProps[type]||[];ignoreProps=pThis._cacheIgnoreProps[type]=pThis._ignoreDefaultProps.concat(ignoreComp);}var tag="";var positiontype="position";if(targetComp.positiontype){positiontype=targetComp.positiontype.toString();if(positiontype!=defaultComp.positiontype.toString()){tag+=" positiontype=\""+positiontype+"\"";}}if(targetComp[positiontype]){var targetPosition=targetComp[positiontype].toString();var defaultPosition=defaultComp[positiontype].toString();if(targetPosition!=defaultPosition){tag+=" "+positiontype+"=\""+targetPosition+"\"";}}var targetVal,defaultVal;var indexOf=Eco.array.indexOf;for(var p in targetComp){if(!targetComp.hasOwnProperty(p)){continue;}if(!(p in defaultComp)){continue;}if(indexOf(ignoreProps,p)> -1){continue;}targetVal=targetComp[p];defaultVal=defaultComp[p];if(targetVal===undefined){continue;}if(targetVal instanceof UserEvent){continue;}if(Eco.isFunction(targetVal)){continue;}if(targetComp.components&&targetComp.components[p]){continue;}if(targetComp.objects&&targetComp.objects[p]){continue;}if(typeof targetVal=="object"){if(p=="innerdataset"&&targetVal){var ds=pThis.lookup(targetComp.parent,targetVal.name);if(!Eco.isEmpty(ds)){tag+=" innerdataset=\"@"+ds.name+"\"";}continue;}else if(p=="bindgestureset"){tag+=" "+p+"=\"@"+targetVal.name+"\"";continue;}var v0=targetVal?targetVal.toString():"";var v1=defaultVal?defaultVal.toString():"";if(v0!=v1){tag+=" "+p+"=\""+v0.toString()+"\"";}}else{if(p=="taborder"||p=="class"){if(!Eco.isEmpty(targetVal)){tag+=" "+p+"=\""+targetVal+"\"";}}else if(p=="text"||p=="value"){if(!Eco.isEmpty(targetVal)){tag+=" "+p+"=\""+Eco.string.escapeXML(targetVal)+"\"";}}else{if(defaultVal!=targetVal){tag+=" "+p+"=\""+targetVal+"\"";}}}}return tag;},_userPropertyPrefix:Eco.getUniqueId(),setUserProperty:function(target,name,value){var propName=Eco.XComp._userPropertyPrefix;propName+="_"+name;target[propName]=value;},getUserProperty:function(target,name){var propName=Eco.XComp._userPropertyPrefix;propName+="_"+name;return target[propName];},deleteUserProperty:function(target,name){var propName=Eco.XComp._userPropertyPrefix;propName+="_"+name;delete target[propName];}});}
if(!JsNamespace.exist("Eco.XComp.PositionSize")){JsNamespace.declare("Eco.XComp.PositionSize",{getTopLevelFormBox:function(XComp){var topForm=Eco.XComp.getTopLevelForm(XComp);var xy=Eco.XComp.PositionSize.convertXY(topForm,[0,0],XComp);return [xy[0],xy[1],XComp.getOffsetWidth(),XComp.getOffsetHeight()];},convertXY:function(XCompA,xy,XCompB){var tempX,tempY;var x,y;if(XCompB){tempX=system.clientToScreenX(XCompB,xy[0]);tempY=system.clientToScreenY(XCompB,xy[1]);var pThis=Eco.XComp.PositionSize;x=system.screenToClientX(XCompA,tempX)+pThis.getScrollLeft(XCompA);y=system.screenToClientY(XCompA,tempY)+pThis.getScrollTop(XCompA);}else{x=xy[0];y=xy[1];}return [x,y];},getScrollTop:function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.vscrollbar&&XComp.vscrollbar.visible?XComp.vscrollbar.pos:0);},getScrollLeft:function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.hscrollbar&&XComp.hscrollbar.visible?XComp.hscrollbar.pos:0);},getScrollBarSize:function(XComp,type){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return type=="horz"?XComp._getHScrollBarSize():XComp._getVScrollBarSize();},getCurrentScrollBarSize:function(XComp,type){if(XComp instanceof nexacro.Div){XComp=XComp.form;}var scrollBar=(type=="horz")?XComp.hscrollbar:XComp.vscrollbar;return (scrollBar&&scrollBar.visible?(type=="horz"?scrollBar.getOffsetHeight():scrollBar.getOffsetWidth()):0);},getClientWidth:function(XComp,wholeWidth){var clientwidth=0,borderWidths=0,marginWidths=0,scrollbarSize=0;if(wholeWidth){clientwidth=wholeWidth;}else{clientwidth=XComp.getOffsetWidth();}borderWidths=Eco.XComp.Style.getBorderWidth(XComp);marginWidths=Eco.XComp.Style.getMargin(XComp);clientwidth-=borderWidths[0]+borderWidths[2];clientwidth-=marginWidths[0]+marginWidths[2];scrollbarSize=Eco.XComp.PositionSize.getCurrentScrollBarSize(XComp,"horz");clientwidth-=scrollbarSize;return clientwidth;},getClientHeight:function(XComp,wholeHeight){var clientheight=0,borderWidths=0,marginWidths=0,scrollbarSize=0;if(wholeHeight){clientheight=wholeHeight;}else{clientheight=XComp.getOffsetHeight();}borderWidths=Eco.XComp.Style.getBorderWidth(XComp);marginWidths=Eco.XComp.Style.getMargin(XComp);clientheight-=borderWidths[1]+borderWidths[3];clientheight-=marginWidths[1]+marginWidths[3];scrollbarSize=Eco.XComp.PositionSize.getCurrentScrollBarSize(XComp);clientheight-=scrollbarSize;return clientheight;},getScrollWidth:function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}var scrollwidth=0;scrollwidth=(XComp.hscrollbar&&XComp.hscrollbar.visible?XComp.hscrollbar.max:0);scrollwidth+=Eco.XComp.PositionSize.getClientWidth(XComp);return scrollwidth;},getScrollHeight:function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}var scrollheight=0;scrollheight=(XComp.vscrollbar&&XComp.vscrollbar.visible?XComp.vscrollbar.max:0);scrollheight+=Eco.XComp.PositionSize.getClientHeight(XComp);return scrollheight;},_fontCache:{},getTextSize:function(XComp,text,multiline,content_width,fitText){var font;var size=[0,0];if(XComp instanceof nexacro._FontObject){font=XComp;multiline=Eco.isEmpty(multiline)?false:multiline;if(multiline&&content_width==null){content_width=50;}}else{font=XComp._font;if(Eco.isEmpty(font)){font=XComp._getCurrentStyleInheritValue('font');}text=Eco.isEmpty(text)?XComp.text:text;if(Eco.isEmpty(multiline)){if(XComp["wordwrap"]!=null){multiline=XComp["wordwrap"]!="none"?true:false;}}}var size=[0,0];if(Eco.isEmpty(text)){return size;}if(nexacro._Browser!="Runtime"){var _handle=Eco._textSizeDiv;if(!_handle){var _doc=nexacro._managerFrameDoc;_handle=_doc.createElement("div");_doc.body.appendChild(_handle);Eco._textSizeDiv=_handle;}var _style=_handle.style;_style.position="absolute";_style.visibility="hidden";if(multiline){if(content_width){_style.width=content_width+"px";}_style.height="auto";_style.whiteSpace="pre-wrap";_style.wordBreak="break-all";_style.wordWrap="break-word";}else{_style.width="auto";_style.height="auto";_style.whiteSpace="pre";_style.wordWrap="normal";}_style.font=font;if(fitText==true){_style.lineHeight="100%";}if(nexacro._Browser=="IE"&&nexacro.BrowserVersion<9){_handle.innerText=text;var rect=_handle.getBoundingClientRect();size=[rect.right-rect.left,rect.bottom-rect.top];}else{_handle.innerHTML=text;var rect=_handle.getBoundingClientRect();size=[rect.width,rect.height];}}else{size=nexacro.getTextSize(text,font,content_width,multiline);size[0]=size.nx;size[1]=size.ny;}size[0]=Math.ceil(size[0]);size[1]=Math.ceil(size[1]);return size;},getImageSize:function(url,callback,scope){var application=nexacro.getApplication();if(!url){return null;}if(url.substring(0,4).toLowerCase()=="url("){url=url.substring(5,url.length-2);}if(!url){return null;}var refUrl;if(scope&&scope._getRefFormBaseUrl){refUrl=scope._getRefFormBaseUrl();}else{refUrl=application.getActiveForm();}var img_url="";if(application["_getImageLocation"]){img_url=application._getImageLocation(url,refUrl);}else{img_url=nexacro._getImageLocation(url,refUrl);}var size=nexacro._ImgInfoCacheList[img_url];if(size){callback.call(scope,url,size.width,size.height);}else{var pThis=Eco.XComp.PositionSize;pThis._getImageSizeCallbackInfo[img_url]=[url,callback,scope];size=nexacro._getImageSize(img_url,pThis._getImageSizeOnLoad,pThis);if(size){callback.call(scope,url,size.width,size.height);}}},_getImageSizeCallbackInfo:{},_getImageSizeOnLoad:function(url,width,height){var pThis=Eco.XComp.PositionSize;var info=pThis._getImageSizeCallbackInfo[url];info[1].call(info[2],info[0],width,height);delete pThis._getImageSizeCallbackInfo[url];},getContentSize:function(XComp,width,multiLine){var size=[0,0];multiLine=(!multiLine)?false:true;if(Eco.isXComponent(XComp)){var w=0,h=0;var comp=XComp instanceof nexacro.Div?XComp.form:XComp;if(!Eco.isEmpty(comp.hscrollbar)&&!Eco.isEmpty(comp.vscrollbar)){if(Eco.XComp.typeOf(XComp)=="Tabpage"){w=comp.getOffsetWidth();h=comp.getOffsetHeight();}else{w=comp.getOffsetWidth();h=comp.getOffsetHeight();}size=[w,h];}else{var sz=this._getStyleSpaceSize(XComp),borderHeight=sz[1];w+=sz[0];h+=sz[1];var text=XComp.text;if(Eco.isEmpty(text)){sz=Eco.XComp.PositionSize.getTextSize(XComp,"W",false);}else{if(Eco.isNumber(width)){var spaceSize=this._getStyleSpaceSize(XComp);width-=spaceSize[0];sz=Eco.XComp.PositionSize.getTextSize(XComp,text,true,width);}else{sz=Eco.XComp.PositionSize.getTextSize(XComp,text,multiLine);}}w+=sz[0];h+=sz[1];var type=Eco.XComp.typeOf(XComp);var clientHeight=0;var clientWidth=0;var textpadding;if(type=="Calendar"){if(XComp.type=="monthonly"){return [XComp.getOffsetWidth(),XComp.getOffsetHeight()];}else{var dropbutton=XComp.dropbutton;if(dropbutton){w+=dropbutton.width;clientHeight=dropbutton.height;}if(clientHeight<sz[1]){clientHeight=sz[1];}sz=Eco.XComp.PositionSize._getStyleSpaceSize(XComp.calendaredit);w+=sz[0];h+=sz[1];}}else if(type=="Combo"){var dropbutton=XComp.dropbutton;if(dropbutton){w+=dropbutton.width;clientHeight=dropbutton.height;}sz=this._getStyleSpaceSize(XComp.comboedit);w+=sz[0];if(clientHeight<sz[1]){clientHeight=sz[1];}}else if(type=="Radio"){var itempadding=XComp._itempadding;w+=isNaN(itempadding.left)?0:itempadding.left;w+=isNaN(itempadding.right)?0:itempadding.right;h+=isNaN(itempadding.top)?0:itempadding.top;h+=isNaN(itempadding.bottom)?0:itempadding.bottom;}if(type=="Radio"){}if(type=="CheckBox"){textpadding=XComp._cell_elem.textPadding;var checkImg=XComp._cell_elem._box_node.children[0];if(checkImg){clientHeight=checkImg.clientHeight;clientWidth=checkImg.clientWidth;}}w+=clientWidth;if(textpadding){w+=isNaN(textpadding.left)?0:textpadding.left;w+=isNaN(textpadding.right)?0:textpadding.right;h+=isNaN(textpadding.top)?0:textpadding.top;h+=isNaN(textpadding.bottom)?0:textpadding.bottom;}if(!isNaN(clientHeight)){h=Math.max(h,clientHeight);}size[0]=w;size[1]=h;}}return size;},_getStyleSpaceSize:function(XComp){var Style=Eco.XComp.Style;var w=0,h=0;var margin=Style.getMargin(XComp);w+=margin[0]+margin[2];h+=margin[1]+margin[3];var border=Style.getBorderWidth(XComp);w+=border[0]+border[2];h+=border[1]+border[3];var padding=Style.getPadding(XComp);w+=padding[0]+padding[2];h+=padding[1]+padding[3];return [w,h];},getPopupPosition:function(XComp,width,height,direction,offset){return this.getPositionByForm(XComp,width,height,direction,offset);},getPositionByForm:function(XComp,width,height,direction,offset,scopeXComp){var w=0,h=0;var relativeXComp;if(scopeXComp){w=scopeXComp.getOffsetWidth();h=scopeXComp.getOffsetHeight();relativeXComp=scopeXComp;}else{var _window=XComp._getWindow();w=_window.clientWidth;h=_window.clientHeight;relativeXComp=nexacro.getApplication().mainframe;}var xy=Eco.XComp.PositionSize.convertXY(relativeXComp,[0,0],XComp);var x=xy[0];var y=xy[1];if(isNaN(xy[0])||isNaN(xy[1])){return;}var x=[xy[0],xy[0]+XComp.getOffsetWidth()];var y=[xy[1],xy[1]+XComp.getOffsetHeight()];var rect={'left':0,'top':0,'right':w,'bottom':h,'width':w,'height':h};var position=Eco.XComp.PositionSize._getDisplayPosition(width,height,x,y,rect,direction,offset);return position;},_getDisplayPosition:function(width,height,screenX,screenY,screenRect,direction,offset,isChange){if(isChange!=true){isChange=false;}var pThis=Eco.XComp.PositionSize;var position;if(direction=="horz"){position=pThis._getHorizontalPosition(width,height,screenX,screenY,screenRect,direction,offset,isChange);}else if(direction=="vert"){position=pThis._getVerticalPosition(width,height,screenX,screenY,screenRect,direction,offset,isChange);}var side=position[0];if(position[1]===undefined&&position[2]===undefined){if(width>screenRect.width){width=screenRect.width;}if(height>screenRect.height){height=screenRect.height;}position=[side,screenRect.left,screenRect.top,width,height];}else if(position[1]===undefined){position=[side,screenRect.left,position[2],screenRect.width,height];}else if(position[2]===undefined){position=[side,position[1],screenRect.top,width,screenRect.height];}return position;},_getVerticalPosition:function(width,height,screenX,screenY,screenRect,direction,offset,isChange){var pThis=Eco.XComp.PositionSize;var side;if(screenRect.bottom>=(screenY[1]+height+offset)){side="bottom";screenY=screenY[1]+offset;}else if(screenRect.top<(screenY[0]-height-offset)){side="top";screenY=screenY[0]-height-offset;}else{if(isChange==true){return ["right",undefined,undefined];}direction=(direction=="vert")?"horz":"vert";var position=pThis._getDisplayPosition(width,height,screenX,screenY,screenRect,direction,offset,true);return position;}screenX=pThis._getHorizontalAlign(width,height,screenX,screenY,screenRect,direction,offset);return [side,screenX,screenY];},_getHorizontalPosition:function(width,height,screenX,screenY,screenRect,direction,offset,isChange){var pThis=Eco.XComp.PositionSize;var side;if(screenRect.right>=(screenX[1]+width+offset)){side="right";screenX=screenX[1]+offset;}else if(screenRect.left<(screenX[0]-width-offset)){side="left";screenX=screenX[0]-width-offset;}else{if(isChange==true){return ["bottom",undefined,undefined];}direction=(direction=="vert")?"horz":"vert";var position=pThis._getDisplayPosition(width,height,screenX,screenY,screenRect,direction,offset,true);return position;}screenY=pThis._getVerticalAlign(width,height,screenX,screenY,screenRect,direction,offset);return [side,screenX,screenY];},_getHorizontalAlign:function(width,height,screenX,screenY,screenRect,direction,offset){var spaceSize=screenRect.right-(screenX[0]+width);if(spaceSize>=0){screenX=screenX[0];}else if(spaceSize<0){screenX=screenX[0]+spaceSize;if(screenX<screenRect.left){screenX=undefined;}}else{screenX=undefined;Eco.Logger.error({message:"unexpected situation!!",stack:true});}return screenX;},_getVerticalAlign:function(width,height,screenX,screenY,screenRect,direction,offset){var spaceSize=screenRect.bottom-(screenY[0]+height);if(spaceSize>=0){screenY=screenY[0];}else if(spaceSize<0){screenY=screenY[0]+spaceSize;if(screenY<screenRect.top){screenY=undefined;}}else{screenY=undefined;Eco.Logger.error({message:"unexpected situation!!",stack:true});}return screenY;}});}
if(!JsNamespace.exist("Eco.Json")){JsNamespace.declare("Eco.Json",{_Token_Type:{UNKNOWN: -1,COMMA:0,LEFT_BRACE:1,RIGHT_BRACE:2,LEFT_BRACKET:3,RIGHT_BRACKET:4,COLON:6,TRUE:7,FALSE:8,NULL:9,STRING:10,NUMBER:11,NAN:12},decode:(typeof JSON=="undefined")?function(s,strict){if(Eco.isEmpty(s)){return;}var pThis=Eco.Json;pThis._jsonString=s;pThis._strict=strict;pThis._loc=0;pThis._ch=null;pThis._nextChar();pThis._nextToken();pThis._value=pThis._parseValue();if(strict&&pThis._nextToken()!=null){pThis._parseError("Unexpected characters left in input stream");}return pThis._value;}:function(s){if(Eco.isEmpty(s)){return;}return JSON.parse(s);},_nextToken:function(){var pThis=Eco.Json;return pThis._token=pThis.getNextToken();},_parseArray:function(){var a=[];var token;var pThis=Eco.Json;var strict=pThis._strict;token=pThis._nextToken();var tokenType=pThis._Token_Type;if(token.type==tokenType.RIGHT_BRACKET){return a;}else if(!strict&&token.type==tokenType.COMMA){token=pThis._nextToken();if(token.type==tokenType.RIGHT_BRACKET){return a;}else{pThis._parseError("Leading commas are not supported.  Expecting ']' but found "+token.value);}}while(true){a.push(pThis._parseValue());token=pThis._nextToken();if(token.type==tokenType.RIGHT_BRACKET){return a;}else if(token.type==tokenType.COMMA){token=pThis._nextToken();if(!strict){if(token.type==tokenType.RIGHT_BRACKET){return a;}}}else{pThis._parseError("Expecting ] or , but found "+token.value);}}return null;},_parseObject:function(){var pThis=Eco.Json;var o={};var strict=pThis._strict;var key;var token=pThis._nextToken();var tokenType=pThis._Token_Type;if(token.type==tokenType.RIGHT_BRACE){return o;}else if(!strict&&token.type==tokenType.COMMA){token=pThis._nextToken();if(token.type==tokenType.RIGHT_BRACE){return o;}else{pThis._parseError("Leading commas are not supported.  Expecting '}' but found "+token.value);}}while(true){if(token.type==tokenType.STRING){key=String(token.value);token=pThis._nextToken();if(token.type==tokenType.COLON){token=pThis._nextToken();o[key]=pThis._parseValue();token=pThis._nextToken();if(token.type==tokenType.RIGHT_BRACE){return o;}else if(token.type==tokenType.COMMA){token=pThis._nextToken();if(!strict){if(token.type==tokenType.RIGHT_BRACE){return o;}}}else{pThis._parseError("Expecting } or , but found "+token.value);}}else{pThis._parseError("Expecting : but found "+token.value);}}else{pThis._parseError("Expecting string but found "+token.value);}}return null;},_parseValue:function(){var pThis=Eco.Json;var strict=pThis._strict;var token=pThis._token;if(token==null){pThis._parseError("Unexpected end of input");}var tokenType=pThis._Token_Type;switch(token.type){case tokenType.LEFT_BRACE:return pThis._parseObject();case tokenType.LEFT_BRACKET:return pThis._parseArray();case tokenType.STRING:case tokenType.NUMBER:case tokenType.TRUE:case tokenType.FALSE:case tokenType.NULL:return token.value;case tokenType.NAN:if(!strict){return token.value;}else{pThis._parseError("Unexpected "+token.value);}default:pThis._parseError("Unexpected "+token.value);}return null;},encode:(typeof JSON=="undefined")?function(value){return Eco.Json._convertToString(value);}:function(value,replacer,space){return JSON.stringify(value,replacer,space);},_convertToString:function(value){var pThis=Eco.Json;if(Eco.isString(value)){return pThis._escapeString(value);}else if(Eco.isNumber(value)){return isFinite(value)?value.toString():"null";}else if(Eco.isBoolean(value)){return value?"true":"false";}else if(Eco.isArray(value)){return pThis._arrayToString(value);}else if(Eco.isXComponent(value)){return value.name;}else if(value){return pThis._objectToString(value);}return "null";},_escapeString:function(str){var s="";var ch;var len=str.length;for(var i=0;i<len;i++ ){ch=str.charAt(i);switch(ch){case '"':s+="\\\"";break;case '\\':s+="\\\\";break;case '\b':s+="\\b";break;case '\f':s+="\\f";break;case '\n':s+="\\n";break;case '\r':s+="\\r";break;case '\t':s+="\\t";break;default:if(ch<' '){var hexCode=ch.charCodeAt(0).toString(16);var zeroPad=hexCode.length==2?"00":"000";s+="\\u"+zeroPad+hexCode;}else{s+=ch;}}}return "\""+s+"\"";},_arrayToString:function(a){var pThis=Eco.Json;var s="";for(var i=0;i<a.length;i++ ){if(s.length>0){s+=",";}s+=pThis._convertToString(a[i]);}return "["+s+"]";},_objectToString:function(o){var s="";var pThis=Eco.Json;if(Eco.isObject(o)){var value;for(var key in o){if(o.hasOwnProperty(key)){value=o[key];if(Eco.isFunction(value)){continue;}if(s.length>0){s+=",";}s+=pThis._escapeString(key)+":"+pThis._convertToString(value);}}}else{var value;var propName;var props=o._properties;var getter;trace("json.js > _objectToString > ■ start 테스트를 위한 임의설정 ");if(props===undefined){trace("json.js > _objectToString > s="+s);return "{"+s+"}";}for(var i=0,len=props.length;i<len;i++ ){propName=props[i];if(propName=="name"){continue;}getter=o["get"+propName.charAt(0).toUpperCase()+propName.substr(1)];if(getter){value=getter.call(o);}else{value=o["_"+propName];}if(s.length>0){s+=",";}s+=pThis._escapeString(propName)+":"+pThis._convertToString(value);}}return "{"+s+"}";},setToken:function(type,value){Eco.Json._token={type:type,value:value};},getToken:function(){return Eco.Json._token;},getNextToken:function(){var pThis=Eco.Json;pThis.skipIgnored();var tokenType=pThis._Token_Type;var ch=pThis._ch;switch(ch){case '{':pThis.setToken(tokenType.LEFT_BRACE,'{');pThis._nextChar();break;case '}':pThis.setToken(tokenType.RIGHT_BRACE,'}');pThis._nextChar();break;case '[':pThis.setToken(tokenType.LEFT_BRACKET,'[');pThis._nextChar();break;case ']':pThis.setToken(tokenType.RIGHT_BRACKET,']');pThis._nextChar();break;case ',':pThis.setToken(tokenType.COMMA,',');pThis._nextChar();break;case ':':pThis.setToken(tokenType.COLON,':');pThis._nextChar();break;case 't':var possibleTrue="t"+pThis._nextChar()+pThis._nextChar()+pThis._nextChar();if(possibleTrue=="true"){pThis.setToken(tokenType.TRUE,true);pThis._nextChar();}else{pThis._parseError("Expecting 'true' but found "+possibleTrue);}break;case 'f':var possibleFalse="f"+pThis._nextChar()+pThis._nextChar()+pThis._nextChar()+pThis._nextChar();if(possibleFalse=="false"){pThis.setToken(tokenType.FALSE,false);pThis._nextChar();}else{pThis._parseError("Expecting 'false' but found "+possibleFalse);}break;case 'n':var possibleNull="n"+pThis._nextChar()+pThis._nextChar()+pThis._nextChar();if(possibleNull=="null"){pThis.setToken(tokenType.NULL,null);pThis._nextChar();}else{pThis._parseError("Expecting 'null' but found "+possibleNull);}break;case 'N':var possibleNaN="N"+pThis._nextChar()+pThis._nextChar();if(possibleNaN=="NaN"){pThis.setToken(tokenType.NAN,NaN);pThis._nextChar();}else{pThis._parseError("Expecting 'NaN' but found "+possibleNaN);}break;case '"':pThis._readString();break;default:if(pThis._isDigit(ch)||ch=='-'){pThis._readNumber();}else if(ch==''){return null;}else{pThis._parseError("Unexpected "+ch+" encountered");}}return pThis._token;},_readString:function(){var pThis=Eco.Json;var string="";var ch=pThis._nextChar();while(ch!='"'&&ch!=''){if(ch=='\\'){ch=pThis._nextChar();switch(ch){case '"':string+='"';break;case '/':string+="/";break;case '\\':string+='\\';break;case 'b':string+='\b';break;case 'f':string+='\f';break;case 'n':string+='\n';break;case 'r':string+='\r';break;case 't':string+='\t';break;case 'u':var hexValue="";for(var i=0;i<4;i++ ){if(!pThis._isHexDigit(ch=pThis._nextChar())){pThis._parseError(" Excepted a hex digit, but found: "+ch);}hexValue+=ch;}string+=String.fromCharCode(parseInt(hexValue,16));break;default:string+='\\'+ch;}}else{string+=ch;}ch=pThis._nextChar();}if(ch==''){pThis._parseError("Unterminated string literal");}pThis._nextChar();pThis.setToken(pThis._Token_Type.STRING,string);},_readNumber:function(){var pThis=Eco.Json;var input="";var ch=pThis._ch;var strict=pThis._strict;if(ch=='-'){input+='-';ch=pThis._nextChar();}if(!pThis._isDigit(ch)){pThis._parseError("Expecting a digit");}if(ch=='0'){input+=ch;ch=pThis._nextChar();if(pThis._isDigit(ch)){pThis._parseError("A digit cannot immediately follow 0");}else if(!strict&&ch=='x'){input+=ch;ch=pThis._nextChar();if(pThis._isHexDigit(ch)){input+=ch;ch=pThis._nextChar();}else{pThis._parseError("Number in hex format require at least one hex digit after \"0x\"");}while(pThis._isHexDigit(ch)){input+=ch;ch=pThis._nextChar();}}}else{while(pThis._isDigit(ch)){input+=ch;ch=pThis._nextChar();}}if(ch=='.'){input+='.';ch=pThis._nextChar();if(!pThis._isDigit(ch)){pThis._parseError("Expecting a digit");}while(pThis._isDigit(ch)){input+=ch;ch=pThis._nextChar();}}if(ch=='e'||ch=='E'){input+="e";ch=pThis._nextChar();if(ch=='+'||ch=='-'){input+=ch;ch=pThis._nextChar();}if(!pThis._isDigit(ch)){pThis._parseError("Scientific notation number needs exponent value");}while(pThis._isDigit(ch)){input+=ch;ch=pThis._nextChar();}}var num=Number(input);if(isFinite(num)&&!isNaN(num)){pThis.setToken(pThis._Token_Type.NUMBER,num);return;}else{pThis._parseError("Number "+num+" is not valid!");}pThis._token=null;},_nextChar:function(){var pThis=Eco.Json;return pThis._ch=pThis._jsonString.charAt(pThis._loc++ );},skipIgnored:function(){var originalLoc;var pThis=Eco.Json;do{originalLoc=pThis._loc;pThis._skipWhite();pThis._skipComments();}while(originalLoc!=pThis._loc)},_skipComments:function(){var pThis=Eco.Json;var ch=pThis._ch;if(ch=='/'){ch=pThis._nextChar();switch(ch){case '/':do{ch=pThis._nextChar();}while(ch!='\n'&&ch!='')ch=pThis._nextChar();break;case '*':ch=pThis._nextChar();while(true){if(ch=='*'){ch=pThis._nextChar();if(ch=='/'){ch=pThis._nextChar();break;}}else{ch=pThis._nextChar();}if(ch==''){pThis._parseError("Multi-line comment not closed");}}break;default:pThis._parseError("Unexpected "+ch+" encountered (expecting '/' or '*' )");}}},_skipWhite:function(){var pThis=Eco.Json;var ch=pThis._ch;while(pThis._isWhiteSpace(ch)){ch=pThis._nextChar();}},_isWhiteSpace:function(ch){return (ch==' '||ch=='\t'||ch=='\n'||ch=='\r');},_isDigit:function(ch){return (ch>='0'&&ch<='9');},_isHexDigit:function(ch){var uc=ch.toUpperCase();return (Eco.Json._isDigit(ch)||(uc>='A'&&uc<='F'));},_parseError:function(msg){Eco.Logger.error({"message":msg,"stack":true});}});}
if(!JsNamespace.exist("Eco.XComp.Event")){JsNamespace.declare("Eco.XComp.Event",{"add":function(XComp,events,scope){for(var type in events){if(events.hasOwnProperty(type)){XComp.addEventHandler(type,events[type],scope);}}},"remove":function(XComp,events,scope){for(var type in events){if(events.hasOwnProperty(type)){XComp.removeEventHandler(type,events[type],scope);}}},"makeDraggable":function(XComp,draggingFunc,scope,addArgs,isOffsetFromStart,delayTask){if(Eco.isObject(draggingFunc)){XComp._dragFuncs={"draggingFunc":draggingFunc.dragging,"draggingStartFunc":draggingFunc.start,"draggingEndFunc":draggingFunc.end,"args":addArgs,"mouseEventInfo":draggingFunc.mouseEventInfo,"isOffsetFromStart":isOffsetFromStart};}else{XComp._dragFuncs={"draggingFunc":draggingFunc,"args":addArgs,"mouseEventInfo":draggingFunc.mouseEventInfo,"isOffsetFromStart":isOffsetFromStart};}Eco.XComp.Event.add(XComp,{"onlbuttondown":Eco.XComp.Event._dragDownHandler,"onlbuttonup":Eco.XComp.Event._dragUpHandler},scope);XComp.__scope=scope;if(delayTask){XComp._delayDragProc=true;}else{XComp._delayDragProc=null;}},"clearDraggable":function(XComp){if(XComp._dragFuncs){XComp._dragFuncs=null;XComp._delayDragProc=null;Eco.XComp.Event.remove(XComp,{"onlbuttondown":Eco.XComp.Event._dragDownHandler,"onlbuttonup":Eco.XComp.Event._dragUpHandler});var topForm=Eco.XComp.getTopLevelForm(XComp.parent);var uniqueId=XComp._unique_id;var hasDragComp=false;var dragComps=topForm.__makeDraggableTargets;for(var id in dragComps){if(dragComps.hasOwnProperty(id)){if(id==uniqueId){delete dragComps[id];}else{hasDragComp=true;}}}if(!hasDragComp&&topForm.findEventHandler("onmousemove",Eco.XComp.Event._dragMoveHandler)> -1){topForm.__makeDraggableTargets=null;topForm.__makeDraggableCurComp=null;delete topForm.__makeDraggableTargets;delete topForm.__makeDraggableCurComp;topForm.removeEventHandler("onmousemove",Eco.XComp.Event._dragMoveHandler);}}},"_dragDownHandler":function(obj,e){var topForm=Eco.XComp.getTopLevelForm(obj.parent);if(topForm.findEventHandler("onmousemove",Eco.XComp.Event._dragMoveHandler)<0){topForm.addEventHandler("onmousemove",Eco.XComp.Event._dragMoveHandler);}if(!topForm.__makeDraggableTargets){topForm.__makeDraggableTargets={};}topForm.__makeDraggableTargets[obj._unique_id]=true;Eco.XComp.Event._lockMouseEvent(topForm);var pt={x:e.screenx,y:e.screeny};obj._drag={"startPt":pt,"offsetX":0,"offsetY":0,"isOffsetFromStart":false};topForm.__makeDraggableCurComp=obj;if(!obj.__scope){obj.__scope=topForm;}var func=obj._dragFuncs,mouseEventInfo,addArgs;if(func){if(func.isOffsetFromStart===true){obj._drag.isOffsetFromStart=true;}addArgs=func.args;mouseEventInfo=func.mouseEventInfo;func=func.draggingStartFunc;}if(func){var args=[];if(addArgs){args=args.concat(addArgs);}if(mouseEventInfo){args[args.length]=e;}else{args[args.length]=e.clientx;args[args.length]=e.clienty;args[args.length]=e.shiftkey;args[args.length]=e.ctrlkey;}var ret=func.apply(this,args);if(ret===false){obj._drag=null;}}},"_dragUpHandler":function(obj,e){var drag=obj._drag;var topForm=Eco.XComp.getTopLevelForm(obj.parent);topForm.__makeDraggableCurComp=null;if(drag){Eco.XComp.Event.cancelAnimationFrame(obj._reqDragId);obj._reqDragId=null;obj._drag=null;var func=obj._dragFuncs,addArgs,mouseEventInfo;if(func){addArgs=func.args;mouseEventInfo=func.mouseEventInfo;func=func.draggingEndFunc;}if(func){var args=[];if(addArgs){args=args.concat(addArgs);}if(mouseEventInfo){args[args.length]=e;}else{args[args.length]=e.clientx;args[args.length]=e.clienty;args[args.length]=e.shiftkey;args[args.length]=e.ctrlkey;}func.apply(this,args);}}},"_dragMoveHandler":function(form,e){var obj=form.__makeDraggableCurComp;if(obj){var drag=obj._drag;if(drag){obj._dragCurPt={x:e.screenx,y:e.screeny,shiftkey:e.shiftkey,ctrlkey:e.ctrlkey};if(obj._delayDragProc){Eco.XComp.Event.cancelAnimationFrame(obj._reqDragId);obj._reqDragId=null;}obj._reqDragId=Eco.XComp.Event.requestAnimationFrame(Eco.XComp.Event._dragProcess,obj.__scope,obj,e);}}},"_dragProcess":function(obj,e){var pt=obj._dragCurPt,drag=obj._drag;if(drag==null){return;}drag.offsetX=pt.x-drag.startPt.x;drag.offsetY=pt.y-drag.startPt.y;if(!drag.isOffsetFromStart){drag.startPt=pt;}var func=obj._dragFuncs,mouseEventInfo,addArgs;if(func){addArgs=func.args;mouseEventInfo=func.mouseEventInfo;func=func.draggingFunc;}if(func){var args=[drag.offsetX,drag.offsetY];if(addArgs){args=args.concat(addArgs);}if(mouseEventInfo){args[args.length]=e;}else{args[args.length]=drag.shiftkey;args[args.length]=drag.ctrlkey;}func.apply(this,args);}},"_lockMouseEvent":function(comp,onlyLbtnUp){var win=comp._getWindow();win._mouseLockComp=comp;win._on_sys_lbuttonup=Eco.XComp.Event._on_default_sys_lbuttonup;if(!onlyLbtnUp){win._on_sys_mousemove=Eco.XComp.Event._on_default_sys_mousemove;}},"_on_default_sys_lbuttonup":function(elem,strButton,altKey,ctrlKey,shiftKey,windowX,windowY,screenx,screeny){var lockComp=this._mouseLockComp,enableChanged=false,tmpFunc,visibleChanged=false;elem=lockComp._control_element;if(!lockComp._isEnable()){enableChanged=true;tmpFunc=lockComp._isEnable;lockComp._isEnable=function(){return true;};}if(!lockComp.visible){visibleChanged=true;lockComp.visible=true;}nexacro._Window.prototype._on_default_sys_lbuttonup.call(this,elem,strButton,altKey,ctrlKey,shiftKey,windowX,windowY,screenx,screeny);this._on_sys_lbuttonup=nexacro._Window.prototype._on_default_sys_lbuttonup;this._on_sys_mousemove=nexacro._Window.prototype._on_default_sys_mousemove;if(enableChanged){lockComp._isEnable=tmpFunc;}if(visibleChanged){lockComp.visible=false;}this._mouseLockComp=null;},"_on_default_sys_mousemove":function(elem,strButton,altKey,ctrlKey,shiftKey,windowX,windowY,screenx,screeny){elem=this._mouseLockComp._control_element;nexacro._Window.prototype._on_default_sys_mousemove.call(this,elem,strButton,altKey,ctrlKey,shiftKey,windowX,windowY,screenx,screeny);},"makeRepeatable":function(XComp,repeatFunc,scope,args){if(Eco.isObject(repeatFunc)){XComp._repeatFuncs={"repeatStartFunc":repeatFunc.start,"repeatEndFunc":repeatFunc.end,"repeatingFunc":repeatFunc.repeating,"repeatStopFunc":repeatFunc.repeatingStop,"firstInterval":repeatFunc.firstInterval||500,"interval":repeatFunc.interval||100,"args":args};}else{XComp._repeatFuncs={"repeatingFunc":repeatFunc,"firstInterval":500,"interval":100,"args":args};}Eco.XComp.Event.add(XComp,{"onlbuttondown":Eco.XComp.Event._repeatDownHandler,"onlbuttonup":Eco.XComp.Event._repeatUpHandler},scope);},"clearRepeatable":function(XComp){if(XComp._repeatFuncs){Eco.XComp.Event._cancelRepeatable(XComp);Eco.XComp.Event.remove(XComp,{"onmousemove":Eco.XComp.Event._repeatMoveHandler},this);XComp._repeatStatus=null;XComp._repeatFuncs=null;Eco.XComp.Event.remove(XComp,{"onlbuttondown":Eco.XComp.Event._repeatDownHandler,"onlbuttonup":Eco.XComp.Event._repeatUpHandler});}},"_cancelRepeatable":function(XComp){if(XComp._timeId!=null){nexacro._clearSystemTimer(XComp._repeatFuncs._win_handle,XComp._timeId);XComp._timeId=null;}if(XComp._reqId!=null){Eco.XComp.Event.cancelAnimationFrame(XComp._reqId);XComp._reqId=null;}var curPoint=XComp._curPoint;if(curPoint){XComp._curPoint=null;}},"_repeatDownHandler":function(obj,e){Eco.XComp.Event._lockMouseEvent(obj);Eco.XComp.Event.add(obj,{"onmousemove":Eco.XComp.Event._repeatMoveHandler},this);obj._curPoint={x:e.clientx,y:e.clienty};var func=obj._repeatFuncs,args,addArgs;if(func){addArgs=func.args;func=func.repeatStartFunc;if(!func){func=null;}}if(func){var pt=obj._curPoint;args=[pt.x,pt.y];if(addArgs){args=args.concat(addArgs);}func.apply(this,args);}var repeatConf=obj._repeatFuncs,pThis=this;repeatConf._win_handle=obj._getReferenceContext()._getWindowHandle();obj._repeatStatus="firstRepeat";obj._timeId=nexacro._setSystemTimer(repeatConf._win_handle,function(){Eco.XComp.Event._repeatProcess.call(pThis,obj);},repeatConf.firstInterval);},"_repeatUpHandler":function(obj,e){Eco.XComp.Event.remove(obj,{"onmousemove":Eco.XComp.Event._repeatMoveHandler},this);var repeatConfig=obj._repeatFuncs,args,addArgs;Eco.XComp.Event._cancelRepeatable(obj);if(e.clientx>0&&e.clienty>0&&e.clientx<obj.getOffsetWidth()&&e.clienty<obj.getOffsetHeight()){if(obj._repeatStatus!="repeat"){var repeatingFunc,repeatingArg;if(repeatConfig){addArgs=repeatConfig.args;repeatingFunc=repeatConfig.repeatingFunc;if(!repeatingFunc){repeatingFunc=null;}}if(repeatingFunc){repeatingArg=[e.clientx,e.clienty];if(addArgs){repeatingArg=repeatingArg.concat(addArgs);}repeatingFunc.apply(this,repeatingArg);}}}var repeatEndFunc;addArgs=null;if(repeatConfig){addArgs=repeatConfig.args;repeatEndFunc=repeatConfig.repeatEndFunc;if(!repeatEndFunc){repeatEndFunc=null;}}if(repeatEndFunc){if(!addArgs){addArgs=[];}repeatEndFunc.apply(this,addArgs);}},"_repeatMoveHandler":function(obj,e){if(e.clientx<0||e.clienty<0||e.clientx>obj.getOffsetWidth()||e.clienty>obj.getOffsetHeight()){if(obj._repeatStatus=="firstRepeat"||obj._repeatStatus=="repeat"){obj._repeatStatus="stop";Eco.XComp.Event._cancelRepeatable(obj);var func=obj._repeatFuncs,addArgs;if(func){addArgs=func.args;func=func.repeatStopFunc;if(!func){func=null;}}if(func){if(!addArgs){addArgs=[];}func.apply(this,addArgs);}}}else{var curPoint=obj._curPoint;if(!curPoint){curPoint={x:e.clientx,y:e.clienty};obj._curPoint=curPoint;}else{curPoint.x=e.clientx;curPoint.y=e.clienty;}if(obj._repeatStatus=="stop"){var repeatConf=obj._repeatFuncs,pThis=this;obj._repeatStatus="firstRepeat";obj._timeId=nexacro._setSystemTimer(repeatConf._win_handle,function(){Eco.XComp.Event._repeatProcess.call(pThis,obj);},repeatConf.firstInterval);}}},"_repeatProcess":function(obj){var status=obj._repeatStatus;if(obj._reqId!=null){Eco.XComp.Event.cancelAnimationFrame(obj._reqId);obj._reqId=null;}if(status=="stop"){nexacro._clearSystemTimer(obj._repeatFuncs._win_handle,obj._timeId);obj._timeId=null;return;}if(status=="firstRepeat"){nexacro._clearSystemTimer(obj._repeatFuncs._win_handle,obj._timeId);obj._timeId=null;}var func=obj._repeatFuncs,args,addArgs;if(func){addArgs=func.args;func=func.repeatingFunc;if(!func){func=null;}}if(func){var curPoint=obj._curPoint;if(curPoint){args=[curPoint.x,curPoint.y];}else{args=[ -1, -1];}if(addArgs){args=args.concat(addArgs);}obj._reqId=Eco.XComp.Event.requestAnimationFrame(function(){func.apply(this,args);},this);}if(status=="firstRepeat"){var pThis=this;obj._repeatStatus="repeat";obj._timeId=nexacro._setSystemTimer(obj._repeatFuncs._win_handle,function(){Eco.XComp.Event._repeatProcess.call(pThis,obj);},obj._repeatFuncs.interval);}},"requestAnimationFrame":function(callback,scope){var args;if(arguments.length>2){args=Eco.array.toArray(arguments,2);}else{args=[];}var isRuntime=nexacro._init_platform_runtime;var useSetTimeout=Eco.XComp.Event._requestAnimationFrameUseSetTimer;if(useSetTimeout===undefined){useSetTimeout=false;}var rAF=Eco.XComp.Event._requestAnimationFrame;if(!rAF){if(isRuntime){rAF=function(form,callback,lastTimeRef){var lastTime=lastTimeRef.lastTime;var currTime=(Date.now?Date.now():(new Date).getTime());var interval=(1000/60)+lastTime-currTime;if(interval<0){interval=0;}var id=nexacro._OnceCallbackTimer.callonce(form,function(){lastTimeRef.lastTime=(Date.now?Date.now():(new Date).getTime());callback();},interval);return id;};}else{var context=JsNamespace.getGlobalContext();rAF=context.requestAnimationFrame;if(!rAF){var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!rAF; ++x){rAF=context[vendors[x]+'RequestAnimationFrame'];}if(!rAF){rAF=function(callback,lastTimeRef){var lastTime=lastTimeRef.lastTime;var currTime=(Date.now?Date.now():(new Date).getTime());var interval=(1000/60)+lastTime-currTime;if(interval<0){interval=0;}var id=context.setTimeout(function(){lastTimeRef.lastTime=(Date.now?Date.now():(new Date).getTime());callback();},interval);return id;};Eco.XComp.Event._requestAnimationFrameUseSetTimer=true;useSetTimeout=true;}}}Eco.XComp.Event._requestAnimationFrame=rAF;}if(!Eco.XComp.Event._requestAnimationFrameLastTimeInfo){Eco.XComp.Event._requestAnimationFrameLastTimeInfo={};}var id;if(isRuntime){var form=Eco.XComp.Event._getRequestAnimationFrameForm(scope);var callbackString=callback.toString();var lastTimeRef=Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callbackString];if(lastTimeRef===undefined){Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callback.toString()]={'lastTime':0,'timers':[]};lastTimeRef=Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callbackString];}var timer=rAF(form,function(){callback.apply(scope,args);},lastTimeRef);id=timer._handle;lastTimeRef.id=id;lastTimeRef.timers.push(timer);}else if(useSetTimeout){var callbackString=callback.toString();var lastTimeRef=Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callback.toString()];if(lastTimeRef===undefined){Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callbackString]={'lastTime':0};lastTimeRef=Eco.XComp.Event._requestAnimationFrameLastTimeInfo[callbackString];}id=rAF(function(){callback.apply(scope,args);},lastTimeRef);lastTimeRef.id=id;}else{id=rAF(function(){callback.apply(scope,args);});}return id;},"_getRequestAnimationFrameForm":function(scope){var form;if(scope._getReferenceContext){form=scope._getReferenceContext();}else{var c=application.mainframe.all[0];do{if(c instanceof ChildFrame){break;}c=c.all[0];}while(true)form=c.form;}return form;},"cancelAnimationFrame":function(id){var cAF=Eco.XComp.Event._cancelAnimationFrame;if(!cAF){if(nexacro._init_platform_runtime){cAF=function(id){var lastTimeInfo=Eco.XComp.Event._requestAnimationFrameLastTimeInfo;if(lastTimeInfo){for(var p in lastTimeInfo){if(lastTimeInfo.hasOwnProperty(p)){if(id==lastTimeInfo[p].id){var timers=lastTimeInfo[p].timers;for(var i=0,len=timers.length;i<len;i++ ){timers[i].destroy();timers[i]=null;}lastTimeInfo[p]=null;delete lastTimeInfo[p];break;}}}}};}else{var context=JsNamespace.getGlobalContext();cAF=context.cancelAnimationFrame;if(!cAF){var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!cAF; ++x){cAF=context[vendors[x]+'CancelAnimationFrame']||context[vendors[x]+'CancelRequestAnimationFrame'];}if(!cAF){cAF=function(id){context.clearTimeout(id);var lastTimeInfo=Eco.XComp.Event._requestAnimationFrameLastTimeInfo;if(lastTimeInfo){for(var p in lastTimeInfo){if(lastTimeInfo.hasOwnProperty(p)){if(id==lastTimeInfo[p].id){lastTimeInfo[p]=null;delete lastTimeInfo[p];break;}}}}};}}}Eco.XComp.Event._cancelAnimationFrame=cAF;}cAF(id);}});}
if(!JsNamespace.exist("Eco.LocalStorage")){JsNamespace.declare("Eco.LocalStorage",{setItem:function(key,value,common){return nexacro.setPrivateProfile(key,value,common);},getItem:function(key,common){return nexacro.getPrivateProfile(key,common);}});var me=Eco.LocalStorage;if(nexacro._Browser.toUpperCase()=="RUNTIME"){me.removeItem=nexacro._emptyFn;me.clear=nexacro._emptyFn;}else{if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==6){me.removeItem=nexacro._emptyFn;me.clear=nexacro._emptyFn;}else if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==7){me.removeItem=function(key){var localstoragekey=nexacro._getLocalStorageKey(1);var iframenode=nexacro._managerFrameNode;if(iframenode){iframenode.load(localstoragekey);var attribute=iframenode.getAttribute(key);if(attribute){iframenode.removeAttribute(key);}}};me.clear=function(){var localstoragekey=nexacro._getLocalStorageKey(1);var iframenode=nexacro._managerFrameNode;if(iframenode){iframenode.load(localstoragekey);var attribute=iframenode.getAttribute(key);if(attribute){iframenode.clearAttributes();}}};}else{Eco.LocalStorage.removeItem=function(key){nexacro._removeLocalStorage(key,1);return;};Eco.LocalStorage.clear=function(){var localstoragekey=nexacro._getLocalStorageKey(1);var localstorage=window.localStorage;if(localstorage){if(localstoragekey){var jsondata={};localstorage.setItem(localstoragekey,JSON.stringify(jsondata));}}};}}}
if(!JsNamespace.exist("Eco.XComp.Factory")){JsNamespace.declare("Eco.XComp.Factory",{"getXCompByName":function(p,name){var poolName="default",target=p;if(Eco.isObject(p)){target=p.target;poolName=p.poolName;}var used=Eco.XComp.Factory._getUsed(target,poolName);if(used){return used[name];}},"_getCache":function(p,poolName,type,isCreate){var cache;if(poolName=="default"){cache=p._defaultCache;if(isCreate&&!cache){p._defaultCache={};cache=p._defaultCache;}if(!cache){return null;}if(!type||!type.length){Eco.Logger.error({message:"poolName이 'default'면 type값이 반드시 존재해야 합니다.",stack:true});}var typeCache=cache[type];if(isCreate&&!typeCache){cache[type]=[];typeCache=cache[type];}return typeCache;}else{cache=p._cache;if(isCreate&&!cache){p._cache={};cache=p._cache;}if(!cache){return null;}var namedCache=cache[poolName];if(isCreate&&!namedCache){cache[poolName]=[];namedCache=cache[poolName];}return namedCache;}},"_getUsed":function(p,poolName,isCreate){var used;if(poolName=="default"){used=p._defaultUsed;if(isCreate&&!used){p._defaultUsed={};used=p._defaultUsed;}}else{used=p._used;if(isCreate&&!used){used={};p._used=used;}if(!used){return null;}var tmpPoolUsed=used[poolName];if(isCreate&&!tmpPoolUsed){tmpPoolUsed={};used[poolName]=tmpPoolUsed;}return tmpPoolUsed;}return used;},"getXComp":function(p,type,nm){var xcomp,poolName="default",target=p,cache,factory=Eco.XComp.Factory;if(Eco.isObject(p)){target=p.target;poolName=p.poolName;}cache=factory._getCache(target,poolName,type);var compNm;if(!Eco.isString(nm)){compNm=null;}else{compNm=nm;}if(cache&&cache.length){xcomp=cache.pop();xcomp._id=compNm||xcomp._id||xcomp.name;}else{var ctor=factory._getConstructor(type);if(!ctor){Eco.Logger.error({"message":"type("+type+") is not exist!",stack:true});}xcomp=new ctor();xcomp.init(Eco.getUniqueId(type+"_"),"absolute",0,0,0,0);target.addChild(xcomp.name,xcomp);xcomp.show();xcomp._id=compNm||xcomp.name;}var argLens=arguments.length;if(argLens>2){var rect,args;if(Eco.isString(arguments[2])){if(argLens==4){factory.setRect(xcomp,arguments[3]);}else if(argLens==5){factory.setRect(xcomp,arguments[3],arguments[4]);}else if(argLens==6){factory.setRect(xcomp,arguments[3],arguments[4],arguments[5]);}else if(argLens==7){factory.setRect(xcomp,arguments[3],arguments[4],arguments[5],arguments[6]);}}else if(arguments[2]!=null){if(argLens==3){factory.setRect(xcomp,arguments[2]);}else if(argLens==4){factory.setRect(xcomp,arguments[2],arguments[3]);}else if(argLens==5){factory.setRect(xcomp,arguments[2],arguments[3],arguments[4]);}else if(argLens==6){factory.setRect(xcomp,arguments[2],arguments[3],arguments[4],arguments[5]);}}}factory.setProperties(xcomp,"visible",true);var used=factory._getUsed(target,poolName,true);used[xcomp._id]=xcomp;return xcomp;},"_getConstructor":function(type){var context=JsNamespace.getGlobalContext();return context[type];},"_recycle":function(c,clear){var setPropFunc=Eco.XComp.Factory.setProperties;if(clear){if(c._computeStyles){delete c["_computeStyles"];}c._props=null;var props=c._curProps;if(props){for(var prop in props){if(prop!="visible"&&props.hasOwnProperty(prop)){setPropFunc(c,prop,"");}}}setPropFunc(c,"visible",false);}else{setPropFunc(c,"visible",false);}},"getRect":function(c){var tmpRect=c._rect||c._curRect;if(!tmpRect){tmpRect={x:c.getPixelLeft(),y:c.getPixelTop(),width:c.getPixelWidth(),height:c.getPixelHeight()};}return tmpRect;},"getClientWidth":function(XComp){var wholeWidth=Eco.XComp.Factory.getRect(XComp).width;return Eco.XComp.PositionSize.getClientWidth(XComp,wholeWidth);},"getClientHeight":function(XComp){var wholeHeight=Eco.XComp.Factory.getRect(XComp).height;return Eco.XComp.PositionSize.getClientHeight(XComp,wholeHeight);},"getContentSizeWithStyle":function(XComp,text,styleSheet){if(Eco.isEmpty(styleSheet)){Eco.Logger.error({message:"styleSheet(스타일 속성정보)는 필수 입력값 입니다.",stack:true});return;}var _margin=styleSheet.getMargin(),_border=styleSheet.getBorder(),_padding=styleSheet.getPadding();var tempFont=styleSheet.getFont()["_font"];var textSize=nexacro._getTextSize2(text,tempFont);_border=_border.getLeft().getWidth()*2;var etcWidth=_margin.getLeft()+_margin.getRight()+_border+_padding.getLeft()+_padding.getRight();var etcHeight=_margin.getTop()+_margin.getBottom()+_border+_padding.getTop()+_padding.getBottom();return [textSize[0]+etcWidth,textSize[1]+etcHeight];},"setRect":function(c){var argsLen=arguments.length;var curRect=c._curRect;var rect=c._rect;if(argsLen==5){if(rect){rect.x=arguments[1];rect.y=arguments[2];rect.width=arguments[3];rect.height=arguments[4];}else{rect={x:arguments[1],y:arguments[2],width:arguments[3],height:arguments[4]};}}else if(argsLen==3){if(Eco.isNumber(arguments[1])){if(rect){rect.x=arguments[1];rect.y=arguments[2];}else{rect={x:arguments[1],y:arguments[2],width:0,height:0};}}else if(arguments[1]!=null&&arguments[2]!=null&&Eco.isNumber(arguments[1].x)&&Eco.isNumber(arguments[1].width)){if(rect){rect.x=arguments[1].x;rect.y=arguments[1].y;rect.width=arguments[2].width;rect.height=arguments[2].height;}else{rect={x:arguments[1].x,y:arguments[1].y,width:arguments[2].width,height:arguments[2].height};}}else{Eco.Logger.error("arguments are not correct! =>"+Eco.Logger.inspect(arguments,false,0,false));}}else if(argsLen==2){if(arguments[1]==null||Eco.isNumber(arguments[1])){Eco.Logger.error("arguments are not correct! =>"+Eco.Logger.inspect(arguments,false,0,false));}if(Eco.isNumber(arguments[1].x)&&Eco.isNumber(arguments[1].width)){rect={x:arguments[1].x,y:arguments[1].y,width:arguments[1].width,height:arguments[1].height};}else if(Eco.isNumber(arguments[1].width)){if(rect){rect.width=arguments[1].width;rect.height=arguments[1].height;}else{rect={x:0,y:0,width:arguments[1].width,height:arguments[1].height};}}else if(Eco.isNumber(arguments[1].x)){if(rect){rect.x=arguments[1].x;rect.y=arguments[1].y;}else{rect={x:arguments[1].x,y:arguments[1].y,width:0,height:0};}}}else if(argsLen==4){if(Eco.isNumber(arguments[2])&&Eco.isNumber(arguments[3])&&arguments[1]!=null&&Eco.isNumber(arguments[1].x)){if(rect){rect.x=arguments[1].x;rect.y=arguments[1].y;rect.width=arguments[2];rect.height=arguments[3];}else{rect={x:arguments[1].x,y:arguments[1].y,width:arguments[2],height:arguments[3]};}}else if(Eco.isNumber(arguments[1])&&Eco.isNumber(arguments[2])&&arguments[3]!=null&&Eco.isNumber(arguments[3].width)){if(rect){rect.x=arguments[1];rect.y=arguments[2];rect.width=arguments[3].width;rect.height=arguments[3].height;}else{rect={x:arguments[1],y:arguments[2],width:arguments[3].width,height:arguments[3].height};}}else{Eco.Logger.error("arguments are not correct! =>"+Eco.Logger.inspect(arguments,false,0,false));}}var factory=Eco.XComp.Factory;if(curRect){if(curRect.x!=rect.x||curRect.y!=rect.y||curRect.width!=rect.width||curRect.height!=rect.height){c._rect=rect;factory.invalidateRect(c);}else{c._needsRender=false;factory._removeRenderItems(c);factory._deleteParentRect(c.parent);}}else{c._rect=rect;factory.invalidateRect(c);}},"getProperty":function(c,propName){var propVal;if(c._props){propVal=c._props[propName];}if((propVal==null)&&c._curProps){propVal=c._curProps[propName];}if(propVal==null){propVal=c[propName];}return propVal;},"setProperties":function(c){var curprops=c._curProps||{},props=c._props||{},args=arguments,prop,subProp,value,changed=false;for(var i=1,n=args.length;i<n;i+=2){prop=args[i];value=args[i+1];if(props[prop]!=value||curprops[prop]!==value){changed=true;props[prop]=value;if(curprops[prop]===value){delete props[prop];}else if(prop=="style"&&c._computeStyles){c._computeStyles._changed=true;}}}if(changed){var isexist=false;for(var p in props){if(props.hasOwnProperty(p)){isexist=true;break;}}if(isexist){c._props=props;}else{c._props=null;}Eco.XComp.Factory.invalidateProps(c);}},"doLayout":function(p,isDownward){if(p instanceof nexacro.Div){p=p.form;}var factory=Eco.XComp.Factory;if(isDownward){var cs=p._commitPropItems,childs=p._changesPropChilds;if(((cs&&cs.length)||(childs&&childs.length))&&!p._processLayout){p._processLayout=true;factory._commitPropsProcess(p,isDownward);p._processLayout=false;}cs=p._renderItems;childs=p._changesRectChilds;if(((cs&&cs.length)||(childs&&childs.length))&&!p._processLayout){p._processLayout=true;factory._doRender(p,isDownward);p._processLayout=false;}}else{var cs=p._commitPropItems;if(cs&&cs.length&&!p._processLayout){p._processLayout=true;factory._commitPropsProcess(p,isDownward);p._processLayout=false;}cs=p._renderItems;if(cs&&cs.length&&!p._processLayout){p._processLayout=true;factory._doRender(p,isDownward);p._processLayout=false;}}},"_commitPropsProcess":function(p,isDownward){var cs=p._commitPropItems,factory=Eco.XComp.Factory;if(cs&&cs.length&&!p._processCommitProps){p._processCommitProps=true;for(var i=0,c;(c=cs[i]);i++ ){factory._commitProps(c);}p._commitPropItems=null;p._processCommitProps=false;}if(isDownward){cs=p._changesPropChilds;if(cs&&cs.length){for(var i=0,c;(c=cs[i]);i++ ){factory._commitPropsProcess(c,isDownward);c._needsPropChildsReg=false;}p._changesPropChilds=null;}}},"_doRender":function(p,isDownward){var cs=p._renderItems,factory=Eco.XComp.Factory;if(cs&&cs.length&&!p._processRender){p._processRender=true;for(var i=0,c;(c=cs[i]);i++ ){if(!(c instanceof Tabpage)){factory._changePosSize(c);}}p._renderItems=null;p._processRender=false;}if(isDownward){cs=p._changesRectChilds;if(cs&&cs.length){for(var i=0,c;(c=cs[i]);i++ ){factory._doRender(c,isDownward);c._needsRectChildsReg=false;}p._changesRectChilds=null;}}},"_doZOrder":function(clist){for(var i=1,len=clist.length;i<len;i++ ){clist[i].moveToPrev(clist[i-1]);}},"invalidate":function(c){var factory=Eco.XComp.Factory;factory.invalidateProps(c);factory.invalidateRect(c);},"validate":function(c){var factory=Eco.XComp.Factory;factory.invalidate(c);factory.doLayout(c.parent);},"invalidateRect":function(c){if(!c._needsRender){var factory=Eco.XComp.Factory;c._needsRender=true;factory._addRenderItems(c);factory._invalidateParentRect(c.parent);}},"validateRect":function(c){var factory=Eco.XComp.Factory;factory.invalidateRect(c);factory.doLayout(c.parent);},"_invalidateParentRect":function(c){var p=c.parent;if(!p||p instanceof ChildFrame){return;}if(p._changesRectChilds==null){p._changesRectChilds=[];}if(!c._needsRectChildsReg){c._needsRectChildsReg=true;p._changesRectChilds.push(c);}Eco.XComp.Factory._invalidateParentRect(p);},"_deleteParentRect":function(c){var p=c.parent;if(p instanceof ChildFrame){return;}if(p._changesRectChilds&&c._needsRectChildsReg&&(!c._renderItems||c._renderItems.length==0)){Eco.array.remove(p._changesRectChilds,c);c._needsRectChildsReg=false;}if(p._changesPropChilds&&c._needsPropChildsReg&&(!c._commitPropItems||c._commitPropItems.length==0)){Eco.XComp.Factory._deleteParentRect(p);}},"invalidateProps":function(c){var factory=Eco.XComp.Factory;if(c._props){if(!c._needsCommitProps){c._needsCommitProps=true;factory._addCommitPropItems(c);factory._invalidateParentProps(c.parent);}}else{c._needsCommitProps=false;factory._removeCommitPropItems(c);factory._deleteParentProps(c.parent);}},"_invalidateParentProps":function(c){var p=c.parent;if(!p||p instanceof ChildFrame){return;}if(p._changesPropChilds==null){p._changesPropChilds=[];}if(!c._needsPropChildsReg){c._needsPropChildsReg=true;p._changesPropChilds.push(c);}Eco.XComp.Factory._invalidateParentProps(p);},"_deleteParentProps":function(c){var p=c.parent;if(p instanceof ChildFrame){return;}if(p._changesPropChilds&&c._needsPropChildsReg&&(!c._commitPropItems||c._commitPropItems.length==0)){Eco.array.remove(p._changesPropChilds,c);c._needsPropChildsReg=false;}Eco.XComp.Factory._deleteParentProps(p);},"validateProps":function(c){var factory=Eco.XComp.Factory;factory.invalidateProps(c);factory.doLayout(c.parent);},"_addRenderItems":function(c){if(c instanceof Tabpage){Eco.Logger.error({"meassge":"Tabpage는 position 및 size를 변경 할 수 없습니다.","stack":true});}var p=c.parent;if(p instanceof Tabpage){var tabParent=p.parent.parent;if(!tabParent._renderItems){tabParent._renderItems=[];}if(Eco.array.indexOf(tabParent._renderItems,p)== -1){tabParent._renderItems.push(p);}}if(!p._renderItems){p._renderItems=[];}p._renderItems.push(c);},"_addCommitPropItems":function(c){var p=c.parent;if(!p._commitPropItems){p._commitPropItems=[];}p._commitPropItems.push(c);},"_removeRenderItems":function(c){var p=c.parent;if(p._renderItems){Eco.array.remove(p._renderItems,c);}},"_removeCommitPropItems":function(c){var p=c.parent;if(p._commitPropItems){Eco.array.remove(p._commitPropItems,c);}},"_commitProps":function(c){if(c._needsCommitProps){if(c._debug){trace("propChange==>"+(c._id||c.name)+"//"+Eco.object.getPropertyNames(c._props));}var props=c._props,curprops=c._curProps||{},curVal;if(props){for(var pNm in props){if(props.hasOwnProperty(pNm)){curVal=props[pNm];if(pNm=='style'){var vType=typeof curVal;switch(vType){case 'string':var styleArr=curVal.split(';');for(var i=0,len=styleArr.length;i<len;i++ ){var propStr=styleArr[i];if(propStr.length>0){var tmpidx=propStr.indexOf(':');var pKey=propStr.substr(0,tmpidx);pKey=pKey.replace(/ /g,'');var pValue=propStr.substr(tmpidx+1,propStr.length);if(c['set_'+pKey]){c['set_'+pKey](pValue);}}}break;case 'object':Eco.XComp.Style.setStyle(xComp,curVal);break;default:break;}if(c._computeStyles){delete c["_computeStyles"];}}else{c["set_"+pNm](curVal);curprops[pNm]=curVal;}}}c._props=null;c._curProps=curprops;}c._needsCommitProps=false;}},"_changePosSize":function(c){if(c._needsRender){if(c._debug){trace("rectChange==>"+(c._id||c.name)+"::"+c._rect.toString()+","+c.text+","+c.visible+","+c.style.border);}var rect=c._rect;if(rect){c.move(rect.x,rect.y,rect.width,rect.height);if(c._debug){trace("l:"+c.getPixelLeft()+" t:"+c.getPixelTop()+" w:"+c.getPixelWidth()+" h:"+c.getPixelHeight());}if(c._curRect){var r=c._curRect;r.x=rect.x;r.y=rect.y;r.width=rect.width;r.height=rect.height;}else{c._curRect={x:rect.x,y:rect.y,width:rect.width,height:rect.height};}}c._needsRender=false;}},"releaseNamed":function(p,names,propsClear){var poolName="default",target=p,used,cache,c,clearArr=[],isDefaultPool,factory=Eco.XComp.Factory;if(Eco.isObject(p)){target=p.target;poolName=p.poolName;}used=factory._getUsed(target,poolName);if(!used){return;}isDefaultPool=(poolName=="default");if(isDefaultPool){cache=p._defaultCache;if(!cache){p._defaultCache={};cache=p._defaultCache;}}else{cache=factory._getCache(target,poolName,null,true);}for(var i=0,len=names.length;i<len;i++ ){c=used[names[i]];if(c){if(isDefaultPool){var type=Eco.XComp.typeOf(c);if(!cache[type]){cache[type]=[];}cache[type].unshift(c);}else{cache.unshift(c);}factory._recycle(c,propsClear);clearArr.push(c);}}for(var i=0,len=clearArr.length;i<len;i++ ){delete used[clearArr[i]._id];}},"releaseAll":function(p,exclude,propsClear,isDownward){var poolName="default",target=p,used,cache,c,clearArr=[],isDefaultPool,factory=Eco.XComp.Factory;if(Eco.isObject(p)){target=p.target;poolName=p.poolName;}used=factory._getUsed(target,poolName);if(!used){return;}isDefaultPool=(poolName=="default");if(isDefaultPool){cache=p._defaultCache;if(!cache){p._defaultCache={};cache=p._defaultCache;}}else{cache=factory._getCache(target,poolName,null,true);}var excludeIsArray=Eco.isArray(exclude),excludeIsObject=false;if(!excludeIsArray){excludeIsObject=Eco.isObject(exclude);}if(excludeIsArray||excludeIsObject){var excludeMap;if(excludeIsArray){excludeMap={};for(var i=0,len=exclude.length;i<len;i++ ){excludeMap[exclude[i]._id]=true;}}else{excludeMap=exclude;}for(var nm in used){if(used.hasOwnProperty(nm)){c=used[nm];if(!excludeMap[c._id]){if(isDefaultPool){var type=Eco.XComp.typeOf(c);if(!cache[type]){cache[type]=[];}cache[type].push(c);}else{cache.unshift(c);}factory._recycle(c,propsClear);clearArr.push(c);if(isDownward){if(c instanceof Tab){c=c.tabpages[c.tabindex];factory.releaseAll(c,null,propsClear);}else if(c instanceof Form){factory.releaseAll(c,null,propsClear);}}}}}}else{for(var nm in used){if(used.hasOwnProperty(nm)){c=used[nm];if(isDefaultPool){var type=Eco.XComp.typeOf(c);if(!cache[type]){cache[type]=[];}cache[type].unshift(c);}else{cache.unshift(c);}factory._recycle(c,propsClear);clearArr.push(c);if(isDownward){if(c instanceof Tab){c=c.tabpages[c.tabindex];factory.releaseAll(c,null,propsClear);}else if(c instanceof Form){factory.releaseAll(c,null,propsClear);}}}}}for(var i=0,len=clearArr.length;i<len;i++ ){delete used[clearArr[i]._id];}},"release":function(c,poolName,propsClear){var target=c.parent,used,cache,factory=Eco.XComp.Factory;if(!poolName||!poolName.length){poolName="default";}if(poolName=="default"){var type=Eco.XComp.typeOf(c);cache=factory._getCache(target,poolName,type,true);cache.push(c);}else{cache=factory._getCache(target,poolName,null,true);cache.push(c);}factory._recycle(c,propsClear);used=factory._getUsed(target,poolName);if(used){delete used[c._id];}},"getNonClientArea":function(xcomp,pseudo,includePadding){if(Eco.isEmpty(xcomp)){return;}var factory=Eco.XComp.Factory,props;if(pseudo==null){pseudo=xcomp.getCurrentPseudo();}if(includePadding===false){props=factory._nonClientAreaWithOutPadding;}else{props=factory._nonClientArea;}var curStyle,styleObj;if(Eco.isXComponent(xcomp)){var stylestr=factory.getProperty(xcomp,"style"),parseStyleObj;if(stylestr&&stylestr.length){parseStyleObj=xcomp._computeStyles;if(!parseStyleObj||parseStyleObj._changed){parseStyleObj=factory.parseStyleStr(stylestr);parseStyleObj._changed=false;xcomp._computeStyles=parseStyleObj;}}if(parseStyleObj){styleObj=parseStyleObj[pseudo];}curStyle=xcomp.currentstyle;}else{styleObj=xcomp[pseudo];}var retVal=[0,0,0,0],propName,propobj,propProc;if(styleObj){for(var i=0,len=props.length;i<len;i++ ){propProc=props[i];propName=propProc.name;propobj=styleObj[propName];if(!propobj&&curStyle){propobj=curStyle[propName];}if(propobj){propProc.calcGap(propobj,retVal);}}}else if(curStyle){var propobj,propProc;for(var i=0,len=props.length;i<len;i++ ){propProc=props[i];propobj=curStyle[propProc.name];if(propobj){propProc.calcGap(propobj,retVal);}}}return retVal;},_nonClientArea:[{name:"border",calcGap:function(obj,arr){var val;switch(obj._linecnt){case 1:val=obj._top_width;arr[0]+=val;arr[1]+=val;arr[2]+=val;arr[3]+=val;break;case 2:val=obj._top_width;arr[1]+=val;arr[3]+=val;val=obj._right_width;arr[0]+=val;arr[2]+=val;break;case 3:val=obj._top_width;arr[1]+=val;val=obj._right_width;arr[0]+=val;arr[2]+=val;val=obj._bottom_width;arr[3]+=val;break;case 4:arr[0]+=obj._left_width;arr[1]+=obj._top_width;arr[2]+=obj._right_width;arr[3]+=obj._bottom_width;break;}}},{name:"margin",calcGap:function(obj,arr){arr[0]+=obj.left;arr[1]+=obj.top;arr[2]+=obj.right;arr[3]+=obj.bottom;}},{name:"padding",calcGap:function(obj,arr){arr[0]+=obj.left;arr[1]+=obj.top;arr[2]+=obj.right;arr[3]+=obj.bottom;}}],_nonClientAreaWithOutPadding:[{name:"border",calcGap:function(obj,arr){var val;switch(obj._linecnt){case 1:val=obj._top_width;arr[0]+=val;arr[1]+=val;arr[2]+=val;arr[3]+=val;break;case 2:val=obj._top_width;arr[1]+=val;arr[3]+=val;val=obj._right_width;arr[0]+=val;arr[2]+=val;break;case 3:val=obj._top_width;arr[1]+=val;val=obj._right_width;arr[0]+=val;arr[2]+=val;val=obj._bottom_width;arr[3]+=val;break;case 4:arr[0]+=obj._left_width;arr[1]+=obj._top_width;arr[2]+=obj._right_width;arr[3]+=obj._bottom_width;break;}}},{name:"margin",calcGap:function(obj,arr){arr[0]+=obj.left;arr[1]+=obj.top;arr[2]+=obj.right;arr[3]+=obj.bottom;}}],_styleprops:{align:"Align",background:"Background",borderRadius:"borderRadius",border:"Border",color:"Color",cursor:"Cursor",font:"Font",gradation:"Gradation",margin:"Margin",opacity:"Style",padding:"Padding",shadow:"Shadow"},_setStylePropObject:function(val,sObj,factory,stringUtil){var linearr=val.split(";");var propname,propval;for(var i=0,len=linearr.length;i<len;i++ ){var tmpstr=linearr[i];var idx=tmpstr.indexOf(":");propname=tmpstr.substring(0,idx).trim();propval=tmpstr.substring(idx+1).trim();if(propname&&propval){var fnNm=factory._styleprops[propname];if(fnNm){var getFn=nexacro[fnNm+"Object"];if(fnNm=="Style"){sObj[propname]=getFn(propname,propval);}else{sObj[propname]=getFn(propval);}}}}},"parseStyleStr":function(str){if(Eco.isEmpty(str)){return;}var stringUtil=Eco.string,factory=Eco.XComp.Factory;var blocks=str.split("}");var s=blocks[0].trim();var styles;blocks.pop();var i,len=blocks.length;var definition_block,pseudo,normal_style,sObj;definition_block=s.split("{");normal_style=definition_block[0].substring(0,definition_block[0].lastIndexOf(";")+1).trim();if(normal_style.length==0){normal_style=definition_block[0].substring(0,definition_block[0].length).trim();}if(normal_style&&normal_style.length){styles={};sObj={};factory._setStylePropObject(normal_style,sObj,factory,stringUtil);styles["normal"]=sObj;}if(len>0){for(i=0;i<len;i++ ){definition_block=blocks[i].split("{");pseudo=definition_block[0].substring(definition_block[0].lastIndexOf(":")+1).trim();if(definition_block[1]&&definition_block[1].length){if(!styles){styles={};}sObj={};factory._setStylePropObject(definition_block[1],sObj,factory,stringUtil);styles[pseudo]=sObj;}}}return styles;},"setStyleSheet":function(XComp,cssItem){if(Eco.isEmpty(XComp)||Eco.isEmpty(cssItem)){return;}var keys=["_border","font","margin","padding"];var aliasKeys=["border","font","margin","padding"];var styleString="";for(var i=0,len=keys.length;i<len;i++ ){styleString+=aliasKeys[i]+":"+cssItem.getString(keys[i])+";";}Eco.XComp.Factory.setProperties(XComp,"style",styleString);}});}
if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};}if(!JsNamespace.exist("Eco.util")){JsNamespace.declare("Eco.util",{getRealUrl:function(url){var uri=nexacro._getURIValue(url);return nexacro._getServiceLocation(uri);},convertColIdToIndex:function(colList){var len=colList.length;var indexList=[];var key;var idx;for(var i=0;i<len;i++ ){if(Array.isArray(colList[i])){var temp=[];for(var j=0,len2=colList[i].length;j<len2;j++ ){idx=idxMap[colList[i][j]];temp.push(idx);}indexList.push(temp);continue;}idx=idxMap[colList[i]];indexList.push(idx);}return indexList;},performMark:function(name){if(performance.mark===undefined){trace("performance.mark Not supported");return;}performance.mark(name);},performMeasure:function(name,startMark,endMark){if(performance.measure===undefined){trace("performance.measure Not supported");return;}performance.measure(name,startMark,endMark);},clear_mark:function(name){if(performance.clearMarks===undefined){trace("performance.clearMarks Not supported");return;}performance.clearMarks(name);},clear_measure:function(name){if(performance.clearMeasures===undefined){trace("performance.clearMeasures Not supported");return;}performance.clearMeasures(name);},clear_performance:function(){this.clear_marks();this.clear_measures();},performPrint:function(){if(performance.clearMarks===undefined){trace("performance Not supported");return;}trace('\n--------  Print performance-marks   ---');var perfMarks=performance.getEntriesByType("mark");for(var i=0,len=perfMarks.length;i<len;i++ ){trace("Name: "+perfMarks[i].name+" - "+"Start Time: "+perfMarks[i].startTime);}trace('\n--------  Print performance-measures   ---');var perfMeasures=performance.getEntriesByType("measure");for(var i=0,len=perfMeasures.length;i<len;i++ ){trace("Name: "+perfMeasures[i].name+" - "+"Duration: "+perfMeasures[i].duration);}}});}
if(!JsNamespace.exist("nxlib")){JsNamespace.declare("nxlib",{callMenu:function(menuInfo){if(!menuInfo.menuId){return;}var objApp=nexacro.getApplication();var objForm=objApp.mainframe.childframe.form;objForm&&objForm["gfnOpenMenu"].call(objForm,menuInfo);},callMenuM:function(menuInfo){if(!menuInfo.menuId){return;}var objApp=nexacro.getApplication();var objForm=objApp.mainframe.childframe.form;var menuNm=objApp.gdsMenu.lookup("menuId",menuInfo.menuId,"menuNm");var menuUrl=objApp.gdsMenu.lookup("menuId",menuInfo.menuId,"menuUrl");objForm.divTop.form.staHome.set_visible(false);objForm.divTop.form.staNavi.set_visible(true);objForm.divTop.form.staNavi.set_text(menuNm);objForm.divMain.set_visible(false);objForm.divCenter.set_visible(true);objForm.divCenter.form.divWork.set_url(menuUrl);objForm.fnAction("MENU",false);},transaction:function(form,oData,callback){if(Eco.isEmpty(form)||Eco.isEmpty(oData)){trace("[nxlib.transaction error] arguments를 확인하세요.");return;}var pThis=form;var oSvc={oForm:pThis,svcid:oData.svcid,callback:callback};var sUrl=Eco.isEmpty(oData.url)?"":oData.url;var inputDataset=Eco.isEmpty(oData.inds)?"":oData.inds.join(" ");var outputDataset=Eco.isEmpty(oData.outds)?"":oData.outds.join(" ");var strArgument=Eco.isEmpty(oData.args)?"":oData.args.join(" ");var bAsync=Eco.isEmpty(oData.bAsync)?true:oData.bAsync;var nDataType=Eco.isEmpty(oData.nDataType)?2:oData.nDataType;var bCompress=Eco.isEmpty(oData.bCompress)?false:oData.bCompress;if(!Eco.isFunction(pThis._transactionCallback)){nexacro.Form.prototype._transactionCallback=function(oSvc,nErrorcode,strErrorMsg){var strSvcId=oSvc.svcid;var svcCallback=oSvc.callback;if(Eco.isEmpty(svcCallback)){return;}if(typeof svcCallback=="function"){svcCallback.call(this,strSvcId,nErrorcode,strErrorMsg);}else if(typeof svcCallback=="string"){if(!Eco.isFunction(this[svcCallback])){return;}this[svcCallback].call(this,strSvcId,nErrorcode,strErrorMsg);}else{trace("[nxlib.transaction error] callback 함수 또는 함수명을 지정하세요.");}};}pThis.transaction(oSvc,sUrl,inputDataset,outputDataset,strArgument,"_transactionCallback",bAsync,nDataType,bCompress);},openPopup:function(form,frameId,formUrl,objArgList,options,sPopupCallback,bModeless){var nLeft= -1;var nTop= -1;var nWidth=1;var nHeight=1;var bShowTitle=true;var bShowStatus=false;var bLayered=false;var nOpacity=100;var bAutoSize=true;var bResizable=true;var bRound=false;var bReload=false;var sDragMoveType="all";var sTitleText="";var objParentFrame=null;if(form){objParentFrame=form.getOwnerFrame();}else{objParentFrame=nexacro.getApplication().mainframe;}options+="";var aVal=options.trim().split(" ");for(var i=0;i<aVal.length;i++ ){var aVal2=aVal[i].trim().split("=");switch(aVal2[0]){case "top":nTop=parseInt(aVal2[1]);break;case "left":nLeft=parseInt(aVal2[1]);break;case "width":nWidth=parseInt(aVal2[1]);break;case "height":nHeight=parseInt(aVal2[1]);break;case "title":case "titlebar":case "showtitlebar":bShowTitle=aVal2[1];break;case "titletext":sTitleText=aVal2[1];break;case "status":case "statusbar":case "showstatusbar":bShowStatus=aVal2[1];break;case "layered":bLayered=aVal2[1];break;case "opacity":nOpacity=aVal2[1];break;case "autosize":bAutoSize=aVal2[1];break;case "resizable":bResizable=aVal2[1];break;case "round":bRound=aVal2[1];break;case "reload":bReload=aVal2[1];break;}}var sOpenalign="";sOpenalign="center middle";if(nWidth==1){nWidth=600;}if(nHeight==1){nHeight=500;}if(nLeft== -1){nLeft=(nexacro.getApplication().mainframe.width-nWidth)/2;if(bModeless){nLeft+=system.clientToScreenX(nexacro.getApplication().mainframe,0);}}if(nTop== -1){nTop=(nexacro.getApplication().mainframe.height-nHeight)/2;if(bModeless){nTop+=system.clientToScreenY(nexacro.getApplication().mainframe,0);}}if(bModeless){var objPopFrams=nexacro.getPopupFrames();var objPopFrame=objPopFrams[frameId];if(objPopFrame){objPopFrame.setFocus();if(bReload=="true"){if(!Eco.isEmpty(objArgList)){if(!objPopFrame.arguments){objPopFrame.arguments={};}for(var key in objArgList){if(objArgList.hasOwnProperty(key)){objPopFrame.arguments[key]=objArgList[key];}}}objPopFrame.form.reload();}return;}var sOpenStyle="cssclass=Popup";if(bShowTitle=="false"){sOpenStyle+="showtitlebar=false";}if(bShowStatus=="true"){sOpenStyle+=" showstatusbar=true";}if(bAutoSize=="false"){sOpenStyle+=" autosize=false";}if(bResizable=="false"){sOpenStyle+=" resizable=false";}else{sOpenStyle+=" resizable=true";}nexacro.open(frameId,formUrl,objParentFrame,objArgList,sOpenStyle,nLeft,nTop,nWidth,nHeight,form);}else{newChild=new nexacro.ChildFrame;newChild.init(frameId,nLeft,nTop,nWidth,nHeight,null,null,formUrl);newChild.set_background("transparent");newChild.set_dragmovetype(sDragMoveType);newChild.set_showtitlebar(bShowTitle);newChild.set_autosize(bAutoSize);newChild.set_resizable(bResizable);newChild.set_titletext(sTitleText);newChild.set_showstatusbar(bShowStatus);newChild.set_openalign(sOpenalign);newChild.set_layered(bLayered);newChild.set_opacity(nOpacity);if(!Eco.isEmpty(objArgList)){if(!newChild.arguments){newChild.arguments={};}for(var key in objArgList){if(objArgList.hasOwnProperty(key)){newChild.arguments[key]=objArgList[key];}}}newChild.showModal(objParentFrame,objArgList,form,sPopupCallback);}},openSlidePopup:function(form,frameId,formUrl,objArgList,options,sPopupCallback){var nLeft=form.width;var nTargetLeft=nLeft;var nTop=0;var nWidth=400;var nHeight=form.height;options+="";var aVal=options.trim().split(" ");for(var i=0;i<aVal.length;i++ ){var aVal2=aVal[i].trim().split("=");switch(aVal2[0]){case "width":nWidth=parseInt(aVal2[1]);nLeft=form.width+nWidth;nTargetLeft=form.width-nWidth;break;}}if(!form.all["__aniSlidePop"]){var objAni=new nexacro.Animation("__aniSlidePop",form);form.addChild("__aniSlidePop",objAni);form.__aniSlidePop.set_duration(200);form.__aniSlidePop.set_easing("linear");}var objOverlay=new Static("__"+frameId+"_overlay",0,0,null,null,0,0);objOverlay.set_background("rgba(0,0,0,.5)");form.addChild(objOverlay.name,objOverlay);objOverlay.show();var newChild=new Div("__"+frameId+"_pop",nLeft,nTop,0,nHeight);newChild.set_url(formUrl);newChild.set_opacity("0");if(!Eco.isEmpty(objArgList)){if(!newChild.arguments){newChild.arguments={};}for(var key in objArgList){if(objArgList.hasOwnProperty(key)){newChild.arguments[key]=objArgList[key];}}}form.addChild(newChild.name,newChild);newChild.show();newChild.form.close=function(arg){var objDelete=form.removeChild("__"+frameId+"_pop");objDelete.destroy();objDelete=null;objDelete=form.removeChild("__"+frameId+"_overlay");objDelete.destroy();objDelete=null;form[sPopupCallback].call(form,frameId,arg);};form.__aniSlidePop.removeTarget("aniItem01");form.__aniSlidePop.addTarget("aniItem01",newChild,"left:'"+nTargetLeft+"px', width:'"+nWidth+"px', opacity:'100'");form.__aniSlidePop.play();},lookup:function(p,name){var o;while(p){o=p.components;if(o&&o[name]){return o[name];}o=p.objects;if(o&&o[name]){return o[name];}p=p.parent;}return null;},getNowAddDate:function(offset,sFormat){if(Eco.isEmpty(sFormat)){sFormat="yyyyMMdd";}var dt=Eco.date.addDate(new Date(),offset);return Eco.date.getMaskFormatString(dt,sFormat);},getNowDate:function(sFormat){if(Eco.isEmpty(sFormat)){sFormat="yyyyMMdd";}var dt=new Date();return Eco.date.getMaskFormatString(dt,sFormat);},addMoneyCommas:function(num){if(num==undefined){return '0';}return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');},addMoneyCommas2:function(num){if(num==undefined){return '0';}var val=num.toString().replace(/^\s*/,'').replace(/\s*$/,'');if(nexacro.isNumeric(val)){var parts=val.split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,',');if(parts[0]===""){parts[0]="0";}return parts.join(".");}else{return "0";}},getDateFormat:function(sValue,pattern){var dt=Eco.date.strToDate(sValue);return Eco.date.getMaskFormatString(dt,pattern);},getProductXml:function(selector){var xml;if(Eco.isEmpty(selector)){xml=ProductXmlProvider.getCurrentXmlDom();}else{xml=ProductXmlProvider.getCurrentXmlDom().find(selector);}return xml;},deleteComponents:function(obj){var comps=obj.form.components;var objDelete;for(var i=comps.length-1;i>=0;i-- ){objDelete=obj.removeChild(comps[i].name);objDelete.destroy();objDelete=null;}},createComboComponent:function(form,id,position,items,defaultValue){var itemList="<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows>";for(var i=0,len=items.length;i<len;i++ ){itemList+="<Row><Col id=\"codecolumn\">"+items[i].code+"</Col><Col id=\"datacolumn\">"+items[i].text+"</Col></Row>";}itemList+="</Rows>";var obj=new Combo(id,position.left,position.top,position.width,position.height,position.right,position.bottom);obj.set_codecolumn("codecolumn");obj.set_datacolumn("datacolumn");obj.set_value(defaultValue);var innerdataset=new nexacro.NormalDataset(id+"_innerdataset",obj);innerdataset._setContents(itemList);obj.set_innerdataset(innerdataset);form.addChild(obj.name,obj);obj.show();},createRadioComponent:function(form,id,position,items,defaultValue){var itemList="<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows>";for(var i=0,len=items.length;i<len;i++ ){itemList+="<Row><Col id=\"codecolumn\">"+items[i].code+"</Col><Col id=\"datacolumn\">"+items[i].text+"</Col></Row>";}itemList+="</Rows>";var obj=new Radio(id,position.left,position.top,position.width,position.height,position.right,position.bottom);obj.set_codecolumn("codecolumn");obj.set_datacolumn("datacolumn");obj.set_value(defaultValue);obj.set_direction("vertical");var innerdataset=new nexacro.NormalDataset(id+"_innerdataset",obj);innerdataset._setContents(itemList);obj.set_innerdataset(innerdataset);form.addChild(obj.name,obj);obj.show();},createEditComponent:function(form,id,position,defaultValue){var obj=new Edit(id,position.left,position.top,position.width,position.height,position.right,position.bottom);obj.set_value(defaultValue);form.addChild(obj.name,obj);obj.show();},createLabelComponent:function(form,id,position,text){var obj=new Static(id,position.left,position.top,position.width,position.height,position.right,position.bottom);obj.set_cssclass("sta_WF_labelBasic");obj.set_text(text);obj.set_wordWrap("char");form.addChild(obj.name,obj);obj.show();},createBackgroundComponent:function(form,id,position){var obj=new Static(id,position.left,position.top,position.width,position.height,position.right,position.bottom);obj.set_cssclass("sta_WF_labelContent");form.addChild(obj.name,obj);obj.show();}});}if(!nexacro.TransModule){nexacro.TransModule=function(name,parent){if(!name){name="tranmodule_"+'xxxx_yxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});}this.id=this.name=name;if(!parent){parent=nexacro.getApplication().getActiveForm();if(!parent){var popupframes=nexacro.getPopupFrames();var frames_len=popupframes?popupframes.length:0;for(var i=0;i<frames_len;i++ ){var currwin=popupframes[i]._window;if(currwin){var frame=currwin.getActiveFrame();if(frame&&frame.form instanceof nexacro.Form){parent=frame.form;break;}}}if(!parent){currwin=nexacro.getApplication().mainframe._window;var cur_focus_paths=currwin.getCurrentFocusPaths();var cur_focus_paths_len=(cur_focus_paths?cur_focus_paths.length:0);for(i=0;i<cur_focus_paths_len;i++ ){var _comp=cur_focus_paths[i];if(!_comp){continue;}if(_comp._is_form){parent=_comp;break;}}}}}this.parent=parent;this.parent.addChild(this.name,this);var sUrl=nexacro.getApplication().xadl;var m=sUrl.match(/^(([^:\/?#]+:)?(?:\/\/(([^\/?#:]*)(?::([^\/?#:]*))?)))?([^?#]*)(\?[^#]*)?(#.*)?$/);var sProtocol=m[2].toLowerCase().replace(":","");if(sProtocol!="http"&&sProtocol!="https"){sProtocol="http";}this.protocol=sProtocol;this.baseTimeout=30;this.timeOut=nexacro.getEnvironment().httptimeout;this.responseText="";sProtocol=null;m=null;};var _pTransModule=nexacro.TransModule.prototype=nexacro._createPrototype(nexacro.Object,nexacro.TransModule);_pTransModule._type_name="TransModule";_pTransModule.destroy=function(){if(this.parent){var objDelete=this.parent.removeChild(this.name);if(objDelete){objDelete.destroy();objDelete=null;}}return true;};_pTransModule.set_protocol=function(v){if(!v||v==""){v="http";}v=v.toLowerCase();if(v!="http"&&v!="https"){v="http";}this.protocol=v;};_pTransModule.nexaTransCallback=function(pThis,svcId,callBack){return function(status,data,cookie,fireerrorcode,returncode,locationurl){if(status<0){if(status=== -9){callBack.call(pThis,svcId, -1,"comm_cancel_byuser");}else{callBack.call(pThis,svcId, -1,"Error");}}else if(status===0){try{callBack.call(pThis,svcId,0,data);}catch(e){callBack.call(pThis,svcId, -1,data);}finally{data="";}}};};_pTransModule.callService=function(pThis,svcId,url,param,callBack){var strJSON=JSON.stringify(param);var path=url;if(system.navigatorname==="nexacro"){nexacro.getEnvironment().set_httptimeout(this.baseTimeout);var bindfn=this.nexaTransCallback(pThis,svcId,callBack);var httpheaderstr="Content-Type:application/json; charset=utf-8"+"\r\n";var failpass;var _handle=nexacro.__startLoad(path,bindfn,"text","none",true,"",strJSON,0,false,1000,failpass,httpheaderstr);_handle=null;}else{var req;if(window.XDomainRequest){req=new XDomainRequest;}else if(window.XMLHttpRequest){req=new XMLHttpRequest;}else{req=new ActiveXObject("MSXML2.XMLHTTP.3.0");}try{req.timeout=this.baseTimeout*1000;req.ontimeout=function(e){callBack.call(pThis,svcId, -1,"TIMEOUT");req=null;};}catch(e){}var objForm=pThis;var reqEvt=function(){if(req.readyState===4&&req.status===200){try{callBack.call(objForm,svcId,0,req.responseText);}catch(e){callBack.call(objForm,svcId, -1,req.responseText);}finally{req=null;}}};if(window.XDomainRequest){req.onload=reqEvt;}else{req.onreadystatechange=reqEvt;}req.onerror=function(e){req=null;callBack.call(pThis,svcId, -1,"Error");};req.open("POST",path);if(req.setRequestHeader){req.setRequestHeader("Content-Type","application/json; charset="+"utf-8");}req.send(strJSON);}};}Function.prototype.extend=function(name,func){if(!this.prototype[name]){Object.defineProperty(this.prototype,name,{enumerable:false,value:func});}return this;};Array.extend('contains',function(value){if(this==null){return false;}for(var i=0;i<this.length;i++ ){if(this[i]==value){return true;}}return false;});Array.extend('indexOf',function(value){if(this==null){return  -1;}for(var i=0;i<this.length;i++ ){if(this[i]==value){return i;}}return  -1;});
if(nexacro._Browser!="Runtime"){(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}return factory(w);};}else{factory(global);}})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var document=window.document;var getProto=Object.getPrototypeOf;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};var isFunction=function isFunction(obj){return typeof obj==="function"&&typeof obj.nodeType!=="number";};var isWindow=function isWindow(obj){return obj!=null&&obj===obj.window;};var preservedScriptAttributes={type:true,src:true,noModule:true};function DOMEval(code,doc,node){doc=doc||document;var i,script=doc.createElement("script");script.text=code;if(node){for(i in preservedScriptAttributes){if(node[i]){script[i]=node[i];}}}doc.head.appendChild(script).parentNode.removeChild(script);}function toType(obj){if(obj==null){return obj+"";}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;}var version="3.3.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this);},get:function(num){if(num==null){return slice.call(this);}return num<0?this[num+this.length]:this[num];},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq( -1);},eq:function(i){var len=this.length,j= +i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++ ;}if(typeof target!=="object"&&!isFunction(target)){target={};}if(i===length){target=this;i-- ;}for(;i<length;i++ ){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&Array.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false;}proto=getProto(obj);if(!proto){return true;}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString;},isEmptyObject:function(obj){var name;for(name in obj){return false;}return true;},globalEval:function(code){DOMEval(code);},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++ ){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}return obj;},trim:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}return ret;},inArray:function(elem,arr,i){return arr==null? -1:indexOf.call(arr,elem,i);},merge:function(first,second){var len= +second.length,j=0,i=first.length;for(;j<len;j++ ){first[i++ ]=second[j];}first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++ ){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++ ){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}return concat.apply([],ret);},guid:1,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length" in obj&&obj.length,type=toType(obj);if(isFunction(obj)||isWindow(obj)){return false;}return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1) in obj;}var Sizzle=(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}return 0;},hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++ ){if(list[i]===elem){return i;}}return  -1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return "\uFFFD";}return ch.slice(0, -1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ";}return "\\"+ch;},unloadHandler=function(){setDocument();},disabledAncestor=addCombinator(function(elem){return elem.disabled===true&&("form" in elem||"label" in elem);},{dir:"parentNode",next:"legend"});try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++ ]=els[i++ ])){}target.length=j-1;}};}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){if((elem=context.getElementById(m))){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector;}else if(context.nodeName.toLowerCase()!=="object"){if((nid=context.getAttribute("id"))){nid=nid.replace(rcssescape,fcssescape);}else{context.setAttribute("id",(nid=expando));}groups=tokenize(selector);i=groups.length;while(i-- ){groups[i]="#"+nid+" "+toSelector(groups[i]);}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id");}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed);}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}return (cache[key+" "]=value);}return cache;}function markFunction(fn){fn[expando]=true;return fn;}function assert(fn){var el=document.createElement("fieldset");try{return !!fn(el);}catch(e){return false;}finally{if(el.parentNode){el.parentNode.removeChild(el);}el=null;}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i-- ){Expr.attrHandle[arr[i]]=handler;}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff;}if(cur){while((cur=cur.nextSibling)){if(cur===b){return  -1;}}}return a?1: -1;}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return (name==="input"||name==="button")&&elem.type===type;};}function createDisabledPseudo(disabled){return function(elem){if("form" in elem){if(elem.parentNode&&elem.disabled===false){if("label" in elem){if("label" in elem.parentNode){return elem.parentNode.disabled===disabled;}else{return elem.disabled===disabled;}}return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled;}return elem.disabled===disabled;}else if("label" in elem){return elem.disabled===disabled;}return false;};}function createPositionalPseudo(fn){return markFunction(function(argument){argument= +argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i-- ){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false);}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler);}}support.attributes=assert(function(el){el.className="i";return !el.getAttribute("className");});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return !el.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return !document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[];}};}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return [elem];}elems=context.getElementsByName(id);i=0;while((elem=elems[i++ ])){node=elem.getAttributeNode("id");if(node&&node.value===id){return [elem];}}}return [];}};}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++ ])){if(elem.nodeType===1){tmp.push(elem);}}return tmp;}return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(document.querySelectorAll))){assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return  -1;}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}return compare&4? -1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document? -1:b===document?1:aup? -1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}while(ap[i]===bp[i]){i++ ;}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc? -1:bp[i]===preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.escape=function(sel){return (sel+"").replace(rcssescape,fcssescape);};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++ ])){if(elem===results[i]){j=duplicates.push(i);}}while(j-- ){results.splice(duplicates[j],1);}}sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++ ])){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}match[4]= +(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]= +((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}if(!operator){return true;}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)> -1:operator==="$="?check&&result.slice( -check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)> -1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice( -4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return !!elem.parentNode;}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}start=dir=type==="only"&&!start&&"nextSibling";}return true;}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node= ++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&& ++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}if(diff===false){while((node= ++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&& ++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}if(node===elem){break;}}}}}diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i-- ){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i-- ){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return !results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return (elem.textContent||elem.innerText||getText(elem)).indexOf(text)> -1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1)return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":createDisabledPseudo(false),"disabled":createDisabledPseudo(true),"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return (nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}return true;},"parent":function(elem){return !Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return [0];}),"last":createPositionalPseudo(function(matchIndexes,length){return [length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return [argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(; --i>=0;){matchIndexes.push(i);}return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(; ++i<length;){matchIndexes.push(i);}return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in {radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}for(i in {submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}groups.push((tokens=[]));}matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}if(!matched){break;}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++ ){selector+=tokens[i].value;}return selector;}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++ ;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}return false;}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem;}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return (newCache[2]=oldCache[2]);}else{uniqueCache[key]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true;}}}}}return false;};}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i-- ){if(!matchers[i](elem,context,xml)){return false;}}return true;}:matchers[0];}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++ ){Sizzle(selector,contexts[i],results);}return results;}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++ ){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}return newUnmatched;}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i-- ){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i-- ){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}postFinder(null,(matcherOut=[]),temp,xml);}i=matcherOut.length;while(i-- ){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])> -1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)> -1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++ ){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j= ++i;for(;j<len;j++ ){if(Expr.relative[tokens[j].type]){break;}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}matchers.push(matcher);}}return elementMatcher(matchers);}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context===document||context||outermost;}for(;i!==len&&(elem=elems[i])!=null;i++ ){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML;}while((matcher=elementMatchers[j++ ])){if(matcher(elem,context||document,xml)){results.push(elem);break;}}if(outermost){dirruns=dirrunsUnique;}}if(bySet){if((elem=!matcher&&elem)){matchedCount-- ;}if(seed){unmatched.push(elem);}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++ ])){matcher(unmatched,setMatched,context,xml);}if(seed){if(matchedCount>0){while(i-- ){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}setMatched=condense(setMatched);}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}i=match.length;while(i-- ){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}selector=selector.slice(tokens.shift().value.length);}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i-- ){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}break;}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1;});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}if(!assert(function(el){return el.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}return Sizzle;})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}matched.push(elem);}}return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}return matched;};var rneedsContext=jQuery.expr.match.needsContext;function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();};var rsingleTag=(/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i);function winnow(elements,qualifier,not){if(isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)!==not;});}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return (elem===qualifier)!==not;});}if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return (indexOf.call(qualifier,elem)> -1)!==not;});}return jQuery.filter(qualifier,elements,not);}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[];}return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++ ){if(jQuery.contains(self[i],this)){return true;}}}));}ret=this.pushStack([]);for(i=0;i<len;i++ ){jQuery.find(selector,self[i],ret);}return len>1?jQuery.uniqueSort(ret):ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return !!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}return this;}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1;}return this;}}else if(!context||context.jquery){return (context||root).find(selector);}else{return this.constructor(context).find(selector);}}else if(selector.nodeType){this[0]=selector;this.length=1;return this;}else if(isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++ ){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++ ){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)> -1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return (this[0]&&this[0].parentNode)?this.first().prevAll().length: -1;}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur;}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){if(nodeName(elem,"iframe")){return elem.contentDocument;}if(nodeName(elem,"template")){elem=elem.content||elem;}return jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice( -5)!=="Until"){selector=until;}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}if(rparentsprev.test(name)){matched.reverse();}}return this.pushStack(matched);};});var rnothtmlwhite=(/[^\x20\t\r\n\f]+/g);function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true;});return object;}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex= -1,fire=function(){locked=locked||options.once;fired=firing=true;for(;queue.length;firingIndex= -1){memory=queue.shift();while( ++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}if(!options.memory){memory=false;}firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}(function add(args){jQuery.each(args,function(_,arg){if(isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&toType(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))> -1){list.splice(index,1);if(index<=firingIndex){firingIndex-- ;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)> -1:list.length>0;},empty:function(){if(list){list=[];}return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return !list;},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory="";}return this;},locked:function(){return !!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return !!fired;}};return self;};function Identity(v){return v;}function Thrower(ex){throw ex;}function adoptValue(value,resolve,reject,noValue){var method;try{if(value&&isFunction((method=value.promise))){method.call(value).done(resolve).fail(reject);}else if(value&&isFunction((method=value.then))){method.call(value,resolve,reject);}else{resolve.apply(undefined,[value].slice(noValue));}}catch(value){reject.apply(undefined,[value]);}}jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},"catch":function(fn){return promise.then(null,fn);},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments);}});});fns=null;}).promise();},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return;}returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution");}then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special));}else{maxDepth++ ;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith));}}else{if(handler!==Identity){that=undefined;args=[returned];}(special||deferred.resolveWith)(that,args);}},process=special?mightThrow:function(){try{mightThrow();}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace);}if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e];}deferred.rejectWith(that,args);}}};if(depth){process();}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook();}window.setTimeout(process);}};}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,isFunction(onRejected)?onRejected:Thrower));}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[3-i][2].disable,tuples[3-i][3].disable,tuples[0][2].lock,tuples[0][3].lock);}list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}return deferred;},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(!( --remaining)){master.resolveWith(resolveContexts,resolveValues);}};};if(remaining<=1){adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject,!remaining);if(master.state()==="pending"||isFunction(resolveValues[i]&&resolveValues[i].then)){return master.then();}}while(i-- ){adoptValue(resolveValues[i],updateFunc(i),master.reject);}return master.promise();}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack);}};jQuery.readyException=function(error){window.setTimeout(function(){throw error;});};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn).catch(function(error){jQuery.readyException(error);});return this;};jQuery.extend({isReady:false,readyWait:1,ready:function(wait){if(wait===true? --jQuery.readyWait:jQuery.isReady){return;}jQuery.isReady=true;if(wait!==true&& --jQuery.readyWait>0){return;}readyList.resolveWith(document,[jQuery]);}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(toType(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}}else if(value!==undefined){chainable=true;if(!isFunction(value)){raw=true;}if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}if(fn){for(;i<len;i++ ){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}if(chainable){return elems;}if(bulk){return fn.call(elems);}return len?fn(elems[0],key):emptyGet;};var rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g;function fcamelCase(all,letter){return letter.toUpperCase();}function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);}var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!( +owner.nodeType);};function Data(){this.expando=jQuery.expando+Data.uid++ ;}Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[camelCase(data)]=value;}else{for(prop in data){cache[camelCase(prop)]=data[prop];}}return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][camelCase(key)];},access:function(owner,key,value){if(key===undefined||((key&&typeof key==="string")&&value===undefined)){return this.get(owner,key);}this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return;}if(key!==undefined){if(Array.isArray(key)){key=key.map(camelCase);}else{key=camelCase(key);key=key in cache?[key]:(key.match(rnothtmlwhite)||[]);}i=key.length;while(i-- ){delete cache[key[i]];}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true;}if(data==="false"){return false;}if(data==="null"){return null;}if(data=== +data+""){return  +data;}if(rbrace.test(data)){return JSON.parse(data);}return data;}function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data);}catch(e){}dataUser.set(elem,key,data);}else{data=undefined;}}return data;}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i-- ){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}dataPriv.set(elem,"hasDataAttrs",true);}}return data;}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data;}data=dataAttr(elem,key);if(data!==undefined){return data;}return;}this.each(function(){dataUser.set(this,key,value);});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||Array.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength-- ;}if(fn){if(type==="fx"){queue.unshift("inprogress");}delete hooks.stop;fn.call(elem,next,hooks);}if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter-- ;}if(arguments.length<setter){return jQuery.queue(this[0],type);}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!( --count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}type=type||"fx";while(i-- ){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++ ;tmp.empty.add(resolve);}}resolve();return defer.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&jQuery.contains(elem.ownerDocument,elem)&&jQuery.css(elem,"display")==="none";};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}return ret;};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&& +initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){initial=initial/2;unit=unit||initialInUnit[3];initialInUnit= +initial||1;while(maxIterations-- ){jQuery.style(elem,prop,initialInUnit+unit);if((1-scale)*(1-(scale=currentValue()/initial||0.5))<=0){maxIterations=0;}initialInUnit=initialInUnit/scale;}initialInUnit=initialInUnit*2;jQuery.style(elem,prop,initialInUnit+unit);valueParts=valueParts||[];}if(valueParts){initialInUnit= +initialInUnit|| +initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]: +valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}return adjusted;}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display;}temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block";}defaultDisplayMap[nodeName]=display;return display;}function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++ ){elem=elements[index];if(!elem.style){continue;}display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display="";}}if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem);}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display);}}}for(index=0;index<length;index++ ){if(values[index]!=null){elements[index].style.display=values[index];}}return elements;}jQuery.fn.extend({show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});var rcheckableType=(/^(?:checkbox|radio)$/i);var rtagName=(/<([a-z][^\/\0>\x20\t\r\n\f]+)/i);var rscriptType=(/^$|^module$|\/(?:java|ecma)script/i);var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*");}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*");}else{ret=[];}if(tag===undefined||tag&&nodeName(context,tag)){return jQuery.merge([context],ret);}return ret;}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++ ){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++ ){elem=elems[i];if(elem||elem===0){if(toType(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j-- ){tmp=tmp.lastChild;}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}fragment.textContent="";i=0;while((elem=nodes[i++ ])){if(selection&&jQuery.inArray(elem,selection)> -1){if(ignored){ignored.push(elem);}continue;}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}if(scripts){j=0;while((elem=tmp[j++ ])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}return fragment;}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var documentElement=document.documentElement;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}function returnFalse(){return false;}function safeActiveElement(){try{return document.activeElement;}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}for(type in types){on(elem,type,selector,data,types[type],one);}return elem;}if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}if(fn===false){fn=returnFalse;}else if(!fn){return elem;}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++ );}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return;}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}if(selector){jQuery.find.matchesSelector(documentElement,selector);}if(!handler.guid){handler.guid=jQuery.guid++ ;}if(!(events=elemData.events)){events=elemData.events={};}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t-- ){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}if(selector){handlers.splice(handlers.delegateCount++ ,0,handleObj);}else{handlers.push(handleObj);}jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t-- ){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}continue;}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j-- ){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount-- ;}if(special.remove){special.remove.call(elem,handleObj);}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}delete events[type];}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(nativeEvent){var event=jQuery.event.fix(nativeEvent);var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++ ){args[i]=arguments[i];}event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++ ])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++ ])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}if(special.postDispatch){special.postDispatch.call(this,event);}return event.result;},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++ ){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)> -1:jQuery.find(sel,this,null,[cur]).length;}if(matchedSelectors[sel]){matchedHandlers.push(handleObj);}}if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers});}}}}cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)});}return handlerQueue;},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent);}}:function(){if(this.originalEvent){return this.originalEvent[name];}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value});}});},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent);},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&nodeName(this,"input")){this.click();return false;}},_default:function(event){return nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=(src.target&&src.target.nodeType===3)?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget;}else{this.type=src;}if(props){jQuery.extend(this,props);}this.timeStamp=src&&src.timeStamp||Date.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation();}this.stopPropagation();}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(event){var button=event.button;if(event.which==null&&rkeyEvent.test(event.type)){return event.charCode!=null?event.charCode:event.keyCode;}if(!event.which&&button!==undefined&&rmouseEvent.test(event.type)){if(button&1){return 1;}if(button&2){return 3;}if(button&4){return 2;}return 0;}return event.which;}},jQuery.event.addProp);jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}return this;}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}if(fn===false){fn=returnFalse;}return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){if(nodeName(elem,"table")&&nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return jQuery(elem).children("tbody")[0]||elem;}return elem;}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}function restoreScript(elem){if((elem.type||"").slice(0,5)==="true/"){elem.type=elem.type.slice(5);}else{elem.removeAttribute("type");}return elem;}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++ ){jQuery.event.add(dest,type,events[type][i]);}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],valueIsFunction=isFunction(value);if(valueIsFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return collection.each(function(index){var self=collection.eq(index);if(valueIsFunction){args[0]=value.call(this,index,self.html());}domManip(self,args,callback,ignored);});}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++ ){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}callback.call(collection[i],node,i);}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++ ){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src&&(node.type||"").toLowerCase()!=="module"){if(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else{DOMEval(node.textContent.replace(rcleanScript,""),doc,node);}}}}}}return collection;}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++ ){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"));}node.parentNode.removeChild(node);}}return elem;}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>");},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++ ){fixInput(srcElements[i],destElements[i]);}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++ ){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++ ){if(acceptData(elem)){if((data=elem[dataPriv.expando])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}elem[dataPriv.expando]=undefined;}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++ ){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++ ){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}elem=0;}catch(e){}}if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++ ){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}return this.pushStack(ret);};});var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}return view.getComputedStyle(elem);};var rboxStyle=new RegExp(cssExpand.join("|"),"i");(function(){function computeStyleTests(){if(!div){return;}container.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";documentElement.appendChild(container).appendChild(div);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=roundPixelMeasures(divStyle.marginLeft)===12;div.style.right="60%";pixelBoxStylesVal=roundPixelMeasures(divStyle.right)===36;boxSizingReliableVal=roundPixelMeasures(divStyle.width)===36;div.style.position="absolute";scrollboxSizeVal=div.offsetWidth===36||"absolute";documentElement.removeChild(container);div=null;}function roundPixelMeasures(measure){return Math.round(parseFloat(measure));}var pixelPositionVal,boxSizingReliableVal,scrollboxSizeVal,pixelBoxStylesVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery.extend(support,{boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal;},pixelBoxStyles:function(){computeStyleTests();return pixelBoxStylesVal;},pixelPosition:function(){computeStyleTests();return pixelPositionVal;},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal;},scrollboxSize:function(){computeStyleTests();return scrollboxSizeVal;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}if(!support.pixelBoxStyles()&&rnumnonpx.test(ret)&&rboxStyle.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}return ret!==undefined?ret+"":ret;}function addGetHookIf(conditionFn,hookFn){return {get:function(){if(conditionFn()){delete this.get;return;}return (this.get=hookFn).apply(this,arguments);}};}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rcustomProp=/^--/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name;}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i-- ){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}function finalPropName(name){var ret=jQuery.cssProps[name];if(!ret){ret=jQuery.cssProps[name]=vendorPropName(name)||name;}return ret;}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}function boxModelAdjustment(elem,dimension,box,isBorderBox,styles,computedVal){var i=dimension==="width"?1:0,extra=0,delta=0;if(box===(isBorderBox?"border":"content")){return 0;}for(;i<4;i+=2){if(box==="margin"){delta+=jQuery.css(elem,box+cssExpand[i],true,styles);}if(!isBorderBox){delta+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(box!=="padding"){delta+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}else{extra+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{if(box==="content"){delta-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}if(box!=="margin"){delta-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}if(!isBorderBox&&computedVal>=0){delta+=Math.max(0,Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-computedVal-delta-extra-0.5));}return delta;}function getWidthOrHeight(elem,dimension,extra){var styles=getStyles(elem),val=curCSS(elem,dimension,styles),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box",valueIsBorderBox=isBorderBox;if(rnumnonpx.test(val)){if(!extra){return val;}val="auto";}valueIsBorderBox=valueIsBorderBox&&(support.boxSizingReliable()||val===elem.style[dimension]);if(val==="auto"||!parseFloat(val)&&jQuery.css(elem,"display",false,styles)==="inline"){val=elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)];valueIsBorderBox=true;}val=parseFloat(val)||0;return (val+boxModelAdjustment(elem,dimension,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles,val))+"px";}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}var ret,type,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name),style=elem.style;if(!isCustomProp){name=finalPropName(origName);}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}if(value==null||value!==value){return;}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){if(isCustomProp){style.setProperty(name,value);}else{style[name]=value;}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name);if(!isCustomProp){name=finalPropName(origName);}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra);}if(val===undefined){val=curCSS(elem,name,styles);}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}return val;}});jQuery.each(["height","width"],function(i,dimension){jQuery.cssHooks[dimension]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,dimension,extra);}):getWidthOrHeight(elem,dimension,extra);}},set:function(elem,value,extra){var matches,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box",subtract=extra&&boxModelAdjustment(elem,dimension,extra,isBorderBox,styles);if(isBorderBox&&support.scrollboxSize()===styles.position){subtract-=Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-parseFloat(styles[dimension])-boxModelAdjustment(elem,dimension,"border",false,styles)-0.5);}if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[dimension]=value;value=jQuery.css(elem,dimension);}return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return (parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++ ){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}return expanded;}};if(prefix!=="margin"){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(Array.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++ ){map[name[i]]=jQuery.css(elem,name[i],false,styles);}return map;}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}result=jQuery.css(tween.elem,tween.prop,"");return !result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,inProgress,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function schedule(){if(inProgress){if(document.hidden===false&&window.requestAnimationFrame){window.requestAnimationFrame(schedule);}else{window.setTimeout(schedule,jQuery.fx.interval);}jQuery.fx.tick();}}function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return (fxNow=Date.now());}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}if(includeWidth){attrs.opacity=attrs.width=type;}return attrs;}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++ ){if((tween=collection[index].call(animation,prop,value))){return tween;}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width" in props||"height" in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}hooks.unqueued++ ;anim.always(function(){anim.always(function(){hooks.unqueued-- ;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}}propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return;}if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display");}display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay;}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem]);}}if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay;});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display;}}style.display="inline-block";}}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden" in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay});}if(toggle){dataShow.hidden=!hidden;}if(hidden){showHide([elem],true);}anim.done(function(){if(!hidden){showHide([elem]);}dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});}propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0;}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=camelCase(index);easing=specialEasing[name];value=props[index];if(Array.isArray(value)){easing=value[1];value=props[index]=value[0];}if(index!==name){props[name]=value;delete props[index];}hooks=jQuery.cssHooks[name];if(hooks&&"expand" in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++ ){animation.tweens[index].run(percent);}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}if(!length){deferred.notifyWith(elem,[animation,1,0]);}deferred.resolveWith(elem,[animation]);return false;},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}stopped=true;for(;index<length;index++ ){animation.tweens[index].run(1);}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++ ){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=result.stop.bind(result);}return result;}}jQuery.map(props,createTween,animation);if(isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation;}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnothtmlwhite);}var prop,index=0,length=props.length;for(;index<length;index++ ){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!isFunction(easing)&&easing};if(jQuery.fx.off){opt.duration=0;}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration];}else{opt.duration=jQuery.fx.speeds._default;}}}if(opt.queue==null||opt.queue===true){opt.queue="fx";}opt.old=opt.complete;opt.complete=function(){if(isFunction(opt.old)){opt.old.call(this);}if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}if(clearQueue&&type!==false){this.queue(type||"fx",[]);}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}for(index=timers.length;index-- ;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}for(index=timers.length;index-- ;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}for(index=0;index<length;index++ ){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=Date.now();for(;i<timers.length;i++ ){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i-- ,1);}}if(!timers.length){jQuery.fx.stop();}fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);jQuery.fx.start();};jQuery.fx.interval=13;jQuery.fx.start=function(){if(inProgress){return;}inProgress=true;schedule();};jQuery.fx.stop=function(){inProgress=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}elem.setAttribute(name,value+"");return value;}if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}return value;}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++ ])){elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle;}return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}if(value!==undefined){if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}return (elem[name]=value);}if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10);}if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0;}return  -1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ");}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}function classesToArray(value){if(Array.isArray(value)){return value;}if(typeof value==="string"){return value.match(rnothtmlwhite)||[];}return [];}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}classes=classesToArray(value);if(classes.length){while((elem=this[i++ ])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){j=0;while((clazz=classes[j++ ])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}return this;},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}if(!arguments.length){return this.attr("class","");}classes=classesToArray(value);if(classes.length){while((elem=this[i++ ])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){j=0;while((clazz=classes[j++ ])){while(cur.indexOf(" "+clazz+" ")> -1){cur=cur.replace(" "+clazz+" "," ");}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}return this;},toggleClass:function(value,stateVal){var type=typeof value,isValidValue=type==="string"||Array.isArray(value);if(typeof stateVal==="boolean"&&isValidValue){return stateVal?this.addClass(value):this.removeClass(value);}if(isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}return this.each(function(){var className,i,self,classNames;if(isValidValue){i=0;self=jQuery(this);classNames=classesToArray(value);while((className=classNames[i++ ])){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while((elem=this[i++ ])){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)> -1){return true;}}return false;}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,valueIsFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"");}return ret==null?"":ret;}return;}valueIsFunction=isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}if(valueIsFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(Array.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem));}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max;}else{i=one?index:0;}for(;i<max;i++ ){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}values.push(value);}}return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i-- ){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)> -1){optionSet=true;}}if(!optionSet){elem.selectedIndex= -1;}return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(Array.isArray(value)){return (elem.checked=jQuery.inArray(jQuery(elem).val(),value)> -1);}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});support.focusin="onfocusin" in window;var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(e){e.stopPropagation();};jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,lastElement,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=lastElement=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}if(rfocusMorph.test(type+jQuery.event.triggered)){return;}if(type.indexOf(".")> -1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}if(!onlyHandlers&&!special.noBubble&&!isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}i=0;while((cur=eventPath[i++ ])&&!event.isPropagationStopped()){lastElement=cur;event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&isFunction(elem[type])&&!isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}jQuery.event.triggered=type;if(event.isPropagationStopped()){lastElement.addEventListener(type,stopPropagationCallback);}elem[type]();if(event.isPropagationStopped()){lastElement.removeEventListener(type,stopPropagationCallback);}jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}var location=window.location;var nonce=Date.now();var rquery=(/\?/);jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null;}try{xml=(new window.DOMParser()).parseFromString(data,"text/xml");}catch(e){xml=undefined;}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}return xml;};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(Array.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&toType(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value==null?"":value);};if(Array.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}return s.join("&");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();if(val==null){return null;}if(Array.isArray(val)){return jQuery.map(val,function(val){return {name:elem.name,value:val.replace(rCRLF,"\r\n")};});}return {name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(isFunction(func)){while((dataType=dataTypes[i++ ])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return !(selected=dataTypeOrTransport);}});return selected;}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}if(deep){jQuery.extend(true,target,deep);}return target;}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}if(!firstDataType){firstDataType=type;}}finalDataType=finalDataType||firstDataType;}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}return responses[finalDataType];}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}break;}}}}if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return {state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}return {state:"success",data:response};}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}match=responseHeaders[key.toLowerCase()];}return match==null?null:match;},getAllResponseHeaders:function(){return completed?responseHeadersString:null;},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value;}return this;},overrideMimeType:function(type){if(completed==null){s.mimeType=type;}return this;},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status]);}else{for(code in map){statusCode[code]=[statusCode[code],map[code]];}}}return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}done(0,finalText);return this;}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR;}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++ ===0){jQuery.event.trigger("ajaxStart");}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data&&(s.processData||typeof s.data==="string")){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data;}if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+(nonce++ )+uncached;}s.url=cacheURL+uncached;}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+");}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort();}strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done( -1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}if(completed){return jqXHR;}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}try{completed=false;transport.send(requestHeaders,done);}catch(e){if(completed){throw e;}done( -1,e);}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return;}completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer);}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!( --jQuery.active)){jQuery.event.trigger("ajaxStop");}}}return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(isFunction(data)){type=type||callback;callback=data;data=undefined;}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,"throws":true});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(isFunction(html)){html=html.call(this[0]);}wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}return elem;}).append(this);}return this;},wrapInner:function(html){if(isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var htmlIsFunction=isFunction(html);return this.each(function(i){jQuery(this).wrapAll(htmlIsFunction?html.call(this,i):html);});},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes);});return this;}});jQuery.expr.pseudos.hidden=function(elem){return !jQuery.expr.pseudos.visible(elem);};jQuery.expr.pseudos.visible=function(elem){return !!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&("withCredentials" in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return {send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}for(i in headers){xhr.setRequestHeader(i,headers[i]);}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.ontimeout=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=xhr.ontimeout=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false;}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return {send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++ ));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}if(responseContainer&&isFunction(overwritten)){overwritten(responseContainer[0]);}responseContainer=overwritten=undefined;});return "script";}});support.createHTMLDocument=(function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2;})();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return [];}if(typeof context==="boolean"){keepScripts=context;context=false;}var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base);}else{context=document;}}parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return [context.createElement(parsed[1])];}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}return jQuery.merge([],parsed.childNodes);};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off> -1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off);}if(isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")> -1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}if(isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}if("using" in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}var rect,win,elem=this[0];if(!elem){return;}if(!elem.getClientRects().length){return {top:0,left:0};}rect=elem.getBoundingClientRect();win=elem.ownerDocument.defaultView;return {top:rect.top+win.pageYOffset,left:rect.left+win.pageXOffset};},position:function(){if(!this[0]){return;}var offsetParent,offset,doc,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offset=this.offset();doc=elem.ownerDocument;offsetParent=elem.offsetParent||doc.documentElement;while(offsetParent&&(offsetParent===doc.body||offsetParent===doc.documentElement)&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.parentNode;}if(offsetParent&&offsetParent!==elem&&offsetParent.nodeType===1){parentOffset=jQuery(offsetParent).offset();parentOffset.top+=jQuery.css(offsetParent,"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent,"borderLeftWidth",true);}}return {top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win;if(isWindow(elem)){win=elem;}else if(elem.nodeType===9){win=elem.defaultView;}if(val===undefined){return win?win[prop]:elem[method];}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name];}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable);};});});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);}});jQuery.proxy=function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}if(!isFunction(fn)){return undefined;}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++ ;return proxy;};jQuery.holdReady=function(hold){if(hold){jQuery.readyWait++ ;}else{jQuery.ready(true);}};jQuery.isArray=Array.isArray;jQuery.parseJSON=JSON.parse;jQuery.nodeName=nodeName;jQuery.isFunction=isFunction;jQuery.isWindow=isWindow;jQuery.camelCase=camelCase;jQuery.type=toType;jQuery.now=Date.now;jQuery.isNumeric=function(obj){var type=jQuery.type(obj);return (type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj));};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}return jQuery;};if(!noGlobal){window.jQuery=window.$=jQuery;}return jQuery;});}
if(!JsNamespace.exist("ProductXmlProvider")){JsNamespace.declare("ProductXmlProvider",{$xmlDom:null,xmlDoms:{},loadProductXml:function(panelId,bizUrl,productCode,basisDate,productVersion,callbackFunc){var versionNo=Eco.isEmpty(productVersion)?"1":productVersion;var inputJson={"productCode":productCode,"productVersion":productVersion,"basisDate":basisDate};var structData={"inputJson":inputJson};var isUsingLocalCashe=!!u5.PQ_LOCAL_CACHE_XML;var dataUrl="URLPQZ00007";if(panelId.indexOf("PNLPQP")===0){dataUrl="URLPQZ00084";}else if(panelId.indexOf("PNLPQT")===0){dataUrl="URLPQZ00085";}else if(panelId.indexOf("PNLPQV")===0){dataUrl="URLPQZ00086";}if(callbackFunc==null){var execParam={method:"jr",programCocd:"PGM_CODE",reqType:"URL",isDBTransaction:false,sourceName:"PQ",sourceExtension:"LOC",functionName:dataUrl,urlParameters:{},structure:structData,table:{},fout:{},outFilter:{},panelId:panelId};setBusy(true,"상품전문 조회 중...");var result=execute(bizUrl,execParam);setBusy(false);if(result.OUT_DATA[0].common.resultCode!=="0"){u5.error(result,OUT_DATA[0].common.errorMessage+"상품전문조회 오류");}else{ProductXmlProvider.addXmlDom(productCode,$(result.OUT_DATA[0].outputJson.productXml));ProductXmlProvider.setCurrentXmlDom(ProductXmlProvider.getXmlDom(productCode));}}else{if(isUsingLocalCashe){var storageId=productCode+"_"+(Eco.isEmpty(basisDate)?fnGetTody():basisDate);sfmijs.getHugeStorage(storageId).selectUsingLike(function(storageIds){if(Eco.isEmpty(storageIds)){setBusy(true,"상품전문 조회 중...");execute(bizUrl,fnUrlOpt(panelId,dataUrl,"inputJson",inputJson,function(_result){setBusy(false);if(_result.OUT_DATA[0].common.resultCode!=="0"){u5.error(_result.OUT_DATA[0].common.errorMessage+"상품전문조회 오류");}else{ProductXmlProvider.addXmlDom(productCode,$(_result.OUT_DATA[0].outputJson.productXml));ProductXmlProvider.setCurrentXmlDom(ProductXmlProvider.getXmlDom(productCode));ProductXmlProvider.saveToStorage(storageId,_result.OUT_DATA[0].outputJson.productXml,callbackFunc);}}));}else{sfmijs.getHugeStorage(storageId).select(function(storageXml){ProductXmlProvider.addXmlDom(productCode,$(storageXml));ProductXmlProvider.setCurrentXmlDom(ProductXmlProvider.getXmlDom(productCode));callbackFunc();});}});}else{setBusy(true,"상품전문 조회 중...");execute(bizUrl,fnUrlOpt(panelId,dataUrl,"inputJson",inputJson,function(_result){setBusy(false);if(_result.OUT_DATA[0].common.resultCode!=="0"){u5.error(_result.OUT_DATA[0].common.errorMessage+"상품전문조회 오류");}else{ProductXmlProvider.addXmlDom(productCode,$(_result.OUT_DATA[0].outputJson.productXml));ProductXmlProvider.setCurrentXmlDom(ProductXmlProvider.getXmlDom(productCode));callbackFunc();}}));}}},saveToStorage:function(storageId,xml,callbackFunc){var storage=sfmijs.getHugeStorage(storageId);sfmijs.getHugeStorage("").selectUsingLike(function(storageIds){storageIds.forEach(function(id){if(!$.sap.endsWith(id,fnGetToday())){sfmijs.getHugeStorage(id).drop();}});});storage.insert(xml,function(){if(callbackFunc!=null){callbackFunc();}});},loadProductXmlByPath:function(productCode,path){var xmlHttp=null;if(window.ActiveXObject||"ActiveXObject" in window){xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}else{xmlHttp=new XMLHttpRequest();}xmlHttp.open("GET",path,false);xmlHttp.setRequestHeader('Access-Control-Allow-Origin','*');xmlHttp.setRequestHeader('Access-Control-Allow-Methods','GET');xmlHttp.send("");var responseXML=xmlHttp.responseXML;var xmlString=null;if(window.ActiveXObject||"ActiveXObject" in window){xmlString=responseXML.xml;}else{xmlString=(new XMLSerializer()).serializeToString(responseXML);}ProductXmlProvider.addXmlDom(productCode,$(xmlString));ProductXmlProvider.setCurrentXmlDom(ProductXmlProvider.getXmlDom(productCode));},adjustProductCode:function(productCode){return productCode.replace(/\s/g,"_");},setCurrentXmlDom:function($xmlDom){ProductXmlProvider.$xmlDom=$xmlDom;},getCurrentXmlDom:function(){return ProductXmlProvider.$xmlDom;},addXmlDom:function(productCode,$xmlDom){ProductXmlProvider.xmlDoms["KEY_"+ProductXmlProvider.adjustProductCode(productCode)]=$xmlDom;},getXmlDom:function(productCode){return ProductXmlProvider.xmlDoms["KEY_"+ProductXmlProvider.adjustProductCode(productCode)];}});}
(function(root,factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof module==='object'&&module.exports){module.exports=factory();}else{root.Papa=factory();}}(this,function(){'use strict';var global=Function('return this')();var IS_WORKER=!global.document&&!!global.postMessage,IS_PAPA_WORKER=IS_WORKER&&/(\?|&)papaworker(=|&|$)/.test(global.location.search),LOADED_SYNC=false,AUTO_SCRIPT_PATH;var workers={},workerIdCounter=0;var Papa={};Papa.parse=CsvToJson;Papa.unparse=JsonToCsv;Papa.RECORD_SEP=String.fromCharCode(30);Papa.UNIT_SEP=String.fromCharCode(31);Papa.BYTE_ORDER_MARK='\ufeff';Papa.BAD_DELIMITERS=['\r','\n','"',Papa.BYTE_ORDER_MARK];Papa.WORKERS_SUPPORTED=!IS_WORKER&&!!global.Worker;Papa.SCRIPT_PATH=null;Papa.LocalChunkSize=1024*1024*10;Papa.RemoteChunkSize=1024*1024*5;Papa.DefaultDelimiter=',';Papa.Parser=Parser;Papa.ParserHandle=ParserHandle;Papa.NetworkStreamer=NetworkStreamer;Papa.FileStreamer=FileStreamer;Papa.StringStreamer=StringStreamer;if(global.jQuery){var $=global.jQuery;$.fn.parse=function(options){var config=options.config||{};var queue=[];this.each(function(idx){var supported=$(this).prop('tagName').toUpperCase()==='INPUT'&&$(this).attr('type').toLowerCase()==='file'&&global.FileReader;if(!supported||!this.files||this.files.length===0){return true;}for(var i=0;i<this.files.length;i++ ){queue.push({file:this.files[i],inputElem:this,instanceConfig:$.extend({},config)});}});parseNextFile();return this;function parseNextFile(){if(queue.length===0){if(isFunction(options.complete)){options.complete();}return;}var f=queue[0];if(isFunction(options.before)){var returned=options.before(f.file,f.inputElem);if(typeof returned==='object'){if(returned.action==='abort'){error('AbortError',f.file,f.inputElem,returned.reason);return;}else if(returned.action==='skip'){fileComplete();return;}else if(typeof returned.config==='object'){f.instanceConfig=$.extend(f.instanceConfig,returned.config);}}else if(returned==='skip'){fileComplete();return;}}var userCompleteFunc=f.instanceConfig.complete;f.instanceConfig.complete=function(results){if(isFunction(userCompleteFunc)){userCompleteFunc(results,f.file,f.inputElem);}fileComplete();};Papa.parse(f.file,f.instanceConfig);}function error(name,file,elem,reason){if(isFunction(options.error)){options.error({name:name},file,elem,reason);}}function fileComplete(){queue.splice(0,1);parseNextFile();}};}if(IS_PAPA_WORKER){global.onmessage=workerThreadReceivedMessage;}else if(Papa.WORKERS_SUPPORTED){AUTO_SCRIPT_PATH=getScriptPath();if(!document.body){LOADED_SYNC=true;}else{document.addEventListener('DOMContentLoaded',function(){LOADED_SYNC=true;},true);}}function CsvToJson(_input,_config){_config=_config||{};_config.dynamicTyping=_config.dynamicTyping||false;if(_config.worker&&Papa.WORKERS_SUPPORTED){var w=newWorker();w.userStep=_config.step;w.userChunk=_config.chunk;w.userComplete=_config.complete;w.userError=_config.error;_config.step=isFunction(_config.step);_config.chunk=isFunction(_config.chunk);_config.complete=isFunction(_config.complete);_config.error=isFunction(_config.error);delete _config.worker;w.postMessage({input:_input,config:_config,workerId:w.id});return;}var streamer=null;if(typeof _input==='string'){if(_config.download){streamer=new NetworkStreamer(_config);}else{streamer=new StringStreamer(_config);}}else if((global.File&&_input instanceof File)||_input instanceof Object){streamer=new FileStreamer(_config);}return streamer.stream(_input);}function JsonToCsv(_input,_config){var _output='';var _fields=[];var _quotes=false;var _delimiter=',';var _newline='\r\n';unpackConfig();if(typeof _input==='string'){_input=JSON.parse(_input);}if(_input instanceof Array){if(!_input.length||_input[0] instanceof Array){return serialize(null,_input);}else if(typeof _input[0]==='object'){return serialize(objectKeys(_input[0]),_input);}}else if(typeof _input==='object'){if(typeof _input.data==='string'){_input.data=JSON.parse(_input.data);}if(_input.data instanceof Array){if(!_input.fields){_input.fields=_input.meta&&_input.meta.fields;}if(!_input.fields){_input.fields=_input.data[0] instanceof Array?_input.fields:objectKeys(_input.data[0]);}if(!(_input.data[0] instanceof Array)&&typeof _input.data[0]!=='object'){_input.data=[_input.data];}}return serialize(_input.fields||[],_input.data||[]);}throw 'exception: Unable to serialize unrecognized input';function unpackConfig(){if(typeof _config!=='object'){return;}if(typeof _config.delimiter==='string'&&_config.delimiter.length===1&&Papa.BAD_DELIMITERS.indexOf(_config.delimiter)=== -1){_delimiter=_config.delimiter;}if(typeof _config.quotes==='boolean'||_config.quotes instanceof Array){_quotes=_config.quotes;}if(typeof _config.newline==='string'){_newline=_config.newline;}}function objectKeys(obj){if(typeof obj!=='object'){return [];}var keys=[];for(var key in obj){keys.push(key);}return keys;}function serialize(fields,data){var csv='';if(typeof fields==='string'){fields=JSON.parse(fields);}if(typeof data==='string'){data=JSON.parse(data);}var hasHeader=fields instanceof Array&&fields.length>0;var dataKeyedByField=!(data[0] instanceof Array);if(hasHeader){for(var i=0;i<fields.length;i++ ){if(i>0){csv+=_delimiter;}csv+=safe(fields[i],i);}if(data.length>0){csv+=_newline;}}for(var row=0;row<data.length;row++ ){var maxCol=hasHeader?fields.length:data[row].length;for(var col=0;col<maxCol;col++ ){if(col>0){csv+=_delimiter;}var colIdx=hasHeader&&dataKeyedByField?fields[col]:col;csv+=safe(data[row][colIdx],col);}if(row<data.length-1){csv+=_newline;}}return csv;}function safe(str,col){if(typeof str==='undefined'||str===null){return '';}str=str.toString().replace(/"/g,'""');var needsQuotes=(typeof _quotes==='boolean'&&_quotes)||(_quotes instanceof Array&&_quotes[col])||hasAny(str,Papa.BAD_DELIMITERS)||str.indexOf(_delimiter)> -1||str.charAt(0)===' '||str.charAt(str.length-1)===' ';return needsQuotes?'"'+str+'"':str;}function hasAny(str,substrings){for(var i=0;i<substrings.length;i++ ){if(str.indexOf(substrings[i])> -1){return true;}}return false;}}function ChunkStreamer(config){this._handle=null;this._paused=false;this._finished=false;this._input=null;this._baseIndex=0;this._partialLine='';this._rowCount=0;this._start=0;this._nextChunk=null;this.isFirstChunk=true;this._completeResults={data:[],errors:[],meta:{}};replaceConfig.call(this,config);this.parseChunk=function(chunk){if(this.isFirstChunk&&isFunction(this._config.beforeFirstChunk)){var modifiedChunk=this._config.beforeFirstChunk(chunk);if(modifiedChunk!==undefined){chunk=modifiedChunk;}}this.isFirstChunk=false;var aggregate=this._partialLine+chunk;this._partialLine='';var results=this._handle.parse(aggregate,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){return;}var lastIndex=results.meta.cursor;if(!this._finished){this._partialLine=aggregate.substring(lastIndex-this._baseIndex);this._baseIndex=lastIndex;}if(results&&results.data){this._rowCount+=results.data.length;}var finishedIncludingPreview=this._finished||(this._config.preview&&this._rowCount>=this._config.preview);if(IS_PAPA_WORKER){global.postMessage({results:results,workerId:Papa.WORKER_ID,finished:finishedIncludingPreview});}else if(isFunction(this._config.chunk)){this._config.chunk(results,this._handle);if(this._paused){return;}results=undefined;this._completeResults=undefined;}if(!this._config.step&&!this._config.chunk){this._completeResults.data=this._completeResults.data.concat(results.data);this._completeResults.errors=this._completeResults.errors.concat(results.errors);this._completeResults.meta=results.meta;}if(finishedIncludingPreview&&isFunction(this._config.complete)&&(!results||!results.meta.aborted)){this._config.complete(this._completeResults,this._input);}if(!finishedIncludingPreview&&(!results||!results.meta.paused)){this._nextChunk();}return results;};this._sendError=function(error){if(isFunction(this._config.error)){this._config.error(error);}else if(IS_PAPA_WORKER&&this._config.error){global.postMessage({workerId:Papa.WORKER_ID,error:error,finished:false});}};function replaceConfig(config){var configCopy=copy(config);configCopy.chunkSize=parseInt(configCopy.chunkSize);if(!config.step&&!config.chunk){configCopy.chunkSize=null;}this._handle=new ParserHandle(configCopy);this._handle.streamer=this;this._config=configCopy;}}function NetworkStreamer(config){config=config||{};if(!config.chunkSize){config.chunkSize=Papa.RemoteChunkSize;}ChunkStreamer.call(this,config);var xhr;if(IS_WORKER){this._nextChunk=function(){this._readChunk();this._chunkLoaded();};}else{this._nextChunk=function(){this._readChunk();};}this.stream=function(url){this._input=url;this._nextChunk();};this._readChunk=function(){if(this._finished){this._chunkLoaded();return;}xhr=new XMLHttpRequest();if(this._config.withCredentials){xhr.withCredentials=this._config.withCredentials;}if(!IS_WORKER){xhr.onload=bindFunction(this._chunkLoaded,this);xhr.onerror=bindFunction(this._chunkError,this);}xhr.open('GET',this._input,!IS_WORKER);if(this._config.chunkSize){var end=this._start+this._config.chunkSize-1;xhr.setRequestHeader('Range','bytes='+this._start+'-'+end);xhr.setRequestHeader('If-None-Match','webkit-no-cache');}try{xhr.send();}catch(err){this._chunkError(err.message);}if(IS_WORKER&&xhr.status===0){this._chunkError();}else{this._start+=this._config.chunkSize;}};this._chunkLoaded=function(){if(xhr.readyState!=4){return;}if(xhr.status<200||xhr.status>=400){this._chunkError();return;}this._finished=!this._config.chunkSize||this._start>getFileSize(xhr);this.parseChunk(xhr.responseText);};this._chunkError=function(errorMessage){var errorText=xhr.statusText||errorMessage;this._sendError(errorText);};function getFileSize(xhr){var contentRange=xhr.getResponseHeader('Content-Range');return parseInt(contentRange.substr(contentRange.lastIndexOf('/')+1));}}NetworkStreamer.prototype=Object.create(ChunkStreamer.prototype);NetworkStreamer.prototype.constructor=NetworkStreamer;function FileStreamer(config){config=config||{};if(!config.chunkSize){config.chunkSize=Papa.LocalChunkSize;}ChunkStreamer.call(this,config);var reader,slice;var usingAsyncReader=typeof FileReader!=='undefined';this.stream=function(file){this._input=file;slice=file.slice||file.webkitSlice||file.mozSlice;if(usingAsyncReader){reader=new FileReader();reader.onload=bindFunction(this._chunkLoaded,this);reader.onerror=bindFunction(this._chunkError,this);}else{reader=new FileReaderSync();}this._nextChunk();};this._nextChunk=function(){if(!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)){this._readChunk();}};this._readChunk=function(){var input=this._input;if(this._config.chunkSize){var end=Math.min(this._start+this._config.chunkSize,this._input.size);input=slice.call(input,this._start,end);}var txt=reader.readAsText(input,this._config.encoding);if(!usingAsyncReader){this._chunkLoaded({target:{result:txt}});}};this._chunkLoaded=function(event){this._start+=this._config.chunkSize;this._finished=!this._config.chunkSize||this._start>=this._input.size;this.parseChunk(event.target.result);};this._chunkError=function(){this._sendError(reader.error);};}FileStreamer.prototype=Object.create(ChunkStreamer.prototype);FileStreamer.prototype.constructor=FileStreamer;function StringStreamer(config){config=config||{};ChunkStreamer.call(this,config);var string;var remaining;this.stream=function(s){string=s;remaining=s;return this._nextChunk();};this._nextChunk=function(){if(this._finished){return;}var size=this._config.chunkSize;var chunk=size?remaining.substr(0,size):remaining;remaining=size?remaining.substr(size):'';this._finished=!remaining;return this.parseChunk(chunk);};}StringStreamer.prototype=Object.create(StringStreamer.prototype);StringStreamer.prototype.constructor=StringStreamer;function ParserHandle(_config){var FLOAT=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;var self=this;var _stepCounter=0;var _input;var _parser;var _paused=false;var _aborted=false;var _delimiterError;var _fields=[];var _results={data:[],errors:[],meta:{}};if(isFunction(_config.step)){var userStep=_config.step;_config.step=function(results){_results=results;if(needsHeaderRow()){processResults();}else{processResults();if(_results.data.length===0){return;}_stepCounter+=results.data.length;if(_config.preview&&_stepCounter>_config.preview){_parser.abort();}else{userStep(_results,self);}}};}this.parse=function(input,baseIndex,ignoreLastRow){if(!_config.newline){_config.newline=guessLineEndings(input);}_delimiterError=false;if(!_config.delimiter){var delimGuess=guessDelimiter(input,_config.newline);if(delimGuess.successful){_config.delimiter=delimGuess.bestDelimiter;}else{_delimiterError=true;_config.delimiter=Papa.DefaultDelimiter;}_results.meta.delimiter=_config.delimiter;}var parserConfig=copy(_config);if(_config.preview&&_config.header){parserConfig.preview++ ;}_input=input;_parser=new Parser(parserConfig);_results=_parser.parse(_input,baseIndex,ignoreLastRow);processResults();return _paused?{meta:{paused:true}}:(_results||{meta:{paused:false}});};this.paused=function(){return _paused;};this.pause=function(){_paused=true;_parser.abort();_input=_input.substr(_parser.getCharIndex());};this.resume=function(){_paused=false;self.streamer.parseChunk(_input);};this.aborted=function(){return _aborted;};this.abort=function(){_aborted=true;_parser.abort();_results.meta.aborted=true;if(isFunction(_config.complete)){_config.complete(_results);}_input='';};function processResults(){if(_results&&_delimiterError){addError('Delimiter','UndetectableDelimiter','Unable to auto-detect delimiting character; defaulted to \''+Papa.DefaultDelimiter+'\'');_delimiterError=false;}if(_config.skipEmptyLines){for(var i=0;i<_results.data.length;i++ ){if(_results.data[i].length===1&&_results.data[i][0]===''){_results.data.splice(i-- ,1);}}}if(needsHeaderRow()){fillHeaderFields();}return applyHeaderAndDynamicTyping();}function needsHeaderRow(){return _config.header&&_fields.length===0;}function fillHeaderFields(){if(!_results){return;}for(var i=0;needsHeaderRow()&&i<_results.data.length;i++ ){for(var j=0;j<_results.data[i].length;j++ ){_fields.push(_results.data[i][j]);}}_results.data.splice(0,1);}function parseDynamic(field,value){if((_config.dynamicTyping[field]||_config.dynamicTyping)===true){if(value==='true'||value==='TRUE'){return true;}else if(value==='false'||value==='FALSE'){return false;}else{return tryParseFloat(value);}}return value;}function applyHeaderAndDynamicTyping(){if(!_results||(!_config.header&&!_config.dynamicTyping)){return _results;}for(var i=0;i<_results.data.length;i++ ){var row=_config.header?{}:[];for(var j=0;j<_results.data[i].length;j++ ){var field=j;var value=_results.data[i][j];if(_config.header){field=j>=_fields.length?'__parsed_extra':_fields[j];}value=parseDynamic(field,value);if(field==='__parsed_extra'){row[field]=row[field]||[];row[field].push(value);}else{row[field]=value;}}_results.data[i]=row;if(_config.header){if(j>_fields.length){addError('FieldMismatch','TooManyFields','Too many fields: expected '+_fields.length+' fields but parsed '+j,i);}else if(j<_fields.length){addError('FieldMismatch','TooFewFields','Too few fields: expected '+_fields.length+' fields but parsed '+j,i);}}}if(_config.header&&_results.meta){_results.meta.fields=_fields;}return _results;}function guessDelimiter(input,newline){var delimChoices=[',','\t','|',';',Papa.RECORD_SEP,Papa.UNIT_SEP];var bestDelim,bestDelta,fieldCountPrevRow;for(var i=0;i<delimChoices.length;i++ ){var delim=delimChoices[i];var delta=0,avgFieldCount=0;fieldCountPrevRow=undefined;var preview=new Parser({delimiter:delim,newline:newline,preview:10}).parse(input);for(var j=0;j<preview.data.length;j++ ){var fieldCount=preview.data[j].length;avgFieldCount+=fieldCount;if(typeof fieldCountPrevRow==='undefined'){fieldCountPrevRow=fieldCount;continue;}else if(fieldCount>1){delta+=Math.abs(fieldCount-fieldCountPrevRow);fieldCountPrevRow=fieldCount;}}if(preview.data.length>0){avgFieldCount/=preview.data.length;}if((typeof bestDelta==='undefined'||delta<bestDelta)&&avgFieldCount>1.99){bestDelta=delta;bestDelim=delim;}}_config.delimiter=bestDelim;return {successful:!!bestDelim,bestDelimiter:bestDelim};}function guessLineEndings(input){input=input.substr(0,1024*1024);var r=input.split('\r');var n=input.split('\n');var nAppearsFirst=(n.length>1&&n[0].length<r[0].length);if(r.length===1||nAppearsFirst){return '\n';}var numWithN=0;for(var i=0;i<r.length;i++ ){if(r[i][0]==='\n'){numWithN++ ;}}return numWithN>=r.length/2?'\r\n':'\r';}function tryParseFloat(val){var isNumber=FLOAT.test(val);return isNumber?parseFloat(val):val;}function addError(type,code,msg,row){_results.errors.push({type:type,code:code,message:msg,row:row});}}function Parser(config){config=config||{};var delim=config.delimiter;var newline=config.newline;var comments=config.comments;var step=config.step;var preview=config.preview;var fastMode=config.fastMode;var quoteChar=config.quoteChar||'"';if(typeof delim!=='string'||Papa.BAD_DELIMITERS.indexOf(delim)> -1){delim=',';}if(comments===delim){throw 'Comment character same as delimiter';}else if(comments===true){comments='#';}else if(typeof comments!=='string'||Papa.BAD_DELIMITERS.indexOf(comments)> -1){comments=false;}if(newline!='\n'&&newline!='\r'&&newline!='\r\n'){newline='\n';}var cursor=0;var aborted=false;this.parse=function(input,baseIndex,ignoreLastRow){if(typeof input!=='string'){throw 'Input must be a string';}var inputLen=input.length,delimLen=delim.length,newlineLen=newline.length,commentsLen=comments.length;var stepIsFunction=typeof step==='function';cursor=0;var data=[],errors=[],row=[],lastCursor=0;if(!input){return returnable();}if(fastMode||(fastMode!==false&&input.indexOf(quoteChar)=== -1)){var rows=input.split(newline);for(var i=0;i<rows.length;i++ ){var row=rows[i];cursor+=row.length;if(i!==rows.length-1){cursor+=newline.length;}else if(ignoreLastRow){return returnable();}if(comments&&row.substr(0,commentsLen)===comments){continue;}if(stepIsFunction){data=[];pushRow(row.split(delim));doStep();if(aborted){return returnable();}}else{pushRow(row.split(delim));}if(preview&&i>=preview){data=data.slice(0,preview);return returnable(true);}}return returnable();}var nextDelim=input.indexOf(delim,cursor);var nextNewline=input.indexOf(newline,cursor);var quoteCharRegex=new RegExp(quoteChar+quoteChar,'g');for(;;){if(input[cursor]===quoteChar){var quoteSearch=cursor;cursor++ ;for(;;){var quoteSearch=input.indexOf(quoteChar,quoteSearch+1);if(quoteSearch=== -1){if(!ignoreLastRow){errors.push({type:'Quotes',code:'MissingQuotes',message:'Quoted field unterminated',row:data.length,index:cursor});}return finish();}if(quoteSearch===inputLen-1){var value=input.substring(cursor,quoteSearch).replace(quoteCharRegex,'"');return finish(value);}if(input[quoteSearch+1]===quoteChar){quoteSearch++ ;continue;}if(input[quoteSearch+1]===delim){row.push(input.substring(cursor,quoteSearch).replace(quoteCharRegex,'"'));cursor=quoteSearch+1+delimLen;nextDelim=input.indexOf(delim,cursor);nextNewline=input.indexOf(newline,cursor);break;}if(input.substr(quoteSearch+1,newlineLen)===newline){row.push(input.substring(cursor,quoteSearch).replace(quoteCharRegex,'"'));saveRow(quoteSearch+1+newlineLen);nextDelim=input.indexOf(delim,cursor);if(stepIsFunction){doStep();if(aborted){return returnable();}}if(preview&&data.length>=preview){return returnable(true);}break;}}continue;}if(comments&&row.length===0&&input.substr(cursor,commentsLen)===comments){if(nextNewline=== -1){return returnable();}cursor=nextNewline+newlineLen;nextNewline=input.indexOf(newline,cursor);nextDelim=input.indexOf(delim,cursor);continue;}if(nextDelim!== -1&&(nextDelim<nextNewline||nextNewline=== -1)){row.push(input.substring(cursor,nextDelim));cursor=nextDelim+delimLen;nextDelim=input.indexOf(delim,cursor);continue;}if(nextNewline!== -1){row.push(input.substring(cursor,nextNewline));saveRow(nextNewline+newlineLen);if(stepIsFunction){doStep();if(aborted){return returnable();}}if(preview&&data.length>=preview){return returnable(true);}continue;}break;}return finish();function pushRow(row){data.push(row);lastCursor=cursor;}function finish(value){if(ignoreLastRow){return returnable();}if(typeof value==='undefined'){value=input.substr(cursor);}row.push(value);cursor=inputLen;pushRow(row);if(stepIsFunction){doStep();}return returnable();}function saveRow(newCursor){cursor=newCursor;pushRow(row);row=[];nextNewline=input.indexOf(newline,cursor);}function returnable(stopped){return {data:data,errors:errors,meta:{delimiter:delim,linebreak:newline,aborted:aborted,truncated:!!stopped,cursor:lastCursor+(baseIndex||0)}};}function doStep(){step(returnable());data=[],errors=[];}};this.abort=function(){aborted=true;};this.getCharIndex=function(){return cursor;};}function getScriptPath(){var scripts=document.getElementsByTagName('script');return scripts.length?scripts[scripts.length-1].src:'';}function newWorker(){if(!Papa.WORKERS_SUPPORTED){return false;}if(!LOADED_SYNC&&Papa.SCRIPT_PATH===null){throw new Error('Script path cannot be determined automatically when Papa Parse is loaded asynchronously. '+'You need to set Papa.SCRIPT_PATH manually.');}var workerUrl=Papa.SCRIPT_PATH||AUTO_SCRIPT_PATH;workerUrl+=(workerUrl.indexOf('?')!== -1?'&':'?')+'papaworker';var w=new global.Worker(workerUrl);w.onmessage=mainThreadReceivedMessage;w.id=workerIdCounter++ ;workers[w.id]=w;return w;}function mainThreadReceivedMessage(e){var msg=e.data;var worker=workers[msg.workerId];var aborted=false;if(msg.error){worker.userError(msg.error,msg.file);}else if(msg.results&&msg.results.data){var abort=function(){aborted=true;completeWorker(msg.workerId,{data:[],errors:[],meta:{aborted:true}});};var handle={abort:abort,pause:notImplemented,resume:notImplemented};if(isFunction(worker.userStep)){for(var i=0;i<msg.results.data.length;i++ ){worker.userStep({data:[msg.results.data[i]],errors:msg.results.errors,meta:msg.results.meta},handle);if(aborted){break;}}delete msg.results;}else if(isFunction(worker.userChunk)){worker.userChunk(msg.results,handle,msg.file);delete msg.results;}}if(msg.finished&&!aborted){completeWorker(msg.workerId,msg.results);}}function completeWorker(workerId,results){var worker=workers[workerId];if(isFunction(worker.userComplete)){worker.userComplete(results);}worker.terminate();delete workers[workerId];}function notImplemented(){throw 'Not implemented.';}function workerThreadReceivedMessage(e){var msg=e.data;if(typeof Papa.WORKER_ID==='undefined'&&msg){Papa.WORKER_ID=msg.workerId;}if(typeof msg.input==='string'){global.postMessage({workerId:Papa.WORKER_ID,results:Papa.parse(msg.input,msg.config),finished:true});}else if((global.File&&msg.input instanceof File)||msg.input instanceof Object){var results=Papa.parse(msg.input,msg.config);if(results){global.postMessage({workerId:Papa.WORKER_ID,results:results,finished:true});}}}function copy(obj){if(typeof obj!=='object'){return obj;}var cpy=obj instanceof Array?[]:{};for(var key in obj){cpy[key]=copy(obj[key]);}return cpy;}function bindFunction(f,self){return function(){f.apply(self,arguments);};}function isFunction(func){return typeof func==='function';}return Papa;}));
nexacro.TransactionItem.prototype._parseDSParam=function(paramStr){if(!paramStr){return undefined;}var list=[];var expr=/([a-zA-Z가-힣_$][a-zA-Z가-힣0-9_$]*)\s*=\s*([a-zA-Z가-힣_$][a-zA-Z가-힣0-9_$]*(\.?[a-zA-Z가-힣0-9_$]*)*(?:\:[aAuUnN])?)/g;var splitedParams=paramStr.match(expr);if(!splitedParams||splitedParams.length==0){return undefined;}var splitedParamCnt=splitedParams.length;for(var i=0;i<splitedParamCnt;i++ ){var param=splitedParams[i].split("=");var key=param[0].trim();var value=param[1].trim();var bduplicate=false;for(var j=0;j<i;j++ ){var checkparam=splitedParams[j].split("=");var checkkey=checkparam[0].trim();if(key==checkkey){bduplicate=true;}}if(bduplicate){i++ ;return false;}var type="N";var index=value.indexOf(":");if(index> -1){type=value.substring(index+1);value=value.substring(0,index);}var paramObj={lval:key,rval:value,saveType:type};list.push(paramObj);}return list;};nexacro.TransactionItem.prototype._serializeData=function(){if(this.datatype==1){return this.__serializeBIN();}else if(this.datatype==2){return this.__serializeSSV();}else if(this.datatype==4){return this.__serializeJSON();}else{return this.__serializeXML();}};nexacro.TransactionItem.prototype._deserializeData=function(strRecvData,bPending){if(!strRecvData){return [[ -1,"Stream Data is null!"],[],new nexacro.Collection()];}if(strRecvData.charAt(0)==" "){strRecvData=strRecvData.trim();}var fstr=strRecvData.substring(0,3);if(fstr=="SSV"){return this.__deserializeSSV(strRecvData);}else if(fstr=="CSV"){return this.__deserializeCSV(strRecvData);}else if(fstr=="PPX"){return this.__deserializePPX(strRecvData);}else if(this.datatype==4){return this.__deserializeJSON(strRecvData);}else{return this.__deserializeXML(strRecvData);}};nexacro.TransactionItem.prototype.__serializeJSON=function(){var json={};var id,ds;var datasetParams=this.inputDatasets;if(datasetParams&&datasetParams.length){json["request"]={};var datasetCnt=datasetParams.length;for(var i=0;i<datasetCnt;i++ ){var id=datasetParams[i].rval;var ds=this.context._getDatasetObject(id);if(ds){json["request"][datasetParams[i].lval]=ds.saveJSON(datasetParams[i].saveType);}}}return JSON.stringify(json);};nexacro.TransactionItem.prototype.__deserializeJSON=function(strRecvData,doc){var parameters=[];var datasets=new nexacro.Collection();var code=0;var message="SUCCESS";var errorinfo=[code,message];doc=strRecvData.trim();if(doc){doc=JSON.parse(doc);}nexacro._getCommDataFromObj(doc,this);return [errorinfo,parameters,datasets];};nexacro._getCommDataFromObj=function(doc,target){var variablelist=[];var datasetlist=[];var form=target.context;var outDatasets=target.outputDatasets;var datasetObjects=[];if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(var i=0;i<outDataCnt;i++ ){var param=outDatasets[i];datasetObject=form._getDatasetObject(param.lval);datasetObject.rowposition= -1;datasetObject.loadJSON(nexacro._queryJSON(doc,param.rval));datasetObjects[i]=datasetObject;}}return [variablelist,datasetlist];};nexacro._queryJSON=function(obj,query){if(!query){return obj;}if(obj instanceof Array){return obj;}var queryTerms=query.split(".");var result;var target=obj;for(var i=0;i<queryTerms.length;i++ ){result=target[queryTerms[i]];target=result;}return result;};nexacro.Dataset.prototype.loadJSON=function(data){var dataset=this;if(data.constructor===Array){var results=Papa.unparse(data,{header:true});function convertCSVtoDatasetCSV(csvString){var CRLF=String.fromCharCode(13)+String.fromCharCode(10);var headerString=csvString.substr(0,csvString.indexOf(CRLF));var bodyString=csvString.substr(csvString.indexOf(CRLF)+CRLF.length);var columnInfos=headerString.split(",");var headerInfo="Dataset:"+dataset.name+CRLF;for(var i=0,len=columnInfos.length;i<len;i++ ){headerInfo+=columnInfos[i]+":String(256),";}return headerInfo+CRLF+bodyString;}var csvData=convertCSVtoDatasetCSV(results);dataset.loadCSV(csvData,true);results=undefined;csvData=undefined;}else{var columns=[];if(dataset.useclientlayout){dataset.clearData();for(i=0;i<dataset.getColCount();i++ ){columns[i]=dataset.getColumnInfo(i);}}else{dataset.clear();var firstdata=data;for(a in firstdata){if(firstdata[a] instanceof Object){continue;}var colinfo=new ColumnInfo(a,"STRING",256);dataset.addColumn(a,"STRING",256);columns.push(colinfo);}}var row=dataset.addRow();columns.forEach(function(curCol){dataset.setColumn(row,curCol.name,nexacro._queryJSON(data,curCol.name));});}dataset.applyChange();dataset.set_rowposition(0);};nexacro.Dataset.prototype.getRow=function(rowIndex){if(rowIndex>=this.getRowCount()){return undefined;}var columns=[];var data={};for(var i=0;i<this.getColCount();i++ ){columns[i]=this.getColumnInfo(i).name;}for(var j=0;j<columns.length;j++ ){data[columns[j]]=this.getColumn(rowIndex,columns[j]);}return data;};nexacro.Dataset.prototype.getJSON=function(){var i=0,len=this.getRowCount();var data=[len];for(i=0;i<len;i++ ){var rowData=this.getRow(i);if(rowData){data[i]=rowData;}}return data;};nexacro.Dataset.prototype.saveJSON=function(type){var rows=[];var saveType="N";switch(type){case "A":case "a":case "all":case "All":saveType="A";break;case "U":case "u":case "update":case "Update":saveType="U";break;case "N":case "n":case "normal":case "Normal":saveType="N";break;case "V":case "v":case "view":case "View":saveType="V";break;}var i,n;function __getJSON_row_data(colinfos,rowData){var jsonData={};jsonData["rowtype"]=rowData._rtype;for(var i=0,len=rowData.length;i<len;i++ ){jsonData[colinfos[i].name]=rowData[i];}return jsonData;}n=0;var rawRecords=this._rawRecords;var colinfos=this.colinfos;if(rawRecords){n=rawRecords.length;}var viewRec=this._viewRecords;var viewcount=viewRec?viewRec.length:0;if(n){var rowData;if(saveType=="A"){i=0;function getJSON_row_loop1(i){rowData=rawRecords[i];if(rowData._rtype==1||rowData._rtype==2||rowData._rtype==4||rowData._rtype==8){rows.push(__getJSON_row_data(colinfos,rowData));}i++ ;}nexacro.__forLoop(this,i,n,getJSON_row_loop1);}else if(saveType=="U"){i=0;function getJSON_row_loop2(i){rowData=rawRecords[i];if(rowData._rtype==2||rowData._rtype==4||rowData._rtype==8){rows.push(__getJSON_row_data(colinfos,rowData));}i++ ;return false;}nexacro.__forLoop(this,i,n,getJSON_row_loop2);}else if(saveType=="V"){i=0;function getJSON_row_loop4(i){rowData=viewRec[i];rows.push(__getJSON_row_data(colinfos,rowData));i++ ;return false;}nexacro.__forLoop(this,i,viewcount,getJSON_row_loop4);}else{i=0;function getJSON_row_loop3(i){rowData=rawRecords[i];if(rowData._rtype==1||rowData._rtype==2||rowData._rtype==4){rows.push(__getJSON_row_data(colinfos,rowData));}i++ ;return false;}nexacro.__forLoop(this,i,n,getJSON_row_loop3);}}rawRecords=undefined;colinfos=undefined;viewRec=undefined;viewcount=undefined;return rows;};
nexacro.Form.prototype.ajax=function(url,settings){var createCORSRequest=function(method,url){var xhr=new XMLHttpRequest();if(xhr){xhr.open(method,url,true);}else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(method,url);}else{xhr=null;}return xhr;};var pForm=this;var method=settings["method"]?settings["method"]:"GET";var xhr=createCORSRequest(method,encodeURI(url));var sParam=JSON.stringify(settings["param"]);var sDataType=settings["dataType"];var callback=settings["callback"];try{xhr.timeout=nexacro.getEnvironment().httptimeout*1000;xhr.ontimeout=function(e){if(typeof callback=="function"){callback.call(pForm, -1,"Request Timeout");}else if(typeof callback=="string"){pForm[callback].call(pForm, -1,"Request Timeout");}};}catch(e){}var reqEvt=function(){var response;if(this.readyState===4&&this.status===200){if(sDataType=="JSON"){response=JSON.parse(this.responseText);}else{response=this.responseText;}if(typeof callback=="function"){callback.call(pForm,0,response);}else if(typeof callback=="string"){pForm[callback].call(pForm,0,response);}}};if(window.XDomainRequest){xhr.onload=reqEvt;}else{xhr.onreadystatechange=reqEvt;}xhr.send(sParam);};if(nexacro._Browser!="Runtime"){if(window.console){window.trace=window.console.log;var console=window.console||{log:function(){}};}}
var pForm=nexacro.Form.prototype;pForm.gfnOpenMenu=function(sMenuId,args,argsComp){var objApp=nexacro.getApplication();var gWorkFrameSet=objApp.mainframe.VFrameSet.HFrameSet.VFrameSet00.Work;if(objApp.mainframe.VFrameSet.separatesize!="0,64,*"){objApp.mainframe.VFrameSet.set_separatesize("0,64,*");}var objMenuDs=objApp.gdsMenu;var nRow=objMenuDs.findRow("MENU_ID",sMenuId);if(nRow<0){alert("해당 메뉴 ID가 존재하지 않습니다.");return false;}var objChildFrame=gWorkFrameSet[sMenuId];var nLength=gWorkFrameSet.frames.length;for(var i=0;i<nLength;i++ ){gWorkFrameSet.frames[i].set_showtitlebar(false);gWorkFrameSet.getActiveFrame().set_openstatus("maximize");}if(!this.gfnIsNull(objChildFrame)){objChildFrame.setFocus();}else{if(gWorkFrameSet.frames.length>9){alert("메뉴를 10개이상 오픈할 수 없습니다.");return false;}objApp.mainframe.VFrameSet.HFrameSet.VFrameSet00.Tab.form.fnOpenTabMenu(sMenuId,objMenuDs.getColumn(nRow,"MENU_NM"));objChildFrame=new ChildFrame();objChildFrame.init(sMenuId,0,0,1000,622,null,null,"frame::Work.xfdl");objChildFrame.set_showtitlebar(false);objChildFrame.set_resizable(true);objChildFrame.set_titletext(objMenuDs.getColumn(nRow,"MENU_NM"));objChildFrame.set_showcascadetitletext(false);objChildFrame.set_openstatus("maximize");objChildFrame.arguments=[];objChildFrame.arguments["MENU_ID"]=sMenuId;objChildFrame.arguments["MENU_NM"]=objMenuDs.getColumn(nRow,"MENU_NM");objChildFrame.arguments["MENU_URL"]=objMenuDs.getColumn(nRow,"MENU_URL");objChildFrame.arguments["FORM_ARGS"]=args;objChildFrame.arguments["FORM_ARGS_COMP"]=argsComp;objChildFrame.arguments["MENU_ROW"]=nRow;gWorkFrameSet.addChild(sMenuId,objChildFrame);objChildFrame.show();objChildFrame.setFocus();}};pForm.gfnCloseMenu=function(sMenuId){var objApp=nexacro.getApplication();var gWorkFrameSet=objApp.mainframe.VFrameSet.HFrameSet.VFrameSet00.Work;if(!gWorkFrameSet[sMenuId]){return;}var objChild=gWorkFrameSet.removeChild(sMenuId);objChild.destroy();objChild=null;if(this.gfnIsNull(gWorkFrameSet.frames[sMenuId])){if(gWorkFrameSet.frames.length>0){gWorkFrameSet.frames[0].setFocus();}}var btnNm="div"+sMenuId;objApp.mainframe.VFrameSet.HFrameSet.VFrameSet00.Tab.form.divButtonList.form.removeChild(btnNm);objApp.mainframe.VFrameSet.HFrameSet.VFrameSet00.Tab.form.fnRearrange();if(gWorkFrameSet.length==0){}};pForm.gfnCreateMegaMenu=function(oForm){var objCompId="pdivMegaMenu";var objPopupDiv=new PopupDiv();objPopupDiv.init(objCompId,0,0,null,560,0);objPopupDiv.set_url("frame::MegaMenu.xfdl");objPopupDiv.addEventHandler("oncloseup",this._gfnMegaMenuOncloseup,this);this.addChild(objCompId,objPopupDiv);objPopupDiv.show();};pForm.gfnOpenMegaMenu=function(oForm){oForm.components["pdivMegaMenu"].trackPopupByComponent(oForm,0,0);var menuId="9999999";var staObj;for(var objSta in oForm.components["pdivMegaMenu"].form.components){staObj=oForm.components["pdivMegaMenu"].form.components[objSta];if(String(staObj.name).indexOf("L_")==0){if(menuId>String(staObj.id).replace("L_sta","")){menuId=String(staObj.id).replace("L_sta","");}}}oForm.components["pdivMegaMenu"].form.components["L_sta"+menuId].set_cssclass("sta_WF_navTitle_S");};pForm.gfnCloseMegaMenu=function(){var objTarget=this;while(true){if(objTarget instanceof PopupDiv){objTarget.closePopup();break;}else{objTarget=objTarget.parent;}}return true;};
var pForm=nexacro.Form.prototype;_pTransactionItem._start_time=null;_pTransactionItem.on_start=function(){if(this._usewaitcursor){this._showWaitCursor(this.context);}this._start_time=new Date();nexacro._appendCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,0);}};_pTransactionItem.on_load_data=function(data,cookie,last_modified){var datasets=null;var parameters=null;var errorinfo;var bcache=this.bcache;var ret=null;var endtime=new Date();var elapsedtime=nexacro.round((endtime-this._start_time)/1000,3);this._addCookieToCookieVariable(cookie);if(data&&data._type_name=="DataCache"){bcache=false;errorinfo=data._loadData(this);}else{if(this._protocol<0){data=this.on_decrypt(data);}if(this._progress_data){this.on_progress_data(data,true);errorinfo=this._progress_data._error_info;if(bcache){var target_ds=null;datasets=new nexacro.Collection();for(var buff_ds in this._progress_data._datasets){if(this._progress_data._datasets[buff_ds]._isEnable){target_ds=this._progress_data._datasets[buff_ds]._target_ds;datasets.add_item(target_ds.id,new nexacro._DataSetCache(target_ds.id,target_ds.colinfos,target_ds._constVars,target_ds._rawRecords));}}this._progress_data._datasets=null;parameters=this._progress_data._parameters;}}else{ret=this._deserializeData(data,0);if(bcache){parameters=ret[1];datasets=ret[2];}errorinfo=ret[0];}}if(bcache){var d_cache=nexacro._DataCacheList[this.path];if(!d_cache){nexacro._DataCacheList[this.path]=new nexacro._DataCache(parameters,datasets,last_modified,this.version);}else{d_cache.parameters=parameters;d_cache.datasets=datasets;d_cache.last_modified=last_modified?last_modified:"";d_cache.version=this.version;}d_cache=null;}parameters=null;datasets=null;data=null;ret=null;var errorcode=0;var errormsg="SUCCESS";if(errorinfo){errorcode=errorinfo[0];errormsg=errorinfo[1];errorinfo=null;}if(this._usewaitcursor){this._hideWaitCursor(this.context);}nexacro._removeCommContext(this.context);var application=nexacro.getApplication();if(application){application.on_fire_oncommunication(application,1);}var callbackList=this.callbackList;var n=callbackList.length;if(n>0){var loadmanager=this.context._load_manager;var dataitem=loadmanager?loadmanager.getDataItem(this.svcid):null;if(dataitem){dataitem._is_cancel=undefined;}dataitem=null;loadmanager=null;for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){item.callback.call(target,this.svcid,errorcode,errormsg,elapsedtime);}target=null;item=null;}callbackList.splice(0,n);}this.handle=null;};__pLoadManager.on_load_datamodule=function(svcid,errstatus,message,elapsedtime,fireerrorcode,returncode,requesturi,locationuri,extramsg){var load_Item=this.getDataItem(svcid);if(load_Item){var callback_id=load_Item._context_callback;var callback_func=this.context[callback_id];var ret=false;if(errstatus<0&&fireerrorcode){load_Item.errcode=errstatus;if(fireerrorcode!="comm_cancel_byuser"||fireerrorcode!="comm_stop_transaction_byesc"||load_Item._is_cancel||!load_Item.handle||(load_Item.handle&&!load_Item.handle._user_aborted&&load_Item.handle._user_aborted!==undefined)){ret=this.context._onHttpTransactionError(this.context,true,this.context,fireerrorcode,requesturi,returncode,requesturi,locationuri,extramsg);if(fireerrorcode!="comm_cancel_byuser"&&fireerrorcode!="comm_stop_transaction_byesc"){ret=false;}if(ret){return true;}}}if(fireerrorcode=="comm_cancel_byuser"||fireerrorcode=="comm_stop_transaction_byesc"){if(ret&&load_Item.handle&&!load_Item.handle._user_aborted&&load_Item.handle._user_aborted!==undefined){return ret;}if(load_Item._is_cancel!==undefined&&!load_Item._is_cancel){return ret;}}this.removeDataItem(svcid);this.removeTransactionItem(svcid);this.dataCnt-- ;if(callback_func&&typeof (callback_func)=="function"){callback_func.call(this.context,svcid,errstatus,message,elapsedtime);if(errstatus===0){load_Item.handle=null;}}return ret;}};pForm.gfn_CheckTime=function(){var objDate=new Date();var strTime=this.gfn_Right("0"+objDate.getHours(),2);strTime+=this.gfn_Right("0"+objDate.getMinutes(),2);strTime+=this.gfn_Right("0"+objDate.getSeconds(),2);strTime+=this.gfn_Right("0"+objDate.getMilliseconds(),3);return strTime;};pForm.gfn_Right=function(strString,nSize){var nStart=String(strString).length;var nEnd=Number(nStart)-Number(nSize);var rtnVal=strString.substring(nStart,nEnd);return rtnVal;};pForm.gfn_diffTime=function(sStartTime,sEndTime,sType){this.nFrom_HH=parseInt(sStartTime.substring(0,2));this.nFrom_mm=parseInt(sStartTime.substring(2,4));this.nFrom_ss=parseInt(sStartTime.substring(4,6));this.nFrom_ms=parseInt(sStartTime.substring(6,9));this.nTo_HH=parseInt(sEndTime.substring(0,2));this.nTo_mm=parseInt(sEndTime.substring(2,4));this.nTo_ss=parseInt(sEndTime.substring(4,6));this.nTo_ms=parseInt(sEndTime.substring(6,9))+200;this.nFromTotal_ss=(this.nFrom_HH*3600)+(this.nFrom_mm*60)+this.nFrom_ss+(this.nFrom_ms*0.001);this.nToTotal_ss=(this.nTo_HH*3600)+(this.nTo_mm*60)+this.nTo_ss+(this.nTo_ms*0.001);if(sType=="HH"){return (Math.floor((this.nToTotal_ss-this.nFromTotal_ss)/3600000));}else if(sType=="mm"){return (Math.floor((this.nToTotal_ss-this.nFromTotal_ss)/60000));}else if(sType=="ss"){return (parseFloat(this.nToTotal_ss)-parseFloat(this.nFromTotal_ss)).toString().substr(0,5);}};pForm.gfnFormat=function(sTime){var nFrom_HH=parseInt(sTime.substring(0,2));var nFrom_mm=parseInt(sTime.substring(2,4));var nFrom_ss=parseInt(sTime.substring(4,6));var nFrom_ms=parseInt(sTime.substring(6,9));return nFrom_HH+":"+nFrom_mm+":"+nFrom_ss+"."+nFrom_ms;};pForm.gfnTime=function(){var sTime="";var objDate=new nexacro.Date();var hh=objDate.getHours();var mm=objDate.getMinutes();var ss=objDate.getSeconds();var ms=objDate.getMilliseconds();sTime=String(hh).padLeft(2,"0")+":"+String(mm).padLeft(2,"0")+":"+String(ss).padLeft(2,"0")+"."+String(ms);objDate=null;return sTime;};pForm.gfnIsNull=function(sValue){if(new String(sValue).valueOf()=="undefined"){return true;}if(sValue==null){return true;}var ChkStr=new String(sValue);if(ChkStr==null){return true;}if(ChkStr.toString().length==0){return true;}return false;};pForm.gfnNvl=function(inVal,nullVal){if(inVal==null){inVal=nullVal;}return inVal;};pForm.gfnIsBoolean=function(obj){var strvalue=obj+"";if(strvalue=="true"||strvalue=="false"){return true;}else{return false;}};pForm.gfnDecode=function(){var varRtnValue=null;var arrArgument=this.gfnDecode.arguments;var varValue=arrArgument[0];var bIsDefault=false;var nCount=0;if((arrArgument.length%2)==0){nCount=arrArgument.length-1;bIsDefault=true;}else{nCount=arrArgument.length;bIsDefault=false;}for(var i=1;i<nCount;i+=2){if(varValue==arrArgument[i]){varRtnValue=arrArgument[i+1];i=nCount;}}if(varRtnValue==null&&bIsDefault){varRtnValue=arrArgument[arrArgument.length-1];}return varRtnValue;};pForm.gfnTrim=function(sValue){if(this.gfnIsNull(sValue)){return "";}return nexacro.trim(sValue);};pForm.gfnAllTrim=function(sValue){var objValue=new String(sValue);var sRtnValue="";var i;if(sValue!=null){for(var i=0;i<objValue.length;i++ ){if(objValue.charAt(i)!=" "){sRtnValue=sRtnValue+objValue.charAt(i);}}}else{return  -1;}return sRtnValue;};pForm.gfnLeft=function(sOrg,nSize){return new String(sOrg).substr(0,nSize);};pForm.gfnRight=function(sOrg,nSize){if(this.gfnIsNull(sOrg)||this.gfnIsNull(nSize)){return "";}if(sOrg.length<nSize){return sOrg;}else{return sOrg.substr(sOrg.length-nSize,nSize);}};pForm.gfnLengthByte=function(sVal){var lengthByte=0;if(this.gfnIsNull(sVal)){return  -1;}for(var i=0;i<sVal.length;i++ ){if(sVal.charCodeAt(i)>127){lengthByte+=2;}else{lengthByte+=1;}}return lengthByte;};pForm.gfnPosReverse=function(sOrg,sFind,nStart){var pos;if(this.gfnIsNull(sOrg)||this.gfnIsNull(sFind)){return  -1;}if(this.gfnIsNull(nStart)){nStart=sOrg.length-1;}for(pos=nStart;pos>=0;pos-- ){if(sOrg.substr(pos,sFind.length)==sFind){break;}}return pos;};pForm.gfnAppendComma=function(nNumber,nDetail){if(nNumber==null){return "";}if(nDetail==null){nDetail=0;}nNumber=parseFloat(nNumber);nNumber=nexacro.round(nNumber,nDetail);var strNumber=new String(nNumber);var arrNumber=strNumber.split(".");var strFormatNum="";var j=0;for(i=arrNumber[0].length-1;i>=0;i-- ){if(i!=strNumber.length&&j==3){strFormatNum=arrNumber[0].charAt(i)+","+strFormatNum;j=0;}else{strFormatNum=arrNumber[0].charAt(i)+strFormatNum;}j++ ;}if(arrNumber.length>1){strFormatNum=strFormatNum+"."+arrNumber[1];}return strFormatNum;};pForm.gfnRemoveComma=function(strValue){return strValue.replace(/\,/g,"");};pForm.gfnGetDigit=function(strValue){var regExp=new RegExp("\\D","g");var strRet=strValue.replace(regExp,"");return strRet;};pForm.gfnRemoveSpecialChar=function(strValue){var strSpecial="~!@#$%^&*-+./=_`{|}()\\?<>";for(i=0;i<strValue.length;i++ ){for(j=0;j<strSpecial.length;j++ ){if(strValue.charAt(i)==strSpecial.charAt(j)){strValue=strValue.replace(strValue.charAt(i),"");}}}return strValue;};pForm.gfnRemoveHtmlTag=function(sHtml,sTag){if(this.gfnIsNull(sTag)){sHtml=nexacro.replaceAll(sHtml,"<br>","\n");sHtml=nexacro.replaceAll(sHtml,"<BR>","\n");var regExp=new RegExp("<(/)?([0-9a-zA-Z]*)(\\s[0-9a-zA-Z]*=[^>]*)?(\\s)*(/)?>","g");sHtml=sHtml.replace(regExp,"");}else if(sTag.toUpperCase()=="<BR>"){sHtml=nexacro.replaceAll(sHtml,"<br>","\n");sHtml=nexacro.replaceAll(sHtml,"<BR>","\n");}else{sHtml=nexacro.replaceAll(sHtml,sTag.toUpperCase(),"");sHtml=nexacro.replaceAll(sHtml,sTag.toLowerCase(),"");}return sHtml;};pForm.gfnIsExistInArray=function(arrVal,varVal){var retVal=false;var nCnt=arrVal.length;for(var i=0;i<nCnt;i++ ){if(arrVal[i]==varVal){retVal=true;break;}}return retVal;};pForm.gfn10To16=function(nVal){var n;n=(nVal).toString(16);return n;};pForm.gfn16To10=function(strVal){var n;n=(strVal).toString(10);return n;};pForm.gfnTypeOf=function(obj){var type;if(obj&&(typeof obj=="object")){var s=obj.toString();if(s=="[object Object]"){return type;}type=s.substr(8,s.length-9);}else{type=typeof (obj);}return type;};pForm.gfnIsNexaComponent=function(value){if(value===null||value===undefined){return false;}return value instanceof nexacro.Component;};pForm.gfnObjView=function(objArg,sName){for(var name in objArg){if(this.gfnIsNull(sName)==false){if(name==sName){trace("name : "+name+" / value : "+objArg[name]);}}else{trace("name : "+name+" / value : "+objArg[name]);}}};pForm.gfnLookup=function(p,name){var o;while(p){o=p.components;if(o&&o[name]){return o[name];}o=p.objects;if(o&&o[name]){return o[name];}p=p.parent;}return null;};pForm.gfnLastIndexOfProp=function(array,prop,item,from,strict){var i,obj,propValue;if(from==null){from=array.length-1;}else if(from<0){from=Math.max(0,array.length+from);}var strict=strict||false;if(strict){for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue===item){return i;}}}}else{for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue==item){return i;}}}}return  -1;};pForm.gfnRemoveAt=function(array,index){array.splice(index,1);};pForm._ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];pForm.gfnGetUniqueId=function(prefix,separator){if(this.gfnIsNull(prefix)){prefix="";}if(this.gfnIsNull(separator)){separator=45;}else{separator=separator.charCodeAt(0);}var pThis=this,charcode=this._ALPHA_CHAR_CODES,math=Math;var seq=0;var seq0;var tmpArray=new Array(36);var idx= -1;while(seq<8){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}seq=0;while(seq<3){tmpArray[ ++idx]=separator;seq0=0;while(seq0<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq0++ ;}seq++ ;}tmpArray[ ++idx]=separator;var tmpStr=(new Date()).getTime();tmpStr=("0000000"+tmpStr.toString(16)).substr( -8);seq=0;while(seq<8){tmpArray[ ++idx]=tmpStr.charCodeAt(seq);seq++ ;}seq=0;while(seq<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}return prefix+String.fromCharCode.apply(null,tmpArray);};pForm.gfnConvertXY=function(XCompA,xy,XCompB){var tempX,tempY;var x,y;if(XCompB){tempX=system.clientToScreenX(XCompB,xy[0]);tempY=system.clientToScreenY(XCompB,xy[1]);x=system.screenToClientX(XCompA,tempX)+this.gfnGetScrollLeft(XCompA);y=system.screenToClientY(XCompA,tempY)+this.gfnGetScrollTop(XCompA);}else{x=xy[0];y=xy[1];}return [x,y];};pForm.gfnGetScrollLeft=function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.hscrollbar&&XComp.hscrollbar.visible?XComp.hscrollbar.pos:0);};pForm.gfnGetScrollTop=function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.vscrollbar&&XComp.vscrollbar.visible?XComp.vscrollbar.pos:0);};pForm.gfnCopyProperties=function(tarobject,srcobject){if(tarobject&&srcobject){var p,value;for(p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];tarobject[p]=value;}}}};pForm.gfnGetSequenceId=function(form,prefix){if(this.gfnIsNull(form)){trace("getSequenceId :: 1st argument doesn't exist !!");return null;}if(this.gfnIsNull(prefix)){trace("getSequenceId :: 2nd argument doesn't exist !!");return null;}if(!(form instanceof Form)){trace("getSequenceId :: 1st argument must be a Form !!");return null;}var cache=form._sequenceIdCache;if(this.gfnIsNull(cache)){cache=form._sequenceIdCache={};}var sequence=cache[prefix];if(this.gfnIsNull(sequence)){sequence= -1;}sequence++ ;cache[prefix]=sequence;return prefix+sequence;};pForm.gfnEach=function(object,func,scope){var p,scope=scope||object;for(p in object){if(object.hasOwnProperty(p)){if(func.call(scope,p,object[p],object)===false){return;}}}};pForm.gfnGetTopLevelForm=function(curForm){var p=curForm;while(p&&!(p instanceof ChildFrame)){p=p.parent;}return p.form;};pForm.gfnContains=function(array,item,strict){if(this.gfnIndexOf(array,item,null,strict)=== -1){return false;}else{return true;}};pForm.gfnIndexOf=function(array,item,from,strict){var len=array.length;if(from==null){from=0;};strict==!!strict;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(strict){for(;from<len;from++ ){if(array[from]===item){return from;}}}else{for(;from<len;from++ ){if(array[from]==item){return from;}}}return  -1;};pForm.gfnUpdateToDataset=function(){var objComp=this.getFocus();if(objComp!=null){try{objComp.updateToDataset();}catch(e){}}};pForm.gfnDsIsUpdated=function(objDs){if(objDs.getDeletedRowCount()>0){return true;}for(var i=0;i<objDs.getRowCount();i++ ){if(objDs.getRowType(i)==2||objDs.getRowType(i)==4||objDs.getRowType(i)==8){return true;}}return false;};pForm.gfnIsUpdatedRow=function(objDs,nRow){if(objDs.updatecontrol==true){if(objDs.getRowType(nRow)==2||objDs.getRowType(nRow)==4){return true;}return false;}else{for(var i=0;objDs.getColCount();i++ ){if(this.gfnIsUpdateColumn(objDs,nRow,i)==true){return true;}}}return false;};pForm.gfnIsUpdateColumn=function(objDs,nRow,Column){if(objDs.getRowType(nRow)==2){if(this.gfnIsNull(objDs.getColumn(nRow,Column))){return false;}}else{if(objDs.getColumn(nRow,Column)==objDs.getOrgColumn(nRow,Column)){return false;}}return true;};pForm.gfnIsDate=function(strDate){if(this.gfnIsNull(strDate)){return false;}var retVal;switch(strDate.length){case 6:retVal=this.gfnIsYM(strDate);break;case 8:retVal=this.gfnIsYMD(strDate);break;default:retVal=false;break;}return retVal;};pForm.gfnIsYMD=function(strDate){var retVal=this.gfnGetDigit(strDate);if(retVal.length!=8){return false;}var strYM=strDate.substr(0,6);if(!this.gfnIsYM(strYM)){return false;}var nDay=Number(strDate.substr(6,2));var nLastDay=Number(this.gfnGetLastDate(strYM).substr(6,2));if(nDay<1||nDay>nLastDay){return false;}return true;};pForm.gfnIsYM=function(strDate){var retVal=this.gfnGetDigit(strDate);var retVal=this.gfnGetDigit(strDate);if(retVal.length!=6){return false;}var nYear=Number(strDate.substr(0,4));var nMonth=Number(strDate.substr(4,2));if((nMonth<1)||(nMonth>12)){return false;}return true;};pForm.gfnIsTime=function(strTime){if(strTime.length!=6||!isNumber(strTime)){return false;}var t01=Number(strTime.slice(0,2));var t02=Number(strTime.slice(2,2));var t03=Number(strTime.slice(4,2));if((t01<0||t01>23)||(t02<0||t02>59)||(t03<0||t03>59)){return false;}else{return true;}};pForm.gfnGetDate=function(sGubn){if(this.gfnIsNull(sGubn)){sGubn="date";}var d=new Date();var s;if(sGubn=="date"){s=d.getFullYear()+((d.getMonth()+1)+"").padLeft(2,'0')+(d.getDate()+"").padLeft(2,'0');}else if(sGubn=="time"){s=d.getFullYear()+((d.getMonth()+1)+"").padLeft(2,'0')+(d.getDate()+"").padLeft(2,'0')+(d.getHours()+"").padLeft(2,'0')+(d.getMinutes()+"").padLeft(2,'0')+(d.getSeconds()+"").padLeft(2,'0');}else if(sGubn=="milli"){s=d.getFullYear()+((d.getMonth()+1)+"").padLeft(2,'0')+(d.getDate()+"").padLeft(2,'0')+(d.getHours()+"").padLeft(2,'0')+(d.getMinutes()+"").padLeft(2,'0')+(d.getSeconds()+"").padLeft(2,'0')+(d.getMilliseconds()+"").padLeft(3,'0');}return (s);};pForm.gfnGetLastDate=function(strDate){var s="";if(strDate==null){var date=(new Date()).addMonth(1);}else{var date=new Date(parseInt(strDate.substr(0,4)),parseInt(strDate.substr(4,2)),1);}date=(new Date(date)).addDate((new Date(date)).getDate()* -1);s=(new Date(date)).getFullYear()+(((new Date(date)).getMonth()+1)+"").padLeft(2,'0')+((new Date(date)).getDate()+"").padLeft(2,'0');return (s);};pForm.gfnGetFirstDate=function(strDate){var s="";if(strDate==null){s=getToday().substr(0,6)+"01";}else{var date=new Date(parseInt(strDate.substr(0,4)),parseInt(strDate.substr(4,2))-1,1);s=(new Date(date)).getFullYear()+(((new Date(date)).getMonth()+1)+"").padLeft(2,'0')+((new Date(date)).getDate()+"").padLeft(2,'0');}return (s);};pForm.gfnGetDay=function(strDate){var date=new Date();var iYear=parseInt(strDate.substr(0,4));var iMonth=parseInt(strDate.substr(4,2)-1);var iDate=parseInt(strDate.substr(6,2));date.setFullYear(iYear,iMonth,iDate);return date.getDay();};pForm.gfnGetDiffDate=function(sStartDate,sEndDate){var vFromDate=new Date(parseInt(sEndDate.substring(0,4),10),parseInt(sEndDate.substring(4,6)-1,10),parseInt(sEndDate.substring(6,8),10));var vToDate=new Date(parseInt(sStartDate.substring(0,4),10),parseInt(sStartDate.substring(4,6)-1,10),parseInt(sStartDate.substring(6,8),10));return parseInt((vFromDate-vToDate)/(1000*60*60*24));};pForm.gfnGetDiffMonth=function(sStartDate,sEndDate){var nStartMon,nEndMon;nStartMon=parseInt(sStartDate.substr(0,4),10)*12+parseInt(sStartDate.substr(4,2),10);nEndMon=parseInt(sEndDate.substr(0,4),10)*12+parseInt(sEndDate.substr(4,2),10);return (nEndMon-nStartMon);};pForm.gfnAddDate=function(strDate,nOffSet){var date=new Date();var iYear=parseInt(strDate.substr(0,4));var iMonth=parseInt(strDate.substr(4,2)-1);var iDate=parseInt(strDate.substr(6,2)-(nOffSet* -1));date.setFullYear(iYear,iMonth,iDate);return this.gfnDateToStr(date);};pForm.gfnAddMonth=function(strDate,OffSet){var date,d,s,mon,val;var gfnGetMonthLastDate=function(strMonth){var iLastDay;var iYear=parseInt(strMonth.substr(0,4),10);var iMonth=parseInt(strMonth.substr(4,2),10);switch(iMonth){case 2:if(((iYear%4)==0)&&((iYear%100)!=0)||((iYear%400)==0)){iLastDay=29;}else{iLastDay=28;}break;case 4:case 6:case 9:case 11:iLastDay=30;break;default:iLastDay=31;break;}return iLastDay;};if(strDate){date=this.gfnStrToDate(strDate);d=(new Date(date)).addMonth(OffSet);}else{date=this.gfnStrToDate(this.gfnGetDate());d=(new Date(date)).addMonth(OffSet);}if(gfnGetMonthLastDate(strDate)==date.getDate()){var sY=new Date(d).getFullYear();var sM=new Date(d).getMonth();var eY=date.getFullYear();var eM=date.getMonth();mon= -((eY-sY)*12+(eM-sM));if(mon!=OffSet){val=OffSet-mon;d=(new Date(d)).addMonth( -1);}var ld=new Date((new Date(d)).getFullYear(),(new Date(d)).getMonth(),gfnGetMonthLastDate(this.gfnDateToStr(new Date(d))));s=(new Date(ld)).getFullYear()+(((new Date(ld)).getMonth()+1)+"").padLeft(2,'0')+(((new Date(ld)).getDate())+"").padLeft(2,'0');}else{s=(new Date(d)).getFullYear()+(((new Date(d)).getMonth()+1)+"").padLeft(2,'0')+(((new Date(d)).getDate())+"").padLeft(2,'0');}return (s);};pForm.gfnGetHolidays=function(nYear){var nYear;var aHoliday=new Array();aHoliday[0]=this.gfnLunarToSolar((nYear-1)+"1230",false)+"설날";aHoliday[1]=this.gfnAddDate(aHoliday[0].substring(0,8),1)+"설날";aHoliday[2]=this.gfnAddDate(aHoliday[1].substring(0,8),1)+"설날";aHoliday[3]=this.gfnLunarToSolar(nYear+"0408",false)+"석가탄신일";aHoliday[4]=this.gfnLunarToSolar(nYear+"0814",false)+"추석";aHoliday[5]=this.gfnAddDate(aHoliday[4].substring(0,8),1)+"추석";aHoliday[6]=this.gfnAddDate(aHoliday[5].substring(0,8),1)+"추석";aHoliday[7]=nYear+"0101"+"신정";aHoliday[8]=nYear+"0301"+"삼일절";aHoliday[9]=nYear+"0505"+"어린이날";aHoliday[10]=nYear+"0606"+"현충일";aHoliday[11]=nYear+"0815"+"광복절";aHoliday[12]=nYear+"1003"+"개천절";aHoliday[13]=nYear+"1009"+"한글날";aHoliday[14]=nYear+"1225"+"성탄절";return aHoliday.sort();};pForm.gfnSolarToLunar=function(value){var sMd="31,0,31,30,31,30,31,31,30,31,30,31";var arrMd=[];var arrBaseInfo=[];var arrDt=[];var nTd;var nTd1;var nTd2;var nTemp;var nLy,nLm,nLd;var sLyoon;var nY,nM,nD;nY=parseInt(value.substr(0,4),10);nM=parseInt(value.substr(4,2),10);nD=parseInt(value.substr(6,2),10);if(nY<1841||nY>2043){return null;}arrBaseInfo=this.gfnSolarBase();arrMd=sMd.split(",");arrMd[1]=28;if((nY%4)==0){if((nY%100)!=0||(nY%400)==0){arrMd[1]=29;}}nTd1=672069;nTd2=(nY-1)*365+parseInt((nY-1)/4)-parseInt((nY-1)/100)+parseInt((nY-1)/400);for(var i=0;i<=nM-2;i++ ){nTd2=nTd2+parseInt(arrMd[i]);}nTd2=nTd2+nD;nTd=nTd2-nTd1+1;for(var i=0;i<=nY-1841;i++ ){arrDt[i]=0;for(var j=0;j<=11;j++ ){switch(parseInt(arrBaseInfo[i*12+j])){case 1:nTemp=29;break;case 2:nTemp=30;break;case 3:nTemp=58;break;case 4:nTemp=59;break;case 5:nTemp=59;break;case 6:nTemp=60;break;}arrDt[i]=arrDt[i]+nTemp;}}nLy=0;do{nTd=nTd-arrDt[nLy];nLy=nLy+1;}while(nTd>arrDt[nLy])nLm=0;sLyoon="0";do{if(parseInt(arrBaseInfo[nLy*12+nLm])<=2){nTemp=parseInt(arrBaseInfo[nLy*12+nLm])+28;if(nTd>nTemp){nTd=nTd-nTemp;nLm=nLm+1;}else{break;}}else{switch(parseInt(arrBaseInfo[nLy*12+nLm])){case 3:m1=29;m2=29;break;case 4:m1=29;m2=30;break;case 5:m1=30;m2=29;break;case 6:m1=30;m2=30;break;}if(nTd>m1){nTd=nTd-m1;if(nTd>m2){nTd=nTd-m2;nLm=nLm+1;}else{sLyoon="1";}}else{break;}}}while(1)nLy=nLy+1841;nLm=nLm+1;nLd=nTd;var sRtn=sLyoon+nLy;sRtn=sRtn+nLm.toString().padLeft(2,"0");sRtn=sRtn+nLd.toString().padLeft(2,"0");return sRtn;};pForm.gfnLunarToSolar=function(value,leapMonth){var sMd="31,0,31,30,31,30,31,31,30,31,30,31";var arrMd=[];var arrBaseInfo=[];var nTd=0;var nSy,nSm,nSd;var nY1,nM1,nY2,nY3,nTemp;var nLeap;var nLy,nLm,nLd;nLy=parseInt(value.substr(0,4),10);nLm=parseInt(value.substr(4,2),10);nLd=parseInt(value.substr(6,2),10);if(nLy<1841||nLy>2043){return null;}arrBaseInfo=this.gfnSolarBase();arrMd=sMd.split(",");arrMd[1]=28;if((nLy%4)==0){if((nLy%100)!=0||(nLy%400)==0){arrMd[1]=29;}}nY1=nLy-1841;nM1=nLm-1;nLeap=0;if(parseInt(arrBaseInfo[nY1*12+nM1])>2){if((nLy%4)==0){if((nLy%100)!=0||(nLy%400)==0){nLeap=1;}}}if(nLeap==1){switch(parseInt(arrBaseInfo[nY1*12+nM1])){case 3:nTemp=29;break;case 4:nTemp=30;break;case 5:nTemp=29;break;case 6:nTemp=30;break;}}else{switch(parseInt(arrBaseInfo[nY1*12+nM1])){case 1:nTemp=29;break;case 2:nTemp=30;break;case 3:nTemp=29;break;case 4:nTemp=29;break;case 5:nTemp=30;break;case 6:nTemp=30;break;}}var tempY1=nY1-1;for(var i=0;i<=tempY1;i++ ){for(var j=0;j<=11;j++ ){switch(parseInt(arrBaseInfo[i*12+j])){case 1:nTd=nTd+29;break;case 2:nTd=nTd+30;break;case 3:nTd=nTd+58;break;case 4:nTd=nTd+59;break;case 5:nTd=nTd+59;break;case 6:nTd=nTd+60;break;}}}var tempM1=nM1-1;for(var j=0;j<=tempM1;j++ ){switch(parseInt(arrBaseInfo[nY1*12+j])){case 1:nTd=nTd+29;break;case 2:nTd=nTd+30;break;case 3:nTd=nTd+58;break;case 4:nTd=nTd+59;break;case 5:nTd=nTd+59;break;case 6:nTd=nTd+60;break;}}if(nLeap==1){switch(parseInt(arrBaseInfo[nY1*12+nM1])){case 3:nTemp=29;break;case 4:nTemp=29;break;case 5:nTemp=30;break;case 6:nTemp=30;break;}}nTd=nTd+nLd+22;if(leapMonth){switch(parseInt(arrBaseInfo[nY1*12+nM1])){case 3:nTd=nTd+29;break;case 4:nTd=nTd+30;break;case 5:nTd=nTd+29;break;case 6:nTd=nTd+30;break;}}nY1=1840;do{nY1=nY1+1;nLeap=0;if((nY1%4)==0){if((nY1%100)!=0||(nY1%400)==0){nLeap=1;}}if(nLeap==1){nY2=366;}else{nY2=365;}if(nTd<=nY2){break;}nTd=nTd-nY2;}while(1)nSy=nY1;arrMd[1]=nY2-337;nM1=0;do{nM1=nM1+1;if(nTd<=parseInt(arrMd[nM1-1])){break;}nTd=nTd-parseInt(arrMd[nM1-1]);}while(1)nSm=nM1;nSd=nTd;nY3=nSy;nTd=nY3*365+parseInt(nY3/4)-parseInt(nY3/100)+parseInt(nY3/400);var tempSm=nSm-1;for(var i=0;i<=tempSm;i++ ){nTd=nTd+parseInt(arrMd[i]);}nTd=nTd+nSd;var sRtn=nY3;sRtn=sRtn+nSm.toString().padLeft(2,"0");sRtn=sRtn+nSd.toString().padLeft(2,"0");return sRtn;};pForm.gfnSolarBase=function(){var sBase;sBase="1,2,4,1,1,2,1,2,1,2,2,1,";sBase+="2,2,1,2,1,1,2,1,2,1,2,1,";sBase+="2,2,2,1,2,1,4,1,2,1,2,1,";sBase+="2,2,1,2,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,2,1,2,1,2,1,2,1,";sBase+="2,1,2,1,5,2,1,2,2,1,2,1,";sBase+="2,1,1,2,1,2,1,2,2,2,1,2,";sBase+="1,2,1,1,2,1,2,1,2,2,2,1,";sBase+="2,1,2,3,2,1,2,1,2,1,2,2,";sBase+="2,1,2,1,1,2,1,1,2,2,1,2,";sBase+="2,2,1,2,1,1,2,1,2,1,5,2,";sBase+="2,1,2,2,1,1,2,1,2,1,1,2,";sBase+="2,1,2,2,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,1,2,5,2,1,2,1,2,";sBase+="1,1,2,1,2,2,1,2,2,1,2,1,";sBase+="2,1,1,2,1,2,1,2,2,2,1,2,";sBase+="1,2,1,1,5,2,1,2,1,2,2,2,";sBase+="1,2,1,1,2,1,1,2,2,1,2,2,";sBase+="2,1,2,1,1,2,1,1,2,1,2,2,";sBase+="2,1,6,1,1,2,1,1,2,1,2,2,";sBase+="1,2,2,1,2,1,2,1,2,1,1,2,";sBase+="2,1,2,1,2,2,1,2,2,3,1,2,";sBase+="1,2,2,1,2,1,2,2,1,2,1,2,";sBase+="1,1,2,1,2,1,2,2,1,2,2,1,";sBase+="2,1,1,2,4,1,2,2,1,2,2,1,";sBase+="2,1,1,2,1,1,2,2,1,2,2,2,";sBase+="1,2,1,1,2,1,1,2,1,2,2,2,";sBase+="1,2,2,3,2,1,1,2,1,2,2,1,";sBase+="2,2,2,1,1,2,1,1,2,1,2,1,";sBase+="2,2,2,1,2,1,2,1,1,5,2,1,";sBase+="2,2,1,2,2,1,2,1,2,1,1,2,";sBase+="1,2,1,2,2,1,2,1,2,2,1,2,";sBase+="1,1,2,1,2,4,2,1,2,2,1,2,";sBase+="1,1,2,1,2,1,2,1,2,2,2,1,";sBase+="2,1,1,2,1,1,2,1,2,2,2,1,";sBase+="2,2,1,1,5,1,2,1,2,2,1,2,";sBase+="2,2,1,1,2,1,1,2,1,2,1,2,";sBase+="2,2,1,2,1,2,1,1,2,1,2,1,";sBase+="2,2,4,2,1,2,1,1,2,1,2,1,";sBase+="2,1,2,2,1,2,2,1,2,1,1,2,";sBase+="1,2,1,2,1,2,5,2,2,1,2,1,";sBase+="1,2,1,2,1,2,1,2,2,1,2,2,";sBase+="1,1,2,1,1,2,1,2,2,2,1,2,";sBase+="2,1,1,2,3,2,1,2,2,1,2,2,";sBase+="2,1,1,2,1,1,2,1,2,1,2,2,";sBase+="2,1,2,1,2,1,1,2,1,2,1,2,";sBase+="2,2,1,5,2,1,1,2,1,2,1,2,";sBase+="2,1,2,2,1,2,1,1,2,1,2,1,";sBase+="2,1,2,2,1,2,1,2,1,2,1,2,";sBase+="1,5,2,1,2,2,1,2,1,2,1,2,";sBase+="1,2,1,2,1,2,1,2,2,1,2,2,";sBase+="1,1,2,1,1,5,2,2,1,2,2,2,";sBase+="1,1,2,1,1,2,1,2,1,2,2,2,";sBase+="1,2,1,2,1,1,2,1,2,1,2,2,";sBase+="2,1,2,1,5,1,2,1,2,1,2,1,";sBase+="2,2,2,1,2,1,1,2,1,2,1,2,";sBase+="1,2,2,1,2,1,2,1,2,1,2,1,";sBase+="2,1,5,2,2,1,2,1,2,1,2,1,";sBase+="2,1,2,1,2,1,2,2,1,2,1,2,";sBase+="1,2,1,1,2,1,2,5,2,2,1,2,";sBase+="1,2,1,1,2,1,2,1,2,2,2,1,";sBase+="2,1,2,1,1,2,1,2,1,2,2,2,";sBase+="1,2,1,2,3,2,1,1,2,2,1,2,";sBase+="2,2,1,2,1,1,2,1,1,2,2,1,";sBase+="2,2,1,2,2,1,1,2,1,2,1,2,";sBase+="1,2,2,4,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,1,2,2,1,2,1,2,1,";sBase+="2,1,1,2,2,1,2,1,2,2,1,2,";sBase+="1,5,1,2,1,2,1,2,2,2,1,2,";sBase+="1,2,1,1,2,1,2,1,2,2,2,1,";sBase+="2,1,2,1,1,5,1,2,2,1,2,2,";sBase+="2,1,2,1,1,2,1,1,2,2,1,2,";sBase+="2,2,1,2,1,1,2,1,1,2,1,2,";sBase+="2,2,1,2,5,1,2,1,2,1,1,2,";sBase+="2,1,2,2,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,1,2,2,1,2,1,2,1,";sBase+="2,3,2,1,2,2,1,2,2,1,2,1,";sBase+="2,1,1,2,1,2,1,2,2,2,1,2,";sBase+="1,2,1,1,2,1,5,2,2,1,2,2,";sBase+="1,2,1,1,2,1,1,2,2,1,2,2,";sBase+="2,1,2,1,1,2,1,1,2,1,2,2,";sBase+="2,1,2,2,3,2,1,1,2,1,2,2,";sBase+="1,2,2,1,2,1,2,1,2,1,1,2,";sBase+="2,1,2,1,2,2,1,2,1,2,1,1,";sBase+="2,1,2,5,2,1,2,2,1,2,1,2,";sBase+="1,1,2,1,2,1,2,2,1,2,2,1,";sBase+="2,1,1,2,1,2,1,2,2,1,2,2,";sBase+="1,5,1,2,1,1,2,2,1,2,2,2,";sBase+="1,2,1,1,2,1,1,2,1,2,2,2,";sBase+="1,2,2,1,1,5,1,2,1,2,2,1,";sBase+="2,2,2,1,1,2,1,1,2,1,2,1,";sBase+="2,2,2,1,2,1,2,1,1,2,1,2,";sBase+="1,2,2,1,6,1,2,1,2,1,1,2,";sBase+="1,2,1,2,2,1,2,2,1,2,1,2,";sBase+="1,1,2,1,2,1,2,2,1,2,2,1,";sBase+="2,1,4,1,2,1,2,1,2,2,2,1,";sBase+="2,1,1,2,1,1,2,1,2,2,2,1,";sBase+="2,2,1,1,2,1,4,1,2,2,1,2,";sBase+="2,2,1,1,2,1,1,2,1,2,1,2,";sBase+="2,2,1,2,1,2,1,1,2,1,2,1,";sBase+="2,2,1,2,2,4,1,1,2,1,2,1,";sBase+="2,1,2,2,1,2,2,1,2,1,1,2,";sBase+="1,2,1,2,1,2,2,1,2,2,1,2,";sBase+="1,1,2,4,1,2,1,2,2,1,2,2,";sBase+="1,1,2,1,1,2,1,2,2,2,1,2,";sBase+="2,1,1,2,1,1,2,1,2,2,1,2,";sBase+="2,5,1,2,1,1,2,1,2,1,2,2,";sBase+="2,1,2,1,2,1,1,2,1,2,1,2,";sBase+="2,2,1,2,1,2,3,2,1,2,1,2,";sBase+="2,1,2,2,1,2,1,1,2,1,2,1,";sBase+="2,1,2,2,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,4,2,1,2,1,2,1,2,";sBase+="1,2,1,1,2,2,1,2,2,1,2,2,";sBase+="1,1,2,1,1,2,1,2,2,1,2,2,";sBase+="2,1,4,1,1,2,1,2,1,2,2,2,";sBase+="1,2,1,2,1,1,2,1,2,1,2,2,";sBase+="2,1,2,1,2,1,1,5,2,1,2,2,";sBase+="1,2,2,1,2,1,1,2,1,2,1,2,";sBase+="1,2,2,1,2,1,2,1,2,1,2,1,";sBase+="2,1,2,1,2,5,2,1,2,1,2,1,";sBase+="2,1,2,1,2,1,2,2,1,2,1,2,";sBase+="1,2,1,1,2,1,2,2,1,2,2,1,";sBase+="2,1,2,3,2,1,2,1,2,2,2,1,";sBase+="2,1,2,1,1,2,1,2,1,2,2,2,";sBase+="1,2,1,2,1,1,2,1,1,2,2,1,";sBase+="2,2,5,2,1,1,2,1,1,2,2,1,";sBase+="2,2,1,2,2,1,1,2,1,2,1,2,";sBase+="1,2,2,1,2,1,5,2,1,2,1,2,";sBase+="1,2,1,2,1,2,2,1,2,1,2,1,";sBase+="2,1,1,2,2,1,2,1,2,2,1,2,";sBase+="1,2,1,1,5,2,1,2,2,2,1,2,";sBase+="1,2,1,1,2,1,2,1,2,2,2,1,";sBase+="2,1,2,1,1,2,1,1,2,2,2,1,";sBase+="2,2,1,5,1,2,1,1,2,2,1,2,";sBase+="2,2,1,2,1,1,2,1,1,2,1,2,";sBase+="2,2,1,2,1,2,1,5,2,1,1,2,";sBase+="2,1,2,2,1,2,1,2,1,2,1,1,";sBase+="2,2,1,2,1,2,2,1,2,1,2,1,";sBase+="2,1,1,2,1,6,1,2,2,1,2,1,";sBase+="2,1,1,2,1,2,1,2,2,1,2,2,";sBase+="1,2,1,1,2,1,1,2,2,1,2,2,";sBase+="2,1,2,3,2,1,1,2,2,1,2,2,";sBase+="2,1,2,1,1,2,1,1,2,1,2,2,";sBase+="2,1,2,2,1,1,2,1,1,5,2,2,";sBase+="1,2,2,1,2,1,2,1,1,2,1,2,";sBase+="1,2,2,1,2,2,1,2,1,2,1,1,";sBase+="2,1,2,2,1,5,2,2,1,2,1,2,";sBase+="1,1,2,1,2,1,2,2,1,2,2,1,";sBase+="2,1,1,2,1,2,1,2,2,1,2,2,";sBase+="1,2,1,1,5,1,2,1,2,2,2,2,";sBase+="1,2,1,1,2,1,1,2,1,2,2,2,";sBase+="1,2,2,1,1,2,1,1,2,1,2,2,";sBase+="1,2,5,2,1,2,1,1,2,1,2,1,";sBase+="2,2,2,1,2,1,2,1,1,2,1,2,";sBase+="1,2,2,1,2,2,1,5,2,1,1,2,";sBase+="1,2,1,2,2,1,2,1,2,2,1,2,";sBase+="1,1,2,1,2,1,2,2,1,2,2,1,";sBase+="2,1,1,2,3,2,2,1,2,2,2,1,";sBase+="2,1,1,2,1,1,2,1,2,2,2,1,";sBase+="2,2,1,1,2,1,1,2,1,2,2,1,";sBase+="2,2,2,3,2,1,1,2,1,2,1,2,";sBase+="2,2,1,2,1,2,1,1,2,1,2,1,";sBase+="2,2,1,2,2,1,2,1,1,2,1,2,";sBase+="1,5,2,2,1,2,1,2,2,1,1,2,";sBase+="1,2,1,2,1,2,2,1,2,2,1,2,";sBase+="1,1,2,1,2,1,5,2,2,1,2,2,";sBase+="1,1,2,1,1,2,1,2,2,2,1,2,";sBase+="2,1,1,2,1,1,2,1,2,2,1,2,";sBase+="2,2,1,1,5,1,2,1,2,1,2,2,";sBase+="2,1,2,1,2,1,1,2,1,2,1,2,";sBase+="2,1,2,2,1,2,1,1,2,1,2,1,";sBase+="2,1,6,2,1,2,1,1,2,1,2,1,";sBase+="2,1,2,2,1,2,1,2,1,2,1,2,";sBase+="1,2,1,2,1,2,1,2,5,2,1,2,";sBase+="1,2,1,1,2,1,2,2,2,1,2,2,";sBase+="1,1,2,1,1,2,1,2,2,1,2,2,";sBase+="2,1,1,2,3,2,1,2,1,2,2,2,";sBase+="1,2,1,2,1,1,2,1,2,1,2,2,";sBase+="2,1,2,1,2,1,1,2,1,2,1,2,";sBase+="2,1,2,5,2,1,1,2,1,2,1,2,";sBase+="1,2,2,1,2,1,2,1,2,1,2,1,";sBase+="2,1,2,1,2,2,1,2,1,2,1,2,";sBase+="1,5,2,1,2,1,2,2,1,2,1,2,";sBase+="1,2,1,1,2,1,2,2,1,2,2,1,";sBase+="2,1,2,1,1,5,2,1,2,2,2,1,";sBase+="2,1,2,1,1,2,1,2,1,2,2,2,";sBase+="1,2,1,2,1,1,2,1,1,2,2,2,";sBase+="1,2,2,1,5,1,2,1,1,2,2,1,";sBase+="2,2,1,2,2,1,1,2,1,1,2,2,";sBase+="1,2,1,2,2,1,2,1,2,1,2,1,";sBase+="2,1,5,2,1,2,2,1,2,1,2,1,";sBase+="2,1,1,2,1,2,2,1,2,2,1,2,";sBase+="1,2,1,1,2,1,5,2,2,2,1,2,";sBase+="1,2,1,1,2,1,2,1,2,2,2,1,";sBase+="2,1,2,1,1,2,1,1,2,2,1,2,";sBase+="2,2,1,2,1,4,1,1,2,1,2,2,";sBase+="2,2,1,2,1,1,2,1,1,2,1,2,";sBase+="2,2,1,2,1,2,1,2,1,1,2,1,";sBase+="2,2,1,2,5,2,1,2,1,2,1,1,";sBase+="2,1,2,2,1,2,2,1,2,1,2,1,";sBase+="2,1,1,2,1,2,2,1,2,2,1,2,";sBase+="1,5,1,2,1,2,1,2,2,2,1,2,";sBase+="1,2,1,1,2,1,1,2,2,1,2,2";var arrBase=[];arrBase=sBase.split(",");return arrBase;};pForm.gfnStrToDate=function(inDate){var date=new Date(parseInt(inDate.substr(0,4)),parseInt(inDate.substr(4,2))-1,parseInt(inDate.substr(6,2)));return date;};pForm.gfnDateToStr=function(date){var strYear=date.getYear().toString();var strMonth=(date.getMonth()+1).toString();var strDate=date.getDate().toString();if(strYear.length==2){strYear='19'+strYear;}else if(strYear.length==1){strYear='190'+strYear;}if(strMonth.length==1){strMonth='0'+strMonth;}if(strDate.length==1){strDate='0'+strDate;}return strYear+strMonth+strDate;};pForm.gfnGetWeek=function(strDate){if(strDate.length!=8||!this.gfnIsDigit(strDate)){return "";}var year=parseInt(strDate.substr(0,4));var month=parseInt(strDate.substr(4,2));var day=parseInt(strDate.substr(6,8));var startAt=1;if(startAt==0){day=day+1;}var a=Math.floor((14-month)/12);var y=year+4800-a;var m=month+(12*a)-3;var b=Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400);var J=day+Math.floor(((153*m)+2)/5)+(365*y)+b-32045;var d4=(((J+31741-(J%7))%146097)%36524)%1461;var L=Math.floor(d4/1460);var d1=((d4-L)%365)+L;var week=Math.floor(d1/7)+1;week=week.toString();return year+week.padLeft(2,"0");};pForm.gfnGetBirthDateBySSN=function(ssn){var retVal;ssn=ssn.replace("-","");if(!isNumber(ssn)||ssn.length<6){return retVal;}var yymmdd=ssn.substr(0,6);var century;if(ssn.length>6){var genderFlag=Number(ssn.substr(6,1));switch(genderFlag){case 1:case 2:case 5:case 6:century="19";break;case 3:case 4:case 7:case 8:century="20";break;case 9:case 0:century="18";break;}}else{var sTemp=this.gfnGetDate();if(sTemp.substr(2,6)<=yymmdd){century="19";}else{century="20";}}retVal=century+yymmdd;if(!this.gfnIsDate(retVal)){retVal=null;}return retVal;};pForm.gfnGetBirthYear=function(sJuminNo){if(sJuminNo.toString().length!=13){return "N";}if(!(sJuminNo).match(/^\d{6}\d{7}$/)){return "N";}var vGb=sJuminNo.substr(6,1);if(vGb=='1'||vGb=='2'||vGb=='5'||vGb=='6'){return '19';}else if(vGb=='3'||vGb=='4'||vGb=='7'||vGb=='8'){return '20';}};
if(!nexacro._ChartGraphicsLib){nexacro._ChartGraphicsLib={};nexacro._ChartGraphicsLib._ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];nexacro._ChartGraphicsLib._toString=(Object.prototype.toString);nexacro._ChartGraphicsLib.isEmpty=function(value){if(value==null){return true;}if(nexacro._isString(value)||nexacro._ChartGraphicsLib.isArray(value)){return value.length==0?true:false;}else if(nexacro._ChartGraphicsLib.isObject(value)){for(var p in value){if(value.hasOwnProperty(p)){return false;}}return true;}return false;};nexacro._ChartGraphicsLib.isBoolean=function(value){return typeof value=='boolean';};if(Array.isArray){nexacro._ChartGraphicsLib.isArray=function(value){return Array.isArray(value);};}else{nexacro._ChartGraphicsLib.isArray=function(value){return Object.prototype.toString.call(value)==='[object Array]';};}nexacro._ChartGraphicsLib.isObject=function(value){if(value===null||value===undefined){return false;}if(nexacro._ChartGraphicsLib.isXComponent(value)){return false;}if(value instanceof nexacro.Object){return false;}return typeof value=="object"&&'constructor' in value&&value.constructor===Object;};nexacro._ChartGraphicsLib.isNumber=function(value){return typeof value==='number'&&isFinite(value);};nexacro._ChartGraphicsLib.isFunction=function(value){return nexacro._ChartGraphicsLib._toString.call(value)==='[object Function]';};nexacro._ChartGraphicsLib.isXComponent=function(value){if(value===null||value===undefined){return false;}return value instanceof nexacro.Component;};nexacro._ChartGraphicsLib.getUniqueId=function(prefix,separator){if(nexacro._ChartGraphicsLib.isEmpty(prefix)){prefix="";}if(nexacro._ChartGraphicsLib.isEmpty(separator)){separator=45;}else{separator=separator.charCodeAt(0);}var charcode=nexacro._ChartGraphicsLib._ALPHA_CHAR_CODES,math=Math;var seq=0;var seq0;var tmpArray=new Array(36);var idx= -1;while(seq<8){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}seq=0;while(seq<3){tmpArray[ ++idx]=separator;seq0=0;while(seq0<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq0++ ;}seq++ ;}tmpArray[ ++idx]=separator;var tmpStr=(new Date()).getTime();tmpStr=("0000000"+tmpStr.toString(16)).substr( -8);seq=0;while(seq<8){tmpArray[ ++idx]=tmpStr.charCodeAt(seq);seq++ ;}seq=0;while(seq<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}return prefix+String.fromCharCode.apply(null,tmpArray);};if(nexacro._Browser=="Runtime"){nexacro._ChartGraphicsLib._getLines=function(nexacroFont,txt,wordwrap,maxWidth){var lines;if(wordwrap){var sz;var fsz=nexacroFont.size;var sizeForOneChar=(sz>=0?nexacro._convertPtToPx(fsz):Math.abs(fsz));if(sizeForOneChar>=maxWidth){return txt.split("");}sz=nexacro.__getTextSize(txt,nexacroFont,"none");if(sz[0]>maxWidth){lines=[];var tmpLines=txt.split("\n"),line,lineSize;for(var i=0,len=tmpLines.length;i<len;i++ ){line=tmpLines[i];lineSize=nexacro.__getTextSize(line,nexacroFont,"none");if(lineSize[0]>maxWidth){lines=lines.concat(this._fragmentText(nexacroFont,line,maxWidth));}else{lines.push(line);}}}else{lines=txt.split("\n");}}else{lines=txt.split("\n");}return lines;};nexacro._ChartGraphicsLib._fragmentText=function(nexacroFont,text,maxWidth){var words=text.split(' '),lines=[],tmpChars="",tmpstr="",tmpLine="",tmpLine2="",c=0,clen,line="";for(var n=0,len=words.length;n<len;n++ ){tmpLine=line+words[n]+' ';if(n>0&&(nexacro.__getTextSize(tmpLine,nexacroFont,"none"))[0]>maxWidth){tmpChars=line.split("");for(c=0,clen=tmpChars.length;c<clen;c++ ){tmpLine2=tmpstr+tmpChars[c];if(c>0&&(nexacro.__getTextSize(tmpLine2,nexacroFont,"none"))[0]>maxWidth){lines.push(tmpstr);tmpstr=tmpChars[c];}else{tmpstr=tmpLine2;}}line=tmpstr+words[n]+' ';}else{line=tmpLine;}}if((nexacro.__getTextSize(line,nexacroFont,"none"))[0]>maxWidth){tmpChars=line.split("");tmpstr="";for(c=0,clen=tmpChars.length;c<clen;c++ ){tmpLine2=tmpstr+tmpChars[c];if(c>0&&(nexacro.__getTextSize(tmpLine2,nexacroFont,"none"))[0]>maxWidth){lines.push(tmpstr);tmpstr=tmpChars[c];}else{tmpstr=tmpLine2;}}if(tmpstr.length){lines.push(tmpstr);}}else if(line.length){lines.push(line);}return lines;};nexacro._ChartGraphicsLib._getTextSize=function(nexacroFont,lines,fontHeight){var w=0,len=lines.length,h=fontHeight*len;for(var i=0;i<len;i++ ){w=Math.max(w,(nexacro.__getTextSize(lines[i],nexacroFont,"none"))[0]);}return [w,h];};}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){}else{nexacro._ChartGraphicsLib._getDefaultCanvas=function(){var defaultCanvas=nexacro._ChartGraphicsLib._graphicsDefaultCanvas;if(!defaultCanvas){var _doc=nexacro._managerFrameDoc;defaultCanvas=_doc.createElement("canvas");defaultCanvas.width=1;defaultCanvas.height=1;_doc.body.appendChild(defaultCanvas);nexacro._ChartGraphicsLib._graphicsDefaultCanvas=defaultCanvas;}return defaultCanvas;};nexacro._ChartGraphicsLib._getLines=function(nexacroFont,txt,wordwrap,maxWidth){var canvas=nexacro._ChartGraphicsLib._getDefaultCanvas(),ctx=canvas.getContext('2d');var lines,sz,i,len;if(wordwrap){sz=nexacroFont._size;var sizeForOneChar=(sz>=0?nexacro._convertPtToPx(sz):Math.abs(sz));if(sizeForOneChar>=maxWidth){return txt.split("");}ctx.font=nexacroFont._sysvalue;sz=ctx.measureText(txt);if(sz.width>maxWidth){lines=[];var tmpLines=txt.split("\n"),line,lineSize;for(i=0,len=tmpLines.length;i<len;i++ ){line=tmpLines[i];lineSize=ctx.measureText(line);if(lineSize.width>maxWidth){lines=lines.concat(nexacro._ChartGraphicsLib._fragmentText(ctx,line,maxWidth));}else{lines.push(line);}}}else{lines=txt.split("\n");}}else{lines=txt.split("\n");}return lines;};nexacro._ChartGraphicsLib._fragmentText=function(ctx,text,maxWidth){var words=text.split(' '),lines=[],tmpChars="",tmpLine="",tmpstr="",tmpLine2="",c=0,clen=0,line="";for(var n=0,len=words.length;n<len;n++ ){tmpLine=line+words[n]+' ';if(n>0&&ctx.measureText(tmpLine).width>maxWidth){tmpChars=line.split("");for(c=0,clen=tmpChars.length;c<clen;c++ ){tmpLine2=tmpstr+tmpChars[c];if(c>0&&ctx.measureText(tmpLine2).width>maxWidth){lines.push(tmpstr);tmpstr=tmpChars[c];}else{tmpstr=tmpLine2;}}line=tmpstr+words[n]+' ';}else{line=tmpLine;}}if(ctx.measureText(line).width>maxWidth){tmpChars=line.split("");tmpstr="";for(c=0,clen=tmpChars.length;c<clen;c++ ){tmpLine2=tmpstr+tmpChars[c];if(c>0&&ctx.measureText(tmpLine2).width>maxWidth){lines.push(tmpstr);tmpstr=tmpChars[c];}else{tmpstr=tmpLine2;}}if(tmpstr.length){lines.push(tmpstr);}}else if(line.length){lines.push(line);}return lines;};nexacro._ChartGraphicsLib._getTextSize=function(nexacroFont,lines,fontHeight){var canvas=nexacro._ChartGraphicsLib._getDefaultCanvas(),ctx=canvas.getContext('2d');ctx.font=nexacroFont._sysvalue;var w=0,len=lines.length,h=fontHeight*len;for(var i=0;i<len;i++ ){w=Math.max(w,ctx.measureText(lines[i]).width);}return [w,h];};}}if(!nexacro._ChartGraphicsLibArray){nexacro._ChartGraphicsLibArray={};nexacro._ChartGraphicsLibArray.forEach=function(array,func,scope){var i,len=array.length;for(i=0;i<len;i++ ){func.call(scope,array[i],i,array);}};nexacro._ChartGraphicsLibArray.Each=function(array,func,scope,reverse){var i,len=array.length;if(reverse!==true){for(i=0;i<len;i++ ){if(func.call(scope||array[i],array[i],i,array)===false){return i;}}}else{for(i=len-1;i> -1;i-- ){if(func.call(scope||array[i],array[i],i,array)===false){return i;}}}return true;};nexacro._ChartGraphicsLibArray.arrayCopy=function(src,srcPos,dest,destPos,length){if(!length){return;}var cnt=length+srcPos;var i;var j;if(src==dest){src=src.slice(srcPos,cnt);cnt=src.length;for(i=0,j=destPos;i<cnt;i++ ,j++ ){dest[j]=src[i];}}else{for(i=srcPos,j=destPos;i<cnt;i++ ,j++ ){dest[j]=src[i];}}};nexacro._ChartGraphicsLibArray.indexOf=function(array,item,from,strict){var len=array.length;if(from==null){from=0;}var tostrict=!!strict;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(tostrict){for(;from<len;from++ ){if(array[from]===item){return from;}}}else{for(;from<len;from++ ){if(array[from]==item){return from;}}}return  -1;};nexacro._ChartGraphicsLibArray.removeAt=function(array,index){array[index]=null;array.splice(index,1);};nexacro._ChartGraphicsLibArray.remove=function(array,item){var index=nexacro._ChartGraphicsLibArray.indexOf(array,item);if(index!== -1){array[index]=null;array.splice(index,1);}};nexacro._ChartGraphicsLibArray.clean=function(array){var results=[],i=0,len=array.length,item;for(;i<len;i++ ){item=array[i];if(!nexacro._ChartGraphicsLib.isEmpty(item)){results.push(item);}}return results;};nexacro._ChartGraphicsLibArray.filter=function(array,func,scope){if(!func||!(typeof func==="function")){return;}var results=[],i=0,len=array.length;for(;i<len;i++ ){if(func.call(scope,array[i],i,array)){results.push(array[i]);}}return results;};nexacro._ChartGraphicsLibArray.lastIndexOfProp=function(array,prop,item,from,strict_){var i,obj,strict=strict_||false,propValue;if(from==null){from=array.length-1;}else if(from<0){from=Math.max(0,array.length+from);}if(strict){}for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i];propValue=obj[prop];if(propValue===item){return i;}}}return  -1;};nexacro._ChartGraphicsLibArray.indexOfProp=function(array,prop,item,from_,strict_){var len=array.length,from=Number(from_)||0,strict=strict_||false,obj,propValue;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(strict){}for(;from<len;from++ ){if(from in array&&array[from]){obj=array[from];propValue=obj[prop];if(propValue===item){return from;}}}return  -1;};nexacro._ChartGraphicsLibArray.move=function(array,from,to){var i,tmp;from=parseInt(from,10);to=parseInt(to,10);if(from!==to&&0<=from&&from<=array.length&&0<=to&&to<=array.length){tmp=array[from];if(from<to){for(i=from;i<to;i++ ){array[i]=array[i+1];}}else{for(i=from;i>to;i-- ){array[i]=array[i-1];}}array[to]=tmp;return true;}return false;};nexacro._ChartGraphicsLibArray.map=function(array,func,scope){if(!func||!(typeof func==="function")){return;}var results=[],i=0,len=array.length;for(;i<len;i++ ){results[i]=func.call(scope,array[i],i,array);}return results;};nexacro._ChartGraphicsLibArray.max=function(array){return Math.max.apply(Math,array);};nexacro._ChartGraphicsLibArray.min=function(array){return Math.min.apply(Math,array);};}if(!nexacro._ChartGraphicsLibObject){nexacro._ChartGraphicsLibObject={};nexacro._ChartGraphicsLibObject.Each=function(object,func,scope_){var p,scope=scope_||object;for(p in object){if(object.hasOwnProperty(p)){if(func.call(scope,p,object[p],object)===false){return;}}}};nexacro._ChartGraphicsLibObject.merge=function(tarobject){var i=1,func,scope,ln=arguments.length,o,prop,val;if(!tarobject){return;}if(typeof arguments[ln-1]=="function"){ln=ln-1;func=arguments[ln];}else if(typeof arguments[ln-2]=="function"){ln=ln-2;func=arguments[ln];scope=arguments[ln+1]||this;}if(func){for(;i<ln;i++ ){o=arguments[i];for(prop in o){if(o.hasOwnProperty(prop)){val=o[prop];if(func.call(scope,prop,val,tarobject)!==false){tarobject[prop]=val;}}}}}else{for(;i<ln;i++ ){o=arguments[i];for(prop in o){if(o.hasOwnProperty(prop)){val=o[prop];if(!tarobject[prop]){tarobject[prop]=val;}}}}}return tarobject;};nexacro._ChartGraphicsLibObject.copyProperties=function(tarobject,srcobject){if(tarobject&&srcobject){var p,value;for(p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];tarobject[p]=value;}}}};}if(!nexacro._ChartGraphicsLibString){nexacro._ChartGraphicsLibString={};nexacro._ChartGraphicsLibString.capitalize=function(str){return str.replace(/\b[a-z]/g,function(match){return match.toUpperCase();});};nexacro._ChartGraphicsLibString.removeStr=function(source,target,direction,opt_ignoreCase){direction=direction||"left";if(opt_ignoreCase!==false){opt_ignoreCase=true;}var tempSource,tempTarget,pos;var targetLen=target.length;tempSource=source;tempTarget=target;if(!opt_ignoreCase){tempSource=source.toLowerCase();tempTarget=target.toLowerCase();}if(direction=="left"){pos=tempSource.indexOf(tempTarget);}else if(direction=="right"){pos=tempSource.lastIndexOf(tempTarget);}else{return;}if(pos<0){return source;}else if(tempSource==tempTarget){return "";}else if(pos==0){return tempSource.substr(targetLen);}else if(pos>0){return tempSource.substr(0,pos)+tempSource.substr(pos+targetLen);}};}if(!nexacro._ChartGraphicsMathUtil){nexacro._ChartGraphicsMathUtil={};nexacro._ChartGraphicsMathUtil._abscissas=[[0.5773502691896257645091488],[0,0.7745966692414833770358531],[0.3399810435848562648026658,0.8611363115940525752239465],[0,0.5384693101056830910363144,0.9061798459386639927976269],[0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],[0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],[0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],[0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],[0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],[0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],[0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],[0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],[0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],[0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],[0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]];nexacro._ChartGraphicsMathUtil._weights=[[1],[0.8888888888888888888888889,0.5555555555555555555555556],[0.6521451548625461426269361,0.3478548451374538573730639],[0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],[0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],[0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],[0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],[0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],[0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],[0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],[0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],[0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],[0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],[0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],[0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]];nexacro._ChartGraphicsMathUtil._TOLERANCE=10e-6;nexacro._ChartGraphicsMathUtil._EPSILON=10e-12;nexacro._ChartGraphicsMathUtil._KAPPA=4*(Math.sqrt(2)-1)/3;nexacro._ChartGraphicsMathUtil.isZero=function(val){return Math.abs(val)<=this._EPSILON;};nexacro._ChartGraphicsMathUtil.integrate=function(f,a,b,n){var x=this._abscissas[n-2],w=this._weights[n-2],A=0.5*(b-a),B=A+a,i=0,m=(n+1)>>1,sum=n&1?w[i++ ]*f(B):0;while(i<m){var Ax=A*x[i];sum+=w[i++ ]*(f(B+Ax)+f(B-Ax));}return A*sum;};nexacro._ChartGraphicsMathUtil.findRoot=function(f,df,x,a,b,n,tolerance){for(var i=0;i<n;i++ ){var fx=f(x),dx=fx/df(x);if(Math.abs(dx)<tolerance){return x;}var nx=x-dx;if(fx>0){b=x;x=nx<=a?0.5*(a+b):nx;}else{a=x;x=nx>=b?0.5*(a+b):nx;}}};nexacro._ChartGraphicsMathUtil.solveQuadratic=function(a,b,c,roots){var epsilon=this._EPSILON;if(Math.abs(a)<epsilon){if(Math.abs(b)>=epsilon){roots[0]= -c/b;return 1;}return Math.abs(c)<epsilon? -1:0;}var q=b*b-4*a*c;if(q<0){return 0;}q=Math.sqrt(q);a*=2;var n=0;roots[n++ ]=( -b-q)/a;if(q>0){roots[n++ ]=( -b+q)/a;}return n;};nexacro._ChartGraphicsMathUtil.solveCubic=function(a,b,c,d,roots){var epsilon=this._EPSILON,sqp,snq,phi,t,o;if(Math.abs(a)<epsilon){return this.solveQuadratic(b,c,d,roots);}b/=a;c/=a;d/=a;var bb=b*b,p=(bb-3*c)/9,q=(2*bb*b-9*b*c+27*d)/54,ppp=p*p*p,D=q*q-ppp;b/=3;if(Math.abs(D)<epsilon){if(Math.abs(q)<epsilon){roots[0]= -b;return 1;}sqp=Math.sqrt(p);snq=q>0?1: -1;roots[0]= -snq*2*sqp-b;roots[1]=snq*sqp-b;return 2;}if(D<0){sqp=Math.sqrt(p);phi=Math.acos(q/(sqp*sqp*sqp))/3;t= -2*sqp;o=2*Math.PI/3;roots[0]=t*Math.cos(phi)-b;roots[1]=t*Math.cos(phi+o)-b;roots[2]=t*Math.cos(phi-o)-b;return 3;}var A=(q>0? -1:1)*Math.pow(Math.abs(q)+Math.sqrt(D),1/3);roots[0]=A+p/A-b;return 1;};nexacro._ChartGraphicsMathUtil.getDistLineSegAndPoint=function(x1,y1,x2,y2,px,py){x2-=x1;y2-=y1;px-=x1;py-=y1;var dotprod=px*x2+py*y2;var projlenSq;if(dotprod<=0.0){projlenSq=0.0;}else{px=x2-px;py=y2-py;dotprod=px*x2+py*y2;if(dotprod<=0.0){projlenSq=0.0;}else{projlenSq=dotprod*dotprod/(x2*x2+y2*y2);}}var lenSq=px*px+py*py-projlenSq;if(lenSq<0){lenSq=0;}return lenSq;};nexacro._ChartGraphicsMathUtil.getDirLineSegAndPoint=function(x1,y1,x2,y2,px,py){x2-=x1;y2-=y1;px-=x1;py-=y1;var dir=px*y2-py*x2;if(dir==0.0){dir=px*x2+py*y2;if(dir>0.0){px-=x2;py-=y2;dir=px*x2+py*y2;if(dir<0.0){dir=0.0;}}}return (dir<0.0)? -1:((dir>0.0)?1:0);};}if(!nexacro._ChartGraphicsClassUtils){nexacro._ChartGraphicsClassUtils={};nexacro._ChartGraphicsClassUtils._fmtPercision=5;nexacro._ChartGraphicsClassUtils._fmtMultiplier=Math.pow(10,5);nexacro._ChartGraphicsClassUtils.fmtNumber=function(val){return (Math.round(val*nexacro._ChartGraphicsClassUtils._fmtMultiplier)/nexacro._ChartGraphicsClassUtils._fmtMultiplier)+"";};nexacro._ChartGraphicsClassUtils.fmtPoint=function(val,separator){return nexacro._ChartGraphicsClassUtils.fmtNumber(val.x)+(separator||',')+nexacro._ChartGraphicsClassUtils.fmtNumber(val.y);};nexacro._ChartGraphicsClassUtils.fmtSize=function(val,separator){return nexacro._ChartGraphicsClassUtils.fmtNumber(val.width)+(separator||',')+nexacro._ChartGraphicsClassUtils.fmtNumber(val.height);};nexacro._ChartGraphicsClassUtils.fmtRect=function(val,separator){return nexacro._ChartGraphicsClassUtils.fmtPoint(val,separator)+(separator||',')+nexacro._ChartGraphicsClassUtils.fmtSize(val,separator);};}if(!nexacro._ChartGraphicsHashMap){nexacro._ChartGraphicsHashMap=function(){this._size=0;this._map={};};var _pGraphicsHashMap=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsHashMap);nexacro._ChartGraphicsHashMap.prototype=_pGraphicsHashMap;nexacro._ChartGraphicsHashMap._hashkeypool={};nexacro._ChartGraphicsHashMap._simpleToString=function(){return this._hashKey;};nexacro._ChartGraphicsHashMap.getHashKey=function(prefix,obj){var key;if(obj._hashKey==null){var nextVal=this._hashkeypool[prefix];if(nextVal==null){nextVal=0;this._hashkeypool[prefix]=nextVal;}else{nextVal++ ;this._hashkeypool[prefix]=nextVal;}key=prefix+nextVal;obj._hashKey=key;}else{key=obj._hashKey;}return key;};nexacro._ChartGraphicsHashMap.makeHashKey=function(obj,toStringFn){obj._hashKey=nexacro._ChartGraphicsLib.getUniqueId();obj.toString=toStringFn||this._simpleToString;};nexacro._ChartGraphicsHashMap.makeHashKeyForArray=function(arr,toStringFn_){var getUniFn=nexacro._ChartGraphicsLib.getUniqueId,i,len=arr.length,toStringFn=toStringFn_||this._simpleToString;for(i=0;i<len;i++ ){arr[i]._hashKey=getUniFn();arr[i].toString=toStringFn;}};_pGraphicsHashMap.put=function(key,value){if(this.containsKey(key)){return false;}var map=this._map;this._size++ ;return map[key]=value;};_pGraphicsHashMap.get=function(key){return this._map[key];};_pGraphicsHashMap.remove=function(key){if(!this.containsKey(key)){return false;}var map=this._map;this._size-- ;delete map[key];return true;};_pGraphicsHashMap.containsKey=function(key){return key in this._map;};_pGraphicsHashMap.getSize=function(){return this._size;};_pGraphicsHashMap.clear=function(){this._size=0;this._map={};};_pGraphicsHashMap.fromDataset=function(ds,keyColumn,valueColumn,bClear){var i,len=ds.getRowCount()||0;if(bClear!==false){this.clear();}if(valueColumn){for(i=0;i<len;i++ ){this.put(ds.getColumn(i,keyColumn),ds.getColumn(i,valueColumn));}}else{for(i=0;i<len;i++ ){this.put(ds.getColumn(i,keyColumn),i);}}};_pGraphicsHashMap.toArray=function(flag){var arr=[];if(flag==null){flag=0;}if(flag==0){this.forEach(function(key){arr.push(key);});}else if(flag==1){this.forEach(function(key,value){arr.push(value);});}else{this.forEach(function(key,value){arr.push({key:key,value:value});});}return arr;};_pGraphicsHashMap.forEach=function(f){var map=this._map;for(var key in map){f.call(this,key,map[key]);}};_pGraphicsHashMap._debug=function(bConsole){if(bConsole){this.forEach(function(key,value){console.log("key: ",key,"value: ",value);});}else{this.forEach(function(key,value){trace(key+"--->"+value);});}};}if(!nexacro._ChartGraphicsMatrix){nexacro._ChartGraphicsMatrix=function(arg){var count=arguments.length;if(count==6){this.set_scaleX(arguments[0]);this.set_shearY(arguments[2]);this.set_shearX(arguments[1]);this.set_scaleY(arguments[3]);this.set_translateX(arguments[4]);this.set_translateY(arguments[5]);}if(count==1){if(arg instanceof nexacro._ChartGraphicsMatrix){this.set(arg._scaleX,arg._shearX,arg._shearY,arg._scaleY,arg._translateX,arg._translateY);}else if(nexacro._ChartGraphicsLib.isArray(arg)){this.set_scaleX(arguments[0]);this.set_shearY(arguments[2]);this.set_shearX(arguments[1]);this.set_scaleY(arguments[3]);this.set_translateX(arguments[4]);this.set_translateY(arguments[5]);}else{}}else if(count==0){this.reset();}else{}};var _pGraphicsMatrix=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsMatrix);nexacro._ChartGraphicsMatrix.prototype=_pGraphicsMatrix;nexacro._ChartGraphicsMatrix.DEGTORAD=Math.PI/180;nexacro._ChartGraphicsMatrix.RADTODEG=180/Math.PI;_pGraphicsMatrix.scaleX=1;_pGraphicsMatrix.shearY=0;_pGraphicsMatrix.shearX=0;_pGraphicsMatrix.scaleY=1;_pGraphicsMatrix.translateX=0;_pGraphicsMatrix.translateY=0;_pGraphicsMatrix._scaleX=1;_pGraphicsMatrix._shearY=0;_pGraphicsMatrix._shearX=0;_pGraphicsMatrix._scaleY=1;_pGraphicsMatrix._translateX=0;_pGraphicsMatrix._translateY=0;_pGraphicsMatrix.set_scaleX=function(v){if(isNumber(v)&&this.scaleX!=v){this.scaleX=v;this._scaleX=this.scaleX;}};_pGraphicsMatrix.set_shearY=function(v){if(isNumber(v)&&this.shearY!=v){this.shearY=v;this._shearY=this.shearY;}};_pGraphicsMatrix.set_shearX=function(v){if(isNumber(v)&&this.shearX!=v){this.shearX=v;this._shearX=this.shearX;}};_pGraphicsMatrix.set_scaleY=function(v){if(isNumber(v)&&this.scaleY!=v){this.scaleY=v;this._scaleY=this.scaleY;}};_pGraphicsMatrix.set_translateX=function(v){if(isNumber(v)&&this.translateX!=v){this.translateX=v;this._translateX=this.translateX;}};_pGraphicsMatrix.set_translateY=function(v){if(isNumber(v)&&this.translateY!=v){this.translateY=v;this._translateY=this.translateY;}};_pGraphicsMatrix.set=function(a,c,b,d,tx,ty){this.set_scaleX(a);this.set_shearY(b);this.set_shearX(c);this.set_scaleY(d);this.set_translateX(tx);this.set_translateY(ty);return this;};_pGraphicsMatrix.clone=function(){return new nexacro._ChartGraphicsMatrix(this);};_pGraphicsMatrix.equals=function(m){return m===this||m&&this._scaleX==m._scaleX&&this._shearX==m._shearX&&this._shearY==m._shearY&&this._scaleY==m._scaleY&&this._translateX==m._translateX&&this._translateY==m._translateY||false;};_pGraphicsMatrix.toString=function(){var f0=[nexacro._ChartGraphicsClassUtils.fmtNumber(this._scaleX),nexacro._ChartGraphicsClassUtils.fmtNumber(this._shearX),nexacro._ChartGraphicsClassUtils.fmtNumber(this._translateX)];var f1=[nexacro._ChartGraphicsClassUtils.fmtNumber(this._shearY),nexacro._ChartGraphicsClassUtils.fmtNumber(this._scaleY),nexacro._ChartGraphicsClassUtils.fmtNumber(this._translateY)];return '[['+f0.join(', ')+'], ['+f1.join(', ')+']]';};_pGraphicsMatrix.reset=function(){this._scaleX=this._scaleY=1;this._shearY=this._shearX=this._translateX=this._translateY=0;return this;};_pGraphicsMatrix.scale=function(pt,centerPt){var read=0;if(pt instanceof nexacro.Point){read=1;}else{pt=new nexacro.Point(arguments[0],arguments[1]);read=2;}if(arguments[read]!=null){if(arguments[read] instanceof nexacro.Point){centerPt=arguments[read];}else{centerPt=new nexacro.Point(arguments[read],arguments[read+1]);}}else{centerPt=null;}if(centerPt){this.translate(centerPt);}this._scaleX*=pt.x;this._shearY*=pt.x;this._shearX*=pt.y;this._scaleY*=pt.y;if(centerPt){this.translate(centerPt.negate());}return this;};_pGraphicsMatrix.translate=function(pt){if(!(pt instanceof nexacro.Point)){pt=new nexacro.Point(arguments[0],arguments[1]);}var x=pt.x,y=pt.y;this._translateX+=x*this._scaleX+y*this._shearY;this._translateY+=x*this._shearX+y*this._scaleY;return this;};_pGraphicsMatrix.rotate=function(angle,centerPt){if(!(centerPt instanceof nexacro.Point)){var argsLen=arguments.length;if(argsLen==3){centerPt=new nexacro.Point(arguments[1],arguments[2]);}else{centerPt=new nexacro.Point();}}angle=angle*nexacro._ChartGraphicsMatrix.DEGTORAD;var x=centerPt.x,y=centerPt.y,cos=Math.cos(angle),sin=Math.sin(angle),tx=x-x*cos+y*sin,ty=y-x*sin-y*cos,a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY;this._scaleX=cos*a+sin*b;this._shearX= -sin*a+cos*b;this._shearY=cos*c+sin*d;this._scaleY= -sin*c+cos*d;this._translateX+=tx*a+ty*b;this._translateY+=tx*c+ty*d;return this;};_pGraphicsMatrix.shear=function(pt,centerPt){var read=0;if(pt instanceof nexacro.Point){read=1;}else{pt=new nexacro.Point(arguments[0],arguments[1]);read=2;}if(arguments[read]!=null){if(arguments[read] instanceof nexacro.Point){centerPt=arguments[read];}else{centerPt=new nexacro.Point(arguments[read],arguments[read+1]);}}else{centerPt=null;}if(centerPt){this.translate(centerPt);}var a=this._scaleX,c=this._shearX;this._scaleX+=pt.y*this._shearY;this._shearX+=pt.y*this._scaleY;this._shearY+=pt.x*a;this._scaleY+=pt.x*c;if(centerPt){this.translate(centerPt.negate());}return this;};_pGraphicsMatrix.skew=function(xdeg,ydeg,centerX,centerY){xdeg=xdeg*nexacro._ChartGraphicsMatrix.DEGTORAD;ydeg=ydeg*nexacro._ChartGraphicsMatrix.DEGTORAD;var tx=centerX-centerX*Math.cos(xdeg)+centerY*Math.sin(xdeg),ty=centerY-centerX*Math.sin(ydeg)-centerY*Math.cos(ydeg),a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY;tx=tx*a+ty*b;ty=tx*c+ty*d;this.concatenate(new nexacro._ChartGraphicsMatrix(Math.cos(ydeg), -Math.sin(xdeg),Math.sin(ydeg),Math.cos(xdeg),tx,ty));};_pGraphicsMatrix.isIdentity=function(){return this._scaleX==1&&this._shearY==0&&this._shearX==0&&this._scaleY==1&&this._translateX==0&&this._translateY==0;};_pGraphicsMatrix.isInvertible=function(){return !!this._getDeterminant();};_pGraphicsMatrix.isSingular=function(){return !this._getDeterminant();};_pGraphicsMatrix.concatenate=function(m){var a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY;this._scaleX=m._scaleX*a+m._shearY*b;this._shearX=m._shearX*a+m._scaleY*b;this._shearY=m._scaleX*c+m._shearY*d;this._scaleY=m._shearX*c+m._scaleY*d;this._translateX+=m._translateX*a+m._translateY*b;this._translateY+=m._translateX*c+m._translateY*d;return this;};_pGraphicsMatrix.preConcatenate=function(m){var a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY,tx=this._translateX,ty=this._translateY;this._scaleX=m._scaleX*a+m._shearX*c;this._shearX=m._scaleX*b+m._shearX*d;this._shearY=m._shearY*a+m._scaleY*c;this._scaleY=m._shearY*b+m._scaleY*d;this._translateX=m._scaleX*tx+m._shearX*ty+m._translateX;this._translateY=m._shearY*tx+m._scaleY*ty+m._translateY;return this;};_pGraphicsMatrix.transform=function(src,srcOff,dst,dstOff,numPts){if(arguments.length<5){if(!(src instanceof nexacro.Point)){src=new nexacro.Point(arguments[0],arguments[1]);var readargs=src.__readArgs;return this._transformPoint(src,arguments[readargs]);}else{return this._transformPoint(src,srcOff);}}else{return this._transformCoordinates(src,srcOff,dst,dstOff,numPts);}};_pGraphicsMatrix._transformPoint=function(pt,dest){var x=pt.x,y=pt.y;if(!dest){dest=new nexacro.Point();}return dest.set(x*this._scaleX+y*this._shearX+this._translateX,x*this._shearY+y*this._scaleY+this._translateY);};_pGraphicsMatrix._transformCoordinates=function(src,srcOff,dst,dstOff,numPts){var i=srcOff,j=dstOff,srcEnd=srcOff+2*numPts,x,y,a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY;var tx=this._translateX,ty=this._translateY;while(i<srcEnd){x=src[i++ ];y=src[i++ ];dst[j++ ]=x*a+y*b+tx;dst[j++ ]=x*c+y*d+ty;}return dst;};_pGraphicsMatrix._transformCorners=function(rect,obj_id){var x1=rect.left,y1=rect.top,x2=x1+rect.width,y2=y1+rect.height,coords=[x1,y1,x2,y1,x2,y2,x1,y2,obj_id];return this._transformCoordinates(coords,0,coords,0,4);};_pGraphicsMatrix._transformBounds=function(bounds,dest,obj_id){var coords=this._transformCorners(bounds,obj_id),min=coords.slice(0,2),max=coords.slice(0),val,j;for(var i=2;i<8;i++ ){val=coords[i];j=i&1;if(val<min[j]){min[j]=val;}else if(val>max[j]){max[j]=val;}}if(!dest){dest=new nexacro.Rect();}return dest.set(min[0],min[1],max[0]-min[0],max[1]-min[1]);};_pGraphicsMatrix.inverseTransform=function(pt){if(!(pt instanceof nexacro.Point)){pt=new nexacro.Point(arguments[0],arguments[1]);var readargs=pt.__readArgs;return this._inverseTransform(pt,arguments[readargs]);}else{return this._inverseTransform(pt,arguments[1]);}};_pGraphicsMatrix._getDeterminant=function(){var det=this._scaleX*this._scaleY-this._shearX*this._shearY;return isFinite(det)&&!nexacro._ChartGraphicsMathUtil.isZero(det)&&isFinite(this._translateX)&&isFinite(this._translateY)?det:null;};_pGraphicsMatrix._inverseTransform=function(pt,dest){var det=this._getDeterminant();if(!det){return null;}var x=pt.x-this._translateX,y=pt.y-this._translateY;if(!dest){dest=new nexacro.Point();}return dest.set((x*this._scaleY-y*this._shearX)/det,(y*this._scaleX-x*this._shearY)/det);};_pGraphicsMatrix.decompose=function(){var a=this._scaleX,b=this._shearX,c=this._shearY,d=this._scaleY;if(nexacro._ChartGraphicsMathUtil.isZero(a*d-b*c)){return null;}var scaleX=Math.sqrt(a*a+b*b);a/=scaleX;b/=scaleX;var shear=a*c+b*d;c-=a*shear;d-=b*shear;var scaleY=Math.sqrt(c*c+d*d);c/=scaleY;d/=scaleY;shear/=scaleY;if(a*d<b*c){a= -a;b= -b;shear= -shear;scaleX= -scaleX;}return {translation:this.getTranslation(),scaling:new nexacro.Point(scaleX,scaleY),rotation: -Math.atan2(b,a)*180/Math.PI,shearing:shear};};_pGraphicsMatrix.consolidate=function(){var attrs={"a":this._scaleX,"b":this._shearX,"c":this._shearY,"d":this._scaleY,"e":this._translateX,"f":this._translateY};return attrs;};_pGraphicsMatrix.getValues=function(){return [this._scaleX,this._shearY,this._shearX,this._scaleY,this._translateX,this._translateY];};_pGraphicsMatrix.getTranslation=function(){return new nexacro.Point(this._translateX,this._translateY);};_pGraphicsMatrix.getScaling=function(){return (this.decompose()||{}).scaling;};_pGraphicsMatrix.getRotation=function(){return (this.decompose()||{}).rotation;};_pGraphicsMatrix.inverted=function(){var det=this._getDeterminant();return det&&new nexacro._ChartGraphicsMatrix(this._scaleY/det, -this._shearY/det, -this._shearX/det,this._scaleX/det,(this._shearX*this._translateY-this._scaleY*this._translateX)/det,(this._shearY*this._translateX-this._scaleX*this._translateY)/det);};_pGraphicsMatrix.shiftless=function(){return new nexacro._ChartGraphicsMatrix(this._scaleX,this._shearY,this._shearX,this._scaleY,0,0);};_pGraphicsMatrix.equalsExceptTranslate=function(m){return m===this||m&&this._scaleX==m._scaleX&&this._shearX==m._shearX&&this._shearY==m._shearY&&this._scaleY==m._scaleY||false;};_pGraphicsMatrix._fixedHalflineAntiAlise=function(obj){var ret={},objpos=null,isfixantialiseX=true,isfixantialiseY=true,sx,sy,x,y;function isFixedAntiAliesCheck(n){if(nexacro._Browser=="Runtime"){return true;}return n=== +n&&n===(n|0);}ret.x=this._translateX;ret.y=this._translateY;if(obj&&obj._strokewidth){if(obj._segments&&obj._strokewidth==1){if(obj._segments.length>0){objpos={};objpos.x=obj._segments[0].point.x;objpos.y=obj._segments[0].point.y;}if(objpos){sx=Math.floor(objpos.x);sy=Math.floor(objpos.y);if(!isFixedAntiAliesCheck(objpos.x)){if((sx+0.3)<objpos.x&&objpos.x<(sx+0.7)){isfixantialiseX=false;}}if(!isFixedAntiAliesCheck(objpos.y)){if((sy+0.3)<objpos.y&&objpos.y<(sy+0.7)){isfixantialiseY=false;}}x=Math.round(this._translateX);y=Math.round(this._translateY);if(this._translateX==x&&isfixantialiseX){x+=0.5;}else{x=this._translateX;}if(this._translateY==y&&isfixantialiseY){y+=0.5;}else{y=this._translateY;}ret.x=x;ret.y=y;}else{ret.x=this._translateX;ret.y=this._translateY;}}else{if(obj._strokewidth==1){sx=Math.floor(this._translateX);sy=Math.floor(this._translateY);if(!isFixedAntiAliesCheck(this._translateX)){if((sx+0.3)<this._translateX&&this._translateX<(sx+0.7)){isfixantialiseX=false;}}if(!isFixedAntiAliesCheck(this._translateY)){if((sy+0.3)<this._translateY&&this._translateY<(sy+0.7)){isfixantialiseY=false;}}x=Math.round(this._translateX);y=Math.round(this._translateY);obj._size.width=Math.round(obj._size.width);obj._size.height=Math.round(obj._size.height);if(isfixantialiseX){x+=0.5;}else{x=this._translateX;}if(isfixantialiseY){y+=0.5;}else{y=this._translateY;}ret.x=x;ret.y=y;}else{ret.x=this._translateX;ret.y=this._translateY;}}}return ret;};_pGraphicsMatrix.applyToContext=function(ctx,obj){var fixpos=this._fixedHalflineAntiAlise(obj);ctx.transform(this._scaleX,this._shearY,this._shearX,this._scaleY,fixpos.x,fixpos.y);};}if(!nexacro._ChartGraphicsQuadTree){nexacro._ChartGraphicsQuadTree=function(x,y,w,h){this._dict=new nexacro._ChartGraphicsHashMap();w=Math.max(w,h);this._root=new nexacro._ChartGraphicsQuadTreeNode(new nexacro.Rect(x,y,w,w));};var _pGraphicsQuadTree=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsQuadTree);nexacro._ChartGraphicsQuadTree.prototype=_pGraphicsQuadTree;_pGraphicsQuadTree.setDebug=function(topForm){this._root._topForm=topForm;if(topForm){this._root._debug=true;}};_pGraphicsQuadTree.query=function(areaRect,results){if(nexacro._ChartGraphicsLib.isArray(results)){this._root.query(areaRect,results);}else{return this._root.query(areaRect);}};_pGraphicsQuadTree.getAll=function(){return this._dict.getValues();};_pGraphicsQuadTree.getCount=function(){return this._dict.getSize();};_pGraphicsQuadTree.move=function(item){if(this.contains(item)){var i=0;while(!this._checkRegion(item)){if(i==20){var rect=item.getBoundRect();trace("error checkRegion (move)"+rect.left+","+rect.top+","+rect.width+","+rect.height);return false;}i++ ;}this._root.move(item);return true;}else{return false;}};_pGraphicsQuadTree.add=function(item){var i=0;while(!this._checkRegion(item)){if(i==20){var rect=item.getBoundRect();trace("error checkRegion (add) "+rect.left+","+rect.top+","+rect.width+","+rect.height);return;}i++ ;}var root=this._root,map=this._dict;if(nexacro._ChartGraphicsLib.isArray(item)){var len=item.length;for(i=0;i<len;i++ ){root.insert(item[i]);map.put(item[i],item[i]);}}else{root.insert(item);map.put(item,item);}};_pGraphicsQuadTree.clear=function(){this._dict.clear();this._root.clear();};_pGraphicsQuadTree.contains=function(item){return this._dict.containsKey(item);};_pGraphicsQuadTree.remove=function(item){if(this.contains(item)){this._root.remove(item,true);this._dict.remove(item);return true;}else{return false;}};_pGraphicsQuadTree._checkRegion=function(item){var root=this._root,bounds=root._bounds,itemBounds=item.getBoundRect();if(!bounds||bounds.width<=0||bounds.height<=0){return true;}if(!bounds.containsRect(itemBounds)){var p;if(itemBounds.left<bounds.left){if(itemBounds.top<bounds.top){p=this._grow(bounds.width,bounds.height);}else{p=this._grow(bounds.width,0);}}else if((itemBounds.left+itemBounds.width)>(bounds.left+bounds.width)){if(itemBounds.top<bounds.top){p=this._grow(0,bounds.height);}else{p=this._grow(0,0);}}else if(itemBounds.top<bounds.top){p=this._grow(0,bounds.height);}else if(itemBounds.top+itemBounds.height>bounds.top+bounds.height){p=this._grow(0,0);}if(p){this._root=p;}return false;}return true;};_pGraphicsQuadTree._grow=function(xoffset,yoffset){var root=this._root,bounds=root._bounds;var x=bounds.left-xoffset,y=bounds.top-yoffset,cls=nexacro._ChartGraphicsQuadTreeNode,rectCls=nexacro.Rect,w=bounds.width,h=bounds.height;var p=new cls(x,y,bounds.width*2,bounds.height*2);var nodes=p._childNodes;if(xoffset){if(yoffset){nodes[3]=root;root.Parent=p;}else{nodes[2]=root;root.Parent=p;}}else if(yoffset){nodes[1]=root;root.Parent=p;}else{nodes[0]=root;root.Parent=p;}nodes[0]=nodes[0]||new cls(p,new rectCls(x,y,w,h));nodes[1]=nodes[1]||new cls(p,new rectCls(x,y+h,w,h));nodes[2]=nodes[2]||new cls(p,new rectCls(x+w,y,w,h));nodes[3]=nodes[3]||new cls(p,new rectCls(x+w,y+h,w,h));return p;};}if(!nexacro._ChartGraphicsQuadTreeNode){nexacro._ChartGraphicsQuadTreeNode=function(){if(arguments.length==4){this._bounds=new nexacro.Rect(arguments[0],arguments[1],arguments[2],arguments[3]);}else if(arguments.length==2){this.Parent=arguments[0];this._bounds=arguments[1];}else if(arguments.length==1){this._bounds=arguments[0];}this._items=[];this._childNodes=[];};var _pGraphicsQuadTreeNode=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsQuadTreeNode);nexacro._ChartGraphicsQuadTreeNode.prototype=_pGraphicsQuadTreeNode;_pGraphicsQuadTreeNode.maxItemsPerNode=2;_pGraphicsQuadTreeNode.isEmptyLeaf=function(){return this.getCount()==0&&this._childNodes.length==0;};_pGraphicsQuadTreeNode.getCount=function(){var cnt=0;cnt+=this._items.length;var nodes=this._childNodes,node;for(var i=0,len=nodes.length;i<len;i++ ){node=nodes[i];cnt+=node.getCount();}return cnt;};_pGraphicsQuadTreeNode.add=function(item){item._qOwner=this;var items=this._items;items.push(item);};_pGraphicsQuadTreeNode._remove=function(item){var items=this._items;var idx=nexacro._ChartGraphicsLibArray.indexOf(items,item);if(idx>=0){items[idx]=items[items.length-1];nexacro._ChartGraphicsLibArray.removeAt(items,items.length-1);}};_pGraphicsQuadTreeNode.relocate=function(item){if(this._bounds.containsRect(item.getBoundRect())){var nodes=this._childNodes;if(nodes.length){var dest=this.getDestTree(item);if(item._qOwner!=dest){var formerOwner=item._qOwner;this.remove(item,false);dest.insert(item);if(formerOwner){formerOwner.cleanUpwards();}}}}else{if(this.Parent!=null){this.Parent.relocate(item);}}};_pGraphicsQuadTreeNode.cleanUpwards=function(){var nodes=this._childNodes;if(nodes.length){if(nodes[0].isEmptyLeaf()&&nodes[1].isEmptyLeaf()&&nodes[2].isEmptyLeaf()&&nodes[3].isEmptyLeaf()){this._childNodes=[];if(this.Parent!=null&&this.getCount()==0){this.Parent.cleanUpwards();}}}else{if(this.Parent!=null&&this.getCount()==0){this.Parent.cleanUpwards();}}};_pGraphicsQuadTreeNode.clear=function(){var nodes=this._childNodes;if(nodes.length){nodes[0].clear();nodes[1].clear();nodes[2].clear();nodes[3].clear();}this._childNodes=[];var items=this._items;for(var i=0,len=items.length;i<len;i++ ){items[i]._qOwner=null;}this._items=[];};_pGraphicsQuadTreeNode.remove=function(item,bClean){if(item._qOwner!=null){if(item._qOwner==this){this._remove(item);if(bClean){this.cleanUpwards();}}else{item._qOwner.remove(item,bClean);}}};_pGraphicsQuadTreeNode.getAll=function(results){results.push.apply(results,this._items);var nodes=this._childNodes;for(var i=0,len=nodes.length;i<len;i++ ){nodes[i].getAll(results);}};_pGraphicsQuadTreeNode.query=function(areaRect,results){var i,res=[],len=0;if(results!=null&&nexacro._ChartGraphicsLib.isArray(results)){var bounds=this._bounds;if(areaRect.containsRect(bounds)){this.getAll(results);}else if(areaRect.intersectRect(bounds)){var nodes=this._childNodes,items=this._items;len=items.length||0;for(i=0;i<len;i++ ){if(areaRect.intersectRect(items[i].getBoundRect())){results.push(items[i]);}}len=nodes.length;for(i=0;i<len;i++ ){nodes[i].query(areaRect,results);}}}else{this.query(areaRect,res);return res;}};_pGraphicsQuadTreeNode.insert=function(item){var bounds=this._bounds,itemBounds=item.getBoundRect();if(!bounds.containsRect(itemBounds)){return;}var nodes=this._childNodes,items=this._items;if(items.length==0||(nodes.length==0&&items.length+1<=this.maxItemsPerNode)){this.add(item);}else{if(nodes.length==0){this._createSubNodes();}var dest=this.getDestTree(item);if(dest==this){this.add(item);}else{dest.insert(item);}}};_pGraphicsQuadTreeNode._createSubNodes=function(){var bounds=this._bounds;if((bounds.width*bounds.height)<=10){return;}var halfWidth=bounds.width/2;var halfHeight=bounds.height/2;var left=bounds.left;var top=bounds.top;var nodes=this._childNodes,cls=nexacro._ChartGraphicsQuadTreeNode,rectCls=nexacro.Rect;nodes[0]=new cls(this,new rectCls(left,top,halfWidth,halfHeight));nodes[1]=new cls(this,new rectCls(left,top+halfHeight,halfWidth,halfHeight));nodes[2]=new cls(this,new rectCls(left+halfWidth,top,halfWidth,halfHeight));nodes[3]=new cls(this,new rectCls(left+halfWidth,top+halfHeight,halfWidth,halfHeight));var items=this._items,dest;for(var i=0;i<items.length;i++ ){dest=this.getDestTree(items[i]);if(dest!=this){dest.insert(items[i]);this._remove(items[i]);i-- ;}}};_pGraphicsQuadTreeNode.getDestTree=function(item){var destTree=this;var nodes=this._childNodes,node,nodeBounds;for(var i=0,len=nodes.length;i<len;i++ ){node=nodes[i];nodeBounds=node._bounds;if(nodeBounds.containsRect(item.getBoundRect())){destTree=node;return destTree;}}return destTree;};_pGraphicsQuadTreeNode.move=function(item){if(item._qOwner!=null){item._qOwner.relocate(item);}else{this.relocate(item);}};_pGraphicsQuadTreeNode._getTopForm=function(){if(this._topForm==null){var p=this;while(p.Parent){p=p.Parent;}this._topForm=p._topForm;}return this._topForm;};}if(!nexacro._ChartGraphicsRectsManager){nexacro._ChartGraphicsRectsManager=function(){var argLens=arguments.length;if(argLens>=1){var arg0=arguments[0];if(nexacro._ChartGraphicsLib.isArray(arg0)){if(argLens==3){this._rects=arg0.slice(arguments[1],arguments[1]+arguments[2]-1);}else{this._rects=arg0.slice(0);}this._rects.sort(this._compare);}else if(arg0 instanceof nexacro.Rect){this._rects=[arg0];}else if(arg0 instanceof nexacro._ChartGraphicsRectsManager){this._rects=arg0._rects.slice(0);this._rects.sort(this._compare);}}else{this._rects=[];}};var _pGraphicsRectsManager=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsRectsManager);nexacro._ChartGraphicsRectsManager.prototype=_pGraphicsRectsManager;_pGraphicsRectsManager.clear=function(){this._rects=[];this._bounds=null;};_pGraphicsRectsManager._compare=function(a,b){return a.x-b.x;};_pGraphicsRectsManager._debug=function(){var rects=this._rects,size=rects.length;console.log("nexacro._ChartGraphicsRectsManager: ","size: ",size);console.log("bounds: ",this.getBoundRect());for(var i=0;i<size;i++ ){console.log(rects[i].toString());}};_pGraphicsRectsManager.getBoundRect=function(){var bounds=this._bounds;if(!bounds){var rects=this._rects,len=rects.length,r;if(len){bounds=rects[0].clone();for(var i=1;i<len;i++ ){r=rects[i];if(r.left<bounds.left){bounds.width=bounds.left+bounds.width-r.left;bounds.left=r.left;}if(r.top<bounds.top){bounds.height=bounds.top+bounds.height-r.top;bounds.top=r.top;}if(r.left+r.width>bounds.left+bounds.width){bounds.width=r.left+r.width-bounds.left;}if(r.top+r.height>bounds.top+bounds.height){bounds.height=r.top+r.height-bounds.top;}}this._bounds=bounds;}}return bounds;};_pGraphicsRectsManager.add=function(rect){this._add(rect,0,this._rects.length-1);};_pGraphicsRectsManager._add=function(rect,l,r){var idx=l,rects=this._rects,size=rects.length;while(l<=r){idx=(l+r)>>>1;while((rects[idx]==null)&&(idx<r)){idx++ ;}if(rects[idx]==null){r=(l+r)>>>1;idx=(l+r)>>>1;if(l>r){idx=l;}while((rects[idx]==null)&&(idx>l)){idx-- ;}if(rects[idx]==null){rects[idx]=rect;return;}}if(rect.left==rects[idx].left){break;}if(rect.left<rects[idx].left){if(idx==0){break;}if((rects[idx-1]!=null)&&(rect.left>=rects[idx-1].left)){break;}r=idx-1;}else{if(idx==size-1){idx++ ;break;}if((rects[idx+1]!=null)&&(rect.left<=rects[idx+1].left)){idx++ ;break;}l=idx+1;}}if(idx<size){rects.splice(idx,0,rect);}else{rects[idx]=rect;}this._bounds=null;};_pGraphicsRectsManager._addOrSkipWhenInclude=function(rect,l,r){var idx=l,rects=this._rects,size=rects.length;while(l<=r){idx=(l+r)>>>1;while((rects[idx]==null)&&(idx<r)){idx++ ;}if(rects[idx]==null){r=(l+r)>>>1;idx=(l+r)>>>1;if(l>r){idx=l;}while((rects[idx]==null)&&(idx>l)){idx-- ;}if(rects[idx]==null){rects[idx]=rect;return;}}if(rect.left==rects[idx].left){break;}if(rect.left<rects[idx].left){if(idx==0){break;}if((rects[idx-1]!=null)&&(rect.left>=rects[idx-1].left)){break;}r=idx-1;}else{if(idx==size-1){idx++ ;break;}if((rects[idx+1]!=null)&&(rect.left<=rects[idx+1].left)){idx++ ;break;}l=idx+1;}}if(idx<size){rects.splice(idx,0,rect);}else{rects[idx]=rect;}this._bounds=null;};_pGraphicsRectsManager.contains=function(rect){var l=0,i=0,rects=this._rects,size=rects.length,r=size-1,idx=0;while(l<=r){idx=(l+r)>>>1;if(rect.left==rects[idx].left){break;}if(rect.left<rects[idx].left){if(idx==0){break;}if(rect.left>=rects[idx-1].left){break;}r=idx-1;}else{if(idx==size-1){idx++ ;break;}if(rect.left<=rects[idx+1].left){idx++ ;break;}l=idx+1;}}if(rects[idx].left!=rect.left){return false;}for(i=idx;i>=0;i-- ){if(rects[idx].equals(rect)){return true;}if(rects[idx].left!=rect.left){break;}}for(i=idx+1;i<size;i++ ){if(rects[idx].equals(rect)){return true;}if(rects[idx].left!=rect.left){break;}}return false;};_pGraphicsRectsManager.containsAll=function(arr){if(!(arr instanceof nexacro._ChartGraphicsRectsManager)){arr=new nexacro._ChartGraphicsRectsManager(arr);}return this._containsAll(arr);};_pGraphicsRectsManager._containsAll=function(rectMgr){var x,xChange=0,rects=this._rects,size=rects.length,argRects=rectMgr._rects,argSize=argRects.length;for(var j=0,i=0;j<argSize;j++ ){i=xChange;while(rects[i].left<argRects[j].left){i++ ;if(i==size){return false;}}xChange=i;x=rects[i].left;while(!argRects[j].equals(rects[i])){i++ ;if(i==size){return false;}if(x!=rects[i].left){return false;}}}return true;};_pGraphicsRectsManager.remove=function(rect){var l=0,i=0,rects=this._rects,size=rects.length,r=size-1,arrayCopy=nexacro._ChartGraphicsLibArray.arrayCopy,idx=0;while(l<=r){idx=(l+r)>>>1;if(rect.left==rects[idx].left){break;}if(rect.left<rects[idx].left){if(idx==0){break;}if(rect.left>=rects[idx-1].left){break;}r=idx-1;}else{if(idx==size-1){idx++ ;break;}if(rect.left<=rects[idx+1].left){idx++ ;break;}l=idx+1;}}if(rects[idx].left!=rect.left){return false;}for(i=idx;i>=0;i-- ){if(rects[idx].equals(rect)){arrayCopy(rects,idx+1,rects,idx,size-idx);rects.length=size-1;this._bounds=null;return true;}if(rects[idx].left!=rect.left){break;}}for(i=idx+1;i<size;i++ ){if(rects[idx].equals(rect)){arrayCopy(rects,idx+1,rects,idx,size-idx);rects.length=size-1;this._bounds=null;return true;}if(rects[idx].left!=rect.left){break;}}return false;};_pGraphicsRectsManager.removeAll=function(arr){if(!(arr instanceof nexacro._ChartGraphicsRectsManager)){arr=new nexacro._ChartGraphicsRectsManager(arr);}return this._removeAll(arr);};_pGraphicsRectsManager._removeAll=function(rectsMgr){var x,xChange=0,rects=this._rects,size=rects.length,argRects=rectsMgr,i,j,argSize=argRects.length;var ret=false;for(j=0;j<argSize;j++ ){i=xChange;while((rects[i]==null)||(rects[i].left<argRects[j].left)){i++ ;if(i==size){break;}}if(i==size){break;}xChange=i;x=rects[i].left;while(true){if(rects[i]==null){i++ ;if(i==size){break;}continue;}if(argRects[j].equals(rects[i])){rects[i]=null;ret=true;}i++ ;if(i==size){break;}if(x!=rects[i].left){break;}}}if(ret){j=0;i=0;while(i<size){if(rects[i]!=null){rects[j++ ]=rects[i];}i++ ;}rects.length=j;this._bounds=null;}return ret;};_pGraphicsRectsManager.retainAll=function(arr){if(!(arr instanceof nexacro._ChartGraphicsRectsManager)){arr=new nexacro._ChartGraphicsRectsManager(arr);}return this._retainAll(arr);};_pGraphicsRectsManager._retainAll=function(rectsMgr){var x,xChange=0,rects=this._rects,size=rects.length,argRects=rectsMgr._rects,i,j,argSize=argRects.length;var ret=false;for(j=0,i=0;j<size;j++ ){i=xChange;while(argRects[i].left<rects[j].left){i++ ;if(i==argSize){break;}}if(i==argSize){ret=true;for(var k=j;k<size;k++ ){rects[k]=null;}size=j;rects.length=j;break;}xChange=i;x=argRects[i].left;while(true){if(rects[j].equals(argRects[i])){break;}i++ ;if((i==argSize)||(x!=argRects[i].left)){rects[j]=null;ret=true;break;}}}if(ret){j=0;i=0;while(i<size){if(rects[i]!=null){rects[j++ ]=rects[i];}i++ ;}rects.length=j;this._bounds=null;}return ret;};_pGraphicsRectsManager.append=function(rectsMgr){var argRects=rectsMgr._rects,argSize=argRects.length;if(argSize==0){return;}var rects=this._rects,dst=rects,size=rects.length,arrayCopy=nexacro._ChartGraphicsLibArray.arrayCopy;if(size==0){this._rects=argRects.slice(0);this._bounds=null;return;}if(rects.length<(size+argSize)){dst=new Array(size+argSize);}var src1=argRects,src1Sz=argSize,src1I=src1Sz-1;var src2=rects,src2Sz=size,src2I=src2Sz-1;var dstI=size+argSize-1;var x1=src1[src1I].left;var x2=src2[src2I].left;while(dstI>=0){if(x1<=x2){dst[dstI]=src2[src2I];if(src2I==0){arrayCopy(src1,0,dst,0,src1I+1);break;}src2I-- ;x2=src2[src2I].left;}else{dst[dstI]=src1[src1I];if(src1I==0){arrayCopy(src2,0,dst,0,src2I+1);break;}src1I-- ;x1=src1[src1I].left;}dstI-- ;}this._rects=dst;this._bounds=null;};_pGraphicsRectsManager.mergeRects=function(overhead,lineOverhead){var rects=this._rects,i,j,size=rects.length;if(size==0){return;}var r,cr;var cost1,cost2,cost3;var splits=new Array(4);for(i=0;i<size;i++ ){r=rects[i];if(r==null){continue;}cost1=(overhead+(r.height*lineOverhead)+(r.height*r.width));do{var maxX=r.left+r.width+overhead/r.height;for(j=i+1;j<size;j++ ){cr=rects[j];if((cr==null)||(cr==r)){continue;}if(cr.left>=maxX){j=size;break;}cost2=(overhead+(cr.height*lineOverhead)+(cr.height*cr.width));var mr=r.union(cr);cost3=(overhead+(mr.height*lineOverhead)+(mr.height*mr.width));if(cost3<=cost1+cost2){r=rects[i]=mr;rects[j]=null;cost1=cost3;j= -1;break;}if(!r.intersectRect(cr)){continue;}this.splitRect(cr,r,splits);var splitCost=0;var l=0;for(var k=0;k<4;k++ ){if(splits[k]!=null){var sr=splits[k];if(k<3){splits[l++ ]=sr;}splitCost+=(overhead+(sr.height*lineOverhead)+(sr.height*sr.width));}}if(splitCost>=cost2){continue;}if(l==0){rects[j]=null;if(splits[3]!=null){this._add(splits[3],j,size-1);size=rects.length;}continue;}rects[j]=splits[0];if(l>1){this.insertRects(splits,1,j+1,l-1);size=rects.length;}if(splits[3]!=null){this._add(splits[3],j,size-1);size=rects.length;}}}while(j!=size)}j=0;i=0;var area=0;while(i<size){if(rects[i]!=null){r=rects[i];rects[j++ ]=r;area+=overhead+(r.height*lineOverhead)+(r.height*r.width);}i++ ;}rects.length=j;this._bounds=null;r=this.getBoundRect();if(r==null){return;}if(overhead+(r.height*lineOverhead)+(r.height*r.width)<area){rects[0]=r;rects.length=1;}};_pGraphicsRectsManager.subtract=function(rectsMgr,overhead,lineOverhead){var r,i,j,k,sr;var cost;var jMin=0;var splits=new Array(4);var rects=this._rects,size=rects.length,argRects=rectsMgr._rects,argSize=argRects.length;for(i=0;i<size;i++ ){r=rects[i];cost=(overhead+(r.height*lineOverhead)+(r.height*r.width));for(j=jMin;j<argSize;j++ ){sr=argRects[j];if(sr.left+sr.width<r.left){if(j==jMin){jMin++ ;}continue;}if(sr.left>r.left+r.width){break;}if(!r.intersectRect(sr)){continue;}this.splitRect(r,sr,splits);var splitCost=0;var tmpR;for(k=0;k<4;k++ ){tmpR=splits[k];if(tmpR!=null){splitCost+=(overhead+(tmpR.height*lineOverhead)+(tmpR.height*tmpR.width));}}if(splitCost>=cost){continue;}var l=0;for(k=0;k<3;k++ ){if(splits[k]!=null){splits[l++ ]=splits[k];}}if(l==0){rects[i].width=0;if(splits[3]!=null){this._add(splits[3],i,size-1);size=rects.length;}break;}r=splits[0];rects[i]=r;cost=(overhead+(r.height*lineOverhead)+(r.height*r.width));if(l>1){this.insertRects(splits,1,i+1,l-1);size=rects.length;}if(splits[3]!=null){this._add(splits[3],i+l,size-1);size=rects.length;}}}j=0;i=0;while(i<size){if(rects[i].width==0){rects[i]=null;}else{rects[j++ ]=rects[i];}i++ ;}rects.length=j;this._bounds=null;};_pGraphicsRectsManager.splitRect=function(r,sr,splits){var rx0=r.left;var rx1=rx0+r.width-1;var ry0=r.top;var ry1=ry0+r.height-1;var srx0=sr.left;var srx1=srx0+sr.width-1;var sry0=sr.top;var sry1=sry0+sr.height-1;if((ry0<sry0)&&(ry1>=sry0)){splits[0]=new nexacro.Rect(rx0,ry0,r.width,sry0-ry0);ry0=sry0;}else{splits[0]=null;}if((ry0<=sry1)&&(ry1>sry1)){splits[1]=new nexacro.Rect(rx0,sry1+1,r.width,ry1-sry1);ry1=sry1;}else{splits[1]=null;}if((rx0<srx0)&&(rx1>=srx0)){splits[2]=new nexacro.Rect(rx0,ry0,srx0-rx0,ry1-ry0+1);}else{splits[2]=null;}if((rx0<=srx1)&&(rx1>srx1)){splits[3]=new nexacro.Rect(srx1+1,ry0,rx1-srx1,ry1-ry0+1);}else{splits[3]=null;}};_pGraphicsRectsManager.insertRects=function(rects,srcPos,dstPos,len){if(len==0){return;}var innerRects=this._rects,size=innerRects.length;innerRects.length=(size+len);for(var i=size-1;i>=dstPos;i-- ){innerRects[i+len]=innerRects[i];}nexacro._ChartGraphicsLibArray.arrayCopy(rects,srcPos,innerRects,dstPos,len);};_pGraphicsRectsManager.Each=function(fn,scope){var rects=this._rects,size=rects.length;scope=scope||this;for(var i=0;i<size;i++ ){fn.call(scope,rects[i]);}};}if(!nexacro._ChartGraphicsSize){nexacro._ChartGraphicsSize=function(w,h){var type=typeof w;if(type=='number'){var hasHeight=typeof h==='number';this.width=w;this.height=hasHeight?h:w;this.__readArgs=hasHeight?2:1;}else if(type=='undefined'||w===null){this.width=this.height=0;this.__readArgs=w===null?1:0;}else{if(nexacro._ChartGraphicsLib.isArray(w)){this.width=w[0];this.height=w.length>1?w[1]:w[0];this.__readArgs=1;}else if(w.width!=null){this.width=w.width;this.height=w.height;this.__readArgs=1;}else if(w.x!=null){this.width=w.x;this.height=w.y;this.__readArgs=1;}else{this.width=this.height=0;this.__readArgs=0;}}};var _pGraphicsSize=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsSize);nexacro._ChartGraphicsSize.prototype=_pGraphicsSize;nexacro._ChartGraphicsSize.min=function(){var sz1=new this(arguments[0],arguments[1]);var readargs=sz1.__readArgs;var sz2=new this(arguments[readargs],arguments[readargs+1]);return new this(Math.min(sz1.width,sz2.width),Math.min(sz1.height,sz2.height));};nexacro._ChartGraphicsSize.max=function(){var sz1=new this(arguments[0],arguments[1]);var readargs=sz1.__readArgs;var sz2=new this(arguments[readargs],arguments[readargs+1]);return new this(Math.max(sz1.width,sz2.width),Math.max(sz1.height,sz2.height));};nexacro._ChartGraphicsSize.random=function(){return new this(Math.random(),Math.random());};_pGraphicsSize.width=0;_pGraphicsSize.height=0;_pGraphicsSize.set_width=function(v){if(isNumber(v)&&this.width!=v){this.width=v;}};_pGraphicsSize.set_height=function(v){if(isNumber(v)&&this.height!=v){this.height=v;}};_pGraphicsSize.set=function(w,h){this.set_width(w);this.set_height(h);return this;};_pGraphicsSize.equals=function(sz){return sz===this||sz&&(this.width===sz.width&&this.height===sz.height||nexacro._ChartGraphicsLib.isArray(sz)&&this.width===sz[0]&&this.height===sz[1])||false;};_pGraphicsSize.clone=function(){return new nexacro._ChartGraphicsSize(this.width,this.height);};_pGraphicsSize.toString=function(){return '{ width: '+nexacro._ChartGraphicsClassUtils.fmtNumber(this.width)+', height: '+nexacro._ChartGraphicsClassUtils.fmtNumber(this.height)+' }';};_pGraphicsSize.add=function(sz){if(!(sz instanceof nexacro._ChartGraphicsSize)){sz=new nexacro._ChartGraphicsSize(arguments[0],arguments[1]);}return new nexacro._ChartGraphicsSize(this.width+sz.width,this.height+sz.height);};_pGraphicsSize.subtract=function(sz){if(!(sz instanceof nexacro.Size)){sz=new nexacro._ChartGraphicsSize(arguments[0],arguments[1]);}return new nexacro._ChartGraphicsSize(this.width-sz.width,this.height-sz.height);};_pGraphicsSize.multiply=function(sz){if(!(sz instanceof nexacro._ChartGraphicsSize)){sz=new nexacro._ChartGraphicsSize(arguments[0],arguments[1]);}return new nexacro._ChartGraphicsSize(this.width*sz.width,this.height*sz.height);};_pGraphicsSize.divide=function(sz){if(!(sz instanceof nexacro._ChartGraphicsSize)){sz=new nexacro._ChartGraphicsSize(arguments[0],arguments[1]);}return new nexacro._ChartGraphicsSize(this.width/sz.width,this.height/sz.height);};_pGraphicsSize.modulo=function(sz){if(!(sz instanceof nexacro._ChartGraphicsSize)){sz=new nexacro._ChartGraphicsSize(arguments[0],arguments[1]);}return new nexacro._ChartGraphicsSize(this.width%sz.width,this.height%sz.height);};_pGraphicsSize.negate=function(){return new nexacro._ChartGraphicsSize( -this.width, -this.height);};_pGraphicsSize.isZero=function(){return nexacro._ChartGraphicsMathUtil.isZero(this.width)&&nexacro._ChartGraphicsMathUtil.isZero(this.height);};_pGraphicsSize.isNaN=function(){return isNaN(this.width)||isNaN(this.height);};_pGraphicsSize.round=function(){return new nexacro._ChartGraphicsSize(Math.round(this.width),Math.round(this.height));};_pGraphicsSize.ceil=function(){return new nexacro._ChartGraphicsSize(Math.ceil(this.width),Math.ceil(this.height));};_pGraphicsSize.floor=function(){return new nexacro._ChartGraphicsSize(Math.floor(this.width),Math.floor(this.height));};_pGraphicsSize.abs=function(){return new nexacro._ChartGraphicsSize(Math.abs(this.width),Math.abs(this.height));};}if(!nexacro._ChartGraphicsObject){nexacro._ChartGraphicsObject=function(x,y){nexacro._ChartGraphicsHashMap.getHashKey("ge",this);this._matrix=new nexacro._ChartGraphicsMatrix();this._drawflags=0;this._painted=0;this._style={};var read=0,args=arguments,argslen=args.length;var pt;if(argslen>0){if(x instanceof nexacro.Point){read++ ;this._matrix.translate(x);this.x=x.x;this.y=x.y;this._drawflags|=1;}else if(argslen>=2){this.x=x;this.y=y;pt=new nexacro.Point(x,y);this._matrix.translate(pt);this._drawflags|=1;read+=2;}}else{this.x=0;this.y=0;}this.__readArgs=read;this._childidx_map={};this.childlength=0;};var _pGraphicsObject=nexacro._ChartGraphicsObject.prototype=nexacro._createPrototype(nexacro.Object,nexacro._ChartGraphicsObject);_pGraphicsObject._type_name="_GraphicsObject";_pGraphicsObject.id="";_pGraphicsObject.strokepen="";_pGraphicsObject.fillstyle="";_pGraphicsObject.x=0;_pGraphicsObject.y=0;_pGraphicsObject.cx=0;_pGraphicsObject.cy=0;_pGraphicsObject.visible=true;_pGraphicsObject.opacity=1;_pGraphicsObject.strokejoin="miter";_pGraphicsObject.strokecap="";_pGraphicsObject.miterlimit=1;_pGraphicsObject._id="";_pGraphicsObject._center="";_pGraphicsObject._clipitems="";_pGraphicsObject._nextsibling=null;_pGraphicsObject._previoussibling=null;_pGraphicsObject._firstchild=null;_pGraphicsObject._isfirstchild="";_pGraphicsObject._nonscalingstroke="";_pGraphicsObject.set_shadow=function(val){var s=this._style,oldval=this.shadow,oldobj,newobj;if(oldval!=val){this.shadow=val;oldobj=s.shadow;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.ShadowObjectNew(val);s.shadow=newobj;}}else{if(oldobj){s.shadow=null;}}this._drawflags|=8;this._changedShadow=true;}};_pGraphicsObject.set_strokepen=function(val){var s=this._style,oldval=this.strokepen,oldobj,newobj;if(oldval!=val){this.strokepen=val;oldobj=s.strokepen;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.BorderLineObject(val);s.strokepen=newobj;}}else{if(oldobj){s.strokepen=null;}}this._drawflags|=8;if(newobj){var lineW=newobj._width||0;if(this._strokewidth!=lineW){this._strokewidth=lineW;if(lineW%2){this._isOddStrokeWidth=true;}else{this._isOddStrokeWidth=false;}this._bounds=null;this._globalBounds=null;}}else{if(this._strokewidth!=0){this._strokewidth=0;this._isOddStrokeWidth=false;}}this._changedStrokepen=true;}};_pGraphicsObject.set_fillstyle=function(val){var s=this._style,oldval=this.fillstyle,oldobj,newobj;if(oldval!=val){this._isGradation=false;this.fillstyle=val;oldobj=s.fillstyle;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.BackgroundObject(val);s.fillstyle=newobj;}}else{if(oldobj){s.fillstyle=null;}}this._drawflags|=8;this._changedFillstyle=true;if(newobj&&newobj.gradient){newobj.gradient._parseInfo(newobj.value);this._isGradation=true;}}};_pGraphicsObject.set_strokejoin=function(val){var s=this._style,oldval=this.strokejoin,oldobj,newobj;if(oldval!=val){this.strokejoin=val;oldobj=s.strokejoin;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.CSSValueObject(val);s.strokejoin=newobj;}}else{if(oldobj){s.strokejoin=null;}}this._drawflags|=8;this._changedStrokejoin=true;}};_pGraphicsObject.set_strokecap=function(val){var s=this._style,oldval=this.strokecap,oldobj,newobj;if(oldval!=val){this.strokecap=val;oldobj=s.strokecap;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.CSSValueObject(val);s.strokecap=newobj;}}else{if(oldobj){s.strokecap=null;}}this._drawflags|=8;this._changedStrokecap=true;}};_pGraphicsObject.set_miterlimit=function(val){if(!nexacro._ChartGraphicsLib.isNumber(val)){return;}if(val!=this.miterlimit){this.miterlimit=val;this._drawflags|=8;this._changedMiterlimit=true;}};_pGraphicsObject.set_visible=function(v){if(v==null){v=true;}v=nexacro._toBoolean(v);if(v!==this.visible){this.visible=v;var p=this.parent;if(p){p._drawflags|=4;}}};_pGraphicsObject.set_id=function(v){if(v!=this.id){this.id=this._id=v;}};_pGraphicsObject.set_opacity=function(v){if(v==null){this.opacity=1;return;}else if(v<0){this.opacity=0;return;}this.opacity=v;};_pGraphicsObject.set_x=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.x){this.translate(v-this.x,0);this.x=v;var pos=this.getCenter();this.cx=pos.x;}};_pGraphicsObject.set_y=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.y){this.translate(0,v-this.y);this.y=v;var pos=this.getCenter();this.cy=pos.y;}};_pGraphicsObject.set_cx=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.cx){var pos=this.getCenter();if(pos.x!=v){this.translate(v-pos.x,0);this.cx=v;this.x+=(v-pos.x);}}};_pGraphicsObject.set_cy=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.cy){var pos=this.getCenter();if(pos.y!=v){this.translate(0,v-pos.y);this.cy=v;this.y+=(v-pos.y);}}};_pGraphicsObject.setClipPathBaseRect=function(x,y,baserect,offsetw,offseth){var baseWidth=baserect.width-offsetw;var baseHeight=baserect.height-offseth;this.setClipPath(new nexacro.Rect( -x, -y,baseWidth,baseHeight));};_pGraphicsObject.setClipPath=function(v){if(!v){return;}if(!(v instanceof nexacro.Rect)){return;}var clipitems=this._clipitems;if(!clipitems){clipitems=[];this._clipitems=clipitems;}clipitems.push(v);};_pGraphicsObject.setPoint=function(v){if(v!=this._point){var argLen=arguments.length;if(argLen==0){return;}if(v==null){this.translate( -this.x, -this.y);this.x=0;this.y=0;}else if(!(v instanceof nexacro.Point)){var y=arguments[1];if(this.x!=v||this.y!=y){this.translate(v-this.x,y-this.y);this.x=v;this.y=y;}}else{if(this.x!=v.x||this.y!=v.y){this.translate(v.x-this.x,v.y-this.y);this.x=v.x;this.y=v.y;}}}};_pGraphicsObject.setCenter=function(v){var argLen=arguments.length;var pt;if(argLen==0){return;}if(v==null){pt=new nexacro.Point();}else if(!(v instanceof nexacro.Point)){pt=new nexacro.Point(arguments[0],arguments[1]);}else{pt=v;}this.translate(pt.subtract(this.getCenter()));};_pGraphicsObject.getNextSibling=function(){return this._nextsibling;};_pGraphicsObject.getPreviousSibling=function(){return this._isfirstchild?null:this._previoussibling;};_pGraphicsObject.getCX=function(){var pos,pt;if(this instanceof nexacro.ChartGraphicsGroup){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}else{pos=this._center;if(!pos){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}}return pos.x;};_pGraphicsObject.getCY=function(){var pos,pt;if(this instanceof nexacro.ChartGraphicsGroup){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}else{pos=this._center;if(!pos){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}}return pos.y;};_pGraphicsObject.getCenter=function(bArray){var pos,pt;if(this instanceof nexacro.ChartGraphicsGroup){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}else{pos=this._center;if(!pos){pt=this.getBoundRect().getCenterPoint();pos=this._center=new nexacro.Point(pt.x,pt.y);}}if(bArray){return [pos.x,pos.y];}else{return pos;}};_pGraphicsObject.getPoint=function(bArray){if(bArray){return [this.x,this.y];}else{return new nexacro.Point(this.x,this.y);}};_pGraphicsObject.getClipPath=function(){return this._clipitems;};_pGraphicsObject.getBoundRect=function(bCopy,iscurrent){var bounds=this._bounds;if(iscurrent){bounds=null;}if(bounds){return bounds;}var rect=this._getRect(true,iscurrent);if(rect){bounds=this._matrix._transformBounds(rect,null,this.id);if(!iscurrent){this._bounds=bounds;}}if(bCopy){if(bounds){return bounds.clone();}}else{return bounds;}};_pGraphicsObject.translate=function(pt){var m=new nexacro._ChartGraphicsMatrix();if(!((typeof pt)=="object")&&(pt instanceof nexacro.Point)){pt=new nexacro.Point(arguments[0],arguments[1]);}m.translate(pt);return this.transform(m);};_pGraphicsObject.setTransform=function(v){if(nexacro._isString(v)){this._toTransform(v);}else{}};_pGraphicsObject.toString=function(){return this._type_name+"#"+(this.id?this.id+"("+this._hashKey+")":this._hashKey);};_pGraphicsObject.isEmpty=function(){return !(this._firstchild!=null);};_pGraphicsObject.getGlobalBoundRect=function(bCopy,iscurrent){var bounds=this._globalBounds;if(iscurrent){bounds=null;}if(bounds){if(bCopy){return bounds.clone();}else{return bounds;}}var rect=this._getRect(true,iscurrent);if(rect){if(iscurrent){var elems=[this],p=this.parent,pLayerCls=nexacro._ChartGraphicsLayer,m;while(p){elems.unshift(p);if(p instanceof pLayerCls){break;}p=p.parent;}for(var i=0,len=elems.length;i<len;i++ ){if(i==0){if(elems[i] instanceof pLayerCls){m=(elems[i]._matrix?(elems[i].parent._matrix.clone()).concatenate(elems[i]._matrix):elems[i].parent._matrix.clone());}else{m=elems[i]._matrix.clone();}}else{m=(m.clone()).concatenate(elems[i]._matrix);}}if(m){bounds=m._transformBounds(rect,null,this.id);}}else{bounds=(this._globalMatrix||this._matrix)._transformBounds(rect,null,this.id);this._globalBounds=bounds;}}if(bCopy){if(bounds){return bounds.clone();}}else{return bounds;}};_pGraphicsObject.scale=function(x,y,center){if(arguments.length<2||(y instanceof nexacro.Point)){center=y;y=x;}var m=new nexacro._ChartGraphicsMatrix();this.transform(m.scale(x,y,center||this.getCenter()));};_pGraphicsObject.translate=function(pt){var m=new nexacro._ChartGraphicsMatrix();if(!(pt instanceof nexacro.Point)){pt=new nexacro.Point(arguments[0],arguments[1]);}m.translate(pt);return this.transform(m);};_pGraphicsObject.rotate=function(angle,center){if(arguments.length==3){center=new nexacro.Point(arguments[1],arguments[2]);}var m=new nexacro._ChartGraphicsMatrix();this.transform(m.rotate(angle,center||this.getCenter()));};_pGraphicsObject.shear=function(x,y,center){if(arguments.length<2||(y instanceof nexacro.Point)){center=y;y=x;}var m=new nexacro._ChartGraphicsMatrix();this.transform(m.shear(x,y,center||this.getCenter()));};_pGraphicsObject.transform=function(m){var bounds=this._bounds,pos=this._center;this._matrix.preConcatenate(m);this._drawflags|=1;if(bounds&&m.getRotation()%90===0){m._transformBounds(bounds,bounds,this.id);var pt=bounds.getCenterPoint();this._center=new nexacro.Point(pt.x,pt.y);}else if(pos){this._center=m._transformPoint(pos,pos);}};_pGraphicsObject.hitTest=function(pt){var rect=this._getRect();if(rect){return rect.containsPoint(pt);}return false;};_pGraphicsObject._reMoveParent=function(){var parent=this.parent;if(parent){var re=parent.removeChild(this);if(re!=this){return false;}delete parent._idCache;delete parent._children;delete parent._totalItems;}};_pGraphicsObject.destroy=function(){this._reMoveParent();this.id=null;this.strokepen=null;this.fillstyle=null;this.x=null;this.y=null;this.cx=null;this.cy=null;this.visible=null;this.opacity=null;this.strokejoin=null;this.cursor=null;this.strokecap=null;this.miterlimit=null;this._id=null;this._center=null;this._clipitems=null;this._nextsibling=null;this._previoussibling=null;this._firstchild=null;this._isfirstchild=null;this._nonscalingstroke=null;this._matrix=null;this._drawflags=null;this._painted=null;this._type=null;this.__readArgs=null;this._childidx_map=null;nexacro.Object.prototype.destroy.call(this);return true;};_pGraphicsObject._getItemById=function(val){var elem;if(this._firstchild){var idCache=this._idCache;if(!idCache||idCache._childchanged!=this._childchanged){idCache={};this._idCache=idCache;idCache._childchanged=this._childchanged;elem=this._firstchild;for(;elem;elem=elem._nextsibling){if(elem._id){idCache[elem._id]=elem;}}}var res=idCache[val];if(!res){elem=this._firstchild;for(;elem;elem=elem._nextsibling){if(elem._firstchild){res=elem._getItemById(val);if(res){break;}}}return res;}return res;}};_pGraphicsObject._overrideChild=function(newChild,refChild){this._insertBefore(newChild,refChild,true);this._removeChild(refChild,true);};_pGraphicsObject._insertBefore=function(newChild,refChild,no_check_id){if(!no_check_id&&this._childidx_map[newChild.id]){throw nexacro.MakeNativeError(this,"native_exist_id",newChild.id);}if(refChild&&refChild.parent!=this){trace("refChild' parent error");return;}if(newChild==refChild){refChild=refChild.getNextSibling();this.removeChild(newChild);this.insertChild(newChild,refChild);return newChild;}var oldparent=newChild.parent;if(oldparent){oldparent.removeChild(newChild);}newChild.parent=this;if(!no_check_id){this._childidx_map[newChild.id]=true;}this.childlength++ ;if(!this._firstchild){this._firstchild=newChild;newChild._isfirstchild=true;newChild._previoussibling=newChild;}else{if(!refChild){var lastChild=this._firstchild._previoussibling;lastChild._nextsibling=newChild;newChild._previoussibling=lastChild;this._firstchild._previoussibling=newChild;}else{var firstChild=this._firstchild;if(refChild==firstChild){firstChild._isfirstchild=false;newChild._nextsibling=firstChild;newChild._previoussibling=firstChild._previoussibling;firstChild._previoussibling=newChild;this._firstchild=newChild;newChild._isfirstchild=true;}else{var prev=refChild._previoussibling;newChild._nextsibling=refChild;prev._nextsibling=newChild;refChild._previoussibling=newChild;newChild._previoussibling=prev;}}}this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}var childListCache=this._childListCache;if(childListCache){if(childListCache.flength!= -1){childListCache.flength++ ;}if(childListCache.fchildindex!= -1){if(refChild&&childListCache.fchild==refChild){childListCache.fchild=newChild;}else{childListCache.fchildindex= -1;}}}return newChild;};_pGraphicsObject._removeChild=function(oldChild,no_check_id){if(oldChild&&oldChild.parent!=this){}var childListCache=this._childListCache;if(childListCache){if(childListCache.flength!= -1){childListCache.flength-- ;}if(childListCache.fchildindex!= -1){if(childListCache.fchild==oldChild){childListCache.fchildindex-- ;childListCache.fchild=oldChild.getPreviousSibling();}else{childListCache.fchildindex= -1;}}}if(oldChild==this._firstchild){oldChild._isfirstchild=false;this._firstchild=oldChild._nextsibling;var firstChild=this._firstchild;if(firstChild){firstChild._isfirstchild=true;firstChild._previoussibling=oldChild._previoussibling;}}else{var prev=oldChild._previoussibling;var next=oldChild._nextsibling;prev._nextsibling=next;if(!next){this._firstchild._previoussibling=prev;}else{next._previoussibling=prev;}}if(!no_check_id){this._childidx_map[oldChild.id]=undefined;}this.childlength-- ;oldChild._remove(true);oldChild.parent=null;oldChild._nextsibling=null;oldChild._previoussibling=null;this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}return oldChild;};_pGraphicsObject._getStrokeWidth=function(){return this._strokewidth||0;};_pGraphicsObject._getRect=function(bStrokeWidth,iscurrent){var child=this._firstchild;if(!child){return new nexacro.Rect();}var rect=this._rect;if(iscurrent){rect=null;}if(!rect){var x1=Infinity,x2= -x1,y1=x1,y2=x2;for(;child!=null;child=child._nextsibling){if(child.visible&&!child.isEmpty()){rect=child.getBoundRect(false,iscurrent);x1=Math.min(rect.left,x1);y1=Math.min(rect.top,y1);x2=Math.max(rect.left+rect.width,x2);y2=Math.max(rect.top+rect.height,y2);}}rect=isFinite(x1)?new nexacro.Rect(x1,y1,x2-x1,y2-y1):new nexacro.Rect();if(!iscurrent){this._rect=rect;}}if(bStrokeWidth){rect=rect.expand(this._getStrokeWidth()/2);}return rect;};_pGraphicsObject._getTransform=function(){var m=this._matrix.clone(),xyM=new nexacro._ChartGraphicsMatrix();xyM.translate( -this.x-(this._dx||0), -this.y-(this._dy||0));m.preConcatenate(xyM);if(m.isIdentity()){return "";}var fmtNubmer=nexacro._ChartGraphicsClassUtils.fmtNumber;var decomposed=m.decompose();if(decomposed&&!decomposed.shearing){var parts=[],angle=decomposed.rotation,trans=decomposed.translation,scale=decomposed.scaling;if(!trans.isZero()){parts.push('translate('+fmtNubmer(trans.x)+","+fmtNubmer(trans.y)+')');}if(!nexacro._ChartGraphicsMathUtil.isZero(scale.x-1)||!nexacro._ChartGraphicsMathUtil.isZero(scale.y-1)){parts.push('scale('+fmtNubmer(scale.x)+","+fmtNubmer(scale.y)+')');}if(angle){parts.push('rotate('+fmtNubmer(angle)+')');}return parts.join(' ');}else{return 'matrix('+m.getValues().join(',')+')';}};_pGraphicsObject._toTransform=function(str){var attrs={};if(str){for(var i in str=str.match(/(\w+\((\-?\d+\.?\d*,?|(\s+?))+\))+/g)){if(str[i].match){var c=str[i].match(/[\w\.\-]+/g);attrs[c.shift()]=c;}}}var m=new nexacro._ChartGraphicsMatrix(),val,shearX,shearY;for(var cmd in attrs){val=attrs[cmd];switch(cmd){case "translate":if(val.length==1){m.translate(parseFloat(val[0]),0);}else{m.translate(parseFloat(val[0]),parseFloat(val[1]));}break;case "rotate":if(val.length==1){m.rotate(parseFloat(val[0]));}else{m.rotate(parseFloat(val[0]),parseFloat(val[1]),parseFloat(val[2]));}break;case "scale":if(val.length==1){m.scale(parseFloat(val[0]),parseFloat(val[0]));}else{m.scale(parseFloat(val[0]),parseFloat(val[1]));}break;case "matrix":m.set(parseFloat(val[0]),parseFloat(val[2]),parseFloat(val[1]),parseFloat(val[3]),parseFloat(val[4]),parseFloat(val[5]));break;case "skew":if(val.length==1){shearX=shearY=Math.tan(parseFloat(val[0])*nexacro._ChartGraphicsMatrix.DEGTORAD);}else{shearX=Math.tan(parseFloat(val[0])*nexacro._ChartGraphicsMatrix.DEGTORAD);shearY=Math.tan(parseFloat(val[1])*nexacro._ChartGraphicsMatrix.DEGTORAD);}break;}}if(shearX!=null||shearY!=null){m.shear(shearX||0,shearY||0);}if(this._type){m.translate(this.x+(this._dx||0),this.y+(this._dy||0));this._matrix.constructor(m);this._drawflags|=1;}return m;};_pGraphicsObject._setOldGlobalBounds=function(){if((this._painted&(1|2|4))&&!this._oldGlobalBounds){this._oldGlobalBounds=this.getGlobalBoundRect(true);}};_pGraphicsObject._getOwnerLayer=function(){var ownerLayer=this._ownerLayer;if(!ownerLayer){var p=this.parent,pLayerCls=nexacro._ChartGraphicsLayer;while(p){if(p instanceof pLayerCls){ownerLayer=p;break;}p=p.parent;}this._ownerLayer=ownerLayer;}return ownerLayer;};_pGraphicsObject._updateStyles=function(ctx,sizeChanged){var sysstyle=this._renderstyle;if(!sysstyle){sysstyle={};this._renderstyle=sysstyle;}var style=this._style;if(this._changedShadow){this._updateShadow(style.shadow,sysstyle);this._changedShadow=false;}if(this._changedStrokepen){this._updateStrokePen(style.strokepen,sysstyle);this._changedStrokepen=false;}if(this._changedFillstyle||sizeChanged){this._updateFill(style.fillstyle,sysstyle,ctx);this._changedFillstyle=false;}ctx.setElementGlobalAlpha(this._globalAlpha);if(this._changedStrokejoin){this._updateStrokeJoin(style.strokejoin,sysstyle);this._changedStrokejoin=false;}if(this._changedStrokecap){this._updateStrokeCap(style.strokecap,sysstyle);this._changedStrokecap=false;}if(this._changedMiterlimit){sysstyle._miterlimit=parseInt(this.miterlimit);this._changedMiterlimit=false;}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){}else{_pGraphicsObject._updateStrokePen=function(strokePenObj,sys_style){if(strokePenObj){var canvasval=strokePenObj._syscanvasval;if(!canvasval){var substyle=strokePenObj.style;canvasval={};if(substyle=="none"){canvasval._width=null;canvasval._strokecolor=null;}else{canvasval._width=strokePenObj._width;canvasval._strokecolor=strokePenObj.color;canvasval._linetype=substyle;}strokePenObj._syscanvasval=canvasval;}sys_style._linetype=canvasval._linetype;sys_style._width=canvasval._width;sys_style._strokecolor=canvasval._strokecolor;}else{sys_style._width=null;sys_style._strokecolor=null;sys_style._linetype="none";}};_pGraphicsObject._updateShadow=function(shadowObj,sys_style){if(shadowObj){var canvasval=shadowObj._syscanvasval;if(!canvasval){canvasval={};canvasval._shadow=shadowObj;shadowObj._syscanvasval=canvasval;}sys_style._shadow=canvasval._shadow;}else{sys_style._shadow=null;}};}_pGraphicsObject._updateFill=function(fillstyleObj,sys_style,ctx){if(fillstyleObj){var canvasval=fillstyleObj._syscanvasval;if(!canvasval||this._isGradation){if(this._isGradation){var fillGradationObj;fillGradationObj=fillstyleObj.gradient;if(fillGradationObj){var gradationsubstyle=fillGradationObj.style,gradationpoint=fillGradationObj.point,startPt,endPt,ctxGradient;var bounds=this._getRect();if(gradationsubstyle=="linear"){startPt=new nexacro.Point(bounds.width*gradationpoint.startX/100,bounds.height*gradationpoint.startY/100);endPt=new nexacro.Point(bounds.width*gradationpoint.endX/100,bounds.height*gradationpoint.endY/100);startPt.x+=bounds.left;startPt.y+=bounds.top;endPt.x+=bounds.left;endPt.y+=bounds.top;ctxGradient=ctx.createLinearGradient(startPt.x,startPt.y,endPt.x,endPt.y);nexacro._ChartGraphicsLibArray.forEach(fillGradationObj.color_stops,function(o,index){ctxGradient.addColorStop(o.percents,o.color);});canvasval=ctxGradient;}else if(gradationsubstyle=="radial"){if(gradationpoint.centerX!==undefined){ctxGradient=ctx.createRadialGradient(gradationpoint.centerX,gradationpoint.centerY,gradationpoint.innerRadius,gradationpoint.centerX,gradationpoint.centerY,gradationpoint.radius);nexacro._ChartGraphicsLibArray.forEach(fillGradationObj.color_stops,function(o,index){ctxGradient.addColorStop(o.percents,o.color);});}else{startPt=new nexacro.Point(bounds.width*gradationpoint.startX/100,bounds.height*gradationpoint.startY/100);endPt=new nexacro.Point(bounds.width*gradationpoint.endX/100,bounds.height*gradationpoint.endY/100);startPt.x+=bounds.left;startPt.y+=bounds.top;endPt.x+=bounds.left;endPt.y+=bounds.top;var startRadius=bounds.width*(fillGradationObj.startradius?fillGradationObj.startradius:0);var endRadius=bounds.width*(fillGradationObj.endradius?fillGradationObj.endradius:0.9);ctxGradient=ctx.createRadialGradient(startPt.x,startPt.y,startRadius,endPt.x,endPt.y,endRadius);nexacro._ChartGraphicsLibArray.forEach(fillGradationObj.color_stops,function(o,index){ctxGradient.addColorStop(o.percents,o.color);});}canvasval=ctxGradient;}else{canvasval=fillstyleObj.color;}}}else{canvasval=fillstyleObj.color;}fillstyleObj._syscanvasval=canvasval;}sys_style._fillcolor=canvasval;}else{sys_style._fillcolor=null;}};_pGraphicsObject._updateStrokeJoin=function(strokejoinObj,sys_style){if(strokejoinObj){var tmpval=strokejoinObj.value;sys_style._strokejoin=tmpval;}else{sys_style._strokejoin=null;}};_pGraphicsObject._updateStrokeCap=function(strokecapObj,sys_style){if(strokecapObj){var tmpval=strokecapObj.value;if(tmpval=="flat"){sys_style._strokecap="butt";}else{sys_style._strokecap=tmpval;}}else{sys_style._strokecap=null;}};_pGraphicsObject._getItemsByFilter=function(propNm,val){if(this._firstchild){var filterCache=this._filterCache;if(!filterCache){filterCache={};this._filterCache=filterCache;}var selectorkey=propNm+"_"+val,cached=filterCache[selectorkey],elem,elems,res,retvals=[],arr=[],seq;if(!cached){cached={pElement:this,propertyNm:propNm,value:val,elements:null};filterCache[selectorkey]=cached;}if(cached._childchanged!=this._childchanged){arr=[];seq=0;elem=this._firstchild;if(val=="*"){for(;elem;elem=elem._nextsibling){arr[seq]=elem;seq++ ;}}else{for(;elem;elem=elem._nextsibling){if(elem[propNm]==val){arr[seq]=elem;seq++ ;}}}cached.elements=arr;cached._childchanged=this._childchanged;}elem=this._firstchild;elems=cached.elements;res=elems.slice(0);retvals=[];seq=0;for(;elem;elem=elem._nextsibling){if(elem._firstchild){seq++ ;retvals=elem._getItemsByFilter(propNm,val);retvals.unshift(seq,0);res.splice.apply(res,retvals);seq+=retvals.length-2;}else{seq++ ;}}return res;}else{return null;}};_pGraphicsObject._setGlobalTransforms=function(pMatrix){this._globalMatrix=(pMatrix?(pMatrix.clone()).concatenate(this._matrix):this._matrix.clone());};_pGraphicsObject._render=function(ctx){var style=this._renderstyle,m=this._globalMatrix;if(m&&style){var isScalingStroke=this._type=="Image"||this._type=="Text"||this._nonscalingstroke!==true;this._painted=1;ctx.save();if(isScalingStroke){m.applyToContext(ctx,this);}var clipItems=this._clipitems;if(this.parent&&this.parent._type=="Paths"&&!clipItems){clipItems=this.parent._clipitems;}if(clipItems&&clipItems.length){ctx.beginPath();for(var i=0,len=clipItems.length;i<len;i++ ){var rect=clipItems[i];ctx.rect(rect.left,rect.top,rect.width,rect.height);}ctx.closePath();ctx.clip();}this._applystyles(ctx,style);this._drawShape(ctx,(isScalingStroke?null:m));if((this._type_name!="GraphicsImage"||(this._type_name=="GraphicsImage"&&!this._imageloaded))){var fillColor=style._fillcolor,strokeColor=style._strokecolor;if(fillColor){ctx.fill();this._painted|=4;}if(strokeColor){ctx.stroke();this._painted|=2;}}ctx.restore();}if(this._painted&(2|4)){}else{if(this.visible){if(this._drawflags&&this._drawflags&(1|2|4)){this._painted|=2;}else{this._painted=0;}}if(!this.visible){this._painting=2;}}};if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){}else{_pGraphicsObject._applystyles=function(ctx,style){if(!style){return;}if(ctx){var width=style._width,join=style._strokejoin,cap=style._strokecap,limit=style._miterlimit,fillColor=style._fillcolor,strokeColor=style._strokecolor,lineType=style._linetype,font=style._font;var shadow=style._shadow;if(shadow){try{ctx.setElementShadowOffsetX(shadow.getOffsetX());ctx.setElementShadowOffsetY(shadow.getOffsetY());ctx.setElementShadowBlur(shadow.getBlur());ctx.setElementShadowColor(shadow.getColor());}catch(e){}}else{ctx.setElementShadowOffsetX(0);ctx.setElementShadowOffsetY(0);ctx.setElementShadowBlur(0);}if(width!=null){ctx.setElementLineWidth(width);}if(join){ctx.setElementLineJoin(join);}if(cap){ctx.setElementLineCap(cap);}if(limit){ctx.setElementMiterLimit(limit);}if(font){ctx.setElementFont(font);}if(fillColor){ctx.setElementFillStyle(fillColor);}if(strokeColor){ctx.setElementStrokeStyle(strokeColor);}if(lineType){ctx.setElementLineStyle(lineType);}}};}_pGraphicsObject._getSharperOffset=function(x,y){var ret=[];if(this._isOddStrokeWidth){if((~~(x))==x){ret[0]=0;}else{ret[0]=0.5;}if((~~(y))==y){ret[1]=0;}else{ret[1]=0.5;}}else{if((~~(x))==x){ret[0]=0.5;}else{ret[0]=0;}if((~~(y))==y){ret[1]=0.5;}else{ret[1]=0;}}return ret;};_pGraphicsObject._drawShape=function(ctx,strokeMatrix){var rect=this._getRect(),w=rect.width,h=rect.height,x=rect.left,y=rect.top;var gap=0;if(this._isOddStrokeWidth){gap=0.5;}ctx.beginPath();if(strokeMatrix){var coords=[x,y,x+w,y+h];strokeMatrix._transformCoordinates(coords,0,coords,0,2);ctx.rect(parseInt(coords[0])+gap,parseInt(coords[1])+gap,parseInt(coords[2]-coords[0]),parseInt(coords[3]-coords[1]));}else{ctx.rect(x+gap,y+gap,w,h);}ctx.closePath();};_pGraphicsObject._remove=function(deep,notDirty){if(!notDirty&&this._painted&(1|2|4)){var layer=this._getOwnerLayer();if(layer){layer._addDirty(this._oldGlobalBounds,this);if(this.parent._quadtree){this.parent._quadtree.remove(this);}}}if(deep){var node=this._firstchild;for(;node;node=node._nextsibling){node._remove(true,true);}}};}if(!nexacro._ChartGraphicsShape){nexacro._ChartGraphicsShape=function(){nexacro._ChartGraphicsObject.prototype.constructor.apply(this,arguments);var read=this.__readArgs;var sz=arguments[read];if(sz instanceof nexacro._ChartGraphicsSize){read++ ;this._size=sz.clone();this._drawflags|=2;}else if(nexacro._ChartGraphicsLib.isNumber(sz)&&nexacro._ChartGraphicsLib.isNumber(arguments[read+1])){this._size=new nexacro._ChartGraphicsSize(sz,arguments[read+1]);read+=2;this._drawflags|=2;}var pos=this.getCenter();this.cx=pos.x;this.cy=pos.y;this.__readArgs=read;};var _pGraphicsShape=nexacro._ChartGraphicsShape.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro._ChartGraphicsShape);_pGraphicsShape._type_name="_GraphicsShape";_pGraphicsShape.width=0;_pGraphicsShape.height=0;_pGraphicsShape.set_width=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.width){this.width=v;}var sz=this._size;if(sz){if(sz.width!=v){sz.width=v;this._drawflags|=2;}}else{this._size=new nexacro._ChartGraphicsSize(v,0);this._drawflags|=2;}};_pGraphicsShape.set_height=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.height){this.height=v;}var sz=this._size;if(sz){if(sz.height!=v){sz.height=v;this._drawflags|=2;}}else{this._size=new nexacro._ChartGraphicsSize(0,v);this._drawflags|=2;}};_pGraphicsShape.destroy=function(){this.width=null;this.height=null;this._size=null;nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsShape.getSize=function(bArray){var sz=this._size;if(bArray){return [sz.width,sz.height];}else{return sz;}};_pGraphicsShape.isEmpty=function(){var sz=this._size;if(sz){return sz.width<=0||sz.height<=0;}return true;};_pGraphicsShape._getRect=function(bStrokeWidth,iscurrent){var rect=this._rect;if(iscurrent){rect=null;}if(!rect){var size=this._size;if(size){rect=new nexacro.Rect(0,0,size.width||0,size.height||0);}else{rect=new nexacro.Rect();}if(!iscurrent){this._rect=rect;}}if(bStrokeWidth){rect=rect.expand(this._getStrokeWidth()/2);}return rect;};}if(!nexacro.ChartGraphicsRect){nexacro.ChartGraphicsRect=function(){this._type="Rect";nexacro._ChartGraphicsShape.prototype.constructor.apply(this,arguments);var read=this.__readArgs;if(arguments[read]>0){this.radiusx=arguments[read];}else{this.radiusx=0;}if(arguments[read+1]>0){this.radiusy=arguments[read+1];}else{this.radiusy=0;}this._drawflags|=8;this.radiusround={tl:0,tr:0,br:0,bl:0};};var _pGraphicsRect=nexacro.ChartGraphicsRect.prototype=nexacro._createPrototype(nexacro._ChartGraphicsShape,nexacro.ChartGraphicsRect);_pGraphicsRect._type_name="GraphicsRect";_pGraphicsRect.radiusx=0;_pGraphicsRect.radiusy=0;_pGraphicsRect.set_radiusround=function(v){if(v==null){return;}if(typeof v==='number'){v={tl:v,tr:v,br:v,bl:v};}else{var defaultRadius={tl:0,tr:0,br:0,bl:0};for(var side in defaultRadius){v[side]=v[side]||defaultRadius[side];}}if(v!=this.radiusround){this.radiusround=v;this._drawflags|=8;}};_pGraphicsRect.set_radiusx=function(v){if(v==null){return;}if(v!=this.radiusx){this.radiusx=v;this._drawflags|=8;}};_pGraphicsRect.set_radiusy=function(v){if(v==null){return;}if(v!=this.radiusy){this.radiusy=v;this._drawflags|=8;}};_pGraphicsRect.destroy=function(){this.radiusx=null;this.radiusy=null;this.radiusround=null;nexacro._ChartGraphicsShape.prototype.destroy.call(this);};_pGraphicsRect._drawShape=function(ctx,strokeMatrix){var sz=this._size,rx=this.radiusx||0,ry=this.radiusy||0,w=sz.width,h=sz.height,x=0,y=0,mx=w/2,coords,my=h/2;if(rx>mx){rx=mx;}if(ry>my){ry=my;}var isRounded=rx!==0||ry!==0;var gap=0;if(this._isOddStrokeWidth){gap=0.5;}if(!isRounded){isRounded=this.radiusround.tl!==0||this.radiusround.tr!==0||this.radiusround.br!==0||this.radiusround.bl!==0;}if(isRounded){ctx.beginPath();if(strokeMatrix){coords=[x+rx,y,x+w-rx,y,x+w,y,x+w,y+ry,x+w,ry,x+w,y+h-ry,x+w,y+h,x+w-rx,y+h,x+w-rx,y+h,x+rx,y+h,x,y+h,x,y+h-ry,x,y+h-ry,x,y+ry,x,y,x+rx,y,x+rx,y];strokeMatrix._transformCoordinates(coords,0,coords,0,coords.length/2);ctx.moveTo(parseInt(coords[0])+gap+this.radiusround.tl,parseInt(coords[1])+gap);ctx.lineTo(parseInt(coords[2])+gap-this.radiusround.tr,parseInt(coords[3])+gap);ctx.quadraticCurveTo(parseInt(coords[4])+gap,parseInt(coords[5])+gap,parseInt(coords[6])+gap,parseInt(coords[7])+gap,parseInt(coords[8])+gap+this.radiusround.tr,parseInt(coords[9])+gap);ctx.lineTo(parseInt(coords[10])+gap,parseInt(coords[11])+gap-this.radiusround.br);ctx.quadraticCurveTo(parseInt(coords[12])+gap,parseInt(coords[13])+gap,parseInt(coords[14])+gap-this.radiusround.br,parseInt(coords[15])+gap,parseInt(coords[16])+gap,parseInt(coords[17])+gap);ctx.lineTo(parseInt(coords[18])+gap+this.radiusround.bl,parseInt(coords[19])+gap);ctx.quadraticCurveTo(parseInt(coords[20])+gap,parseInt(coords[21])+gap,parseInt(coords[22])+gap,parseInt(coords[23])+gap-this.radiusround.bl,parseInt(coords[24])+gap,parseInt(coords[25])+gap);ctx.lineTo(parseInt(coords[26])+gap,parseInt(coords[27])+gap+this.radiusround.tl);ctx.quadraticCurveTo(parseInt(coords[28])+gap,parseInt(coords[29])+gap,parseInt(coords[30])+gap+this.radiusround.tl,parseInt(coords[31])+gap,parseInt(coords[32])+gap,parseInt(coords[33])+gap);}else{ctx.moveTo(x+rx+gap+this.radiusround.tl,y+gap);ctx.lineTo(x+w-rx+gap-this.radiusround.tr,y+gap);ctx.quadraticCurveTo(x+w+gap,y+gap,x+w+gap,y+ry+gap+this.radiusround.tr,x+w+gap,y+ry+gap);ctx.lineTo(x+w+gap,y+h-ry+gap-this.radiusround.br);ctx.quadraticCurveTo(x+w+gap,y+h+gap,x+w-rx+gap-this.radiusround.br,y+h+gap,x+w-rx+gap,y+h+gap);ctx.lineTo(x+rx+gap+this.radiusround.bl,y+h+gap);ctx.quadraticCurveTo(x+gap,y+h+gap,x+gap,y+h-ry+gap-this.radiusround.bl,x+gap,y+h-ry+gap);ctx.lineTo(x+gap,y+ry+gap+this.radiusround.tl);ctx.quadraticCurveTo(x+gap,y+gap,x+rx+gap+this.radiusround.tl,y+gap,x+rx+gap,y+gap);}ctx.closePath();}else{ctx.beginPath();if(strokeMatrix){coords=[x,y,x+w,y+h];strokeMatrix._transformCoordinates(coords,0,coords,0,2);ctx.rect(parseInt(coords[0])+gap,parseInt(coords[1])+gap,parseInt(coords[2]-coords[0]),parseInt(coords[3]-coords[1]));}else{ctx.rect(x+gap,y+gap,w,h);}ctx.closePath();}};}if(!nexacro.ChartGraphicsEllipse){nexacro.ChartGraphicsEllipse=function(){this._type="Ellipse";nexacro._ChartGraphicsShape.prototype.constructor.apply(this,arguments);};var _pGraphicsEllipse=nexacro.ChartGraphicsEllipse.prototype=nexacro._createPrototype(nexacro._ChartGraphicsShape,nexacro.ChartGraphicsEllipse);_pGraphicsEllipse._type_name="GraphicsEllipse";_pGraphicsEllipse.cx=0;_pGraphicsEllipse.cy=0;_pGraphicsEllipse.set_cx=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.x){this.translate(v-this.x,0);this.cx=v;this.x=v;}};_pGraphicsEllipse.set_cy=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(v!=this.y){this.translate(0,v-this.y);this.cy=v;this.y=v;}};_pGraphicsEllipse.destroy=function(){this.cx=null;this.cy=null;nexacro._ChartGraphicsShape.prototype.destroy.call(this);};_pGraphicsEllipse.getCenter=function(bArray){if(bArray){return [this.x,this.y];}else{return new nexacro.Point(this.x,this.y);}};_pGraphicsEllipse.setCenter=function(v){var argLen=arguments.length;if(argLen==0){return;}if(v==null){this.translate( -this.x, -this.y);this.x=0;this.y=0;}else if(!(v instanceof nexacro.Point)){var y=arguments[1];if(this.x!=v||this.y!=y){this.translate(v-this.x,y-this.y);this.x=v;this.y=y;}}else{if(this.x!=v.x||this.y!=v.y){this.translate(v.x-this.x,v.y-this.y);this.x=v.x;this.y=v.y;}}};_pGraphicsEllipse.hitTest=function(pt){var sz=this._size;if(sz){return pt.divide(sz.width,sz.height).getLength()<=0.5;}return false;};_pGraphicsEllipse._drawShape=function(ctx,strokeMatrix){var sz=this._size,w=sz.width,coords,h=sz.height;if(w==h){ctx.beginPath();if(strokeMatrix){coords=[0,0,(w+h)/4,0];strokeMatrix._transformCoordinates(coords,0,coords,0,coords.length/2);ctx.arc(coords[0],coords[1],coords[2],coords[3],Math.PI*2,true);}else{ctx.arc(0,0,(w+h)/4,0,Math.PI*2,true);}}else{ctx.beginPath();var mx=w/2,my=h/2,kappa=nexacro._ChartGraphicsMathUtil._KAPPA,cx=mx*kappa,cy=my*kappa;if(strokeMatrix){coords=[ -mx,0, -mx, -cy, -cx, -my,0, -my,cx, -my,mx, -cy,mx,0,mx,cy,cx,my,0,my, -cx,my, -mx,cy, -mx,0];strokeMatrix._transformCoordinates(coords,0,coords,0,coords.length/2);ctx.moveTo(coords[0],coords[1]);ctx.bezierCurveTo(coords[2],coords[3],coords[4],coords[5],coords[6],coords[7]);ctx.bezierCurveTo(coords[8],coords[9],coords[10],coords[11],coords[12],coords[13]);ctx.bezierCurveTo(coords[14],coords[15],coords[16],coords[17],coords[18],coords[19]);ctx.bezierCurveTo(coords[20],coords[21],coords[22],coords[23],coords[24],coords[25]);}else{ctx.moveTo( -mx,0);ctx.bezierCurveTo( -mx, -cy, -cx, -my,0, -my);ctx.bezierCurveTo(cx, -my,mx, -cy,mx,0);ctx.bezierCurveTo(mx,cy,cx,my,0,my);ctx.bezierCurveTo( -cx,my, -mx,cy, -mx,0);}ctx.closePath();}};_pGraphicsEllipse._getRect=function(bStrokeWidth,iscurrent){var rect=this._rect;if(iscurrent){rect=null;}if(!rect){rect=new nexacro.Rect(0,0,this._size.width,this._size.height).setCenterPoint(0,0);if(!iscurrent){this._rect=rect;}}if(bStrokeWidth){rect=rect.expand(this._getStrokeWidth()/2);}return rect;};}if(!nexacro.ChartGraphicsText){nexacro.ChartGraphicsText=function(){this._type="Text";nexacro._ChartGraphicsObject.prototype.constructor.apply(this,arguments);var read=this.__readArgs;if(arguments[read]!=null){this.set_text(arguments[read]);}};var _pGraphicsText=nexacro.ChartGraphicsText.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro.ChartGraphicsText);_pGraphicsText._type_name="GraphicsText";_pGraphicsText.font="";_pGraphicsText.text="";_pGraphicsText.width="";_pGraphicsText.color="";_pGraphicsText.dx=0;_pGraphicsText.dy=0;_pGraphicsText.textAlign="left";_pGraphicsText.verticalAlign="bottom";_pGraphicsText.wordWrap="";_pGraphicsText.set_font=function(v){var s=this._style,oldval=this.font,oldobj,newobj;if(oldval!=v){this.font=v;oldobj=s.font;if(v){if(oldobj==null||oldobj.value!=v){newobj=nexacro.FontObject(v);s.font=newobj;}}else{if(oldobj){s.font=null;}}this._drawflags|=(2|8);this._changedFont=true;}};_pGraphicsText.set_color=function(v){this.color=v;nexacro._ChartGraphicsObject.prototype.set_fillstyle.call(this,v);};_pGraphicsText.set_textAlign=function(v){if(!/^(left|center|right)$/.test(v)){return;}if(this.textAlign!=v){this.textAlign=v;this._drawflags|=(1|8);this._alignChanged=true;}};_pGraphicsText.set_verticalAlign=function(v){if(!/^(top|middle|bottom)$/.test(v)){return;}if(this.verticalAlign!=v){this.verticalAlign=v;this._drawflags|=(1|8);this._alignChanged=true;}};_pGraphicsText.set_text=function(v){if(!nexacro._isString(v)){if(!nexacro._ChartGraphicsLib.isEmpty(v)){v=v.toString();}else{v="";}}if(this.text!=v){this.text=v;this._drawflags|=4;this._textChanged=true;}};_pGraphicsText.set_dx=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(this.dx!=v){this.translate(v-(this.dx||0),0);this.dx=v;}};_pGraphicsText.set_dy=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(this.dy!=v){this.translate(0,v-(this.dy||0));this.dy=v;}};_pGraphicsText.set_wordWrap=function(v){v=nexacro._toBoolean(v);if(this.wordWrap!==v){this.wordWrap=!!v;this._drawflags|=4;this._wordwrapChanged=true;}};_pGraphicsText.set_width=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}if(this.width!=v){this.width=v;this._drawflags|=2;this._widthChanged=true;}};_pGraphicsText.destroy=function(){this.font=null;this.text=null;this.width=null;this.color=null;this.dx=null;this.dy=null;this.textAlign=null;this.verticalAlign=null;this.wordWrap=null;nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsText.isEmpty=function(){var sz=this._getRect();return sz.width<=0||sz.height<=0;};_pGraphicsText._updateStyles=function(ctx,sizeChanged){this._updateText();nexacro._ChartGraphicsObject.prototype._updateStyles.apply(this,[ctx,sizeChanged]);};_pGraphicsText._updateText=function(){var sysstyle=this._renderstyle,style=this._style;if(!sysstyle){sysstyle={};this._renderstyle=sysstyle;}if(this._textChanged||this._changedFont||this._wordwrapChanged||this._widthChanged){var font=style.font;if(this._changedFont){this._updateFontInCanvas(font,sysstyle);if(font){var sz=nexacro.getTextSize("Wj",font);this._lineHeight=sz.ny;}else{this._lineHeight=0;}this._changedFont=false;}var txt=this.text;if(font&&txt&&txt.length&&this._lineHeight){this._lines=nexacro._ChartGraphicsLib._getLines(font,txt,this.wordWrap,this.width);this._txtSize=nexacro._ChartGraphicsLib._getTextSize(font,this._lines,this._lineHeight);}else{this._lines=null;this._txtSize=[0,0];}this._textChanged=false;this._widthChanged=false;this._wordwrapChanged=false;}else{if(!this._txtSize){this._txtSize=[0,0];}}};_pGraphicsText._updateFontInCanvas=function(nexacroFont,sys_style){if(nexacroFont){sys_style._font=nexacroFont;}else{sys_style._font=null;}};_pGraphicsText._getRect=function(bStrokeWidth,iscurrent){var rect=this._rect;if(iscurrent){rect=null;}if(!rect||this._changedFont||this._textChanged||this._wordwrapChanged||this._widthChanged||this._alignChanged){this._updateText();var txtSz=this._txtSize;rect=new nexacro.Rect(0,0,txtSz[0],txtSz[1]);switch(this.textAlign){case "left":break;case "center":rect.left= -(txtSz[0]/2);break;case "right":rect.left= -txtSz[0];break;}switch(this.verticalAlign){case "top":break;case "middle":rect.top= -(txtSz[1]/2);break;case "bottom":rect.top= -txtSz[1];break;}rect.left-=1;rect.top-=1;rect.width+=6;rect.height+=6;rect.right=rect.left+rect.width;rect.bottom=rect.top+rect.height;if(!iscurrent){this._rect=rect;}this._alignChanged=false;}return rect;};_pGraphicsText._render=function(ctx){var style=this._renderstyle;var m=this._globalMatrix;var lineHeight=this._lineHeight;var i,len=0,yGap;if(style&&m){this._painted|=1;ctx.save();m.applyToContext(ctx);var clipItems=this._clipitems;if(clipItems&&clipItems.length){ctx.beginPath();len=clipItems.length;for(i=0;i<len;i++ ){var rect=clipItems[i];var txtValign=this.verticalAlign;if(txtValign=="top"){ctx.rect(rect.left,rect.top,rect.width,rect.height);}else if(txtValign=="middle"){ctx.rect(rect.left,rect.top-(lineHeight/2),rect.width,rect.height);}else{ctx.rect(rect.left,rect.top-lineHeight,rect.width,rect.height);}}ctx.closePath();ctx.clip();}this._applystyles(ctx,style);var fillColor=style._fillcolor;var lines=this._lines,x=0;if(lines){switch(this.textAlign){case "left":ctx.setElementTextAlign("start");break;case "center":ctx.setElementTextAlign("center");break;case "right":ctx.setElementTextAlign("end");break;}switch(this.verticalAlign){case "top":ctx.setElementTextBaseline("top");len=lines.length;if(fillColor){for(i=0;i<len;i++ ){ctx.fillText(lines[i],0,i*lineHeight);}this._painted|=4;}break;case "middle":ctx.setElementTextBaseline("middle");if(fillColor){len=lines.length;yGap=(len-1)*lineHeight/2;for(i=0;i<len;i++ ){ctx.fillText(lines[i],0,i*lineHeight-yGap);}this._painted|=4;}break;case "bottom":ctx.setElementTextBaseline("bottom");if(fillColor){len=lines.length;yGap=(len-1)*lineHeight;for(i=0;i<len;i++ ){ctx.fillText(lines[i],0,i*lineHeight-yGap);}this._painted|=4;}break;}}ctx.restore();}};}if(!nexacro.ChartGraphicsImage){nexacro.ChartGraphicsImage=function(){this._type="Image";nexacro._ChartGraphicsShape.prototype.constructor.apply(this,arguments);};var _pGraphicsImage=nexacro.ChartGraphicsImage.prototype=nexacro._createPrototype(nexacro._ChartGraphicsShape,nexacro.ChartGraphicsImage);_pGraphicsImage._type_name="GraphicsImage";_pGraphicsImage.src="";_pGraphicsImage.imagewidth=0;_pGraphicsImage.imageheight=0;_pGraphicsImage._cacheimages=null;_pGraphicsImage._cacheimagesCapacity=null;_pGraphicsImage._cacheimagescnt=null;_pGraphicsImage._redrawparent=null;_pGraphicsImage._redrawcallback=null;_pGraphicsImage.set_src=function(v){if(this.src!=v){this.src=v;var w,h;if(v){this._imageloaded=false;if(nexacro._Browser!="Runtime"){var rurl=this._getRealImageUrl(v);var cacheimages=this._cacheimages,imageobj;if(!this._imgobj){this._imgobj={};}if(cacheimages&&cacheimages[rurl]){imageobj=cacheimages[rurl];this._imgobj.handle=imageobj;w=imageobj.naturalWidth||imageobj.width;h=imageobj.naturalHeight||imageobj.height;this._doingSomethingAfterImageloaded(w,h);}else{imageobj=new Image();var that=this,bindfn=function(){nexacro._stopSysObserving(this,"load","onload",bindfn);that._imageload_callback(rurl,0,0,imageobj);};var image_size=nexacro._getImageSize(rurl,nexacro._emptyFn,this,undefined,imageobj);if(image_size){w=image_size.width;h=image_size.height;this.imagewidth=w;this.imageheight=h;if(this.width<=0){this.set_width(this.imagewidth);}if(this.height<=0){this.set_height(this.imageheight);}}nexacro._observeSysEvent(imageobj,"load","onload",bindfn);imageobj.src=rurl;}}else{if(!this._imgobj){this._imgobj={};}this._imgobj.src=v;this._imgobj.handle=nexacro._getImageObject(v,this._imageload_callback,this,"",false);}}else{this._imgobj=null;this._imageloaded=true;}this._drawflags|=4;}};_pGraphicsImage.destroy=function(){this.src=null;this.imagewidth=null;this.imageheight=null;this._cacheimages=null;this._cacheimagesCapacity=null;this._cacheimagescnt=null;nexacro._ChartGraphicsShape.prototype.destroy.call(this);};_pGraphicsImage.isEmpty=function(){if(this._imgobj){var sz=this._size;if(sz){return sz.width<=0||sz.height<=0;}if(this._imageloaded){return true;}else{return false;}}return true;};_pGraphicsImage._getRealImageUrl=function(url){if(url.substring(0,4).toLowerCase()=="url("){url=url.substring(5,url.length-2);}if(!url||!url.length){return null;}return nexacro._getImageLocation(url);};_pGraphicsImage._imageload_callback=function(url,w,h,imgnode){if(nexacro._Browser!="Runtime"){var cacheimages=this._cacheimages;if(this._cacheimagescnt==null){this._cacheimagescnt=0;this._cacheimagesCapacity=30;}if(!cacheimages){cacheimages={};this._cacheimages=cacheimages;}var width,height;if('naturalHeight' in imgnode){if(imgnode.naturalHeight+imgnode.naturalWidth===0){return;}width=imgnode.naturalWidth;height=imgnode.naturalHeight;}else if(imgnode.width+imgnode.height==0){return;}else{width=imgnode.width;height=imgnode.height;}this._imgobj.handle=imgnode;cacheimages[url]=imgnode;this._cacheimagescnt++ ;if(this._cacheimagescnt>this._cacheimagesCapacity){nexacro._ChartGraphicsLibObject.Each(cacheimages,function(prop,val,object){delete object[prop];this._cacheimagescnt-- ;if(this._cacheimagescnt<this._cacheimagesCapacity){return false;}});}this.imagewidth=width;this.imageheight=height;this._doingSomethingAfterImageloaded(width,height);if(this._redrawparent&&this._redrawcallback){this._redrawcallback.call(this._redrawparent);}}else{this.imagewidth=w;this.imageheight=h;this._doingSomethingAfterImageloaded(w,h);if(this._redrawparent&&this._redrawcallback){this._redrawcallback.call(this._redrawparent);}}};_pGraphicsImage._doingSomethingAfterImageloaded=function(w,h){var sz=this._size,layer,graph;this._imageloaded=true;if(sz==null){this._size=new nexacro._ChartGraphicsSize(w,h);this._drawflags|=2;if(this._needRedarw){this._drawflags|=4;layer=this._getOwnerLayer();graph=layer.parent;graph._delayTask();this._needRedarw=false;}return;}if(sz.width<=0){sz.width=w;this._drawflags|=2;}if(sz.height<=0){sz.height=h;this._drawflags|=2;}if(this._needRedarw){this._drawflags|=4;layer=this._getOwnerLayer();graph=layer.parent;graph._delayTask();this._needRedarw=false;}};_pGraphicsImage._drawShape=function(ctx){if(!this.isEmpty()){if(this._imageloaded){var sz=this._size,w=sz.width,h=sz.height;ctx.drawImage(this._imgobj,0,0,w,h);}else{this._needRedarw=true;}}};}if(!nexacro.ChartGraphicsPath){nexacro.ChartGraphicsPath=function(){this._type="Path";nexacro._ChartGraphicsObject.prototype.constructor.apply(this,arguments);this._closed=false;this._segments=[];};var _pGraphicsPath=nexacro.ChartGraphicsPath.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro.ChartGraphicsPath);_pGraphicsPath._type_name="GraphicsPath";_pGraphicsPath._strokePadding=0;_pGraphicsPath._curveMin=0.00001;_pGraphicsPath._curveMax=1-0.00001;_pGraphicsPath._strokejoin="miter";_pGraphicsPath.destroy=function(){this._closed=null;this._segments=null;this._strokePadding=null;this._curveMin=null;this._curveMax=null;delete this._segments;nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsPath._add=function(segs,index){var segments=this._segments,append=index==null;index=append?segments.length:index;if(append){segments.push.apply(segments,segs);}else{segments.splice.apply(segments,[index,0].concat(segs));}this._drawflags|=4;return segs;};_pGraphicsPath.isEmpty=function(){return this._segments.length===0;};_pGraphicsPath.isClosed=function(){if(this._closed){return true;}return false;};_pGraphicsPath.setClosed=function(closed){if(this._closed!=(closed=!!closed)){this._closed=closed;this._drawflags|=4;}};_pGraphicsPath.removeSegment=function(index){return this.removeSegments(index,index+1)[0]||null;};_pGraphicsPath.removeSegments=function(from,to){from=(from||0);to=(to==null?this._segments.length:to);var segments=this._segments,removed=segments.splice(from,to-from),removedLen=removed.length;if(!removedLen){return removed;}this._drawflags|=4;return removed;};_pGraphicsPath.quadraticCurveTo=function(controlPt,endpt){this.cubicCurveTo(controlPt,endpt,endpt);};_pGraphicsPath.cubicCurveTo=function(control1Pt,control2Pt,endpt){var read=0;if(control1Pt instanceof nexacro.Point){read+=1;}else{control1Pt=new nexacro.Point(arguments[0],arguments[1]);read+=2;}if(arguments[read] instanceof nexacro.Point){control2Pt=arguments[read];read+=1;}else{control2Pt=new nexacro.Point(arguments[read],arguments[read+1]);read+=2;}if(arguments[read] instanceof nexacro.Point){endpt=arguments[read];read+=1;}else{endpt=new nexacro.Point(arguments[read],arguments[read+1]);read+=2;}var current=this._getCurrentSegment();current.outVector=control1Pt;var seg={point:endpt.clone(),inVector:control2Pt.clone(),nextSeg:null};this._add([seg]);};_pGraphicsPath.arcTo=function(pt_,radiusPt,rotation,clockwise,large){var current=this._getCurrentSegment(),from=current.point,to,radius,center,extent,vector,matrix,read=0;if(pt_ instanceof nexacro.Point){to=pt_;read+=1;}else if(nexacro._ChartGraphicsLib.isNumber(arguments[0])&&nexacro._ChartGraphicsLib.isNumber(arguments[1])){to=new nexacro.Point(arguments[0],arguments[1]);read+=2;}if(arguments[read] instanceof nexacro._ChartGraphicsSize){radius=arguments[read];read+=1;}else if(nexacro._ChartGraphicsLib.isNumber(arguments[read])&&nexacro._ChartGraphicsLib.isNumber(arguments[read+1])){radius=new nexacro._ChartGraphicsSize(arguments[read],arguments[read+1]);read+=2;}if(nexacro._ChartGraphicsLib.isNumber(arguments[read])){rotation=arguments[read];read+=1;}if(nexacro._ChartGraphicsLib.isNumber(arguments[read])){clockwise=!!arguments[read];read+=1;}if(nexacro._ChartGraphicsLib.isNumber(arguments[read])){large=!!arguments[read];read+=1;}if(radius&&radius.isZero()){return this.lineTo(to);}var middle=from.add(to).divide(2),pt=from.subtract(middle).rotate( -rotation),x=pt.x,y=pt.y,abs=Math.abs,EPSILON=1e-11,rx=abs(radius.width),ry=abs(radius.height),rxSq=rx*rx,rySq=ry*ry,xSq=x*x,ySq=y*y,out;var factor=Math.sqrt(xSq/rxSq+ySq/rySq);if(factor>1){rx*=factor;ry*=factor;rxSq=rx*rx;rySq=ry*ry;}factor=(rxSq*rySq-rxSq*ySq-rySq*xSq)/(rxSq*ySq+rySq*xSq);if(abs(factor)<EPSILON){factor=0;}if(factor<0){}center=new nexacro.Point(rx*y/ry, -ry*x/rx);center=center.multiply((large===clockwise? -1:1)*Math.sqrt(factor));center=center.rotate(rotation);center=center.add(middle);matrix=new nexacro._ChartGraphicsMatrix().translate(center).rotate(rotation).scale(rx,ry);vector=matrix._inverseTransform(from);if(!vector){return;}extent=vector.getDirectedAngle(matrix._inverseTransform(to));if(!clockwise&&extent>0){extent-=360;}else if(clockwise&&extent<0){extent+=360;}var ext=Math.abs(extent),count=ext>=360?4:Math.ceil(ext/90),inc=extent/count,half=inc*Math.PI/360,z=4/3*Math.sin(half)/(1+Math.cos(half)),segs=[],seg;for(var i=0;i<=count;i++ ){pt=to;out=null;if(i<count){out=vector.rotate(90).multiply(z);if(matrix){pt=matrix._transformPoint(vector);out=matrix._transformPoint(vector.add(out));}else{pt=center.add(vector);}}if(i===0){current.outVector=out;}else{var _in=vector.rotate( -90).multiply(z);if(matrix){_in=matrix._transformPoint(vector.add(_in));}seg={point:pt.clone(),inVector:_in.clone(),outVector:out,nextSeg:null};segs.push(seg);}vector=vector.rotate(inc);}this._add(segs);};_pGraphicsPath.moveTo=function(pt){var argsLen=arguments.length;if(argsLen==2){pt=new nexacro.Point(arguments[0],arguments[1]);}if(this._segments.length===1){this.removeSegment(0);}if(!this._segments.length){var seg={point:pt.clone(),nextSeg:null};this._add([seg]);}};_pGraphicsPath.lineTo=function(pt){var argsLen=arguments.length;if(argsLen==2){pt=new nexacro.Point(arguments[0],arguments[1]);}var seg={point:pt.clone(),nextSeg:null};this._add([seg]);};_pGraphicsPath.closePath=function(){var first=this.getFirstSegment(),last=this.getLastSegment();if(first.point.equals(last.point)){first.inVector=last.inVector;this.removeSegment(this._segments.length-1);}this.setClosed(true);};_pGraphicsPath.getFirstSegment=function(){return this._segments[0];};_pGraphicsPath.getFirstSegment=function(){return this._segments[0];};_pGraphicsPath.getLastSegment=function(){return this._segments[this._segments.length-1];};_pGraphicsPath.getPathData=function(){var segs=this._segments,parts=[];if(segs.length===0){return '';}var mpt=segs[0].point,fmtNumber=nexacro._ChartGraphicsClassUtils.fmtNumber;parts.push('M'+fmtNumber(mpt.x)+','+fmtNumber(mpt.y));for(var i=0,l=segs.length-1;i<l;i++ ){this._getSegPathData(parts,segs[i],segs[i+1],false);}if(this._closed){this._getSegPathData(parts,segs[segs.length-1],segs[0],true);parts.push('Z');}return parts.join('');};_pGraphicsPath.setPathData=function(data){var clsPoint=nexacro.Point;var parts=data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),coords,relative=false,control,l,j,i,current=new nexacro.Point();function getCoord(index,coord,update){var val=parseFloat(coords[index]);if(relative){val+=current[coord];}if(update){current[coord]=val;}return val;}function getPoint(index,update){return new clsPoint(getCoord(index,'x',update),getCoord(index+1,'y',update));}this.removeSegments();for(i=0,l=parts.length;i<l;i++ ){var part=parts[i],cmd=part[0],lower=cmd.toLowerCase();coords=part.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);relative=cmd===lower;var length=coords&&coords.length;switch(lower){case 'm':case 'l':for(j=0;j<length;j+=2){this[j===0&&lower==='m'?'moveTo':'lineTo'](getPoint(j,true));}break;case 'h':case 'v':var coord=lower=='h'?'x':'y';for(j=0;j<length;j++ ){getCoord(j,coord,true);this.lineTo(current);}break;case 'c':for(j=0;j<length;j+=6){this.cubicCurveTo(getPoint(j),control=getPoint(j+2),getPoint(j+4,true));}break;case 's':for(j=0;j<length;j+=4){this.cubicCurveTo(current.multiply(2).subtract(control),control=getPoint(j),getPoint(j+2,true));}break;case 'q':for(j=0;j<length;j+=4){this.quadraticCurveTo(control=getPoint(j),getPoint(j+2,true));}break;case 't':for(j=0;j<length;j+=2){this.quadraticCurveTo(control=current.multiply(2).subtract(control),getPoint(j,true));}break;case 'a':for(j=0;j<length;j+=7){this.arcTo(current=getPoint(j+5),new nexacro._ChartGraphicsSize( +coords[0], +coords[1]), +coords[2], +coords[4], +coords[3]);}break;case 'z':this.closePath();break;}}};_pGraphicsPath.hitTest=function(pt){if(this.isClosed()){return this._contains(pt);}else{var hitsize1=2;var hitsize2=this._strokewidth/2;return this._getStrokeCross(Math.max(hitsize1,hitsize2),pt);}};_pGraphicsPath.contains=function(pt,tolerance){if(!nexacro._ChartGraphicsLib.isNumber(tolerance)){return this._contains(pt);}else{return this._getStrokeCross(tolerance,pt);}};_pGraphicsPath._contains=function(pt){var x=pt.x,y=pt.y;var segments=this._segments,crossings=0,roots=new Array(3),last,previous;if(segments.length<2){return false;}last=this._getValues(segments[segments.length-1],segments[0]);previous=last;var vals,tmpx,tmpy;for(var i=0,l=segments.length-1;i<l;i++ ){vals=this._getValues(segments[i],segments[i+1]);tmpx=vals[0];tmpy=vals[1];if(!(tmpx===vals[2]&&tmpy===vals[3]&&tmpx===vals[4]&&tmpy===vals[5]&&tmpx===vals[6]&&tmpy===vals[7])){crossings+=this._getCrossings(vals,previous,x,y,roots);previous=vals;}}crossings+=this._getCrossings(last,previous,x,y,roots);return (crossings&1)===1;};_pGraphicsPath._getStrokeCross=function(tolerance,pt){var segs=this._segments,i=0,l=0,sz=tolerance/2;if(segs.length===0){return null;}var hitRect=new nexacro.Rect(pt.x-sz,pt.y-sz,tolerance,tolerance);var firstPt=segs[0].point.clone(),args=[],pt2,controlPt1,controlPt2,seg1,seg2;var topLeftPt=new nexacro.Point(hitRect.left,hitRect.top),bottomRightPt=new nexacro.Point(hitRect.getRight(),hitRect.getBottom());while(i<4){args[i]=new nexacro.Point();i++ ;}args[0].x=firstPt.x;args[0].y=firstPt.y;for(i=0,l=segs.length-1;i<l;i++ ){seg1=segs[i];seg2=segs[i+1];pt2=seg2.point;controlPt1=seg1.outVector;controlPt2=seg2.inVector;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){args[1].x=pt2.x;args[1].y=pt2.y;if(this._intersectLineRectangle(args[0],args[1],topLeftPt,bottomRightPt)){return true;}args[0].x=pt2.x;args[0].y=pt2.y;}else{args[1].x=controlPt1.x;args[1].y=controlPt1.y;args[2].x=controlPt2.x;args[2].y=controlPt2.y;args[3].x=pt2.x;args[3].y=pt2.y;if(this._intersectBezier3Rectangle(args[0],args[1],args[2],args[3],topLeftPt,bottomRightPt)){return true;}args[0].x=pt2.x;args[0].y=pt2.y;}}if(this._closed){seg1=segs[segs.length-1];seg2=segs[0];pt2=seg2.point;controlPt1=seg1.outVector;controlPt2=seg2.inVector;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){args[1].x=pt2.x;args[1].y=pt2.y;if(this._intersectLineRectangle(args[0],args[1],topLeftPt,bottomRightPt)){return true;}args[0].x=pt2.x;args[0].y=pt2.y;}else{args[1].x=controlPt1.x;args[1].y=controlPt1.y;args[2].x=controlPt2.x;args[2].y=controlPt2.y;args[3].x=pt2.x;args[3].y=pt2.y;if(this._intersectBezier3Rectangle(args[0],args[1],args[2],args[3],topLeftPt,bottomRightPt)){return true;}args[0].x=pt2.x;args[0].y=pt2.y;}}return false;};_pGraphicsPath._getRect=function(bStrokeWidth,iscurrent){var rect=this._rect;if(iscurrent){rect=null;}if(!rect){var segs=this._segments;if(segs.length===0){rect=new nexacro.Rect();this._rect=rect;return rect;}var pt=segs[0].point,pt2,controlPt1,controlPt2,seg1,seg2,tmpX,tmpY;var curx=pt.x;var cury=pt.y;for(var i=0,l=segs.length-1;i<l;i++ ){seg1=segs[i];seg2=segs[i+1];pt2=seg2.point;controlPt1=seg1.outVector;controlPt2=seg2.inVector;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){tmpX=pt2.x;tmpY=pt2.y;if(!rect){rect=new nexacro.Rect(Math.min(curx,tmpX),Math.min(cury,tmpY),Math.max(curx,tmpX)-Math.min(curx,tmpX),Math.max(cury,tmpY)-Math.min(cury,tmpY));}else{this._unionRect(rect,Math.min(curx,tmpX),Math.min(cury,tmpY),Math.max(curx,tmpX),Math.max(cury,tmpY));}curx=tmpX;cury=tmpY;}else{rect=this._getCurveBounds(curx,cury,controlPt1.x,controlPt1.y,controlPt2.x,controlPt2.y,pt2.x,pt2.y,rect);curx=pt2.x;cury=pt2.y;}}if(this._closed){seg1=segs[segs.length-1];seg2=segs[0];pt2=seg2.point;controlPt1=seg1.outVector;controlPt2=seg2.inVector;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){tmpX=pt2.x;tmpY=pt2.y;if(!rect){rect=new nexacro.Rect(Math.min(curx,tmpX),Math.min(cury,tmpY),Math.max(curx,tmpX)-Math.min(curx,tmpX),Math.max(cury,tmpY)-Math.min(cury,tmpY));}else{this._unionRect(rect,Math.min(curx,tmpX),Math.min(cury,tmpY),Math.max(curx,tmpX),Math.max(cury,tmpY));}curx=tmpX;cury=tmpY;}else{rect=this._getCurveBounds(curx,cury,controlPt1.x,controlPt1.y,controlPt2.x,controlPt2.y,pt2.x,pt2.y,rect);curx=pt2.x;cury=pt2.y;}}if(!rect){rect=new nexacro.Rect();this._rect=rect;if(bStrokeWidth){rect=rect.expand(this._getStrokeWidth());}return rect;}if(!iscurrent){this._rect=rect;}}if(bStrokeWidth){if(this._type!="Line"&&(this._strokejoin=="miter"||this._strokejoin=="round")){rect=rect.expand((this._getStrokeWidth()*this.miterlimit));}else{rect=rect.expand(this._getStrokeWidth());}}return rect;};_pGraphicsPath._unionRect=function(rect,left,top,right,bottom){var l=Math.min(rect.left,left);var t=Math.min(rect.top,top);var r=Math.max(rect.getRight(),right);var b=Math.max(rect.getBottom(),bottom);rect.left=l;rect.top=t;rect.width=r-l;rect.height=b-t;};_pGraphicsPath._adjustSegments=function(){if(this._pathDataChanged){var length=this._countSegs(),segments=this._segments,seg;for(var i=0;i<length;i++ ){seg=segments[i];seg.nextSeg=segments[i+1]||segments[0];}this._pathDataChanged;}};_pGraphicsPath._countSegs=function(){var length=this._segments.length;return !this._closed&&length>0?length-1:length;};_pGraphicsPath._drawShape=function(ctx,strokeMatrix){var segs=this._segments,mpt=segs[0].point,coords,prevX,prevY,i=0,l=0;if(segs.length===0){return;}var gap=0;if(this._isOddStrokeWidth){gap=0.5;}function drawSegment_strokeMatrix(seg1,seg2,skipLine){var point2=seg2.point,controlPt1=seg1.outVector,controlPt2=seg2.inVector,pt;var cnt=2,isLine=2;coords[0]=point2.x;coords[1]=point2.y;if(controlPt2&&!controlPt2.isZero()){coords[cnt++ ]=controlPt2.x;coords[cnt++ ]=controlPt2.y;isLine-=1;}if(controlPt1&&!controlPt1.isZero()){coords[cnt++ ]=controlPt1.x;coords[cnt++ ]=controlPt1.y;isLine-=1;}strokeMatrix._transformCoordinates(coords,0,coords,0,cnt/2);if(isLine!=0){if(!skipLine){ctx.lineTo(parseInt(coords[0])+gap,parseInt(coords[1])+gap);}}else{ctx.bezierCurveTo(parseInt(coords[4])+gap,parseInt(coords[5])+gap,parseInt(coords[2])+gap,parseInt(coords[3])+gap,parseInt(coords[0])+gap,parseInt(coords[1])+gap);}prevX=coords[0];prevY=coords[1];}function drawSegment(seg1,seg2,skipLine){var point2=seg2.point,controlPt1=seg1.outVector,controlPt2=seg2.inVector,pt;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){if(!skipLine){ctx.lineTo(point2.x+gap,point2.y+gap);}}else{ctx.bezierCurveTo(controlPt1.x+gap,controlPt1.y+gap,controlPt2.x+gap,controlPt2.y+gap,point2.x+gap,point2.y+gap);}}ctx.beginPath();if(strokeMatrix){coords=new Array(6);coords[0]=mpt.x;coords[1]=mpt.y;strokeMatrix._transformCoordinates(coords,0,coords,0,1);ctx.moveTo(parseInt(coords[0])+gap,parseInt(coords[1])+gap);prevX=coords[0];prevY=coords[1];for(i=0,l=segs.length-1;i<l;i++ ){drawSegment_strokeMatrix(segs[i],segs[i+1],false);}if(this._closed){drawSegment_strokeMatrix(segs[segs.length-1],segs[0],true);ctx.closePath();}}else{ctx.moveTo(mpt.x+gap,mpt.y+gap);for(i=0,l=segs.length-1;i<l;i++ ){drawSegment(segs[i],segs[i+1],false);}if(this._closed){drawSegment(segs[segs.length-1],segs[0],true);ctx.closePath();}}};_pGraphicsPath._getSegPathData=function(parts,seg1,seg2,skipLine){var point2=seg2.point,controlPt1=seg1.outVector,controlPt2=seg2.inVector,pt,fmtNumber=nexacro._ChartGraphicsClassUtils.fmtNumber;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){if(!skipLine){parts.push('L'+fmtNumber(point2.x)+','+fmtNumber(point2.y));}}else{parts.push('C'+fmtNumber(controlPt1.x)+','+fmtNumber(controlPt1.y)+' '+fmtNumber(controlPt2.x)+','+fmtNumber(controlPt2.y)+' '+fmtNumber(point2.x)+','+fmtNumber(point2.y));}};_pGraphicsPath._getCurrentSegment=function(index){var segments=this._segments;if(segments.length==0){}return segments[segments.length-1];};_pGraphicsPath._getCurveBounds=function(sx,sy,ctrl1X,ctrl1Y,ctrl2X,ctrl2Y,eX,eY,rect){var coords=new Array(6),prevCoords=[sx,sy,0,0,ctrl1X,ctrl1Y],min=[sx,sy],max=[sx,sy],roots=new Array(2),strokePadding=this._strokePadding;coords=[eX,eY,ctrl2X,ctrl2Y,0,0];for(var i=0;i<2;i++ ){this._calcCurve(prevCoords[i],prevCoords[i+4],coords[i+2],coords[i],i,strokePadding,min,max,roots);}if(!rect){rect=new nexacro.Rect(min[0],min[1],max[0]-min[0],max[1]-min[1]);}else{this._unionRect(rect,min[0],min[1],max[0],max[1]);}return rect;};_pGraphicsPath._calcCurve=function(v0,v1,v2,v3,xyCoord,padding,min,max,roots){var a=3*(v1-v2)-v0+v3,b=2*(v0+v2)-4*v1,c=v1-v0,count=nexacro._ChartGraphicsMathUtil.solveQuadratic(a,b,c,roots),tMin=this._curveMin,tMax=this._curveMax,u,t;this._calcCurveMinMax(v3,0,xyCoord,min,max);for(var i=0;i<count;i++ ){t=roots[i];u=1-t;if(tMin<t&&t<tMax){this._calcCurveMinMax(u*u*u*v0+3*u*u*t*v1+3*u*t*t*v2+t*t*t*v3,padding,xyCoord,min,max);}}};_pGraphicsPath._calcCurveMinMax=function(value,padding,xyCoord,min,max){var left=value-padding,right=value+padding;if(left<min[xyCoord]){min[xyCoord]=left;}if(right>max[xyCoord]){max[xyCoord]=right;}};_pGraphicsPath._intersectLineLine=function(line1StartPt,line1EndPt,line2StartPt,line2EndPt,resPt){var line2DistX=line2EndPt.x-line2StartPt.x,line2DistY=line2EndPt.y-line2StartPt.y,line1DistX=line1EndPt.x-line1StartPt.x,line1DistY=line1EndPt.y-line1StartPt.y,ua_t=line2DistX*(line1StartPt.y-line2StartPt.y)-line2DistY*(line1StartPt.x-line2StartPt.x),ub_t=line1DistX*(line1StartPt.y-line2StartPt.y)-line1DistY*(line1StartPt.x-line2StartPt.x),u_b=line2DistY*line1DistX-line2DistX*line1DistY;if(!nexacro._ChartGraphicsMathUtil.isZero(u_b)){var ua=ua_t/u_b;var ub=ub_t/u_b;if(0<=ua&&ua<=1&&0<=ub&&ub<=1){resPt.x=line1StartPt.x+ua*(line1EndPt.x-line1StartPt.x);resPt.y=line1StartPt.y+ua*(line1EndPt.y-line1StartPt.y);return true;}}return false;};_pGraphicsPath._intersectLineRectangle=function(lineStartPt,lineEndPt,rectTopLeftPt,rectBottomRightPt){var clsPoint=nexacro.Point;var minPt=clsPoint.min(rectTopLeftPt,rectBottomRightPt);var maxPt=clsPoint.max(rectTopLeftPt,rectBottomRightPt);var topRightPt=new clsPoint(maxPt.x,minPt.y);var bottomLeftPt=new clsPoint(minPt.x,maxPt.y);var inter1=new clsPoint(),inter2=new clsPoint(),inter3=new clsPoint(),inter4=new clsPoint();var ret=this._intersectLineLine(minPt,topRightPt,lineStartPt,lineEndPt,inter1);var resPts=[];if(ret){resPts.push(inter1);}ret=this._intersectLineLine(topRightPt,maxPt,lineStartPt,lineEndPt,inter2);if(ret){resPts.push(inter2);}ret=this._intersectLineLine(maxPt,bottomLeftPt,lineStartPt,lineEndPt,inter3);if(ret){resPts.push(inter3);}ret=this._intersectLineLine(bottomLeftPt,minPt,lineStartPt,lineEndPt,inter4);if(ret){resPts.push(inter4);}if(resPts.length){return resPts;}};_pGraphicsPath._intersectBezier3Line=function(startPt,control1Pt,control2Pt,endPt,lineStartPt,lineEndPt,resPts){var clsPoint=nexacro.Point;var a,b,c,d;var c3,c2,c1,c0;var cl;var n;var min=clsPoint.min(lineStartPt,lineEndPt);var max=clsPoint.max(lineStartPt,lineEndPt);a=startPt.multiply( -1);b=control1Pt.multiply(3);c=control2Pt.multiply( -3);d=a.add(b.add(c.add(endPt)));c3=new clsPoint(d.x,d.y);a=startPt.multiply(3);b=control1Pt.multiply( -6);c=control2Pt.multiply(3);d=a.add(b.add(c));c2=new clsPoint(d.x,d.y);a=startPt.multiply( -3);b=control1Pt.multiply(3);c=a.add(b);c1=new clsPoint(c.x,c.y);c0=new clsPoint(startPt.x,startPt.y);n=new clsPoint(lineStartPt.y-lineEndPt.y,lineEndPt.x-lineStartPt.x);cl=lineStartPt.x*lineEndPt.y-lineEndPt.x*lineStartPt.y;var roots=[];nexacro._ChartGraphicsMathUtil.solveCubic(n.dot(c3),n.dot(c2),n.dot(c1),n.dot(c0)+cl,roots);for(var i=0;i<roots.length;i++ ){var t=roots[i];if(0<=t&&t<=1){var p5=startPt.lerp(control1Pt,t);var p6=control1Pt.lerp(control2Pt,t);var p7=control2Pt.lerp(endPt,t);var p8=p5.lerp(p6,t);var p9=p6.lerp(p7,t);var p10=p8.lerp(p9,t);if(lineStartPt.x==lineEndPt.x){if(min.y<=p10.y&&p10.y<=max.y){resPts.push(p10);}}else if(lineStartPt.y==lineEndPt.y){if(min.x<=p10.x&&p10.x<=max.x){resPts.push(p10);}}else if(p10.gte(min)&&p10.lte(max)){resPts.push(p10);}}}if(resPts.length){return true;}return false;};_pGraphicsPath._intersectBezier3Rectangle=function(startPt,control1Pt,control2Pt,endPt,rectTopLeftPt,rectBottomRightPt){var clsPoint=nexacro.Point;var minPt=clsPoint.min(rectTopLeftPt,rectBottomRightPt);var maxPt=clsPoint.max(rectTopLeftPt,rectBottomRightPt);var topRightPt=new clsPoint(maxPt.x,minPt.y);var bottomLeftPt=new clsPoint(minPt.x,maxPt.y);var inter1=[],inter2=[],inter3=[],inter4=[];var ret=this._intersectBezier3Line(startPt,control1Pt,control2Pt,endPt,minPt,topRightPt,inter1);var resPts=[];if(ret){resPts=resPts.concat(inter1);}ret=this._intersectBezier3Line(startPt,control1Pt,control2Pt,endPt,topRightPt,maxPt,inter2);if(ret){resPts=resPts.concat(inter2);}ret=this._intersectBezier3Line(startPt,control1Pt,control2Pt,endPt,maxPt,bottomLeftPt,inter3);if(ret){resPts=resPts.concat(inter3);}ret=this._intersectBezier3Line(startPt,control1Pt,control2Pt,endPt,bottomLeftPt,minPt,inter4);if(ret){resPts=resPts.concat(inter4);}if(resPts.length){return resPts;}};_pGraphicsPath._getValues=function(seg1,seg2){var pt1=seg1.point;var pt2=seg2.point;var controlPt1=seg1.outVector;var controlPt2=seg2.inVector;if(!(controlPt1&&controlPt2)||(controlPt1.isZero()&&controlPt2.isZero())){return [pt1.x,pt1.y,pt1.x,pt1.y,pt2.x,pt2.y,pt2.x,pt2.y];}else{return [pt1.x,pt1.y,controlPt1.x,controlPt1.y,controlPt2.x,controlPt2.y,pt2.x,pt2.y];}};_pGraphicsPath._evaluate=function(v,t,type){var p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],p2y=v[7],x,y;if(type===0&&(t===0||t===1)){x=t===0?p1x:p2x;y=t===0?p1y:p2y;}else{var cx=3*(c1x-p1x),bx=3*(c2x-c1x)-cx,ax=p2x-p1x-cx-bx,cy=3*(c1y-p1y),by=3*(c2y-c1y)-cy,ay=p2y-p1y-cy-by;if(type===0){x=((ax*t+bx)*t+cx)*t+p1x;y=((ay*t+by)*t+cy)*t+p1y;}else{var tMin=this._curveMin;if(t<tMin&&c1x==p1x&&c1y==p1y||t>1-tMin&&c2x==p2x&&c2y==p2y){x=c2x-c1x;y=c2y-c1y;}else{x=(3*ax*t+2*bx)*t+cx;y=(3*ay*t+2*by)*t+cy;}if(type===3){var x2=6*ax*t+2*bx,y2=6*ay*t+2*by;return (x*y2-y*x2)/Math.pow(x*x+y*y,3/2);}}}return type==2?new nexacro.Point(y, -x):new nexacro.Point(x,y);};_pGraphicsPath._solveCubic=function(v,coord,val,roots){var p1=v[coord],c1=v[coord+2],c2=v[coord+4],p2=v[coord+6],c=3*(c1-p1),b=3*(c2-c1)-c,a=p2-p1-c-b;return nexacro._ChartGraphicsMathUtil.solveCubic(a,b,c,p1-val,roots);};_pGraphicsPath._getParameterOf=function(v,x,y){var tMin=this._curveMin;if(Math.abs(v[0]-x)<tMin&&Math.abs(v[1]-y)<tMin){return 0;}if(Math.abs(v[6]-x)<tMin&&Math.abs(v[7]-y)<tMin){return 1;}var txs=[],tys=[],sx=this._solveCubic(v,0,x,txs),sy=this._solveCubic(v,1,y,tys),tx,ty;for(var cx=0;sx== -1||cx<sx;){if(sx== -1||(tx=txs[cx++ ])>=0&&tx<=1){for(var cy=0;sy== -1||cy<sy;){if(sy== -1||(ty=tys[cy++ ])>=0&&ty<=1){if(sx== -1){tx=ty;}else if(sy== -1){ty=tx;}if(Math.abs(tx-ty)<tMin){return (tx+ty)*0.5;}}}if(sx== -1){break;}}}return null;};_pGraphicsPath._changesOrientation=function(tangent,prev){return this._evaluate(prev,1,1).y*tangent.y>0;};_pGraphicsPath._getAngle=function(pt){return this._getAngleInRadians.apply(this,arguments)*180/Math.PI;};_pGraphicsPath._getAngleInRadians=function(pt0){if(arguments.length==1){return Math.atan2(pt0.y,pt0.x);}else{var pt=arguments[1];if(!(pt instanceof nexacro.Point)){pt=new nexacro.Point(arguments[1],arguments[2]);}var div=this.getLength()*pt.getLength();if(div===0){return NaN;}else{return Math.acos(this.dot(pt)/div);}}};_pGraphicsPath._getCrossings=function(v,prev,x,y,roots){var count=this._solveCubic(v,1,y,roots),crossings=0,tolerance=this._curveMin,abs=Math.abs;if(count=== -1){roots[0]=this._getParameterOf(v,x,y);count=roots[0]!==null?1:0;}for(var i=0;i<count;i++ ){var t=roots[i];if(t> -tolerance&&t<1-tolerance){var pt=this._evaluate(v,t,0);if(x<pt.x+tolerance){var tan=this._evaluate(v,t,1);if(Math.abs(pt.x-x)<tolerance){var angle=this._getAngle(tan);if(angle> -180&&angle<0&&(t>tolerance||this._changesOrientation(tan,prev))){continue;}}else{if(Math.abs(tan.y)<tolerance||t<tolerance&&!this._changesOrientation(tan,prev)){continue;}}crossings++ ;}}}return crossings;};}if(!nexacro.ChartGraphicsPaths){nexacro.ChartGraphicsPaths=function(){this._type="Paths";nexacro._ChartGraphicsObject.prototype.constructor.apply(this,arguments);var childs=arguments[this.__readArgs];this._childchanged=0;if(nexacro._ChartGraphicsLib.isArray(childs)){this._addChildren(childs);}};var _pGraphicsPaths=nexacro.ChartGraphicsPaths.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro.ChartGraphicsPaths);_pGraphicsPaths._type_name="GraphicsPaths";_pGraphicsPaths.strokepen="";_pGraphicsPaths.fillstyle="";_pGraphicsPaths.fillgradation="";_pGraphicsPaths.set_shadow=function(val){var oldval=this.shadow,oldobj,newobj;if(oldval!=val){this.shadow=val;oldobj=this._currentShadow;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.ShadowObjectNew(val);this._currentShadow=newobj;}}else{this._currentShadow=null;return;}var node=this._firstchild;for(;node;node=node._nextsibling){node.set_shadow(newobj);}}};_pGraphicsPaths.set_strokepen=function(val){var oldval=this.strokepen,oldobj,newobj;if(oldval!=val){this.strokepen=val;oldobj=this._currentStrokepen;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.BorderLineObject(val);this._currentStrokepen=newobj;}}else{if(oldobj){this._currentStrokepen=null;}}var node=this._firstchild;for(;node;node=node._nextsibling){node.set_strokepen(newobj);}if(newobj){var lineW=newobj.width||0;if(this._strokeWidth!=lineW){this._strokeWidth=lineW;this._bounds=null;this._globalBounds=null;}}else{if(this._strokeWidth!=0){this._strokeWidth=0;}}}};_pGraphicsPaths.set_fillstyle=function(val){var oldval=this.fillstyle,oldobj,newobj;if(oldval!=val){this.fillstyle=val;oldobj=this._currentFillstyle;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.BackgroundObject(val);this._currentFillstyle=newobj;}}else{if(oldobj){this._currentFillstyle=null;}}var node=this._firstchild;for(;node;node=node._nextsibling){node.set_fillstyle(val);}}};_pGraphicsPaths.set_fillgradation=function(){};_pGraphicsPaths.destroy=function(){if(this._currentShadow){this._currentShadow=null;}if(this._currentFillstyle){this._currentFillstyle=null;}if(this._currentFillgradation){this._currentFillgradation=null;}if(this._currentStrokepen){this._currentStrokepen=null;}this.clear();nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsPaths.clear=function(){var node=this._firstchild,delected=false,removed=[];for(;node;node=node._nextsibling){removed[removed.length]=node;}for(var i=0,len=removed.length;i<len;i++ ){node=removed[i];node._remove(true);node.parent=null;node._nextsibling=null;node._previoussibling=null;delected=true;}if(delected){this._firstchild._isfirstchild=false;this._firstchild=null;this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}var childListCache=this._childListCache;if(childListCache){childListCache.fchild=null;childListCache.fchildindex= -1;childListCache.flength= -1;}}};_pGraphicsPaths.getFirstChild=function(){return this._firstchild;};_pGraphicsPaths.getLastChild=function(){var child=this._firstchild;return child?child._previoussibling:null;};_pGraphicsPaths.getFirstSegment=function(){var first=this.getFirstChild();return first&&first.getFirstSegment();};_pGraphicsPaths.getLastSegment=function(){var last=this.getLastChild();return last&&last.getLastSegment();};_pGraphicsPaths.getObjectByID=function(id){if(!id){return null;}return this._getItemById(id);};_pGraphicsPaths.moveTo=function(){var path=new nexacro.ChartGraphicsPath();path.set_id(this.id+"_path"+this.childlength);this.addChild(path);path.moveTo.apply(path,arguments);};_pGraphicsPaths.moveBy=function(x,y){var pt;if(x instanceof nexacro.Point){pt=x;}else if(nexacro._ChartGraphicsLib.isNumber(x)&&nexacro._ChartGraphicsLib.isNumber(y)){pt=new nexacro.Point(x,y);}else{}this.moveTo(this._getCurrentPath().getLastSegment().point.add(pt));};_pGraphicsPaths.lineTo=function(){var path=this._getCurrentPath();path.lineTo.apply(path,arguments);};_pGraphicsPaths.quadraticCurveTo=function(){var path=this._getCurrentPath();path.quadraticCurveTo.apply(path,arguments);};_pGraphicsPaths.cubicCurveTo=function(){var path=this._getCurrentPath();path.cubicCurveTo.apply(path,arguments);};_pGraphicsPaths.arcTo=function(){var path=this._getCurrentPath();path.arcTo.apply(path,arguments);};_pGraphicsPaths.closePath=function(){if(this._getCurrentPath()){this._getCurrentPath().closePath();}};_pGraphicsPaths.getPathData=function(){var node=this._firstchild,paths=[];for(;node;node=node._nextsibling){paths.push(node.getPathData());}return paths.join(' ');};_pGraphicsPaths.setPathData=function(data){var clsPoint=nexacro.Point;var parts=data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),coords,relative=false,control,current=new nexacro.Point();function getCoord(index,coord,update){var val=parseFloat(coords[index]);if(relative){val+=current[coord];}if(update){current[coord]=val;}return val;}function getPoint(index,update){return new clsPoint(getCoord(index,'x',update),getCoord(index+1,'y',update));}this.clear();for(var i=0,l=parts.length;i<l;i++ ){var part=parts[i],cmd=part[0],j,lower=cmd.toLowerCase();coords=part.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);relative=cmd===lower;var length=coords&&coords.length;switch(lower){case 'm':case 'l':for(j=0;j<length;j+=2){this[j===0&&lower==='m'?'moveTo':'lineTo'](getPoint(j,true));}break;case 'h':case 'v':var coord=lower=='h'?'x':'y';for(j=0;j<length;j++ ){getCoord(j,coord,true);this.lineTo(current);}break;case 'c':for(j=0;j<length;j+=6){this.cubicCurveTo(getPoint(j),control=getPoint(j+2),getPoint(j+4,true));}break;case 's':for(j=0;j<length;j+=4){this.cubicCurveTo(current.multiply(2).subtract(control),control=getPoint(j),getPoint(j+2,true));}break;case 'q':for(j=0;j<length;j+=4){this.quadraticCurveTo(control=getPoint(j),getPoint(j+2,true));}break;case 't':for(j=0;j<length;j+=2){this.quadraticCurveTo(control=current.multiply(2).subtract(control),getPoint(j,true));}break;case 'a':for(j=0;j<length;j+=7){this.arcTo(current=getPoint(j+5),new nexacro._ChartGraphicsSize( +coords[0], +coords[1]), +coords[2], +coords[4], +coords[3]);}break;case 'z':this.closePath();break;}}};_pGraphicsPaths.getObjects=function(){if(this._firstchild){var children=this._children;if(!children||(children._changed!=this._childchanged)){children=[];var child=this._firstchild,seq=0;for(;child!=null;child=child._nextsibling){children[seq]=child;seq++ ;}this._children=children;children._changed=this._childchanged;}return children;}};_pGraphicsPaths.insertChild=function(newChild,refChild){return this._insertBefore(newChild,refChild);};_pGraphicsPaths.addChild=function(child){return this.insertChild(child,null);};_pGraphicsPaths.removeChild=function(oldChild){return this._removeChild(oldChild);};_pGraphicsPaths._render=function(ctx){this._painted=1;};_pGraphicsPaths._addChildren=function(arr){if(!nexacro._ChartGraphicsLib.isArray(arr)||!arr.length){return false;}var i,len=arr.length-1;if(!this._firstchild){this._firstchild=arr[0];arr[0]._isfirstchild=true;this._childidx_map[arr[0].id]=true;for(i=0;i<len;i++ ){arr[i]._nextsibling=arr[i+1];arr[i+1]._previoussibling=arr[i];this._childidx_map[arr[i+1].id]=true;}arr[0]._previoussibling=arr[arr.length-1];}else{var lastChild=this._firstchild._previoussibling;lastChild._nextsibling=arr[0];arr[0]._previoussibling=lastChild;this._childidx_map[arr[0].id]=true;for(i=0;i<len;i++ ){arr[i]._nextsibling=arr[i+1];arr[i+1]._previoussibling=arr[i];this._childidx_map[arr[i+1].id]=true;}this._firstchild._previoussibling=arr[arr.length-1];}this.childlength+=arr.length;this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}var childListCache=this._childListCache;if(childListCache){if(childListCache.flength!= -1){childListCache.flength+=arr.length;}if(childListCache.fchildindex!= -1){childListCache.fchildindex= -1;}}};_pGraphicsPaths._updateStyles=function(ctx,sizeChanged){};_pGraphicsPaths._insertBefore=function(){var child=nexacro._ChartGraphicsObject.prototype._insertBefore.apply(this,arguments);if(child){if(this._currentShadow){child.set_shadow(this._currentShadow);}if(this._currentStrokepen){child.set_strokepen(this._currentStrokepen);}if(this._currentFillstyle){child.set_fillstyle(this._currentFillstyle);}if(this._currentFillgradation){child.set_fillgradation(this._currentFillgradation);}}};_pGraphicsPaths._getCurrentPath=function(){var len=this._getLength();if(!len){trace("getCurrentPath error length = 0. Use a moveTo() command first");return;}return this.getChildByIndex(len-1);};_pGraphicsPaths.getChildByIndex=function(index){if(this._firstchild){var children=this._children;if(children&&(children._changed==this._childchanged)){return children[index];}return this._getChildByIndex(index);}};_pGraphicsPaths._getLength=function(){if(this._firstchild){var children=this._children;if(children&&(children._changed==this._childchanged)){return children.length;}return this._getChildrenLength();}return 0;};_pGraphicsPaths._getChildrenLength=function(){var childListCache=this._childListCache;if(!childListCache){var firstChild=this._firstchild;if(!firstChild){return 0;}if(firstChild==this.getLastChild()){return 1;}childListCache={flength: -1,fchildindex: -1,fchild:null,fowner:this};this._childListCache=childListCache;}if(childListCache.flength== -1){var l,n;if(childListCache.fchildindex!= -1&&childListCache.fchild!=null){l=childListCache.fchildindex;n=childListCache.fchild;}else{n=this._firstchild;l=0;}while(n){l++ ;n=n._nextsibling;}childListCache.flength=l;}return childListCache.flength;};_pGraphicsPaths._getChildByIndex=function(index){var childListCache=this._childListCache;if(!childListCache){if(this._firstchild==this.getLastChild()){return index==0?this._firstchild:null;}childListCache={flength: -1,fchildindex: -1,fchild:null,fowner:this};this._childListCache=childListCache;}var i=childListCache.fchildindex;var n=childListCache.fchild;var firstAccess=true;if(i!= -1&&n!=null){firstAccess=false;if(i<index){while(i<index&&n){i++ ;n=n._nextsibling;}}else if(i>index){while(i>index&&n){i-- ;n=n.getPreviousSibling();}}}else{if(index<0){return null;}n=this._firstchild;for(i=0;i<index&&n;i++ ){n=n._nextsibling;}}if(!firstAccess&&(n==this._firstchild||n==this.getLastChild())){childListCache.fchildindex= -1;childListCache.fchild=null;}else{childListCache.fchildindex=i;childListCache.fchild=n;}return n;};}if(!nexacro.ChartGraphicsLine){nexacro.ChartGraphicsLine=function(){nexacro.ChartGraphicsPath.prototype.constructor.apply(this,arguments);this._type="Line";var addarr=[];var seg={};seg={point:new nexacro.Point(0,0),nextSeg:null};addarr.push(seg);seg={point:new nexacro.Point(0,0),nextSeg:null};addarr.push(seg);this._add(addarr);};var _pGraphicsLine=nexacro.ChartGraphicsLine.prototype=nexacro._createPrototype(nexacro.ChartGraphicsPath,nexacro.ChartGraphicsLine);_pGraphicsLine._type_name="GraphicsLine";_pGraphicsLine.x1=0;_pGraphicsLine.x1=0;_pGraphicsLine.x2=0;_pGraphicsLine.y2=0;_pGraphicsLine.set_x1=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}var segs=this._segments;if(segs[0].point.x!=v){segs[0].point.x=v;this.x1=v;this._drawflags|=4;}};_pGraphicsLine.set_y1=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}var segs=this._segments;if(segs[0].point.y!=v){segs[0].point.y=v;this.y1=v;this._drawflags|=4;}};_pGraphicsLine.set_x2=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}var segs=this._segments;if(segs[1].point.x!=v){segs[1].point.x=v;this.x2=v;this._drawflags|=4;}};_pGraphicsLine.set_y2=function(v){if(!nexacro._ChartGraphicsLib.isNumber(v)){return;}var segs=this._segments;if(segs[1].point.y!=v){segs[1].point.y=v;this.y2=v;this._drawflags|=4;}};_pGraphicsLine.destroy=function(){this.x1=null;this.x1=null;this.x2=null;this.y2=null;nexacro.ChartGraphicsPath.prototype.destroy.call(this);};}if(!nexacro.ChartGraphicsGroup){nexacro.ChartGraphicsGroup=function(){this._type="Group";this._childchanged=0;nexacro._ChartGraphicsObject.call(this);};var _pGraphicsGroup=nexacro.ChartGraphicsGroup.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro.ChartGraphicsGroup);_pGraphicsGroup._type_name="GraphicsGroup";_pGraphicsGroup.destroy=function(){this.clear();this._childchanged=null;nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsGroup.clear=function(){var node=this._firstchild,delected=false,removed=[];for(;node;node=node._nextsibling){removed[removed.length]=node;}for(var i=0,len=removed.length;i<len;i++ ){node=removed[i];node._remove(true);node.parent=null;node._nextsibling=null;node._previoussibling=null;delected=true;}this._childidx_map={};this.childlength=0;if(delected){this._firstchild._isfirstchild=false;this._firstchild=null;this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}var childListCache=this._childListCache;if(childListCache){childListCache.fchild=null;childListCache.fchildindex= -1;childListCache.flength= -1;}}};_pGraphicsGroup.getObjectByID=function(id){if(!id){return null;}return this._getItemById(id);};_pGraphicsGroup.getObjects=function(){if(this._firstchild){var children=this._children;if(!children||(children._changed!=this._childchanged)){children=[];var child=this._firstchild,seq=0;for(;child!=null;child=child._nextsibling){children[seq]=child;seq++ ;}this._children=children;children._changed=this._childchanged;}return children;}};_pGraphicsGroup.getFirstChild=function(){return this._firstchild;};_pGraphicsGroup.getLastChild=function(){var child=this._firstchild;return child?child._previoussibling:null;};_pGraphicsGroup.insertChild=function(newChild,refChild){return this._insertBefore(newChild,refChild);};_pGraphicsGroup.addChild=function(child){return this.insertChild(child,null);};_pGraphicsGroup.removeChild=function(oldChild){return this._removeChild(oldChild);};}if(!nexacro._ChartGraphicsLayer){nexacro._ChartGraphicsLayer=function(){nexacro._ChartGraphicsHashMap.getHashKey("ge",this);this._dirtyRectsMgr=new nexacro._ChartGraphicsRectsManager();this._childidx_map={};this._totalItems=[];};var _pGraphicsLayer=nexacro._ChartGraphicsLayer.prototype=nexacro._createPrototype(nexacro._ChartGraphicsObject,nexacro._ChartGraphicsLayer);_pGraphicsLayer._type_name="_GraphicsLayer";_pGraphicsLayer.childlength=0;_pGraphicsLayer._type="Layer";_pGraphicsLayer._renderHint="all";_pGraphicsLayer._level=0;_pGraphicsLayer._treechange=0;_pGraphicsLayer._childchanged=0;_pGraphicsLayer.getObjectByID=function(id){if(id){return this._getItemById(id);}return null;};_pGraphicsLayer.getAllObjects=function(){var items=this._totalItems;if(!items||!items.length||(this._treechange!=items._treechange)){var idx=0;var node=this._firstchild;items=[];for(;node;node=node._nextsibling){node._index=idx;this._getAllObjects(items,node,1);idx++ ;}this._totalItems=items;items._treechange=this._treechange;}return items;};_pGraphicsLayer.getFirstChild=function(){return this._firstchild;};_pGraphicsLayer.getLastChild=function(){if(this._firstchild){return this._firstchild._previoussibling;}return null;};_pGraphicsLayer.addChild=function(child){return this.insertChild(child,null);};_pGraphicsLayer.removeChild=function(oldChild){return this._removeChild(oldChild);};_pGraphicsLayer.insertChild=function(newChild,refChild){return this._insertBefore(newChild,refChild);};_pGraphicsLayer.clear=function(){var node=this._firstchild;var delected=false;var removed=[];for(;node;node=node._nextsibling){removed[removed.length]=node;}for(var i=0,len=removed.length;i<len;i++ ){node=removed[i];node._remove(true);node.parent=null;node._nextsibling=null;node._previoussibling=null;delected=true;}this._childidx_map={};this.childlength=0;if(delected){this._firstchild._isfirstchild=false;this._firstchild=null;this._childchanged++ ;this._drawflags|=4;var layer=this._getOwnerLayer();if(layer){layer._onTreeChanged();}var childListCache=this._childListCache;if(childListCache){childListCache.fchild=null;childListCache.fchildindex= -1;childListCache.flength= -1;}}};_pGraphicsLayer._reMoveParent=function(){};_pGraphicsLayer.destroy=function(){this.clear();var i,item;var items=this.getAllObjects();for(i=0;i<items.length;i++ ){item=items[i];if(item){item.destroy();items[i]=null;}}this._dirtyRectsMgr=null;this._childidx_map=null;this._totalItems=null;this._quadtree=null;if(this._canvas){this._canvas.destroy();this._canvas=null;}nexacro._ChartGraphicsObject.prototype.destroy.call(this);};_pGraphicsLayer.hitTest=function(pt){var rect=new nexacro.Rect(pt.x-1,pt.y-1,3,3);var item=this._hitTestItems(this,pt,rect);if(this!=item){return item;}return null;};_pGraphicsLayer.hitTestAll=function(pt){var ret=[];var rect=new nexacro.Rect(pt.x-1,pt.y-1,3,3);this._hitTestAllItems(this,pt,rect,ret);return ret;};_pGraphicsLayer._beforePaint=function(){if(this._renderHint=="all"){this._drawAll(this._totalItems);}else{this._drawDirty(this._totalItems);}};_pGraphicsLayer._paint=function(){var totalItems=this.getAllObjects();if(this._renderHint=="all"){this._renderAll(totalItems);}else{this._renderDirty(totalItems);}this._setQuadTree(totalItems);};_pGraphicsLayer._drawAll=function(totalItems){var item,drawflags;for(var i=totalItems.length-1;i> -1;i-- ){item=totalItems[i];if(item._painting&1){drawflags=item._jobDrawflags;if(drawflags&(1|2|4)){if(drawflags&1){item._bounds=null;item._globalBounds=null;}if(drawflags&(2|4)){item._bounds=null;item._globalBounds=null;item._rect=null;}var p=item.parent;if(p&&!(p._jobDrawflags&4)){if(p==this){p._rect=null;}else{p._jobDrawflags|=4;}}item._sizeChanged=true;}}}};_pGraphicsLayer._renderAll=function(totalItems){var drawflags=this.parent._drawflags;var ctx=this._canvas;if(!ctx.handle){ctx.create();}else if(!(drawflags&2)){ctx.clearRect(0,0,ctx.width,ctx.height);}ctx.save();if(this._matrix){var bound=this._getCanvasRect();ctx.translate( -bound.left, -bound.top);}var item;for(var i=0,len=totalItems.length;i<len;i++ ){item=totalItems[i];if(item._painting&1){if(item._jobDrawflags&8){item._updateStyles(ctx,item._sizeChanged);item._sizeChanged=false;}item._render(ctx);}else{item._painted=0;}}ctx.restore();this._dirtyRectsMgr.clear();};_pGraphicsLayer._drawDirty=function(totalItems){var item,drawflags,sizeChanged,matrixchanged,p;var oldBounds,curBounds;for(var i=totalItems.length-1;i> -1;i-- ){item=totalItems[i];p=item.parent;if(item._painting&1){sizeChanged=false;matrixchanged=false;drawflags=item._jobDrawflags;if(drawflags&(1|2|4)){if(drawflags&1){item._bounds=null;item._globalBounds=null;matrixchanged=true;}if(drawflags&(2|4)){item._bounds=null;item._globalBounds=null;item._rect=null;sizeChanged=true;}if(matrixchanged){oldBounds=item._oldGlobalBounds;curBounds=item.getGlobalBoundRect();if(oldBounds){this._addDirty(oldBounds,item);}this._addDirty(curBounds,item);}else if(sizeChanged){if(item._type=="Group"||item._type=="Paths"){if(item._painted&(2|4)){oldBounds=item._oldGlobalBounds;if(oldBounds){this._addDirty(oldBounds,item);}}var s=item._style;if(s&&(s._fillcolor||s._strokecolor)){curBounds=item.getGlobalBoundRect();this._addDirty(curBounds,item);}}else{oldBounds=item._oldGlobalBounds;curBounds=item.getGlobalBoundRect();if(oldBounds){this._addDirty(oldBounds,item);}this._addDirty(curBounds,item);}}if(p&&!(p._jobDrawflags&4)){if(p==this){p._rect=null;}else{p._jobDrawflags|=4;}}item._sizeChanged=sizeChanged;item._painting|=4;}else if((drawflags&8)||item._newDraw){item._painting|=4;this._addDirty(item.getGlobalBoundRect(),item);}}else if(item._painting&2){if(item._painted&(2|4)){this._addDirty(item._oldGlobalBounds,item);}}}};_pGraphicsLayer._renderDirty=function(totalItems){if(this._applyRendering){return;}this._applyRendering=true;var dirtyRectsMgr=this._dirtyRectsMgr;var _self=this;var ctx=this._canvas;if(!ctx.handle){ctx.create();}dirtyRectsMgr.mergeRects(10000,10);ctx.save();ctx.beginPath();dirtyRectsMgr.Each(function(rect){ctx.clearRect(rect.left,rect.top,rect.width,rect.height);_self._setItemsInDirtyRect(_self,rect);ctx.rect(rect.left,rect.top,rect.width,rect.height);});ctx.clip();var item;for(var i=0,len=totalItems.length;i<len;i++ ){item=totalItems[i];if(item._painted>0){ctx.setElementGlobalAlpha(item._globalAlpha);}if(item._jobDrawflags&8||item._jobDrawflags&2){item._updateStyles(ctx,item._sizeChanged);item._sizeChanged=false;}if(item._painting&4){if(item._painting&2){item._painted=0;}else{item._render(ctx);}}else if(item._painting&2){item._painted=0;}}dirtyRectsMgr.clear();ctx.restore();this._applyRendering=false;};_pGraphicsLayer._addDirty=function(bounds_rect,item){var rect=bounds_rect;if(rect){var l=rect.left;var t=rect.top;var w=rect.width;var h=rect.height;var n_rect=new nexacro.Rect(l,t,w,h);var ctx=this._canvas;if(n_rect.right<=0||n_rect.bottom<=0||n_rect.left>=ctx.width||n_rect.top>=ctx.height){return;}if(n_rect.width<=0||n_rect.height<=0){return;}n_rect.obj_id=item.id;this._dirtyRectsMgr.add(n_rect);}};_pGraphicsLayer._hitTestItems=function(p,pt,rect){var quadtree=p._quadtree;if(quadtree){var i,len;var item,ret,invertPt;var items=quadtree.query(rect);items.sort(function(a,b){return b._index-a._index;});for(i=0,len=items.length;i<len;i++ ){item=items[i];invertPt=item._globalMatrix._inverseTransform(pt);if(item.hitTest(invertPt)){if(item._firstchild){rect.left=invertPt.x-1;rect.top=invertPt.y-1;ret=this._hitTestItems(item,pt,rect);if(item._type=="Paths"){if(ret!=item){return item;}}else{return ret;}}else{return item;}}}}return p;};_pGraphicsLayer._hitTestAllItems=function(p,pt,rect,results){var quadtree=p._quadtree;if(quadtree){var item,invertPt;var items=quadtree.query(rect);items.sort(function(a,b){return b._index-a._index;});for(var i=0,len=items.length;i<len;i++ ){item=items[i];invertPt=item._globalMatrix._inverseTransform(pt);if(item.hitTest(invertPt)){if(item._firstchild){rect.left=invertPt.x-1;rect.top=invertPt.y-1;this._hitTestAllItems(item,pt,rect,results);}else{if(item.parent&&item.parent._type=="Paths"){results.push(item.parent);}else{results.push(item);}}}}}};_pGraphicsLayer._onTreeChanged=function(){this._treechange++ ;};_pGraphicsLayer._getAllObjects=function(arr,node,level){node._level=level;arr[arr.length]=node;if(node=node._firstchild){level++ ;var idx=0;for(;node;node=node._nextsibling){node._index=idx;this._getAllObjects(arr,node,level);idx++ ;}}};_pGraphicsLayer._getOwnerLayer=function(){return this;};_pGraphicsLayer._getCanvasRect=function(){var parent=this.parent;if(parent){return new nexacro.Rect(0,0,parent._size.width,parent._size.height);}return new nexacro.Rect(0,0,0,0);};_pGraphicsLayer._getItemsInRect=function(p,rect,results){var quadtree=p._quadtree;if(quadtree){var m=p._globalMatrix||p._matrix;var invertM=m.inverted()||m;var localRect=invertM._transformBounds(rect,null,rect.obj_id);var i,len,item;var items=quadtree.query(localRect);items.sort(function(a,b){return b._index-a._index;});for(i=0,len=items.length;i<len;i++ ){item=items[i];results[results.length]=item;if(item._firstchild){this._getItemsInRect(item,rect,results);}}}};_pGraphicsLayer._setItemsInDirtyRect=function(p,rect){var quadtree=p._quadtree;if(quadtree){var m=p._globalMatrix||p._matrix;var invertM=m.inverted()||m;var localRect=invertM._transformBounds(rect,null,rect.obj_id);var item;var items=quadtree.query(localRect);for(var i=0,len=items.length;i<len;i++ ){item=items[i];item._painting|=4;if(item._firstchild){this._setItemsInDirtyRect(item,rect);}}}};_pGraphicsLayer._setGlobalTransforms=function(){var totalItems=this.getAllObjects();var drawflags=this.parent._drawflags;var m=this.parent._matrix;if(this._matrix){drawflags|=this._drawflags;this._globalMatrix=(m?(m.clone()).concatenate(this._matrix):this._matrix.clone());}else{this._globalMatrix=m.clone();}m=this._globalMatrix;var transformStack=[m];var transformChangedStack=[(drawflags&1)];var visibleStack=[true];var opacityStack=[1];var item,alpha,level,upLevel;for(var i=0,len=totalItems.length;i<len;i++ ){item=totalItems[i];level=item._level;upLevel=level-1;alpha=item.opacity*opacityStack[upLevel];if(!visibleStack[upLevel]||!item.visible||item.isEmpty()||!alpha){visibleStack[level]=false;if(item._painted&(1|2|4)){item._painting=2;}else{item._painting=0;}}else{item._jobDrawflags=item._drawflags;if(item._globalAlpha!=alpha){item._globalAlpha=alpha;item._jobDrawflags|=8;}item._painting=1;if(item._painted==0){item._newDraw=true;}if(transformChangedStack[upLevel]||(item._jobDrawflags&1)||!item._globalMatrix){item._setGlobalTransforms(transformStack[upLevel]);transformChangedStack[level]=true;item._jobDrawflags|=1;}else{transformChangedStack[level]=false;}visibleStack[level]=true;}if(item._firstchild){transformStack[level]=item._globalMatrix;opacityStack[level]=item._globalAlpha*opacityStack[upLevel];}}};_pGraphicsLayer._setQuadTree=function(totalItems,bRefresh){var item;var quadTreeCls=nexacro._ChartGraphicsQuadTree;var quadtree=this._quadtree;if(!quadtree||bRefresh){var bounds=this._getCanvasRect();quadtree=this._quadtree=new quadTreeCls(bounds.left,bounds.top,bounds.width,bounds.height);}var quadtreeStacks=[quadtree];var level,upLevel,pQuadtree;for(var i=0,len=totalItems.length;i<len;i++ ){item=totalItems[i];if(item._painting&1){level=item._level;upLevel=level-1;if((item._jobDrawflags&(1|2|4))||item._newDraw||bRefresh){pQuadtree=quadtreeStacks[upLevel];if(!pQuadtree.move(item)||bRefresh){pQuadtree.add(item);}}if(item._firstchild){quadtree=item._quadtree;if(!quadtree||bRefresh){var rect=item._getRect();quadtree=item._quadtree=new quadTreeCls(rect.left,rect.top,rect.width,rect.height);}else if(item._jobDrawflags&(1|2|4)){item._quadtree._root._bounds=item._getRect();}quadtreeStacks[level]=quadtree;}item._oldGlobalBounds=null;item._setOldGlobalBounds();item._drawflags=0;delete item._newDraw;}else if(!bRefresh&&item._painting&2){level=item._level;upLevel=level-1;pQuadtree=quadtreeStacks[upLevel];if(pQuadtree){pQuadtree.remove(item);}item._oldGlobalBounds=null;}}if(totalItems.length>0&&!(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8)){this._renderHint="dirty";}if(this._drawflags!=null){this._drawflags=0;}};_pGraphicsLayer._refreshQuadTree=function(){this._setQuadTree(this.getAllObjects(),true);};}if(!nexacro.ChartGraphicsControl){nexacro.ChartGraphicsControl=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this._matrix=new nexacro._ChartGraphicsMatrix();};var _pGraphicsControl=nexacro._createPrototype(nexacro.Component,nexacro.ChartGraphicsControl);nexacro.ChartGraphicsControl.prototype=_pGraphicsControl;_pGraphicsControl._type_name="GraphicsControl";_pGraphicsControl._is_subcontrol=true;_pGraphicsControl._layer=null;_pGraphicsControl._drawflags=1;_pGraphicsControl._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pGraphicsControl.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){this._setSize(this._adjust_width,this._adjust_height);var layer=this._layer;if(!layer){var ctx=new nexacro.CanvasElement(control_elem);layer=this._layer=new nexacro._ChartGraphicsLayer();layer.set_id(this.id+"_layer");layer.parent=this;layer._canvas=ctx;ctx.setElementPosition(0,0);ctx.setElementSize(this._adjust_width,this._adjust_height);}}};_pGraphicsControl.on_created_contents=function(win){var layer=this._layer;if(layer){layer._canvas.create(win);layer._paint();}this._drawflags=0;};_pGraphicsControl.on_create_contents_command=function(){return "";};_pGraphicsControl.on_attach_contents_handle=function(win){var layer=this._layer;if(layer){layer._canvas.create(win);layer._paint();}this._drawflags=0;};_pGraphicsControl.on_destroy_contents=function(){if(this._layer){this._layer.destroy();this._layer=null;}};_pGraphicsControl.on_change_containerRect=function(width,height){if(this._is_created_contents){this._setSize(width,height);var layer=this._layer;if(layer){layer._refreshQuadTree();}}};_pGraphicsControl.on_change_containerPos=function(left,top){};_pGraphicsControl.draw=function(){this._paint();if(this._repaint){this._repaint=false;var pThis=this;var win_handle=this._getWindowHandle();if(this._timeId!=null){nexacro._clearSystemTimer(win_handle,this._timeId);this._timeId=null;}this._timeId=nexacro._setSystemTimer(win_handle,function(){nexacro._clearSystemTimer(win_handle,pThis._timeId);pThis._timeId=null;pThis._paint();},10);}};_pGraphicsControl.hitTest=function(x,y){var elem;var layer=this._layer;if(layer){elem=layer.hitTest(new nexacro.Point(x,y));}return elem;};_pGraphicsControl.getAllObjects=function(){var totalItems=[];var layer=this._layer;if(layer){totalItems=layer.getAllObjects();}return totalItems;};_pGraphicsControl.getFirstChild=function(){var firstchild;var layer=this._layer;if(layer){firstchild=layer.getFirstChild();}return firstchild;};_pGraphicsControl.getLastChild=function(){var lastchild;var layer=this._layer;if(layer){lastchild=layer.getLastChild();}return lastchild;};_pGraphicsControl.removeChild=function(oldChild){var removechild;var layer=this._layer;if(layer&&oldChild){removechild=layer.removeChild(oldChild);}return removechild;};_pGraphicsControl.addChild=function(child){var addchild;var layer=this._layer;if(layer&&child){addchild=layer.addChild(child);}return addchild;};_pGraphicsControl.insertChild=function(newChild,refChild){var insertchild;var layer=this._layer;if(layer&&newChild&&refChild){insertchild=layer.insertChild(newChild,refChild);}return insertchild;};_pGraphicsControl.getObjectByID=function(id){var children;var layer=this._layer;if(layer&&id){children=layer.getObjectByID(id);}return children;};_pGraphicsControl.clear=function(){var layer=this._layer;if(layer){layer.clear();}};_pGraphicsControl._delayTask=function(){if(this._painting){this._repaint=true;}else{this._paint();}};_pGraphicsControl._paint=function(){var control_elem=this.getElement();if(control_elem){if(this._painting){return;}this._painting=true;var layer=this._layer;if(layer){var ctx=layer._canvas;var bounds=layer._getCanvasRect();layer._setGlobalTransforms();layer._beforePaint();if(control_elem.handle){if(!ctx){ctx=layer._canvas=new nexacro.CanvasElement(control_elem);ctx.setElementPosition(bounds.left,bounds.top);ctx.setElementSize(bounds.width,bounds.height);}else if(this._drawflags&2){ctx.setElementPosition(bounds.left,bounds.top);ctx.setElementSize(bounds.width,bounds.height);}layer._paint();}this._drawflags=0;this._painting=false;}}};_pGraphicsControl._setSize=function(w,h){var size=new nexacro._ChartGraphicsSize(w,h);var oldSize=this._size;if(oldSize){if(!size.equals(oldSize)){this._size=size;this._drawflags|=2;}}else{this._size=size;this._drawflags|=2;}};_pGraphicsControl._getGraphicsObjectAll=function(x,y){var elem;var layer=this._layer;if(layer){elem=layer.hitTestAll(new nexacro.Point(x,y));}return elem;};}
if(!nexacro._ShadowObjectNew){nexacro._ShadowObjectNew=function(v){this.value="";this.rtlvalue="";this.offsetx=0;this.offsety=0;this.blur=0;this.color="";if(v&&(typeof (v)=="string")){var val=v.trim();if(val){this.value=val;var arr=val.split(' ');if(arr.length==4){this.offsetx=arr[0];this.offsety=arr[1];this.blur=arr[2];this.color=arr[3];}this.rtlvalue=arr.join(' ');}}};var _pShadowObjectNew=nexacro._createPrototype(nexacro.Object,nexacro._ShadowObjectNew);nexacro._ShadowObjectNew.prototype=_pShadowObjectNew;_pShadowObjectNew._type_name="ShadowObject";_pShadowObjectNew.valueOf=function(){return this.value;};_pShadowObjectNew.getOffsetX=function(){if(!this.offsetx||this.offsetx==""){return 0;}return parseInt(this.offsetx.replace("px",""));};_pShadowObjectNew.getOffsetY=function(){if(!this.offsety||this.offsety==""){return 0;}return parseInt(this.offsety.replace("px",""));};_pShadowObjectNew.getBlur=function(){if(!this.blur||this.blur==""){return 0;}return parseInt(this.blur.replace("px",""));};_pShadowObjectNew.getColor=function(){return nexacro.ColorObject(this.color);};_pShadowObjectNew.toString=function(){return this.value;};nexacro._ShadowObjectNew_caches={};nexacro.ShadowObjectNew=function(val){if(val instanceof nexacro._ShadowObjectNew){return val;}var obj=nexacro._ShadowObjectNew_caches[val];if(obj){return obj;}obj=new nexacro._ShadowObjectNew(val);nexacro._ShadowObjectNew_caches[val]=obj;return obj;};}if(!nexacro._ChartBase){nexacro.ChartClickEventInfo=function(obj,id,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,seriesindex,itemindex,value){nexacro.ClickEventInfo.call(this,obj,id,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this.fromobject=obj;this.fromreferenceobject=from_refer_comp;this.seriesindex=seriesindex;this.itemindex=itemindex;this.value=value;};var _pChartClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.ChartClickEventInfo);nexacro.ChartClickEventInfo.prototype=_pChartClickEventInfo;_pChartClickEventInfo._type_name="ChartClickEventInfo";nexacro.ChartMouseEventInfo=function(obj,id,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,seriesindex,itemindex,value){nexacro.MouseEventInfo.call(this,obj,id,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this.fromobject=obj;this.fromreferenceobject=from_refer_comp;this.seriesindex=seriesindex;this.itemindex=itemindex;this.value=value;};var _pChatMouseEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.ChartMouseEventInfo);nexacro.ChartMouseEventInfo.prototype=_pChatMouseEventInfo;_pChatMouseEventInfo._type_name="ChartMouseEventInfo";nexacro.ChartDragEventInfo=function(obj,id,dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,from_refer_comp,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,seriesindex,itemindex,value){nexacro.DragEventInfo.call(this,obj,id,dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,null,null,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this.fromobject=obj;this.fromreferenceobject=from_refer_comp;this.seriesindex=seriesindex;this.itemindex=itemindex;this.value=value;};var _pChartDragEventInfo=nexacro._createPrototype(nexacro.DragEventInfo,nexacro.ChartDragEventInfo);nexacro.ChartDragEventInfo.prototype=_pChartDragEventInfo;_pChartDragEventInfo._type_name="ChartDragEventInfo";nexacro.ChartRangeZoomEventInfo=function(obj,id,from_comp,from_refer_comp,startaxisvalue,endaxisvalue,startaxisvalue2,endaxisvalue2){this.id=this.eventid=id||"onrangezoomed";this.fromobject=obj;this.fromreferenceobject=from_refer_comp;this.startaxisvalue=startaxisvalue;this.endaxisvalue=endaxisvalue;this.startaxisvalue2=startaxisvalue2;this.endaxisvalue2=endaxisvalue2;};var _pChartRangeZoomEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ChartRangeZoomEventInfo);nexacro.ChartRangeZoomEventInfo.prototype=_pChartRangeZoomEventInfo;_pChartRangeZoomEventInfo._type_name="ChartRangeZoomEventInfo";nexacro.ChartDrawEndEventInfo=function(obj,id){this.id=this.eventid=id||"ondrawend";this.fromobject=obj;};var _pChartDrawEndEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ChartDrawEndEventInfo);nexacro.ChartDrawEndEventInfo.prototype=_pChartDrawEndEventInfo;_pChartDrawEndEventInfo._type_name="ChartDrawEndEventInfo";nexacro._ChartBase=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.Component.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this._colorCategory=nexacro._ChartColorset.getColorCategory();this._maskstringtypeobj=new nexacro._EditMaskTypeString();this._masknumbertypeobj=new nexacro._EditMaskTypeNumber();this._maskdatetypeobj=new nexacro._EditMaskTypeDate();this._is_locale_control=true;this.seriesset=[];this._landmarktext;};var _pChartBase=nexacro._createPrototype(nexacro.Component,nexacro._ChartBase);nexacro._ChartBase.prototype=_pChartBase;_pChartBase._type_name="ChartBase";_pChartBase.board=null;_pChartBase.title=null;_pChartBase.legend=null;_pChartBase.seriesset=null;_pChartBase.tooltip=null;_pChartBase.binddataset="";_pChartBase.boardspacing="";_pChartBase.colorset="";_pChartBase.contents=null;_pChartBase.legendspacing="";_pChartBase.locale="";_pChartBase.titlespacing="";_pChartBase._createdOrder=["board","categoryaxis","seriesset","valueaxes","title","indicator","legend","crosshair","hrangebar","vrangebar","selection","tooltip"];_pChartBase._locale="";_pChartBase._dataMap=null;_pChartBase._binddataset=null;_pChartBase._colorset="color10";_pChartBase._highlightcolorset=null;_pChartBase._selectcolorset=null;_pChartBase._colorCategory=null;_pChartBase._graphicsControl=null;_pChartBase._seriesGroup=null;_pChartBase._highlightGroup=null;_pChartBase._boardRect=null;_pChartBase._boardRectLeft=0;_pChartBase._boardRectTop=0;_pChartBase._nullspacing={"left":0,"right":0,"top":0,"bottom":0};_pChartBase._titlespacing=null;_pChartBase._legendspacing=null;_pChartBase._boardspacing=null;_pChartBase._changedData=false;_pChartBase._loadanimation=false;_pChartBase._runanimation=false;_pChartBase._changedColorset=false;_pChartBase._recreate=true;_pChartBase._boardBorderSize={"left":0,"top":0,"right":0,"bottom":0};_pChartBase._boardBorderWidth=0;_pChartBase._boardBorderHeight=0;_pChartBase._reset=false;_pChartBase._overSeriesItem=null;_pChartBase._isApplyContents=false;_pChartBase._rearrange=true;_pChartBase._firstredraw=false;_pChartBase._rowposition=0;_pChartBase._chartxtickspace=0;_pChartBase._chartytickspace=0;_pChartBase._prelbuttondownrefobj=null;_pChartBase._aniframe_mouse_move_action=null;_pChartBase._aniframe_mouse_leave_action=null;_pChartBase.tooltiptext="";_pChartBase.enableanimation=false;_pChartBase._isanimationloading=false;_pChartBase.duration=1000;_pChartBase._duration=1000;_pChartBase._ani_exception=false;_pChartBase.framelate="normal";_pChartBase._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"onmouseup":1,"onmousedown":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onseriesclick":1,"onaxisclick":1,"onlegendclick":1,"ontitleclick":1,"onboardclick":1,"onhrangebarclick":1,"onvrangebarclick":1,"oncrosshairclick":1,"onselectionclick":1,"onrangezoomed":1,"ondrawend":1};_pChartBase.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){if(!this._graphicsControl){this._graphicsControl=new nexacro.ChartGraphicsControl("GraphicsControl",0,0,control_elem.client_width,control_elem.client_height,null,null,null,null,null,null,this);}this._graphicsControl.createComponent();}};_pChartBase.on_created_contents=function(win){this._setEventHandlerToGraphicsControl();this._graphicsControl.on_created(win);this.on_apply_colorset(this._colorset);var control_elem=this.getElement();if(this._arrange_info==null){if(control_elem&&this._is_created_contents&&(control_elem.client_width>0&&control_elem.client_height>0)){this.on_apply_contents();this._changedData=true;this._draw();}else{this._firstredraw=true;}}else{if(control_elem&&this._is_created_contents&&(control_elem.client_width>0&&control_elem.client_height>0)){this._graphicsControl.resize(control_elem.client_width,control_elem.client_height);this.on_apply_contents();this._changedData=true;this._draw();}else{this._firstredraw=true;}}};_pChartBase.on_create_contents_command=function(){this.on_apply_colorset(this._colorset);return "";};_pChartBase.on_attach_contents_handle=_pChartBase.on_created_contents;_pChartBase.on_destroy_contents=function(){this._destroySubControl();if(this.tooltip){this.tooltip.destroy();this.tooltip=null;}this._removeDatasetEventHandlers(this._binddataset);this._colorCategory=null;this._maskstringtypeobj=null;this._masknumbertypeobj=null;this._maskdatetypeobj=null;this._is_locale_control=null;this.contents=null;this.locale=null;this.colorset=null;this.binddataset=null;this.titlespacing=null;this.legendspacing=null;this.boardspacing=null;this._createdOrder=null;this._duration=null;this.duration=null;this._isanimationloading=null;this.enableanimation=null;this.framelate=null;this._ani_exception=null;this._locale=null;this._dataMap=null;this._binddataset=null;this._colorset=null;this._highlightcolor=null;this._selectcolor=null;this._colorCategory=null;this._seriesGroup=null;this._highlightGroup=null;this._boardRect=null;this._boardRectLeft=null;this._boardRectTop=null;this._nullspacing=null;this._titlespacing=null;this._legendspacing=null;this._boardspacing=null;this._changedData=null;this._loadanimation=null;this._runanimation=null;this._changedColorset=null;this._recreate=null;this._boardBorderSize=null;this._boardBorderWidth=null;this._boardBorderHeight=null;this._overSeriesItem=null;this._resize=null;this._isApplyContents=null;this.useFirerangezoom=null;this.useDragrangezoom=null;this.id=null;this.parent=null;this._itemtextlist=null;this._firstredraw=null;this._chartxtickspace=null;this._chartytickspace=null;this._prelbuttondownrefobj=null;if(this._aniframe_mouse_move_action){this._aniframe_mouse_move_action.destroy();}this._aniframe_mouse_move_action=null;if(this._aniframe_mouse_leave_action){this._aniframe_mouse_leave_action.destroy();}this._aniframe_mouse_leave_action=null;if(this._graphicsControl){delete this._landmarktext;this._landmarktext=null;this._graphicsControl.destroy();delete this._graphicsControl.parent;this._graphicsControl.parent=null;delete this._graphicsControl;this._graphicsControl=null;}};_pChartBase.on_change_containerPos=function(left,top){};_pChartBase.on_change_containerRect=function(width,height){if(width<=0||height<=0){return;}var control_elem=this.getElement();if(control_elem&&this._is_created_contents){if(this._firstredraw){this._firstredraw=false;this._graphicsControl.resize(control_elem.client_width,control_elem.client_height);this.on_apply_contents();this._changedData=true;this._draw();return;}if(this._graphicsControl){this._graphicsControl.resize(control_elem.client_width,control_elem.client_height);this._graphicsControl.draw();this._changedData=true;this._ani_exception=true;this._draw();}}};_pChartBase.setBindDataset=function(obj){if(obj instanceof nexacro.Dataset){if(this._binddataset){this._removeDatasetEventHandlers(this._binddataset);}if(!obj){this._binddataset=null;this.binddataset="";}else{this._binddataset=obj;this.binddataset=obj.id;}this.on_apply_binddataset();}};_pChartBase.getBindDataset=function(){return this._binddataset;};_pChartBase.set_binddataset=function(str){if(str&&typeof str!="string"){this.setBindDataset(str);if(this._changedData){this._loadanimation=true;}this._draw();if(this._binddataset){return this._binddataset.id;}else{return this.binddataset;}}if(str!=this.binddataset||this.binddataset&&!this._binddataset){if(this._binddataset){this._removeDatasetEventHandlers(this._binddataset);}if(!str){this._binddataset=null;this.binddataset="";}else{str=str.replace("@","");this._binddataset=this._findDataset(str);this.binddataset=str;}this.on_apply_binddataset();if(this._changedData){this._loadanimation=true;}}this._draw();return this.binddataset;};_pChartBase._checkcategorycolumn=function(){};_pChartBase.on_apply_binddataset=function(){var dsObj=this._binddataset;if(this._dataMap){this._dataMap.clear();this._dataMap=null;}if(dsObj){this._checkcategorycolumn();this._dataMap=new nexacro._DatasetMap(false);this._dataMap.buildDataWithDataset(dsObj,this._getBindableValue("categorycolumn"),this._createObjectItem,this);this._setDatasetEventHandlers(dsObj);}this._changedData=true;};_pChartBase.set_contents=function(val){this._setContents(val);this._changedData=true;this._reset=true;this._draw();};_pChartBase._deleteContentsProp=function(prop,idx){if(this._isApplyContents){return;}if(this.contents&&this.contents[prop]){var contents=this.contents;if(nexacro._isArray(contents[prop])){delete contents[prop][idx];contents[prop].splice(idx,1);}else{delete contents[prop];}}};_pChartBase._setContents=function(contents){this.contents=contents;this.on_apply_contents();};_pChartBase.on_apply_contents=function(){if(this._control_element){this._isApplyContents=true;this._destroySubControl();this._createSubControl(this.contents);this._isApplyContents=false;}};_pChartBase.set_locale=function(val){if(val!=this.locale){this.locale=val;this._locale=val;this.on_apply_locale(val);}this._draw();};_pChartBase.on_apply_locale=function(val){var charttype=this._type_name;nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(series,index){if(series){series.on_apply_locale();}},this);if(charttype=="BasicChart"||charttype=="BubbleChart"||charttype=="GaugeChart"||charttype=="FloatChart"){nexacro._ChartGraphicsLibArray.forEach(this._axes,function(axis,index){if(axis){axis._locale=val;axis.on_apply_locale();}},this);}else if(charttype=="RadarChart"||charttype=="RoseChart"){var categoryaxis=this.categoryaxis;var valueaxes=this.valueaxes;if(categoryaxis){categoryaxis._locale=val;categoryaxis.on_apply_locale();}if(valueaxes){nexacro._ChartGraphicsLibArray.forEach(this.valueaxes,function(axis,index){if(axis){axis._locale=val;axis.on_apply_locale();}},this);}}};_pChartBase.set_colorset=function(val){if(nexacro._ChartGraphicsLib.isEmpty(val)){val="color10";}if(this.colorset!=val){this.colorset=val;this.on_apply_colorset(val);}this._draw();};_pChartBase.on_apply_colorset=function(colorset){var index=nexacro._ChartGraphicsLibArray.indexOf(this._colorCategory,colorset);var index1=nexacro._ChartGraphicsLibArray.indexOf(this._colorCategory,"colorRed10");var index2=nexacro._ChartGraphicsLibArray.indexOf(this._colorCategory,"colorPurple10");if(index== -1||index1== -1||index2== -1){return false;}this._colorset=nexacro._ChartColorset[this._colorCategory[index]];this._highlightcolorset=nexacro._ChartColorset[this._colorCategory[index1]];this._selectcolorset=nexacro._ChartColorset[this._colorCategory[index2]];this._changedColorset=true;};_pChartBase.set_title=function(){};_pChartBase.set_titlespacing=function(val){this.titlespacing=val;if(val){if(this._titlespacing==null||this._titlespacing.val!=val){var titlespacing=nexacro.PaddingObject(val);this._titlespacing=titlespacing;this.on_apply_titlespacing();}}else{if(this._titlespacing){this._titlespacing=null;this.on_apply_titlespacing();}}this._draw();};_pChartBase.on_apply_titlespacing=function(){if(this.title){this._rearrange=true;this._changedData=true;}};_pChartBase.set_legend=function(){};_pChartBase.set_legendspacing=function(val){this.legendspacing=val;if(val){if(this._legendspacing==null||this._legendspacing.value!=val){var legendspacing=nexacro.PaddingObject(val);this._legendspacing=legendspacing;this.on_apply_legendspacing();}}else{if(this._legendspacing){this._legendspacing=this._nullspacing;this.on_apply_legendspacing();}}this._draw();};_pChartBase.on_apply_legendspacing=function(){if(this.legend){this._rearrange=true;this._changedData=true;}};_pChartBase.set_board=function(){};_pChartBase.set_boardspacing=function(val){this.boardspacing=val;if(val){if(this._boardspacing==null||this._boardspacing.value!=val){var boardspacing=nexacro.PaddingObject(val);this._boardspacing=boardspacing;this.on_apply_boardspacing();}}else{if(this._boardspacing){this._boardspacing=this._nullspacing;this.on_apply_boardspacing();}}this._draw();};_pChartBase.on_apply_boardspacing=function(){if(this.board){this._rearrange=true;this._changedData=true;}};_pChartBase.set_tooltip=function(){};_pChartBase.set_seriesset=function(){};_pChartBase.set_enableredraw=function(v){if(v!=null&&this.enableredraw!=v){v=nexacro._toBoolean(v);this.enableredraw=v;if(this.enableredraw){this._draw();}}return v;};_pChartBase.set_duration=function(v){var duration=nexacro._toInt(v);if(this.duration!=duration){this.duration=duration;}};_pChartBase.on_apply_duration=function(duration){if(!this._isanimationloading){this._duration=duration;}};_pChartBase.set_enableanimation=function(v){if(v!=null&&this.enableanimation!=v){v=nexacro._toBoolean(v);this.enableanimation=v;if(this.enableanimation){this._changedData=true;this._loadanimation=true;this._draw();}else{if(this._isanimationloading){this._changedData=true;this._draw();}}}return v;};_pChartBase.removeUserControl=function(id){var group=this._seriesGroup;var itemId="UserControlItem_"+id;var item=group.getObjectByID(itemId);if(item){group.removeChild(item);item.destroy();}};_pChartBase.userControlDraw=function(item){this._graphicsControl._repaint=true;this._graphicsControl.draw();};_pChartBase.getCanvasContext=function(){return this._graphicsControl._layer._canvas;};_pChartBase.addUserControl=function(id,type){if(!this._seriesGroup||!id||!type){return;}var group=this._seriesGroup;var itemId="UserControlItem_"+id;var item=group.getObjectByID(itemId);if(!item){switch(type){case "rect":item=new nexacro.ChartGraphicsRect(0,0,0,0);break;case "arc":item=new nexacro.ChartGraphicsEllipse(0,0,0,0);break;case "path":item=new nexacro.ChartGraphicsPath();break;case "text":item=new nexacro.ChartGraphicsText(0,0);item.set_textAlign("center");item.set_verticalAlign("middle");break;default:}item.set_id(itemId);group.addChild(item);}return item;};_pChartBase.setCategoryaxis=function(val){var re=false,cont={},categoryaxis=this.categoryaxis;if(nexacro._ChartGraphicsLib.isEmpty(val)){return false;}if(typeof (val)=="object"){cont=val;}if(categoryaxis&&cont){this.contents.categoryaxis=this._mergeContents(true,this.contents.categoryaxis,cont);this._drawing=true;this._setProperties(cont,categoryaxis);this._drawing=false;}if(categoryaxis){re=true;this._changedData=true;}this._draw();return re;};_pChartBase.getBorderPosInfo=function(){var board=this.board;if(board){return {"l":this._boardRectLeft,"t":this._boardRectTop,"w":this._boardWidth,"h":this._boardHeight};}};_pChartBase.getSeriesPointPos=function(seriesIdx,dataIdx){var series=this.seriesset[seriesIdx];if(!series){return;}var items=series._seriesitems;var returnData=null;if(items&&items[dataIdx]){var item=items[dataIdx];if(item._slice&&item.pathData){var boardborderWidth=this._boardBorderWidth?this._boardBorderWidth:0;var boardborderHeight=this._boardBorderHeight?this._boardBorderHeight:0;var maxRadius=Math.min((this._boardWidth-(boardborderWidth*2)),(this._boardHeight-(boardborderHeight*2)))/2;if(this.valueaxes){maxRadius-=(this.valueaxes[0]?this.valueaxes[0]._allaxisgapsize:0);}returnData={"startangle":item.startAngle,"endangle":item.endAngle,"rstartangle":item.rStartAngle,"rendangle":item.rEndAngle,"angle":item.angle,"bound":item._slice._bounds,"centerx":this._centerLeft,"centery":this._centerTop,"posinfo":item._posinfo,"radius":maxRadius};}else{returnData={"x":item.x,"y":item.y,"bound":item._bounds,"radius":item.radius,"matrix":item._matrix};}}return returnData;};_pChartBase.getAxisPointPos=function(type,value,axisindex,tickindex){var axis;if(type=="category"){axis=this.categoryaxis;}else{axisindex=!axisindex?0:axisindex;axis=this.valueaxes[axisindex];}if(!axis){return;}var axisticks=axis._ticks;var checkXI= -1;if(tickindex!=undefined&&tickindex!=null){checkXI=tickindex;}else{for(var xi=0;xi<axisticks.length;xi++ ){if(isNaN(value)){if(axisticks[xi].label==value){checkXI=xi;break;}}else{if(axisticks[xi].v==value){checkXI=xi;break;}}}}if(checkXI>=0){var elem=axisticks[checkXI].boardlineElement;return {"x":elem.x1+axis._tickstartgap,"y":elem.y2,"point":elem._point};}return null;};_pChartBase.runAnimation=function(){if(!this._isanimationloading){this._loadanimation=true;this._runanimation=true;this._changedData=true;this._draw();}return;};_pChartBase.clearContents=function(){this._drawing=true;this._destroySubControl();this._drawing=false;this.contents=null;this._draw();};_pChartBase.updateContents=function(contents){if(!contents){return false;}var capitalize=nexacro._ChartGraphicsLibString.capitalize;var capNm;var value;var setter;var subControl;if(!this._control_element){return;}this.contents=this._mergeContents(true,this.contents,contents);this._createBoard();nexacro._ChartGraphicsLibArray.forEach(this._createdOrder,function(name,index){if(!contents.hasOwnProperty(name)){return;}value=contents[name];if(!value){return;}capNm=capitalize(name);if(nexacro._ChartGraphicsLib.isObject(value)){subControl=this[name];if(subControl){this._drawing=true;this._setProperties(value,subControl);this._drawing=false;}else{setter="_create"+capNm;if(this[setter]){if(value.id){subControl=this[setter](value);}else{subControl=this[setter](value,"Chart"+capNm);}if(subControl){this._drawing=true;this._setProperties(value,subControl);this._drawing=false;}}}}else if(Array.isArray(value)){var valueaxes=this.valueaxes,seriesset=this.seriesset,valueaxis,series,i=0,object;nexacro._ChartGraphicsLibArray.forEach(value,function(o,idx){if(name=="valueaxes"){for(i=0;i<valueaxes.length;i++ ){valueaxis=valueaxes[i];if(valueaxis){if(valueaxis.id==o.id){object=valueaxis;break;}}}}else if(name=="seriesset"){for(i=0;i<seriesset.length;i++ ){series=seriesset[i];if(series){if(series.id==o.id){object=series;break;}}}}if(object){if(name=="valueaxes"){this.setValueaxis(object.id,o);}else if(name=="seriesset"){this.setSeries(object.id,o);}}else{if(name=="seriesset"){capNm="Series";}else if(name=="valueaxes"){capNm="Valueaxis";}setter="_append"+capNm;if(this[setter]){if(o.id){subControl=this[setter](o);}else{subControl=this[setter](o,"Chart"+capNm+idx);}}if(subControl){this._drawing=true;this._setProperties(o,subControl);this._drawing=false;}}object=null;},this);if(capNm=="Series"){this._drawing=true;this._setSeries();this._drawing=false;}}},this);this._changedData=true;this._changedColorset=true;this._draw();};_pChartBase.getSeriesByID=function(id){var index=nexacro._ChartGraphicsLibArray.indexOfProp(this.seriesset,"id",id);if(index> -1){return this.seriesset[index];}return null;};_pChartBase._clearMouseActionSeriesItem=function(){if(this._overSeriesItem){var tooltip=this.tooltip,series=this._overSeriesItem._series,seriesItemType=this._overSeriesItem._type,chartName;var overitemid=this._overSeriesItem.id;var oversearchbar=false;var oversearchpoint=false;var oversearchline=false;var oversearcharea=false;var oversearchgauge=false;var oversearchrose=false;var oversearchetc=false;if(overitemid.search("LineItem")>=0){oversearchline=true;}else if(overitemid.search("PointItem")>=0){oversearchpoint=true;}else if(overitemid.search("BarItem")>=0){oversearchbar=true;}else if(overitemid.search("AreaItem")>=0){oversearcharea=true;}else if(overitemid.search("RoseItem")>=0){oversearchrose=true;}else if(overitemid.search("GaugeItem")>=0){oversearchgauge=true;}else{oversearchetc=true;}if(tooltip&&tooltip.visible&&!oversearchline&&!oversearcharea){tooltip._hideTooltip(this._overSeriesItem);}if(seriesItemType){if(seriesItemType=="Rect"&&oversearchbar){if(series.barvisible&&series.highlightbarvisible){series._hideBarHighlight(this._overSeriesItem);}}else if(oversearchrose||oversearchpoint||oversearchline||oversearcharea||oversearchetc||oversearchgauge){chartName=this._type_name;if(chartName=="BasicChart"){if(oversearchpoint){series._hidePointHighlight(this._overSeriesItem);}else if(oversearchline){series._hideLineHighlight(this._overSeriesItem);}}else if(chartName=="FloatChart"){if(series.visible&&series.highlightbarvisible){series._hideHighlight(this._overSeriesItem);}}else if(chartName=="RadarChart"){if(oversearchpoint){series._hidePointHighlight(this._overSeriesItem);}else if(oversearchline){series._hideLineHighlight(this._overSeriesItem);}else if(oversearcharea){series._hideLineAreaHighlight(this._overSeriesItem);}}else if(chartName=="RoseChart"){if(oversearchrose){series._hideRoseHighlight(this._overSeriesItem);}}else if(chartName=="GaugeChart"){if(oversearchgauge){series._hideHighlight(this._overSeriesItem);}if(series.visible&&series.highlightbarvisible){series._hideHighlight(this._overSeriesItem);}}else{if(seriesItemType=="Ellipse"||seriesItemType=="Paths"||seriesItemType=="Path"){if(series.visible&&series.highlightvisible){series._hideHighlight(this._overSeriesItem);}}}}}this._overSeriesItem=null;}};_pChartBase.deleteSeries=function(val){var re=false,index=0;if(typeof (val)=="string"){var series=this.getSeriesByID(val);if(series){index=nexacro._ChartGraphicsLibArray.indexOf(this.seriesset,series);if(index> -1){this._deleteSeries(series,index);re=true;}}}if(re){if(this.seriesset.length==0){if(this.tooltip){this.tooltip._clearTooltip();}this._clearMouseActionSeriesItem();this._itemtextlist=null;this._seriesGroup.clear();this._highlightGroup.clear();if(this._type_name=="GaugeChart"){if(this.indicator){this.indicator.destroy();this.indicator=null;}}}this._changedData=true;this._changedColorset=true;}this._draw();return re;};_pChartBase.deleteAllSeries=function(){var seriesLength=this.seriesset.length;if(this.tooltip){this.tooltip._clearTooltip();}this._clearMouseActionSeriesItem();if(this.seriesset){while(this.seriesset.length>0){this._deleteSeries(this.seriesset[0],0);}if(this._seriesGroup){this._itemtextlist=null;this._highlightGroup.clear();this._seriesGroup.clear();}this._changedData=true;}this._draw();return seriesLength;};_pChartBase._drawEndEvent=function(){if(this.ondrawend&&this.ondrawend._has_handlers){var evt=new nexacro.ChartDrawEndEventInfo(this);return this.ondrawend._fireUserEvent(this,evt);}};_pChartBase.showBoard=function(){if(this.board){this.board.set_visible(true);}this._draw();};_pChartBase.hideBoard=function(){if(this.board){this.board.set_visible(false);}this._draw();};_pChartBase.showLegend=function(){if(this.legend){this.legend.set_visible(true);}this._changedData=true;this._draw();};_pChartBase.hideLegend=function(){if(this.legend){this.legend.set_visible(false);}this._changedData=true;this._draw();};_pChartBase.showTitle=function(){if(this.title){this.title.set_visible(true);}this._changedData=true;this._draw();};_pChartBase.hideTitle=function(){if(this.title){this.title.set_visible(false);}this._changedData=true;this._draw();};_pChartBase.showTooltip=function(){if(this.tooltip){this.tooltip.set_visible(true);}this._draw();};_pChartBase.hideTooltip=function(){if(this.tooltip){this.tooltip.set_visible(false);}this._draw();};_pChartBase.getHittestRefComponent=function(canvasX,canvasY){var targets,index=undefined,value,itemindex=undefined,itemobject=undefined,len=0,refobject={"object":null,"eventid":"onclick","index":undefined,"value":undefined,"itemindex":undefined,"itemobject":undefined};targets=this._graphicsControl._getGraphicsObjectAll(canvasX,canvasY);if(targets&&(len=targets.length)){var s,i,seriesitem;for(i=0;i<len;i++ ){if(targets[i]["_series"]){if(targets[i]["_legend"]){refobject.object=targets[i]["_legend"];refobject.eventid="onlegendclick";if(this._type_name=="PieChart"){s=targets[i]._series;itemindex=this._GetSeriesItemIndex(s.name);index=0;}else if(this._type_name=="GaugeChart"){if(this.gaugetype=="circular"){s=targets[i]._series;itemindex=this._GetSeriesItemIndex(s.name);index=0;}else{index=nexacro._ChartGraphicsLibArray.indexOfProp(this.seriesset,"id",targets[i]["_series"].id);}}else{index=nexacro._ChartGraphicsLibArray.indexOfProp(this.seriesset,"id",targets[i]["_series"].id);}}else{var targetObj=targets[i];refobject.object=targets[i]["_series"];refobject.eventid="onseriesclick";var overitemid=targets[i].id;if(this._type_name=="PieChart"){if(overitemid.search("SeriesItemText_")>=0||overitemid.search("SeriesPieItemLine_")>=0){itemindex=targetObj.index;}else{itemindex=this._GetSeriesItemIndexFromSlice(targets[i]);}index=0;}else if(this._type_name=="GaugeChart"){if(this.gaugetype=="circular"){if(overitemid.search("SeriesItemText_")>=0){itemindex=targetObj.index;}else{itemindex=this._GetSeriesItemIndexFromSlice(targets[i]);}index=0;}else{if(overitemid.search("SeriesItemText_")>=0){s=targets[i]["_series"];if(!s.visible){continue;}}index=nexacro._ChartGraphicsLibArray.indexOfProp(this.seriesset,"id",targets[i]["_series"].id);}}else{if(overitemid.search("SeriesItemText_")>=0){if(this._type_name=="BasicChart"){s=targets[i]["_series"];if((!s.linevisible&&!s.pointvisible&&!s.barvisible)){continue;}}else if(this._type_name=="RadarChart"||this._type_name=="RoseChart"){s=targets[i]["_series"];if((!s.linevisible&&!s.pointvisible)){continue;}}}index=nexacro._ChartGraphicsLibArray.indexOfProp(this.seriesset,"id",targets[i]["_series"].id);}if(this._type_name=="PieChart"){if(overitemid.search("SeriesItemText_")>=0||overitemid.search("SeriesPieItemLine_")>=0){value=targetObj.value;}else{seriesitem=this._GetSeriesItemFromIndex(itemindex);value=seriesitem.value;}}else if(this._type_name=="GaugeChart"){if(this.gaugetype=="circular"){if(overitemid.search("SeriesItemText_")>=0){value=targetObj.value;}else{seriesitem=this._GetSeriesItemFromIndex(itemindex);value=seriesitem.value;}}else{value=targetObj.value;itemindex=targetObj.index;}}else{if(overitemid.search("LineItem")>=0||overitemid.search("AreaItem")>=0){itemindex=undefined;}else{if(this._type_name=="BubbleChart"){value=targetObj._points;}else{value=targetObj.value;}itemindex=targetObj.index;}}}break;}else if(targets[i]["_axis"]){refobject.object=targets[i]["_axis"];refobject.eventid="onaxisclick";if(targets[i]["_axis"]._type=="categoryAxis"){itemindex=0;}else{if(this._type_name=="RadarChart"||this._type_name=="RoseChart"){itemindex=1;}else{itemindex=nexacro._ChartGraphicsLibArray.indexOfProp(this.valueaxes,"id",targets[i]["_axis"].id);}}break;}else if(targets[i]["_legend"]){refobject.object=targets[i]["_legend"];refobject.eventid="onlegendclick";break;}else if(targets[i]["_title"]){refobject.object=targets[i]["_title"];refobject.eventid="ontitleclick";break;}else if(targets[i]["_board"]){refobject.object=targets[i]["_board"];refobject.eventid="onboardclick";break;}else if(targets[i]["_rangebar"]){refobject.object=targets[i]["_rangebar"];if(refobject.object._isvscroll){refobject.eventid="onvrangebarclick";}else{refobject.eventid="onhrangebarclick";}break;}else if(targets[i]["_selection"]){continue;}else if(targets[i]["_crosshair"]){continue;}}}refobject.index=index;refobject.value=value;refobject.itemindex=itemindex;refobject.itemobject=itemobject;return refobject;};_pChartBase.on_notify_dataset_onload=function(obj,e){if(e){switch(e.reason){case nexacro.NormalDataset.REASON_LOAD:case nexacro.NormalDataset.REASON_RESET:{this.on_apply_binddataset();if(this._changedData){this.on_apply_contents();if(this.enableanimation){this._loadanimation=true;}obj.set_enableevent(false);if(obj.rowcount>1){obj.set_rowposition(0);}this._draw();obj.set_enableevent(true);}}break;case nexacro.NormalDataset.REASON_LOADCONTENT:if(this.enableanimation){this._loadanimation=true;}break;}}};_pChartBase._OverrideActionMouseMoveTouchMove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var ret;if(from_refer_comp&&from_refer_comp._type_name=="GraphicsControl"){if(this._dragRangebar){ret=this._dragRangebar.moved(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);if(ret=="drag"){}else{this._dragRangebar=null;}}if(this._dragSelection){ret=this._dragSelection.moved(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);if(ret=="drag"){}else{this._dragSelection=null;}}var targets=from_refer_comp._getGraphicsObjectAll(canvasX,canvasY),len=0,i=0,target,realCursor,curobj,cursorVal;if(targets&&(len=targets.length)){for(i=len-1;i> -1;i-- ){if(targets[i]["_cursor"]){target=targets[i];break;}}}if(ret!="drag"){if(target&&target._cursor){var rangebar=target._owner;if(rangebar&&rangebar._type_name=="ChartRangebarControl"){if(rangebar._isvscroll){cursorVal=rangebar._setCursorY(target,canvasY);}else{cursorVal=rangebar._setCursorX(target,canvasX);}}}if(cursorVal){realCursor=this.getElement().cursor;if(realCursor){if(cursorVal.value!=realCursor._value){this.getElement().setElementCursor(cursorVal);}}else{curobj=nexacro.CursorObject("default");this.getElement().setElementCursor(curobj);}}else{var compCursor=this._cursor;realCursor=this.getElement().cursor;if(!compCursor){curobj=nexacro.CursorObject("default");this.getElement().setElementCursor(curobj);}if(compCursor&&realCursor){if(compCursor!=realCursor._value){this.getElement().setElementCursor(compCursor);}}}}var tooltip=this.tooltip,highlightvisible=this._getHighlightVisible();if((tooltip&&tooltip.visible)||highlightvisible){var seriesItem;targets=this._graphicsControl._getGraphicsObjectAll(canvasX,canvasY);var searchbar=false;var searchpoint=false;var searchline=false;var searcharea=false;var searchgauge=false;var _seriesbaritem,_seriespointitem,_serieslineitem,_seriesareaitem,_seriesgaugeitem,_firstseriesitem;if(targets&&(len=targets.length)){var s;for(i=len-1;i> -1;i-- ){if(targets[i]["_series"]){s=targets[i]._series;var itemid=targets[i].id;if(s.linevisible&&itemid.search("LineItem")>=0&&!searchline){_serieslineitem=targets[i];searchline=true;}else if(s.pointvisible&&itemid.search("PointItem")>=0&&!searchpoint){_seriespointitem=targets[i];searchpoint=true;}else if(s.barvisible&&itemid.search("BarItem")>=0&&!searchbar){_seriesbaritem=targets[i];searchbar=true;}else if(s.lineareavisible&&itemid.search("AreaItem")>=0&&!searcharea){_seriesareaitem=targets[i];searcharea=true;}else if(s.visible&&itemid.search("GaugeItem")>=0&&!searchgauge){_seriesgaugeitem=targets[i];searchgauge=true;}else if(!_firstseriesitem){_firstseriesitem=targets[i];}}}if(searchpoint){seriesItem=_seriespointitem;searchline=false;searchbar=false;searcharea=false;searchgauge=false;}else if(searchline){seriesItem=_serieslineitem;searchpoint=false;searchbar=false;searcharea=false;searchgauge=false;}else if(searchbar){seriesItem=_seriesbaritem;searchline=false;searchpoint=false;searcharea=false;searchgauge=false;}else if(searcharea){seriesItem=_seriesareaitem;searchline=false;searchpoint=false;searchbar=false;searchgauge=false;}else if(searchgauge){seriesItem=_seriesgaugeitem;searchline=false;searchpoint=false;searchbar=false;searcharea=false;}else{seriesItem=_firstseriesitem;searchline=false;searchpoint=false;searchbar=false;searcharea=false;searchgauge=false;}}if(seriesItem!=this._overSeriesItem){var seriesItemType,series;var chartName=null;this._clearMouseActionSeriesItem();if(seriesItem){series=seriesItem._series;if(tooltip&&tooltip.visible&&!searchline&&!searcharea){tooltip._showTooltip(seriesItem,canvasX,canvasY);}seriesItemType=seriesItem._type;if(seriesItemType){if(seriesItemType=="Rect"&&searchbar){if(series.barvisible&&series.highlightbarvisible){series._showBarHighlight(seriesItem);}}else if(searchpoint||searchline||searcharea||searchgauge||_firstseriesitem){chartName=this._type_name;if(chartName=="BasicChart"){if(searchpoint&&series.pointvisible&&series.highlightpointvisible){series._showPointHighlight(seriesItem);}else if(searchline&&series.linevisible&&series.highlightlinevisible){series._showLineHighlight(seriesItem);}}else if(chartName=="RadarChart"){if(searchpoint&&series.pointvisible&&series.highlightpointvisible){series._showPointHighlight(seriesItem);}else if(searchline&&series.linevisible&&series.highlightlinevisible){series._showLineHighlight(seriesItem);}else if(searcharea&&series.lineareavisible&&series.highlightlineareavisible){series._showLineAreaHighlight(seriesItem);}}else if(chartName=="RoseChart"){if(series.highlightvisible){series._showRoseHighlight(seriesItem);}}else if(chartName=="GaugeChart"||chartName=="FloatChart"){if(series.visible&&series.highlightbarvisible){series._showHighlight(seriesItem);}}else{if(seriesItemType=="Ellipse"||seriesItemType=="Paths"||seriesItemType=="Path"){if(series.visible&&series.highlightvisible){series._showHighlight(seriesItem);}}}}}}this._overSeriesItem=seriesItem;}else{if(tooltip&&tooltip.visible&&!searchline&&!searcharea){tooltip._moveTooltip(seriesItem,canvasX,canvasY,this._boardRect);}}}var crosshair=this.crosshair;if(crosshair&&crosshair.visible){crosshair._showCrosshair(this._boardRect,canvasX,canvasY);}}};_pChartBase._OverrdieAnimateActionMouseMoveTouchMove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var PosArgument={"button":button,"alt_key":alt_key,"ctrl_key":ctrl_key,"shift_key":shift_key,"screenX":screenX,"screenY":screenY,"canvasX":canvasX,"canvasY":canvasY,"clientX":clientX,"clientY":clientY,"from_comp":from_comp,"from_refer_comp":from_refer_comp};if(!this._aniframe_mouse_move_action){var pThis=this;this._move_pos_queue=[];this._aniframe_mouse_move_action=new nexacro.AnimationFrame(this,function(){pThis._adjustChartMoveAction_callback();});}var cnt=this._move_pos_queue.push(PosArgument);if(cnt==1){this._aniframe_mouse_move_action.start();}};_pChartBase._adjustChartMoveAction_callback=function(){var pos=this._move_pos_queue.pop();if(this._move_pos_queue.length>2){this._aniframe_mouse_move_action.start();}else{this._aniframe_mouse_move_action.stop();}this._move_pos_queue=[];if(pos){this._OverrideActionMouseMoveTouchMove(pos.button,pos.alt_key,pos.ctrl_key,pos.shift_key,pos.screenX,pos.screenY,pos.canvasX,pos.canvasY,pos.clientX,pos.clientY,pos.from_comp,pos.from_refer_comp);}};_pChartBase._adjustChartMoveAction_callback_end=function(){};_pChartBase.on_fire_user_onmousemove=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}this._OverrdieAnimateActionMouseMoveTouchMove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this.onmousemove&&this.onmousemove._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onmousemove",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onmousemove._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onmouseenter=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this._aniframe_mouse_move_action){this._aniframe_mouse_move_action.start();this._move_pos_queue=[];}if(this.tooltip){this.tooltip._clearTooltip();}this._clearMouseActionSeriesItem();if(this.onmouseenter&&this.onmouseenter._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onmouseenter",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onmouseenter._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onmouseleave=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this._aniframe_mouse_move_action){this._aniframe_mouse_move_action.stop();this._move_pos_queue=[];}if(this.tooltip){this.tooltip._clearTooltip();}this._clearMouseActionSeriesItem();if(this._dragRangebar){this._changedData=true;this._ani_exception=true;this._draw();}if(this.onmouseleave&&this.onmouseleave._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onmouseleave",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onmouseleave._fireUserEvent(this,evt);}return false;};_pChartBase._adjustChartLeaveAction_callback=function(){if(this._leave_pos_queue.length==1){this._aniframe_mouse_leave_action.start();}else{this._aniframe_mouse_leave_action.stop();}this._leave_pos_queue=[];if(this.tooltip){this.tooltip._clearTooltip();}this._clearMouseActionSeriesItem();if(this._dragRangebar){this._changedData=true;this._ani_exception=true;this._draw();}};_pChartBase._OverrideActionLbuttonDownTouchStart=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(from_refer_comp&&from_refer_comp._type_name=="GraphicsControl"){var targets=from_refer_comp._getGraphicsObjectAll(canvasX,canvasY),len=0,target;if(targets&&(len=targets.length)){for(var i=len-1;i> -1;i-- ){if(targets[i]["_dragAction"]){target=targets[i];break;}}}if(target&&target._dragAction){this._dragRangebar=target._owner._dragObject(target,clientX,clientY);if(this.selection&&this.selection.visible){this.selection._clearSelection();}}else{if(this.selection&&this.selection.visible){var skip=false;if(canvasX<this._boardRect.left||canvasX>this._boardRect.right){skip=true;}if(canvasX<this._boardRect.left||canvasX>this._boardRect.right){skip=true;}if(!skip){this._dragSelection=this.selection._dragselectionObject(this.selection,clientX,clientY,canvasX,canvasY);}}}}};_pChartBase._OverrideActionLbuttonUpTouchEnd=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){var returnfirerangezoom=[];returnfirerangezoom[0]=false;returnfirerangezoom[1]=false;if(from_refer_comp&&from_refer_comp._type_name=="GraphicsControl"){if(this._dragRangebar){this._dragRangebar.ended(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY);this._dragRangebar=null;return returnfirerangezoom;}if(this._dragSelection){if(!this.useDragrangezoom&&this.selection._rangezoomdraw==true){if(this.onrangezoomed&&this.onrangezoomed._has_handlers){var charttype=this._type_name;var startaxisvalue;var endaxisvalue;var startaxisvalue2;var endaxisvalue2;var from,length=0,to;if(charttype=="BasicChart"){startaxisvalue=new Array();endaxisvalue=new Array();if(this.selection._xaxis._type=="categoryAxis"){var xindex=nexacro.round(this.selection._xstartdata);from=this.selection._xaxis._ticks[0];if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){if(from){startaxisvalue.push(from.label);}else{startaxisvalue.push(xindex);}}if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){startaxisvalue.push(nexacro.round(this.selection._ystartdata));}xindex=nexacro.round(this.selection._xenddata);length=this.selection._xaxis._ticks.length;to=this.selection._xaxis._ticks[length-1];if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){if(to){endaxisvalue.push(to.label);}else{endaxisvalue.push(xindex);}}if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){endaxisvalue.push(nexacro.round(this.selection._yenddata));}}else if(this.selection._yaxis._type=="categoryAxis"){var yindex=nexacro.round(this.selection._ystartdata);from=this.selection._yaxis._ticks[0];if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){if(from){startaxisvalue.push(from.label);}else{startaxisvalue.push(yindex);}}if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){startaxisvalue.push(nexacro.round(this.selection._xstartdata));}yindex=nexacro.round(this.selection._yenddata);length=this.selection._yaxis._ticks.length;to=this.selection._yaxis._ticks[length-1];if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){if(to){endaxisvalue.push(to.label);}else{endaxisvalue.push(yindex);}}if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){endaxisvalue.push(nexacro.round(this.selection._xenddata));}}}else if(charttype=="BubbleChart"){startaxisvalue=new Array();endaxisvalue=new Array();startaxisvalue2=new Array();endaxisvalue2=new Array();if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){startaxisvalue.push(this.selection._xstartdata);endaxisvalue.push(this.selection._xenddata);}if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){startaxisvalue2.push(this.selection._ystartdata);endaxisvalue2.push(this.selection._yenddata);}}var evt=new nexacro.ChartRangeZoomEventInfo(this,"onrangezoomed",from_comp,from_refer_comp,startaxisvalue,endaxisvalue,startaxisvalue2,endaxisvalue2);this.selection._rangezoomdraw=false;this._dragSelection=null;returnfirerangezoom[1]=this.onrangezoomed._fireUserEvent(this,evt);returnfirerangezoom[0]=true;}this.useFirerangezoom=true;}this.selection._rangezoomdraw=false;this._dragSelection=null;}}return returnfirerangezoom;};_pChartBase.on_fire_user_onlbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}this._OverrideActionLbuttonDownTouchStart(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);this._prelbuttondownrefobj=ref_subcontrol.object;if(this.onlbuttondown&&this.onlbuttondown._has_handlers){if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onlbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onlbuttondown._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onlbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}var retfire=this._OverrideActionLbuttonUpTouchEnd(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this.useFirerangezoom){return retfire[1];}if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onlbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onlbuttonup._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onrbuttonup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onrbuttonup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onrbuttonup._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onrbuttondown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onrbuttondown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.value);return this.onrbuttondown._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onmouseup=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp,from_elem){if(this._isanimationloading){return false;}if(this.onmouseup&&this.onmouseup._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onmouseup",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onmouseup._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_onmousedown=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.onmousedown&&this.onmousedown._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartMouseEventInfo(this,"onmousedown",button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onmousedown._fireUserEvent(this,evt);}return false;};_pChartBase.useDragrangezoom=false;_pChartBase.useFirerangezoom=false;_pChartBase.on_fire_user_ondrag=function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,refer_comp,self_refer_comp){if(this._isanimationloading){return false;}if(this.ondrag&&this.ondrag._has_handlers){var dragData=this._getDragData();var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=refer_comp;}var evt=new nexacro.ChartDragEventInfo(this,"ondrag",dragData,null,"text",null,this,self_refer_comp,from_comp,ref_subcontrol.object,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);var ret=this.ondrag._fireUserEvent(this,evt);if(ret==true){this.useDragrangezoom=true;}else{this.useDragrangezoom=false;}return [ret,this,self_refer_comp,dragData,evt.userdata];}this.useDragrangezoom=false;return [false];};_pChartBase.on_fire_user_ondrop=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.ondrop&&this.ondrop._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartDragEventInfo(this,"ondrop",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,ref_subcontrol.object,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.ondrop._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ondragenter=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.ondragenter&&this.ondragenter._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartDragEventInfo(this,"ondragenter",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,ref_subcontrol.object,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.ondragenter._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ondragleave=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this.ondragleave&&this.ondragleave._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartDragEventInfo(this,"ondragleave",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,ref_subcontrol.object,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.ondragleave._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ondragmove=function(src_comp,src_refer_comp,dragdata,userdata,datatype,filelist,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp){if(this._isanimationloading){return false;}if(this.ondragmove&&this.ondragmove._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.ChartDragEventInfo(this,"ondragmove",dragdata,userdata,datatype,filelist,src_comp,src_refer_comp,from_comp,ref_subcontrol.object,button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.ondragmove._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ontouchstart=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this._isanimationloading){return false;}var button=null;var alt_key=null;var ctrl_key=null;var shift_key=null;var screenX=null;var screenY=null;var canvasX=null;var canvasY=null;var clientX=null;var clientY=null;if(touchinfos&&touchinfos.length>0){screenX=touchinfos[0].screenx;screenY=touchinfos[0].screeny;canvasX=touchinfos[0].canvasx;canvasY=touchinfos[0].canvasy;clientX=touchinfos[0].clientx;clientY=touchinfos[0].clienty;this._OverrideActionLbuttonDownTouchStart(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);}if(this.ontouchstart&&this.ontouchstart._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.TouchEventInfo(this,"ontouchstart",touchinfos,changedtouchinfos,from_comp,ref_subcontrol.object);return this.ontouchstart._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ontouchend=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this._isanimationloading){return false;}var button=null;var alt_key=null;var ctrl_key=null;var shift_key=null;var screenX=null;var screenY=null;var canvasX=null;var canvasY=null;var clientX=null;var clientY=null;if(touchinfos&&touchinfos.length>0){screenX=touchinfos[0].screenx;screenY=touchinfos[0].screeny;canvasX=touchinfos[0].canvasx;canvasY=touchinfos[0].canvasy;clientX=touchinfos[0].clientx;clientY=touchinfos[0].clienty;var retfire=this._OverrideActionLbuttonUpTouchEnd(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);if(this.useFirerangezoom){return retfire[1];}}if(this.ontouchend&&this.ontouchend._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.TouchEventInfo(this,"ontouchend",touchinfos,changedtouchinfos,from_comp,ref_subcontrol.object);return this.ontouchend._fireUserEvent(this,evt);}return false;};_pChartBase.on_fire_user_ontouchmove=function(touchinfos,changedtouchinfos,from_comp,from_refer_comp){if(this._isanimationloading){return false;}var button=null;var alt_key=null;var ctrl_key=null;var shift_key=null;var screenX=null;var screenY=null;var canvasX=null;var canvasY=null;var clientX=null;var clientY=null;if(touchinfos&&touchinfos.length>0){screenX=touchinfos[0].screenx;screenY=touchinfos[0].screeny;canvasX=touchinfos[0].canvasx;canvasY=touchinfos[0].canvasy;clientX=touchinfos[0].clientx;clientY=touchinfos[0].clienty;this._OverrdieAnimateActionMouseMoveTouchMove(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY,from_comp,from_refer_comp);}if(this.ontouchmove&&this.ontouchmove._has_handlers){var ref_subcontrol=this.getHittestRefComponent(canvasX,canvasY);if(ref_subcontrol.object==null){ref_subcontrol.object=from_refer_comp;}var evt=new nexacro.TouchEventInfo(this,"ontouchmove",touchinfos,changedtouchinfos,from_comp,ref_subcontrol.object);return this.ontouchmove._fireUserEvent(this,evt);}return false;};_pChartBase.on_notify_graphicsControl_onclick=function(obj,e){if(this._isanimationloading){return false;}if(this.useFirerangezoom){this.useFirerangezoom=false;return false;}var targets,evt,len=0;if(e.fromobject.id&&e.fromreferenceobject.id=="GraphicsControl"){var legend=this.legend;if(legend){var useiteminvisible=legend.useiteminvisible,visible=legend.visible;if(visible&&useiteminvisible){targets=this._graphicsControl._getGraphicsObjectAll(e.canvasx,e.canvasy);if(targets&&(len=targets.length)){var s;for(var i=len-1;i> -1;i-- ){if(targets[i]["_series"]){var id=targets[i].id;if(id.search("ChartLegendItemMarker")>=0){s=targets[i]._series;var charttype=this._type_name;if(charttype=="PieChart"){if(s.visible){this._hideSeriesItem(s.name);}else{this._showSeriesItem(s.name);}break;}else{if(s.visible){this.hideSeries(s.id);}else{this.showSeries(s.id);}break;}}}}}}}}var ref_subcontrol=this.getHittestRefComponent(e.canvasx,e.canvasy);var ischartclick=false;if(ref_subcontrol.object!=this._prelbuttondownrefobj){return false;}if(ref_subcontrol.object==null){ischartclick=true;ref_subcontrol.object=e.fromreferenceobject;}this._prelbuttondownrefobj=null;if(this.onseriesclick&&this.onseriesclick._has_handlers&&ref_subcontrol.eventid=="onseriesclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onseriesclick._fireUserEvent(this,evt);}if(this.onaxisclick&&this.onaxisclick._has_handlers&&ref_subcontrol.eventid=="onaxisclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onaxisclick._fireUserEvent(this,evt);}if(this.onlegendclick&&this.onlegendclick._has_handlers&&ref_subcontrol.eventid=="onlegendclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onlegendclick._fireUserEvent(this,evt);}if(this.ontitleclick&&this.ontitleclick._has_handlers&&ref_subcontrol.eventid=="ontitleclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.ontitleclick._fireUserEvent(this,evt);}if(this.onvrangebarclick&&this.onvrangebarclick._has_handlers&&ref_subcontrol.eventid=="onvrangebarclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onvrangebarclick._fireUserEvent(this,evt);}if(this.onhrangebarclick&&this.onhrangebarclick._has_handlers&&ref_subcontrol.eventid=="onhrangebarclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onhrangebarclick._fireUserEvent(this,evt);}if(this.onboardclick&&this.onboardclick._has_handlers&&ref_subcontrol.eventid=="onboardclick"){evt=new nexacro.ChartClickEventInfo(this,ref_subcontrol.eventid,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,ref_subcontrol.object,ref_subcontrol.index,ref_subcontrol.itemindex,ref_subcontrol.value);return this.onboardclick._fireUserEvent(this,evt);}if(this.onclick&&this.onclick._has_handlers&&ischartclick){evt=new nexacro.ChartClickEventInfo(this,e.id,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,e.fromreferenceobject,undefined,undefined,undefined);return this.onclick._fireUserEvent(this,evt);}return false;};_pChartBase.on_notify_graphicsControl_ondblclick=function(obj,e){if(this._isanimationloading){return false;}if(this.ondblclick&&this.ondblclick._has_handlers){var evt=new nexacro.ChartClickEventInfo(this,e.id,e.button,e.altkey,e.ctrlkey,e.shiftkey,e.screenx,e.screeny,e.canvasx,e.canvasy,e.clientx,e.clienty,e.fromobject,e.fromreferenceobject,undefined,undefined,undefined);return this.ondblclick._fireUserEvent(this,evt);}return false;};_pChartBase._draw=function(){if(!this._isEnableRedraw()||this._drawing||!this._control_element){return;}if(!this._binddataset){return;}if(this._loadanimation&&this._binddataset.rowcount==0){this._loadanimation=false;}this._drawing=true;if(this._changedData){this._rearrange=true;this._recreate=true;}if(this._rearrange||this._recreate){if(this.contents!=null){this._setSeriesGroup();}}if(this._changedData||this._changedColorset){this._setSeries();if(this.legend){this._drawing=false;this._applyLegendItem();this._drawing=true;}}this._measure();this._arrange();this._graphicsControl.draw();var crosshair=this.crosshair;if(crosshair&&crosshair.visible&&(this._rearrange||this._recreate)){crosshair._calcCrosshair(this._boardRect);}this._changedData=false;this._ani_exception=false;this._loadanimation=false;this._runanimation=false;this._changedColorset=false;this._recreate=false;this._rearrange=false;this._drawing=false;if(!this.enableanimation){this._drawEndEvent();}else if(this._loadanimation==false&&this._isanimationloading==false){this._drawEndEvent();}};_pChartBase._arrangerangezoomselection=function(){};_pChartBase._measure=function(){var clientWidth=this._getClientWidth();var clientHeight=this._getClientHeight();var rearrange=this._rearrange,changedData=this._changedData;if(!this._boardRect){this._boardRect=new nexacro.Rect(0,0,clientWidth,clientHeight);}if(rearrange||changedData){this._boardRect.set(0,0,clientWidth,clientHeight);if(this.title){this.title._measure(clientWidth,clientHeight);}if(this.legend){var legendspacing=this._legendspacing;if(legendspacing){clientWidth=clientWidth-(legendspacing.left+legendspacing.right);}this.legend._measure(clientWidth);}}};_pChartBase._arrange=function(){if(this._rearrange){this._arrangeTitle();this._arrangeLegend();this._setBoardBorderSize();}};_pChartBase._setEventHandlerToGraphicsControl=function(){var graphicsControl=this._graphicsControl;if(graphicsControl){graphicsControl._setEventHandler("onclick",this.on_notify_graphicsControl_onclick,this);graphicsControl._setEventHandler("ondblclick",this.on_notify_graphicsControl_ondblclick,this);}};_pChartBase._setDatasetEventHandlers=function(ds){ds._setEventHandler("onload",this.on_notify_dataset_onload,this);var length,uHandler;ds.setEventHandler("oncolumnchanged",this._onColumnChangedHandler,this);uHandler=ds.oncolumnchanged._user_handlers;length=uHandler.length;if(length>1){nexacro._ChartGraphicsLibArray.move(uHandler,length-1,0);}ds.setEventHandler("onrowsetchanged",this._onRowSetChangedHandler,this);uHandler=ds.onrowsetchanged._user_handlers;length=uHandler.length;if(length>1){nexacro._ChartGraphicsLibArray.move(uHandler,length-1,0);}ds.setEventHandler("onrowposchanged",this._onRowPosChangedHandler,this);uHandler=ds.onrowposchanged._user_handlers;length=uHandler.length;if(length>1){nexacro._ChartGraphicsLibArray.move(uHandler,length-1,0);}};_pChartBase._removeDatasetEventHandlers=function(ds){if(ds){ds._removeEventHandler("onload",this.on_notify_dataset_onload,this);ds.removeEventHandler("oncolumnchanged",this._onColumnChangedHandler,this);ds.removeEventHandler("onrowsetchanged",this._onRowSetChangedHandler,this);ds.removeEventHandler("onrowposchanged",this._onRowPosChangedHandler,this);}};_pChartBase._onColumnChangedHandler=function(obj,e){var dsMap=this._dataMap;if(dsMap){var row=e.row;var columnid=e.columnid;var value=e.newvalue||0;var data=dsMap.getAt(row);var count=dsMap._btree.getCount();if(!data&&row>=count){return;}if(data){if(columnid==this._getBindableValue("categorycolumn")){dsMap.changeKey(data,value,row,this._createObjectItem,this);data[columnid]=value;}else{data[columnid]=value;}dsMap.setAt(row,data);this._changedData=true;this._recreate=true;this._rearrange=true;this._reset=true;this._draw();}}};_pChartBase._onRowSetChangedHandler=function(obj,e){if(e.reason==41){return;}var dsMap=this._dataMap;if(dsMap){var row=e.row;var count=e.count;var dsArray;var cnt=0;var categorydata=this._getBindableValue("categorycolumn");dsArray=dsMap.toArray();if(dsArray.length>0){cnt=dsArray.length;}switch(e.reason){case 12:var i=row+count-1,data;for(;i>=row;i-- ){data=this._createObjectItem(obj,i);if(this._type_name=="BubbleChart"||this._type_name=="FloatChart"){dsMap.insert(row,categorydata,data,cnt);cnt++ ;}else{dsMap.insert(row,obj.getColumn(i,categorydata),data);}}break;case 20:dsMap.removeAt(row);break;case 32:dsMap.moveRow(count-1,row);break;case 33:if(this._prevRowForExchangeRow==null){this._prevRowForExchangeRow=row;}else{dsMap.exchangeRow(this._prevRowForExchangeRow,row);this._prevRowForExchangeRow=null;}break;case 10:case 11:case 13:case 30:case 31:case 34:case 41:dsMap.clear();dsMap.buildDataWithDataset(obj,categorydata,this._createObjectItem,this);break;case 22:case 23:case 24:dsMap.clear();}this._changedData=true;this._reset=true;this._draw();}};_pChartBase._onRowPosChangedHandler=function(obj,e){var dsMap=this._dataMap;if(dsMap){this._rowposition=e.newrow;if(this._graphicsControl._is_created){this._changedData=true;this._reset=true;this._draw();}}};_pChartBase._createObjectItem=function(ds,row,key){var name,value,data={};for(var i=0,collen=ds.getColCount();i<collen;i++ ){name=ds.getColID(i);if(name==key){continue;}value=ds.getColumn(row,name);if(nexacro._ChartGraphicsLib.isEmpty(value)){value=null;}data[name]=value;}return data;};_pChartBase._destroySubControl=function(){if(this.board){this.board.destroy();this.board=null;}if(this.title){this.title.destroy();this.title=null;}if(this.legend){this.legend.destroy();this.legend=null;}if(this.tooltip){this.tooltip.destroy();this.tooltip=null;}var seriesset=this.seriesset;if(seriesset){while(this.seriesset.length>0){this._deleteSeries(this.seriesset[0],0);}}if(this._seriesGroup){this._seriesGroup.destroy();this._seriesGroup=null;this._itemtextlist=null;}if(this._highlightGroup){this._highlightGroup.destroy();this._highlightGroup=null;}};_pChartBase._appendSeries=function(contents){var series,id,seriesContents={},seriesLen= -1;if(!this._isApplyContents&&nexacro._ChartGraphicsLib.isEmpty(contents)){return seriesLen;}if(typeof (contents)=="object"){id=contents.id;}if(!id){seriesLen=this.seriesset.length+1;id="Series"+seriesLen;contents.id=id;}if(!this._isApplyContents){seriesContents=contents;this.contents.seriesset.push(seriesContents);}series=this._createSeries(id);if(series){series._chart=this;seriesLen=this.seriesset.length;series._configIndex=seriesLen;this.seriesset.push(series);this._drawing=true;this._setProperties(seriesContents,series);this._drawing=false;this._changedColorset=true;}return series;};_pChartBase._deleteSeries=function(series,index){series._destroy(false);this._deleteContentsProp("seriesset",index);nexacro._ChartGraphicsLibArray.removeAt(this.seriesset,index);var legend=this.legend;if(legend){this._applyLegendItem();}nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,idx){obj._configIndex=idx;},this);};_pChartBase._createSubControl=function(contents){if(!contents){return false;}this._createBoard();var capitalize=nexacro._ChartGraphicsLibString.capitalize;var capNm;var value;var setter;var charttype=this._type_name;var subControl;var createdCategoryaxis=false;nexacro._ChartGraphicsLibArray.forEach(this._createdOrder,function(name,index){if(!contents.hasOwnProperty(name)){return false;}value=contents[name];if(!value){return false;}capNm=capitalize(name);setter="_create"+capNm;if((charttype=="GaugeChart"||charttype=="RadarChart"||charttype=="BasicChart"||charttype=="RoseChart"||charttype=="FloatChart")&&capNm=="Categoryaxis"){createdCategoryaxis=true;}if(Array.isArray(value)){nexacro._ChartGraphicsLibArray.forEach(value,function(o,idx){if(name=="seriesset"){capNm="Series";}else if(name=="valueaxes"){capNm="Valueaxis";}if(this[setter]){if(o.id){subControl=this[setter](o,o.id);}else{subControl=this[setter](o,"Chart"+capNm+idx);}}if(subControl){this._drawing=true;this._setProperties(o,subControl);this._drawing=false;}},this);if(capNm=="Series"){this._drawing=true;this._setSeries();this._drawing=false;}}else if(nexacro._ChartGraphicsLib.isObject(value)){if(this[setter]){if(value.id){subControl=this[setter](value,value.id);}else{subControl=this[setter](value,"Chart"+capNm);}}if(subControl){this._drawing=true;this._setProperties(value,subControl);this._drawing=false;}}else if(nexacro._isString(value)){}},this);if((charttype=="RadarChart"||charttype=="BasicChart"||charttype=="RoseChart"||charttype=="FloatChart")&&!createdCategoryaxis){var axis=this._createCategoryaxis();axis._afterSetProperties();}if(charttype=="RadarChart"||charttype=="RoseChart"||charttype=="GaugeChart"){if(this.valueaxes.length<=0){axis=this._createValueaxes();axis._afterSetProperties();}}};_pChartBase._createBoard=function(o,id){if(!this.board){this.board=new nexacro.ChartBoardControl(id||"ChartBoardControl",this,this._graphicsControl);if(!this._seriesGroup){this._seriesGroup=new nexacro.ChartGraphicsGroup();this._seriesGroup.set_id("ChartSeriesGroup");this._graphicsControl.addChild(this._seriesGroup);}if(!this._highlightGroup){this._highlightGroup=new nexacro.ChartGraphicsGroup();this._highlightGroup.set_id("ChartHighlightGroup");this._graphicsControl.addChild(this._highlightGroup);}}return this.board;};_pChartBase._createTitle=function(o,id){if(!this.title){this.title=new nexacro.ChartTitleControl(id,this,this._graphicsControl);}return this.title;};_pChartBase._createLegend=function(o,id){if(!this.legend){this.legend=new nexacro.ChartLegendControl(id,this,this._graphicsControl);}this.legend._setData(this.seriesset);return this.legend;};_pChartBase._createTooltip=function(o,id){if(!this.tooltip){this.tooltip=new nexacro.ChartTooltipControl(id,this,this._graphicsControl);}return this.tooltip;};_pChartBase._mergeContents=function(){var target=arguments[0]||{},isDeep=false,idx=1,length=arguments.length,obj,prop,targetVal,objVal,objValIsArray,clone,pThis=this;if(typeof target==="boolean"){isDeep=target;target=arguments[1]||{};idx=2;}if(typeof target!=="object"&&!nexacro._ChartGraphicsLib.isFunction(target)){target={};}for(;idx<length;idx++ ){if((obj=arguments[idx])!=null){for(prop in obj){targetVal=target[prop];objVal=obj[prop];if(target===objVal){continue;}if(isDeep&&objVal&&(nexacro._ChartGraphicsLib.isObject(objVal)||(objValIsArray=nexacro._ChartGraphicsLib.isArray(objVal)))){if(objValIsArray){objValIsArray=false;clone=targetVal&&nexacro._ChartGraphicsLib.isArray(targetVal)?targetVal:[];}else{clone=targetVal&&nexacro._ChartGraphicsLib.isObject(targetVal)?targetVal:{};}target[prop]=pThis._mergeContents(isDeep,clone,objVal);}else if(objVal!==undefined){target[prop]=objVal;}}}}return target;};_pChartBase._arrangeTitle=function(){var title=this.title;if(title&&title.visible){var boardRect=this._boardRect,clientWidth=this._getClientWidth(),clientHeight=this._getClientHeight(),titlespacing=this._titlespacing||this._nullspacing,titleRect,titleHeight=0,titleWidth=0,titleLeft=0,titleTop=0,halign=title._halign||"center",valign=title._valign||"top",position=title._position||"top";var xSize=0;if(title._titleRect){titleRect=title._getRect();titleHeight=titlespacing.top+titleRect.height+titlespacing.bottom;titleWidth=titlespacing.left+titleRect.width+titlespacing.right;if(position=="top"){titleTop=boardRect.top+titlespacing.top;boardRect.set_top(boardRect.top+titleHeight);boardRect.set_height(boardRect.height-titleHeight);}else if(position=="bottom"){titleTop=boardRect.bottom-titlespacing.bottom;boardRect.set_height(boardRect.height-titleHeight);}else if(position=="left"){titleLeft=titlespacing.left;boardRect.set_left(titleWidth);boardRect.set_width(boardRect.width-titleWidth);}else if(position=="right"){titleLeft=boardRect.right-titlespacing.right-titleRect.width;boardRect.set_width(boardRect.width-titleWidth);}if(position=="top"||position=="bottom"){xSize=clientWidth;if(halign=="center"){titleLeft=xSize/2;titleLeft+=titlespacing.left;titleLeft-=titlespacing.right;}else if(halign=="left"){titleLeft=titlespacing.left;}else if(halign=="right"){titleLeft=xSize;titleLeft-=titlespacing.right;}}else if(position=="left"||position=="right"){xSize=clientHeight-titleRect.height;if(valign=="center"){titleTop=xSize/2;titleTop+=titlespacing.top;titleTop-=titlespacing.bottom;}else if(valign=="top"){titleTop+=titlespacing.top;}else if(valign=="bottom"){titleTop=clientHeight;titleTop-=titlespacing.bottom;}}}title._arrange(titleLeft,titleTop);}};_pChartBase._arrangeLegend=function(){var legend=this.legend;if(legend&&legend.visible){var boardRect=this._boardRect,clientWidth=this._getClientWidth(),clientHeight=this._getClientHeight(),legendRect,legendWidth=0,legendHeight=0,legendspacing=this._legendspacing||this._nullspacing,position=legend._position,halign=legend._halign,valign=legend._valign,legendLeft=0,legendTop=0,xSize=0;legendRect=legend._getRect();legendWidth=legendspacing.left+legendRect.width+legendspacing.right;legendHeight=legendspacing.top+legendRect.height+legendspacing.bottom;if((typeof legend.left=="number"&&legend.left> -1)&&typeof legend.top=="number"&&legend.top> -1){legendLeft=legend.left;legendLeft+=legendspacing.left;legendTop=legend.top;legendTop+=legendspacing.top;}else{if(position=="top"){legendTop=boardRect.top+legendspacing.top;boardRect.set_top(boardRect.top+legendHeight);boardRect.set_height(boardRect.height-legendHeight);}else if(position=="bottom"){legendTop=boardRect.bottom-legendspacing.bottom-legendRect.height;boardRect.set_height(boardRect.height-legendHeight);}else if(position=="left"){legendLeft=legendspacing.left;boardRect.set_left(legendWidth);boardRect.set_width(boardRect.width-legendWidth);}else if(position=="right"){legendLeft=boardRect.right-legendspacing.right-legendRect.width;boardRect.set_width(boardRect.width-legendWidth);}if(position=="top"||position=="bottom"){xSize=clientWidth-legendRect.width;if(halign=="center"){legendLeft=xSize/2;legendLeft+=legendspacing.left;legendLeft-=legendspacing.right;}else if(halign=="left"){legendLeft=legendspacing.left;}else if(halign=="right"){legendLeft=xSize;legendLeft-=legendspacing.right;}}else if(position=="left"||position=="right"){var title=this.title;var titleValign=title?title._valign:"top";xSize=clientHeight-legendRect.height;if(valign=="center"){legendTop=xSize/2;legendTop+=legendspacing.top;legendTop-=legendspacing.bottom;}else if(valign=="top"){if(title&&(titleValign=="top"||titleValign=="middle")){legendTop=boardRect.top;}legendTop+=legendspacing.top;}else if(valign=="bottom"){legendTop=xSize;legendTop-=legendspacing.bottom;if(title&&titleValign=="bottom"){legendTop=boardRect.bottom+legendRect.height+legendspacing.bottom;}}}}legend._arrange(legendLeft,legendTop);}};_pChartBase._arrangeBoard=function(){var board=this.board;if(board){var boardRect=this._boardRect,border=board._border,boardLeft=boardRect.left,boardTop=boardRect.top,borderWidth=boardRect.width,borderHeight=boardRect.height,boardspacing=this._boardspacing||this._nullspacing;if(border){boardLeft+=border.left._width||0;boardTop+=border.top._width||0;borderWidth-=border._getBorderWidth();borderHeight-=border._getBorderHeight();}boardLeft+=boardspacing.left;boardTop+=boardspacing.top;borderWidth-=boardspacing.left+boardspacing.right;borderHeight-=boardspacing.top+boardspacing.bottom;this._boardRectLeft=boardLeft;this._boardRectTop=boardTop;this._boardWidth=borderWidth;this._boardHeight=borderHeight;this._centerLeft=this._boardWidth/2+this._boardRectLeft;this._centerTop=this._boardHeight/2+this._boardRectTop;board._arrange(boardLeft,boardTop,borderWidth,borderHeight);}};_pChartBase._drawStackTotal=function(){var seriesset=this.seriesset;var stacklist=this._stackbargrouplist;var listone,listoneTmp,listitem;var nLeng=0;var series=seriesset[0];for(listone in stacklist){listitem=stacklist[listone];nLeng=listitem.length;for(var j=0;j<nLeng;j++ ){listoneTmp=listone;if(!listoneTmp||listoneTmp==""){listoneTmp="_default_";}series._drawStackBar(listoneTmp,j,listitem[j].l,listitem[j].t,listitem[j].w,listitem[j].h,listitem[j].r,listitem[j].b,listitem[j].v);}}if(stacklist){delete this._stackbargrouplist;this._stackbargrouplist=null;}var grpTextList=this._groupItemTextList;var data,seriesItem;if(grpTextList&&grpTextList.length>0){for(var z=0;z<grpTextList.length;z++ ){if(!grpTextList[z]||grpTextList[z].length==0){continue;}seriesItem=grpTextList[z];for(var zs=0;zs<seriesItem.length;zs++ ){data=seriesItem[zs];seriesset[z]._drawBarItemText(data.left,data.right,data.bottom,data.top,data.width,data.height,data.rect);}}}if(grpTextList){delete this._groupItemTextList;this._groupItemTextList=null;}};_pChartBase._arrangeSeries=function(){var seriesset=this.seriesset;var useanimation=false;var starttimestamp=null;var loadanimation=false;var i,effect,series;if(seriesset){var seriesLength=seriesset.length,rearrange=this._rearrange,recreate=this._recreate;if(rearrange||recreate){if(this.contents!=null){this._setSeriesGroup();}}if(seriesLength>0){if(!nexacro._isNull(this._seriesGroup)){if(rearrange){this._seriesGroup.setTransform("translate("+this._boardRectLeft+","+this._boardRectTop+")");this._highlightGroup.setTransform("translate("+this._boardRectLeft+","+this._boardRectTop+")");}}}if((this._runanimation||(this.enableanimation&&(rearrange||recreate)))&&!this._ani_exception&&!nexacro.isDesignMode&&!this._iscontents_editor){if(this._loadanimation==true){useanimation=true;starttimestamp= +new Date();}}for(i=0;i<seriesLength;i++ ){series=seriesset[i];if(series){var redrawSeries=series._redrawSeries;if(rearrange||recreate){redrawSeries=true;}if(useanimation&&series._chart_aniframe_obj){effect=series._chart_aniframe_obj;effect.enableanimation=useanimation;effect.starttime=starttimestamp;}series._draw(redrawSeries);}}this._drawStackTotal();for(i=0;i<seriesLength;i++ ){series=seriesset[i];if(series){effect=series._chart_aniframe_obj;if(effect.isloadanimation){loadanimation=true;}}}if(loadanimation){if(!this._isanimationloading){this._isanimationloading=true;}}}};_pChartBase._applyLegendItem=function(){if(this._drawing){return;}var legend=this.legend;if(legend){if(this.seriesset.length>0){var group=legend._group;if(legend.visible&&!group.visible){legend.on_apply_visible(legend.visible);}}else{legend.on_apply_visible(false);}legend._setData(this.seriesset);legend.on_apply_itemtext("[%titletext]");legend.on_apply_markerfillstyle(legend._markerfillstyle);legend.on_apply_markerlinestyle(legend._markerlinestyle);legend.on_apply_itemtextfont(legend._itemtextfont);legend.on_apply_itemtextcolor(legend._itemtextcolor);}};_pChartBase._setProperties=function(conts,subControl){var setter;subControl._is_initprop=true;nexacro._ChartGraphicsLibObject.Each(conts,function(name,val,object){setter="set_"+name;if(this[setter]){this[setter](val);}},subControl);subControl._is_initprop=false;if(subControl._afterSetProperties){subControl._afterSetProperties();}};_pChartBase._setSeriesGroup=function(){if(!this.board){this.board=new nexacro.ChartBoardControl("ChartBoardControl",this,this._graphicsControl);}if(this._seriesGroup){this._seriesGroup.clear();}else if(!this._seriesGroup){this._seriesGroup=new nexacro.ChartGraphicsGroup();this._seriesGroup.set_id("ChartSeriesGroup");this._graphicsControl.addChild(this._seriesGroup);this._seriesGroup.clear();}if(this._highlightGroup){this._highlightGroup.clear();}else if(!this._highlightGroup){this._highlightGroup=new nexacro.ChartGraphicsGroup();this._highlightGroup.set_id("ChartHighlightGroup");this._graphicsControl.addChild(this._highlightGroup);this._highlightGroup.clear();}};_pChartBase._setBoardBorderSize=function(){var board=this.board;if(board){var border=board._border,boardBorderLeftWidth=0,boardBorderTopWidth=0,boardBorderRightWidth=0,boardBorderBottomWidth=0,boardspacing=this._boardspacing||this._nullspacing;if(border){boardBorderLeftWidth=border.left._width||0;boardBorderTopWidth=border.top._width||0;boardBorderRightWidth=border.right._width||0;boardBorderBottomWidth=border.bottom._width||0;this._boardBorderSize={"left":boardBorderLeftWidth,"top":boardBorderTopWidth,"right":boardBorderRightWidth,"bottom":boardBorderBottomWidth};}this._boardBorderWidth=boardBorderLeftWidth+boardBorderRightWidth+boardspacing.left+boardspacing.right;this._boardBorderHeight=boardBorderTopWidth+boardBorderBottomWidth+boardspacing.top+boardspacing.bottom;}};_pChartBase._getBindableValue=function(prop){var val;if(prop){val=this[prop];if(val){var type=typeof val;if(!(type=="number"||type=="string")){if(val._bindtype==1){return val._bindexpr;}else{return val._value;}}}}return val;};}_pChartBase._chageGroupObject=function(from,to,id,reverse){var fromgroup,togroup,item;if(reverse){fromgroup=to;togroup=from;}else{fromgroup=from;togroup=to;}for(var i=0;i<id.length;i++ ){item=fromgroup.getObjectByID(id[i]);if(item){fromgroup.removeChild(item);togroup.addChild(item);item._painted=0;item._drawflags=0;}else{item=togroup.getObjectByID(id[i]);if(item){togroup.removeChild(item);togroup.addChild(item);item._painted=0;item._drawflags=0;}}}};_pChartBase._setChangeInBoardAreaPos=function(item){if(item&&item._type_name=="GraphicsText"){var labelBoundRect=item.getGlobalBoundRect(),gridrect=this.board._gridRect,textW=labelBoundRect.width,textH=labelBoundRect.height,itemLeft=labelBoundRect.left,itemTop=labelBoundRect.top;var pos=item.getCenter();var cx=pos.x;var cy=pos.y;var _txtWidthHalf=(item._txtSize[0]||textW)/2;var _txtHeightHalf=(item._txtSize[1]||textH)/2;if(itemLeft<=gridrect.x){if(cx-(_txtWidthHalf)<0){item.set_x(item.x+(Math.abs(cx-_txtWidthHalf))+1);}}else if((itemLeft+textW)>=gridrect.width){var rectwidth=gridrect.width;if(cx+(_txtWidthHalf)>rectwidth){item.set_x(item.x-((cx+_txtWidthHalf)-rectwidth)-1);}}if(itemTop<=gridrect.y){if(cy-(_txtHeightHalf)<0){item.set_y(item.y+(Math.abs(cy-_txtHeightHalf)));}}else if((itemTop+textH)>=gridrect.height){var rectheight=gridrect.height;if(cy+(_txtHeightHalf)>rectheight){item.set_y(item.y-((cy+_txtHeightHalf)-rectheight));}}}};if(!nexacro._AxisChartBase){nexacro._AxisChartBase=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._ChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.valueaxes=[];this._axes=[];this._xaxes=[];this._yaxes=[];};var _pAxisChartBase=nexacro._createPrototype(nexacro._ChartBase,nexacro._AxisChartBase);nexacro._AxisChartBase.prototype=_pAxisChartBase;_pAxisChartBase._type_name="AxisChartBase";_pAxisChartBase.hrangebar=null;_pAxisChartBase.vrangebar=null;_pAxisChartBase.valueaxes=null;_pAxisChartBase.crosshair=null;_pAxisChartBase.selection=null;_pAxisChartBase.hrangebarspacing="";_pAxisChartBase.vrangebarspacing="";_pAxisChartBase.rangezoom="none";_pAxisChartBase._hrangebarspacing=null;_pAxisChartBase._vrangebarspacing=null;_pAxisChartBase._axes=null;_pAxisChartBase._xaxes=null;_pAxisChartBase._yaxes=null;_pAxisChartBase._isstepline=false;_pAxisChartBase.on_destroy_contents=function(){if(this.valueaxes.length){this.deleteAllValueaxis();}if(this.hrangebar){this.hrangebar.destroy();this.hrangebar=null;}if(this.vrangebar){this.vrangebar.destroy();this.vrangebar=null;}if(this.crosshair){this.crosshair.destroy();this.crosshair=null;}if(this.selection){this.selection.destroy();this.selection=null;}if(this._hrangebarspacing){this._hrangebarspacing=null;}if(this._vrangebarspacing){this._vrangebarspacing=null;}this.vrangebarspacing=null;this.hrangebarspacing=null;this.rangezoom=null;this.valueaxes=null;this._axes=null;this._xaxes=null;this._yaxes=null;this._isstepline=null;nexacro._ChartBase.prototype.on_destroy_contents.call(this);};_pAxisChartBase.set_hrangebar=function(){};_pAxisChartBase.set_vrangebar=function(){};_pAxisChartBase.set_crosshair=function(){};_pAxisChartBase.set_selection=function(){};_pAxisChartBase.set_rangezoom=function(val){var rangezoom_enum=["none","x","y","xy"];if(rangezoom_enum.indexOf(val)== -1){return;}if(this.rangezoom!=val){this.rangezoom=val;this.on_apply_rangezoom();}this._draw();};_pAxisChartBase.on_apply_rangezoom=function(){this._rearrange=true;};_pAxisChartBase.set_hrangebarspacing=function(val){this.hrangebarspacing=val;if(val){if(this._hrangebarspacing==null||this._hrangebarspacing.value!=val){var hrangebarspacing=nexacro.PaddingObject(val);this._hrangebarspacing=hrangebarspacing;this.on_apply_hrangebarspacing();}}else{if(this._hrangebarspacing){this._hrangebarspacing=this._nullspacing;this.on_apply_hrangebarspacing();}}this._draw();};_pAxisChartBase.on_apply_hrangebarspacing=function(){if(this.hrangebar){this._rearrange=true;this._changedData=true;}};_pAxisChartBase.set_vrangebarspacing=function(val){this.vrangebarspacing=val;if(val){if(this._vrangebarspacing==null||this._vrangebarspacing.value!=val){var vrangebarspacing=nexacro.PaddingObject(val);this._vrangebarspacing=vrangebarspacing;this.on_apply_vrangebarspacing();}}else{if(this._vrangebarspacing){this._vrangebarspacing=this._nullspacing;this.on_apply_vrangebarspacing();}}this._draw();};_pAxisChartBase.on_apply_vrangebarspacing=function(){if(this.vrangebar){this._rearrange=true;this._changedData=true;}};_pAxisChartBase.set_valueaxes=function(){};_pAxisChartBase.getValueaxisByID=function(id){var index=nexacro._ChartGraphicsLibArray.indexOfProp(this.valueaxes,"id",id);if(index> -1){return this.valueaxes[index];}return null;};_pAxisChartBase.setValueaxis=function(id,contents){var valueaxis,valueaxisId,valueaxisIndex= -1;if(id&&typeof (id)=="string"){valueaxisId=id;}else{if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){valueaxisId=contents.id;}});}}if(valueaxisId){valueaxis=this.getValueaxisByID(valueaxisId);valueaxisIndex=nexacro._ChartGraphicsLibArray.indexOf(this.valueaxes,valueaxis);}if(valueaxis){var axisContents={};if(typeof (contents)=="object"){if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){valueaxisId=contents.id;}});}else{valueaxisIndex= -1;return valueaxisIndex;}axisContents=contents;}this.contents.valueaxes[valueaxisIndex]=this._mergeContents(true,this.contents.valueaxes[valueaxisIndex],axisContents);this._drawing=true;this._setProperties(axisContents,valueaxis);this._drawing=false;}else{if(typeof (contents)=="object"){if(typeof (valueaxisId)=="string"){contents.id=valueaxisId;}}valueaxis=this._appendValueaxis(contents);if(valueaxis){valueaxisIndex=this.valueaxes.length-1;}}this._changedData=true;this._draw();return valueaxisIndex;};_pAxisChartBase.deleteValueaxis=function(val){var re=false;if(typeof (val)=="string"){var axis=this.getValueaxisByID(val);if(axis){var index=nexacro._ChartGraphicsLibArray.indexOf(this.valueaxes,axis);if(index> -1){this._deleteAxis(axis,false,index);re=true;}}}if(re){this._changedData=true;}this._draw();return re;};_pAxisChartBase.deleteAllValueaxis=function(){var length=this.valueaxes.length,valueaxis;for(var i=0;i<length;i++ ){var index=length-i-1;valueaxis=this.valueaxes[index];if(valueaxis){this.deleteValueaxis(valueaxis.id);}}if(length>0){this._rearrange=true;}this._draw();return length;};_pAxisChartBase.showValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis){axis.set_visible(true);}this._draw();};_pAxisChartBase.hideValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis){axis.set_visible(false);}this._draw();};_pAxisChartBase.showHRangebar=function(){if(this.hrangebar){this.hrangebar.set_visible(true);}this._draw();};_pAxisChartBase.hideHRangebar=function(){if(this.hrangebar){this.hrangebar.set_visible(false);}this._draw();};_pAxisChartBase.showVRangebar=function(){if(this.vrangebar){this.vrangebar.set_visible(true);}this._draw();};_pAxisChartBase.hideVRangebar=function(){if(this.vrangebar){this.vrangebar.set_visible(false);}this._draw();};_pAxisChartBase.showCrosshair=function(){if(this.crosshair){this.crosshair.set_visible(true);}this._draw();};_pAxisChartBase.hideCrosshair=function(){if(this.crosshair){this.crosshair.set_visible(false);}this._draw();};_pAxisChartBase.showSelection=function(){if(this.selection){this.selection.set_visible(true);}this._draw();};_pAxisChartBase.hideSelection=function(){if(this.selection){this.selection.set_visible(false);}this._draw();};_pAxisChartBase._createSeriesset=function(o,id){if(!this._seriesGroup){return false;}var series,seriesLength=0;if(this.seriesset){seriesLength=this.seriesset.length;}for(var i=0;i<seriesLength;i++ ){var s=this.seriesset[i];if(s){var seriesId=s.id;if(seriesId==id){throw nexacro.MakeNativeError(this,"native_exist_id",seriesId);}}}series=this._appendSeries(o);return series;};_pAxisChartBase.setSeries=function(id,contents){var series,seriesId,seriesIndex= -1;var charttype=this._type_name;if(id&&typeof (id)=="string"){seriesId=id;}else{if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){seriesId=contents.id;}});}}if(seriesId){series=this.getSeriesByID(seriesId);seriesIndex=nexacro._ChartGraphicsLibArray.indexOf(this.seriesset,series);}if(series){var seriesContents={};if(typeof (contents)=="object"){if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){if(charttype=="GaugeChart"||charttype=="PieChart"){seriesId=contents.id;}else{if(typeof (seriesId)=="string"){contents.id=seriesId;}}}});}else{seriesIndex= -1;return seriesIndex;}seriesContents=contents;this.contents.seriesset[seriesIndex]=this._mergeContents(true,this.contents.seriesset[seriesIndex],seriesContents);this._drawing=true;this._setProperties(seriesContents,series);this._drawing=false;if(this.contents.seriesset[seriesIndex]){seriesIndex=series._configIndex;}}else{seriesIndex= -1;}}else{if(typeof (contents)=="object"){if(typeof (seriesId)=="string"){contents.id=seriesId;}}series=this._appendSeries(contents);if(series&&series!= -1){seriesIndex=series._configIndex;}}if(seriesIndex>=0){this._changedData=true;this._changedColorset=true;}this._draw();return seriesIndex;};_pAxisChartBase._measure=function(){nexacro._ChartBase.prototype._measure.call(this);if(this._recreate){this._initAxes();this._setDatapointFormat();this._setDatapoint();this._setDataMinMax();this._resetAxes();}this._setAxes();};_pAxisChartBase._arrangerangezoomselection=function(){nexacro._ChartBase.prototype._arrangerangezoomselection.call(this);if(this.selection&&this.selection._rangezoomdraw){if(this.selection._type.indexOf("x")!= -1&&this.rangezoom.indexOf("x")!= -1){if(this.hrangebar&&this.hrangebar._group.visible){this.hrangebar._startdata=Math.min(this.selection._xstartdata,this.selection._xenddata);this.hrangebar._enddata=Math.max(this.selection._xstartdata,this.selection._xenddata);}else{this.selection._xaxis._scrollMin=this.selection._xaxis._min=Math.min(this.selection._xstartdata,this.selection._xenddata);this.selection._xaxis._scrollMax=this.selection._xaxis._max=Math.max(this.selection._xstartdata,this.selection._xenddata);}}if(this.selection._type.indexOf("y")!= -1&&this.rangezoom.indexOf("y")!= -1){if(this.vrangebar&&this.vrangebar._group.visible){this.vrangebar._startdata=Math.min(this.selection._ystartdata,this.selection._yenddata);this.vrangebar._enddata=Math.max(this.selection._ystartdata,this.selection._yenddata);}else{this.selection._yaxis._scrollMin=this.selection._yaxis._min=Math.min(this.selection._ystartdata,this.selection._yenddata);this.selection._yaxis._scrollMax=this.selection._yaxis._max=Math.max(this.selection._ystartdata,this.selection._yenddata);}}}};_pAxisChartBase._arrange=function(){nexacro._ChartBase.prototype._arrange.call(this);if(this._rearrange){this._arrangeAxesRect();this._arrangeRangebarBoardRect();}this._arrangeAxes();if(this._rearrange){this._arrangeBoard();}this._arrangeHrangeTrackbar();this._arrangeVrangeTrackbar();this._arrangeSeries();};_pAxisChartBase._setSeries=function(){var colorset=this._colorset;var highlightcolorset=this._highlightcolorset;var selectcolorset=this._selectcolorset;var colorcnt=0;nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){if(obj){if(this._changedData){obj._setData();}if(nexacro._isNull(obj._data)){return false;}if(this._changedColorset||obj._changedSeriesColor){if(nexacro._isString(colorset)){obj._setDefault(colorset);}else{var seriesColor=colorset[colorcnt];var highlightColor=highlightcolorset[colorcnt];var selectColor=selectcolorset[colorcnt];if(seriesColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){seriesColor=colorset[colorcnt];colorcnt++ ;}obj._setDefault(seriesColor,highlightColor,selectColor);}obj._changedSeriesColor=false;}}},this);};_pAxisChartBase._appendValueaxis=function(contents){var axis,id,axisContents={},valueaxesLeng= -1,charttype=this._type_name,seriesset=this.seriesset,s1,s2,linevisible1=false,location,i,linevisible2=false;if(!this._isApplyContents&&nexacro._ChartGraphicsLib.isEmpty(contents)){return valueaxesLeng;}if(typeof (contents)=="object"){axisContents=contents;id=contents.id;}if(!id){valueaxesLeng=this.valueaxes.length+1;id="Valueaxis"+valueaxesLeng;contents.id=id;}if(!this._isApplyContents){this.contents.valueaxes.push(axisContents);}if(charttype=="BasicChart"){for(i=0;i<seriesset.length;i++ ){s1=seriesset[i];s2=seriesset[i+1];if(s1){linevisible1=s1.linevisible;if(linevisible1){break;}}if(s2){linevisible2=s2.linevisible;if(linevisible2){break;}}}}axis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);axis._type="valueAxis";if(charttype=="BasicChart"){location=contents.opposite?"right":"left";}else{if(this.valueaxes.length==0){location=contents.opposite||"bottom";axis._location=location;}if(this.valueaxes.length==1){location=contents.opposite||"left";axis._location=location;}}if(charttype=="BasicChart"&&!this._isCompositeSeries&&this.rotateaxis&&this._rotateaxisY){location="bottom";}if(charttype=="BubbleChart"){if(seriesset){var valueaxes=this.valueaxes;for(i=seriesset.length-1;i> -1;i-- ){var series=seriesset[i];if(series){if(!series._xaxis){var valueaxis=valueaxes[0];if(valueaxis){valueaxis._direction="x";series.on_apply_valueaxis(valueaxis.id);break;}}if(!series._yaxis){var value2axis=valueaxes[1];if(value2axis){value2axis._direction="y";series.on_apply_value2axis(value2axis.id);break;}}}}}}this._drawing=true;this._setProperties(axisContents,axis);this._drawing=false;axis.on_apply_opposite(contents.opposite);this.valueaxes.push(axis);this._axes.push(axis);if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}return axis;};_pAxisChartBase._initAxes=function(){nexacro._ChartGraphicsLibArray.Each(this._axes,function(axis,i){if(axis){axis._initData();}});};_pAxisChartBase._resetAxes=function(){nexacro._ChartGraphicsLibArray.Each(this._axes,function(axis,i){if(axis){axis._resetData();}});};_pAxisChartBase._createVrangebar=function(o,id){if(!this.vrangebar){this.vrangebar=new nexacro.ChartRangebarControl(id,this,this._graphicsControl,true);}return this.vrangebar;};_pAxisChartBase._createHrangebar=function(o,id){if(!this.hrangebar){this.hrangebar=new nexacro.ChartRangebarControl(id,this,this._graphicsControl,false);}return this.hrangebar;};_pAxisChartBase._createCrosshair=function(o,id){if(!this.crosshair){this.crosshair=new nexacro.ChartCrosshairControl(id,this,this._graphicsControl);}return this.crosshair;};_pAxisChartBase._createSelection=function(o,id){if(!this.selection){this.selection=new nexacro.ChartSelectionControl(id,this,this._graphicsControl);}return this.selection;};_pAxisChartBase._setDatapointFormat=function(){var series=this.seriesset;var s;for(var i=0;i<series.length;i++ ){s=series[i];if(s){if(nexacro._isNull(s._data)){break;}this._initSeriesDatapoints(s);this._setSeriesDatapointsFormat(s);}}};_pAxisChartBase._setDatapoint=function(){var seriesset=this.seriesset,s,pointshape,xaxis,yaxis;this._isstepline=false;for(var i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){if(s.linetype=="step"){this._isstepline=true;}}}for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){var data=s._data;if(nexacro._isNull(data)){break;}if(s._datapoints.pointsize!=null){continue;}if(!s._datapoints.format){continue;}var stacktype=s._stacktype=="none"?this.stacktype:s._stacktype,bargrouping=this._bargrouping;pointshape=s.pointshape;if((stacktype=="normal"||stacktype=="percent"||bargrouping)&&this.seriesset.length>1){if(s.barvisible||s.linevisible||(s.linevisible&&s.lineareavisible)){this._setSeriesDatapoints(s);}else{if(!s.lineareavisible&&s.pointvisible){this._setSeriesDatapoints(s);}else{continue;}}}else{this._setSeriesDatapoints(s);}xaxis=s._xaxis;yaxis=s._yaxis;var charttype=this._type_name;if(charttype=="BasicChart"){if(s.barvisible||s.pointvisible||s.linevisible){xaxis._used=true;yaxis._used=true;}}else{if(s.visible){xaxis._used=true;yaxis._used=true;}}if(xaxis._type=="categoryAxis"){if(!xaxis._isTimeAxis){xaxis.ticks=xaxis._categoriesTickGenerator;}xaxis._setCategoriesData(s._datapoints);}else if(yaxis._type=="categoryAxis"){if(!yaxis._isTimeAxis){yaxis.ticks=yaxis._categoriesTickGenerator;}yaxis._setCategoriesData(s._datapoints);}if((pointshape=="square")||(pointshape=="diamond")||(pointshape=="triangle")||(pointshape=="cross")){if(s._pointshapeObj[pointshape]){seriesset[i]._pointshape=s._pointshapeObj[pointshape];}}}}};_pAxisChartBase._initSeriesDatapoints=function(series){series._datapoints={points:[]};};_pAxisChartBase._setSeriesDatapointsFormat=function(series){var format=series._datapoints.format,isXCategory=false,isYCategory=false;if(!series._xaxis||!series._yaxis){return false;}if(series._xaxis._type=="categoryAxis"&&!series._xaxis._isTimeAxis){isXCategory=true;}if(series._yaxis._type=="categoryAxis"&&!series._yaxis._isTimeAxis){isYCategory=true;}if(!format){format=[];format.push({x:true,category:isXCategory,required:true});format.push({y:true,category:isYCategory,required:true});if(series.barvisible||series.linevisible||(series.linevisible&&series.lineareavisible)){format.push({y:true,category:isYCategory,required:false,defaultValue:0});if(this.rotateaxis&&!this._isCompositeSeries){delete format[format.length-1].y;format[format.length-1].x=true;}}series._datapoints.format=format;}};_pAxisChartBase._setSeriesDatapoints=function(series){var datapoints,format,pointsize,points,insertSteps,data,p,val,f,xaxis=series._xaxis,yaxis=series._yaxis;datapoints=series._datapoints;format=datapoints.format;datapoints.pointsize=format.length;pointsize=datapoints.pointsize;points=datapoints.points;insertSteps=(series.linevisible&&series.linetype=="step")||this._isstepline;data=series._data;var i,j,k;for(i=j=0;i<data.length;i++ ,j+=pointsize){p=data[i];var nullify=p==null;if(!nullify){for(k=0;k<pointsize;k++ ){val=p[k];f=format[k];if(f){if(f.category==false&&val!=null){val= +val;if(isNaN(val)){val=null;}else if(val==Infinity){val=Number.MAX_VALUE;}else if(val== -Infinity){val= -Number.MAX_VALUE;}}if(val==null){if(f.required){nullify=true;}if(f.defaultValue!=null){val=f.defaultValue;}}}points[j+k]=val;}}if(nullify){for(k=0;k<pointsize;k++ ){val=points[j+k];if(val!=null){f=format[k];if(f.x){if(xaxis&&xaxis._updateMinMax){}}if(f.y){if(yaxis&&yaxis._updateMinMax){}}}else{points[j+k]=null;}}}{if(insertSteps&&j>0&&points[j-pointsize]!=points[j]){for(k=0;k<pointsize;k++ ){points[j+pointsize+k]=points[j+k];}points[j+1]=points[j-pointsize+1];j+=pointsize;}}}};_pAxisChartBase._setDataMinMax=function(){var series=this.seriesset;for(var i=0;i<series.length;i++ ){var s=series[i],data;if(s){data=s._data;if(nexacro._isNull(data)){s._redrawSeries=false;break;}this._setSeriesDataMinMax(s);}}};_pAxisChartBase._getcheckTimeAxisBarWidth=function(barwidth){var _resizeBar=barwidth;if(this.categoryaxis&&this.categoryaxis._isTimeAxis&&this.categoryaxis._delta){_resizeBar=barwidth*this.categoryaxis._delta;}return _resizeBar;};_pAxisChartBase._setSeriesDataMinMax=function(series){var datapoints=series._datapoints,xaxis=series._xaxis,yaxis=series._yaxis,xmin=Number.POSITIVE_INFINITY,ymin=Number.POSITIVE_INFINITY,xmax=Number.NEGATIVE_INFINITY,ymax=Number.NEGATIVE_INFINITY,points,pointsize,val,f,format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){continue;}for(var j=0;j<pointsize;j++ ){val=points[i+j];f=format[j];if(!f||val==Number.MAX_VALUE||val== -Number.MAX_VALUE){continue;}if(f.x){if(val<xmin){xmin=val;}if(val>xmax){xmax=val;}}if(f.y){if(val<ymin){ymin=val;}if(val>ymax){ymax=val;}}}}if(xaxis._tickmin){xmin=xaxis._tickmin;}if(xaxis._tickmax){xmax=xaxis._tickmax;}if(yaxis._tickmin){ymin=yaxis._tickmin;}if(yaxis._tickmax){ymax=yaxis._tickmax;}if(series.barvisible){var delta,barwidth;if(this.seriesset.length>1&&this._bargrouping&&series._groupbarwidth!=null){series._barsize=this._toGroupBarWidth(series._groupbarwidth);barwidth=series._barsize;}else if(this.seriesset.length>1&&this._bargrouping&&series._groupbarwidth==null){barwidth=this._barsize;}else{series.on_apply_barsize(series.barsize);barwidth=series._barsize||this._barsize;}barwidth=this._getcheckTimeAxisBarWidth(barwidth);switch(series._baralign){case "left":delta=0;break;case "right":delta= -barwidth;break;default:delta= -barwidth/2;}if(this.rotateaxis&&!this._isCompositeSeries){ymin+=delta;ymax+=delta+barwidth;}else{xmin+=delta;xmax+=delta+barwidth;}}if(xaxis&&xaxis._updateMinMax){xaxis._updateMinMax(xmin,xmax);}if(yaxis&&yaxis._updateMinMax){yaxis._updateMinMax(ymin,ymax);}};_pAxisChartBase._setAxes=function(){if(this._axes){var hrangebar=this.hrangebar;var vrangebar=this.vrangebar;var clientWidth=this._getClientWidth();var clientHeight=this._getClientHeight();var changedData=this._changedData;var categoryaxis;nexacro._ChartGraphicsLibArray.Each(this._axes,function(axis,i){if(!axis._used){if(axis._title){axis._group.removeChild(axis._title);axis._title.destroy();delete axis._title;axis._title=null;}return;}if(changedData){var charttype=this._type_name;this._arrangerangezoomselection();if(hrangebar&&hrangebar._group.visible&&!hrangebar._axes&&axis._direction=="x"){if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="x"){categoryaxis=this.categoryaxis;hrangebar._setRange(categoryaxis);}else{hrangebar._setRange(axis);}}if(vrangebar&&vrangebar._group.visible&&!vrangebar._axes&&axis._direction=="y"){if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="y"){categoryaxis=this.categoryaxis;vrangebar._setRange(categoryaxis);}else{vrangebar._setRange(axis);}}axis._changedTicks=true;}axis._setData(clientWidth,clientHeight);if(this._rearrange){axis._measureAxisRect();}},this);if(this._reset==true){this._reset=false;}}};_pAxisChartBase._arrangeAxesRect=function(){var axes=this._axes;if(axes){var boardRect=this._boardRect,axis,axisRect,axisRectLeft=0,axisRectTop=0,gap=0;for(var i=axes.length-1;i>=0; --i){axis=axes[i];if(axis){if(!axis._used){axis.on_apply_visible(false);axis.on_apply_boardlinevisible(false);continue;}axisRect=axis._axisRect._getRect(false,true);gap=axis.gap||0;if(axis._direction=="x"){if(axis._location=="top"){axisRectTop=boardRect.top;boardRect.set_top(boardRect.top+axisRect.height+gap);boardRect.set_height(boardRect.height-gap-axisRect.height);}else{boardRect.set_top(boardRect.top);boardRect.set_height(boardRect.height-gap-axisRect.height);axisRectTop=boardRect.bottom+gap;}axis._axisRect.set_y(axisRectTop);}else{if(axis._location=="left"){axisRectLeft=boardRect.left;boardRect.set_left(boardRect.left+axisRect.width+gap);boardRect.set_width(boardRect.width-gap-axisRect.width);}else{boardRect.set_left(boardRect.left);boardRect.set_width(boardRect.width-gap-axisRect.width);axisRectLeft=boardRect.left+boardRect.width+gap;}axis._axisRect.set_x(axisRectLeft);}}}}};_pAxisChartBase._arrangeHrangebar=function(){var hrangebar=this.hrangebar;if(hrangebar&&hrangebar._group.visible){var boardRect=this._boardRect,hrangebarspacing=this._hrangebarspacing||this._nullspacing,hrangebarRect,hrangebarRectHeight=0,hrangebarHeight=0,hrangebarLeft=0,hrangebarTop=0,boardBorderSize=this._boardBorderSize,boardBorderWidth=this._boardBorderWidth,boardspacing=this._boardspacing||this._nullspacing;hrangebarRect=hrangebar._getRect();if(hrangebarRect&&hrangebarRect.height>0){hrangebarRectHeight=hrangebarRect.height;hrangebarHeight=hrangebarspacing.top+hrangebarRectHeight+hrangebarspacing.bottom;}hrangebarLeft=boardRect.left+boardspacing.left+boardBorderSize.left;var axisPos;var charttype=this._type_name;if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="x"){axisPos=this.categoryaxis._location;}else{if(hrangebar._axis){axisPos=hrangebar._axis._location;}else if(this._xaxes.length>0){axisPos=this._xaxes[0]._location;}}if(axisPos=="bottom"){hrangebarTop=boardRect.top+hrangebarspacing.top;boardRect.set_top(boardRect.top+hrangebarHeight);boardRect.set_height(boardRect.height-hrangebarHeight);}else if(axisPos=="top"){hrangebarTop=boardRect.bottom-hrangebarspacing.bottom-hrangebarRectHeight;boardRect.set_height(boardRect.height-hrangebarHeight);}var linestyle=hrangebar._linestyle,borderWidth=0;if(linestyle){borderWidth=linestyle._getBorderLeftWidth();}else{borderWidth=1;}hrangebar._setRangebarRectWidth(boardRect.width-borderWidth-boardBorderWidth);hrangebar._arrange(hrangebarLeft,hrangebarTop);}};_pAxisChartBase._arrangeHrangeTrackbar=function(){var hrangebar=this.hrangebar;if(hrangebar&&hrangebar._group.visible){if(this._rearrange||hrangebar._rearrange){hrangebar._arrangeTrackbar();}}};_pAxisChartBase._arrangeVrangebar=function(){var vrangebar=this.vrangebar;if(vrangebar&&vrangebar._group.visible){var boardRect=this._boardRect,vrangebarspacing=this._vrangebarspacing||this._nullspacing,vrangebarRect,vrangebarRectWidth=0,vrangebarWidth=0,vrangebarLeft=0,vrangebarTop=0,boardBorderWidth=this._boardBorderWidth,boardspacing=this._boardspacing||this._nullspacing;vrangebarRect=vrangebar._getRect();if(vrangebarRect&&vrangebarRect.width>0){vrangebarRectWidth=vrangebarRect.width;vrangebarWidth=vrangebarspacing.left+vrangebarRectWidth+vrangebarspacing.right;}vrangebarTop=boardRect.top+vrangebarspacing.top;var axisPos;var charttype=this._type_name;if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="y"){axisPos=this.categoryaxis._location;}else{if(vrangebar._axis){axisPos=vrangebar._axis._location;}else if(this._yaxes.length>0){axisPos=this._yaxes[0]._location;}}if(axisPos=="right"){vrangebarLeft=boardRect.left+boardspacing.left;boardRect.set_left(boardRect.left+vrangebarWidth);boardRect.set_width(boardRect.width-vrangebarWidth);}else if(axisPos=="left"){vrangebarLeft=boardRect.right-vrangebarspacing.right-vrangebarRectWidth;boardRect.set_width(boardRect.width-vrangebarWidth);}var linestyle=vrangebar._linestyle,borderWidth=0;if(linestyle){borderWidth=linestyle._getBorderTopWidth();}else{borderWidth=1;}vrangebar._setRangebarRectHeight(boardRect.height-borderWidth-boardBorderWidth);vrangebar._arrange(vrangebarLeft,vrangebarTop);}};_pAxisChartBase._arrangeRangebarBoardRect=function(){var vrangebar=this.vrangebar;var hrangebar=this.hrangebar;var boardRect=this._boardRect,vrangebarspacing=this._vrangebarspacing||this._nullspacing,hrangebarspacing=this._hrangebarspacing||this._nullspacing,boardBorderSize=this._boardBorderSize,boardBorderWidth=this._boardBorderWidth,boardspacing=this._boardspacing||this._nullspacing,hrangebarRect,hrangebarRectHeight=0,hrangebarHeight=0,hrangebarLeft=0,hrangebarTop=0,vrangebarRect,vrangebarRectWidth=0,vrangebarWidth=0,vrangebarLeft=0,vrangebarTop=0;var linestyle,borderWidth=0,axisPos,charttype=this._type_name;if(hrangebar&&hrangebar._group.visible){hrangebarRect=hrangebar._getRect();if(hrangebarRect&&hrangebarRect.height>0){hrangebarRectHeight=hrangebarRect.height;hrangebarHeight=hrangebarspacing.top+hrangebarRectHeight+hrangebarspacing.bottom;}if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="x"){axisPos=this.categoryaxis._location;}else{if(hrangebar._axis){axisPos=hrangebar._axis._location;}else if(this._xaxes.length>0){axisPos=this._xaxes[0]._location;}}if(axisPos=="bottom"){hrangebarTop=boardRect.top+hrangebarspacing.top;boardRect.set_top(boardRect.top+hrangebarHeight);boardRect.set_height(boardRect.height-hrangebarHeight);}else if(axisPos=="top"){hrangebarTop=boardRect.bottom-hrangebarspacing.bottom-hrangebarRectHeight;boardRect.set_height(boardRect.height-hrangebarHeight);}}if(vrangebar&&vrangebar._group.visible){vrangebarRect=vrangebar._getRect();if(vrangebarRect&&vrangebarRect.width>0){vrangebarRectWidth=vrangebarRect.width;vrangebarWidth=vrangebarspacing.left+vrangebarRectWidth+vrangebarspacing.right;}if(charttype=="BasicChart"&&this.categoryaxis&&this.categoryaxis._direction=="y"){axisPos=this.categoryaxis._location;}else{if(vrangebar._axis){axisPos=vrangebar._axis._location;}else if(this._yaxes.length>0){axisPos=this._yaxes[0]._location;}}if(axisPos=="right"){vrangebarLeft=boardRect.left+boardspacing.left;boardRect.set_left(boardRect.left+vrangebarWidth);boardRect.set_width(boardRect.width-vrangebarWidth);}else if(axisPos=="left"){vrangebarLeft=boardRect.right-vrangebarspacing.right-vrangebarRectWidth;boardRect.set_width(boardRect.width-vrangebarWidth);}}hrangebarLeft=boardRect.left+boardspacing.left+boardBorderSize.left;vrangebarTop=boardRect.top+boardBorderSize.top+boardspacing.top;if(hrangebar&&hrangebar._group.visible){linestyle=hrangebar._linestyle;if(linestyle){borderWidth=linestyle._getBorderLeftWidth();}else{borderWidth=1;}hrangebar._setRangebarRectWidth(boardRect.width-borderWidth-boardBorderWidth);hrangebar._arrange(hrangebarLeft,hrangebarTop);}if(vrangebar&&vrangebar._group.visible){linestyle=vrangebar._linestyle;if(linestyle){borderWidth=linestyle._getBorderTopWidth();}else{borderWidth=1;}vrangebar._setRangebarRectHeight(boardRect.height-borderWidth-boardBorderWidth);vrangebar._arrange(vrangebarLeft,vrangebarTop);}};_pAxisChartBase._arrangeVrangeTrackbar=function(){var vrangebar=this.vrangebar;if(vrangebar&&vrangebar._group.visible){if(this._rearrange||vrangebar._rearrange){vrangebar._arrangeTrackbar();}}};_pAxisChartBase._arrangeAxes=function(){var axes=this._axes,axis,boardRect=this._boardRect,boardBorderSize=this._boardBorderSize,boardBorderWidth=this._boardBorderWidth,boardBorderHeight=this._boardBorderHeight,boardspacing=this._boardspacing||this._nullspacing,left=0,top=0,width=0,height=0,hrangebar=this.hrangebar,vrangebar=this.vrangebar,rearrange=this._rearrange,charttype=this._type_name,categoryaxis,applyTickgapToHRangebar=false,applyTickgapToVRangebar=false;for(var i=0;i<axes.length;i++ ){axis=axes[i];var tickendspace=0;if(axis){tickendspace=axis._tickendspace;}if(charttype=="BasicChart"||charttype=="FloatChart"){var rotateaxis=this.rotateaxis;var boardWidth=boardRect.width-boardBorderWidth;var tickstartgap;var tickendgap;categoryaxis=this.categoryaxis;if(categoryaxis){tickstartgap=categoryaxis.tickstartgap;tickendgap=categoryaxis.tickendgap;if(tickstartgap&&typeof tickstartgap=="string"){if(tickstartgap.indexOf("%")>=0){tickstartgap=this._convToPixel(tickstartgap,boardWidth);}else{tickstartgap=parseInt(tickstartgap);}}categoryaxis._tickstartgap=tickstartgap||10;if(tickendgap&&typeof tickendgap=="string"){if(tickendgap.indexOf("%")>=0){tickendgap=this._convToPixel(tickendgap,boardWidth);}else{tickendgap=parseInt(tickendgap);}}categoryaxis._tickendgap=tickendgap||10;}if(!rotateaxis){left=boardRect.left+boardBorderSize.left+boardspacing.left+axis._tickstartgap;width=boardRect.width-boardBorderWidth-axis._tickstartgap-axis._tickendgap;top=boardRect.top+boardBorderSize.top+boardspacing.top;height=boardRect.height-boardBorderHeight;applyTickgapToHRangebar=true;}else{left=boardRect.left+boardBorderSize.left+boardspacing.left;width=boardRect.width-boardBorderWidth;top=boardRect.top+boardBorderSize.top+boardspacing.top+axis._tickstartgap;height=boardRect.height-boardBorderHeight-axis._tickstartgap-axis._tickendgap;applyTickgapToVRangebar=true;}}else{left=boardRect.left+boardBorderSize.left+boardspacing.left;top=boardRect.top+boardBorderSize.top+boardspacing.top;width=boardRect.width-boardBorderWidth;height=boardRect.height-boardBorderHeight;}if(hrangebar&&hrangebar._group.visible&&categoryaxis&&categoryaxis._direction=="x"){hrangebar._setTransformationHelpers(boardRect.width-boardBorderWidth,categoryaxis);if(applyTickgapToHRangebar){width=boardRect.width-boardBorderWidth-categoryaxis._tickstartgap-categoryaxis._tickendgap-categoryaxis._tickendspace;}}else if(hrangebar&&hrangebar._group.visible&&hrangebar._axis){hrangebar._setTransformationHelpers(boardRect.width-boardBorderWidth,hrangebar._axis);}if(vrangebar&&vrangebar._group.visible&&categoryaxis&&categoryaxis._direction=="y"){vrangebar._setTransformationHelpers(boardRect.height-boardBorderHeight,categoryaxis);if(applyTickgapToVRangebar){height=boardRect.height-boardBorderHeight-categoryaxis._tickstartgap-categoryaxis._tickendgap-categoryaxis._tickendspace;}}else if(vrangebar&&vrangebar._group.visible&&vrangebar._axis){vrangebar._setTransformationHelpers(boardRect.height-boardBorderHeight,vrangebar._axis);}if(!axis._used){continue;}if(rearrange){if(axis._direction=="x"){if(categoryaxis&&applyTickgapToHRangebar&&hrangebar&&hrangebar._group.visible){tickendspace=0;}width=width-tickendspace;axis._axisRect.set_x(left);axis._axisRect.set_width(width);}else{top=top+tickendspace;if(categoryaxis&&applyTickgapToVRangebar&&vrangebar&&vrangebar._group.visible){tickendspace=0;}height=height-tickendspace;axis._axisRect.set_y(top);axis._axisRect.set_height(height);}axis._setTransformationHelpers(width,height);}if(rearrange||axis._rearrange||axis._rearrangeTitle){axis._arrange(left,top,width,height);}}};_pAxisChartBase._destroySubControl=function(){nexacro._ChartBase.prototype._destroySubControl.call(this);var valueaxes=this.valueaxes;if(valueaxes&&valueaxes.length>0){this.deleteAllValueaxis();}if(this.hrangebar){this.hrangebar.destroy();this.hrangebar=null;}if(this.vrangebar){this.vrangebar.destroy();this.vrangebar=null;}if(this.crosshair){this.crosshair.destroy();this.crosshair=null;}if(this.selection){this.selection.destroy();this.selection=null;}};_pAxisChartBase._deleteAxis=function(axis,isCategory,index){var charttype=this._type_name;if(this._axes.length>0){nexacro._ChartGraphicsLibArray.remove(this._axes,axis);}var location=axis._location;if(location=="left"||location=="right"){if(this._yaxes.length>0){nexacro._ChartGraphicsLibArray.remove(this._yaxes,axis);}}else if(location=="bottom"||location=="top"){if(this._xaxes.length>0){nexacro._ChartGraphicsLibArray.remove(this._xaxes,axis);}}if(isCategory){this.categoryaxis=null;this._deleteContentsProp("categoryaxis");}else{if(this.valueaxes.length>0){this._deleteContentsProp("valueaxes",index);nexacro._ChartGraphicsLibArray.remove(this.valueaxes,axis);}}axis._destroy(false);if(this.valueaxes.length==0){if(this.categoryaxis){this.categoryaxis.on_apply_visible(false);this.categoryaxis.on_apply_boardlinevisible(false);}if(this.hrangebar){this.hrangebar.on_apply_visible(false);}if(this.vrangebar){this.vrangebar.on_apply_visible(false);}}if(this.seriesset){var seriesset=this.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]){if(charttype=="BasicChart"){if(seriesset[i]._yaxis&&seriesset[i]._yaxis.id==axis.id){seriesset[i]._yaxis._destroy(false);seriesset[i]._yaxis=null;}}else{if(axis._direction=="x"){if(seriesset[i]._xaxis&&seriesset[i]._xaxis.id==axis.id){seriesset[i]._xaxis._destroy(false);seriesset[i]._xaxis=null;}}else{if(seriesset[i]._yaxis&&seriesset[i]._yaxis.id==axis.id){seriesset[i]._yaxis._destroy(false);seriesset[i]._yaxis=null;}}this._changedData=true;}}}}};}if(!nexacro.ChartAxisControl){nexacro.ChartAxisControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._ticks=[];this._categories={};this._create();};var _pChartAxisControl=nexacro.ChartAxisControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartAxisControl);_pChartAxisControl._type_name="ChartAxisControl";_pChartAxisControl.autotickscale=undefined;_pChartAxisControl.tickstartgap=undefined;_pChartAxisControl.ticksendgap=undefined;_pChartAxisControl.axislineopacity=1;_pChartAxisControl.axislinestyle="";_pChartAxisControl.boardlineopacity=1;_pChartAxisControl.boardlinestyle="";_pChartAxisControl.boardlinevisible=false;_pChartAxisControl.gap=undefined;_pChartAxisControl.labelgap=undefined;_pChartAxisControl.labelmask="";_pChartAxisControl.labelrotate="";_pChartAxisControl.labeltextcolor="";_pChartAxisControl.labeltextfont="";_pChartAxisControl.labeltextwidth=undefined;_pChartAxisControl.labeltype="normal";_pChartAxisControl.locale="";_pChartAxisControl.opposite=false;_pChartAxisControl.tickinterval=undefined;_pChartAxisControl.ticklineopacity=1;_pChartAxisControl.ticklinestyle="";_pChartAxisControl.tickmax=undefined;_pChartAxisControl.tickmin=undefined;_pChartAxisControl.ticks=undefined;_pChartAxisControl.ticksize=undefined;_pChartAxisControl.titlegap=undefined;_pChartAxisControl.titletext="";_pChartAxisControl.titletextalign="middle";_pChartAxisControl.titletextcolor="";_pChartAxisControl.titletextfont="";_pChartAxisControl.titlerotate=undefined;_pChartAxisControl.visible=true;_pChartAxisControl.datetickunit="";_pChartAxisControl.axistype="normal";_pChartAxisControl._datetickunit=null;_pChartAxisControl._tickmax=null;_pChartAxisControl._tickmin=null;_pChartAxisControl._tickintervalcategory=0;_pChartAxisControl._group=null;_pChartAxisControl._boardLineGroup=null;_pChartAxisControl._axisRect=null;_pChartAxisControl._tickGroup=null;_pChartAxisControl._labelGroup=null;_pChartAxisControl._type="valueAxis";_pChartAxisControl._used=false;_pChartAxisControl._location="";_pChartAxisControl._direction="";_pChartAxisControl._datamin=Number.POSITIVE_INFINITY;_pChartAxisControl._datamax=Number.NEGATIVE_INFINITY;_pChartAxisControl._min=null;_pChartAxisControl._max=null;_pChartAxisControl._delta=null;_pChartAxisControl._tickinterval="";_pChartAxisControl._labelgap=0;_pChartAxisControl._labelWidth=0;_pChartAxisControl._labelHeight=0;_pChartAxisControl._labeltextfont=null;_pChartAxisControl._labeltextcolor=null;_pChartAxisControl._title=null;_pChartAxisControl._titleHeight=0;_pChartAxisControl._titleWidth=0;_pChartAxisControl._tickendspace=0;_pChartAxisControl._titletextfont=null;_pChartAxisControl._titletextcolor=null;_pChartAxisControl._titlerotate= -90;_pChartAxisControl._boardlinestyle="";_pChartAxisControl._axislinestyle="";_pChartAxisControl._axisLine;_pChartAxisControl._axislineopacity=null;_pChartAxisControl._ticklinestyle="";_pChartAxisControl._ticklineopacity=null;_pChartAxisControl._scale;_pChartAxisControl._changedTicks=false;_pChartAxisControl._changedTickStyle=false;_pChartAxisControl._changedBoardLineStyle=false;_pChartAxisControl._changedTickLabelStyle=false;_pChartAxisControl._changedTickLabelRotate=false;_pChartAxisControl._rearrange=false;_pChartAxisControl._rearrangeTitle=true;_pChartAxisControl._tickLabelTextAlign=null;_pChartAxisControl._tickLabelVerticalAlign=null;_pChartAxisControl._scrollMin=null;_pChartAxisControl._scrollMax=null;_pChartAxisControl._isTimeAxis=false;_pChartAxisControl._tickstartgap=null;_pChartAxisControl._tickendgap=null;_pChartAxisControl._timeUnitSize={"second":1000,"minute":60*1000,"hour":60*60*1000,"day":24*60*60*1000,"month":30*24*60*60*1000,"year":365.2425*24*60*60*1000};_pChartAxisControl._specMonths=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];_pChartAxisControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!==val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartAxisControl.on_apply_visible=function(visible){if(this._group){this._group.set_visible(visible);this.parent._rearrange=true;}};_pChartAxisControl.set_axistype=function(val){var axistype_enum=["default","datetime"];if(axistype_enum.indexOf(val)== -1){return;}if(this.axistype!=val){this.axistype=val;this.on_apply_axistype();}this.parent._draw();};_pChartAxisControl.on_apply_axistype=function(){if(this.axistype=="datetime"){if(this.parent._isTimeData){this._isTimeAxis=true;this.on_apply_tickmax();this.on_apply_tickmin();this.on_apply_datetickunit();}}this._changedData=true;};_pChartAxisControl.set_locale=function(val){if(val!=this.locale){this._changeContentsProperty("locale",val,this.locale);this.locale=val;this._locale=val;this.on_apply_locale();}this.parent._draw();};_pChartAxisControl.on_apply_locale=function(){this.parent._changedData=true;};_pChartAxisControl.set_opposite=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.opposite!=val){this._changeContentsProperty("opposite",val,this.opposite);this.opposite=val;this.on_apply_opposite(val);}this.parent._draw();};_pChartAxisControl.on_apply_opposite=function(opposite){if(this._is_initprop){return;}if(opposite){opposite=nexacro._toBoolean(opposite);}var rotateaxis=this.parent.rotateaxis,charttype=this.parent._type_name,type=this._type;if(charttype=="BasicChart"||charttype=="FloatChart"){if(rotateaxis){if(opposite){if(type=="categoryAxis"){this._location="right";}else{this._location="top";}}else{if(type=="categoryAxis"){this._location="left";}else{this._location="bottom";}}}else{if(opposite){if(type=="categoryAxis"){this._location="top";}else{this._location="right";}}else{if(type=="categoryAxis"){this._location="bottom";}else{this._location="left";}}}}else{if(opposite){if(this._direction){if(this._direction=="x"){this._location="top";}else{this._location="right";}}}else{if(this._direction){if(this._direction=="x"){this._location="bottom";}else{this._location="left";}}}}var direction;if(this._location=="left"||this._location=="right"){direction="y";}else{direction="x";}this._direction=direction;this.parent._rearrange=true;this.parent._changedData=true;this._getTickLabelAlign(this.labelrotate);};_pChartAxisControl.set_datetickunit=function(val){val=nexacro._toString(val);if(this.datetickunit!=val){this._changeContentsProperty("datetickunit",val,this.datetickunit);this.datetickunit=val;this.on_apply_datetickunit();}this.parent._draw();};_pChartAxisControl.on_apply_datetickunit=function(){if(this._type=="categoryAxis"){var istimeaxis=this._isTimeAxis;if(istimeaxis){this._datetickunit=this.datetickunit;}}else{this._datetickunit=this.datetickunit;}this._changedTicks=true;this._rearrange=true;this.parent._changedData=true;};_pChartAxisControl.set_tickinterval=function(val){if(val!==undefined){if(isNaN(val)){return;}}if(val!==""&&val!=null){val=parseFloat(val);if(this.tickinterval!==val){this._changeContentsProperty("tickinterval",val,this.tickinterval);this.tickinterval=val;if(this._type=="categoryAxis"){this._tickintervalcategory=val;}this.on_apply_tickinterval();}}else{if(this.tickinterval){this.tickinterval=undefined;if(this._type=="categoryAxis"){this._tickintervalcategory=0;}this.on_apply_tickinterval();}}this.parent._draw();};_pChartAxisControl.on_apply_tickinterval=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_ticks=function(val){if(this._type=="categoryAxis"){return;}if(val!==undefined){if(isNaN(val)||val<0){return;}}if(val!==""&&val!=null){val=parseInt(val);if(this.ticks!==val){this._changeContentsProperty("ticks",val,this.ticks);this.ticks=val;this.on_apply_ticks();}}else{if(this.ticks){this.ticks=undefined;this.on_apply_ticks();}}this.parent._draw();};_pChartAxisControl.on_apply_ticks=function(){this._changedTicks=true;this._rearrange=true;};_pChartAxisControl.set_autotickscale=function(val){if(this._type=="categoryAxis"){return;}if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}else{this.autotickscale=undefined;this.on_apply_autotickscale();}if(this.autotickscale!==val){this._changeContentsProperty("autotickscale",val,this.autotickscale);this.autotickscale=val;this.on_apply_autotickscale();}this.parent._draw();};_pChartAxisControl.on_apply_autotickscale=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_tickstartgap=function(val){if(this._type=="valueAxis"){return;}var isNegativeValue=false;if(val!==undefined){if(typeof val=="string"){if(val.indexOf("-")>=0){isNegativeValue=true;}}else{if(val<0){isNegativeValue=true;}}}if(isNegativeValue){return;}if(this.tickstartgap!==val){this._changeContentsProperty("tickstartgap",val,this.tickstartgap);this.tickstartgap=val;this.on_apply_tickstartgap();}this.parent._draw();};_pChartAxisControl.on_apply_tickstartgap=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_tickendgap=function(val){if(this._type=="valueAxis"){return;}if(val!==undefined){var isNegativeValue=false;if(typeof val=="string"){if(val.indexOf("-")>=0){isNegativeValue=true;}}else{if(val<0){isNegativeValue=true;}}if(isNegativeValue){return;}}if(this.tickendgap!==val){this._changeContentsProperty("tickendgap",val,this.tickendgap);this.tickendgap=val;this.on_apply_tickendgap();}this.parent._draw();};_pChartAxisControl.on_apply_tickendgap=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.isDatetimeaxis=function(){if(this._type=="categoryAxis"&&this.axistype=="datetime"){return true;}return false;};_pChartAxisControl.set_tickmin=function(val){if(val!==undefined){if(!this.isDatetimeaxis()&&isNaN(val)){return;}}if(val!==""&&val!=null){if(this.tickmin!==val){this._changeContentsProperty("tickmin",val,this.tickmin);this.tickmin=val;this.on_apply_tickmin();}}else{if(this.tickmin){this.tickmin=undefined;this.on_apply_tickmin();}}this.parent._draw();};_pChartAxisControl.on_apply_tickmin=function(){if(this.tickmin==undefined||this.tickmin==null){this._tickmin=null;}else{var new_obj=null;if(this.isDatetimeaxis()){var val=this.tickmin;if(val instanceof nexacro.Date){val=val.getTime();}else if(val instanceof Date){val=val.getTime();}else{if(typeof val=="string"){new_obj=new nexacro.Date(val);val=new_obj.getTime();}else if(typeof val=="number"&&val>0){val=new Date(val);new_obj=new nexacro.Date();new_obj.setTime(val.getTime());val=new_obj.getTime();}}if(val!==undefined){if(isNaN(val)){return;}}if(val!==""&&val!=null){this._tickmin=val;}}else{this._tickmin=parseFloat(this.tickmin);}}this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_tickmax=function(val){if(val!==undefined){if(!this.isDatetimeaxis()&&isNaN(val)){return;}}if(val!==""&&val!=null){if(this.tickmax!==val){this._changeContentsProperty("tickmax",val,this.tickmax);this.tickmax=val;this.on_apply_tickmax();}}else{if(this.tickmax){this.tickmax=undefined;this.on_apply_tickmax();}}this.parent._draw();};_pChartAxisControl.on_apply_tickmax=function(){if(this.tickmax==undefined||this.tickmax==null){this._tickmax=null;}else{if(this.isDatetimeaxis()){var val=this.tickmax;var new_obj=null;if(val instanceof nexacro.Date){val=val.getTime();}else if(val instanceof Date){val=val.getTime();}else{if(typeof val=="string"){new_obj=new nexacro.Date(val);val=new_obj.getTime();}else if(typeof val=="number"&&val>0){val=new Date(val);new_obj=new nexacro.Date();new_obj.setTime(val.getTime());val=new_obj.getTime();}}if(val!==undefined){if(isNaN(val)){return;}}if(val!==""&&val!=null){this._tickmax=val;}}else{this._tickmax=parseFloat(this.tickmax);}}this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_gap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.gap!=val){this._changeContentsProperty("gap",val,this.gap);this.gap=val;this.on_apply_gap();}this.parent._draw();};_pChartAxisControl.on_apply_gap=function(){this.parent._rearrange=true;};_pChartAxisControl.set_boardlinevisible=function(val){if(val===undefined||val===null){val=false;}val=nexacro._toBoolean(val);if(this.boardlinevisible!==val){this._changeContentsProperty("boardlinevisible",val,this.boardlinevisible);this.boardlinevisible=val;this.on_apply_boardlinevisible(val);}this.parent._draw();};_pChartAxisControl.on_apply_boardlinevisible=function(boardlinevisible){if(this._is_initprop){return;}this._boardLineGroup.set_visible(boardlinevisible);};_pChartAxisControl.set_boardlinestyle=function(val){this.boardlinestyle=val;if(val){if(this._boardlinestyle==null||!this._boardlinestyle._single||this._boardlinestyle.value!=val){var oldValue;if(this._boardlinestyle){oldValue=this._boardlinestyle.value;}this._changeContentsProperty("boardlinestyle",val,oldValue);var boardlinestyle=nexacro.BorderObject(val);this._boardlinestyle=boardlinestyle;this.on_apply_boardlinestyle();}}else{if(this._boardlinestyle){this._boardlinestyle=null;this.on_apply_boardlinestyle();}}this.parent._draw();};_pChartAxisControl.on_apply_boardlinestyle=function(){this._changedBoardLineStyle=true;};_pChartAxisControl.set_boardlineopacity=function(val){this.boardlineopacity=val;if(0===val||val){if(this._boardlineopacity==null||this._boardlineopacity.value!=val){var oldValue;if(this._boardlineopacity){oldValue=this._boardlineopacity.value;}this._changeContentsProperty("boardlineopacity",val,oldValue);var boardlineopacity=nexacro.OpacityObject(val);this._boardlineopacity=boardlineopacity;this.on_apply_boardlineopacity();}}else{if(this._boardlineopacity){this._boardlineopacity=null;this.on_apply_boardlineopacity();}}this.parent._draw();};_pChartAxisControl.on_apply_boardlineopacity=function(){this._changedBoardLineStyle=true;};_pChartAxisControl.set_axislinestyle=function(val){this.axislinestyle=val;var oldwidth=0;var newwidth=0;if(val){if(this._axislinestyle==null||!this._axislinestyle._single||this._axislinestyle.value!=val){var oldValue;if(this._axislinestyle){oldValue=this._axislinestyle.value;oldwidth=this._axislinestyle?this._axislinestyle._getBorderLeftWidth():1;}this._changeContentsProperty("axislinestyle",val,oldValue);var axislinestyle=nexacro.BorderObject(val);this._axislinestyle=axislinestyle;newwidth=this._axislinestyle?this._axislinestyle._getBorderLeftWidth():1;this.on_apply_axislinestyle(axislinestyle);}}else{if(this._axislinestyle){this._axislinestyle=null;this.on_apply_axislinestyle(null);}}if(newwidth!=oldwidth){this.parent._rearrange=true;}this.parent._draw();};_pChartAxisControl.on_apply_axislinestyle=function(axislinestyle){if(this._is_initprop){return;}this._createAxisLine();if(this._axisLine){this._axisLine.set_strokepen(axislinestyle?axislinestyle.value||axislinestyle:"1px solid #717a8380");}};_pChartAxisControl.set_axislineopacity=function(val){this.axislineopacity=val;if(0===val||val){if(this._axislineopacity==null||this._axislineopacity.value!=val){var oldValue;if(this._axislineopacity){oldValue=this._axislineopacity.value;}this._changeContentsProperty("axislineopacity",val,oldValue);var axislineopacity=nexacro.OpacityObject(val);this._axislineopacity=axislineopacity;this.on_apply_axislineopacity(axislineopacity);}}else{if(this._axislineopacity){this._axislineopacity=null;this.on_apply_axislineopacity(null);}}this.parent._draw();};_pChartAxisControl.on_apply_axislineopacity=function(axislineopacity){this._createAxisLine();if(this._axisLine){this._axisLine.set_opacity(axislineopacity?axislineopacity._sysvalue:"");}};_pChartAxisControl.set_ticksize=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.ticksize!==val){this._changeContentsProperty("ticksize",val,this.ticksize);this.ticksize=val;this.on_apply_ticksize();}this.parent._draw();};_pChartAxisControl.on_apply_ticksize=function(){this.parent._rearrange=true;};_pChartAxisControl.set_ticklinestyle=function(val){this.ticklinestyle=val;if(val){if(this._ticklinestyle==null||!this._ticklinestyle._single||this._ticklinestyle.value!=val){var oldValue;if(this._ticklinestyle){oldValue=this._ticklinestyle.value;}this._changeContentsProperty("ticklinestyle",val,oldValue);var ticklinestyle=nexacro.BorderObject(val);this._ticklinestyle=ticklinestyle;this.on_apply_ticklinestyle();}}else{if(this._ticklinestyle){this._ticklinestyle=null;this.on_apply_ticklinestyle();}}this.parent._draw();};_pChartAxisControl.on_apply_ticklinestyle=function(){if(this._is_initprop){return;}this._changedTickStyle=true;};_pChartAxisControl.set_ticklineopacity=function(val){this.ticklineopacity=val;if(0===val||val){if(this._ticklineopacity==null||this._ticklineopacity.value!=val){var oldValue;if(this._ticklineopacity){oldValue=this._ticklineopacity.value;}this._changeContentsProperty("ticklineopacity",val,oldValue);var ticklineopacity=nexacro.OpacityObject(val);this._ticklineopacity=ticklineopacity;this.on_apply_ticklineopacity();}}else{if(this._ticklineopacity){this._ticklineopacity=null;this.on_apply_ticklineopacity();}}this.parent._draw();};_pChartAxisControl.on_apply_ticklineopacity=function(){this._changedTickStyle=true;};_pChartAxisControl.set_labeltype=function(v){if(this.labeltype!=v){this._changeContentsProperty("labeltype",v,this.labeltype);this.labeltype=v;this.on_apply_labeltype();}this.parent._draw();};_pChartAxisControl.on_apply_labeltype=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_labelmask=function(val){var labelmask=nexacro._toString(val);if(labelmask!=this.labelmask){this._changeContentsProperty("labelmask",val,this.labelmask);this.labelmask=labelmask;this.on_apply_labelmask();}this.parent._draw();};_pChartAxisControl.on_apply_labelmask=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_labeltextfont=function(val){this.labeltextfont=val;if(val){if(this._labeltextfont==null||this._labeltextfont.value!=val){var oldValue;if(this._labeltextfont){oldValue=this._labeltextfont.value;}this._changeContentsProperty("labeltextfont",val,oldValue);var labeltextfont=nexacro.FontObject(val);this._labeltextfont=labeltextfont;this.on_apply_labeltextfont();}}else{if(this._labeltextfont){this._labeltextfont=null;this.on_apply_labeltextfont();}}this.parent._draw();};_pChartAxisControl.on_apply_labeltextfont=function(){if(this._is_initprop){return;}this._changedTicks=true;if(this.parent){this.parent._rearrange=true;}};_pChartAxisControl.set_labeltextcolor=function(val){this.labeltextcolor=val;if(val){if(this._labeltextcolor==null||this._labeltextcolor.value!=val){var oldValue;if(this._labeltextcolor){oldValue=this._labeltextcolor.value;}this._changeContentsProperty("labeltextcolor",val,oldValue);var labeltextcolor=nexacro.ColorObject(val);this._labeltextcolor=labeltextcolor;this.on_apply_labeltextcolor();}}else{if(this._labeltextcolor){this._labeltextcolor=null;this.on_apply_labeltextcolor();}}this.parent._draw();};_pChartAxisControl.on_apply_labeltextcolor=function(){if(this._is_initprop){return;}this._changedTickLabelStyle=true;};_pChartAxisControl.set_labelrotate=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}if(val>90||val< -90){val=0;}}if(this.labelrotate!=val){this._changeContentsProperty("labelrotate ",val,this.labelrotate);this.labelrotate=val;this.on_apply_labelrotate(val);}this.parent._draw();};_pChartAxisControl.on_apply_labelrotate=function(val){this._changedTickLabelRotate=true;this._getTickLabelAlign(val);this.parent._rearrange=true;this.parent._changedData=true;};_pChartAxisControl.set_labeltextwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.labeltextwidth!==val){this._changeContentsProperty("labeltextwidth",val,this.labeltextwidth);this.labeltextwidth=val;this.on_apply_labeltextwidth();}this.parent._draw();};_pChartAxisControl.on_apply_labeltextwidth=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_labelgap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.labelgap!=val){this._changeContentsProperty("labelgap",val,this.labelgap);this.labelgap=val;this._labelgap=val;this.on_apply_labelgap();}this.parent._draw();};_pChartAxisControl.on_apply_labelgap=function(){this._changedTicks=true;this.parent._rearrange=true;};_pChartAxisControl.set_titletext=function(val){if(this.titletext!=val){this._changeContentsProperty("titletext",val,this.titletext);this.titletext=val;this.on_apply_titletext(val);}this.parent._draw();};_pChartAxisControl.on_apply_titletext=function(titletext){if(this._is_initprop){return;}if(titletext){this._createTitle();}else{this._titleHeight=0;this._titleWidth=0;}if(titletext){this._title.set_text(titletext);this.parent._rearrange=true;}};_pChartAxisControl.set_titletextfont=function(val){this.titletextfont=val;if(val){if(this._titletextfont==null||this._titletextfont.value!=val){var oldValue;if(this._titletextfont){oldValue=this._titletextfont.value;}this._changeContentsProperty("titletextfont",val,oldValue);var titletextfont=nexacro.FontObject(val);this._titletextfont=titletextfont;this.on_apply_titletextfont(titletextfont);}}else{if(this._titletextfont){this._titletextfont=null;this.on_apply_titletextfont(null);}}this.parent._draw();};_pChartAxisControl.on_apply_titletextfont=function(titletextfont){if(this._is_initprop){return;}this._createTitle();this._title.set_font(titletextfont?titletextfont.value||titletextfont:"12pt Verdana");this.parent._rearrange=true;};_pChartAxisControl.set_titletextcolor=function(val){this.titletextcolor=val;if(val){if(this._titletextcolor==null||this._titletextcolor.value!=val){var oldValue;if(this._titletextcolor){oldValue=this._titletextcolor.value;}this._changeContentsProperty("titletextcolor",val,oldValue);var titletextcolor=nexacro.ColorObject(val);this._titletextcolor=titletextcolor;this.on_apply_titletextcolor(titletextcolor);}}else{if(this._titletextcolor){this._titletextcolor=null;this.on_apply_titletextcolor(null);}}this.parent._draw();};_pChartAxisControl.on_apply_titletextcolor=function(titletextcolor){if(this._is_initprop){return;}this._createTitle();this._title.set_color(titletextcolor?titletextcolor.value||titletextcolor:"#000000");};_pChartAxisControl.set_titletextalign=function(val){var titletextalign_enum=["low","middle","high"];if(titletextalign_enum.indexOf(val)== -1){return;}if(this.titletextalign!=val){this._changeContentsProperty("titletextalign",val,this.titletextalign);this.titletextalign=val;this.on_apply_titletextalign();}this.parent._draw();};_pChartAxisControl.on_apply_titletextalign=function(){this._rearrangeTitle=true;};_pChartAxisControl.set_titlerotate=function(val){if(val!==undefined){if(isNaN(val)){return;}if(val!==""&&val!=null){val=parseInt(val);}}if(this.titlerotate!==val){this._changeContentsProperty("titlerotate",val,this.titlerotate);if(val!==undefined){if(val===""&&val!=0){val= -90;}if(val== -90||val==0||val==90){this.titlerotate=val;this.on_apply_titlerotate(this.titlerotate);}}else{this.titlerotate=val;this.on_apply_titlerotate(this.titlerotate);}}this.parent._draw();};_pChartAxisControl.on_apply_titlerotate=function(titlerotate){if(this._direction=="y"){if(titlerotate== -90||titlerotate==0||titlerotate==90){this._titlerotate=titlerotate;}}this._rearrangeTitle=true;this.parent._rearrange=true;};_pChartAxisControl.set_titlegap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.titlegap!==val){this._changeContentsProperty("titlegap",val,this.titlegap);this.titlegap=val;this.on_apply_titlegap();}this.parent._draw();};_pChartAxisControl.on_apply_titlegap=function(){this.parent._rearrange=true;};_pChartAxisControl.destroy=function(){this._destroy(true);};_pChartAxisControl._destroy=function(parent_clear){if(parent_clear){var axisId=this.id;if(this.parent){if(this.parent._axes){nexacro._ChartGraphicsLibArray.remove(this.parent._axes,this);}var axisType=this._type;if(axisType=="valueAxis"){if(this.parent.valueaxes){var index= -1;nexacro._ChartGraphicsLibArray.forEach(this.parent.valueaxes,function(axis,i){if(axis instanceof nexacro.ChartAxisControl&&axis.id==axisId){axis.parent._deleteContentsProp("valueaxes",i);index=i;}});nexacro._ChartGraphicsLibArray.removeAt(this.parent.valueaxes,index);}}else{this.parent.categoryaxis=null;this.parent._deleteContentsProp("categoryaxis");}var location=this._location;if(location=="left"||location=="right"){if(this.parent._yaxes){nexacro._ChartGraphicsLibArray.remove(this.parent._yaxes,this);}}else if(location=="bottom"||location=="top"){if(this.parent._xaxes){nexacro._ChartGraphicsLibArray.remove(this.parent._xaxes,this);}}}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];if(tick){var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();if(tick.labelElement){delete tick.labelElement;tick.labelElement=null;}}var tickline=tick.lineElement;if(tickline){tickline.destroy();if(tick.lineElement){delete tick.lineElement;tick.lineElement=null;}}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();if(tick.boardlineElement){delete tick.boardlineElement;tick.boardlineElement=null;}}this._ticks[i]=null;}}}this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartAxisControl._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id(this.id+"_ChartAxisGroup");this._graphicsControl.addChild(this._group);this._tickGroup=new nexacro.ChartGraphicsGroup();this._tickGroup.set_id("ChartAxisTickGroup");this._group.addChild(this._tickGroup);this._labelGroup=new nexacro.ChartGraphicsGroup();this._labelGroup.set_id("ChartAxisLabelGroup");this._group.addChild(this._labelGroup);this._axisRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._axisRect.set_id("ChartAxisRect");this._group.addChild(this._axisRect);this._axisRect._axis=this;this._boardLineGroup=new nexacro.ChartGraphicsGroup();this._boardLineGroup.set_id(this.id+"_ChartAxisBoardLineGroup");if(this.parent.board){this._graphicsControl.insertChild(this._boardLineGroup,this.parent._seriesGroup);}};_pChartAxisControl._initData=function(){this._datamin=Number.POSITIVE_INFINITY;this._datamax=Number.NEGATIVE_INFINITY;this._used=false;};_pChartAxisControl._resetData=function(){if(this._datamin==Number.POSITIVE_INFINITY){this._datamin=null;}if(this._datamax==Number.NEGATIVE_INFINITY){this._datamax=null;}};_pChartAxisControl._updateMinMax=function(tickmin,tickmax){if(this._datamin==null){this._datamin=Number.POSITIVE_INFINITY;}if(this._datamax==null){this._datamax=Number.NEGATIVE_INFINITY;}if(tickmin<this._datamin&&tickmin!= -Number.MAX_VALUE){this._datamin=tickmin;}if(tickmax>this._datamax&&tickmax!=Number.MAX_VALUE){this._datamax=tickmax;}};_pChartAxisControl._categoriesTickGenerator=function(axis,istotal){var res=[];var min,max;if(istotal){min=axis._datamin;max=axis._datamax;}else{min=axis._min;max=axis._max;}for(var label in axis._categories){var v=axis._categories[label];if(v>=min&&v<=max){res.push([v,label]);}}res.sort(function(a,b){return a[0]-b[0];});return res;};_pChartAxisControl._setCategoriesData=function(datapoints){var points=datapoints.points,ps=datapoints.pointsize,format=datapoints.format,formatColumn=this._direction,categories,index=this._getNextIndex(categories);categories=this._categories={};if(points.length==0){return;}for(var i=0;i<points.length;i+=ps){for(var m=0;m<ps;m++ ){var val=points[i+m];if(val==null||!format[m][formatColumn]){continue;}if(!(val in categories)){if(this._isTimeAxis){categories[index]=val;points[i+m]=categories[index];index++ ;}else{categories[val]=index;points[i+m]=categories[val];index++ ;}}else{if(this._isTimeAxis){points[i+m]=val;}else{points[i+m]=categories[val];}}}}};_pChartAxisControl._getNextIndex=function(categories){var index= -1;for(var v in categories){if(categories[v]>index){index=categories[v];}}return index+1;};_pChartAxisControl._setRange=function(){var tickmin,tickmax,delta;tickmin= +(this._tickmin!=null?this._tickmin:this._datamin);tickmax= +(this._tickmax!=null?this._tickmax:this._datamax);if(this._scrollMin||this._scrollMax){tickmin=this._scrollMin;tickmax=this._scrollMax;this._scrollMin=null;this._scrollMax=null;}delta=tickmax-tickmin;if(delta==0.0){var widen=tickmax==0?1:0.01;if(this._tickmin==null){tickmin-=widen;}if(this._tickmax==null||this._tickmin!=null){tickmax+=widen;}}else{var tickscale=this.autotickscale?this.autotickscale*0.01:0;if(this._tickmin==null){tickmin-=delta*tickscale;if(tickmin<0&&this._datamin!=null&&this._datamin>=0){tickmin=0;}}if(this._tickmax==null){tickmax+=delta*tickscale;if(tickmax>0&&this._datamax!=null&&this._datamax<=0){tickmax=0;}}}this._min=tickmin;this._max=tickmax;};_pChartAxisControl._arrange=function(left,top,width,height){if(this.parent._rearrange){this._arrangeTickGroup(width,height);this._boardLineGroup.setTransform("translate("+left+","+top+")");this._arrangeLabelGroup();this._arrangeTitle();}else if(this._rearrange){this._arrangeTickGroup(width,height);this._boardLineGroup.setTransform("translate("+left+","+top+")");this._arrangeLabelGroup();}else if(this._rearrangeTitle){this._arrangeTitle();}this._rearrangeTitle=false;this._rearrange=false;};_pChartAxisControl._preGenerateTimeTick=function(){var min,max,ticks=[],spec,d,v,width=this.parent._getClientWidth(),height=this.parent._getClientHeight();if(width<=0||height<=0){this._resizeClient=true;return;}else{if(this._resizeClient){this._resizeClient=false;}}for(var label in this._categories){if(min==undefined){min=this._categories[label];}if(max==undefined){max=this._categories[label];}v=this._categories[label];if(v>max){max=v;}if(v<min){min=v;}}if(this._tickmin){min=this._tickmin;}if(this._tickmax){max=this._tickmax;}var tickscount=0;tickscount=0.3*Math.sqrt(this._direction=="x"?width:height);var delta=(max-min)/tickscount,dec= -Math.floor(Math.log(delta)/Math.LN10),magn=Math.pow(10, -dec),norm=delta/magn,tickinterval;if(norm<1.5){tickinterval=1;}else if(norm<3){tickinterval=2;if(norm>2.25){tickinterval=2.5;}}else if(norm<7.5){tickinterval=5;}else{tickinterval=10;}tickinterval*=magn;this._delta=delta;var tickintervalchk=this.tickinterval;if(this._type=="categoryAxis"){var istimeaxis=this._isTimeAxis;if(!istimeaxis){tickintervalchk=null;}}this._tickinterval=tickintervalchk||tickinterval;d=new Date(min);spec=this._specMonths;for(var i=0;i<spec.length-1; ++i){if(this._delta<(spec[i][0]*this._timeUnitSize[spec[i][1]]+spec[i+1][0]*this._timeUnitSize[spec[i+1][1]])/2){break;}}var size=spec[i][0];var unit=spec[i][1];if(unit=="year"||this._datetickunit=="year"){magn=Math.pow(10,Math.floor(Math.log(this._delta/this._timeUnitSize.year)/Math.LN10));norm=(this._delta/this._timeUnitSize.year)/magn;if(norm<1.5){size=1;}else if(norm<3){size=2;}else if(norm<7.5){size=5;}else{size=10;}size*=magn;if(size<1){size=1;}}var timeticksize=[];var tickunit;if(this.tickinterval&&this._datetickunit){tickunit=this._datetickunit;if(this._datetickunit=="quarter"){tickunit="month";}timeticksize=[this.tickinterval,tickunit];}else if(this._datetickunit){tickunit=this._datetickunit;if(this._datetickunit=="quarter"){tickunit="month";size=3;}size=this._checklimitdatetickunitsize(unit,tickunit,size);timeticksize=[size,tickunit];}else{timeticksize=[size,unit];}var tickSize=timeticksize[0];unit=timeticksize[1];var step=tickSize*this._timeUnitSize[unit];if(unit=="second"){d.setSeconds(this._floorInBase(d.getSeconds(),tickSize));}else if(unit=="minute"){d.setMinutes(this._floorInBase(d.getMinutes(),tickSize));}else if(unit=="hour"){d.setHours(this._floorInBase(d.getHours(),tickSize));}else if(unit=="month"){d.setMonth(this._floorInBase(d.getMonth(),tickSize));}else if(unit=="year"){d.setFullYear(this._floorInBase(d.getFullYear(),tickSize));}d.setMilliseconds(0);if(step>=this._timeUnitSize.minute){d.setSeconds(0);}if(step>=this._timeUnitSize.hour){d.setMinutes(0);}if(step>=this._timeUnitSize.day){d.setHours(0);}if(step>=this._timeUnitSize.day*4){d.setDate(1);}if(step>=this._timeUnitSize.month*2){d.setMonth(this._floorInBase(d.getMonth(),3));}if(step>=this._timeUnitSize.quarter*2){d.setMonth(this._floorInBase(d.getMonth(),6));}if(step>=this._timeUnitSize.year){d.setMonth(0);}var carry=0;v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if(unit=="month"){if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+1);var end=d.getTime();d.setTime(v+carry*this._timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0);}else{d.setMonth(d.getMonth()+tickSize);}}else if(unit=="year"){d.setFullYear(d.getFullYear()+tickSize);}else{d.setTime(v+step);}}while(v<max&&v!=prev)this._delta=(max-min)/ticks.length;return ticks;};_pChartAxisControl._setupTickGeneration=function(width,height){var ticks;if(typeof this.ticks=="number"&&this.ticks>0){ticks=this.ticks;}else{if(this._isTimeAxis&&this.ticks&&this.ticks.length>0){return;}else{ticks=0.3*Math.sqrt(this._direction=="x"?width:height);}}var delta=(this._max-this._min)/ticks,dec= -Math.floor(Math.log(delta)/Math.LN10),magn=Math.pow(10, -dec),norm=delta/magn,tickinterval;if(norm<1.5){tickinterval=1;}else if(norm<3){tickinterval=2;if(norm>2.25){tickinterval=2.5;}}else if(norm<7.5){tickinterval=5;}else{tickinterval=10;}tickinterval*=magn;this._delta=delta;var tickintervalchk=this.tickinterval;if(this._type=="categoryAxis"){var istimeaxis=this._isTimeAxis;if(!istimeaxis){tickintervalchk=null;}}this._tickinterval=tickintervalchk||tickinterval;if(!this._tickGenerator){this._tickGenerator=function(axis,istotal){var ticks=[],start=axis._floorInBase(axis._min,axis._tickinterval),i=0,v=Number.NaN,prev;var max= -1;if(istotal){max=axis._tickmax||axis._datamax;}else{max=axis._max;}if((axis._datamin==null&&axis._datamax==null)&&(axis._tickmin==null||axis._tickmax==null)){return false;}do{prev=v;v=start+i*axis._tickinterval;ticks.push(v); ++i;}while(v<max&&v!=prev)return ticks;};}};_pChartAxisControl._setTicks=function(istotal){var ticks=this.ticks,tickGen=[];if(this._type=="categoryAxis"){this.on_apply_axistype();}var istimeaxis=this._isTimeAxis;if(ticks==null||(typeof ticks=="number"&&ticks>0)){if(istimeaxis){if(this._generateTimeTick){tickGen=this._generateTimeTick(istotal);}}else{if(this._tickGenerator){tickGen=this._tickGenerator(this,istotal);}}}else if(ticks){if(nexacro._ChartGraphicsLib.isFunction(ticks)){tickGen=ticks(this,istotal);}else{tickGen=ticks;}}this._ticks=[];var v,date,labeltype=this.labeltype,labelmask=this.labelmask,locale=this.locale;var tickLength=tickGen.length;var subTick=this.smalltickcount;if(!subTick){subTick=0;}var subtickvaluegap=0;var vv=0;if(subTick>1&&tickLength>1){var v0=tickGen[0];var v1=tickGen[1];if(typeof v0=="object"){v0=tickGen[0];}if(typeof v1=="object"){v1=tickGen[1];}subtickvaluegap=parseInt((v1-v0)/subTick);}for(var i=0;i<tickLength;i++ ){var label=null;var t=tickGen[i];if(typeof t=="object"){v= +t[0];if(t.length>1){label=t[1];}}else{v= +t;label=v;}if(istimeaxis){date=new nexacro.Date();date.setTime(label);label=date;}label=nexacro._getChartDisplaytText(i,label,locale,labeltype,labelmask,this.parent,this);if(!isNaN(v)){this._ticks.push({v:v,label:label,index:i,total:tickLength,subindex:0});if(subTick>1&&i<(tickLength-1)){vv=v;for(var j=1;j<subTick;j++ ){vv+=subtickvaluegap;this._ticks.push({v:vv,label:label,index:i,total:tickLength,subindex:j});}}}}};_pChartAxisControl._generateTimeTick=function(istotal){if(istotal){}var ticks=[],spec,d,min;if(this._tickmin){min=this._min;}else{min=this._datamin;}d=new Date(min);spec=this._specMonths;for(var i=0;i<spec.length-1; ++i){if(this._delta<(spec[i][0]*this._timeUnitSize[spec[i][1]]+spec[i+1][0]*this._timeUnitSize[spec[i+1][1]])/2){break;}}var size=spec[i][0];var unit=spec[i][1];if(unit=="year"||this._datetickunit=="year"){var magn=Math.pow(10,Math.floor(Math.log(this._delta/this._timeUnitSize.year)/Math.LN10));var norm=(this._delta/this._timeUnitSize.year)/magn;if(norm<1.5){size=1;}else if(norm<3){size=2;}else if(norm<7.5){size=5;}else{size=10;}size*=magn;if(size<1){size=1;}}var timeticksize=[];var tickunit;if(this.tickinterval&&this._datetickunit){tickunit=this._datetickunit;if(this._datetickunit=="quarter"){tickunit="month";}timeticksize=[this.tickinterval,tickunit];}else if(this._datetickunit){tickunit=this._datetickunit;if(this._datetickunit=="quarter"){tickunit="month";size=3;}size=this._checklimitdatetickunitsize(unit,tickunit,size);timeticksize=[size,tickunit];}else{timeticksize=[size,unit];}var tickSize=timeticksize[0];unit=timeticksize[1];var step=tickSize*this._timeUnitSize[unit];if(unit=="second"){d.setSeconds(this._floorInBase(d.getSeconds(),tickSize));}else if(unit=="minute"){d.setMinutes(this._floorInBase(d.getMinutes(),tickSize));}else if(unit=="hour"){d.setHours(this._floorInBase(d.getHours(),tickSize));}else if(unit=="month"){d.setMonth(this._floorInBase(d.getMonth(),tickSize));}else if(unit=="year"){d.setFullYear(this._floorInBase(d.getFullYear(),tickSize));}d.setMilliseconds(0);if(step>=this._timeUnitSize.minute){d.setSeconds(0);}if(step>=this._timeUnitSize.hour){d.setMinutes(0);}if(step>=this._timeUnitSize.day){d.setHours(0);}if(step>=this._timeUnitSize.day*4){d.setDate(1);}if(step>=this._timeUnitSize.month*2){d.setMonth(this._floorInBase(d.getMonth(),3));}if(step>=this._timeUnitSize.quarter*2){d.setMonth(this._floorInBase(d.getMonth(),6));}if(step>=this._timeUnitSize.year){d.setMonth(0);}var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if(unit=="month"){if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+1);var end=d.getTime();d.setTime(v+carry*this._timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0);}else{d.setMonth(d.getMonth()+tickSize);}}else if(unit=="year"){d.setFullYear(d.getFullYear()+tickSize);}else{d.setTime(v+step);}}while(v<this._max&&v!=prev)return ticks;};_pChartAxisControl._checklimitdatetickunitsize=function(makeunit,setunit,size){var tickgap={"year":0,"month":1,"day":2,"hour":3,"minute":4,"second":5};var limitcorrection=[1,6,3,12,30,30];var newsize=size;if(tickgap[setunit]>tickgap[makeunit]){if(tickgap[setunit]-tickgap[makeunit]>=2){var val=size;for(var i=tickgap[makeunit]+1;i<=tickgap[setunit];i++ ){val=val*limitcorrection[i];}newsize=val;}}return newsize;};_pChartAxisControl._floorInBase=function(n,base){return base*Math.floor(n/base);};_pChartAxisControl._setMinMaxTicks=function(){var ticks=this._ticks,autotickscale=this.autotickscale?this.autotickscale*0.01:0;if(autotickscale&&ticks.length>0){if(this._tickmin==null){this._min=Math.min(this._min,ticks[0].v);}if(this._tickmax==null&&ticks.length>1){this._max=Math.max(this._max,ticks[ticks.length-1].v);}}};_pChartAxisControl._setTransformationHelpers=function(width,height){var s,m,tickmin=this._min,tickmax=this._max;if(this._direction=="x"){s=this._scale=width/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);}else{s=this._scale=height/Math.abs(tickmax-tickmin);s= -s;m=Math.max(tickmax,tickmin);}this.p2c=function(p){return (p-m)*s;};this.c2p=function(c){return m+c/s;};};_pChartAxisControl._createAxisLine=function(){if(!this._axisLine){this._axisLine=new nexacro.ChartGraphicsLine();this._axisLine.set_id("ChartAxisLine");this._group.addChild(this._axisLine);this._axisLine._axis=this;}};_pChartAxisControl._setPixedLabelHeight=function(clientWidth,clientHeight){var ticklinestyle=this._ticklinestyle,boardlinestyle=this._boardlinestyle,maxlabelheight=0,maxlabelwidth=0;var virtual_tickGroup=new nexacro.ChartGraphicsGroup();var virtual_boardLineGroup=new nexacro.ChartGraphicsGroup();var virtual_labelGroup=new nexacro.ChartGraphicsGroup();this._setTicks(true);virtual_tickGroup.clear();virtual_boardLineGroup.clear();virtual_labelGroup.clear();var ticks=this._ticks,tick,value,tickLine,ticklineopacity=this._ticklineopacity,boardlineopacity=this._boardlineopacity,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"12pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign,verticalAlign,labelmaxwidth=this.labeltextwidth,tickboardLine;this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._datamin||value>this._datamax){continue;}tickLine=new nexacro.ChartGraphicsLine();tickLine.set_id("ChartAxisLineTick"+i);virtual_tickGroup.addChild(tickLine);tick.lineElement=tickLine;tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);tickboardLine=new nexacro.ChartGraphicsLine();tickboardLine.set_id("ChartAxisTickBoardLine"+i);virtual_boardLineGroup.addChild(tickboardLine);tick.boardlineElement=tickboardLine;tickboardLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #717a8380");tickboardLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);tickLabel=new nexacro.ChartGraphicsText();tickLabel.set_id("ChartAxisLabel_"+i);virtual_labelGroup.addChild(tickLabel);tickLabel.set_text(tick.label);tick.labelElement=tickLabel;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");var info=virtual_labelGroup.getGlobalBoundRect(false,true);maxlabelheight=Math.max(maxlabelheight,info.height);maxlabelwidth=Math.max(maxlabelwidth,info.width);}virtual_tickGroup.clear();virtual_boardLineGroup.clear();virtual_labelGroup.clear();var returnsize=[];returnsize[0]=maxlabelwidth;returnsize[1]=maxlabelheight;return returnsize;};_pChartAxisControl._setData=function(clientWidth,clientHeight){var changedTicks=this._changedTicks,ticklinestyle=this._ticklinestyle,boardlinestyle=this._boardlinestyle,pixedlabelheight=0,pixedlabelwidth=0;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();var returnsize=this._setPixedLabelHeight(clientWidth,clientHeight);pixedlabelheight=returnsize[1];pixedlabelwidth=returnsize[0];this._setTicks();this._tickGroup.clear();this._boardLineGroup.clear();this._labelGroup.clear();}var ticks=this._ticks,tick,value,tickLine,ticklineopacity=this._ticklineopacity,boardlineopacity=this._boardlineopacity,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"12pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth,tickboardLine;var bTarget=true;if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedBoardLineStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._min||value>this._max){continue;}if(changedTicks){tickLine=new nexacro.ChartGraphicsLine();tickLine.set_id("ChartAxisLineTick"+i);this._tickGroup.addChild(tickLine);tick.lineElement=tickLine;tickLine._axis=this;tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);tickboardLine=new nexacro.ChartGraphicsLine();tickboardLine.set_id("ChartAxisTickBoardLine"+i);this._boardLineGroup.addChild(tickboardLine);tick.boardlineElement=tickboardLine;tickboardLine._axis=this;tickboardLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #717a8380");tickboardLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}else{if(this._changedTickStyle){tickLine=tick.lineElement;if(tickLine){tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);}}if(this._changedBoardLineStyle){tickboardLine=tick.boardlineElement;if(tickboardLine){tickboardLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #717a8380");tickboardLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}}}bTarget=true;if(this._tickintervalcategory>0){bTarget=((i%this._tickintervalcategory)==0?true:false);}if(!bTarget){continue;}if(changedTicks||this._changedTickLabelRotate){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel"+i);tickLabel.set_text(tick.label);this._labelGroup.addChild(tickLabel);tick.labelElement=tickLabel;tickLabel._axis=this;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");}else{if(this._changedTickLabelStyle){tickLabel=tick.labelElement;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}}}}}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);if(changedTicks||this._changedTickLabelRotate){this._labelHeight=pixedlabelheight;this._labelWidth=pixedlabelwidth;}else{this._labelHeight=info.height;this._labelWidth=info.width;}if(this._direction=="x"){this._tickendspace=this._labelWidth/2;if(this.parent._chartxtickspace<this._tickendspace){this.parent._chartxtickspace=this._tickendspace;}}else{this._tickendspace=this._labelHeight/2;if(this.parent._chartytickspace<this._tickendspace){this.parent._chartytickspace=this._tickendspace;}}this._tickendspace=0;};_pChartAxisControl._getTickLabelAlign=function(labelrotate){var location=this._location,textAlign,verticalAlign;labelrotate=labelrotate||0;if(this._direction=="x"){if(location=="bottom"){verticalAlign="top";if(labelrotate>0){textAlign="left";if(labelrotate==90){verticalAlign="middle";}}else if(labelrotate<0){textAlign="right";if(labelrotate== -90){verticalAlign="middle";}}else{textAlign="center";}}else if(location=="top"){verticalAlign="bottom";if(labelrotate>0){textAlign="right";if(labelrotate==90){verticalAlign="middle";}}else if(labelrotate<0){textAlign="left";if(labelrotate== -90){verticalAlign="middle";}}else{textAlign="center";verticalAlign="top";}}}else{verticalAlign="middle";if(location=="right"){textAlign="left";if(labelrotate==90){textAlign="center";verticalAlign="bottom";}else if(labelrotate== -90){textAlign="center";verticalAlign="top";}}else if(location=="left"){textAlign="right";if(labelrotate==0){textAlign="left";}else if(labelrotate==90){textAlign="center";verticalAlign="top";}else if(labelrotate== -90){textAlign="center";verticalAlign="bottom";}}}this._tickLabelTextAlign=textAlign;this._tickLabelVerticalAlign=verticalAlign;};_pChartAxisControl._createTitle=function(){if(!this._title){this._title=new nexacro.ChartGraphicsText(0,0);this._title.set_id("ChartAxisTitle");this._title.set_textAlign("center");this._title.set_verticalAlign("top");this._group.addChild(this._title);this._title._axis=this;}};_pChartAxisControl._arrangeTickGroup=function(width,height){var axisLine=this._axisLine,direction=this._direction,location=this._location,axislinestyle=this._axislinestyle,axislinewidth=0,x=0,y=0,axisRectWidth=0,axisRectHeight=0,tickendspace=this._tickendspace,axisRect=this._axisRect.getGlobalBoundRect(false,true);if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;axislinewidth*=0.5;}var tickstartgap=0;var tickendgap=0;var charttype=this.parent._type_name;var type=this._type;if(charttype=="BasicChart"){var categoryaxis=this.parent.categoryaxis;if(categoryaxis){tickstartgap=categoryaxis._tickstartgap;tickendgap=categoryaxis._tickendgap;}}if(direction=="x"){if(type=="categoryAxis"){x=axisRect.left-tickstartgap;axisRectWidth=axisRect.width+tickstartgap+tickendgap+tickendspace;}else{x=axisRect.left;axisRectWidth=axisRect.width+tickendspace;}if(location=="top"){y=axisRect.bottom-axislinewidth;}else{y=axisRect.top+axislinewidth;}if(axisLine){axisLine.set_x1(x);axisLine.set_y1(y);axisLine.set_x2(x+axisRectWidth);axisLine.set_y2(y);}}else{if(type=="categoryAxis"){y=axisRect.top-tickstartgap-tickendspace;axisRectHeight=axisRect.height+tickstartgap+tickendgap+tickendspace;}else{y=axisRect.top-tickendspace;if(charttype=="BasicChart"){tickendspace=0;}axisRectHeight=axisRect.height+tickendspace;}if(location=="left"){x=axisRect.right-axislinewidth;}else{x=axisRect.left+axislinewidth;}if(axisLine){axisLine.set_x1(x);axisLine.set_y1(y);axisLine.set_x2(x);axisLine.set_y2(y+axisRectHeight);}}var ticks=this._ticks,tick,value,ticksize,tickXoff=0,tickYoff=0,tickmin=this._min,tickmax=this._max,tickboardLine,vc=0;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){ticksize=10;}else{ticksize=this.ticksize;}if(ticksize>0){if(location=="top"){tickYoff= -ticksize;y-=axislinewidth;}else if(location=="bottom"){tickYoff=ticksize;y+=axislinewidth;}else if(location=="left"){tickXoff= -ticksize;x-=axislinewidth;}else if(location=="right"){tickXoff=ticksize;x+=axislinewidth;}}var xtickendspace=this.parent._xaxes[0]._tickendspace;var ytickendspace=this.parent._yaxes[0]._tickendspace;var tickgap=0;for(var i=0;i<ticks.length;i++ ){tick=ticks[i].lineElement;tickboardLine=ticks[i].boardlineElement;value=ticks[i].v;if(isNaN(value)||value<tickmin||value>tickmax){continue;}vc=this.p2c(value);if(this._direction=="x"){x=vc+axisRect.left;}else{y=vc+axisRect.top;}ticks[i]._point={"x1":x,"y1":y,"x2":x+tickXoff,"y2":y+tickYoff};if(tick){tick.set_x1(x);tick.set_y1(y);tick.set_x2(x+tickXoff);tick.set_y2(y+tickYoff);}if(tickboardLine){if(direction=="x"){tickboardLine.set_x1(vc);tickboardLine.set_y1(0);tickboardLine.set_x2(vc);if(charttype=="BasicChart"){ytickendspace=0;}if(type=="categoryAxis"){tickboardLine.set_y2(height+ytickendspace);}else{tickgap=0;if(this.parent.vrangebar&&this.parent.vrangebar._group.visible){tickgap=tickstartgap+tickendgap;}tickboardLine.set_y2(height+tickgap+ytickendspace);}}else{tickboardLine.set_x1(0);tickboardLine.set_y1(vc);if(type=="categoryAxis"){tickboardLine.set_x2(width+xtickendspace);}else{tickgap=0;if(this.parent.hrangebar&&this.parent.hrangebar._group.visible){tickgap=tickstartgap+tickendgap;}tickboardLine.set_x2(width+tickgap+xtickendspace);}tickboardLine.set_y2(vc);}}}};_pChartAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,tick,labelEle,textW=0,textH=0,x=0,y=0,value,labelrotate=this.labelrotate,location=this._location,labelgap= +this._labelgap,labelBoundRect,axislinestyle=this._axislinestyle,axislinewidth=0,ticksize,_ticksize,tickGroupSize=0,ticklinestyle=this._ticklinestyle,ticklinewidth=0,pos,axisRect=this._axisRect.getGlobalBoundRect(false,true);axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():1;ticklinewidth=ticklinestyle?ticklinestyle._getBorderLeftWidth():1;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){_ticksize=10;}else{_ticksize=this.ticksize;}ticksize= +_ticksize;if(ticklinewidth<1){ticksize=0;}tickGroupSize=axislinewidth+ticksize;for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max){continue;}labelBoundRect=labelEle.getGlobalBoundRect();textW=labelBoundRect.width;textH=labelBoundRect.height;if(this._direction=="x"){x=tick._point.x1;labelEle.set_x(x);pos=labelEle.getCenter();var cx=pos.x;var _txtWidthHalf=(labelEle._txtSize[0]||textW)/2;if(x==axisRect.left){if(cx-(_txtWidthHalf)<0){labelEle.set_x(axisRect.left+(Math.abs(cx-_txtWidthHalf)));}}else if(x==axisRect.right){var rectwidth=this.parent._getClientWidth();if(cx+(_txtWidthHalf)>rectwidth){labelEle.set_x(axisRect.right-((cx+_txtWidthHalf)-rectwidth));}}if(location=="bottom"){y=axisRect.top+tickGroupSize+labelgap;}else{y=axisRect.top+axisRect.height-tickGroupSize-labelgap;if(labelrotate==0){y=y-textH;}}labelEle.set_textAlign(this._tickLabelTextAlign);labelEle.set_verticalAlign(this._tickLabelVerticalAlign);labelEle.set_y(y);}else{y=tick._point.y1;labelEle.set_y(y);pos=labelEle.getCenter();var cy=pos.y;var _txtHeightHalf=(labelEle._txtSize[1]||textH)/2;if(y==axisRect.top){if(cy-_txtHeightHalf<0){labelEle.set_y(axisRect.top+Math.abs(cy-_txtHeightHalf));}}else if(y==axisRect.bottom){var rectheight=this.parent._getClientHeight();if(cy+_txtHeightHalf>rectheight){labelEle.set_y(axisRect.bottom-((cy+_txtHeightHalf)-rectheight));}}if(location=="right"){x=axisRect.left+tickGroupSize+labelgap;}else{x=axisRect.left+axisRect.width-tickGroupSize-labelgap;if(labelrotate==0){x=x-textW;}}labelEle.set_textAlign(this._tickLabelTextAlign);labelEle.set_verticalAlign(this._tickLabelVerticalAlign);labelEle.set_x(x);}}};_pChartAxisControl._arrangeTitle=function(){var title=this._title;if(!title){return;}var titletextalign=this.titletextalign,axislinestyle=this._axislinestyle,axislinewidth=0,ticksize=0,labelgap=this._labelgap||0,labelWidth=this._labelWidth,labelHeight=this._labelHeight,titleWidth=this._titleWidth,titleHeight=this._titleHeight,titlegap=this.titlegap||0,location=this._location,titlerotate=this._titlerotate,axisRect=this._axisRect.getGlobalBoundRect(false,true),x=0,y=0;axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():1;if(labelWidth==0||labelHeight==0){labelgap=0;}if(this._direction=="x"){if(location=="bottom"){y=axisRect.top+axislinewidth+ticksize+labelgap+labelHeight+titlegap;}else{y=axisRect.bottom-axislinewidth-ticksize-labelgap-labelHeight-titleHeight-titlegap;}if(titletextalign=="low"){x=axisRect.left+(titleWidth*0.5);}else if(titletextalign=="high"){x=axisRect.right-(titleWidth*0.5);}else{x=(axisRect.width*0.5)+axisRect.left;}title.setTransform("translate("+x+","+y+")");}else{y=(axisRect.height+axisRect.top)*0.5+(axisRect.top*0.5)-(titleHeight*0.5);if(titlerotate== -90||titlerotate==90){titleWidth=this._titleHeight;titleHeight=this._titleWidth;}if(location=="left"){if(titlerotate== -90){x=axisRect.right-axislinewidth-ticksize-labelgap-labelWidth-titlegap-titleWidth;}else if(titlerotate==90){x=axisRect.right-axislinewidth-ticksize-labelgap-labelWidth-titlegap;}else{x=axisRect.right-axislinewidth-ticksize-labelgap-(titleWidth*0.5)-labelWidth-titlegap;}}else{if(titlerotate== -90){x=axisRect.left+axislinewidth+ticksize+labelgap+labelWidth+titlegap;}else if(titlerotate==90){x=axisRect.left+axislinewidth+ticksize+labelgap+labelWidth+titleWidth+titlegap;}else{x=axisRect.left+axislinewidth+ticksize+labelgap+labelWidth+(titleWidth*0.5)+titlegap;}}if(titlerotate== -90||titlerotate==90){if(titletextalign=="high"){y=axisRect.top+(titleHeight*0.5);}else if(titletextalign=="low"){y=axisRect.top+axisRect.height-(titleHeight*0.5);}title.setTransform("translate("+x+","+y+"),rotate("+titlerotate+")");}else{if(titletextalign=="high"){y=axisRect.top;}else if(titletextalign=="low"){y=axisRect.top+axisRect.height-titleHeight;}title.setTransform("translate("+x+","+y+")");}}};_pChartAxisControl._measureAxisRect=function(){if(!this.visible){this._axisRect.set_width(0);this._axisRect.set_height(0);return;}var axislinestyle=this._axislinestyle,axislinewidth=0,size=0,ticksize,ticklinestyle=this._ticklinestyle,ticklineWidth=0,labelgap=this._labelgap,labelWidth=this._labelWidth,labelHeight=this._labelHeight,titlegap=this.titlegap||0,titlerotate=this._titlerotate;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){ticksize=10;}else{ticksize=this.ticksize;}axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():1;size+=axislinewidth;ticklineWidth=ticklinestyle?ticklinestyle._getBorderWidth():1;if(ticklineWidth>0){if(!isNaN( +ticksize)){size+= +ticksize;}}if(labelWidth==0||labelHeight==0){labelgap=0;}if(!isNaN( +labelgap)){size+= +labelgap;}this._getTitleSize();var titleWidth=this._titleWidth;var titleHeight=this._titleHeight;if(titleWidth==0||titleHeight==0){titlegap=0;}if(!isNaN( +titlegap)){size+= +titlegap;}if(this._direction=="x"){size+=labelHeight;size+=titleHeight;this._axisRect.set_height(size);}else{size+=labelWidth;if(titlerotate== -90||titlerotate==90){size+=titleHeight;}else{size+=titleWidth;}this._axisRect.set_width(size);}};_pChartAxisControl._getTitleSize=function(){if(this._title){var titleBound=this._title._getRect();this._titleHeight=titleBound.height;this._titleWidth=titleBound.width;}else{this._titleHeight=0;this._titleWidth=0;}};_pChartAxisControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents,idx= -1,valueaxes=this.parent.valueaxes,type=this._type;if(type=="categoryAxis"){if(contents&&contents.categoryaxis){contents.categoryaxis[nm]=newVal;}}else{idx=nexacro._ChartGraphicsLibArray.indexOf(valueaxes,this);if(contents&&contents.valueaxes[idx]){contents.valueaxes[idx][nm]=newVal;}}};_pChartAxisControl._afterSetProperties=function(){this.on_apply_boardlinevisible(this.boardlinevisible);this.on_apply_axislinestyle(this._axislinestyle);this.on_apply_ticklinestyle(this._ticklinestyle);this.on_apply_labeltextfont(this._labeltextfont);this.on_apply_labeltextcolor(this._labeltextcolor);this.on_apply_titletext(this.titletext);this.on_apply_titletextfont(this._titletextfont);this.on_apply_titletextcolor(this._titletextcolor);this.on_apply_axistype();};}if(!nexacro.ChartRangebarControl){nexacro.ChartRangebarControl=function(id,parent,graphicsControl,isvscroll){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._isvscroll=isvscroll;this._createGroup();};var _pChartRangebarControl=nexacro.ChartRangebarControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartRangebarControl);_pChartRangebarControl._type_name="ChartRangebarControl";_pChartRangebarControl._group=null;_pChartRangebarControl._rangebarRect=null;_pChartRangebarControl._trackbarRect=null;_pChartRangebarControl._decImage=null;_pChartRangebarControl._incImage=null;_pChartRangebarControl.background="";_pChartRangebarControl.trackbargripdecimage="";_pChartRangebarControl.trackbargripdecimageheight=undefined;_pChartRangebarControl.trackbargripdecimagewidth=undefined;_pChartRangebarControl.trackbargripimageposition="middle";_pChartRangebarControl.trackbargripincimage="";_pChartRangebarControl.trackbargripincimageheight=undefined;_pChartRangebarControl.trackbargripincimagewidth=undefined;_pChartRangebarControl.trackbargripsize=undefined;_pChartRangebarControl.linestyle="";_pChartRangebarControl.radius="";_pChartRangebarControl.size=undefined;_pChartRangebarControl.trackbarfillstyle="";_pChartRangebarControl.trackbarlinestyle="";_pChartRangebarControl.trackbarminsize=undefined;_pChartRangebarControl.trackbarpadding="";_pChartRangebarControl.trackbarradius="";_pChartRangebarControl.visible=true;_pChartRangebarControl.startdata=undefined;_pChartRangebarControl.enddata=undefined;_pChartRangebarControl._axis=null;_pChartRangebarControl._trackbarRectBounds=null;_pChartRangebarControl._incImageWidth=0;_pChartRangebarControl._decImageWidth=0;_pChartRangebarControl._incImageHeight=0;_pChartRangebarControl._decImageHeight=0;_pChartRangebarControl._rearrange=true;_pChartRangebarControl._background=null;_pChartRangebarControl._linestyle=null;_pChartRangebarControl._radius=null;_pChartRangebarControl._trackbarfillstyle=null;_pChartRangebarControl._trackbarlinestyle=null;_pChartRangebarControl._trackbarradius=null;_pChartRangebarControl._trackbarresizing=true;_pChartRangebarControl._trackbarstart= -1;_pChartRangebarControl._trackbarend= -1;_pChartRangebarControl._isvscroll=false;_pChartRangebarControl.destroy=function(){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;this._rangebarRect=null;this._trackbarRect=null;this._decImage=null;this._incImage=null;this._background=null;this._linestyle=null;this._trackbarfillstyle=null;this._trackbarlinestyle=null;this._trackbarradius=null;if(this.parent){if(this.parent.hrangebar&&!this._isvscroll){this.parent._deleteContentsProp("hrangebar");this.parent.hrangebar=null;}if(this.parent.vrangebar&&this._isvscroll){this.parent._deleteContentsProp("vrangebar");this.parent.vrangebar=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartRangebarControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!==val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartRangebarControl.on_apply_visible=function(visible){this._group.set_visible(visible);this.parent._changedData=true;};_pChartRangebarControl.set_startdata=function(val){if(val!==undefined){if(isNaN(val)){return;}}if(val!==""&&val!=null){var istimeaxis=this._isTimeAxis;if(istimeaxis){val=eval(val);}else{val=parseFloat(val);}if(this.startdata!==val){this._changeContentsProperty("startdata",val,this.startdata);this.startdata=val;this.on_apply_startdata();}}else{if(this.startdata){this.startdata=undefined;this.on_apply_startdata();}}this.parent._draw();};_pChartRangebarControl.on_apply_startdata=function(){this.parent._changedData=true;};_pChartRangebarControl.set_enddata=function(val){if(val!==undefined){if(isNaN(val)){return;}}if(val!==""&&val!=null){var istimeaxis=this._isTimeAxis;if(istimeaxis){val=eval(val);}else{val=parseFloat(val);}if(this.enddata!==val){this._changeContentsProperty("enddata",val,this.enddata);this.enddata=val;this.on_apply_enddata();}}else{if(this.enddata){this.enddata=undefined;this.on_apply_enddata();}}this.parent._draw();};_pChartRangebarControl.on_apply_enddata=function(){this.parent._changedData=true;};_pChartRangebarControl.set_size=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.size!==val){this._changeContentsProperty("size",val,this.size);this.size=val;this.on_apply_size(val);}this.parent._draw();};_pChartRangebarControl.on_apply_size=function(size){if((size==""||size==null)&&size!==0){size=15;}if(this._isvscroll){this._rangebarRect.set_width(size);}else{this._rangebarRect.set_height(size);}this.parent._changedData=true;};_pChartRangebarControl.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var oldValue;if(this._background){oldValue=this._background.value;}this._changeContentsProperty("background",val,oldValue);var background=nexacro.BackgroundObject(val,this);this._background=background;this.on_apply_background(background);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_background=function(background){this._rangebarRect.set_fillstyle(background?background.value:"");};_pChartRangebarControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||!this._linestyle._single||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_linestyle=function(linestyle){this._rangebarRect.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");this.parent._changedData=true;};_pChartRangebarControl.set_radius=function(val){this.radius=val;if(val){if(this._radius==null||this._radius.value!=val){var oldValue;if(this._radius){oldValue=this._radius.value;}this._changeContentsProperty("radius",val,oldValue);var radius=nexacro.PaddingObject(val);this._radius=radius;this.on_apply_radius(radius);}}else{if(this._radius){this._radius=null;this.on_apply_radius(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_radius=function(radius){this._rangebarRect.set_radiusx(radius?radius.top:"");this._rangebarRect.set_radiusy(radius?radius.right:"");};_pChartRangebarControl.set_trackbarfillstyle=function(val){this.trackbarfillstyle=val;if(val){if(this._trackbarfillstyle==null||this._trackbarfillstyle.value!=val){var oldValue;if(this._trackbarfillstyle){oldValue=this._trackbarfillstyle.value;}this._changeContentsProperty("trackbarfillstyle",val,oldValue);var trackbarfillstyle=nexacro.BackgroundObject(val,this);this._trackbarfillstyle=trackbarfillstyle;this.on_apply_trackbarfillstyle(trackbarfillstyle);}}else{if(this._trackbarfillstyle){this._trackbarfillstyle=null;this.on_apply_trackbarfillstyle(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbarfillstyle=function(trackbarfillstyle){this._trackbarRect.set_fillstyle(trackbarfillstyle?trackbarfillstyle.value:"");};_pChartRangebarControl.set_trackbarlinestyle=function(val){this.trackbarlinestyle=val;if(val){if(this._trackbarlinestyle==null||!this._trackbarlinestyle._single||this._trackbarlinestyle.value!=val){var oldValue;if(this._trackbarlinestyle){oldValue=this._trackbarlinestyle.value;}this._changeContentsProperty("trackbarlinestyle",val,oldValue);var trackbarlinestyle=nexacro.BorderObject(val);this._trackbarlinestyle=trackbarlinestyle;this.on_apply_trackbarlinestyle(trackbarlinestyle);}}else{if(this._trackbarlinestyle){this._trackbarlinestyle=null;this.on_apply_trackbarlinestyle(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbarlinestyle=function(trackbarlinestyle){this._trackbarRect.set_strokepen(trackbarlinestyle?trackbarlinestyle.value||trackbarlinestyle:"1px solid #717a8380");this.parent._changedData=true;};_pChartRangebarControl.set_trackbarradius=function(val){this.trackbarradius=val;if(val){if(this._trackbarradius==null||this._trackbarradius.value!=val){var oldValue;if(this._trackbarradius){oldValue=this._trackbarradius.value;}this._changeContentsProperty("trackbarradius",val,oldValue);var trackbarradius=nexacro.PaddingObject(val);this._trackbarradius=trackbarradius;this.on_apply_trackbarradius(trackbarradius);}}else{if(this._trackbarradius){this._trackbarradius=null;this.on_apply_trackbarradius(null);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbarradius=function(trackbarradius){this._trackbarRect.set_radiusx(trackbarradius?trackbarradius.left:"");this._trackbarRect.set_radiusy(trackbarradius?trackbarradius.top:"");};_pChartRangebarControl.set_trackbarminsize=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.trackbarminsize!=val){if(val!==undefined){if(val<10){return;}var boundW=this.parent._getClientWidth();var boundH=this.parent._getClientHeight();if(this.parent._boardRect){boundW=this.parent._boardRect.width-this.parent._boardBorderWidth;boundH=this.parent._boardRect.height-this.parent._boardBorderWidth;}if(this._isvscroll&&boundH!==undefined&&!isNaN(boundH= +boundH)&&boundH>0){if(val>=boundH){return;}}else if(boundW!==undefined&&!isNaN(boundW= +boundW)&&boundW>0){if(val>=boundW){return;}}}this._changeContentsProperty("trackbarminsize",val,this.trackbarminsize);this.trackbarminsize=val;}this.parent._draw();};_pChartRangebarControl.set_trackbarpadding=function(val){this.trackbarpadding=val;if(val){if(this._trackbarpadding==null||this._trackbarpadding.value!=val){var oldValue;if(this._trackbarpadding){oldValue=this._trackbarpadding.value;}this._changeContentsProperty("trackbarpadding",val,oldValue);var trackbarpadding=nexacro.PaddingObject(val);this._trackbarpadding=trackbarpadding;this.on_apply_trackbarpadding();}}else{if(this._trackbarpadding){this._trackbarpadding=null;this.on_apply_trackbarpadding();}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbarpadding=function(){this._rearrange=true;};_pChartRangebarControl.set_trackbargripsize=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.trackbargripsize!==val){this._changeContentsProperty("trackbargripsize",val,this.trackbargripsize);this.trackbargripsize=val;}this.parent._draw();};_pChartRangebarControl.onloadedtrackbargripimgs=function(){if(this._incImage){if(this._incImage.imagewidth>0&&!this.trackbargripincimagewidth){this.on_apply_trackbargripincimagewidth(this._incImage.imagewidth);}if(this._incImage.imageheight>0&&!this.trackbargripincimageheight){this.on_apply_trackbargripincimageheight(this._incImage.imageheight);}}if(this._decImage){if(this._decImage.imagewidth>0&&!this.trackbargripdecimagewidth){this.on_apply_trackbargripdecimagewidth(this._decImage.imagewidth);}if(this._decImage.imageheight>0&&!this.trackbargripdecimageheight){this.on_apply_trackbargripdecimageheight(this._decImage.imageheight);}}this.parent._rearrange=true;this.parent._draw();};_pChartRangebarControl.set_trackbargripdecimage=function(val){if(this.trackbargripdecimage!=val){this._changeContentsProperty("trackbargripdecimage",val,this.trackbargripdecimage);this.trackbargripdecimage=val;this._decImage._redrawparent=this;this._decImage._redrawcallback=this.onloadedtrackbargripimgs;this.on_apply_trackbargripdecimage(val);if(this._decImage){if(this._decImage.width>0){this.on_apply_trackbargripdecimagewidth(this._decImage.width);}if(this._decImage.height>0){this.on_apply_trackbargripdecimageheight(this._decImage.height);}}}};_pChartRangebarControl.set_trackbargripincimage=function(val){if(this.trackbargripincimage!=val){this._changeContentsProperty("trackbargripincimage",val,this.trackbargripincimage);this.trackbargripincimage=val;this._incImage._redrawparent=this;this._incImage._redrawcallback=this.onloadedtrackbargripimgs;this.on_apply_trackbargripincimage(val);if(this._incImage){if(this._incImage.width>0){this.on_apply_trackbargripincimagewidth(this._incImage.width);}if(this._incImage.height>0){this.on_apply_trackbargripincimageheight(this._incImage.height);}}}};_pChartRangebarControl.on_apply_trackbargripdecimage=function(trackbargripdecimage){this._decImage.set_src(trackbargripdecimage);};_pChartRangebarControl.set_trackbargripdecimagewidth=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}}if(val!==""&&val!=null){val=parseInt(val);if(this.trackbargripdecimagewidth!==val){this._changeContentsProperty("trackbargripdecimagewidth",val,this.trackbargripdecimagewidth);this.trackbargripdecimagewidth=val;this.on_apply_trackbargripdecimagewidth(val);}}else{if(this.trackbargripdecimagewidth){this.trackbargripdecimagewidth=undefined;this.on_apply_trackbargripdecimagewidth(val);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbargripdecimagewidth=function(trackbargripdecimagewidth){this._decImage.set_width(trackbargripdecimagewidth);this._rearrange=true;};_pChartRangebarControl.set_trackbargripdecimageheight=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}}if(val!==""&&val!=null){val=parseInt(val);if(this.trackbargripdecimageheight!==val){this._changeContentsProperty("trackbargripdecimageheight",val,this.trackbargripdecimageheight);this.trackbargripdecimageheight=val;this.on_apply_trackbargripdecimageheight(val);}}else{if(this.trackbargripdecimageheight){this.trackbargripdecimageheight=undefined;this.on_apply_trackbargripdecimageheight(val);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbargripdecimageheight=function(trackbargripdecimageheight){this._decImage.set_height(trackbargripdecimageheight);this._rearrange=true;};_pChartRangebarControl.on_apply_trackbargripincimage=function(trackbargripincimage){this._incImage.set_src(trackbargripincimage);};_pChartRangebarControl.set_trackbargripincimagewidth=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}}if(val!==""&&val!=null){val=parseInt(val);if(this.trackbargripincimagewidth!==val){this._changeContentsProperty("trackbargripincimagewidth ",val,this.trackbargripincimagewidth);this.trackbargripincimagewidth=val;this.on_apply_trackbargripincimagewidth(val);}}else{if(this.trackbargripincimagewidth){this.trackbargripincimagewidth=undefined;this.on_apply_trackbargripincimagewidth(val);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbargripincimagewidth=function(trackbargripincimagewidth){this._incImage.set_width(trackbargripincimagewidth);this._rearrange=true;};_pChartRangebarControl.set_trackbargripincimageheight=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}}if(val!==""&&val!=null){val=parseInt(val);if(this.trackbargripincimageheight!==val){this._changeContentsProperty("trackbargripincimageheight  ",val,this.trackbargripincimageheight);this.trackbargripincimageheight=val;this.on_apply_trackbargripincimageheight(val);}}else{if(this.trackbargripincimageheight){this.trackbargripincimageheight=undefined;this.on_apply_trackbargripincimageheight(val);}}this.parent._draw();};_pChartRangebarControl.on_apply_trackbargripincimageheight=function(trackbargripincimageheight){this._incImage.set_height(trackbargripincimageheight);this._rearrange=true;};_pChartRangebarControl.set_trackbargripimageposition=function(val){var trackbargripimageposition_enum=["upside","middle","downside"];if(trackbargripimageposition_enum.indexOf(val)== -1){return;}if(this.trackbargripimageposition!=val){this._changeContentsProperty("trackbargripimageposition",val,this.trackbargripimageposition);this.trackbargripimageposition=val;this.on_apply_trackbargripimageposition();}this.parent._draw();};_pChartRangebarControl.on_apply_trackbargripimageposition=function(){this._rearrange=true;};_pChartRangebarControl._createGroup=function(){this._group=new nexacro.ChartGraphicsGroup();var checkid;if(this._isvscroll){this._group.set_id("ChartVRangebarGroup");checkid=this._group.id;}else{this._group.set_id("ChartHRangebarGroup");checkid=this._group.id;}if(this._graphicsControl){var item=this._graphicsControl.getObjectByID(checkid);if(item){this._graphicsControl.removeChild(item);item.destroy();}}this._graphicsControl.addChild(this._group);this._createRangebarRect();this._createTrackbarRect();this._createDecImage();this._createIncImage();};_pChartRangebarControl._createRangebarRect=function(){this._rangebarRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._rangebarRect.set_id("ChartRangebarRect");this._group.addChild(this._rangebarRect);this._rangebarRect._rangebar=this;};_pChartRangebarControl._createTrackbarRect=function(){this._trackbarRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._trackbarRect.set_id("ChartTrackbarRect");this._trackbarRect._dragAction=true;this._trackbarRect._owner=this;this._group.addChild(this._trackbarRect);this._trackbarRect._rangebar=this;this._applyCursor(this._trackbarRect,"default");};_pChartRangebarControl._createDecImage=function(){this._decImage=new nexacro.ChartGraphicsImage(0,0);this._decImage.set_id("ChartChangeRangeDecImage");this._decImage._dragAction=true;this._decImage._owner=this;this._group.addChild(this._decImage);this._decImage._rangebar=this;if(this._isvscroll){this._applyCursor(this._decImage,"n-resize");}else{this._applyCursor(this._decImage,"w-resize");}};_pChartRangebarControl._createIncImage=function(){this._incImage=new nexacro.ChartGraphicsImage(0,0);this._incImage.set_id("ChartChangeRangeIncImage");this._incImage._dragAction=true;this._incImage._owner=this;this._group.addChild(this._incImage);this._incImage._rangebar=this;if(this._isvscroll){this._applyCursor(this._incImage,"s-resize");}else{this._applyCursor(this._incImage,"e-resize");}};_pChartRangebarControl._arrangeTrackbar=function(){var incImage=this._incImage,decImage=this._decImage,incImageSize,decImageSize,incImageWidth=0,decImageWidth=0,incImageHeight=0,decImageHeight=0;if(incImage){incImageSize=incImage.getSize();incImageWidth=incImageSize?incImageSize.width:0;incImageHeight=incImageSize?incImageSize.height:0;this._incImageWidth=incImageWidth;this._incImageHeight=incImageHeight;}if(decImage){decImageSize=decImage.getSize();decImageWidth=decImageSize?decImageSize.width:0;decImageHeight=decImageSize?decImageSize.height:0;this._decImageWidth=decImageWidth;this._decImageHeight=decImageHeight;}var p1=0,p2=0,trackbarpadding=this._trackbarpadding,padding=0,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,linestyle=this._linestyle,trackbarlinestyle=this._trackbarlinestyle,start=0,end=0,trackbarSize=0,borderwidth=0,borderwidthHalf=0,trackbarBorderwidth=0,trackbarBorderwidthHalf=0,left=0,top=0,val,imgValign,sBound,decImgTop,incImgTop,size;if(trackbarpadding){paddingLeft=trackbarpadding.left;paddingRight=trackbarpadding.right;paddingTop=trackbarpadding.top;paddingBottom=trackbarpadding.bottom;}if((this.size==""||this.size==undefined)&&this.size!==0){size=15;}else{size=this.size;}if(linestyle){borderwidth=linestyle._getBorderLeftWidth();}else{borderwidth=1;}borderwidthHalf=borderwidth*0.5;if(trackbarlinestyle){trackbarBorderwidth=trackbarlinestyle._getBorderLeftWidth();}else{trackbarBorderwidth=1;}trackbarBorderwidthHalf=trackbarBorderwidth*0.5;if(this._isvscroll){if(this._axis){var datamin=this._axis._tickmin||this._axis._datamin;var datamax=this._axis._tickmax||this._axis._datamax;if(this._trackbarresizing){if(this._trackbarstart>=0){p1=this._trackbarstart;val=this.c2pScroll(this._trackbarstart);this._axis._max=datamax-(val-datamin);this._enddata=this._axis._max;}else{this._axis._max=this._enddata;if(this._enddata>=datamax){p1=this.p2cScroll(datamin);}else{p1=this.p2cScroll(datamax-(this._enddata-datamin));}}if(this._trackbarend>=0){p2=this._trackbarend;val=this.c2pScroll(this._trackbarend);this._axis._min=datamax-val+datamin;this._startdata=this._axis._min;}else{this._axis._min=this._startdata;if(this._startdata<=datamin){p2=this.p2cScroll(datamax);}else{p2=this.p2cScroll(datamax-(this._startdata-datamin));}}}else{p1=this._trackbarstart;p2=this._trackbarend;this._startdata=this.c2pScroll(this._trackbarstart);this._enddata=this.c2pScroll(this._trackbarend);this._axis._min=this._startdata;this._axis._max=this._enddata;this._axis._max=datamax-(this._startdata-datamin);this._axis._min=datamax-this._enddata+datamin;this._enddata=this._axis._max;this._startdata=this._axis._min;}}else{p1=0;p2=0;}}else{if(this._axis){if(this._trackbarresizing){if(this._trackbarstart>=0){this._startdata=this.c2pScroll(this._trackbarstart);this._axis._min=this._startdata;p1=this._trackbarstart;}else{this._axis._min=this._startdata;p1=this.p2cScroll(this._startdata);}if(this._trackbarend>=0){this._enddata=this.c2pScroll(this._trackbarend);this._axis._max=this._enddata;p2=this._trackbarend;}else{this._axis._max=this._enddata;p2=this.p2cScroll(this._enddata);}}else{p1=this._trackbarstart;p2=this._trackbarend;this._startdata=this.c2pScroll(this._trackbarstart);this._enddata=this.c2pScroll(this._trackbarend);this._axis._min=this._startdata;this._axis._max=this._enddata;}}else{p1=0;p2=0;}}if(this._isvscroll){start=Math.min(p1,p2)+borderwidthHalf+trackbarBorderwidthHalf+paddingTop+decImageHeight;end=Math.max(p1,p2)-borderwidth-borderwidthHalf-trackbarBorderwidthHalf-paddingBottom-incImageHeight;if(this._trackbarresizing){trackbarSize=end-start;}else{if(this._trackbarRect){trackbarSize=this._trackbarRect.height;}}padding=borderwidth+trackbarBorderwidth+paddingLeft+paddingRight;top=start;left=paddingLeft+borderwidthHalf+trackbarBorderwidthHalf;if(this._trackbarRect){this._trackbarRect.setTransform("translate("+left+","+top+")");this._trackbarRect.set_width(size-padding);this._trackbarRect.set_height(trackbarSize);}if((decImage&&decImageSize)||(incImage&&incImageSize)){imgValign=this.trackbargripimageposition;sBound=this._trackbarRect._getRect(true,true);var decImgLeft=0,incImgLeft=0;if(imgValign=="upside"){decImgLeft=incImgLeft=left-trackbarBorderwidthHalf;}else if(imgValign=="downside"){decImgLeft=sBound.right-decImageWidth+borderwidthHalf+trackbarBorderwidthHalf+paddingLeft;incImgLeft=sBound.right-incImageWidth+borderwidthHalf+trackbarBorderwidthHalf+paddingLeft;}else{incImgLeft=left+(sBound.width-incImageWidth)/2-trackbarBorderwidthHalf;decImgLeft=left+(sBound.width-decImageWidth)/2-trackbarBorderwidthHalf;}if(decImage){if(imgValign=="middle"){decImage.set_x(decImgLeft);}else{decImage.set_x(decImgLeft);}}if(incImage){if(imgValign=="middle"){incImage.set_x(incImgLeft);}else{incImage.set_x(incImgLeft);}}if(decImage){decImage.setTransform("translate(0,0)");decImage.set_y(top-decImageHeight-trackbarBorderwidthHalf);}if(incImage){incImage.setTransform("translate(0,0)");incImage.set_y(top+trackbarSize+trackbarBorderwidthHalf);}}}else{start=Math.min(p1,p2)+borderwidthHalf+trackbarBorderwidthHalf+paddingLeft+decImageWidth;end=Math.max(p1,p2)-borderwidth-borderwidthHalf-trackbarBorderwidthHalf-paddingRight-incImageWidth;if(this._trackbarresizing){trackbarSize=end-start;}else{if(this._trackbarRect){trackbarSize=this._trackbarRect.width;}}padding=borderwidth+trackbarBorderwidth+paddingTop+paddingBottom;left=start;top=paddingTop+borderwidthHalf+trackbarBorderwidthHalf;if(this._trackbarRect){this._trackbarRect.setTransform("translate("+left+","+top+")");this._trackbarRect.set_width(trackbarSize);this._trackbarRect.set_height(size-padding);}if((decImage&&decImageSize)||(incImage&&incImageSize)){imgValign=this.trackbargripimageposition;sBound=this._trackbarRect._getRect(true,true);if(decImage){decImage.setTransform("translate(0,0)");decImage.set_x(left-decImageWidth-trackbarBorderwidthHalf);}if(incImage){incImage.setTransform("translate(0,0)");incImage.set_x(left+trackbarSize+trackbarBorderwidthHalf);}if(imgValign=="upside"){decImgTop=incImgTop=top-trackbarBorderwidthHalf;}else if(imgValign=="downside"){decImgTop=sBound.bottom-decImageHeight+borderwidthHalf+trackbarBorderwidthHalf+paddingTop;incImgTop=sBound.bottom-incImageHeight+borderwidthHalf+trackbarBorderwidthHalf+paddingTop;}else{incImgTop=top+(sBound.height-incImageHeight)/2-trackbarBorderwidthHalf;decImgTop=top+(sBound.height-decImageHeight)/2-trackbarBorderwidthHalf;}if(decImage){if(imgValign=="middle"){decImage.set_y(decImgTop);}else{decImage.set_y(decImgTop);}}if(incImage){if(imgValign=="middle"){incImage.set_y(incImgTop);}else{incImage.set_y(incImgTop);}}}}};_pChartRangebarControl._arrange=function(left,top){var linestyle=this._linestyle,borderWidth=0,borderWidthHalf=0;if(linestyle){borderWidth=linestyle._getBorderLeftWidth();}else{borderWidth=1;}borderWidthHalf=borderWidth*0.5;left+=borderWidthHalf;top+=borderWidthHalf;this._group.setTransform("translate("+left+","+top+")");this._rearrange=false;};_pChartRangebarControl._applyCursor=function(obj,val){var oldobj,newobj;var oldval=obj.cursor;if(oldval!=val){obj.cursor=val;oldobj=obj.cursor;if(val){if(oldobj==null||oldobj.value!=val){newobj=nexacro.CursorObject(val);obj._cursor=newobj;}}else{if(oldobj){obj.cursor=null;}}}};_pChartRangebarControl._dragObject=function(obj,x,y){var pThis=this,chart=this.parent,trackbarRect=this._trackbarRect,origin=[x,y],dragged=0,distance=[0,0];return {moved:function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){var ret;distance[0]=clientX-origin[0];distance[1]=clientY-origin[1];var bounds;if(!dragged&&(dragged|=distance[0]|distance[1])){bounds=trackbarRect.getGlobalBoundRect();pThis._trackbarRectBounds=bounds;ret="drag";}else if(dragged){var start=0,end=0,startdata=pThis._startdata,enddata=pThis._enddata,cursor=obj._cursor,linestyle=pThis._linestyle,borderwidth=0,trackbarpadding=pThis._trackbarpadding,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,canvasLeft=0,canvasTop=0,trackbarborderwidth=0,trackbarlinestyle=pThis._trackbarlinestyle,trackbarminsize=pThis.trackbarminsize||50,trackbargripsize=pThis.trackbargripsize||10,boundW=0,boundH=0,datamax=pThis._axis._tickmax||pThis._axis._datamax,startpadding,endpadding,dataend=pThis.p2cScroll(datamax);canvasLeft=canvasX-chart._boardRect.left;canvasTop=canvasY-chart._boardRect.top;boundW=chart._boardRect.width-chart._boardBorderWidth;boundH=chart._boardRect.height-chart._boardBorderWidth;if(pThis._isvscroll){if(trackbarminsize>=boundH){trackbarminsize=50;}}else{if(trackbarminsize>=boundW){trackbarminsize=50;}}if(trackbarpadding){paddingLeft=trackbarpadding.left;paddingRight=trackbarpadding.right;paddingTop=trackbarpadding.top;paddingBottom=trackbarpadding.bottom;}if(linestyle){borderwidth=linestyle._getBorderLeftWidth();}else{borderwidth=1;}if(trackbarlinestyle){trackbarborderwidth=trackbarlinestyle._getBorderLeftWidth();}else{trackbarborderwidth=1;}start=pThis.p2cScroll(startdata);end=pThis.p2cScroll(enddata);var tempstart=start;var tempend=end;if(cursor=="w-resize"){start=canvasLeft-borderwidth-paddingLeft-trackbarborderwidth;if(canvasLeft<borderwidth+paddingLeft+trackbarborderwidth){start=0;}if(canvasLeft>end-(trackbarminsize+trackbargripsize*2)-borderwidth-paddingRight){start=end-(trackbarminsize+trackbargripsize*2)-(borderwidth*2)-paddingLeft-paddingRight;}if(start==tempstart&&end!=boundW){ret="drag";return ret;}pThis._trackbarstart=start;}else if(cursor=="e-resize"){end=canvasLeft+borderwidth+paddingRight+trackbarborderwidth;if(canvasLeft>boundW-borderwidth-paddingRight-trackbarborderwidth){end=boundW;}if(canvasLeft<start+(trackbarminsize+trackbargripsize*2)+borderwidth+paddingLeft){end=start+(trackbarminsize+trackbargripsize*2)+(borderwidth*2)+paddingLeft+paddingRight;}if(end==tempend&&start!=0){ret="drag";return ret;}pThis._trackbarend=end;}else if(cursor=="n-resize"){end=(dataend-start);start=canvasTop-borderwidth-paddingTop-trackbarborderwidth;if(canvasTop<borderwidth+paddingTop+trackbarborderwidth){start=0;}if(canvasTop>end-(trackbarminsize+trackbargripsize*2)-borderwidth-paddingBottom){start=end-(trackbarminsize+trackbargripsize*2)-(borderwidth*2)-paddingTop-paddingBottom;}if(start==tempstart&&end!=boundH){ret="drag";return ret;}pThis._trackbarstart=start;}else if(cursor=="s-resize"){start=(dataend-(end));end=canvasTop+borderwidth+paddingBottom+trackbarborderwidth;if(canvasTop>boundH-borderwidth-paddingBottom-trackbarborderwidth){end=boundH;}if(canvasTop<start+(trackbarminsize+trackbargripsize*2)+borderwidth+paddingBottom){end=start+(trackbarminsize+trackbargripsize*2)+(borderwidth*2)+paddingTop+paddingBottom;}if(end==tempend&&start!=0){ret="drag";return ret;}pThis._trackbarend=end;}else if(cursor=="default"){if(pThis._isvscroll){bounds=pThis._trackbarRectBounds;var startY=bounds.top,startHeight=pThis._trackbarRect.height+trackbarborderwidth,distanceY=distance[1],incImageH=pThis._incImageHeight||0,decImageH=pThis._decImageHeight||0;startY-=chart._boardRect.top;start=startY+distanceY;end=startHeight+startY+distanceY;startpadding=borderwidth+paddingTop;endpadding=borderwidth+paddingBottom;start-=startpadding+decImageH;end+=endpadding+incImageH;if(start<0){end-=start;start=0;if(end>boundH){end=boundH;}}else if(end>boundH){start=boundH-(end-start);if(start<0){end=boundH;start=0;}else{end=boundH;}}pThis._trackbarstart=start;pThis._trackbarend=end;pThis._trackbarresizing=false;}else{bounds=pThis._trackbarRectBounds;var startX=bounds.left,startWidth=pThis._trackbarRect.width+trackbarborderwidth,distanceX=distance[0],incImageW=pThis._incImageWidth||0,decImageW=pThis._decImageWidth||0;startX-=chart._boardRect.left;start=startX+distanceX;end=startWidth+startX+distanceX;startpadding=borderwidth+paddingLeft;endpadding=borderwidth+paddingRight;start-=startpadding+decImageW;end+=endpadding+incImageW;if(start<0){end-=start;start=0;if(end>boundW){end=boundW;}}else if(end>boundW){start=boundW-(end-start);if(start<0){end=boundW;start=0;}else{end=boundW;}}pThis._trackbarstart=start;pThis._trackbarend=end;pThis._trackbarresizing=false;}}ret="drag";chart._changedData=true;chart._ani_exception=true;chart._draw();pThis._trackbarresizing=true;pThis._trackbarstart= -1;pThis._trackbarend= -1;}return ret;},ended:function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){}};};_pChartRangebarControl._afterSetProperties=function(){this.on_apply_size(this.size);this.on_apply_linestyle(this._linestyle);this.on_apply_trackbarlinestyle(this._trackbarlinestyle);};_pChartRangebarControl._setRangebarRectWidth=function(width){if(this._rangebarRect){this._rangebarRect.set_width(width);}};_pChartRangebarControl._setRangebarRectHeight=function(height){if(this._rangebarRect){this._rangebarRect.set_height(height);}};_pChartRangebarControl._setRange=function(axis){this._axis=axis;if(this.parent._reset==true){this._startdata=this.startdata;this._enddata=this.enddata;if(axis._type=="categoryAxis"&&axis._categories){if(this.startdata&&axis._categories[this.startdata]){this._startdata=axis._categories[this.startdata];}if(this.enddata&&axis._categories[this.enddata]){this._enddata=axis._categories[this.enddata];}}}var tickmin=axis._tickmin;var tickmax=axis._tickmax;var scrollMin=0,scrollMax=0;if(tickmin){scrollMin=tickmin;}else{scrollMin=axis._datamin;}if(tickmax){scrollMax=tickmax;}else{scrollMax=axis._datamax;}var rs=this._startdata||scrollMin;var re=this._enddata||scrollMax;axis._scrollMin=this._startdata=rs;axis._scrollMax=this._enddata=re;};_pChartRangebarControl._setTransformationHelpers=function(width,axis){var tickmin=axis._tickmin;var tickmax=axis._tickmax;var scrollMin=0,scrollMax=0;if(tickmin){scrollMin=tickmin;}else{scrollMin=axis._datamin;}if(tickmax){scrollMax=tickmax;}else{scrollMax=axis._datamax;}var s=width/Math.abs(scrollMax-scrollMin);var m=Math.min(scrollMax,scrollMin);var startdata=this._startdata||scrollMin;var enddata=this._enddata||scrollMax;axis._min=this._startdata=startdata;axis._max=this._enddata=enddata;this.p2cScroll=function(p){return (p-m)*s;};this.c2pScroll=function(c){return m+c/s;};};_pChartRangebarControl._getRect=function(){if(this._rangebarRect){return this._rangebarRect._getRect(true,true);}return;};_pChartRangebarControl._setCursorX=function(obj,canvasX){var id=obj.id;if(id=="ChartTrackbarRect"){var oBounds=obj.getGlobalBoundRect(),trackbargripsize=this.trackbargripsize||10,incImageW=0,decImageW=0;incImageW=this._incImageWidth||0;decImageW=this._decImageWidth||0;{var leftGap=canvasX-oBounds.left;var rightGap=(oBounds.left+oBounds.width)-canvasX;if(leftGap<trackbargripsize&&decImageW==0){this._applyCursor(obj,"w-resize");}else if(rightGap<trackbargripsize&&incImageW==0){this._applyCursor(obj,"e-resize");}else{this._applyCursor(obj,"default");}}}else if(id=="ChartChangeRangeIncImage"){this._applyCursor(obj,"e-resize");}else if(id=="ChartChangeRangeDecImage"){this._applyCursor(obj,"w-resize");}return obj._cursor;};_pChartRangebarControl._setCursorY=function(obj,canvasY){var id=obj.id;if(id=="ChartTrackbarRect"){var oBounds=obj.getGlobalBoundRect(),trackbargripsize=this.trackbargripsize||10,incImageH=0,decImageH=0;incImageH=this._incImageHeight||0;decImageH=this._decImageHeight||0;{var topGap=canvasY-oBounds.top;var bottomGap=(oBounds.top+oBounds.height)-canvasY;if(topGap<trackbargripsize&&decImageH==0){this._applyCursor(obj,"n-resize");}else if(bottomGap<trackbargripsize&&incImageH==0){this._applyCursor(obj,"s-resize");}else{this._applyCursor(obj,"default");}}}else if(id=="ChartChangeRangeDecImage"){this._applyCursor(obj,"n-resize");}else if(id=="ChartChangeRangeincImage"){this._applyCursor(obj,"s-resize");}return obj._cursor;};_pChartRangebarControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(this._isvscroll){if(contents&&contents.vrangebar){contents.vrangebar[nm]=newVal;}}else{if(contents&&contents.hrangebar){contents.hrangebar[nm]=newVal;}}};}if(!nexacro.ChartSelectionControl){nexacro.ChartSelectionControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._create();this._createSelection();};var _pChartSelection=nexacro.ChartSelectionControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartSelectionControl);_pChartSelection._type_name="ChartSelectionControl";_pChartSelection.type="";_pChartSelection.linestyle="";_pChartSelection.background="";_pChartSelection.opacity="";_pChartSelection.visible=true;_pChartSelection._group=null;_pChartSelection._selectionRect=null;_pChartSelection._linestyle=null;_pChartSelection._background=null;_pChartSelection._opacity=null;_pChartSelection._minsize=10;_pChartSelection._xstartdata=null;_pChartSelection._xenddata=null;_pChartSelection._ystartdata=null;_pChartSelection._yenddata=null;_pChartSelection._xaxis=null;_pChartSelection._yaxis=null;_pChartSelection._rangezoomdraw=false;_pChartSelection._selectionRectBounds=null;_pChartSelection._type="xy";_pChartSelection._info={first:{x: -1,y: -1},second:{x: -1,y: -1},show:false,active:false};_pChartSelection.set_type=function(val){if(this.type!==val&&(val=="x"||val=="y"||val=="xy")){this.type=val;this.on_apply_type();}};_pChartSelection.on_apply_type=function(){this._type=this.type;this._createSelection();};_pChartSelection.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartSelection.on_apply_visible=function(visible){this._group.set_visible(visible);};_pChartSelection.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||!this._linestyle._single||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this.parent._draw();};_pChartSelection.on_apply_linestyle=function(linestyle){this._createSelection();this._selectionRect.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");};_pChartSelection.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var background=nexacro.BackgroundObject(val,this);this._background=background;this.on_apply_background(background);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}this.parent._draw();};_pChartSelection.on_apply_background=function(background){this._createSelection();this._selectionRect.set_fillstyle(background?background.value:"");};_pChartSelection.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}};_pChartSelection.on_apply_opacity=function(opacity){this._createSelection();this._selectionRect.set_opacity(opacity?opacity._sysvalue:1);};_pChartSelection.destroy=function(){this._clear();var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;this._selectionRect=null;this._linestyle=null;this._background=null;this._opacity=null;this._minsize=null;this._info=null;this._xstartdata=null;this._xenddata=null;this._ystartdata=null;this._yenddata=null;this._xaxis=null;this._yaxis=null;this._rangezoomdraw=false;this._type=null;if(this.parent){if(this.parent.selection){this.parent._deleteContentsProp("selection");this.parent.selection=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);};_pChartSelection._clearSelection=function(isPrevented){var info=this._info;if(info.show){info.show=false;this._drawSelection();return true;}else{return false;}};_pChartSelection.deleteSelection=function(){var bfire=this._clearSelection();if(bfire){this.parent._changedData=true;this.parent._reset=true;if(this._xaxis){this._xaxis._scrollMin=null;this._xaxis._scrollMax=null;}if(this._yaxis){this._yaxis._scrollMin=null;this._yaxis._scrollMax=null;}this.parent._draw();if(this.parent.onrangezoomed&&this.parent.onrangezoomed._has_handlers){var evt=new nexacro.ChartRangeZoomEventInfo(this.parent,"onrangezoomed",this.parent,this.parent._graphicsControl,undefined,undefined,undefined,undefined);this.parent.onrangezoomed._fireUserEvent(this.parent,evt);}}return bfire;};_pChartSelection._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartSelectionGroup");this._graphicsControl.addChild(this._group);};_pChartSelection._clear=function(){if(!this._selectionRect){this._group.removeChild(this._selectionRect);delete this._selectionRect;this._selectionRect=null;}};_pChartSelection._createSelection=function(){if(!this._selectionRect){this._selectionRect=new nexacro.ChartGraphicsRect( -1, -1,1,1);this._selectionRect.set_id("ChartSelectionRect");this._group.addChild(this._selectionRect);this._selectionRect._selection=this;this._info={first:{x: -1,y: -1},second:{x: -1,y: -1},show:false,active:false};}};_pChartSelection._dragselectionObject=function(obj,x,y,canvasX,canvasY){var pThis=this,chart=this.parent,selectionRect=this._selectionRect,origin=[x,y],dragged=0,distance=[0,0],i;var boardRect=null;if(chart){boardRect=chart._boardRect;}var yaxes=chart._yaxes;for(i=0;i<yaxes.length;i++ ){if(yaxes[i]._used){pThis._yaxis=yaxes[i];break;}}var xaxes=chart._xaxes;for(i=0;i<xaxes.length;i++ ){if(xaxes[i]._used){pThis._xaxis=xaxes[i];break;}}pThis._xstartdata=pThis._xaxis._min;pThis._xenddata=pThis._xaxis._max;pThis._ystartdata=pThis._yaxis._min;pThis._yenddata=pThis._yaxis._max;this._clearSelection();this._setSelectionPos(this._info.first,boardRect,canvasX,canvasY);return {moved:function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){var ret;distance[0]=clientX-origin[0];distance[1]=clientY-origin[1];if(!dragged&&(dragged|=distance[0]|distance[1])){var bounds=selectionRect.getGlobalBoundRect();pThis._selectionRectBounds=bounds;}else if(dragged){}pThis._updateSelection(boardRect,canvasX,canvasY);ret="drag";return ret;},ended:function(button,alt_key,ctrl_key,shift_key,screenX,screenY,canvasX,canvasY,clientX,clientY){var ret,tickgap;ret=pThis._updateSelection(boardRect,canvasX,canvasY);if(ret==true){if(pThis._type.indexOf("x")!= -1){if(!pThis._xaxis){return ret;}tickgap=0;if(pThis._xaxis._type=="categoryAxis"){tickgap+=pThis._xaxis._tickstartgap;}if(pThis._checkMinsizeSelection()){pThis._xstartdata=pThis._extractRange(pThis._xaxis,pThis._info.first.x-boardRect.left-tickgap);pThis._xenddata=pThis._extractRange(pThis._xaxis,pThis._info.second.x-boardRect.left-tickgap);}}if(pThis._type.indexOf("y")!= -1){if(!pThis._yaxis){return ret;}tickgap=pThis._yaxis._tickendspace;if(pThis._yaxis._type=="categoryAxis"){tickgap+=pThis._yaxis._tickendgap;}if(pThis._checkMinsizeSelection()){pThis._ystartdata=pThis._extractRange(pThis._yaxis,pThis._info.first.y-boardRect.top-tickgap);pThis._yenddata=pThis._extractRange(pThis._yaxis,pThis._info.second.y-boardRect.top-tickgap);}}if(chart.rangezoom.indexOf("x")!= -1||chart.rangezoom.indexOf("y")!= -1){pThis._rangezoomdraw=true;pThis._drawSelection(boardRect,true);chart._changedData=true;chart._rearrange=true;chart._ani_exception=true;chart._draw();}}return ret;}};};_pChartSelection._extractRange=function(axis,pos){if(pos<0){pos=0;}if(!axis){return null;}var ticks=axis._ticks,axisvalue=null;if(ticks){axisvalue=(axis.c2p(pos));if(axisvalue<axis._min){axisvalue=axis._min;}if(axisvalue>axis._max){axisvalue=axis._max;}}return axisvalue;};_pChartSelection._setSelectionPos=function(pos,gridRectBound,canvasX,canvasY){var type=this._type,left,top,right,bottom,info=this._info;right=gridRectBound.right;bottom=gridRectBound.bottom;left=gridRectBound.left;top=gridRectBound.top;pos.x=canvasX<0?0:(canvasX>right?right:canvasX);pos.y=canvasY<0?0:(canvasY>bottom?bottom:canvasY);pos.x=pos.x<0?0:(pos.x<left?left:pos.x);pos.y=pos.y<0?0:(pos.y<top?top:pos.y);if(type=="x"){pos.y=pos==info.first?gridRectBound.top:bottom;}if(type=="y"){pos.x=pos==info.first?gridRectBound.left:right;}};_pChartSelection._updateSelection=function(gridRectBound,canvasX,canvasY){if(canvasX==null||canvasY==null){return false;}this._setSelectionPos(this._info.second,gridRectBound,canvasX,canvasY);if(this._checkMinsizeSelection()){this._info.show=true;this._drawSelection(gridRectBound);return true;}else{this._clearSelection(true);}return false;};_pChartSelection._checkMinsizeSelection=function(){var minSize=this._minsize,info=this._info;var type=this._type;if(type=="xy"){return Math.abs(info.second.x-info.first.x)>=minSize&&Math.abs(info.second.y-info.first.y)>=minSize;}else if(type=="x"){return Math.abs(info.second.x-info.first.x)>=minSize;}else if(type=="y"){return Math.abs(info.second.y-info.first.y)>=minSize;}else{return false;}};_pChartSelection._drawSelection=function(gridRectBound,all){var type=this._type;if(!type){return;}var info=this._info,selectionRect=this._selectionRect;if(info.show&&this._checkMinsizeSelection()){if(selectionRect){var x=Math.min(info.first.x,info.second.x)+0.5,y=Math.min(info.first.y,info.second.y)+0.5,w=Math.abs(info.second.x-info.first.x)-1,h=Math.abs(info.second.y-info.first.y)-1;selectionRect.set_x(x);selectionRect.set_y(y);selectionRect.set_width(w);selectionRect.set_height(h);selectionRect.set_visible(true);if(all){selectionRect.set_x(gridRectBound.left+0.5);selectionRect.set_y(gridRectBound.top+0.5);selectionRect.set_width(gridRectBound.width-1);selectionRect.set_height(gridRectBound.height-1);selectionRect.set_visible(true);}this.parent._graphicsControl.draw();}}else{if(selectionRect){selectionRect.set_x(0);selectionRect.set_y(0);selectionRect.set_width(0);selectionRect.set_height(0);selectionRect.set_visible(false);this.parent._graphicsControl.draw();}}};_pChartSelection._onselected=function(){if(this._checkMinsizeSelection()){this._fireSelectedEvent();}};_pChartSelection._getSelection=function(){if(!this._checkMinsizeSelection()){return null;}var info=this._info;if(!info.show){return null;}var r={},id,c1=info.first,c2=info.second;nexacro._ChartGraphicsLibArray.Each(this.parent._axes,function(axis,i){if(axis){var p1,p2,from,to,rfrom,rto,fromObj,toObj;p1=axis.c2p(c1[axis._direction]);p2=axis.c2p(c2[axis._direction]);from=Math.min(p1,p2);to=Math.max(p1,p2);if(axis._type=="categoryAxis"){axis._selectionFrom=from;axis._selectionTo=to;from=rfrom=nexacro.round(from);to=rto=nexacro.round(to);fromObj=axis._ticks[rfrom];toObj=axis._ticks[rto];if(fromObj&&fromObj.label){from=fromObj.label;}if(toObj&&toObj.label){to=toObj.label;}}id=axis.id;r[id]={axisobject:axis,from:from,to:to};}});return r;};_pChartSelection._fireSelectedEvent=function(){var zoom=this.zoom,ranges;ranges=this._getSelection();if(zoom){var parent=this.parent,axis,from,to,sMin,sMax,type=this._type;if(type.indexOf("x")> -1){nexacro._ChartGraphicsLibObject.Each(ranges,function(axisname,object){axis=object.axisobject;if(axis._direction=="x"){from=object.from;to=object.to;if(axis._type=="categoryAxis"){from=axis._selectionFrom;to=axis._selectionTo;}if(from<axis._datamin){sMin=axis._datamin;}else{sMin=from;}if(to>axis._datamax){sMax=axis._datamax;}else{sMax=to;}axis._selectionMin=sMin;axis._selectionMax=sMax;if(axis._type=="categoryAxis"){axis._selectionFrom=null;axis._selectionTo=null;}return false;}});}if(type.indexOf("y")> -1){nexacro._ChartGraphicsLibObject.Each(ranges,function(axisname,object){axis=object.axisobject;if(axis._direction=="y"){from=object.from;to=object.to;if(axis._type=="categoryAxis"){from=axis._selectionFrom;to=axis._selectionTo;}axis._selectionMin=from;axis._selectionMax=to;if(axis._type=="categoryAxis"){axis._selectionFrom=null;axis._selectionTo=null;}}});}this._clearSelection();parent.draw();}};_pChartSelection._setActive=function(val){this._info.active=!!val;};_pChartSelection._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.selection){contents.selection[nm]=newVal;}};}if(!nexacro.ChartCrosshairControl){nexacro.ChartCrosshairControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._create();this._createXlineRect();this._createXlineText();this._createYlineRect();this._createYlineText();this._xlinerect.set_visible(true);this._xlinetext.set_visible(true);this._ylinerect.set_visible(true);this._ylinetext.set_visible(true);this._createCrosshairX();this._createCrosshairY();this._crosshairY.set_visible(true);this._crosshairX.set_visible(true);};var _pChartCrosshair=nexacro.ChartCrosshairControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartCrosshairControl);_pChartCrosshair._type_name="ChartCrosshairControl";_pChartCrosshair.type="";_pChartCrosshair.xlinestyle="";_pChartCrosshair.xlineopacity="";_pChartCrosshair.ylinestyle="";_pChartCrosshair.ylineopacity="";_pChartCrosshair.tooltiptype="";_pChartCrosshair.xlinetooltippadding="";_pChartCrosshair.ylinetooltippadding="";_pChartCrosshair.xlinetooltipgap=undefined;_pChartCrosshair.ylinetooltipgap=undefined;_pChartCrosshair.xlinetooltipborderradius="";_pChartCrosshair.ylinetooltipborderradius="";_pChartCrosshair.xlinetooltipfillstyle="";_pChartCrosshair.xlinetooltipopacity="";_pChartCrosshair.ylinetooltipfillstyle="";_pChartCrosshair.ylinetooltipopacity="";_pChartCrosshair.xlinetooltiplinestyle="";_pChartCrosshair.ylinetooltiplinestyle="";_pChartCrosshair.xlinetooltiptextcolor="";_pChartCrosshair.ylinetooltiptextcolor="";_pChartCrosshair.visible=true;_pChartCrosshair.rotatecrosshairline=false;_pChartCrosshair._group=null;_pChartCrosshair._crosshairX=null;_pChartCrosshair._crosshairY=null;_pChartCrosshair._xlinerect=null;_pChartCrosshair._xlinetext=null;_pChartCrosshair._ylinerect=null;_pChartCrosshair._ylinetext=null;_pChartCrosshair._xlinestyle=null;_pChartCrosshair._ylinestyle=null;_pChartCrosshair._xlineopacity=null;_pChartCrosshair._ylineopacity=null;_pChartCrosshair._xlinetooltipfillstyle=null;_pChartCrosshair._ylinetooltipfillstyle=null;_pChartCrosshair._xlinetooltipopacity=null;_pChartCrosshair._ylinetooltipopacity=null;_pChartCrosshair._xlinetooltiplinestyle=null;_pChartCrosshair._ylinetooltiplinestyle=null;_pChartCrosshair._xlinetooltipborderradius=null;_pChartCrosshair._ylinetooltipborderradius=null;_pChartCrosshair._xlinetooltiptextcolor=null;_pChartCrosshair._ylinetooltiptextcolor=null;_pChartCrosshair._xlinetooltippadding=null;_pChartCrosshair._ylinetooltippadding=null;_pChartCrosshair._show=false;_pChartCrosshair._type="xy";_pChartCrosshair._tooltiptype="xy";_pChartCrosshair.set_type=function(val){if(this.type!==val&&(val=="x"||val=="y"||val=="xy")){this.type=val;this.on_apply_type(val);}};_pChartCrosshair.on_apply_type=function(type){this._type=type;if(type=="x"){this._createCrosshairX();if(this._crosshairY){this._crosshairY.set_visible(false);}}else if(type=="y"){this._createCrosshairY();if(this._crosshairX){this._crosshairX.set_visible(false);}}else if(type=="xy"){this._createCrosshairX();this._createCrosshairY();this._crosshairY.set_visible(true);this._crosshairX.set_visible(true);}};_pChartCrosshair.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartCrosshair.on_apply_visible=function(visible){this._group.set_visible(visible);};_pChartCrosshair.set_rotatecrosshairline=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.rotatecrosshairline!=val){this._changeContentsProperty("rotatecrosshairline",val,this.rotatecrosshairline);this.rotatecrosshairline=val;this.on_apply_rotatecrosshairline(val);if(this.visible){var type=this._type,tooltiptype=this._tooltiptype;var canvasX= -1,canvasY= -1;if(type.indexOf("x")!= -1&&this._crosshairX&&this._crosshairX.preCanvasY&&this._crosshairX.preCanvasX){canvasX=this._crosshairX.preCanvasX;canvasY=this._crosshairX.preCanvasY;}else if(type.indexOf("y")!= -1&&this._crosshairY&&this._crosshairY.preCanvasY&&this._crosshairY.preCanvasX){canvasX=this._crosshairY.preCanvasX;canvasY=this._crosshairY.preCanvasY;}else if(this._xlinerect&&this._xlinetext&&tooltiptype.indexOf("x")!= -1&&this._xlinetext.preCanvasY&&this._xlinetext.preCanvasX){canvasX=this._xlinetext.preCanvasX;canvasY=this._xlinetext.preCanvasY;}else if(this._ylinerect&&this._ylinetext&&tooltiptype.indexOf("y")!= -1&&this._ylinetext.preCanvasY&&this._ylinetext.preCanvasX){canvasX=this._ylinetext.preCanvasX;canvasY=this._ylinetext.preCanvasY;}this._showCrosshair(this.parent._boardRect,canvasX,canvasY);}}this.parent._draw();};_pChartCrosshair.on_apply_rotatecrosshairline=function(visible){};_pChartCrosshair.set_xlinestyle=function(val){this.xlinestyle=val;if(val){if(this._xlinestyle==null||!this._xlinestyle._single||this._xlinestyle.value!=val){var xlinestyle=nexacro.BorderObject(val);this._xlinestyle=xlinestyle;this.on_apply_xlinestyle(xlinestyle);}}else{if(this._xlinestyle){this._xlinestyle=null;this.on_apply_xlinestyle(null);}}};_pChartCrosshair.on_apply_xlinestyle=function(xlinestyle){this._createCrosshairX();this._crosshairX.set_strokepen(xlinestyle?xlinestyle.value:"1px solid #717a8380");};_pChartCrosshair.set_xlineopacity=function(val){this.xlineopacity=val;if(0===val||val){if(this._xlineopacity==null||this._xlineopacity.value!=val){var xlineopacity=nexacro.OpacityObject(val);this._xlineopacity=xlineopacity;this.on_apply_xlineopacity(xlineopacity);}}else{if(this._xlineopacity){this._xlineopacity=null;this.on_apply_xlineopacity(null);}}};_pChartCrosshair.on_apply_xlineopacity=function(xlineopacity){this._createCrosshairX();this._crosshairX.set_opacity(xlineopacity?xlineopacity._sysvalue:"1");};_pChartCrosshair.set_ylinestyle=function(val){this.ylinestyle=val;if(val){if(this._ylinestyle==null||!this._ylinestyle._single||this._ylinestyle.value!=val){var ylinestyle=nexacro.BorderObject(val);this._ylinestyle=ylinestyle;this.on_apply_ylinestyle(ylinestyle);}}else{if(this._ylinestyle){this._ylinestyle=null;this.on_apply_ylinestyle(null);}}};_pChartCrosshair.on_apply_ylinestyle=function(ylinestyle){this._createCrosshairY();this._crosshairY.set_strokepen(ylinestyle?ylinestyle.value:"1px solid #717a8380");};_pChartCrosshair.set_ylineopacity=function(val){this.ylineopacity=val;if(0===val||val){if(this._ylineopacity==null||this._ylineopacity.value!=val){var ylineopacity=nexacro.OpacityObject(val);this._ylineopacity=ylineopacity;this.on_apply_ylineopacity(ylineopacity);}}else{if(this._ylineopacity){this._ylineopacity=null;this.on_apply_ylineopacity(null);}}};_pChartCrosshair.on_apply_ylineopacity=function(ylineopacity){this._createCrosshairY();this._crosshairY.set_opacity(ylineopacity?ylineopacity._sysvalue:"1");};_pChartCrosshair.set_tooltiptype=function(val){if(this.tooltiptype!==val&&(val=="x"||val=="y"||val=="xy")){this.tooltiptype=val;this.on_apply_tooltiptype(val);}};_pChartCrosshair.on_apply_tooltiptype=function(tooltiptype){this._tooltiptype=tooltiptype;if(tooltiptype=="x"){this._createXlineRect();this._createXlineText();this._xlinerect.set_visible(true);this._xlinetext.set_visible(true);if(this._ylinerect){this._ylinerect.set_visible(false);}if(this._ylinetext){this._ylinetext.set_visible(false);}}else if(tooltiptype=="y"){this._createYlineRect();this._createYlineText();this._ylinerect.set_visible(true);this._ylinetext.set_visible(true);if(this._xlinerect){this._xlinerect.set_visible(false);}if(this._xlinetext){this._xlinetext.set_visible(false);}}else if(tooltiptype=="xy"){this._createXlineRect();this._createXlineText();this._createYlineRect();this._createYlineText();this._xlinerect.set_visible(true);this._xlinetext.set_visible(true);this._ylinerect.set_visible(true);this._ylinetext.set_visible(true);}};_pChartCrosshair.set_xlinetooltippadding=function(val){this.xlinetooltippadding=val;if(val){if(this._xlinetooltippadding==null||this._xlinetooltippadding.value!=val){var oldValue;if(this._xlinetooltippadding){oldValue=this._xlinetooltippadding.value;}this._changeContentsProperty("xlinetooltippadding",val,oldValue);var xlinetooltippadding=nexacro.PaddingObject(val);this._xlinetooltippadding=xlinetooltippadding;this.on_apply_xlinetooltippadding();}}else{if(this._xlinetooltippadding){this._xlinetooltippadding=null;this.on_apply_xlinetooltippadding();}}};_pChartCrosshair.on_apply_xlinetooltippadding=function(val){};_pChartCrosshair.set_ylinetooltippadding=function(val){this.ylinetooltippadding=val;if(val){if(this._ylinetooltippadding==null||this._ylinetooltippadding.value!=val){var oldValue;if(this._ylinetooltippadding){oldValue=this._ylinetooltippadding.value;}this._changeContentsProperty("ylinetooltippadding",val,oldValue);var ylinetooltippadding=nexacro.PaddingObject(val);this._ylinetooltippadding=ylinetooltippadding;this.on_apply_ylinetooltippadding();}}else{if(this._ylinetooltippadding){this._ylinetooltippadding=null;this.on_apply_trackbarpadding();}}};_pChartCrosshair.on_apply_ylinetooltippadding=function(val){};_pChartCrosshair.set_xlinetooltipgap=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.xlinetooltipgap!==val){this._changeContentsProperty("xlinetooltipgap",val,this.xlinetooltipgap);this.xlinetooltipgap=val;}};_pChartCrosshair.set_ylinetooltipgap=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.ylinetooltipgap!==val){this._changeContentsProperty("ylinetooltipgap",val,this.ylinetooltipgap);this.ylinetooltipgap=val;}};_pChartCrosshair.set_xlinetooltipborderradius=function(val){this.xlinetooltipborderradius=val;if(val){if(this._xlinetooltipborderradius==null||this._xlinetooltipborderradius.value!=val){var xlinetooltipborderradius=nexacro.PaddingObject(val);this._xlinetooltipborderradius=xlinetooltipborderradius;this.on_apply_xlinetooltipborderradius(xlinetooltipborderradius);}}else{if(this._xlinetooltipborderradius){this._xlinetooltipborderradius=null;this.on_apply_xlinetooltipborderradius(null);}}};_pChartCrosshair.on_apply_xlinetooltipborderradius=function(xlinetooltipborderradius){this._createXlineRect();this._xlinerect.set_radiusx(xlinetooltipborderradius?xlinetooltipborderradius.top:"");this._xlinerect.set_radiusy(xlinetooltipborderradius?xlinetooltipborderradius.right:"");};_pChartCrosshair.set_ylinetooltipborderradius=function(val){this.ylinetooltipborderradius=val;if(val){if(this._ylinetooltipborderradius==null||this._ylinetooltipborderradius.value!=val){var ylinetooltipborderradius=nexacro.PaddingObject(val);this._ylinetooltipborderradius=ylinetooltipborderradius;this.on_apply_ylinetooltipborderradius(ylinetooltipborderradius);}}else{if(this._ylinetooltipborderradius){this._ylinetooltipborderradius=null;this.on_apply_ylinetooltipborderradius(null);}}};_pChartCrosshair.on_apply_ylinetooltipborderradius=function(ylinetooltipborderradius){this._createYlineRect();this._ylinerect.set_radiusx(ylinetooltipborderradius?ylinetooltipborderradius.top:"");this._ylinerect.set_radiusy(ylinetooltipborderradius?ylinetooltipborderradius.right:"");};_pChartCrosshair.set_xlinetooltipfillstyle=function(val){this.xlinetooltipfillstyle=val;if(val){if(this._xlinetooltipfillstyle==null||this._xlinetooltipfillstyle.value!=val){var xlinetooltipfillstyle=nexacro.BackgroundObject(val,this);this._xlinetooltipfillstyle=xlinetooltipfillstyle;this.on_apply_xlinetooltipfillstyle(xlinetooltipfillstyle);}}else{if(this._xlinetooltipfillstyle){this._xlinetooltipfillstyle=null;this.on_apply_xlinetooltipfillstyle(null);}}};_pChartCrosshair.on_apply_xlinetooltipfillstyle=function(xlinetooltipfillstyle){this._createXlineRect();this._xlinerect.set_fillstyle(xlinetooltipfillstyle?xlinetooltipfillstyle.value:"");};_pChartCrosshair.set_xlinetooltipopacity=function(val){this.xlinetooltipopacity=val;if(0===val||val){if(this._xlinetooltipopacity==null||this._xlinetooltipopacity.value!=val){var xlinetooltipopacity=nexacro.OpacityObject(val);this._xlinetooltipopacity=xlinetooltipopacity;this.on_apply_xlinetooltipopacity(xlinetooltipopacity);}}else{if(this._xlinetooltipopacity){this._xlinetooltipopacity=null;this.on_apply_xlinetooltipopacity(null);}}};_pChartCrosshair.on_apply_xlinetooltipopacity=function(xlinetooltipopacity){this._createXlineRect();this._xlinerect.set_opacity(xlinetooltipopacity?xlinetooltipopacity._sysvalue:"1");this._xlinetext.set_opacity(xlinetooltipopacity?xlinetooltipopacity._sysvalue:"1");};_pChartCrosshair.set_ylinetooltipfillstyle=function(val){this.ylinetooltipfillstyle=val;if(val){if(this._ylinetooltipfillstyle==null||this._ylinetooltipfillstyle.value!=val){var ylinetooltipfillstyle=nexacro.BackgroundObject(val,this);this._ylinetooltipfillstyle=ylinetooltipfillstyle;this.on_apply_ylinetooltipfillstyle(ylinetooltipfillstyle);}}else{if(this._ylinetooltipfillstyle){this._ylinetooltipfillstyle=null;this.on_apply_ylinetooltipfillstyle(null);}}};_pChartCrosshair.on_apply_ylinetooltipfillstyle=function(ylinetooltipfillstyle){this._createYlineRect();this._ylinerect.set_fillstyle(ylinetooltipfillstyle?ylinetooltipfillstyle.value:"");};_pChartCrosshair.set_ylinetooltipopacity=function(val){this.ylinetooltipopacity=val;if(0===val||val){if(this._ylinetooltipopacity==null||this._ylinetooltipopacity.value!=val){var ylinetooltipopacity=nexacro.OpacityObject(val);this._ylinetooltipopacity=ylinetooltipopacity;this.on_apply_ylinetooltipopacity(ylinetooltipopacity);}}else{if(this._ylinetooltipopacity){this._ylinetooltipopacity=null;this.on_apply_ylinetooltipopacity(null);}}};_pChartCrosshair.on_apply_ylinetooltipopacity=function(ylinetooltipopacity){this._createYlineRect();this._ylinerect.set_opacity(ylinetooltipopacity?ylinetooltipopacity._sysvalue:"1");this._ylinetext.set_opacity(ylinetooltipopacity?ylinetooltipopacity._sysvalue:"1");};_pChartCrosshair.set_xlinetooltiplinestyle=function(val){this.xlinetooltiplinestyle=val;if(val){if(this._xlinetooltiplinestyle==null||!this._xlinetooltiplinestyle._single||this._xlinetooltiplinestyle.value!=val){var xlinetooltiplinestyle=nexacro.BorderObject(val);this._xlinetooltiplinestyle=xlinetooltiplinestyle;this.on_apply_xlinetooltiplinestyle(xlinetooltiplinestyle);}}else{if(this._xlinetooltiplinestyle){this._xlinetooltiplinestyle=null;this.on_apply_xlinetooltiplinestyle(null);}}};_pChartCrosshair.on_apply_xlinetooltiplinestyle=function(xlinetooltiplinestyle){this._createXlineRect();this._xlinerect.set_strokepen(xlinetooltiplinestyle?xlinetooltiplinestyle.value:"");};_pChartCrosshair.set_ylinetooltiplinestyle=function(val){this.ylinetooltiplinestyle=val;if(val){if(this._ylinetooltiplinestyle==null||!this._ylinetooltiplinestyle._single||this._ylinetooltiplinestyle.value!=val){var ylinetooltiplinestyle=nexacro.BorderObject(val);this._ylinetooltiplinestyle=ylinetooltiplinestyle;this.on_apply_ylinetooltiplinestyle(ylinetooltiplinestyle);}}else{if(this._ylinetooltiplinestyle){this._ylinetooltiplinestyle=null;this.on_apply_ylinetooltiplinestyle(null);}}};_pChartCrosshair.on_apply_ylinetooltiplinestyle=function(ylinetooltiplinestyle){this._createYlineRect();this._ylinerect.set_strokepen(ylinetooltiplinestyle?ylinetooltiplinestyle.value:"");};_pChartCrosshair.set_xlinetooltiptextcolor=function(val){this.xlinetooltiptextcolor=val;if(val){if(this._xlinetooltiptextcolor==null||this._xlinetooltiptextcolor.value!=val){var xlinetooltiptextcolor=nexacro.ColorObject(val);this._xlinetooltiptextcolor=xlinetooltiptextcolor;this.on_apply_xlinetooltiptextcolor(xlinetooltiptextcolor);}}else{if(this._xlinetooltiptextcolor){this._xlinetooltiptextcolor=null;this.on_apply_xlinetooltiptextcolor(null);}}};_pChartCrosshair.on_apply_xlinetooltiptextcolor=function(xlinetooltiptextcolor){this._createXlineText();this._xlinetext.set_color(xlinetooltiptextcolor?xlinetooltiptextcolor.value:"#000000");};_pChartCrosshair.set_ylinetooltiptextcolor=function(val){this.ylinetooltiptextcolor=val;if(val){if(this._ylinetooltiptextcolor==null||this._ylinetooltiptextcolor.value!=val){var ylinetooltiptextcolor=nexacro.ColorObject(val);this._ylinetooltiptextcolor=ylinetooltiptextcolor;this.on_apply_ylinetooltiptextcolor(ylinetooltiptextcolor);}}else{if(this._ylinetooltiptextcolor){this._ylinetooltiptextcolor=null;this.on_apply_ylinetooltiptextcolor(null);}}};_pChartCrosshair.on_apply_ylinetooltiptextcolor=function(ylinetooltipcolor){this._createYlineText();this._ylinetext.set_color(ylinetooltipcolor?ylinetooltipcolor.value:"#000000");};_pChartCrosshair.destroy=function(){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;this._crosshairX=null;this._crosshairY=null;this._xlinerect=null;this._xlinetext=null;this._ylinerect=null;this._ylinetext=null;this._xlinestyle=null;this._ylinestyle=null;this._xlineopacity=null;this._ylineopacity=null;this._xlinetooltipfillstyle=null;this._ylinetooltipfillstyle=null;this._xlinetooltipopacity=null;this._ylinetooltipopacity=null;this._xlinetooltiplinestyle=null;this._ylinetooltiplinestyle=null;this._xlinetooltipborderradius=null;this._ylinetooltipborderradius=null;this._xlinetooltiptextcolor=null;this._ylinetooltiptextcolor=null;this._xlinetooltippadding=null;this._ylinetooltippadding=null;this._type=null;this._tooltiptype=null;this._show=false;if(this.parent){if(this.parent.crosshair){this.parent._deleteContentsProp("crosshair");this.parent.crosshair=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);};_pChartCrosshair._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartCrosshairGroup");this._graphicsControl.addChild(this._group);};_pChartCrosshair._createCrosshairX=function(){if(!this._crosshairX){this._crosshairX=new nexacro.ChartGraphicsLine();this._crosshairX.set_id("ChartCrosshairX");this._group.addChild(this._crosshairX);this._crosshairX._crosshair=this;}};_pChartCrosshair._createCrosshairY=function(){if(!this._crosshairY){this._crosshairY=new nexacro.ChartGraphicsLine();this._crosshairY.set_id("ChartCrosshairY");this._group.addChild(this._crosshairY);this._crosshairY._crosshair=this;}};_pChartCrosshair._createXlineRect=function(){if(!this._xlinerect){this._xlinerect=new nexacro.ChartGraphicsRect();this._xlinerect.set_id("ChartCrosshairXRect");this._group.addChild(this._xlinerect);this._xlinerect._crosshair=this;}};_pChartCrosshair._createYlineRect=function(){if(!this._ylinerect){this._ylinerect=new nexacro.ChartGraphicsRect();this._ylinerect.set_id("ChartCrosshairYRect");this._group.addChild(this._ylinerect);this._ylinerect._crosshair=this;}};_pChartCrosshair._createXlineText=function(){if(!this._xlinetext){this._xlinetext=new nexacro.ChartGraphicsText();this._xlinetext.set_id("ChartCrosshairXText");this._xlinetext.set_verticalAlign("middle");this._xlinetext.set_textAlign("center");this._xlinetext.set_font("0pt");this._group.addChild(this._xlinetext);this._xlinetext._crosshair=this;}};_pChartCrosshair._createYlineText=function(){if(!this._ylinetext){this._ylinetext=new nexacro.ChartGraphicsText();this._ylinetext.set_id("ChartCrosshairYText");this._ylinetext.set_textAlign("center");this._ylinetext.set_verticalAlign("middle");this._ylinetext.set_font("0pt");this._group.addChild(this._ylinetext);this._ylinetext._crosshair=this;}};_pChartCrosshair._setLineText=function(axis,pos,lineRect,lineText){if(!axis){return;}var ticks=axis._ticks,size,sizeW=0,sizeH=0;if(ticks){var position=axis._location,wlinedatapadding=0,hlinedatapadding=0,label;if(position=="left"||position=="right"){if(this._xlinetooltippadding){wlinedatapadding=this._xlinetooltippadding.left+this._xlinetooltippadding.right;hlinedatapadding=this._xlinetooltippadding.top+this._xlinetooltippadding.bottom;}}else{if(this._ylinetooltippadding){wlinedatapadding=this._ylinetooltippadding.left+this._ylinetooltippadding.right;hlinedatapadding=this._ylinetooltippadding.top+this._ylinetooltippadding.bottom;}}if(axis._type=="categoryAxis"){var idx=nexacro.round(axis.c2p(pos));var tick=ticks[idx];if(tick){label=tick.label;}}else{label=nexacro.round(axis.c2p(pos));}lineText.set_text(label);lineText.set_font(axis.labeltextfont);size=lineText._getRect();sizeW=size.width;sizeH=size.height;lineRect.set_width(sizeW+wlinedatapadding);lineRect.set_height(sizeH+hlinedatapadding);}return [sizeW,sizeH];};_pChartCrosshair._calcCrosshair=function(_gridRectBound){var preCanvasX=null;var preCanvasY=null;if(this._crosshairX&&this._type.indexOf("x")!= -1&&this._crosshairX.preCanvasX&&this._crosshairX.preCanvasY){preCanvasX=this._crosshairX.preCanvasX;preCanvasY=this._crosshairX.preCanvasY;this._crosshairX.preCanvasX=null;this._crosshairX.preCanvasY=null;}if(this._crosshairY&&this._type.indexOf("y")!= -1&&this._crosshairY.preCanvasX&&this._crosshairY.preCanvasY){preCanvasX=this._crosshairY.preCanvasX;preCanvasY=this._crosshairY.preCanvasY;this._crosshairY.preCanvasX=null;this._crosshairY.preCanvasY=null;}if(preCanvasX&&preCanvasY){if(preCanvasX<_gridRectBound.left){preCanvasX=_gridRectBound.left;}else if(preCanvasX>_gridRectBound.right){preCanvasX=_gridRectBound.right;}if(preCanvasY<_gridRectBound.top){preCanvasY=_gridRectBound.top;}else if(preCanvasY>_gridRectBound.bottom){preCanvasY=_gridRectBound.bottom;}this._showCrosshair(_gridRectBound,preCanvasX,preCanvasY);}};_pChartCrosshair._showCrosshair=function(_gridRectBound,canvasX,canvasY){var gridRectBound=_gridRectBound;if(!this._show){this.on_apply_xlinestyle(this._xlinestyle);this.on_apply_xlineopacity(this._xlineopacity);this.on_apply_ylinestyle(this._ylinestyle);this.on_apply_ylineopacity(this._ylineopacity);this.on_apply_xlinetooltipborderradius(this._xlinetooltipborderradius);this.on_apply_ylinetooltipborderradius(this._ylinetooltipborderradius);this.on_apply_xlinetooltipfillstyle(this._xlinetooltipfillstyle);this.on_apply_xlinetooltipopacity(this._xlinetooltipopacity);this.on_apply_ylinetooltipfillstyle(this._ylinetooltipfillstyle);this.on_apply_ylinetooltipopacity(this._ylinetooltipopacity);this.on_apply_xlinetooltiplinestyle(this._xlinetooltiplinestyle);this.on_apply_ylinetooltiplinestyle(this._ylinetooltiplinestyle);this.on_apply_xlinetooltiptextcolor(this._xlinetooltiptextcolor);this.on_apply_ylinetooltiptextcolor(this._ylinetooltiptextcolor);}var type=this._type,tooltiptype=this._tooltiptype,crosshairX=this._crosshairX,crosshairY=this._crosshairY,xlinerect=this._xlinerect,ylinerect=this._ylinerect,xlinetext=this._xlinetext,ylinetext=this._ylinetext,axis,size,sizeW=0,sizeH=0,position,rectX=0,rectY=0,textX=0,textY=0,xlinetooltipgap=this.xlinetooltipgap||0,ylinetooltipgap=this.ylinetooltipgap||0;var xlinetooltippaddingTop=0,xlinetooltippaddingLeft=0,xlinetooltippaddingRight=0,xlinetooltippaddingBottom=0,ylinetooltippaddingTop=0,ylinetooltippaddingLeft=0,ylinetooltippaddingRight=0,ylinetooltippaddingBottom=0;if(this._xlinetooltippadding){xlinetooltippaddingTop=this._xlinetooltippadding.top;xlinetooltippaddingLeft=this._xlinetooltippadding.left;xlinetooltippaddingRight=this._xlinetooltippadding.right;xlinetooltippaddingBottom=this._xlinetooltippadding.bottom;}if(this._ylinetooltippadding){ylinetooltippaddingTop=this._ylinetooltippadding.top;ylinetooltippaddingLeft=this._ylinetooltippadding.left;ylinetooltippaddingRight=this._ylinetooltippadding.right;ylinetooltippaddingBottom=this._ylinetooltippadding.bottom;}if(this.rotatecrosshairline){crosshairX=this._crosshairY;crosshairY=this._crosshairX;xlinerect=this._ylinerect;ylinerect=this._xlinerect;xlinetext=this._ylinetext;ylinetext=this._xlinetext;if(this._xlinetooltippadding){ylinetooltippaddingTop=this._xlinetooltippadding.top;ylinetooltippaddingLeft=this._xlinetooltippadding.left;ylinetooltippaddingRight=this._xlinetooltippadding.right;ylinetooltippaddingBottom=this._xlinetooltippadding.bottom;}if(this._ylinetooltippadding){xlinetooltippaddingTop=this._ylinetooltippadding.top;xlinetooltippaddingLeft=this._ylinetooltippadding.left;xlinetooltippaddingRight=this._ylinetooltippadding.right;xlinetooltippaddingBottom=this._ylinetooltippadding.bottom;}}if(!this.visible){return false;}if(canvasX<gridRectBound.left||canvasX>gridRectBound.right){return false;}if(canvasY<gridRectBound.top||canvasY>gridRectBound.bottom){return false;}var axisLine;var axislinestyle;var axislinewidth=0;var tickgap=0;var axisrect;if(xlinetext&&xlinerect&&tooltiptype.indexOf("x")!= -1){var yaxes=this.parent._yaxes;axis=yaxes[0];if(!axis){return false;}axisLine=axis._axisLine;axislinestyle=axis._axislinestyle;axislinewidth=0;if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;}var xlinetooltiplinestyle=this._xlinetooltiplinestyle;var xlinetooltiplinewidth=0;xlinetooltiplinewidth=xlinetooltiplinestyle?xlinetooltiplinestyle._getBorderLeftWidth():0;xlinetooltiplinewidth*=0.5;tickgap=axis._tickendspace;if(axis._type=="categoryAxis"){tickgap+=axis._tickendgap;}size=this._setLineText(axis,canvasY-gridRectBound.top-tickgap,xlinerect,xlinetext);sizeW=size[0];sizeH=size[1];if(sizeW>0&&sizeH>0&&xlinetext.text!=""){position=axis._location;axisrect=axis._axisRect._bounds;if(position=="right"){textX=axisrect.left+(xlinetooltippaddingLeft)+xlinetooltipgap+axislinewidth+xlinetooltiplinewidth;rectX=axisrect.left+xlinetooltipgap+axislinewidth+xlinetooltiplinewidth;}else{textX=axisrect.right-sizeW-(xlinetooltippaddingRight)-xlinetooltipgap-axislinewidth-xlinetooltiplinewidth;rectX=axisrect.right-sizeW-(xlinetooltippaddingLeft+xlinetooltippaddingRight)-xlinetooltipgap-axislinewidth-xlinetooltiplinewidth;}rectY=canvasY-(sizeH+xlinetooltippaddingTop+xlinetooltippaddingBottom)*0.5;textY=rectY+(sizeH*0.5)+xlinetooltippaddingTop;xlinetext.set_x(textX+(sizeW*0.5));xlinetext.set_y(textY);xlinetext.set_visible(true);xlinerect.set_x(rectX);xlinerect.set_y(rectY);xlinerect.set_visible(true);}else{xlinetext.set_visible(false);xlinerect.set_visible(false);}xlinetext.preCanvasX=canvasX;xlinetext.preCanvasY=canvasY;}if(crosshairX&&type.indexOf("x")!= -1&&(!crosshairX.preCanvasY||crosshairX.preCanvasY!=canvasY)){crosshairX.set_x1(gridRectBound.left);crosshairX.set_y1(canvasY);crosshairX.set_x2(gridRectBound.right);crosshairX.set_y2(canvasY);crosshairX.set_visible(true);crosshairX.preCanvasY=canvasY;crosshairX.preCanvasX=canvasX;}if(ylinetext&&ylinetext&&tooltiptype.indexOf("y")!= -1){var xaxes=this.parent._xaxes;axis=xaxes[0];if(!axis){return false;}axisLine=axis._axisLine;axislinestyle=axis._axislinestyle;axislinewidth=0;if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;}var ylinetooltiplinestyle=this._ylinetooltiplinestyle;var ylinetooltiplinewidth=0;ylinetooltiplinewidth=ylinetooltiplinestyle?ylinetooltiplinestyle._getBorderLeftWidth():0;ylinetooltiplinewidth*=0.5;tickgap=0;if(axis._type=="categoryAxis"){tickgap+=axis._tickstartgap;}size=this._setLineText(axis,canvasX-gridRectBound.left-tickgap,ylinerect,ylinetext);sizeW=size[0];sizeH=size[1];axisrect=axis._axisRect._bounds;if(sizeW>0&&sizeH>0&&ylinetext.text!=""){position=axis._location;rectX=canvasX-((sizeW+ylinetooltippaddingLeft+ylinetooltippaddingRight)*0.5);textX=rectX+(sizeW*0.5)+xlinetooltippaddingLeft;if(position=="top"){rectY=axisrect.bottom-sizeH-(ylinetooltippaddingTop+ylinetooltippaddingBottom)-ylinetooltipgap-axislinewidth-ylinetooltiplinewidth;textY=rectY+(sizeH*0.5)+ylinetooltippaddingTop;}else{rectY=axisrect.top+ylinetooltipgap+axislinewidth+ylinetooltiplinewidth;textY=rectY+(sizeH*0.5)+ylinetooltippaddingTop;}ylinetext.set_x(textX);ylinetext.set_y(textY);ylinetext.set_visible(true);ylinerect.set_x(rectX);ylinerect.set_y(rectY);ylinerect.set_visible(true);}else{ylinetext.set_visible(false);ylinerect.set_visible(false);}ylinetext.preCanvasX=canvasX;ylinetext.preCanvasY=canvasY;}if(crosshairY&&type.indexOf("y")!= -1&&(!crosshairY.preCanvasX||crosshairY.preCanvasX!=canvasX)){crosshairY.set_x1(canvasX);crosshairY.set_y1(gridRectBound.top);crosshairY.set_x2(canvasX);crosshairY.set_y2(gridRectBound.bottom);crosshairY.set_visible(true);crosshairY.preCanvasX=canvasX;crosshairY.preCanvasY=canvasY;}this.parent._graphicsControl.draw();this._show=true;};_pChartCrosshair._hideCrosshair=function(){if(!this._show){return;}if(this._crosshairX){this._crosshairX.set_visible(false);}if(this._crosshairY){this._crosshairY.set_visible(false);}if(this._xlinerect){this._xlinerect.set_visible(false);}if(this._ylinerect){this._ylinerect.set_visible(false);}if(this._xlinetext){this._xlinetext.set_visible(false);}if(this._ylinetext){this._ylinetext.set_visible(false);}this._show=false;this.parent._graphicsControl.draw();};_pChartCrosshair._moveCrosshair=function(gridRectBound,canvasX,canvasY){};_pChartCrosshair._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.crosshair){contents.crosshair[nm]=newVal;}};}if(!nexacro._SeriesBase){nexacro._SeriesBase=function(id,parent,graphicsControl){this.id=id||"";this.parent=parent||null;this._graphicsControl=graphicsControl||this.parent._graphicsControl;this._data=[];this._datapoints={points:[]};this._selectedItem=[];this.itemtext=new nexacro.BindableValue("");this.tooltiptext=new nexacro.BindableValue(undefined);this.selectcolumn=new nexacro.BindableValue("");this.valuecolumn=new nexacro.BindableValue("");this._chart_aniframe_obj={requestaniframe:null,enableanimation:false,starttime:null,duration:1000,isloadanimation:false,drawflag:false,_timeseginfo:{frame_seg:0},_drawinfo:{percent:null,value:null,angle:null,isnegativecalc:false},animationeffects:{framelate:24,direction:"auto",itemoffset:0,easing:"linear",effect:"default",styleeffect:{}}};};var _pSeriesBase=nexacro._createPrototype(nexacro.Object,nexacro._SeriesBase);nexacro._SeriesBase.prototype=_pSeriesBase;_pSeriesBase._type_name="SeriesBase";_pSeriesBase.itemtext="";_pSeriesBase.itemtextcolor="";_pSeriesBase.itemtextfont="";_pSeriesBase.itemtextmask="";_pSeriesBase.itemtexttype="normal";_pSeriesBase.itemtextvisible=false;_pSeriesBase.itemtextwidth=undefined;_pSeriesBase.locale="";_pSeriesBase.selecttype="unselect";_pSeriesBase.titletext="";_pSeriesBase.tooltiptext=undefined;_pSeriesBase.tooltiptextmask="";_pSeriesBase.tooltiptexttype="normal";_pSeriesBase._seriesGroup=null;_pSeriesBase._color=null;_pSeriesBase._itemCnt=0;_pSeriesBase._redrawSeries=false;_pSeriesBase._itemtext=null;_pSeriesBase._itemtextObj=null;_pSeriesBase._itemtextvisible=false;_pSeriesBase._itemtextfont=null;_pSeriesBase._itemtextcolor=null;_pSeriesBase._invalidvaluecolumn=false;_pSeriesBase._invalidselectcolumn=false;_pSeriesBase._itemtextlist=[];_pSeriesBase._chart_aniframe_obj=null;_pSeriesBase._pointshapeObj={square:function(x,y,radius,point){var size=radius*Math.sqrt(Math.PI)/2;if(point){point.set_x(x-size);point.set_y(y-size);point.set_width(size+size);point.set_height(size+size);return point;}else{var rect=new nexacro.ChartGraphicsRect(x-size,y-size,size+size,size+size);return rect;}},diamond:function(x,y,radius,point){var size=radius*Math.sqrt(Math.PI/2);if(point){point.removeSegments(0);point.moveTo(x-size,y);point.lineTo(x,y-size);point.lineTo(x+size,y);point.lineTo(x,y+size);point.closePath();return point;}else{var path=new nexacro.ChartGraphicsPath();path.moveTo(x-size,y);path.lineTo(x,y-size);path.lineTo(x+size,y);path.lineTo(x,y+size);path.closePath();return path;}},triangle:function(x,y,radius,point){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);if(point){point.removeSegments(0);point.moveTo(x-size/2,y+height/2);point.lineTo(x+size/2,y+height/2);point.lineTo(x,y-height/2);point.closePath();return point;}else{var path=new nexacro.ChartGraphicsPath();path.moveTo(x-size/2,y+height/2);path.lineTo(x+size/2,y+height/2);path.lineTo(x,y-height/2);path.closePath();return path;}},cross:function(x,y,radius,point){var size=radius*Math.sqrt(Math.PI)/2;if(point){point.clear();point.moveTo(x-size,y-size);point.lineTo(x+size,y+size);point.moveTo(x-size,y+size);point.lineTo(x+size,y-size);return point;}else{var paths=new nexacro.ChartGraphicsPaths();paths.moveTo(x-size,y-size);paths.lineTo(x+size,y+size);paths.moveTo(x-size,y+size);paths.lineTo(x+size,y-size);return paths;}}};_pSeriesBase.set_locale=function(val){if(val!=this.locale){this._changeContentsProperty("locale",val,this.locale);this.locale=val;this._locale=val;this.on_apply_locale();}this._chart._draw();};_pSeriesBase.on_apply_locale=function(){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){var itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,locale=this.locale;this._itemtext=nexacro._getChartDisplaytText(i,itemtext,locale,itemtexttype,itemtextmask,chart,this);if(this._itemtext){item.set_text(this._itemtext);}}}this._chart._changedData=true;}};_pSeriesBase.set_valuecolumn=function(v){if(this.valuecolumn._value!=v){this._changeContentsProperty("valuecolumn",v,this.valuecolumn);this.valuecolumn._set(v);this.on_apply_valuecolumn();}if(this._chart._changedData==true){this._chart._reset=true;this._chart._draw();}else{this._chart._draw();}};_pSeriesBase.on_apply_valuecolumn=function(){var valuecolumn=this.valuecolumn;var bindtype=valuecolumn._bindtype;if(bindtype==0){this._invalidvaluecolumn=true;}else{valuecolumn=this._getBindableValue("valuecolumn");var binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(valuecolumn);if(!coltype){this._invalidvaluecolumn=true;}else{this._invalidvaluecolumn=false;}}}this._chart._changedData=true;};_pSeriesBase.set_titletext=function(val){var titletext=nexacro._toString(val);if(titletext!=this.titletext){this._changeContentsProperty("titletext",val,this.titletext);this.titletext=titletext;this.on_apply_titletext(titletext);}this._chart._draw();};_pSeriesBase.on_apply_titletext=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};_pSeriesBase.set_tooltiptext=function(v){if(this.tooltiptext!=v){this._changeContentsProperty("tooltiptext",v,this.tooltiptext);this.tooltiptext._set(v);}this._chart._draw();};_pSeriesBase.set_tooltiptexttype=function(v){if(this.tooltiptexttype!=v){this._changeContentsProperty("tooltiptexttype",v,this.tooltiptexttype);this.tooltiptexttype=v;}this._chart._draw();};_pSeriesBase.set_tooltiptextmask=function(val){var tooltiptextmask=nexacro._toString(val);if(tooltiptextmask!=this.tooltiptextmask){this._changeContentsProperty("tooltiptextmask",val,this.tooltiptextmask);this.tooltiptextmask=tooltiptextmask;}this._chart._draw();};_pSeriesBase.set_itemtextvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.itemtextvisible!=val){this._changeContentsProperty("itemtextvisible",val,this.itemtextvisible);this._itemtextvisible=this.itemtextvisible;this.itemtextvisible=val;this.on_apply_itemtextvisible(val);}this._chart._draw();};_pSeriesBase.on_apply_itemtextvisible=function(itemtextvisible){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_visible(itemtextvisible);}else{if(itemtextvisible){this._chart._rearrange=true;this._chart._recreate=true;}}}}};_pSeriesBase.set_itemtext=function(v){if(this.itemtext!=v){this._changeContentsProperty("itemtext",v,this.itemtext);this.itemtext._set(v);this.on_apply_itemtext();}this._chart._draw();};_pSeriesBase.on_apply_itemtext=function(){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){var itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,locale=this.locale;this._itemtext=nexacro._getChartDisplaytText(i,itemtext,locale,itemtexttype,itemtextmask,chart,this);if(!nexacro._isNull(this._itemtext)){item.set_text(this._itemtext);}}}}};_pSeriesBase.set_itemtexttype=function(v){if(this.itemtexttype!=v){this._changeContentsProperty("itemtexttype",v,this.itemtexttype);this.itemtexttype=v;this.on_apply_itemtexttype();}this._chart._draw();};_pSeriesBase.on_apply_itemtexttype=function(){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){var itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,locale=this.locale;this._itemtext=nexacro._getChartDisplaytText(i,itemtext,locale,itemtexttype,itemtextmask,chart,this);if(!nexacro._isNull(this._itemtext)){item.set_text(this._itemtext);}}}this._chart._rearrange=true;this._chart._recreate=true;}};_pSeriesBase.set_itemtextmask=function(val){var itemtextmask=nexacro._toString(val);if(itemtextmask!=this.itemtextmask){this._changeContentsProperty("itemtextmask",val,this.itemtextmask);this.itemtextmask=itemtextmask;this.on_apply_itemtextmask(itemtextmask);}this._chart._draw();};_pSeriesBase.on_apply_itemtextmask=function(){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){var itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,locale=this.locale;this._itemtext=nexacro._getChartDisplaytText(i,itemtext,locale,itemtexttype,itemtextmask,chart,this);if(!nexacro._isNull(this._itemtext)){item.set_text(this._itemtext);}}}this._chart._rearrange=true;this._chart._recreate=true;}};_pSeriesBase.set_itemtextwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.itemtextwidth!==val){this._changeContentsProperty("itemtextwidth",val,this.itemtextwidth);this.itemtextwidth=val;this.on_apply_itemtextwidth(val);}this._chart._draw();};_pSeriesBase.on_apply_itemtextwidth=function(itemtextwidth){this._chart._changedData=true;};_pSeriesBase.set_itemtextfont=function(val){this.itemtextfont=val;if(val){if(this._itemtextfont==null||this._itemtextfont.value!=val){var oldValue;if(this._itemtextfont){oldValue=this._itemtextfont.value;}this._changeContentsProperty("itemtextfont",val,oldValue);var itemtextfont=nexacro.FontObject(val);this._itemtextfont=itemtextfont;this.on_apply_itemtextfont(itemtextfont);}}else{if(this._itemtextfont){this._itemtextfont=null;this.on_apply_itemtextfont(null);}}this._chart._draw();};_pSeriesBase.on_apply_itemtextfont=function(itemtextfont){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_font(itemtextfont?itemtextfont.value||itemtextfont:"12pt Verdana");}}}};_pSeriesBase.set_itemtextcolor=function(val){this.itemtextcolor=val;if(val){if(this._itemtextcolor==null||this._itemtextcolor.value!=val){var oldValue;if(this._itemtextcolor){oldValue=this._itemtextcolor.value;}this._changeContentsProperty("itemtextcolor",val,oldValue);var itemtextcolor=nexacro.ColorObject(val);this._itemtextcolor=itemtextcolor;this.on_apply_itemtextcolor(itemtextcolor);}}else{if(this._itemtextcolor){this._itemtextcolor=null;this.on_apply_itemtextcolor(null);}}this._chart._draw();};_pSeriesBase.on_apply_itemtextcolor=function(itemtextcolor){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_color(itemtextcolor?itemtextcolor.value||itemtextcolor:"#000000");}}}};_pSeriesBase.set_selecttype=function(val){var selecttype_enum=["unselect","select","bind"];if(selecttype_enum.indexOf(val)== -1){return;}if(this.selecttype!=val){this._changeContentsProperty("selecttype",val,this.selecttype);this.selecttype=val;this.on_apply_selecttype(val);}this._chart._draw();};_pSeriesBase.on_apply_selecttype=function(selecttype){if(selecttype=="select"||selecttype=="unselect"){var selectcolumn=this._getBindableValue("selectcolumn");var length=this._data.length;for(var i=0;i<length;i++ ){this._selectItem(i,selecttype,selectcolumn,this._selectedItem,this);}}else{this._chart._changedData=true;this._chart._changedColorset=true;}this._chart._rearrange=true;this._chart._recreate=true;};_pSeriesBase.set_selectcolumn=function(v){if(this.selectcolumn._value!=v){this._changeContentsProperty("selectcolumn",v,this.selectcolumn);this.selectcolumn._set(v);this.on_apply_selectcolumn();}this._chart._draw();};_pSeriesBase.on_apply_selectcolumn=function(){var selecttype=this.selecttype;var selectcolumn;var length=0;var binddataset;if(selecttype=="select"||selecttype=="unselect"){selectcolumn=this._getBindableValue("selectcolumn");length=this._data.length;for(var i=0;i<length;i++ ){this._selectItem(i,selecttype,selectcolumn,this._selectedItem,this);}}else{selectcolumn=this.selectcolumn;var bindtype=selectcolumn._bindtype;if(bindtype==0){this._invalidselectcolumn=true;}else{selectcolumn=this._getBindableValue("selectcolumn");binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(selectcolumn);if(!coltype){this._invalidselectcolumn=true;}else{this._invalidselectcolumn=false;}}}}this._chart._changedData=true;this._chart._changedColorset=true;};_pSeriesBase._spliterColor=function(v,bObject){var i;if(v&&(typeof (v)=="string")){var val=v.trim();if(val){var length=val.length;var fillstr="";var openbrackets=false;for(i=0;i<length;i++ ){var sp=val[i];if(sp=="("){openbrackets=true;}if(sp==","){if(openbrackets){fillstr+=sp;}else{fillstr+="/";}}else{if(sp==")"){if(i==length-1){fillstr+=sp;}else{fillstr+=sp+"/";openbrackets=false;}}else{fillstr+=sp;}}}var fillarr=[];var cnt=0;var str=fillstr.split("/");for(i=0;i<str.length;i++ ){if(str[i]==""){continue;}else{if(bObject){if(str[i] instanceof nexacro._BackgroundObject){fillarr[cnt]=str[i];}else{fillarr[cnt]=nexacro.BackgroundObject(str[i],this);}}else{fillarr[cnt]=str[i];}cnt++ ;}}return fillarr;}}return v;};_pSeriesBase._shadeColor=function(hueIn,pcIn){if(hueIn=="transparent"||hueIn==""){return hueIn;}if(nexacro._xreNamedColorList[hueIn]){hueIn=nexacro._xreNamedColorList[hueIn];}if(hueIn.substring(0,1)!="#"){return hueIn;}if(hueIn.length<7){return hueIn;}function truncate(valIn){if(valIn>255){valIn=255;}else if(valIn<0){valIn=0;}return valIn;}var red=parseInt(hueIn.substring(1,3),16);var green=parseInt(hueIn.substring(3,5),16);var blue=parseInt(hueIn.substring(5,7),16);var pc=parseInt(pcIn,10);var max=0;var dif=0;max=red;if(pc<0){if(green<max){max=green;}if(blue<max){max=blue;}dif=parseInt(((Math.abs(pc)/100)*(255-max)),10);return "#"+((truncate(red+dif)).toString(16)).padLeft(2,'0')+((truncate(green+dif)).toString(16)).padLeft(2,'0')+((truncate(blue+dif)).toString(16)).padLeft(2,'0');}else{if(green>max){max=green;}if(blue>max){max=blue;}dif=parseInt(((pc/100)*max),10);return "#"+((truncate(red-dif)).toString(16)).padLeft(2,'0')+((truncate(green-dif)).toString(16)).padLeft(2,'0')+((truncate(blue-dif)).toString(16)).padLeft(2,'0');}};_pSeriesBase.getSelectItem=function(index){var selectedItem=this._selectedItem,length=this._selectedItem.length,bSelect;if(length<=0){return;}bSelect=selectedItem[index];return bSelect;};_pSeriesBase.setSelectItem=function(index,bSelect_){var re=false,itemcnt=this._itemCnt-1;if(nexacro._ChartGraphicsLib.isEmpty(index)||index< -1||index>itemcnt||nexacro._ChartGraphicsLib.isEmpty(bSelect_)){return false;}var bSelect=nexacro._toBoolean(bSelect_);if(index!= -1){re=this._selectItem(index,"bind",bSelect,this._selectedItem,this);}else{var length=this._data.length;for(var i=0;i<length;i++ ){if(bSelect){this._selectedItem[i]=true;}else{this._selectedItem[i]=false;}re=true;}}this._chart._rearrange=true;this._chart._recreate=true;this._chart._draw();return re;};_pSeriesBase.destroy=function(){this._destroy(true);};_pSeriesBase._destroy=function(parent_clear){if(parent_clear){if(this._chart){if(this._chart.seriesset){var seriesId=this.id;var index= -1;nexacro._ChartGraphicsLibArray.forEach(this._chart.seriesset,function(series,i){if(series){if(series.id==seriesId){series._chart._deleteContentsProp("seriesset",i);index=i;}}});nexacro._ChartGraphicsLibArray.removeAt(this._chart.seriesset,index);}}}if(this._chart_aniframe_obj){if(this._chart_aniframe_obj.requestaniframe){this._chart_aniframe_obj.requestaniframe.destroy();}this._chart_aniframe_obj=null;}this.id=null;this.locale=null;this.valuecolumn=null;this.titletext=null;this.tooltiptext=null;this.itemtextvisible=null;this.itemtext=null;this.itemtexttype=null;this.itemtextmask=null;this.tooltiptexttype=null;this.tooltiptextmask=null;this.itemtextwidth=null;this.itemtextfont=null;this.itemtextcolor=null;this.selecttype=null;this.selectcolumn=null;this._color=null;this._itemCnt=null;this._data=null;this._redrawSeries=null;this._datapoints=null;this._selectedItem=null;this._dataMap=null;this._itemtext=null;this._itemtextObj=null;this._itemtextvisible=null;this.parent=null;this._graphicsControl=null;this._chart=null;nexacro.Object.prototype.destroy.call(this);};_pSeriesBase._createSeriesItemText=function(item){var index=item.index,itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,itemtextfont=this.itemtextfont,itemtextcolor=this.itemtextcolor,itemtextwidth=this.itemtextwidth,locale=this.locale,chart=this._chart,charttype=chart._type_name,text,itemtextvalue;itemtextvalue=itemtext._value;if(itemtext&&itemtextvalue==""){itemtext=this.valuecolumn;}if(itemtext){text=nexacro._getChartDisplaytText(index,itemtext,locale,itemtexttype,itemtextmask,chart,this,this);}if(!nexacro._isNull(text)){this._itemtext=text;this._itemtextObj=new nexacro.ChartGraphicsText(0,0);var itemId=this._configIndex+" SeriesItemText_"+index;this._itemtextObj.set_id(itemId);this._itemtextObj.set_text(this._itemtext);if(charttype=="RadarChart"||charttype=="RoseChart"){this._itemtextObj.set_font(itemtextfont?itemtextfont.value||itemtextfont:"8pt Verdana");}else{this._itemtextObj.set_font(itemtextfont?itemtextfont.value||itemtextfont:"12pt Verdana");}this._itemtextObj.set_color(itemtextcolor?itemtextcolor.value||itemtextcolor:"#000000");this._itemtextObj.index=item.index;this._itemtextObj.value=item.value;if(itemtextwidth>0){this._itemtextObj.set_width(itemtextwidth);this._itemtextObj.set_wordWrap(true);}else{this._itemtextObj.set_wordWrap(false);}this._itemtextlist.push(itemId);return this._itemtextObj;}};_pSeriesBase._setData=function(){var chart=this._chart;if(chart){var obj;var data=[];var pThis=this;var selectedindex=0;var invaliddata=false;var charttype=chart._type_name;var selecttype=this.selecttype;var categorycolumn=chart._getBindableValue("categorycolumn");var valuecolumn=this._getBindableValue("valuecolumn");var value2column=this._getBindableValue("value2column");var value3column=this._getBindableValue("value3column");var selectcolumn=this._getBindableValue("selectcolumn");var rotateaxis=chart.rotateaxis;var binddataset=chart._binddataset;var coltype;var invalidcategorycolumn=chart._invalidcategorycolumn;var invalidvaluecolumn=this._invalidvaluecolumn;var invalidselectcolumn=this._invalidselectcolumn;var invalidvalue2column=this._invalidvalue2column;var invalidvalue3column=this._invalidvalue3column;if(binddataset){if(charttype=="RoseChart"||charttype=="RadarChart"||charttype=="BasicChart"||charttype=="PieChart"||charttype=="GaugeChart"||charttype=="FloatChart"){if(!categorycolumn){invaliddata=true;}else{coltype=binddataset._getColumnType(categorycolumn);if(!coltype||invalidcategorycolumn){invaliddata=true;}}}if(valuecolumn){coltype=binddataset._getColumnType(valuecolumn);if(!coltype||invalidvaluecolumn){invaliddata=true;}}if(value2column){coltype=binddataset._getColumnType(value2column);if(!coltype||invalidvalue2column){invaliddata=true;}}if(value3column){coltype=binddataset._getColumnType(value3column);if(!coltype||invalidvalue3column){invaliddata=true;}}if(selectcolumn){coltype=binddataset._getColumnType(selectcolumn);if(!coltype||invalidselectcolumn){selectcolumn=null;}}if(invaliddata){this._data=[];this._chart._changedData=true;return false;}}var pyramidindex=0;var dataMap=chart._dataMap;if(dataMap){if(valuecolumn&&!value2column&&!value3column&&charttype!="FloatChart"){dataMap.forEach(function(key){if(nexacro._isString(key)){obj=dataMap.getByKey(key);if(obj["key"]){var categorydata=obj[categorycolumn];if(typeof categorydata=="object"&&categorydata instanceof nexacro.Date){if(chart.categoryaxis&&chart.categoryaxis.axistype=="datetime"){categorydata=categorydata.date.getTime();if(!chart._isTimeData){chart._isTimeData=true;chart.categoryaxis.on_apply_axistype();}}}if(rotateaxis&&!chart._isCompositeSeries){data.push([obj[valuecolumn],categorydata]);}else{if(charttype=="PyramidChart"){data.push([categorydata,obj[valuecolumn],pyramidindex]);pyramidindex++ ;}else{data.push([categorydata,obj[valuecolumn]]);}}}if(selecttype){pThis._selectItem(selectedindex,selecttype,selectcolumn,pThis._selectedItem,obj);}selectedindex++ ;}},this);}if((valuecolumn&&value2column)||(charttype=="FloatChart"&&valuecolumn&&chart.waterfall)){var waterfallSum=0;var waterfallIndex;var waterfallPreData;dataMap.forEach(function(key){if(nexacro._isString(key)){obj=dataMap.getByKey(key);if(obj){var xdata=obj[valuecolumn];var ydata=obj[value2column];var valuedata;if(value3column){valuedata=obj[value3column];}if(valuedata){data.push([xdata,ydata,valuedata]);}else{if(charttype=="FloatChart"){var categorydata=obj[categorycolumn];if(typeof categorydata=="object"&&categorydata instanceof nexacro.Date){if(chart.categoryaxis&&chart.categoryaxis.axistype=="datetime"){categorydata=categorydata.date.getTime();if(!chart._isTimeData){chart._isTimeData=true;chart.categoryaxis.on_apply_axistype();}}}if(rotateaxis){if(chart.waterfall){waterfallSum+=xdata;if(waterfallPreData){data.push([xdata+waterfallPreData[0],categorydata,waterfallPreData[0]]);}else{data.push([xdata,categorydata,0]);}}else{data.push([xdata,categorydata,ydata]);}}else{if(chart.waterfall){waterfallSum+=xdata;if(waterfallPreData){data.push([categorydata,xdata+waterfallPreData[1],waterfallPreData[1]]);}else{data.push([categorydata,xdata,0]);}}else{data.push([categorydata,xdata,ydata]);}}waterfallPreData=data[data.length-1];}else{data.push([xdata,ydata]);}}if(selecttype){pThis._selectItem(selectedindex,selecttype,selectcolumn,pThis._selectedItem,obj);}}selectedindex++ ;}},this);}}if(charttype=="FloatChart"&&chart.waterfall&&data.length>0){if(rotateaxis&&data.length){data.push([waterfallSum,chart.waterfallsumtext,0]);}else{data.push([chart.waterfallsumtext,waterfallSum,0]);}}if(charttype=="PyramidChart"){function sortAFunction(a,b){return a[1].valueOf()-b[1].valueOf();}function sortDFunction(a,b){return b[1].valueOf()-a[1].valueOf();}if(this._chart.invertchart===true){if(this._chart.graphtype=="pyramid"){data.sort(sortDFunction);}else{data.sort(sortAFunction);}}else{if(this._chart.graphtype=="pyramid"){data.sort(sortAFunction);}else{data.sort(sortDFunction);}}}this._data=data;this._chart._dataMap=dataMap;}};_pSeriesBase._setDefault=function(color,highlightcolor,selectcolor){if(color){this._chart._drawing=true;this._setColor(color);this._chart._drawing=false;}if(highlightcolor){this._highlightcolor=highlightcolor;}if(selectcolor){this._selectcolor=selectcolor;}};_pSeriesBase._selectItem=function(index,selectType,selectColumn,selectedItem,obj){var re=true;if(nexacro._ChartGraphicsLib.isEmpty(index)){return false;}if(selectType=="unselect"){selectedItem[index]=false;}else if(selectType=="select"){selectedItem[index]=true;}else{if(nexacro._ChartGraphicsLib.isEmpty(selectColumn)||nexacro._ChartGraphicsLib.isEmpty(obj)){re=false;}if(!nexacro._ChartGraphicsLib.isBoolean(selectColumn)){selectedItem[index]=nexacro._toBoolean(obj[selectColumn]);}else{this._selectedItem[index]=selectColumn;}}return re;};_pSeriesBase._changeContentsProperty=function(nm,newVal,oldVal){var contents=this._chart.contents,idx=this._configIndex;if(contents&&contents.seriesset[idx]){contents.seriesset[idx][nm]=newVal;}};_pSeriesBase._getBindableValue=function(prop){var val;if(prop){val=this[prop];if(val){var type=typeof val;if(!(type=="number"||type=="string")){if(val._bindtype==1){return val._bindexpr;}else{return val._value;}}}}return val;};_pSeriesBase._draw=function(redraw){if(this._chart_aniframe_obj){var effect=this._chart_aniframe_obj;if(effect&&effect.enableanimation==true){if(!effect.requestaniframe){var pThis=this;effect.requestaniframe=new nexacro.AnimationFrame(this._chart,function(){pThis._draw_animation_series_callback();});}}}};_pSeriesBase._draw_animation_series_callback=function(){var chart=this._chart;var effect=this._chart_aniframe_obj;var seriesset=chart.seriesset;var serieslength=seriesset?seriesset.length:0;var graphicsdraw=0;if(effect){effect.isloadanimation=true;}var curtimestamp= +new Date();var time=curtimestamp-effect.starttime;var frame_interval=1000/effect.animationeffects.framelate;var seg=Math.floor((time)/frame_interval);var bdraw=false;if(time>=effect.duration){effect._drawinfo.percent=100;this._drawnow();this._end_animation_series_callback();bdraw=true;}else{if(seg>effect._timeseginfo.frame_seg){effect._timeseginfo.frame_seg=seg;effect._drawinfo.percent=seg/(effect.duration/frame_interval)*100;bdraw=true;}if(effect.isloadanimation){this._start_animate();}}if(bdraw){effect.drawflag=true;}var i;var series;for(i=0;i<serieslength;i++ ){series=seriesset[i];effect=series._chart_aniframe_obj;if(effect.drawflag==true){graphicsdraw++ ;}}if(graphicsdraw==serieslength){for(i=0;i<serieslength;i++ ){series=seriesset[i];effect=series._chart_aniframe_obj;effect.drawflag=false;if(effect.isloadanimation){series._drawnow();}}chart._graphicsControl.draw();}};_pSeriesBase._end_animation_series_callback=function(){var effect=this._chart_aniframe_obj;var chart=this._chart;var seriesset=chart.seriesset;var serieslength=seriesset?seriesset.length:0;var endanimation=0;var befo=chart._isanimationloading;if(effect){this._pause_animate();}this._drawnow();for(var i=0;i<serieslength;i++ ){var series=seriesset[i];effect=series._chart_aniframe_obj;if(!effect.isloadanimation){endanimation++ ;}}if(endanimation==serieslength){chart._isanimationloading=false;if(befo!=chart._isanimationloading){chart._graphicsControl.draw();chart._drawStackTotal();this._chart._drawEndEvent();}}};_pSeriesBase._getanimationdrawscale=function(obj,is_w,is_h,pos){var effect=this._chart_aniframe_obj;var scalew=1;var scaleh=1;if(effect&&effect._drawinfo.percent!=null){if(obj){var scale=effect._drawinfo.percent/100;obj._matrix.reset();if(is_w){scalew=scale;}if(is_h){scaleh=scale;}if(pos){var rect=obj._getRect();var pt,x=rect.x,y=rect.y,width=rect.width,height=rect.height;switch(pos){case "top":case "left":{pt=new nexacro.Point(x,y);}break;case "bottom":{pt=new nexacro.Point(x,y+height);}break;case "right":{pt=new nexacro.Point(x+width,y);}break;}obj.scale(scalew,scaleh,pt);}else{obj.scale(scalew,scaleh);}}}};_pSeriesBase._getanimationdrawclip=function(cx,cy,obj,pointshape){var effect=this._chart_aniframe_obj;var chart=this._chart;if(effect&&effect._drawinfo.percent!=null){var boardRect=chart._boardRect;var width=boardRect.width;var height=boardRect.height;var borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;width=width-borderWidth;height=height-borderHeight;if(obj){var percentwidth=(width/100)*effect._drawinfo.percent;obj._clipitems=[];if(pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){obj.setClipPath(new nexacro.Rect(0,0,percentwidth,height));}else{obj.setClipPath(new nexacro.Rect( -cx, -cy,percentwidth,height));}}}};_pSeriesBase._getanimationdrawvalue=function(value){var type_name=this._chart._type_name;var retval=value;var effect=this._chart_aniframe_obj;var rotateaxis=this._chart.rotateaxis;var gap=0,min=0,calcval=0,ps=0,i;if(!nexacro._ChartGraphicsLib.isArray(value)){switch(type_name){case "FloatChart":case "BasicChart":{if(effect&&effect._drawinfo.percent!=null){if(!rotateaxis){min=this._yaxis._min;}else{min=this._xaxis._min;}if(min<0){min=0;}if(value!=null){calcval=value-min;retval=((calcval/100)*effect._drawinfo.percent)+min;}}}break;case "PyramidChart":case "BubbleChart":{if(effect&&effect._drawinfo.percent!=null){if(value!=null){retval=((value/100)*effect._drawinfo.percent);}}}break;case "PieChart":{if(effect&&effect._drawinfo.percent!=null){var rEndAngle=this._endangle||6.28319;var rStartAngle=this._startangle||0;var prStartAngle;var halfangle=rEndAngle/2;if(halfangle+rStartAngle>6.28319){prStartAngle=(halfangle+rStartAngle)-6.28319;}else{prStartAngle=(halfangle+rStartAngle);}if(prStartAngle>rStartAngle){gap=prStartAngle-rStartAngle;prStartAngle=prStartAngle-(gap/100)*effect._drawinfo.percent;}else{gap=rStartAngle-prStartAngle;prStartAngle=prStartAngle+(gap/100)*effect._drawinfo.percent;}var retArr=[];retArr[0]=prStartAngle;retArr[1]=(rEndAngle/100)*effect._drawinfo.percent;return retArr;}}break;case "RoseChart":case "RadarChart":{}break;case "GaugeChart":{if(effect&&effect._drawinfo.percent!=null){min=this.axis._min;if(min<0){min=0;}if(value!=null){calcval=value-min;retval=((calcval/100)*effect._drawinfo.percent)+min;}}}break;default:break;}}else{switch(type_name){case "FloatChart":case "BasicChart":{if(effect&&effect._drawinfo.percent!=null){ps=this._datapoints.pointsize;for(i=0;i<retval.length;i+=ps){if(!rotateaxis){min=this._yaxis._min;if(retval[i+1]!=null){calcval=retval[i+1]-min;if(calcval<0){calcval=0;}retval[i+1]=min+((calcval/100)*effect._drawinfo.percent);}if(retval[i+2]!=null&&ps>=3){calcval=retval[i+2]-min;if(calcval<0){calcval=0;}retval[i+2]=min+((calcval/100)*effect._drawinfo.percent);}}else{min=this._xaxis._min;if(retval[i]!=null){calcval=retval[i]-min;if(calcval<0){calcval=0;}retval[i]=min+((calcval/100)*effect._drawinfo.percent);}if(retval[i+2]!=null&&ps>=3){calcval=retval[i+2]-min;if(calcval<0){calcval=0;}retval[i+2]=min+((calcval/100)*effect._drawinfo.percent);}}}}}break;case "BubbleChart":case "PieChart":{}break;case "RoseChart":case "RadarChart":{if(effect&&effect._drawinfo.percent!=null){min=this._chart.valueaxes[0]._min;ps=this._datapoints.pointsize;for(i=0;i<retval.length;i+=ps){calcval=retval[i+1]-min;if(calcval<0){calcval=0;}var ret=((calcval/100)*effect._drawinfo.percent);ret=ret+min;if(retval[i+1]!=null){retval[i+1]=ret;}}}}break;default:break;}}return retval;};_pSeriesBase._drawnow=function(){};_pSeriesBase._pause_animate=function(){var effect=this._chart_aniframe_obj;if(effect.requestaniframe){effect.requestaniframe.stop();}effect.isloadanimation=false;effect.enableanimation=false;effect._timeseginfo.frame_seg=0;effect._drawinfo.percent=null;effect._drawinfo.value=null;effect._drawinfo.angle=null;effect._drawinfo.isnegativecalc=false;};_pSeriesBase._start_animate=function(){var effect=this._chart_aniframe_obj;if(effect.requestaniframe){this._chart.on_apply_duration(this._chart.duration);effect.duration=this._chart._duration;effect.requestaniframe.start();}effect.isloadanimation=true;};}if(!nexacro.ChartBoardControl){nexacro.ChartBoardControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._createGroup();};var _pChartBoardControl=nexacro.ChartBoardControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartBoardControl);_pChartBoardControl._type_name="ChartBoardControl";_pChartBoardControl._group=null;_pChartBoardControl._gridRect=null;_pChartBoardControl._gridLeftLine=null;_pChartBoardControl._gridRightLine=null;_pChartBoardControl._gridTopLine=null;_pChartBoardControl._gridBottomLine=null;_pChartBoardControl.background="";_pChartBoardControl.border="";_pChartBoardControl.opacity=1;_pChartBoardControl.visible=true;_pChartBoardControl.text="";_pChartBoardControl.textcolor="";_pChartBoardControl.textfont="";_pChartBoardControl.textwidth=undefined;_pChartBoardControl._background=null;_pChartBoardControl._border=null;_pChartBoardControl._opacity=null;_pChartBoardControl._textfont=null;_pChartBoardControl._textcolor=null;_pChartBoardControl._gridCenterText=null;_pChartBoardControl.destroy=function(){this._group.destroy();this._group=null;this._gridRect=null;this._gridLeftLine=null;this._gridRightLine=null;this._gridTopLine=null;this._gridBottomLine=null;this._graphicsControl=null;this._background=null;this._border=null;this._opacity=null;if(this.parent){if(this.parent.board){this.parent._deleteContentsProp("board");this.parent.board=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartBoardControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartBoardControl.on_apply_visible=function(visible){if(visible){this.on_apply_border(this._border);this.on_apply_background(this._background);this.on_apply_text(this.text);}else{this.on_apply_border(null);this.on_apply_background(null);this.on_apply_text("");}};_pChartBoardControl.set_border=function(val){this.border=val;if(val){if(this._border==null||!this._border._single||this._border.value!=val){var oldValue;if(this._border){oldValue=this._border.value;}this._changeContentsProperty("border",val,oldValue);var border=nexacro.BorderObject(val);this._border=border;this.on_apply_border(border);}}else{if(this._border){this._border=null;this.on_apply_border(null);}}this.parent._draw();};_pChartBoardControl.on_apply_border=function(border){if(!this.visible){border=null;}this._gridLeftLine.set_strokepen(border?border.left.value:"");this._gridRightLine.set_strokepen(border?border.right.value:"");this._gridTopLine.set_strokepen(border?border.top.value:"");this._gridBottomLine.set_strokepen(border?border.bottom.value:"");this.parent._rearrange=true;};_pChartBoardControl.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var oldValue;if(this._background){oldValue=this._background.value;}this._changeContentsProperty("background",val,oldValue);var backgroud=nexacro.BackgroundObject(val,this);this._background=backgroud;this.on_apply_background(backgroud);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}this.parent._draw();};_pChartBoardControl.on_apply_background=function(background){if(!this.visible){background=null;}this._gridRect.set_fillstyle(background?background.value:"");};_pChartBoardControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this.parent._draw();};_pChartBoardControl.on_apply_opacity=function(opacity){this._gridRect.set_opacity(opacity?opacity._sysvalue:"");};_pChartBoardControl.set_text=function(val){var text=nexacro._toString(val);if(text){if(this.text==null||this.text!=text){this._changeContentsProperty("text",val,this.text);this.text=text;this.on_apply_text(text);}}else{if(this.text){this.text="";this.on_apply_text("");}}this.parent._draw();};_pChartBoardControl.on_apply_text=function(text){var group=this._group;if(group){if(!this._gridCenterText){this._createCenterText();}this._gridCenterText.set_text(text);this.on_apply_textfont(this._textfont);this.on_apply_textcolor(this._textcolor);}this.parent._rearrange=true;};_pChartBoardControl.set_textfont=function(val){this.textfont=val;if(val){if(this._textfont==null||this._textfont.value!=val){var oldValue;if(this._textfont){oldValue=this._textfont.value;}this._changeContentsProperty("textfont",val,oldValue);var textfont=nexacro.FontObject(val);this._textfont=textfont;this.on_apply_textfont(textfont);}}else{if(this._textfont){this._textfont=null;this.on_apply_textfont(null);}}this.parent._draw();};_pChartBoardControl.on_apply_textfont=function(textfont){if(this._is_initprop){return;}var gridCenterText=this._gridCenterText;if(gridCenterText){gridCenterText.set_font(textfont?textfont.value||textfont:"12pt Verdana");this.parent._rearrange=true;}};_pChartBoardControl.set_textcolor=function(val){this.textcolor=val;if(val){if(this._textcolor==null||this._textcolor.value!=val){var oldValue;if(this._textcolor){oldValue=this._textcolor.value;}this._changeContentsProperty("textcolor",val,oldValue);var textcolor=nexacro.ColorObject(val);this._textcolor=textcolor;this.on_apply_textcolor(textcolor);}}else{if(this._textcolor){this._textcolor=null;this.on_apply_textcolor(null);}}this.parent._draw();};_pChartBoardControl.on_apply_textcolor=function(textcolor){if(this._is_initprop){return;}var gridCenterText=this._gridCenterText;if(gridCenterText){gridCenterText.set_color(textcolor?textcolor.value||textcolor:"#000000");}};_pChartBoardControl.set_textwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.textwidth!==val){this._changeContentsProperty("textwidth",val,this.textwidth);this.textwidth=val;this.on_apply_textwidth(val);}this.parent._draw();};_pChartBoardControl.on_apply_textwidth=function(textwidth){var group=this._group;if(group){var gridCenterText=this._gridCenterText;if(gridCenterText){if(textwidth>0){gridCenterText.set_wordWrap(true);gridCenterText.set_width(textwidth);}else{gridCenterText.set_wordWrap(false);}this.parent._rearrange=true;}}};_pChartBoardControl._createGroup=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartBoardGroup");this._graphicsControl.addChild(this._group);this._createGridRect();this._createGridLine();};_pChartBoardControl._createGridRect=function(){this._gridRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._gridRect.set_id("ChartBoardRect");this._group.addChild(this._gridRect);this._gridRect._board=this;};_pChartBoardControl._createGridLine=function(){this._gridLeftLine=new nexacro.ChartGraphicsLine();this._gridLeftLine.set_id("ChartBoardLeftLine");this._group.addChild(this._gridLeftLine);this._gridLeftLine._board=this;this._gridRightLine=new nexacro.ChartGraphicsLine();this._gridRightLine.set_id("ChartBoardRightLine");this._group.addChild(this._gridRightLine);this._gridRightLine._board=this;this._gridTopLine=new nexacro.ChartGraphicsLine();this._gridTopLine.set_id("ChartBoardTopLine");this._group.addChild(this._gridTopLine);this._gridTopLine._board=this;this._gridBottomLine=new nexacro.ChartGraphicsLine();this._gridBottomLine.set_id("ChartBoardBottomLine");this._group.addChild(this._gridBottomLine);this._gridBottomLine._board=this;};_pChartBoardControl._createCenterText=function(){if(!this._gridCenterText){if(this._group){this._gridCenterText=new nexacro.ChartGraphicsText(0,0);this._gridCenterText.set_id("ChartBoardCenterText");this._group.addChild(this._gridCenterText);this._gridCenterText._board=this;}}};_pChartBoardControl._arrange=function(left,top,width,height){var border=this._border;if(border){var topWidth=border.top._width||0,rightWidth=border.right._width||0,bottomWidth=border.bottom._width||0,leftWidth=border.left._width||0;var gridLeftLine=this._gridLeftLine;if(gridLeftLine){gridLeftLine.set_x1(0-leftWidth/2);gridLeftLine.set_y1(0-topWidth);gridLeftLine.set_x2(0-leftWidth/2);gridLeftLine.set_y2(height+bottomWidth);}var gridRightLine=this._gridRightLine;if(gridRightLine){gridRightLine.set_x1(width+rightWidth/2);gridRightLine.set_y1(0-topWidth);gridRightLine.set_x2(width+rightWidth/2);gridRightLine.set_y2(height+bottomWidth);}var gridTopLine=this._gridTopLine;if(gridTopLine){gridTopLine.set_x1(0-leftWidth);gridTopLine.set_y1(0-topWidth/2);gridTopLine.set_x2(width+rightWidth);gridTopLine.set_y2(0-topWidth/2);}var gridBottomLine=this._gridBottomLine;if(gridBottomLine){gridBottomLine.set_x1(0-leftWidth);gridBottomLine.set_y1(height+bottomWidth/2);gridBottomLine.set_x2(width+rightWidth);gridBottomLine.set_y2(height+bottomWidth/2);}}var gridCenterText=this._gridCenterText;if(gridCenterText){var boardRect=this.parent._boardRect;var boardWidth=0;var boardHeight=0;var borderWidth=0;var borderHeight=0;var centerX=0;var centerY=0;var txtSize;var txtWidth=0;var txtHeight=0;var text=gridCenterText.text;var textwidth=this.textwidth;if(text){if(boardRect){borderWidth=this.parent._boardBorderWidth;borderHeight=this.parent._boardBorderHeight;boardWidth=boardRect.width-borderWidth;boardHeight=boardRect.height-borderHeight;centerX=boardWidth/2;centerY=boardHeight/2;}txtSize=gridCenterText._getRect();if(txtSize){txtWidth=txtSize.width;txtHeight=txtSize.height;gridCenterText._clipitems=[];}if(gridCenterText._clipitems.length>0){gridCenterText._clipitems="";}if(textwidth){if(txtWidth>boardWidth){gridCenterText.set_x(0);gridCenterText.set_textAlign("left");if(txtHeight>boardHeight){gridCenterText.set_y(0);gridCenterText.set_verticalAlign("top");gridCenterText.setClipPath(new nexacro.Rect(0,0,boardWidth,boardHeight));}else{gridCenterText.set_y(centerY);gridCenterText.set_verticalAlign("middle");gridCenterText.setClipPath(new nexacro.Rect(0, -centerY,boardWidth,boardHeight));}}else{gridCenterText.set_x(centerX);gridCenterText.set_textAlign("center");if(txtHeight>boardHeight){gridCenterText.set_y(0);gridCenterText.set_verticalAlign("top");gridCenterText.setClipPath(new nexacro.Rect( -centerX,0,boardWidth,boardHeight));}else{gridCenterText.set_y(centerY);gridCenterText.set_verticalAlign("middle");}}}else{if(txtWidth>boardWidth){gridCenterText.set_x(0);gridCenterText.set_textAlign("left");gridCenterText.set_y(centerY);gridCenterText.set_verticalAlign("middle");gridCenterText.setClipPath(new nexacro.Rect(0, -centerY,boardWidth,boardHeight));}else{gridCenterText.set_x(centerX);gridCenterText.set_textAlign("center");if(txtHeight>boardHeight){gridCenterText.set_y(0);gridCenterText.set_verticalAlign("top");gridCenterText.setClipPath(new nexacro.Rect( -centerX,0,boardWidth,boardHeight));}else{gridCenterText.set_y(centerY);gridCenterText.set_verticalAlign("middle");}}}}}var gridRect=this._gridRect;if(gridRect){gridRect.set_width(width);gridRect.set_height(height);}this._group.setTransform("translate("+left+","+top+")");};_pChartBoardControl._getRect=function(){if(this._group){return this._group._getRect(false,true);}return;};_pChartBoardControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.board){contents.board[nm]=newVal;}};_pChartBoardControl._afterSetProperties=function(){this.on_apply_textfont(this._textfont);this.on_apply_textcolor(this._textcolor);};}if(!nexacro.ChartTitleControl){nexacro.ChartTitleControl=function(id,parent,graphicsControl){this.id=id||"";this.parent=parent||null;this._graphicsControl=graphicsControl||this.parent._graphicsControl;this._createGroup();};var _pChartTitleControl=nexacro.ChartTitleControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartTitleControl);_pChartTitleControl._type_name="ChartTitleControl";_pChartTitleControl._titleGroup=null;_pChartTitleControl._titleRect=null;_pChartTitleControl._titleText=null;_pChartTitleControl._subTitleText=null;_pChartTitleControl.align="center middle";_pChartTitleControl.background="";_pChartTitleControl.gap=undefined;_pChartTitleControl.linestyle="";_pChartTitleControl.opacity=1;_pChartTitleControl.padding="";_pChartTitleControl.subtext="";_pChartTitleControl.subtextalign="center";_pChartTitleControl.subtextcolor="";_pChartTitleControl.subtextfont="";_pChartTitleControl.subtextwidth=undefined;_pChartTitleControl.text="";_pChartTitleControl.textalign="center";_pChartTitleControl.textcolor="";_pChartTitleControl.textfont="";_pChartTitleControl.textwidth=undefined;_pChartTitleControl.visible=true;_pChartTitleControl._titleLeft=0;_pChartTitleControl._titleTop=0;_pChartTitleControl._titleWidth=0;_pChartTitleControl._titleHeight=0;_pChartTitleControl._textLeft=0;_pChartTitleControl._textTop=0;_pChartTitleControl._titleTextWidth=0;_pChartTitleControl._titleTextHeight=0;_pChartTitleControl._subTextLeft=0;_pChartTitleControl._subTextTop=0;_pChartTitleControl._subTextWidth=0;_pChartTitleControl._subTextHeight=0;_pChartTitleControl._borderWidth=0;_pChartTitleControl._borderHalfWidth=0;_pChartTitleControl._maxTitleTextWidth=0;_pChartTitleControl._align=null;_pChartTitleControl._halign=null;_pChartTitleControl._valign=null;_pChartTitleControl._position=null;_pChartTitleControl._titlerotate= -90;_pChartTitleControl._background=null;_pChartTitleControl._gap=0;_pChartTitleControl._linestyle=null;_pChartTitleControl._opacity=null;_pChartTitleControl._padding=null;_pChartTitleControl._subtextcolor=null;_pChartTitleControl._subtextfont=null;_pChartTitleControl._textcolor=null;_pChartTitleControl._textfont=null;_pChartTitleControl.destroy=function(){this._titleGroup.destroy();this._titleGroup=null;this._titleRect=null;this._titleText=null;this._subTitleText=null;this._graphicsControl=null;this._align=null;this._halign=null;this._valign=null;this._position=null;this._titlerotate= -90;this._background=null;this._linestyle=null;this._opacity=null;this._padding=null;this._subtextcolor=null;this._subtextfont=null;this._textcolor=null;this._textfont=null;if(this.parent){if(this.parent.title){this.parent._deleteContentsProp("title");this.parent.title=null;}this.parent._rearrange=true;this.parent._recreate=true;this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartTitleControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartTitleControl.on_apply_visible=function(visible){var titleGroup=this._titleGroup;if(titleGroup){titleGroup.set_visible(visible);}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_text=function(val){var text=nexacro._toString(val);if(text){if(this.text==null||this.text!=text){this._changeContentsProperty("text",val,this.text);this.text=text;this.on_apply_text(text);}}else{if(this.text){this.text="";this.on_apply_text("");}}this.parent._draw();};_pChartTitleControl.on_apply_text=function(text){var titleText=this._titleText;if(titleText){titleText.set_text(text);}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_subtext=function(val){var subtext=nexacro._toString(val);if(subtext){if(this.subtext==null||this.subtext!=subtext){this._changeContentsProperty("subtext",val,this.subtext);this.subtext=subtext;this.on_apply_subtext(subtext);}}else{if(this.subtext){this.subtext="";this.on_apply_subtext("");}}this.parent._draw();};_pChartTitleControl.on_apply_subtext=function(subtext){var subTitleText=this._subTitleText;if(subTitleText){subTitleText.set_text(subtext);}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var oldValue;if(this._background){oldValue=this._background.value;}this._changeContentsProperty("background",val,oldValue);var background=nexacro.BackgroundObject(val,this);this._background=background;this.on_apply_background(background);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}this.parent._draw();};_pChartTitleControl.on_apply_background=function(background){var titleRect=this._titleRect;if(titleRect){titleRect.set_fillstyle(background);}};_pChartTitleControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this.parent._draw();};_pChartTitleControl.on_apply_opacity=function(opacity){opacity=opacity?opacity._sysvalue:"";var titleRect=this._titleRect;if(titleRect){titleRect.set_opacity(opacity);}};_pChartTitleControl.set_textfont=function(val){this.textfont=val;if(val){if(this._textfont==null||this._textfont.value!=val){var oldValue;if(this._textfont){oldValue=this._textfont.value;}this._changeContentsProperty("textfont",val,oldValue);var textfont=nexacro.FontObject(val);this._textfont=textfont;this.on_apply_textfont(textfont);}}else{if(this._textfont){this._textfont=null;this.on_apply_textfont(null);}}this.parent._draw();};_pChartTitleControl.on_apply_textfont=function(textfont){if(this._is_initprop){return;}var titleText=this._titleText;if(titleText){titleText.set_font(textfont?textfont.value||textfont:"20pt Verdana");}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_textcolor=function(val){this.textcolor=val;if(val){if(this._textcolor==null||this._textcolor.value!=val){var oldValue;if(this._textcolor){oldValue=this._textcolor.value;}this._changeContentsProperty("textcolor",val,oldValue);var textcolor=nexacro.ColorObject(val);this._textcolor=textcolor;this.on_apply_textcolor(textcolor);}}else{if(this._textcolor){this._textcolor=null;this.on_apply_textcolor(null);}}this.parent._draw();};_pChartTitleControl.on_apply_textcolor=function(textcolor){if(this._is_initprop){return;}var titleText=this._titleText;if(titleText){titleText.set_color(textcolor?textcolor.value||textcolor:"#000000");}};_pChartTitleControl.set_align=function(val){var align_enum=["topleft","topcenter","topright","lefttop","leftcenter","leftbottom","righttop","rightcenter","rightbottom","bottomleft","bottomcenter","bottomright"];if(align_enum.indexOf(val)== -1){return;}if(this.align!=val){this.align=val;this.on_apply_align(val);}this.parent._draw();};_pChartTitleControl.on_apply_align=function(align){if(this._is_initprop){return;}if(align){if(align.indexOf("top")==0){this._position="top";if(align=="topleft"){this._halign="left";this._valign="top";}else if(align=="topcenter"){this._halign="center";this._valign="top";}else if(align=="topright"){this._halign="right";this._valign="top";}}else if(align.indexOf("left")==0){this._position="left";if(align=="lefttop"){this._halign="left";this._valign="top";}else if(align=="leftcenter"){this._halign="left";this._valign="center";}else if(align=="leftbottom"){this._halign="left";this._valign="bottom";}}else if(align.indexOf("right")==0){this._position="right";if(align=="righttop"){this._halign="right";this._valign="top";}else if(align=="rightcenter"){this._halign="right";this._valign="center";}else if(align=="rightbottom"){this._halign="right";this._valign="bottom";}}else if(align.indexOf("bottom")==0){this._position="bottom";if(align=="bottomleft"){this._halign="left";this._valign="bottom";}else if(align=="bottomcenter"){this._halign="center";this._valign="bottom";}else if(align=="bottomright"){this._halign="right";this._valign="bottom";}}}this.parent._rearrange=true;this.parent._changedData=true;};_pChartTitleControl.set_textwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.textwidth!=val){this._changeContentsProperty("textwidth",val,this.textwidth);this.textwidth=val;this.on_apply_textwidth(val);}this.parent._draw();};_pChartTitleControl.on_apply_textwidth=function(textwidth){var titleText=this._titleText;if(titleText){if(textwidth>0){titleText.set_width(textwidth);titleText.set_wordWrap(true);}else{titleText.set_wordWrap(false);}}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this.parent._draw();};_pChartTitleControl.on_apply_linestyle=function(linestyle){var titleRect=this._titleRect;if(titleRect){titleRect.set_strokepen(linestyle?linestyle.value||linestyle:"0px solid #717a8380");}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_textalign=function(val){var textalign_enum=["left","center","right"];if(textalign_enum.indexOf(val)== -1){return;}if(this.textalign!=val){this._changeContentsProperty("textalign",val,this.textalign);this.textalign=val;this.on_apply_textalign();}this.parent._draw();};_pChartTitleControl.on_apply_textalign=function(){this.parent._rearrange=true;};_pChartTitleControl.set_padding=function(val){this.padding=val;if(val){if(this._padding==null||this._padding.value!=val){var oldValue;if(this._padding){oldValue=this._padding.value;}this._changeContentsProperty("padding",val,oldValue);var padding=nexacro.PaddingObject(val);this._padding=padding;}}else{if(this._padding){this._padding=null;}}this.parent._recreate=true;this.parent._rearrange=true;this.parent._draw();};_pChartTitleControl.set_subtextfont=function(val){this.subtextfont=val;if(val){if(this._subtextfont==null||this._subtextfont.value!=val){var oldValue;if(this._subtextfont){oldValue=this._subtextfont.value;}this._changeContentsProperty("subtextfont",val,oldValue);var subtextfont=nexacro.FontObject(val);this._subtextfont=subtextfont;this.on_apply_subtextfont(subtextfont);}}else{if(this._subtextfont){this._subtextfont=null;this.on_apply_subtextfont(null);}}this.parent._draw();};_pChartTitleControl.on_apply_subtextfont=function(textfont){if(this._is_initprop){return;}var subText=this._subTitleText;if(subText){subText.set_font(textfont?textfont.value||textfont:"12pt Verdana");}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_subtextcolor=function(val){this.subtextcolor=val;if(val){if(this._subtextcolor==null||this._subtextcolor.value!=val){var oldValue;if(this._subtextcolor){oldValue=this._subtextcolor.value;}this._changeContentsProperty("subtextcolor",val,oldValue);var subtextcolor=nexacro.ColorObject(val);this._subtextcolor=subtextcolor;this.on_apply_subtextcolor(subtextcolor);}}else{if(this._subtextcolor){this._subtextcolor=null;this.on_apply_subtextcolor(null);}}this.parent._draw();};_pChartTitleControl.on_apply_subtextcolor=function(textcolor){if(this._is_initprop){return;}var subText=this._subTitleText;if(subText){subText.set_color(textcolor?textcolor.value||textcolor:"#000000");}};_pChartTitleControl.set_subtextalign=function(val){var subtextalign_enum=["left","center","right"];if(subtextalign_enum.indexOf(val)== -1){return;}if(this.subtextalign!=val){this._changeContentsProperty("subtextalign",val,this.subtextalign);this.subtextalign=val;this.on_apply_subtextalign();}this.parent._draw();};_pChartTitleControl.on_apply_subtextalign=function(){this.parent._rearrange=true;};_pChartTitleControl.set_gap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.gap!=val){this._changeContentsProperty("gap",val,this.gap);this.gap=val;this.on_apply_gap(val);}this.parent._draw();};_pChartTitleControl.on_apply_gap=function(gap){this._gap=(this.text&&this.subtext)?gap:0;this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl.set_subtextwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.subtextwidth!=val){this._changeContentsProperty("subtextwidth",val,this.subtextwidth);this.subtextwidth=val;this.on_apply_subtextwidth(val);}this.parent._draw();};_pChartTitleControl.on_apply_subtextwidth=function(subtextwidth){var subTitleText=this._subTitleText;if(subTitleText){if(subtextwidth>0){subTitleText.set_width(subtextwidth);subTitleText.set_wordWrap(true);}else{subTitleText.set_wordWrap(false);}}this.parent._recreate=true;this.parent._rearrange=true;};_pChartTitleControl._createGroup=function(){this._titleGroup=new nexacro.ChartGraphicsGroup();this._titleGroup.set_id("ChartTitleGroup");this._graphicsControl.addChild(this._titleGroup);this._titleRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._titleRect.set_id("ChartTitleRect");this._titleGroup.addChild(this._titleRect);this._titleRect._title=this;this._createTitleText();this._createSubTitleText();};_pChartTitleControl._createTitleText=function(){this._titleText=new nexacro.ChartGraphicsText(0,0);this._titleText.set_id("ChartTitleText");this._titleGroup.addChild(this._titleText);this._titleText._title=this;};_pChartTitleControl._createSubTitleText=function(){this._subTitleText=new nexacro.ChartGraphicsText(0,0);this._subTitleText.set_id("ChartTitleSubText");this._titleGroup.addChild(this._subTitleText);this._subTitleText._title=this;};_pChartTitleControl._measure=function(width,height){var txtRect,subtxtRect,titleRect=this._titleRect,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,padding=this._padding,linestyle=this._linestyle,position=this._position||"top";if(padding){paddingLeft=padding.left;paddingRight=padding.right;paddingTop=padding.top;paddingBottom=padding.bottom;}if(linestyle){this._borderWidth=this._linestyle._width;}else{this._borderWidth=1;}this._borderHalfWidth=this._borderWidth/2;if(this._titleText){txtRect=this._titleText._getRect();if(txtRect){this._titleTextWidth=txtRect.width;this._titleTextHeight=txtRect.height;}}if(this._subTitleText){subtxtRect=this._subTitleText._getRect();if(subtxtRect){this._subTextWidth=subtxtRect.width;this._subTextHeight=subtxtRect.height;}}if(this._titleTextWidth>this._subTextWidth){this._maxTitleTextWidth=this._titleTextWidth;}else{this._maxTitleTextWidth=this._subTextWidth;}if(this._maxTitleTextWidth>width){this._titleWidth=width-(this._borderWidth*2);}else{this._titleWidth=this._maxTitleTextWidth+this._borderWidth+paddingLeft+paddingRight;}this._titleWidth+=this._borderWidth;this._titleHeight=this._titleTextHeight+this._subTextHeight+this._borderWidth+paddingBottom+paddingTop;if(this._titleText&&this.text&&this._subTitleText&&this.subtext){this._titleHeight+=this._gap;}if(titleRect){if(position=="left"||position=="right"){titleRect.set_width(this._titleHeight);titleRect.set_height(this._titleWidth);}else{titleRect.set_width(this._titleWidth);titleRect.set_height(this._titleHeight);}}};_pChartTitleControl._arrange=function(left,top){var halign=this._halign||"center",valign=this._valign||"top",paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,padding=this._padding,textLeft=0,textTop=0,subTextLeft=0,subTextTop=0,textalign=this.textalign,subtextalign=this.subtextalign,chartWidth=this.parent._getClientWidth(),chartHeight=this.parent._getClientHeight(),x=0,y=0,titleWidth=this._titleWidth,titleHeight=this._titleHeight,titleTextWidth=this._titleTextWidth,titleTextHeight=this._titleTextHeight,subTextWidth=this._subTextWidth,subTextHeight=this._subTextHeight,titlerotate,textWidth=0,textHeight=0,clipRectWidth=0,clipRectHeight=0,position=this._position||"top";if(position=="left"||position=="right"){titleWidth=this._titleHeight;titleHeight=this._titleWidth;titleTextWidth=this._titleTextHeight;titleTextHeight=this._titleTextWidth;subTextWidth=this._subTextHeight;subTextHeight=this._subTextWidth;}if(padding){paddingLeft=padding.left;paddingRight=padding.right;paddingTop=padding.top;paddingBottom=padding.bottom;}if(this._titleRect){if(this._maxTitleTextWidth>chartWidth){left+=this._borderHalfWidth;}else{if(halign=="center"){left=(chartWidth-titleWidth-this._borderWidth)/2;left+=this._borderHalfWidth;}else if(halign=="right"){left=chartWidth-titleWidth-this._borderWidth;left+=this._borderHalfWidth;}else if(halign=="left"){left+=this._borderHalfWidth;}}if(valign=="bottom"){var bTmp=titleHeight+this._borderWidth+paddingBottom+paddingTop;top=top-bTmp;}top+=this._borderHalfWidth;this._rectLeft=left;this._rectTop=top;}if(this._titleText&&titleTextWidth>0){textWidth=titleTextWidth-(this._borderWidth*2);textHeight=titleTextHeight-(this._borderWidth*2);if(position=="top"||position=="bottom"){if(titleTextWidth<subTextWidth){if(textWidth>chartWidth){textLeft+=paddingLeft+this._borderHalfWidth;}else{if(textalign=="center"){textLeft=(titleWidth-titleTextWidth)/2;}else if(textalign=="right"){textLeft=titleWidth-titleTextWidth-this._borderWidth;}else if(textalign=="left"){textLeft+=this._borderWidth;}if(textalign=="left"){textLeft+=paddingLeft;}if(textalign=="right"){textLeft-=paddingRight;}}}else{if(textWidth>chartWidth){textLeft+=this._borderHalfWidth;textLeft+=paddingLeft;}else{textLeft=(titleWidth-titleTextWidth)/2;textLeft+=(paddingLeft/2);textLeft-=(paddingRight/2);}}textTop=titleTextHeight+paddingTop+this._borderHalfWidth;}else if(position=="left"||position=="right"){if(titleTextHeight<subTextHeight){if(textHeight>chartHeight){textTop+=paddingTop+this._borderHalfWidth;}else{if(textalign=="center"){textTop=(titleHeight-titleTextHeight)/2;}else if(textalign=="right"){textTop=titleHeight-titleTextHeight-this._borderWidth;}else if(textalign=="left"){textTop+=this._borderWidth;}if(textalign=="left"){textTop+=paddingTop;}if(textalign=="right"){textTop-=paddingBottom;}}}else{if(textHeight>chartHeight){textTop+=this._borderHalfWidth;textTop+=paddingTop;}else{textTop=(titleHeight-titleTextHeight)/2;textTop+=(paddingTop/2);textTop-=(paddingBottom/2);}}textLeft=titleTextWidth+paddingLeft+this._borderHalfWidth;}this._textLeft=textLeft;this._textTop=textTop;if(this._titleText._clipitems.length>0){this._titleText._clipitems="";}if(textWidth>chartWidth){clipRectWidth=titleWidth-this._borderWidth-paddingLeft;clipRectHeight=titleHeight+(this._borderWidth*2);this._titleText.setClipPath(new nexacro.Rect(0, -titleHeight,clipRectWidth,clipRectHeight));}}if(this._subTitleText&&subTextWidth>0){textWidth=subTextWidth-(this._borderWidth*2);textHeight=subTextHeight-(this._borderWidth*2);if(position=="top"||position=="bottom"){if(subTextWidth<titleTextWidth){if(textWidth>chartWidth){subTextLeft+=paddingLeft;}else{if(subtextalign=="center"){subTextLeft=(titleWidth-subTextWidth)/2;}else if(subtextalign=="right"){subTextLeft=titleWidth-subTextWidth-this._borderWidth;}else if(subtextalign=="left"){subTextLeft+=this._borderWidth;}if(subtextalign=="left"){subTextLeft+=paddingLeft;}if(subtextalign=="right"){subTextLeft-=paddingRight;}}}else{if(this._subTextWidth>chartWidth){subTextLeft+=this._borderHalfWidth;subTextLeft+=paddingLeft;}else{subTextLeft=(titleWidth-subTextWidth)/2;subTextLeft+=(paddingLeft/2);subTextLeft-=(paddingRight/2);}}subTextTop=subTextHeight+paddingTop;}else if(position=="left"||position=="right"){if(subTextHeight<titleTextHeight){if(textHeight>chartHeight){subTextTop+=paddingTop;}else{if(subtextalign=="center"){subTextTop=(titleHeight-subTextHeight)/2;}else if(subtextalign=="right"){subTextTop=titleHeight-subTextHeight-this._borderWidth;}else if(subtextalign=="left"){subTextTop+=this._borderWidth;}if(subtextalign=="left"){subTextTop+=paddingTop;}if(subtextalign=="right"){subTextTop-=paddingBottom;}}}else{if(this._subTextHeight>chartHeight){subTextTop+=this._borderHalfWidth;subTextTop+=paddingTop;}else{subTextTop=(titleHeight-subTextHeight)/2;subTextTop+=(paddingTop/2);subTextTop-=(paddingBottom/2);}}subTextLeft=subTextWidth+paddingLeft;}this._subTextLeft=subTextLeft;this._subTextTop=subTextTop;if(this._subTitleText._clipitems.length>0){this._subTitleText._clipitems="";}if(textWidth>chartWidth){clipRectWidth=titleWidth-this._borderWidth-paddingLeft;clipRectHeight=titleHeight+(this._borderWidth*2);this._subTitleText.setClipPath(new nexacro.Rect(0, -titleHeight,clipRectWidth,clipRectHeight));}}if(this._titleText){if(position=="left"){x=this._textLeft;y=this._textTop+titleTextHeight;titlerotate= -90;this._titleText.setTransform("translate("+x+","+y+"),rotate("+titlerotate+")");}else if(position=="right"){if(this._subTitleText){x=this._textLeft-titleTextWidth+subTextWidth;}else{x=this._textLeft-titleTextWidth;}y=this._textTop;titlerotate=90;this._titleText.setTransform("translate("+x+","+y+"),rotate("+titlerotate+")");}else{this._titleText.setTransform("translate("+this._textLeft+","+this._textTop+")");}}if(this._subTitleText){if(position=="top"||position=="bottom"){this._subTextTop=this._subTextTop+titleTextHeight;}if(this._titleText&&this.text){if(position=="top"||position=="bottom"){this._subTextTop+=this._gap;}else if(position=="left"){this._subTextLeft+=this._gap;}else if(position=="right"){this._subTextLeft-=this._gap;}}if(position=="left"){x=(this._subTextLeft+titleTextWidth);y=this._subTextTop+subTextHeight;titlerotate= -90;this._subTitleText.setTransform("translate("+x+","+y+"),rotate("+titlerotate+")");}else if(position=="right"){x=(this._subTextLeft-subTextWidth);y=this._subTextTop;titlerotate=90;this._subTitleText.setTransform("translate("+x+","+y+"),rotate("+titlerotate+")");}else{this._subTitleText.setTransform("translate("+this._subTextLeft+","+this._subTextTop+")");}}if(this._titleGroup){this._titleGroup.setTransform("translate("+this._rectLeft+","+this._rectTop+")");}};_pChartTitleControl._afterSetProperties=function(){this.on_apply_linestyle(this._linestyle);this.on_apply_align(this.align);this.on_apply_textfont(this._textfont);this.on_apply_textcolor(this._textcolor);this.on_apply_subtextcolor(this._subtextcolor);this.on_apply_subtextfont(this._subtextfont);};_pChartTitleControl._getRect=function(){if(this._titleRect){return this._titleRect._getRect(true,true);}return;};_pChartTitleControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.title){contents.title[nm]=newVal;}};}if(!nexacro.ChartLegendControl){nexacro.ChartLegendControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._items=[];this._createGroup();};var _pChartLegendControl=nexacro.ChartLegendControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartLegendControl);_pChartLegendControl._type_name="ChartLegendControl";_pChartLegendControl._group=null;_pChartLegendControl._backgroundRect=null;_pChartLegendControl.align="bottomcenter";_pChartLegendControl.background="";_pChartLegendControl.itemautofit=false;_pChartLegendControl.itemcolumncount=undefined;_pChartLegendControl.verticalitemgap=undefined;_pChartLegendControl.horizontalitemgap=undefined;_pChartLegendControl.iteminvisiblecolor="";_pChartLegendControl.itemtextcolor="";_pChartLegendControl.itemtextfont="";_pChartLegendControl.itemtextwidth=undefined;_pChartLegendControl.left=undefined;_pChartLegendControl.linestyle="";_pChartLegendControl.markerfillstyle="";_pChartLegendControl.markerlinestyle="";_pChartLegendControl.markersize=undefined;_pChartLegendControl.markertextgap=undefined;_pChartLegendControl.markertype="square";_pChartLegendControl.opacity=1;_pChartLegendControl.padding="";_pChartLegendControl.top=undefined;_pChartLegendControl.useiteminvisible=true;_pChartLegendControl.visible=true;_pChartLegendControl._data=null;_pChartLegendControl._labelHeight=null;_pChartLegendControl._position=null;_pChartLegendControl._align=null;_pChartLegendControl._halign=null;_pChartLegendControl._valign=null;_pChartLegendControl._background=null;_pChartLegendControl._itemtextcolor=null;_pChartLegendControl._itemtextfont=null;_pChartLegendControl._linestyle=null;_pChartLegendControl._markerfillstyle=null;_pChartLegendControl._markerlinestyle=null;_pChartLegendControl._opacity=null;_pChartLegendControl._padding=null;_pChartLegendControl.destroy=function(){this._group.destroy();this._group=null;this._backgroundRect=null;this._items=null;this._data=null;this._align=null;this._halign=null;this._valign=null;this._background=null;this._itemtextcolor=null;this._itemtextfont=null;this._linestyle=null;this._markerfillstyle=null;this._markerlinestyle=null;this._opacity=null;this._padding=null;if(this.parent){if(this.parent.legend){this.parent._deleteContentsProp("legend");this.parent.legend=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartLegendControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!==val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartLegendControl.on_apply_visible=function(visible){this._group.set_visible(visible);this.parent._changedData=true;};_pChartLegendControl.set_align=function(val){var align_enum=["topleft","topcenter","topright","lefttop","leftcenter","leftbottom","righttop","rightcenter","rightbottom","bottomleft","bottomcenter","bottomright"];if(align_enum.indexOf(val)== -1){return;}if(this.align!=val){this.align=val;this.on_apply_align(val);}this.parent._draw();};_pChartLegendControl.on_apply_align=function(align){if(this._is_initprop){return;}if(align){if(align.indexOf("top")==0){this._position="top";if(align=="topleft"){this._halign="left";this._valign="top";}else if(align=="topcenter"){this._halign="center";this._valign="top";}else if(align=="topright"){this._halign="right";this._valign="top";}}else if(align.indexOf("left")==0){this._position="left";if(align=="lefttop"){this._halign="left";this._valign="top";}else if(align=="leftcenter"){this._halign="left";this._valign="center";}else if(align=="leftbottom"){this._halign="left";this._valign="bottom";}}else if(align.indexOf("right")==0){this._position="right";if(align=="righttop"){this._halign="right";this._valign="top";}else if(align=="rightcenter"){this._halign="right";this._valign="center";}else if(align=="rightbottom"){this._halign="right";this._valign="bottom";}}else if(align.indexOf("bottom")==0){this._position="bottom";if(align=="bottomleft"){this._halign="left";this._valign="bottom";}else if(align=="bottomcenter"){this._halign="center";this._valign="bottom";}else if(align=="bottomright"){this._halign="right";this._valign="bottom";}}}this.parent._rearrange=true;this.parent._changedData=true;};_pChartLegendControl.set_left=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!==""&&val!=null){val=parseInt(val);if(this.left!==val){this._changeContentsProperty("left",val,this.left);this.left=val;this.on_apply_left();}}}else{if(this.left){this.left=undefined;this.on_apply_left();}}this.parent._draw();};_pChartLegendControl.on_apply_left=function(){this.parent._rearrange=true;};_pChartLegendControl.set_top=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!==""&&val!=null){val=parseInt(val);if(this.top!==val){this._changeContentsProperty("top",val,this.top);this.top=val;this.on_apply_top();}}}else{if(this.top){this.top=undefined;this.on_apply_top();}}this.parent._draw();};_pChartLegendControl.on_apply_top=function(){this.parent._rearrange=true;};_pChartLegendControl.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var oldValue;if(this._background){oldValue=this._background.value;}this._changeContentsProperty("background",val,oldValue);var background=nexacro.BackgroundObject(val,this);this._background=background;this.on_apply_background(background);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}this.parent._draw();};_pChartLegendControl.on_apply_background=function(background){var backgroundRect=this._backgroundRect;if(backgroundRect){backgroundRect.set_fillstyle(background?background.value:"");}};_pChartLegendControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||!this._linestyle._single||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this.parent._draw();};_pChartLegendControl.on_apply_linestyle=function(linestyle){if(this._is_initprop){return;}var backgroundRect=this._backgroundRect;if(backgroundRect){backgroundRect.set_strokepen(linestyle?linestyle.value||linestyle:"0px solid #717a8380");this.parent._rearrange=true;}};_pChartLegendControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this.parent._draw();};_pChartLegendControl.on_apply_opacity=function(opacity){opacity=opacity?opacity._sysvalue:"";var backgroundRect=this._backgroundRect;if(backgroundRect){backgroundRect.set_opacity(opacity);}};_pChartLegendControl.set_itemautofit=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.itemautofit!=val){this._changeContentsProperty("itemautofit",val,this.itemautofit);this.itemautofit=val;this.on_apply_itemautofit();}this.parent._draw();};_pChartLegendControl.on_apply_itemautofit=function(){this.parent._rearrange=true;};_pChartLegendControl.set_itemcolumncount=function(val){if(val!==undefined){if(isNaN(val)){return;}if(val!=""){val=parseInt(val);}}if(this.itemcolumncount!=val){this._changeContentsProperty("itemcolumncount",val,this.itemcolumncount);this.itemcolumncount=val;this.on_apply_itemcolumncount();}this.parent._draw();};_pChartLegendControl.on_apply_itemcolumncount=function(){this.parent._rearrange=true;};_pChartLegendControl.set_padding=function(val){this.padding=val;if(val){if(this._padding==null||this._padding.value!=val){var oldValue;if(this._padding){oldValue=this._padding.value;}this._changeContentsProperty("padding",val,oldValue);var padding=nexacro.PaddingObject(val);this._padding=padding;this.on_apply_padding();}}else{if(this._padding){this._padding=null;this.on_apply_padding();}}this.parent._draw();};_pChartLegendControl.on_apply_padding=function(){this.parent._rearrange=true;};_pChartLegendControl.set_verticalitemgap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.verticalitemgap!=val){this._changeContentsProperty("verticalitemgap",val,this.itemgap);this.verticalitemgap=val;this.on_apply_verticalitemgap();}this.parent._draw();};_pChartLegendControl.on_apply_verticalitemgap=function(){if(this._is_initprop){return;}this.parent._rearrange=true;};_pChartLegendControl.set_horizontalitemgap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.itemgap!=val){this._changeContentsProperty("horizontalitemgap",val,this.itemgap);this.horizontalitemgap=val;this.on_apply_horizontalitemgap();}this.parent._draw();};_pChartLegendControl.on_apply_horizontalitemgap=function(){if(this._is_initprop){return;}this.parent._rearrange=true;};_pChartLegendControl.set_markertextgap=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.markertextgap!=val){this._changeContentsProperty("markertextgap",val,this.markertextgap);this.markertextgap=val;this.on_apply_markertextgap();}this.parent._draw();};_pChartLegendControl.on_apply_markertextgap=function(){this.parent._rearrange=true;};_pChartLegendControl.set_markertype=function(val){var markertype_enum=["circle","square"];if(markertype_enum.indexOf(val)== -1){return;}if(this.markertype!=val){this._changeContentsProperty("markertype",val,this.markertype);this.markertype=val;this.on_apply_markertype(val);}this.parent._draw();};_pChartLegendControl.on_apply_markertype=function(markertype_){var legendData=this._data;var dataLen=legendData.length;var itemGroup,marker,oldMarker;var markertype=markertype_;var markersize=this.markersize||15;var series;for(var i=0;i<dataLen;i++ ){itemGroup=this._items[i];oldMarker=itemGroup.getFirstChild();if(oldMarker){marker=this._createMarker(markertype,markersize);marker.set_id("ChartLegendItemMarker"+i);marker._series=legendData[i];itemGroup._overrideChild(marker,oldMarker);series=legendData[i];series._legendMarker=marker;}}this._afterSetProperties();this.parent._rearrange=true;};_pChartLegendControl.set_markersize=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.markersize!==val){this._changeContentsProperty("markersize",val,this.markersize);this.markersize=val;this.on_apply_markersize(val);}this.parent._draw();};_pChartLegendControl.on_apply_markersize=function(markersize){if(this._is_initprop){return;}var items=this._items,itemsLen=items.length;if((this.markersize==""||this.markersize==undefined)&&this.markersize!==0){markersize=15;}else{markersize=this.markersize;}for(var i=0;i<itemsLen;i++ ){var marker=items[i].getFirstChild();var markertype=this.markertype;if(marker){if(markertype=="circle"){marker.set_cx(markersize*0.5);marker.set_cy(markersize*0.5);marker.set_width(markersize);marker.set_height(markersize);}else{marker.set_x(0);marker.set_y(0);marker.set_width(markersize);marker.set_height(markersize);}}}this.parent._rearrange=true;};_pChartLegendControl.set_markerfillstyle=function(val){this.markerfillstyle=val;if(val){if(this._markerfillstyle==null||this._markerfillstyle.value!=val){var oldValue;if(this._markerfillstyle){oldValue=this._markerfillstyle.value;}this._changeContentsProperty("markerfillstyle",val,oldValue);var markerfillstyle=nexacro.BackgroundObject(val,this);this._markerfillstyle=markerfillstyle;this.on_apply_markerfillstyle(markerfillstyle);}}else{if(this._markerfillstyle){this._markerfillstyle=null;this.on_apply_markerfillstyle(null);}}this.parent._draw();};_pChartLegendControl.on_apply_markerfillstyle=function(markerfillstyle){if(this._is_initprop){return;}var items=this._items,itemsLen=items.length,data,seriesVisible=true,itemGroup,marker,fillstyle,iteminvisiblecolor=this.iteminvisiblecolor||"#000000";for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];marker=itemGroup.getFirstChild();if(marker){data=itemGroup._data;seriesVisible=data.visible;if(seriesVisible){if(!markerfillstyle){fillstyle=data.color;}else{fillstyle=markerfillstyle;}}else{fillstyle=iteminvisiblecolor;}marker.set_fillstyle(fillstyle?fillstyle.value||fillstyle:"");}}};_pChartLegendControl.set_markerlinestyle=function(val){this.markerlinestyle=val;if(val){if(this._markerlinestyle==null||!this._markerlinestyle._single||this._markerlinestyle.value!=val){var oldValue;if(this._markerlinestyle){oldValue=this._markerlinestyle.value;}this._changeContentsProperty("markerlinestyle",val,oldValue);var markerlinestyle=nexacro.BorderObject(val);this._markerlinestyle=markerlinestyle;this.on_apply_markerlinestyle(markerlinestyle);}}else{if(this._markerlinestyle){this._markerlinestyle=null;this.on_apply_markerlinestyle(null);}}this.parent._draw();};_pChartLegendControl.on_apply_markerlinestyle=function(markerlinestyle){var items=this._items,itemsLen=items.length,itemGroup;for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];var marker=itemGroup.getFirstChild();if(marker){marker.set_strokepen(markerlinestyle?markerlinestyle.value:"");}}this.parent._rearrange=true;};_pChartLegendControl.on_apply_itemtext=function(itemtext){var items=this._items,itemsLen=items.length,data,label,itemGroup,title;for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];label=itemGroup.getLastChild();if(label){data=itemGroup._data;title=itemtext.replace("[%titletext]",data.name);if(title){label.set_text(title);label.set_textAlign("left");label.set_verticalAlign("middle");}}}};_pChartLegendControl.set_itemtextfont=function(val){this.itemtextfont=val;if(val){if(this._itemtextfont==null||this._itemtextfont.value!=val){var oldValue;if(this._itemtextfont){oldValue=this._itemtextfont.value;}this._changeContentsProperty("itemtextfont",val,oldValue);var itemtextfont=nexacro.FontObject(val);this._itemtextfont=itemtextfont;this.on_apply_itemtextfont(itemtextfont);}}else{if(this._itemtextfont){this._itemtextfont=null;this.on_apply_itemtextfont(null);}}this.parent._draw();};_pChartLegendControl.on_apply_itemtextfont=function(itemtextfont){if(this._is_initprop){return;}var items=this._items,itemsLen=items.length,label,itemGroup;for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];label=itemGroup.getLastChild();if(label){label.set_font(itemtextfont?itemtextfont.value||itemtextfont:"12pt Verdana");}}this.parent._rearrange=true;};_pChartLegendControl.set_itemtextcolor=function(val){this.itemtextcolor=val;if(val){if(this._itemtextcolor==null||this._itemtextcolor.value!=val){var oldValue;if(this._itemtextcolor){oldValue=this._itemtextcolor.value;}this._changeContentsProperty("itemtextcolor",val,oldValue);var itemtextcolor=nexacro.ColorObject(val);this._itemtextcolor=itemtextcolor;this.on_apply_itemtextcolor(itemtextcolor);}}else{if(this._itemtextcolor){this._itemtextcolor=null;this.on_apply_itemtextcolor(null);}}this.parent._draw();};_pChartLegendControl.on_apply_itemtextcolor=function(itemtextcolor){if(this._is_initprop){return;}var items=this._items,itemsLen=items.length,label,data,seriesVisible=true,iteminvisiblecolor=this._iteminvisiblecolor,itemGroup;for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];label=itemGroup.getLastChild();if(label){data=itemGroup._data;seriesVisible=data.visible;if(seriesVisible){label.set_color(itemtextcolor?itemtextcolor.value:"#000000");}else{label.set_color(iteminvisiblecolor?iteminvisiblecolor.value:"#000000");}}}};_pChartLegendControl.set_itemtextwidth=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.itemtextwidth!==val){this._changeContentsProperty("itemtextwidth",val,this.itemtextwidth);this.itemtextwidth=val;this.on_apply_itemtextwidth(val);}this.parent._draw();};_pChartLegendControl.on_apply_itemtextwidth=function(itemtextwidth){var items=this._items,itemsLen=items.length,label,itemGroup;for(var i=0;i<itemsLen;i++ ){itemGroup=items[i];label=itemGroup.getLastChild();if(label){if(itemtextwidth>0){label.set_width(itemtextwidth);label.set_wordWrap(true);}else{label.set_wordWrap(false);}}}this.parent._rearrange=true;};_pChartLegendControl.set_useiteminvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.useiteminvisible!==val){this._changeContentsProperty("useiteminvisible",val,this.useiteminvisible);this.useiteminvisible=val;}this.parent._draw();};_pChartLegendControl.set_iteminvisiblecolor=function(val){this.iteminvisiblecolor=val;if(val){if(this._iteminvisiblecolor==null||this._iteminvisiblecolor.value!=val){var oldValue;if(this._iteminvisiblecolor){oldValue=this._iteminvisiblecolor.value;}this._changeContentsProperty("iteminvisiblecolor",val,oldValue);var iteminvisiblecolor=nexacro.ColorObject(val);this._iteminvisiblecolor=iteminvisiblecolor;}}else{if(this._iteminvisiblecolor){this._iteminvisiblecolor=null;}}this.parent._draw();};_pChartLegendControl._createGroup=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartLegendGroup");this._graphicsControl.addChild(this._group);this._backgroundRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._backgroundRect.set_id("ChartLegendBackgroundRect");this._group.addChild(this._backgroundRect);this._backgroundRect._legend=this;this._itemsGroup=new nexacro.ChartGraphicsGroup();this._itemsGroup.set_id("ChartLegendItemsGroup");this._group.addChild(this._itemsGroup);};_pChartLegendControl._setData=function(seriesset){this._clearItems();if(nexacro._ChartGraphicsLib.isEmpty(seriesset)){this._data=[];return;}var charttype=this.parent._type_name,i,length=0,seriesitem,ldata,data=[];if(charttype=="BasicChart"||charttype=="BubbleChart"||charttype=="RadarChart"||charttype=="GaugeChart"||charttype=="RoseChart"){length=seriesset.length;for(i=0;i<length;i++ ){var series=seriesset[i],visible=false,fillstyle;ldata={};if(charttype=="BasicChart"||charttype=="RadarChart"){if(series.pointvisible){visible=true;fillstyle=series.pointfillstyle?series.pointfillstyle:series._color;}if(series.linevisible){visible=true;if(series.lineareavisible){fillstyle=series.lineareafillstyle?series.lineareafillstyle:series._color;}else{fillstyle=series._linebordercolor?series._linebordercolor:series._color;}}if(series.barvisible){visible=true;fillstyle=series.barfillstyle?series.barfillstyle:series._color;}}else if(charttype=="GaugeChart"){if(series.visible){visible=true;fillstyle=series.barfillstyle?series.barfillstyle:series._color;}}else{if(series.visible){visible=true;fillstyle=series.fillstyle?series.fillstyle:series._color;}}ldata.name=series.titletext||series.id;ldata.id=series.id;ldata.visible=visible;ldata.title=series.titletext;ldata.color=fillstyle;data.push(ldata);}}else{length=seriesset[0]._seriesitems.length;seriesitem=seriesset[0]._seriesitems;for(i=0;i<length;i++ ){var item=seriesitem[i];ldata={};if(seriesset[0].visible){ldata.name=item.category;ldata.value=item.value;ldata.visible=item._isShow;ldata.title=seriesset[0].titletext;ldata.color=item.color;data.push(ldata);}}}this._data=data;this._createItems();};_pChartLegendControl._clearItems=function(){var itemsGroup;for(var i=0;i<this._items.length;i++ ){itemsGroup=this._items[i];if(itemsGroup){itemsGroup.clear();}}itemsGroup=this._itemsGroup;if(itemsGroup){itemsGroup.clear();}this._items=[];};_pChartLegendControl._createItems=function(){var legendData=this._data,dataLen=legendData.length,series,itemGroup,marker,markertype=this.markertype,markersize=this.markersize||15,label;for(var i=0;i<dataLen;i++ ){series=legendData[i];itemGroup=new nexacro.ChartGraphicsGroup();itemGroup.set_id("ChartLegendItemGroup"+i);itemGroup._data=series;this._itemsGroup.addChild(itemGroup);marker=this._createMarker(markertype,markersize);marker.set_id("ChartLegendItemMarker"+i);series._legendMarker=marker;marker._series=series;itemGroup.addChild(marker);marker._legend=this;label=new nexacro.ChartGraphicsText(0,0);label.set_id("ChartLegendItemLabel"+i);itemGroup.addChild(label);label._legend=this;label._series=series;series._legendLabel=label;this._items[i]=itemGroup;}};_pChartLegendControl._createMarker=function(markertype,markersize){var marker;if(markertype=="circle"){marker=new nexacro.ChartGraphicsEllipse(markersize*0.5,markersize*0.5,markersize,markersize);}else{marker=new nexacro.ChartGraphicsRect(0,0,markersize,markersize);}return marker;};_pChartLegendControl._measure=function(clientWidth){var maxsize,maxH=0,maxW=0;maxsize=this._getMaxSize();if(maxsize){maxW=maxsize[0];maxH=maxsize[1];}var items=this._items,left=0,itemGroup,rect,verticalitemgap=this.verticalitemgap||0,horizontalitemgap=this.horizontalitemgap||0,padding=this._padding,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,hGap=0,vGap=0,itemcolumncount,halign=this._halign,index=0,linestyle=this._linestyle,borderLeftWidth=0,borderWidth=0;if((this.itemcolumncount==""||this.itemcolumncount==undefined)&&this.itemcolumncount!==0){itemcolumncount=undefined;}else{if(this.itemcolumncount<=0){itemcolumncount=1;}else{itemcolumncount=this.itemcolumncount;}}if(padding){paddingLeft=padding.left;paddingRight=padding.right;paddingTop=padding.top;paddingBottom=padding.bottom;}hGap=paddingLeft;vGap=paddingTop;if(linestyle){borderWidth=linestyle._getBorderWidth();borderLeftWidth=linestyle._getBorderLeftWidth();}else{borderWidth=2;borderLeftWidth=1;}for(var i=0;i<items.length;i++ ){itemGroup=items[i];rect=itemGroup._getRect(false,true);if(this.itemautofit){left=paddingLeft+index*(maxW+horizontalitemgap);}else{left=hGap;hGap=hGap+rect.width+horizontalitemgap;}if(!itemcolumncount||itemcolumncount===0){if(halign=="left"||halign=="right"){itemcolumncount=1;}else{itemcolumncount=undefined;}}if((left+rect.width+paddingLeft+paddingRight+borderWidth>clientWidth&&i>0&&index!==0)||(!isNaN(itemcolumncount)&&index>=itemcolumncount)){index=0;left=paddingLeft;hGap=left+rect.width+horizontalitemgap;vGap=vGap+maxH+verticalitemgap;}itemGroup.setTransform("translate("+left+","+vGap+")");index++ ;}var itemGrpRect,itemGrpWidth=0,itemGrpHeight=0,backgroundRect=this._backgroundRect;itemGrpRect=this._itemsGroup._getRect(false,true);itemGrpWidth=itemGrpRect.width;itemGrpHeight=itemGrpRect.height;if(itemGrpHeight<0){itemGrpHeight=0;}backgroundRect.set_width(itemGrpWidth+borderLeftWidth+paddingLeft+paddingRight);backgroundRect.set_height(itemGrpHeight+borderLeftWidth+paddingTop+paddingBottom);};_pChartLegendControl._arrange=function(left,top){var linestyle=this._linestyle,borderWidthHalf=0,markerlinestyle=this._markerlinestyle,markerlineWidthHalf=0,itemsGroupLeft=0,itemsGroupTop=0,labelHeight=this._labelHeight,markersize=this.markersize||15;if(linestyle){borderWidthHalf=linestyle._getBorderLeftWidth()*0.5;}else{borderWidthHalf=0.5;}left+=borderWidthHalf;top+=borderWidthHalf;if(markerlinestyle){markerlineWidthHalf=markerlinestyle._getBorderLeftWidth()*0.5;}else{markerlineWidthHalf=0.5;}itemsGroupLeft=markerlineWidthHalf;itemsGroupTop=markerlineWidthHalf;if(labelHeight>markersize){itemsGroupTop+=(labelHeight*0.5)-(markersize*0.5)+borderWidthHalf;}else{itemsGroupTop+=borderWidthHalf;}this._itemsGroup.setTransform("translate("+itemsGroupLeft+","+itemsGroupTop+")");this._group.setTransform("translate("+left+","+top+")");};_pChartLegendControl._afterSetProperties=function(){this.on_apply_linestyle(this._linestyle);this.on_apply_markersize(this.markersize);this.on_apply_markerfillstyle(this._markerfillstyle);this.on_apply_markerlinestyle(this._markerlinestyle);this.on_apply_align(this.align);this.on_apply_itemtext("[%titletext]");this.on_apply_itemtextfont(this._itemtextfont);this.on_apply_itemtextcolor(this._itemtextcolor);this.on_apply_verticalitemgap();this.on_apply_horizontalitemgap();};_pChartLegendControl._getRect=function(){if(this._backgroundRect){return this._backgroundRect._getRect(true,true);}return;};_pChartLegendControl._getMaxSize=function(){var items=this._items,itemGroup,marker,label,rect,mRect,lRect,markertextgap=this.markertextgap||0,labelX=0,labelY=0,markerWidth=0,itemGroupWidth=0,itemGroupHeight=0,maxH=0,maxW=0,markerlinestyle=this._markerlinestyle,markerlineWidthHalf=0;if(markerlinestyle){markerlineWidthHalf=markerlinestyle._getBorderLeftWidth()*0.5;}for(var i=0;i<items.length;i++ ){itemGroup=items[i];marker=itemGroup.getFirstChild();label=itemGroup.getLastChild();labelX=markertextgap;if(marker){mRect=marker._getRect(true,true);markerWidth=mRect.width;if(markerWidth>0){labelX=labelX+markerWidth;}labelY=mRect.height*0.5-markerlineWidthHalf;}if(label){lRect=label._getRect();this._labelHeight=lRect.height;label.set_x(labelX);label.set_y(labelY);}rect=itemGroup._getRect(false,true);itemGroupWidth=rect.width;itemGroupHeight=rect.height;if(itemGroupWidth>maxW){maxW=itemGroupWidth;}if(itemGroupHeight>maxH){maxH=itemGroupHeight;}}return [maxW,maxH];};_pChartLegendControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.legend){contents.legend[nm]=newVal;}};}if(!nexacro.ChartTooltipControl){nexacro.ChartTooltipControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._createGroup();};var _pChartTooltipControl=nexacro.ChartTooltipControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartTooltipControl);_pChartTooltipControl._type_name="ChartTooltipControl";_pChartTooltipControl._group=null;_pChartTooltipControl._tooltipPath=null;_pChartTooltipControl._tooltipText=null;_pChartTooltipControl.background="";_pChartTooltipControl.hookheight=undefined;_pChartTooltipControl.hookwidth=undefined;_pChartTooltipControl.linestyle="";_pChartTooltipControl.opacity=1;_pChartTooltipControl.padding="";_pChartTooltipControl.textcolor="";_pChartTooltipControl.textfont="";_pChartTooltipControl.visible=true;_pChartTooltipControl.edgeradius=0;_pChartTooltipControl._offsetx=0;_pChartTooltipControl._offsety=2;_pChartTooltipControl._background=null;_pChartTooltipControl._linestyle=null;_pChartTooltipControl._opacity=null;_pChartTooltipControl._textcolor=null;_pChartTooltipControl._textfont=null;_pChartTooltipControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!==val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}};_pChartTooltipControl.on_apply_visible=function(visible){this._group.set_visible(visible);};_pChartTooltipControl.set_edgeradius=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.edgeradius!==val){this._changeContentsProperty("edgeradius",val,this.edgeradius);this.edgeradius=val;this.on_apply_edgeradius(val);}};_pChartTooltipControl.on_apply_edgeradius=function(edgeradius){};_pChartTooltipControl.set_textfont=function(val){if(this.textfont!=val){this._changeContentsProperty("textfont",val,this.textfont);this.textfont=val;this.on_apply_textfont(val);}};_pChartTooltipControl.on_apply_textfont=function(textfont){if(this._is_initprop){return;}this._createTooltip();this._tooltipText.set_font(textfont?textfont.value||textfont:"12pt Verdana");};_pChartTooltipControl.set_textcolor=function(val){this.textcolor=val;if(val){if(this._textcolor==null||this._textcolor.value!=val){var oldValue;if(this._textcolor){oldValue=this._textcolor.value;}this._changeContentsProperty("textcolor",val,oldValue);var textcolor=nexacro.ColorObject(val);this._textcolor=textcolor;this.on_apply_textcolor(textcolor);}}else{if(this._textcolor){this._textcolor=null;this.on_apply_textcolor(null);}}};_pChartTooltipControl.on_apply_textcolor=function(textcolor){if(this._is_initprop){return;}this._createTooltip();this._tooltipText.set_color(textcolor?textcolor.value||textcolor:"#000000");};_pChartTooltipControl.set_padding=function(val){this.padding=val;if(val){if(this._padding==null||this._padding.value!=val){var oldValue;if(this._padding){oldValue=this._padding.value;}this._changeContentsProperty("padding",val,oldValue);var padding=nexacro.PaddingObject(val);this._padding=padding;}}else{if(this._padding){this._padding=null;}}};_pChartTooltipControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||!this._linestyle._single||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}};_pChartTooltipControl.on_apply_linestyle=function(linestyle){if(this._is_initprop){return;}this._createTooltip();this._tooltipPath.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");};_pChartTooltipControl.set_background=function(val){this.background=val;if(val){if(this._background==null||this._background.value!=val){var oldValue;if(this._background){oldValue=this._background.value;}this._changeContentsProperty("background",val,oldValue);var background=nexacro.BackgroundObject(val,this);this._background=background;this.on_apply_background(background);}}else{if(this._background){this._background=null;this.on_apply_background(null);}}};_pChartTooltipControl.on_apply_background=function(background){if(this._is_initprop){return;}this._createTooltip();this._tooltipPath.set_fillstyle(background?(background.value||background):"yellow");};_pChartTooltipControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}};_pChartTooltipControl.on_apply_opacity=function(opacity){this._createTooltip();this._tooltipPath.set_opacity(opacity?opacity._sysvalue:1);};_pChartTooltipControl.set_hookwidth=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.hookwidth!=val){this._changeContentsProperty("hookwidth",val,this.hookwidth);this.hookwidth=val;}};_pChartTooltipControl.set_hookheight=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.hookheight!=val){this._changeContentsProperty("hookheight",val,this.hookheight);this.hookheight=val;}};_pChartTooltipControl.destroy=function(){this._group.destroy();this._group=null;this.id=null;this.visible=null;this.text=null;this.textfont=null;this.textcolor=null;this.padding=null;this.linestyle=null;this.background=null;this.opacity=null;this.hookwidth=null;this.hookheight=null;this.texttype=null;this.textmask=null;this._padding=null;this._tooltipPath=null;this._tooltipText=null;this._linestyle=null;this._background=null;this._opacity=null;this._textfont=null;this._textcolor=null;this._offsetx=null;this._offsety=null;if(this.parent){if(this.parent.tooltip){this.parent._deleteContentsProp("tooltip");this.parent.tooltip=null;}this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartTooltipControl._createGroup=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartTooltipGroup");this._graphicsControl.addChild(this._group);};_pChartTooltipControl._clear=function(){if(this._tooltipText){this._group.removeChild(this._tooltipText);delete this._tooltipText;this._tooltipText=null;}if(this._tooltipPath){this._group.removeChild(this._tooltipPath);delete this._tooltipPath;this._tooltipPath=null;}};_pChartTooltipControl._createTooltip=function(){if(!this._tooltipPath){this._tooltipPath=new nexacro.ChartGraphicsPath();this._tooltipPath.set_id("ChartTooltipPath");this._group.addChild(this._tooltipPath);}if(!this._tooltipText){this._tooltipText=new nexacro.ChartGraphicsText();this._tooltipText.set_id("ChartTooltipText");this._tooltipText.set_font("0pt arial");this._tooltipText.set_textAlign("center");this._tooltipText.set_verticalAlign("middle");this._tooltipText.set_x( -1000);this._tooltipText.set_y( -1000);this._group.addChild(this._tooltipText);}};_pChartTooltipControl._showTooltip=function(obj,canvasX,canvasY){if(!obj||!this.visible){return;}var overitemid=obj.id;var s;if(overitemid.search("SeriesItemText_")>=0){if(obj._series){if(this.parent._type_name=="BasicChart"){s=obj._series;if((!s.linevisible&&!s.pointvisible&&!s.barvisible)){return;}}if(this.parent._type_name=="RadarChart"){s=obj._series;if((!s.linevisible&&!s.pointvisible)){return;}}}}if(!this.background){if(obj.fillstyle){this.on_apply_background(obj.fillstyle);}else{this.on_apply_background("#4b4b4b");}}else{this.on_apply_background(this._background);}this.on_apply_linestyle(this._linestyle);this.on_apply_opacity(this._opacity);this.on_apply_textfont(this.textfont);this.on_apply_textcolor(this._textcolor);if(this._tooltipPath&&this._tooltipText&&obj._tooltipShow){return;}this._lasttooltip=obj;var charttype=this.parent._type_name,text;if(charttype=="PieChart"){text=this._getPieTooltipText(obj);}else{text=this._getTooltipText(obj);}if(!text){return;}var tooltipPath=this._tooltipPath,tooltipText=this._tooltipText,txtRect={},txtWidth=0,txtHeight=0,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,padding=this._padding,linestyle=this._linestyle,borderwidth=0,tooltipWidth=0,tooltipHeight=0,hookwidth,hookheight,posX=0,posY=0,offsetx=this._offsetx,offsety=this._offsety,posRight=0,posExtLeft=0,posExtRight=0,shiftXW=0,shiftXE=0,left=0,top=0,sX=0,sT=0;if((this.hookwidth==""||this.hookwidth==undefined)&&this.hookwidth!==0){hookwidth=5;}else{hookwidth=this.hookwidth;}if((this.hookheight==""||this.hookheight==undefined)&&this.hookheight!==0){hookheight=5;}else{hookheight=this.hookheight;}if(padding){paddingLeft=padding.left;paddingRight=padding.right;paddingTop=padding.top;paddingBottom=padding.bottom;}else{paddingLeft=5;paddingRight=10;paddingTop=5;paddingBottom=10;}tooltipText.set_text(text);txtRect=tooltipText._getRect();txtWidth=txtRect.width;txtHeight=txtRect.height;borderwidth=linestyle?linestyle._getBorderLeftWidth():1;tooltipWidth=txtWidth+paddingLeft+paddingRight+borderwidth;tooltipHeight=txtHeight+paddingTop+paddingBottom+borderwidth;posX=canvasX;posY=canvasY;posX-=offsetx;posY-=offsety;posY-=(tooltipHeight/2);posY-=hookheight;posExtLeft=(tooltipWidth/2)+(borderwidth/2);posExtRight=posX+posExtLeft;posRight=this.parent._getClientWidth();if(posExtLeft>canvasX){shiftXW=posExtLeft-canvasX;posX+=shiftXW;}else if(posExtRight>posRight){shiftXE=posExtRight-posRight;posX-=shiftXE;}tooltipText.set_x(posX+paddingLeft-((paddingLeft+paddingRight)/2));tooltipText.set_y(posY-borderwidth+paddingTop-((paddingTop+paddingBottom)/2));left=posX-(tooltipWidth/2);top=posY-(tooltipHeight/2)-borderwidth;sX=left;sT=top;var nRoundPix=this.edgeradius;if(((tooltipWidth/2)<nRoundPix)||((tooltipHeight/2)<nRoundPix)){nRoundPix=0;}var fst_left=left;var fst_top=top;if(nRoundPix>0){tooltipPath.moveTo(left+nRoundPix,top);}else{tooltipPath.moveTo(left,top);}left+=tooltipWidth;if(nRoundPix>0){tooltipPath.lineTo(left-nRoundPix,top);}else{tooltipPath.lineTo(left,top);}var sv_left=left;var sv_top=top;top+=tooltipHeight;if(nRoundPix>0){tooltipPath.quadraticCurveTo(new nexacro.Point(sv_left-nRoundPix,sv_top),new nexacro.Point(sv_left,sv_top+nRoundPix));tooltipPath.lineTo(left,top-nRoundPix);}else{tooltipPath.lineTo(left,top);}sv_left=left;sv_top=top;left-=tooltipWidth/2;left+=hookwidth/2;if(shiftXW>0){if(sT<0){left+=shiftXW;}else{left=canvasX+(hookwidth/2);}if(left-hookwidth-borderwidth<0){left=hookwidth+borderwidth;}}else if(shiftXE>0){if(sT<0){left-=shiftXE;}else{left+=shiftXE;}if(left+hookwidth+borderwidth>posRight){left=posRight-borderwidth;}}if(nRoundPix>0){tooltipPath.quadraticCurveTo(new nexacro.Point(sv_left,sv_top-nRoundPix),new nexacro.Point(sv_left-nRoundPix,sv_top));tooltipPath.lineTo(left,top);}else{tooltipPath.lineTo(left,top);}sv_left=left;sv_top=top;left-=(hookwidth/2);top+=hookheight;tooltipPath.lineTo(left,top);left-=(hookwidth/2);top-=hookheight;tooltipPath.lineTo(left,top);if(nRoundPix>0){tooltipPath.lineTo(sX+nRoundPix,top);tooltipPath.quadraticCurveTo(new nexacro.Point(sX+nRoundPix,top),new nexacro.Point(fst_left,fst_top+tooltipHeight-nRoundPix));tooltipPath.lineTo(fst_left,fst_top+nRoundPix);tooltipPath.quadraticCurveTo(new nexacro.Point(fst_left,fst_top+nRoundPix),new nexacro.Point(fst_left+nRoundPix,fst_top));}else{tooltipPath.lineTo(sX,top);}tooltipPath.closePath();if(tooltipHeight+hookheight+(borderwidth*2)+offsety>canvasY){tooltipPath.rotate(180);tooltipPath.translate(0,tooltipHeight+hookheight+(borderwidth*2)+(offsety*2));var pathBounds=tooltipPath._center;tooltipText.set_x(pathBounds.x+paddingLeft-((paddingLeft+paddingRight)/2));tooltipText.set_y(pathBounds.y+(hookheight/2)+paddingTop-((paddingTop+paddingBottom)/2));tooltipPath._hookDirection="top";}else{tooltipPath._hookDirection="bottom";}obj._tooltipShow=true;this.parent._graphicsControl.draw();};_pChartTooltipControl._moveTooltip=function(obj,canvasX,canvasY,boardRect){if(!obj||!this.visible){return;}var overitemid=obj.id;var s;if(overitemid.search("SeriesItemText_")>=0){if(obj._series){if(this.parent._type_name=="BasicChart"){s=obj._series;if((!s.linevisible&&!s.pointvisible&&!s.barvisible)){return;}}if(this.parent._type_name=="RadarChart"||this.parent._type_name=="RoseChart"){s=obj._series;if((!s.linevisible&&!s.pointvisible)){return;}}}}if(!this._tooltipPath||!this._tooltipText){this._clear();obj._tooltipShow=false;obj._preCanvasX=undefined;obj._preCanvasY=undefined;return;}if(obj._tooltipShow){var preCanvasX=0,preCanvasY=0,offX=0,offY=0,tooltipPath=this._tooltipPath,tooltipText=this._tooltipText,txtRect={},txtWidth=0,txtHeight=0,paddingLeft=0,paddingRight=0,paddingTop=0,paddingBottom=0,padding=this._padding,linestyle=this._linestyle,borderwidth=0,tooltipWidth=0,posRight=0,posExtLeft=0,posExtRight=0,bound,hookheight,tooltipOffsetY=this._offsety,tooltipOffsetX=this._offsetx;preCanvasX=obj._preCanvasX||canvasX;preCanvasY=obj._preCanvasY||canvasY;offX=canvasX-preCanvasX;offY=canvasY-preCanvasY;obj._preCanvasX=canvasX;obj._preCanvasY=canvasY;if((this.hookheight==""||this.hookheight==undefined)&&this.hookheight!==0){hookheight=5;}else{hookheight=this.hookheight;}if(padding){paddingLeft=padding.left;paddingRight=padding.right;paddingTop=padding.top;paddingBottom=padding.bottom;}else{paddingLeft=5;paddingRight=10;paddingTop=5;paddingBottom=10;}bound=tooltipPath._bounds;if(!bound){return;}if(offX<0&&bound.left<0&&(Math.abs(bound.left)>boardRect.left)){return;}else if(bound.width>this.parent._getClientWidth()){return;}txtRect=tooltipText._getRect();txtWidth=txtRect.width;txtHeight=txtRect.height;borderwidth=linestyle?linestyle._getBorderLeftWidth():1;tooltipWidth=txtWidth+paddingLeft+paddingRight+borderwidth;var posX=canvasX;posX-=tooltipOffsetX;posExtLeft=(tooltipWidth/2)+(borderwidth/2);posExtRight=posX+posExtLeft;posRight=this.parent._getClientWidth();if(posExtLeft>posX){return;}else if(posExtRight>posRight){return;}if(tooltipPath){tooltipPath.translate(offX,offY);}if(tooltipText){tooltipText.translate(offX,offY);}if(tooltipPath._hookDirection=="bottom"&&(bound.height+tooltipOffsetY>canvasY)){tooltipPath.rotate(180);tooltipPath.translate(0,bound.height+(tooltipOffsetY*2));tooltipText.translate(0,bound.height+(tooltipOffsetY*2)+hookheight);tooltipPath._hookDirection="top";}else if(tooltipPath._hookDirection=="top"&&(bound.height+tooltipOffsetY<canvasY)){tooltipPath.rotate(180);tooltipPath.translate(0, -(bound.height+(tooltipOffsetY*2)));tooltipText.translate(0, -(bound.height+(tooltipOffsetY*2)+hookheight));tooltipPath._hookDirection="bottom";}this.parent._graphicsControl.draw();}};_pChartTooltipControl._hideTooltip=function(obj,canvasX,canvasY){if(!this.visible){return;}if(!this._tooltipPath||!this._tooltipText){this._clear();obj._tooltipShow=false;obj._preCanvasX=undefined;obj._preCanvasY=undefined;return;}if(obj&&!obj._tooltipShow){return;}if(this._tooltipPath||this._tooltipText){this._clear();obj._tooltipShow=false;obj._preCanvasX=undefined;obj._preCanvasY=undefined;this.parent._graphicsControl.draw();}};_pChartTooltipControl._clearTooltip=function(noDraw){if(this._lasttooltip){this._lasttooltip._tooltipShow=false;this._lasttooltip._preCanvasX=undefined;this._lasttooltip._preCanvasY=undefined;this._lasttooltip=null;this._clear();if(!noDraw){this.parent._graphicsControl.draw();}}};_pChartTooltipControl._afterSetProperties=function(){this.on_apply_linestyle(this._linestyle);this.on_apply_background(this._background);this.on_apply_textfont(this._textfont);this.on_apply_textcolor(this._textcolor);};_pChartTooltipControl._getTooltipText=function(item){var series,index,tooltiptext,tooltiptexttype,tooltiptextmask,chart=this.parent,locale,textvalue;if(item){index=item.index;series=item._series;}if(series){tooltiptext=series.tooltiptext;tooltiptexttype=series.tooltiptexttype;tooltiptextmask=series.tooltiptextmask;locale=series.locale;}if(tooltiptext){textvalue=tooltiptext._value;if(!textvalue){if(series.itemtext&&series.itemtext!=""){tooltiptext=series.itemtext;}else{tooltiptext=series.valuecolumn;}}else if(textvalue==""){tooltiptext=undefined;}}tooltiptext=nexacro._getChartDisplaytText(index,tooltiptext,locale,tooltiptexttype,tooltiptextmask,chart,this,series);return tooltiptext;};_pChartTooltipControl._getPieTooltipText=function(item){var seriesitem,series,index,valuedata,tooltiptext,tooltiptexttype,tooltiptextmask,chart=this.parent,locale,textvalue;if(item){series=item._series;seriesitem=item._seriesItem;}if(seriesitem){index=seriesitem.index;valuedata=seriesitem.value;}if(series){tooltiptext=series.tooltiptext;tooltiptexttype=series.tooltiptexttype;tooltiptextmask=series.tooltiptextmask;locale=series.locale;}if(tooltiptext){textvalue=tooltiptext._value;if(!textvalue){if(series.itemtext&&series.itemtext!=""){tooltiptext=series.itemtext;}else{tooltiptext=valuedata;}}else if(textvalue==""){tooltiptext=undefined;}}tooltiptext=nexacro._getChartDisplaytText(index,tooltiptext,locale,tooltiptexttype,tooltiptextmask,chart,this,series);return tooltiptext;};_pChartTooltipControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.tooltip){contents.tooltip[nm]=newVal;}};}if(!nexacro._getChartDisplaytText){nexacro._getChartDisplaytText=function(idx,text,locale,type,mask,chart,targetcontrol,series){var displaytext;if(type=="normal"){var t=text;if(t instanceof nexacro.BindableValue&&t._bindtype==1){var dataset=chart._binddataset;if(!dataset){return "text";}var colid=t._bindexpr;var coltype=dataset._getColumnType(colid);displaytext=this._getChartAttrValue(text,idx,mask,chart,series);switch(coltype){case 1:return this._getChartDisplayText_text(displaytext,idx,mask,chart);case 2:case 3:case 4:return this._getChartDisplayText_number(displaytext,idx,locale,mask,chart);default:{if(targetcontrol&&targetcontrol._type_name=="ChartCategoryAxisControl"&&chart.categoryaxis&&chart.categoryaxis._isTimeAxis==true){return this._getChartDisplayText_datetime2(displaytext,idx,locale,mask,chart);}else{return this._getChartDisplayText_text(displaytext,idx,mask,chart);}}}}else{displaytext=this._getChartAttrValue(text,idx,mask,chart,series);if(mask&&mask.length){if(targetcontrol&&targetcontrol._type_name=="ChartCategoryAxisControl"&&chart.categoryaxis&&chart.categoryaxis._isTimeAxis==true){return this._getChartDisplayText_datetime2(displaytext,idx,locale,mask,chart);}else{return this._getChartDisplayText_text(displaytext,idx,mask,chart);}}else{return displaytext;}}}else{displaytext=this._getChartAttrValue(text,idx,mask,chart,series);if(targetcontrol&&targetcontrol._type_name=="ChartCategoryAxisControl"&&chart.categoryaxis&&chart.categoryaxis._isTimeAxis==true){return this._getChartDisplayText_datetime2(displaytext,idx,locale,mask,chart);}if(type=="text"){return this._getChartDisplayText_text(displaytext,idx,mask,chart);}else if(type=="number"){return this._getChartDisplayText_number(displaytext,idx,locale,mask,chart);}else if(type=="currency"){return this._getChartDisplayText_currency(displaytext,idx,locale,mask,chart);}}return displaytext;};nexacro._getChartAttrValue=function(attr,rowidx,mask,chart,series){if(attr==undefined){return undefined;}if(attr._bindtype==undefined){return attr;}else if(attr._bindtype==0){return attr._value;}else{var dataset=chart._binddataset;if(dataset==null){return undefined;}if(attr._bindtype==1){if(chart._type_name=="FloatChart"){if(((dataset.rowcount-1)<rowidx)&&series&&series._data&&series._data[rowidx]){if(chart.rotateaxis){return series._data[rowidx][0];}else{return series._data[rowidx][1];}}}return dataset.getColumn(rowidx,attr._bindexpr);}else{var bindexpr=attr._bindexpr;var val=attr._value;var s=val.toLowerCase().indexOf("bind:");if(s>=0){bindexpr=bindexpr.substring(s,bindexpr.length);bindexpr=dataset.getColumn(rowidx,bindexpr);}var exprfn;exprfn=dataset._createExprFunc(bindexpr);if((typeof exprfn)=="function"){return exprfn.call(chart,rowidx,rowidx,chart,dataset,dataset._viewRecords,dataset._viewRecords[rowidx],[]);}return bindexpr;}}};nexacro._getChartDisplayFormatText_date=function(date,mask){if(date instanceof nexacro.Date){}else{return date;}if(!date||date==""||!mask||mask==""){return v;}var dateStr;var format;var yyyy=date.getFullYear();if(yyyy==0){yyyy="0000";}else{yyyy=yyyy.toString().padLeft(4,"0");}var MM=date.getMonth()+1;MM=(MM<10?"0":"")+MM;var dd=date.getDate();dd=(dd<10?"0":"")+dd;var yy=date.getYear()%100;var M= +MM;var d= +dd;var hour=date.getHours();hour=(hour<10?"0":"")+hour;var h= +hour;var minute=date.getMinutes();minute=(minute<10?"0":"")+minute;var mn= +minute;var second=date.getSeconds();second=(second<10?"0":"")+second;var s= +second;var millisecond=date.getMilliseconds();millisecond=(millisecond<10?"00":millisecond<100?"0":"")+millisecond;format=mask;if(format.length==0||!format.match(/[yMdHhms]/)){format="yyyy-MM-dd ddd";}dateStr=format.replace("yyyy",yyyy);dateStr=dateStr.replace("MM",MM);dateStr=dateStr.replace("dd",dd);dateStr=dateStr.replace("yy",yy);dateStr=dateStr.replace("M",M);dateStr=dateStr.replace("d",d);var hh=hour;var tt="오전";if(hour>12&&hour<25){hh=hour<22?"0"+(hour-12):hour-12;tt="오후";}dateStr=dateStr.replace("tt",tt);dateStr=dateStr.replace("HH",hour);dateStr=dateStr.replace("hh",hh);dateStr=dateStr.replace("H",h);dateStr=dateStr.replace("h",h);dateStr=dateStr.replace("mm",minute);dateStr=dateStr.replace("m",mn);dateStr=dateStr.replace("sss",millisecond);dateStr=dateStr.replace("ss",second);dateStr=dateStr.replace("s",s);dateStr=nexacro.replaceAll(dateStr,":","");dateStr=nexacro.replaceAll(dateStr,"-","");dateStr=nexacro.replaceAll(dateStr,"/","");return dateStr;};nexacro._getChartDisplayText_datetime2=function(value,rowidx,locale,mask,chart){if(mask&&mask.length){var maskobj=chart._maskdatetypeobj;maskobj.setLocale(locale);maskobj.setDateMask(mask);maskobj.setEditMask(mask);var formatvalue=value;if(value!=null){formatvalue=nexacro._getChartDisplayFormatText_date(value,mask);}if(formatvalue!=null){value=formatvalue.toString();}value=maskobj.applyMask(value);}else{if(value!=null){value=value.toString();}return this._getChartDisplayText_text(value,rowidx,mask,chart);}return value;};nexacro._getChartDisplayText_text=function(value,rowidx,mask,chart){if(value!=null){value=value.toString();}var maskobj=chart._maskstringtypeobj;if(mask&&mask.length){maskobj.maskchar="";maskobj.setMask(mask);value=maskobj.applyMask(value);}return value;};nexacro._getChartDisplayText_number=function(value,rowidx,locale_,mask,chart){var locale=this._getChartLocale(rowidx,locale_,mask,chart);var maskobj=chart._masknumbertypeobj;if(!mask||mask==="."){maskobj.setUseGrouping(true);}maskobj.setLimitType("decimal");maskobj.setLocale(locale);maskobj.setMask(mask);value=maskobj.applyMask(value);return value;};nexacro._getChartDisplayText_currency=function(value,rowidx,locale_,mask,chart){var locale=this._getChartLocale(rowidx,locale_,"",chart);if(!isNaN(value)){var nexanum=new nexacro.Number(value);value=nexanum.toLocaleCurrencyString(locale);}return value;};nexacro._getChartLocale=function(rowidx,locale_,mask,chart){var locale=this._getChartAttrValue(locale_,rowidx,mask,chart);if(!locale){locale=chart._getLocale();}return locale;};nexacro.__parseDate=function(v,dFlag,rowidx,mask){var date=new nexacro.Date();var year;var month;var day;var hour;var min;var sec;if(dFlag>0){year= +v.substring(0,4);month= +v.substring(4,6);day= +v.substring(6,8);if(month<1||month>12){return undefined;}if(day<1){return undefined;}if(dFlag==1){hour= +v.substring(8,10);min= +v.substring(10,12);sec= +v.substring(12,14);}else{hour=0;min=0;sec=0;}}else{year=1900;month=1;day=1;hour= +v.substring(0,2);min= +v.substring(2,4);sec= +v.substring(4,6);}date.setHours(hour,min,sec);date.setFullYear(year,month-1,day);return date;};}if(!nexacro._getBeforeKey){nexacro._getCharCodeArr=function(key){if(!key||!key.length){return false;}var c,result=[];for(var i=0,len=key.length;i<len;i++ ){c=key.charCodeAt(i);result[i]=c;}if(result[result.length-1]==48){return false;}return result;};nexacro._getBeforeKey=function(curKey,isRetChrArr){var charCodeArr;if(!nexacro._ChartGraphicsLib.isArray(curKey)){if(!(charCodeArr=this._getCharCodeArr(curKey))){}}else{charCodeArr=curKey.slice(0);}var at=charCodeArr.length-1;var c=charCodeArr[at],min=48,max=122;if(c>min+1){ --c;if(c==96){c=57;}charCodeArr[at]=c;if(isRetChrArr){return charCodeArr;}return String.fromCharCode.apply(null,charCodeArr);}while(at>0){charCodeArr[at]=max; --at;c=charCodeArr[at];if(c>min){ --c;if(c==96){c=57;}charCodeArr[at]=c;if(isRetChrArr){return charCodeArr;}return String.fromCharCode.apply(null,charCodeArr);}}for(var i=0,len=charCodeArr.length;i<len;i++ ){charCodeArr[i]=min;}this._expand(charCodeArr,max);if(isRetChrArr){return charCodeArr;}return String.fromCharCode.apply(null,charCodeArr);};nexacro._getAfterKey=function(curKey,isRetChrArr){var charCodeArr;if(!nexacro._ChartGraphicsLib.isArray(curKey)){if(!(charCodeArr=this._getCharCodeArr(curKey))){}}else{charCodeArr=curKey.slice(0);}var at=charCodeArr.length-1;var min=48,minCharToUse=min+1,max=122;var c;while(at>=0){c=charCodeArr[at];if(c<max){c=c+1;if(c==58){c=97;}charCodeArr[at]=c;if(isRetChrArr){return charCodeArr;}return String.fromCharCode.apply(null,charCodeArr);}charCodeArr[at]=minCharToUse;minCharToUse=min; --at;}for(var i=0,len=charCodeArr.length;i<len;i++ ){charCodeArr[i]=max;}this._expand(charCodeArr,min);if(isRetChrArr){return charCodeArr;}return String.fromCharCode.apply(null,charCodeArr);};nexacro._getBetweenKey=function(aKey,bKey){var aCharCodeArr=this._getCharCodeArr(aKey),bCharCodeArr,newKey;if(!aCharCodeArr){bCharCodeArr=this._getCharCodeArr(bKey);if(!bCharCodeArr){}return this._getBeforeKey(bCharCodeArr);}bCharCodeArr=this._getCharCodeArr(bKey);if(!bCharCodeArr){return this._getAfterKey(aCharCodeArr);}if(aKey>=bKey){}var minLen=Math.min(aCharCodeArr.length,bCharCodeArr.length);var at=0;while(at<minLen&&aCharCodeArr[at]==bCharCodeArr[at]){ ++at;}var newCharCodeArr,midVal,rangeCharIndex=this._rangeCharIndex;if(at<minLen&&parseInt(bCharCodeArr[at]-aCharCodeArr[at])>=2){newCharCodeArr=aCharCodeArr;midVal=parseInt((rangeCharIndex[aCharCodeArr[at]]+rangeCharIndex[bCharCodeArr[at]]+1)/2);var avgCharCode=rangeCharIndex[midVal];newCharCodeArr[at]=avgCharCode;newCharCodeArr.length=at+1;return String.fromCharCode.apply(null,newCharCodeArr);}if(aCharCodeArr.length>bCharCodeArr.length){newKey=this._getAfterKey(aCharCodeArr);if(newKey<bKey){return newKey;}}if(bCharCodeArr.length>aCharCodeArr.length){newKey=this._getBeforeKey(bCharCodeArr);if(newKey>aKey){return newKey;}}var min=48,c;newCharCodeArr=aCharCodeArr.slice(0);while(newCharCodeArr.length<bCharCodeArr.length){c=bCharCodeArr[newCharCodeArr.length];if(c>min+1){midVal=parseInt((rangeCharIndex[c]+1)/2);c=rangeCharIndex[midVal];newCharCodeArr[newCharCodeArr.length]=c;return String.fromCharCode.apply(null,newCharCodeArr);}newCharCodeArr[newCharCodeArr.length]=min;}var max=122;while(newCharCodeArr.length<aCharCodeArr.length){c=aCharCodeArr[newCharCodeArr.length];if(c<max-1){midVal=parseInt((35+rangeCharIndex[c]+1)/2);c=rangeCharIndex[midVal];newCharCodeArr[newCharCodeArr.length]=c;return String.fromCharCode.apply(null,newCharCodeArr);}newCharCodeArr[newCharCodeArr.length]=max;}this._expand(newCharCodeArr,105);return String.fromCharCode.apply(null,newCharCodeArr);};nexacro._expand=function(charcodeArr,c){var expandBy=3,arrLen=charcodeArr.length;for(var i=0,len=expandBy-1;i<len; ++i){charcodeArr[arrLen]=c;arrLen++ ;}if(c==48){ ++c;}charcodeArr[charcodeArr.length]=c;};}if(!nexacro._DatasetMap){nexacro._DatasetMap=function(allowDuplicates){this._allowDuplicates=allowDuplicates;this.clear();};var _pDatasetMap=nexacro._createPrototype(nexacro.Object,nexacro._DatasetMap);nexacro._DatasetMap.prototype=_pDatasetMap;_pDatasetMap.clear=function(){this.keyMap={};if(this._btree){this._btree.clear();}else{this._btree=new nexacro._BTree("insertOrder");}};_pDatasetMap.forEach=function(f){var _self=this;this._btree.forEach(function(val){f.call(_self,val.key,val.value);});};_pDatasetMap.toArray=function(start,len){return this._btree.getValues(start,len);};_pDatasetMap.containsKey=function(key){return key in this.keyMap;};_pDatasetMap.findRowByKey=function(key){var data=this.keyMap[key];if(data){if(this._allowDuplicates){if(nexacro._ChartGraphicsLib.isArray(data)&&data._dataArray===true){data=data[0];}}return this._btree.getIndex(data);}return  -1;};_pDatasetMap.insert=function(row,key,data,cnt){if(!key&&cnt){key="key:"+(cnt+1);}if(!this._allowDuplicates&&this.containsKey(key)){return false;}var btree=this._btree;if(row<0||row>=btree.getCount()){return this.add(key,data);}data.key=key;btree.insertBefore(row,data);var map=this.keyMap;if(this._allowDuplicates&&this.containsKey(key)){var dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){dataArr.push(data);}else{dataArr=[dataArr,data];dataArr._dataArray=true;map[key]=dataArr;}}else{map[key]=data;}return true;};_pDatasetMap.add=function(key,data){if(!this._allowDuplicates&&this.containsKey(key)){return false;}data.key=key;this._btree.add(data);var map=this.keyMap;if(this._allowDuplicates&&this.containsKey(key)){var dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){dataArr.push(data);}else{dataArr=[dataArr,data];dataArr._dataArray=true;map[key]=dataArr;}}else{map[key]=data;}return true;};_pDatasetMap.removeAt=function(row){var btree=this._btree,map=this.keyMap;var data=btree.getAt(row,true);if(data){var refRoot={root:btree.root};btree._nodeRemove(data[1],data[2],refRoot);btree.root=refRoot.root;var key=data[0].key;if(this._allowDuplicates&&this.containsKey(key)){var dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){var idx=nexacro._ChartGraphicsLibArray.indexOf(dataArr,data,0,true);if(idx> -1){dataArr.splice(idx,1);if(!dataArr.length){delete map[key];}}}else{delete map[key];}}else{delete map[key];}return true;}return false;};_pDatasetMap.removeAtKey=function(key){if(!this._allowDuplicates&&!this.containsKey(key)){return false;}var btree=this._btree,map=this.keyMap,data=map[key];if(data){if(this._allowDuplicates&&this.containsKey(key)){var dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){for(var i=0,len=dataArr.length;i<len;i++ ){btree.remove(dataArr[i]);}delete map[key];}else{btree.remove(data);delete map[key];}}else{btree.remove(data);delete map[key];}return true;}};_pDatasetMap.buildDataWithDataset=function(ds,keyColumnId,createDataFunc,scope){this.clear();var key,data,btree=this._btree,keyvals=this.keyMap;for(var i=0,len=ds.rowcount;i<len;i++ ){if(!nexacro._ChartGraphicsLib.isEmpty(keyColumnId)){key=ds.getColumn(i,keyColumnId)+"";}else{key="key:"+(i+1);}data=createDataFunc.call(scope,ds,i,key);data.key=key;keyvals[key]=data;btree.add(data);}};_pDatasetMap.changeKey=function(data,key,row,createDataFunc,scope){var oldKey=data.key,dataArr,map=this.keyMap;if(this._allowDuplicates&&this.containsKey(oldKey)){dataArr=map[oldKey];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){var idx=nexacro._ChartGraphicsLibArray.indexOf(dataArr,data,0,true);if(idx> -1){dataArr.splice(idx,1);if(!dataArr.length){delete map[oldKey];}}}else{delete map[oldKey];}}else{delete map[oldKey];}data.key=key;if(this._allowDuplicates&&this.containsKey(key)){dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){dataArr.push(data);}else{dataArr=[dataArr,data];dataArr._dataArray=true;map[key]=dataArr;}}else{map[key]=data;}};_pDatasetMap.getAt=function(row){if(row<0||row>=this._btree.getCount()){return null;}return this._btree.getAt(row);};_pDatasetMap.setAt=function(row,data){if(row<0||row>=this._btree.getCount()){return false;}this._btree.setAt(row,data);return true;};_pDatasetMap.getByKey=function(key){var data=this.keyMap[key];if(data){if(this._allowDuplicates){if(nexacro._ChartGraphicsLib.isArray(data)&&data._dataArray===true){data=data[0];}}}return data;};_pDatasetMap.exchangeRow=function(row1,row2){var btree=this._btree;if(row1<0||row1>=btree.getCount()){return false;}if(row2<0||row2>=btree.getCount()){return false;}var dataAtRow1=btree.getAt(row1,true);var dataAtRow2=btree.getAt(row2,true);var rowKey1=dataAtRow1[0].rowKey;var rowKey2=dataAtRow2[0].rowKey;dataAtRow1[0].rowKey=rowKey2;dataAtRow2[0].rowKey=rowKey1;dataAtRow1[1].keys[dataAtRow1[2]]=dataAtRow2[0];dataAtRow2[1].keys[dataAtRow2[2]]=dataAtRow1[0];btree._ensureParentKey(dataAtRow1[1],dataAtRow1[2]);btree._ensureParentKey(dataAtRow2[1],dataAtRow2[2]);return true;};_pDatasetMap.moveRow=function(oldRow,newRow){var btree=this._btree;if(oldRow<0||oldRow>=btree.getCount()){return false;}var oldDataAtRow=btree.getAt(oldRow,true);if(oldDataAtRow){var refRoot={root:btree.root};btree._nodeRemove(oldDataAtRow[1],oldDataAtRow[2],refRoot);btree.root=refRoot.root;var map=this.keyMap;var key=oldDataAtRow[0].key;if(this._allowDuplicates&&this.containsKey(key)){var dataArr=map[key];if(nexacro._ChartGraphicsLib.isArray(dataArr)&&dataArr._dataArray===true){var idx=nexacro._ChartGraphicsLibArray.indexOf(dataArr,oldDataAtRow,0,true);if(idx> -1){dataArr.splice(idx,1);if(!dataArr.length){delete map[key];}}}else{delete map[key];}}else{delete map[key];}return this.insert(newRow,oldDataAtRow[0].key,oldDataAtRow[0]);}return false;};}if(!nexacro._BTree){nexacro._BTree=function(compare,capacity){if(nexacro._ChartGraphicsLib.isFunction(compare)){this.compare=compare;}else{if(compare=="insertOrder"){this._insertedKey=true;this.compare=this._defaultInsertOrderCompare;}else{this.compare=this._defaultCompare;}}this._capacity=capacity==null?128:capacity;this.first=this._makeNode(true);if(this._insertedKey){this.last=this.first;}this.root=this.first;};var _pBTree=nexacro._createPrototype(nexacro.Object,nexacro._BTree);nexacro._BTree.prototype=_pBTree;_pBTree._defaultInsertOrderCompare=function(a,b){if(a.rowKey>b.rowKey){return 1;}if(a.rowKey<b.rowKey){return  -1;}return 0;};_pBTree._defaultCompare=function(a,b){if(a==b){return 0;}if(a==null||a<b){return  -1;}if(b==null||a>b){return 1;}};_pBTree.setAllowDuplicates=function(val){this.allowDuplicates=val;};_pBTree._makeNode=function(leaf){var node={"keys":[],"nodes":null,"nodeCount":0,"totalCount":0,"parent":null,"next":null,"prev":null};if(!leaf){node.nodes=[];}return node;};_pBTree.getValues=function(startIdx,len){if(startIdx==null){startIdx=0;}if(len==null){len=this.getCount();}len=startIdx+len;var res=[];var leaf=this.first,keys,resIdx=0,rootIdx=0;while(leaf){if(rootIdx+leaf.nodeCount<startIdx){rootIdx+=leaf.nodeCount-1;continue;}else if(rootIdx+leaf.nodeCount>len){break;}else{keys=leaf.keys;for(var i=0,keysLen=keys.length;i<keysLen;i++ ){if(startIdx<=rootIdx&&rootIdx<len){res[resIdx]=keys[i];resIdx++ ;}rootIdx++ ;}}leaf=leaf.next;}return res;};_pBTree.forEach=function(f){var node=this.first;for(;node;node=node.next){var keys=node.keys;for(var i=0,len=keys.length;i<len;i++ ){f.call(this,keys[i]);}}};_pBTree.getCount=function(){return this.root.totalCount;};_pBTree.getIndex=function(value){var refVal={"leaf":null,"pos":null};var found=this._nodeFind(this.root,value,this.compare,0,refVal);if(found){var idx=this._getRootIndex(refVal.leaf,refVal.pos);return idx;}return  -1;};_pBTree.getAt=function(index,isLeafInfo){if(index<0||index>=this.getCount()){return;}var idx={"index":index};var leaf=this._nodeLeafAt(this.root,idx);if(isLeafInfo){return [leaf.keys[idx.index],leaf,idx.index];}return leaf.keys[idx.index];};_pBTree.setAt=function(index,value){if(index<0||index>=this.getCount()){}var idx={"index":index};var leaf=this._nodeLeafAt(this.root,idx);leaf.keys[idx.index]=value;};_pBTree.contain=function(value){var refVal={"leaf":null,"pos":null};return this._nodeFind(this.root,value,this.compare,0,refVal);};_pBTree.insertBefore=function(index,value){if(this._insertedKey){var idx;if(index<0||this.getCount()<=index){return this.add(value);}else{idx={"index":index};var leaf=this._nodeLeafAt(this.root,idx);var refRoot={root:this.root},keys,pos=idx.index;if(index==0){value.rowKey=nexacro._getBeforeKey(leaf.keys[pos].rowKey);}else{var prevValue;if(pos==0){keys=leaf.prev.keys;prevValue=keys[keys.length-1];}else{keys=leaf.keys;prevValue=keys[pos-1];}value.rowKey=nexacro._getBetweenKey(prevValue.rowKey,leaf.keys[pos].rowKey);}this._nodeInsert(value,leaf,pos,refRoot);this.root=refRoot.root;return true;}}return false;};_pBTree.add=function(value){var refRoot;if(this._insertedKey){var leaf=this.last,pos=leaf.keys.length;if(this.getCount()==0){value.rowKey="1";}else{value.rowKey=nexacro._getAfterKey(leaf.keys[pos-1].rowKey);}refRoot={root:this.root};this._nodeInsert(value,leaf,pos,refRoot);this.root=refRoot.root;}else{var refVal={"leaf":null,"pos":null};var found=this._nodeFind(this.root,value,this.compare,0,refVal);if(found&&!this.allowDuplicates){}refRoot={root:this.root};this._nodeInsert(value,refVal.leaf,refVal.pos,refRoot);this.root=refRoot.root;}return true;};_pBTree.clear=function(){this._nodeClear(this.first);this.root=this.first;if(this._insertedKey){this.last=this.first;}};_pBTree.remove=function(value){var refVal={"leaf":null,"pos":null};if(!this._nodeFind(this.root,value,this.compare,0,refVal)){return false;}var refRoot={root:this.root};this._nodeRemove(refVal.leaf,refVal.pos,refRoot);this.root=refRoot.root;return true;};_pBTree.removeAt=function(index){if(index<0||index>=this.getCount()){}var idx={"index":index};var leaf=this._nodeLeafAt(this.root,idx);var refRoot={root:this.root};this._nodeRemove(leaf,idx.index,refRoot);this.root=refRoot.root;};_pBTree._nodeLeafAt=function(r,refpos){var nodeidx=0,node,pos=refpos.index;var dir=pos>r.totalCount/2? -1:1;if(dir<0){if(r.nodes==null){refpos.index=pos;return r;}nodeidx=r.nodes.length-1;pos=r.totalCount-pos;}while(true){if(r.nodes==null){refpos.index=pos;return r;}node=r.nodes[nodeidx];if(dir>0){if(pos<node.totalCount){r=node;if(r.nodes==null){refpos.index=pos;return r;}dir=pos>r.totalCount/2? -1:1;if(dir<0){nodeidx=r.nodes.length-1;pos=r.totalCount-pos;}else{nodeidx=0;}}else{pos-=node.totalCount; ++nodeidx;}}else{if(pos<node.totalCount){pos=node.totalCount-pos;r=node;if(r.nodes==null){refpos.index=pos;return r;}dir=pos>r.totalCount/2? -1:1;if(dir<0){nodeidx=r.nodes.length-1;pos=r.totalCount-pos;}else{nodeidx=0;}}else{pos+=node.totalCount; --nodeidx;}}}};_pBTree._nodeFind=function(r,key,keycompare,duplicatesBias,refVal){var arrayUtil=nexacro._ChartGraphicsLibArray,tmpRefval={};var pos=arrayUtil.binarySearch(r.keys,0,r.nodeCount,key,keycompare),prevR=r,prevPos=pos;while(r.nodes!=null){if(pos>=0){if(duplicatesBias!=0){tmpRefval.node=r;tmpRefval.pos=pos;this._moveToDuplicatesBoundary(key,keycompare,duplicatesBias,tmpRefval);r=tmpRefval.node;pos=tmpRefval.pos;}r=r.nodes[pos];}else{pos=~pos;if(pos>0){ --pos;}r=r.nodes[pos];}if(r==null){r=prevR;pos=prevPos;break;}prevR=r;prevPos=pos;pos=arrayUtil.binarySearch(r.keys,0,r.nodeCount,key,keycompare);}var leaf=r;refVal.leaf=r;if(pos<0){pos=~pos;refVal.pos=pos;return false;}refVal.pos=pos;if(duplicatesBias!=0){tmpRefval.node=leaf;tmpRefval.pos=pos;this._moveToDuplicatesBoundary(key,keycompare,duplicatesBias,tmpRefval);refVal.leaf=tmpRefval.node=tmpRefval.node;refVal.pos=tmpRefval.pos;}return true;};_pBTree._nodeInsert=function(key,leaf,pos,refRoot){if(this._ensureSpace(leaf,refRoot)&&pos>leaf.nodeCount){pos-=leaf.nodeCount;leaf=leaf.next;}leaf.keys.splice(pos,0,key); ++leaf.nodeCount;this._ensureParentKey(leaf,pos);for(var node=leaf;node!=null;node=node.parent){ ++node.totalCount;}};_pBTree._nodeRemove=function(leaf,pos,refRoot){if(!leaf){return false;}for(var node=leaf;node!=null;node=node.parent){ --node.totalCount;}-- leaf.nodeCount;leaf.keys.splice(pos,1);if(leaf.nodeCount>0){this._ensureParentKey(leaf,pos);}this._merge(leaf,refRoot);return true;};_pBTree._nodeClear=function(firstNode){firstNode.keys=[];firstNode.nodeCount=0;firstNode.totalCount=0;firstNode.parent=null;firstNode.next=null;};_pBTree._arrayClear=function(arr,start,len){var end=start+len,arrLen=arr.length,isLastClear=end==arrLen;for(var i=start;i<end;i++ ){arr[i]=null;}if(isLastClear){arr.length=start;}};_pBTree._arrayIndexOf=function(arr,item,from,len){for(;from<len;from++ ){if(arr[from]==item){return from;}}return  -1;};_pBTree._getRootIndex=function(leaf,pos){var node=leaf;var rootIndex=pos,nodePos;var p;while(p=node.parent){nodePos=this._arrayIndexOf(p.nodes,node,0,p.nodeCount);for(var i=0;i<nodePos; ++i){rootIndex+=node.parent.nodes[i].totalCount;}node=node.parent;}return rootIndex;};_pBTree._moveToDuplicatesBoundary=function(key,keycompare,duplicatesBias,refVal){var pos=refVal.pos,node=refVal.node;if(duplicatesBias<0){while(pos>0&&0==keycompare(node.keys[pos-1],key)){ --pos;}if(pos==0&&node.prev!=null){var prev=node.prev;var prevPos=prev.nodeCount;while(prevPos>0&&0==keycompare(prev.keys[prevPos-1],key)){ --prevPos;}if(prevPos<prev.nodeCount){node=prev;pos=prevPos;}}}else{while(pos<node.nodeCount-1&&0==keycompare(node.keys[pos+1],key)){ ++pos;}}refVal.pos=pos;refVal.node=node;};_pBTree._ensureSpace=function(node,refRoot){if(node.nodeCount<this._capacity){return false;}this._ensureParent(node,refRoot);this._ensureSpace(node.parent,refRoot);var sibling=this._makeNode(node.nodes==null);sibling.next=node.next;sibling.prev=node;sibling.parent=node.parent;if(node.next!=null){node.next.prev=sibling;}node.next=sibling;var pos=this._arrayIndexOf(node.parent.nodes,node,0,node.parent.nodeCount);var siblingPos=pos+1;node.parent.keys.splice(siblingPos,0,node.parent.keys[siblingPos]);node.parent.nodes.splice(siblingPos,0,null); ++node.parent.nodeCount;node.parent.nodes[siblingPos]=sibling;var half=node.nodeCount/2;var halfCount=node.nodeCount-half;this._move(node,half,sibling,0,halfCount);return true;};_pBTree._movecopy=function(source,sourceIndex,sourceTotal,target,targetIndex,targetTotal,count){var arrayUtil=nexacro._ChartGraphicsLibArray;arrayUtil.arrayCopy(target,targetIndex,target,targetIndex+count,targetTotal-targetIndex);arrayUtil.arrayCopy(source,sourceIndex,target,targetIndex,count);arrayUtil.arrayCopy(source,sourceIndex+count,source,sourceIndex,sourceTotal-sourceIndex-count);this._arrayClear(source,sourceTotal-count,count);};_pBTree._move=function(source,sourceIndex,target,targetIndex,moveCount){this._movecopy(source.keys,sourceIndex,source.nodeCount,target.keys,targetIndex,target.nodeCount,moveCount);var totalMoveCount;if(source.nodes==null){totalMoveCount=moveCount;if(this._insertedKey){if(target.nodes==null&&target.next==null){this.last=target;}}}else{this._movecopy(source.nodes,sourceIndex,source.nodeCount,target.nodes,targetIndex,target.nodeCount,moveCount);totalMoveCount=0;for(var i=0;i<moveCount; ++i){var child=target.nodes[targetIndex+i];child.parent=target;totalMoveCount+=child.totalCount;}}source.nodeCount-=moveCount;target.nodeCount+=moveCount;var sn=source;var tn=target;while(sn!=null&&sn!=tn){sn.totalCount-=totalMoveCount;tn.totalCount+=totalMoveCount;sn=sn.parent;tn=tn.parent;}this._ensureParentKey(source,sourceIndex);this._ensureParentKey(target,targetIndex);};_pBTree._ensureParent=function(node,refRoot){if(node.parent!=null){return;}var parent=this._makeNode(false);parent.totalCount=node.totalCount;parent.nodeCount=1;parent.keys[0]=node.keys[0];parent.nodes[0]=node;node.parent=parent;refRoot.root=parent;};_pBTree._ensureParentKey=function(node,pos){while(pos==0&&node.parent!=null){pos=this._arrayIndexOf(node.parent.nodes,node,0,node.parent.nodeCount);node.parent.keys[pos]=node.keys[0];node=node.parent;}};_pBTree._merge=function(node,refRoot){if(node.nodeCount==0){if(node.parent==null){if(this._insertedKey){this.last=this.first;}return;}var pos=this._arrayIndexOf(node.parent.nodes,node,0,node.parent.nodeCount); --node.parent.nodeCount;var arrayUtil=nexacro._ChartGraphicsLibArray;arrayUtil.arrayCopy(node.parent.keys,pos+1,node.parent.keys,pos,node.parent.nodeCount-pos);arrayUtil.arrayCopy(node.parent.nodes,pos+1,node.parent.nodes,pos,node.parent.nodeCount-pos);node.parent.keys.length=node.parent.nodeCount;node.parent.nodes.length=node.parent.nodeCount;if(node.parent.nodeCount>0){this._ensureParentKey(node.parent,pos);}node.prev.next=node.next;if(node.next!=null){node.next.prev=node.prev;}this._merge(node.parent,refRoot);return;}if(node.next==null){if(node.parent==null&&node.nodeCount==1&&node.nodes!=null){refRoot.root=node.nodes[0];refRoot.root.parent=null;}if(this._insertedKey&&node.nodes==null){this.last=node;}return;}if(node.nodeCount>=this._capacity/2){return;}var count=node.next.nodeCount;if((node.nodeCount+count)>this._capacity){count=count-parseInt((node.nodeCount+count)/2);}this._move(node.next,0,node,node.nodeCount,count);this._merge(node.next,refRoot);};}if(!nexacro._ChartColorset){nexacro._ChartColorset={};nexacro._ChartColorset.colorCategory=["color10","color12","color20","color20b","color20c","colorMix5","colorMix10","colorMix12","colorMix15","colorMix20","colorMix30","colorMix40","colorMix50","colorBlue5","colorBlue10","colorPurple5","colorPurple10","colorRed5","colorRed10","colorGreen5","colorGreen10"];nexacro._ChartColorset.color10=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];nexacro._ChartColorset.color12=["#1abd9c","#1a9dbc","#1a70bd","#1a1ebd","#5508a3","#c01aa1","#d71e33","#e4531f","#e4881f","#dacb00","#bcd71e","#43c41b"];nexacro._ChartColorset.color20=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];nexacro._ChartColorset.color20b=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"];nexacro._ChartColorset.color20c=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];nexacro._ChartColorset.colorMix5=["#1abd9d","#1a71bd","#c2251b","#c38e1d","#21c34d"];nexacro._ChartColorset.colorMix10=["#1abd9c","#1a85be","#1a67bf","#1a4cbf","#641ac0","#9a1ac0","#c2251b","#c2541b","#c2911d","#21c34d"];nexacro._ChartColorset.colorMix12=["#1abd9c","#1a9dbc","#1a70bd","#1a1ebd","#5508a3","#c01aa1","#d71e33","#e4531f","#e4881f","#dacb00","#bcd71e","#43c41b"];nexacro._ChartColorset.colorMix15=["#1abd9c","#1a92be","#1a75bf","#1a59bf","#1a3cbf","#4a1abf","#621ac0","#7e1ac0","#9a1ac0","#c2261b","#c2471b","#c2611b","#c2951b","#8ac21b","#1bc366"];nexacro._ChartColorset.colorMix20=["#1abd9c","#1a9bbe","#1a8abe","#1a6dbf","#1a4dbf","#1a2cbf","#231abf","#361abf","#4a1abf","#5c1ac0","#741ac0","#881ac0","#a21bc0","#b21bc0","#c2371b","#c2741b","#c2981b","#a9c21b","#61c31b","#1bc366"];nexacro._ChartColorset.colorMix30=["#1abd9c","#1aa6be","#1a93be","#1a85be","#1a73bf","#1a67bf","#1a55bf","#1a3fbf","#1a28bf","#1e1abf","#2d1abf","#3a1abf","#451abf","#531abf","#601ac0","#6e1ac0","#7f1ac0","#8d1ac0","#9c1ac0","#ac1bbf","#bf1b8e","#c22a1b","#c2591b","#c27c1b","#c29e1b","#bdc11b","#9ac21b","#74c31b","#4ac31b","#1bc366"];nexacro._ChartColorset.colorMix40=["#1abd9c","#1ab0bd","#1a9cbe","#1a92be","#1a8abe","#1a7bbe","#1a6ebf","#1a67bf","#1a59bf","#1a4abf","#1a32bf","#1a22bf","#1d1abf","#261abf","#341abf","#3c1abf","#441abf","#4e1abf","#561abf","#641ac0","#6c1ac0","#781ac0","#871ac0","#911ac0","#9a1ac0","#a51bc0","#b21bc0","#c11b8d","#c2251b","#c2401b","#c2661b","#c27d1b","#c2961b","#c1b51b","#a8c21b","#91c21b","#79c31b","#4fc31b","#34c31b","#1bc366"];nexacro._ChartColorset.colorMix50=["#1abd9c","#1ab2bd","#1aa7be","#1a9bbe","#1a92be","#1a8abe","#1a7fbe","#1a75bf","#1a6ebf","#1a67bf","#1a59bf","#1a4cbf","#1a3ebf","#1a30bf","#1a22bf","#1d1abf","#251abf","#2d1abf","#341abf","#3c1abf","#441abf","#4c1abf","#541abf","#5c1ac0","#641ac0","#6c1ac0","#751ac0","#7f1ac0","#881ac0","#911ac0","#9a1ac0","#a41bc0","#ad1bc0","#b91bc0","#c11b8d","#c2251b","#c23d1b","#c2541b","#c26b1b","#c27f1b","#c2961b","#c2ae1b","#c0c21b","#a8c21b","#91c21b","#7ac31b","#63c31b","#4bc31b","#34c31b","#1bc366"];nexacro._ChartColorset.colorBlue5=["#1a3ebf","#1a59bf","#1a7fbe","#1aa7be","#1abd9c"];nexacro._ChartColorset.colorBlue10=["#1a22bf","#1a3ebf","#1a4cbf","#1a59bf","#1a6ebf","#1a7fbe","#1a92be","#1aa7be","#1ab2bd","#1abd9c"];nexacro._ChartColorset.colorPurple5=["#451abf","#5d1abf","#771abf","#a01abf","#bf1b8e"];nexacro._ChartColorset.colorPurple10=["#451abf","#511abf","#5d1abf","#6a1abf","#771abf","#851abf","#931abf","#931abf","#b11bbf","#bf1b8e"];nexacro._ChartColorset.colorRed5=["#d21515","#de360f","#eb5d08","#f27803","#f79a00"];nexacro._ChartColorset.colorRed10=["#d21515","#da2a11","#de360f","#e2420d","#e84a07","#eb5d08","#ef6b05","#f27803","#f58702","#f79a00"];nexacro._ChartColorset.colorGreen5=["#1bc366","#4bcc0b","#6dce08","#93d004","#bcd200"];nexacro._ChartColorset.colorGreen10=["#1bc366","#27ca0f","#38cb0d","#49cc0b","#5bcd09","#6dce08","#80cf06","#93d004","#a7d102","#bcd200"];nexacro._ChartColorset.getColorCategory=function(){return nexacro._ChartColorset.colorCategory;};}
if(!nexacro.BasicChart){nexacro.BasicChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._AxisChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");this._visibleSeriesset=[];};var _pBasicChart=nexacro._createPrototype(nexacro._AxisChartBase,nexacro.BasicChart);nexacro.BasicChart.prototype=_pBasicChart;_pBasicChart._type_name="BasicChart";_pBasicChart.categoryaxis=null;_pBasicChart.bargrouping=true;_pBasicChart.barsize=undefined;_pBasicChart.stacktype="none";_pBasicChart.rotateaxis=false;_pBasicChart._drawing=false;_pBasicChart._isnegativedata=false;_pBasicChart._barsize=0.8;_pBasicChart._chartbarsize=0.8;_pBasicChart._barVisibleSeriesCnt=0;_pBasicChart._lineVisibleSeriesCnt=0;_pBasicChart._stackPercentBases={};_pBasicChart._stackPercentSums={};_pBasicChart._stackGroupingArray={};_pBasicChart._stackGroupingObjList=[];_pBasicChart._isTimeData=false;_pBasicChart._isCompositeSeries=false;_pBasicChart._rotateaxisX=null;_pBasicChart._rotateaxisY=null;_pBasicChart._invalidcategorycolumn=false;_pBasicChart._bargrouping=true;_pBasicChart.stacktotalvisible=false;_pBasicChart.stacktotallinestyle=null;_pBasicChart.stacktotalshadowstyle=null;_pBasicChart.stacktotaltextcolor=null;_pBasicChart._stacktotallinestyle=null;_pBasicChart._stacktotalshadowstyle=null;_pBasicChart._stacktotaltextcolor=null;_pBasicChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._AxisChartBase.prototype.on_create_contents.call(this);}};_pBasicChart.on_destroy_contents=function(){this.stacktype=null;this.categorycolumn=null;this.barsize=null;this.bargrouping=null;this._drawing=null;this._isnegativedata=null;this._barsize=null;this._chartbarsize=null;this._barVisibleSeriesCnt=null;this._lineVisibleSeriesCnt=null;this._stackPercentBases=null;this._stackPercentSums=null;this._stackGroupingArray=null;this._stackGroupingObjList=null;this._isTimeData=null;this._bargrouping=null;this.stacktotalvisible=null;this.stacktotallinestyle=null;this.stacktotalshadowstyle=null;this.stacktotaltextcolor=null;this._stacktotallinestyle=null;this._stacktotalshadowstyle=null;this._stacktotaltextcolor=null;if(this.categoryaxis){this._deleteCategoryaxis();}nexacro._AxisChartBase.prototype.on_destroy_contents.call(this);return true;};_pBasicChart.set_categoryaxis=function(){};_pBasicChart.set_stacktype=function(val){var stacktype_enum=["none","normal","percent"];if(stacktype_enum.indexOf(val)== -1){return;}if(this.stacktype!=val){this.stacktype=val;this.on_apply_stacktype();}this._reset=true;this._draw();};_pBasicChart.on_apply_stacktype=function(){var barsize=this.barsize;var s;var i;var seriesset=this._visibleSeriesset;var ispercent=false;for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){var stacktype=s.stacktype=="none"?this.stacktype:s.stacktype;if(stacktype=="percent"){ispercent=true;}}}for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){s._stacktype=s.stacktype=="none"?this.stacktype:s.stacktype;if(s._stacktype=="percent"){ispercent=true;}if(this.stacktype=="percent"||ispercent){s._stacktype="percent";}}}var length=this._getVisibleStackGroupingLength();if(length>1){this._bargrouping=this.bargrouping;}else{this._bargrouping=false;}if(this._bargrouping){if(barsize==undefined){barsize=80;}this._barsize=barsize*0.01;this._chartbarsize=barsize*0.01;}this._changedData=true;};_pBasicChart.set_stacktotalvisible=function(val){val=nexacro._toBoolean(val);if(this.stacktotalvisible!=val){this.stacktotalvisible=val;this.on_apply_stacktotalvisible(val);}if(this.stacktype!="normal"){this.set_stacktype("normal");return;}this._reset=true;this._draw();};_pBasicChart.on_apply_stacktotalvisible=function(val){this._changedData=true;};_pBasicChart.set_stacktotallinestyle=function(val){if(val==""){val=null;}this.stacktotallinestyle=val;if(val){if(this._stacktotallinestyle==null||this._stacktotallinestyle.value!=val){var stacktotallinestyle=nexacro.BorderLineObject(val);this._stacktotallinestyle=stacktotallinestyle;this.on_apply_stacktotallinestyle(stacktotallinestyle);}}else{if(this._stacktotallinestyle){this._stacktotallinestyle=null;this.on_apply_stacktotallinestyle(null);}}this._reset=true;this._draw();};_pBasicChart.on_apply_stacktotallinestyle=function(val){};_pBasicChart.set_stacktotalshadowstyle=function(val){if(val==""){val=null;}this.stacktotalshadowstyle=val;if(val){if(this._stacktotalshadowstyle==null||this._stacktotalshadowstyle.value!=val){var stacktotalshadowstyle=nexacro.ShadowObjectNew(val);this._stacktotalshadowstyle=stacktotalshadowstyle;this.on_apply_stacktotalshadowstyle(stacktotalshadowstyle);}}else{if(this._stacktotalshadowstyle){this._stacktotalshadowstyle=null;this.on_apply_stacktotalshadowstyle(null);}}this._reset=true;this._draw();};_pBasicChart.on_apply_stacktotalshadowstyle=function(val){};_pBasicChart.set_stacktotaltextcolor=function(val){this.stacktotaltextcolor=val;if(val){if(this._stacktotaltextcolor==null||this._stacktotaltextcolor.value!=val){var stacktotaltextcolor=nexacro.ColorObject(val);this._stacktotaltextcolor=stacktotaltextcolor;this.on_apply_stacktotaltextcolor(stacktotaltextcolor);}}else{if(this._stacktotaltextcolor){this._stacktotaltextcolor=null;this.on_apply_stacktotaltextcolor(null);}}this._reset=true;this._draw();};_pBasicChart.on_apply_stacktotaltextcolor=function(val){this._changedData=true;};_pBasicChart.set_categorycolumn=function(v){if(v===undefined||v===null){v="";}if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}if(this._changedData==true){this._reset=true;this._draw();}else{this._draw();}};_pBasicChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pBasicChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pBasicChart.set_barsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.barsize!=val){this.barsize=val;this.on_apply_barsize(lVal);}this._reset=true;this._draw();};_pBasicChart.on_apply_barsize=function(barsize){if(!nexacro._ChartGraphicsLib.isEmpty(barsize)){this._barsize=barsize*0.01;this._chartbarsize=barsize*0.01;}else{this._barsize=0.8;this._chartbarsize=0.8;}this._changedData=true;};_pBasicChart.set_bargrouping=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.bargrouping!=val){this.bargrouping=val;this.on_apply_bargrouping();}this._reset=true;this._draw();};_pBasicChart.on_apply_bargrouping=function(){this._bargrouping=this.bargrouping;if(this.stacktype=="normal"||this.stacktype=="percent"){this._bargrouping=false;}else{this._bargrouping=this.bargrouping;}var barsize=this.barsize;if(this._bargrouping){if(barsize==undefined){barsize=80;}this._barsize=barsize*0.01;this._chartbarsize=barsize*0.01;}this._changedData=true;};_pBasicChart.set_rotateaxis=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.rotateaxis!=val){this.rotateaxis=val;this.on_apply_rotateaxis();}this._drawing=false;this._reset=true;this._draw();};_pBasicChart.on_apply_rotateaxis=function(){var categoryaxis=this.categoryaxis;var valueaxes=this.valueaxes;var seriesset=this.seriesset;var s1,s2;var linevisible1=false;var linevisible2=false;var rotateaxis=this.rotateaxis;var i;for(i=0;i<seriesset.length;i++ ){s1=seriesset[i];s2=seriesset[i+1];if(s1){linevisible1=s1.linevisible;if(linevisible1){break;}}if(s2){linevisible2=s2.linevisible;if(linevisible2){break;}}}if(this._isCompositeSeries){return false;}if(categoryaxis){categoryaxis.on_apply_opposite(categoryaxis.opposite);categoryaxis.on_apply_titlerotate(categoryaxis.titlerotate);}else{if(rotateaxis&&!this._isCompositeSeries){this._rotateaxisX=true;}else{this._rotateaxisX=false;}}if(valueaxes.length>0){for(i=0;i<valueaxes.length;i++ ){var valueaxis=valueaxes[i];if(valueaxis){valueaxis.on_apply_opposite(valueaxis.opposite);valueaxis.on_apply_titlerotate(valueaxis.titlerotate);}}}else{if(rotateaxis&&!this._isCompositeSeries){this._rotateaxisY=true;}else{this._rotateaxisY=false;}}this._xaxes=[];this._yaxes=[];for(i=0;i<this._axes.length;i++ ){var axis=this._axes[i];var location=axis._location;if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}}this._rearrange=true;this._changedData=true;};_pBasicChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var barvisible=s._orgBarVisible,pointvisible=s._orgPointVisible,linevisible=s._orgLineVisible;s._orgBarVisible=undefined;s._orgPointVisible=undefined;s._orgLineVisible=undefined;this._drawing=true;if(barvisible){s.set_barvisible(true);}if(pointvisible){s.set_pointvisible(true);}if(linevisible){s.set_linevisible(true);}this._drawing=false;this._changedData=true;this._reset=true;this._draw();}};_pBasicChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgBarVisible===undefined||s._orgBarVisible===null){s._orgBarVisible=s.barvisible;}if(s._orgPointVisible===undefined||s._orgPointVisible===null){s._orgPointVisible=s.pointvisible;}if(s._orgLineVisible===undefined||s._orgLineVisible===null){s._orgLineVisible=s.linevisible;}this._drawing=true;s.set_barvisible(false);s.set_pointvisible(false);s.set_linevisible(false);this._drawing=false;this._changedData=true;this._reset=true;this._draw();}};_pBasicChart.showCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(true);}};_pBasicChart.hideCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(false);}};_pBasicChart._destroySubControl=function(){nexacro._AxisChartBase.prototype._destroySubControl.call(this);if(this.categoryaxis){this._deleteCategoryaxis();}};_pBasicChart._deleteCategoryaxis=function(){var categoryaxis=this.categoryaxis;if(categoryaxis){this._deleteAxis(categoryaxis,true);this._changedData=true;}};_pBasicChart._createSeries=function(id){var series=new nexacro.ChartBasicSeriesControl(id,this,this._graphicsControl);return series;};_pBasicChart._setSeries=function(){var categoryaxis,valueaxis;nexacro._AxisChartBase.prototype._setSeries.call(this);nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){if(obj){categoryaxis=this.categoryaxis;valueaxis=this.getValueaxisByID(obj.valueaxis);if(categoryaxis){if(this.valueaxes.length==0){categoryaxis.on_apply_visible(false);categoryaxis.on_apply_boardlinevisible(false);}else{categoryaxis._afterSetProperties();categoryaxis.on_apply_visible(categoryaxis.visible);}}if(valueaxis){valueaxis.on_apply_visible(valueaxis.visible);obj.on_apply_valueaxis(valueaxis.id);}else{var length=this.valueaxes.length;if(length<=0){return false;}for(var i=0;i<length;i++ ){valueaxis=this.valueaxes[i];if(valueaxis){var group=valueaxis._group;if(group){var visible=valueaxis.visible;if(visible){valueaxis.on_apply_visible(visible);obj.on_apply_valueaxis(valueaxis.id);break;}}}}}if(!categoryaxis){return false;}if(categoryaxis._direction=="x"){obj._xaxis=categoryaxis;obj._yaxis=valueaxis;}else{obj._xaxis=valueaxis;obj._yaxis=categoryaxis;}}},this);};_pBasicChart._createCategoryaxis=function(o,id){if(this.categoryaxis){return false;}var series=this.seriesset,rotateaxis=this.rotateaxis,s1,s2,linevisible1=false,linevisible2=false;for(var i=0;i<series.length;i++ ){s1=series[i];s2=series[i+1];if(s1){linevisible1=s1.linevisible;if(linevisible1){break;}}if(s2){linevisible2=s2.linevisible;if(linevisible2){break;}}}if(rotateaxis&&this._isCompositeSeries){this.rotateaxis=false;}var axis,location;if(!id){id="Categoryaxis";}axis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);axis._type_name="ChartCategoryAxisControl";axis._type="categoryAxis";if(this._isTimeData&&axis.axistype=="datetime"){axis._isTimeAxis=true;}if(o){location=o.opposite?"top":"bottom";}if(!this._isCompositeSeries&&this.rotateaxis&&this._rotateaxisX){location="left";}var opposite=o?o.opposite:axis.opposite;axis.on_apply_opposite(opposite);this.categoryaxis=axis;this._axes.push(axis);if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}return axis;};_pBasicChart._createValueaxes=function(o,id){var seriesset=this.seriesset;var s1,s2;var linevisible1=false;var linevisible2=false;var location;var valueaxis;for(var i=0;i<seriesset.length;i++ ){s1=seriesset[i];s2=seriesset[i+1];if(s1){linevisible1=s1.linevisible;if(linevisible1){break;}}if(s2){linevisible2=s2.linevisible;if(linevisible2){break;}}}valueaxis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);valueaxis._type="valueAxis";if(o){location=o.opposite?"right":"left";}if(!this._isCompositeSeries&&this.rotateaxis&&this._rotateaxisY){location="bottom";}var opposite=o.opposite||valueaxis.opposite;valueaxis.on_apply_opposite(opposite);this.valueaxes.push(valueaxis);this._axes.push(valueaxis);if(location=="top"||location=="bottom"){this._xaxes.push(valueaxis);}else{this._yaxes.push(valueaxis);}return valueaxis;};_pBasicChart._setDatapointFormat=function(){nexacro._AxisChartBase.prototype._setDatapointFormat.call(this);this._barVisibleSeriesCnt=0;this._lineVisibleSeriesCnt=0;this._getVisibleSeries();this.on_apply_stacktype();this._makeVisibleStackGroupingArray();var seriesset=this._visibleSeriesset;var series;var stacktype;var pointshape;for(var i=0;i<seriesset.length;i++ ){series=seriesset[i];if(series){stacktype=series._stacktype=="none"?this.stacktype:series._stacktype;pointshape=series.pointshape;if(stacktype=="percent"){this._setStackPercent(series);}if((pointshape=="square")||(pointshape=="diamond")||(pointshape=="triangle")||(pointshape=="cross")){if(series._pointshapeObj[pointshape]){series._pointshape=series._pointshapeObj[pointshape];}}}}if(stacktype=="percent"){for(i=0;i<this._stackGroupingObjList.length;i++ ){var stackobject=this._stackGroupingObjList[i];if(stackobject&&stackobject._stackPercentBases&&stackobject._stackPercentSums){stackobject._stackPercentBases={};stackobject._stackPercentSums=this._getSumsStackPercent(stackobject._list);}}}};_pBasicChart._checkStackEliminateDuplicate=function(arr){var i,len=arr.length,out=[],obj={};for(i=0;i<len;i++ ){obj[arr[i]]=0;}for(i in obj){out.push(i);}return out;};_pBasicChart._getVisibleStackGroupObject=function(s){var stackgroupobject;var stackgroupid;if(this._stackGroupingArray&&s){s._stacktype=s._stacktype=="none"?this.stacktype:s._stacktype;if(s._stacktype=="none"){stackgroupid="+nonestack+"+s.id;}else if(s.stackbargroup!==undefined&&s.stackbargroup!==null&&s.stackbargroup!==""){stackgroupid=s.stackbargroup;}else{stackgroupid="+nullstackgroup+";}var j,key;for(key in this._stackGroupingArray){if(key==stackgroupid){for(j=0;j<this._stackGroupingArray[stackgroupid]._list.length;j++ ){if(this._stackGroupingArray[stackgroupid]._list[j]==s){stackgroupobject=this._stackGroupingArray[stackgroupid];return stackgroupobject;}}}}}return stackgroupobject;};_pBasicChart._getVisibleStackGroupindexs=function(s){var barindex=[];var xindex= -1;var yindex= -1;var stackgroupid;if(this._stackGroupingArray&&s){s._stacktype=s._stacktype=="none"?this.stacktype:s._stacktype;if(s._stacktype=="none"){stackgroupid="+nonestack+"+s.id;}else if(s.stackbargroup!==undefined&&s.stackbargroup!==null&&s.stackbargroup!==""){stackgroupid=s.stackbargroup;}else{stackgroupid="+nullstackgroup+";}var i=0,j,key;for(key in this._stackGroupingArray){if(key==stackgroupid){xindex=this._stackGroupingArray[stackgroupid]._orderindex;for(j=0;j<this._stackGroupingArray[stackgroupid]._list.length;j++ ){if(this._stackGroupingArray[stackgroupid]._list[j]==s){yindex=j;break;}}barindex[0]=xindex;barindex[1]=yindex;return barindex;}i++ ;}}};_pBasicChart._makeVisibleStackGroupingArray=function(){this._stackGroupingArray={};this._stackGroupingObjList=[];var seriesset=this._visibleSeriesset;var nonstackid="+nonestack+";var nullstackgroupid="+nullstackgroup+";var orderindex=0;var s;var i;for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){s._stacktype=s._stacktype=="none"?this.stacktype:s._stacktype;if(s._stacktype=="none"){var stackid=nonstackid+s.id;if(stackid in this._stackGroupingArray){this._stackGroupingArray[stackid]._list.push(s);}else{this._stackGroupingArray[stackid]={};this._stackGroupingArray[stackid]._list=[];this._stackGroupingArray[stackid]._orderindex=orderindex;orderindex++ ;this._stackGroupingArray[stackid]._list.push(s);this._stackGroupingObjList.push(this._stackGroupingArray[stackid]);}}else if(s.stackbargroup!==undefined&&s.stackbargroup!==null&&s.stackbargroup!==""){if(s.stackbargroup in this._stackGroupingArray){this._stackGroupingArray[s.stackbargroup]._list.push(s);}else{this._stackGroupingArray[s.stackbargroup]={};this._stackGroupingArray[s.stackbargroup]._list=[];this._stackGroupingArray[s.stackbargroup]._orderindex=orderindex;orderindex++ ;this._stackGroupingArray[s.stackbargroup]._stackPercentBases={};this._stackGroupingArray[s.stackbargroup]._stackPercentSums={};this._stackGroupingArray[s.stackbargroup]._list.push(s);this._stackGroupingObjList.push(this._stackGroupingArray[s.stackbargroup]);}}else{if(nullstackgroupid in this._stackGroupingArray){this._stackGroupingArray[nullstackgroupid]._list.push(s);}else{this._stackGroupingArray[nullstackgroupid]={};this._stackGroupingArray[nullstackgroupid]._list=[];this._stackGroupingArray[nullstackgroupid]._orderindex=orderindex;orderindex++ ;this._stackGroupingArray[nullstackgroupid]._stackPercentBases={};this._stackGroupingArray[nullstackgroupid]._stackPercentSums={};this._stackGroupingArray[nullstackgroupid]._list.push(s);this._stackGroupingObjList.push(this._stackGroupingArray[nullstackgroupid]);}}}}};_pBasicChart._getVisibleStackGroupingLength=function(){var nullstackcount=0;var nonestackcount=0;var stackbargroup=[];var seriesset=this._visibleSeriesset;var s;var i;for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s&&s.barvisible){s._stacktype=s._stacktype=="none"?this.stacktype:s._stacktype;if(s._stacktype=="none"){nonestackcount++ ;}else if(s.stackbargroup!==undefined&&s.stackbargroup!==null&&s.stackbargroup!==""){stackbargroup.push(s.stackbargroup);}else{if(nullstackcount==0){nullstackcount++ ;}}}}if(stackbargroup.length>1){stackbargroup=this._checkStackEliminateDuplicate(stackbargroup);}var stackbargrouplength=0;if(stackbargroup){stackbargrouplength=stackbargroup.length;}return nullstackcount+nonestackcount+stackbargrouplength;};_pBasicChart._setDatapoint=function(){nexacro._AxisChartBase.prototype._setDatapoint.call(this);if(this.categoryaxis&&this.categoryaxis._isTimeAxis){if(this.categoryaxis._resizeClient){this._reset=true;}this.categoryaxis.ticks=this.categoryaxis._preGenerateTimeTick();}var seriesset=this._visibleSeriesset;if(this._barVisibleSeriesCnt>1&&this._bargrouping){var chartBarWidth=this._chartbarsize;this._barsize=chartBarWidth*(1/this._getVisibleStackGroupingLength());}else{this._barsize=this._chartbarsize;}var visibleSeriesCnt=this._visibleSeriesset.length;var i;var series,stacktype,bargrouping,barvisible=false,pointvisible=false,linevisible=false;for(i=0;i<visibleSeriesCnt;i++ ){series=seriesset[i];if(series){stacktype=series._stacktype=="none"?this.stacktype:series._stacktype;barvisible=series.barvisible;linevisible=series.linevisible;pointvisible=series.pointvisible;if(barvisible||linevisible||pointvisible){if(visibleSeriesCnt>1&&stacktype=="normal"){series._setStackDatapoints();}else if(visibleSeriesCnt>1&&stacktype=="percent"){series._setStackPercentDatapoints();}}}}for(i=0;i<visibleSeriesCnt;i++ ){series=seriesset[i];bargrouping=this._bargrouping;if(series){barvisible=series.barvisible;if(barvisible){if(bargrouping&&this._getVisibleStackGroupingLength()>1){series._baralign="left";this._setGroupColumnDatapoints(series);}else{series._baralign="center";}}else{series._baralign="center";}}}};_pBasicChart._setStackPercent=function(series){var pThis=this,chart=this,data=series._data,keyIdx=0,valueIdx=1,stackPercentSums={};var stackobject=this._getVisibleStackGroupObject(series);stackPercentSums=stackobject._stackPercentSums;if(chart.rotateaxis&&!chart._isCompositeSeries){keyIdx=1;valueIdx=0;}this._stackPercents=[];nexacro._ChartGraphicsLibArray.forEach(data,function(d,i){var sum=stackPercentSums[d[keyIdx]];if(sum>0){pThis._stackPercents.push(d[valueIdx]*100/sum);}else{pThis._stackPercents.push(0);}});};_pBasicChart._getSumsStackPercent=function(stackgroupseries){var series,sums={},pThis=this;series=stackgroupseries;nexacro._ChartGraphicsLibArray.forEach(series,function(s,i){var keyIdx=0,valueIdx=1,format,isNumber=false;if(pThis.rotateaxis&&!pThis._isCompositeSeries){keyIdx=1;valueIdx=0;}format=s._datapoints.format[keyIdx];isNumber=format.number;nexacro._ChartGraphicsLibArray.forEach(s._data,function(d,j){var value=0,key;if(d[valueIdx]!=null){value=d[valueIdx];value= +value;if(isNaN(value)){value=0;}else if(value==Infinity){value=Number.MAX_VALUE;}else if(value== -Infinity){value= -Number.MAX_VALUE;}}if(isNumber){key=d[keyIdx];}else{key=j;}if(sums[key]){sums[key]+=value;}else{sums[key]=value;}});});return sums;};_pBasicChart._setGroupColumnDatapoints=function(series){var rotateaxis=this.rotateaxis,barVisibleSeriesset=[],barVisibleCnt=this._getVisibleStackGroupingLength(),datapoints=series._datapoints,shiftedPoints,borderWidthInXabsWidth,pixelInXWidthEquivalent=1,gridDimSize,minMaxValues,AxeSize,board=this._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._boardBorderWidth,borderHeight=this._boardBorderHeight,position,decallage=0,centerBarShift,isstepline=this._isstepline,pThis=this;function findPosition(series){var pos=0;var stackindex=pThis._getVisibleStackGroupindexs(series);if(stackindex){pos=stackindex[0];}return pos+1;}function calculCenterBarShift(){var width=0,serieswidth=0,barwidth=0,groupbarwidth=0,series;series=barVisibleSeriesset[Math.floor(barVisibleCnt/2)];if(series){serieswidth=series._groupbarwidth;if(serieswidth){groupbarwidth=pThis._toGroupBarWidth(serieswidth);}if(groupbarwidth==0){barwidth=pThis._barsize;}else{barwidth=groupbarwidth;}barwidth=pThis._getcheckTimeAxisBarWidth(barwidth);if(barVisibleCnt%2!=0){width=barwidth/2;}return width;}}function isBarAtLeftOfCenter(position){return position<=Math.ceil(barVisibleCnt/2);}function sumWidth(s,start,end){var totalWidth=0,barwidth=0;for(var i=start;i<=end;i++ ){var seriesbarwidth=s[i]._groupbarwidth,groupbarwidth=0;if(seriesbarwidth){groupbarwidth=pThis._toGroupBarWidth(seriesbarwidth);}if(groupbarwidth==0){barwidth=pThis._barsize;}else{barwidth=groupbarwidth;}barwidth=pThis._getcheckTimeAxisBarWidth(barwidth);totalWidth+=barwidth+borderWidthInXabsWidth*2;}return totalWidth;}function shiftPoints(datapoints,series,dx){var ps=datapoints.pointsize;var points=datapoints.points;var j=0;var linetype=series.linetype;if((linetype=="step"&&series.linevisible)||isstepline){ps+=3;}for(var i=rotateaxis?1:0;i<points.length;i+=ps){points[i]+=dx;if((linetype=="step"&&series.linevisible)||isstepline){if(datapoints.points.length>i+3){points[i+3]=points[i];}}series._data[j][3]=points[i];j++ ;}return points;}function getAxeMinMaxValues(datapoints){var minMaxValues=new Array();var xmin=Number.POSITIVE_INFINITY,ymin=Number.POSITIVE_INFINITY,xmax=Number.NEGATIVE_INFINITY,ymax=Number.NEGATIVE_INFINITY,points,pointsize,val,f,format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){continue;}for(var j=0;j<pointsize;j++ ){val=points[i+j];f=format[j];if(!f||val==Number.MAX_VALUE||val== -Number.MAX_VALUE){continue;}if(f.x){if(val<xmin){xmin=val;}if(val>xmax){xmax=val;}}if(f.y){if(val<ymin){ymin=val;}if(val>ymax){ymax=val;}}}}if(rotateaxis){if(nexacro._ChartGraphicsLib.isNumber(ymin)){minMaxValues[0]=Number(ymin);}if(nexacro._ChartGraphicsLib.isNumber(ymax)){minMaxValues[1]=Number(ymax);}}else{if(nexacro._ChartGraphicsLib.isNumber(xmin)){minMaxValues[0]=Number(xmin);}if(nexacro._ChartGraphicsLib.isNumber(xmax)){minMaxValues[1]=Number(xmax);}}return minMaxValues;}function calculBorderAndBarWidth(series){borderWidth=series._barborderwidth?(series._barborderwidth/2):0;borderWidthInXabsWidth=borderWidth*pixelInXWidthEquivalent;}for(var i=0;i<pThis._stackGroupingObjList.length;i++ ){var stackgroup=pThis._stackGroupingObjList[i];if(stackgroup){barVisibleSeriesset.push(stackgroup._list[0]);}}if(board){var axis;var tickstartgap=0;var tickendgap=0;var tickendspace=0;if(rotateaxis){axis=series._yaxis;if(axis){tickstartgap=axis._tickstartgap;tickendgap=axis._tickendgap;tickendspace=axis._tickendspace;}boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight-tickstartgap-tickendgap-tickendspace;}else{axis=series._xaxis;if(axis){tickstartgap=axis._tickstartgap;tickendgap=axis._tickendgap;tickendspace=axis._tickendspace;}boardWidth=board.width-borderWidth-tickstartgap-tickendgap-tickendspace;boardHeight=board.height-borderHeight;}}gridDimSize=rotateaxis?boardHeight:boardWidth;minMaxValues=getAxeMinMaxValues(datapoints);var min=minMaxValues[0];var max=minMaxValues[1];if(pThis.categoryaxis._min&&pThis.categoryaxis._min>minMaxValues[0]){min=pThis.categoryaxis._min;}if(pThis.categoryaxis._max&&pThis.categoryaxis._max<minMaxValues[1]){max=pThis.categoryaxis._max;}AxeSize=max-min;if(gridDimSize>0){pixelInXWidthEquivalent=AxeSize/gridDimSize;}else{pixelInXWidthEquivalent=0;}calculBorderAndBarWidth(series);position=findPosition(series);centerBarShift=calculCenterBarShift();if(isBarAtLeftOfCenter(position)){decallage= -1*(sumWidth(barVisibleSeriesset,position-1,Math.floor(barVisibleCnt/2)-1))-centerBarShift;}else{decallage=sumWidth(barVisibleSeriesset,Math.ceil(barVisibleCnt/2),position-2)+centerBarShift-borderWidthInXabsWidth;}shiftedPoints=shiftPoints(datapoints,series,decallage);datapoints.points=shiftedPoints;};_pBasicChart._toGroupBarWidth=function(barwidth){var groupbarwidth=barwidth*(1/this._getVisibleStackGroupingLength());return groupbarwidth;};_pBasicChart._getHighlightVisible=function(){var seriesset=this.seriesset;if(seriesset){var length=seriesset.length,highlightvisible=false;for(var i=0;i<length;i++ ){var s=seriesset[i];if(s){if(s.highlightbarvisible||s.highlightpointvisible||s.highlightlinevisible){highlightvisible=true;break;}}}return highlightvisible;}};_pBasicChart._getVisibleSeries=function(){var length=this.seriesset.length,barvisible=false,linevisible=false,pointvisible=false,visibleSeriesset=[];for(var i=0;i<length;i++ ){var series=this.seriesset[i];if(series){var data=series._data;if(data){if(data.length==0){continue;}}barvisible=series.barvisible;linevisible=series.linevisible;pointvisible=series.pointvisible;if(barvisible||linevisible||pointvisible){if(barvisible){this._barVisibleSeriesCnt++ ;}if(linevisible){this._lineVisibleSeriesCnt++ ;}visibleSeriesset.push(series);}}}this._visibleSeriesset=visibleSeriesset;};_pBasicChart._deleteSeries=function(series_,index){nexacro._ChartBase.prototype._deleteSeries.call(this,series_,index);var serieslength=this.seriesset.length;var series=this.seriesset;if(this.valueaxes){var valueaxes=this.valueaxes;for(var i=valueaxes.length-1;i> -1;i-- ){var bused=false;var valueaxis=valueaxes[i];if(valueaxis){for(var j=0;j<serieslength;j++ ){var s=series[j];if(s){if(s._yaxis&&s._yaxis.id==valueaxis.id){bused=true;}}}}if(!bused||serieslength==0){valueaxis._used=false;valueaxis.on_apply_visible(false);valueaxis.on_apply_boardlinevisible(false);}}}if(serieslength==0){if(this.categoryaxis){this.categoryaxis.on_apply_visible(false);this.categoryaxis.on_apply_boardlinevisible(false);}if(this.hrangebar){this.hrangebar.on_apply_visible(false);}if(this.vrangebar){this.vrangebar.on_apply_visible(false);}}};}if(!nexacro.ChartBasicSeriesControl){nexacro.ChartBasicSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];};var _pChartBasicSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartBasicSeriesControl);nexacro.ChartBasicSeriesControl.prototype=_pChartBasicSeriesControl;_pChartBasicSeriesControl._type_name="ChartBasicSeriesControl";_pChartBasicSeriesControl.barfillstyle="";_pChartBasicSeriesControl.barlinestyle="";_pChartBasicSeriesControl.baropacity=1;_pChartBasicSeriesControl.barsize=undefined;_pChartBasicSeriesControl.barvisible=true;_pChartBasicSeriesControl.highlightbarfillstyle="";_pChartBasicSeriesControl.highlightbarlinestyle="";_pChartBasicSeriesControl.highlightbaropacity=1;_pChartBasicSeriesControl.highlightbarvisible=false;_pChartBasicSeriesControl.highlightlineopacity=1;_pChartBasicSeriesControl.highlightlinestyle="";_pChartBasicSeriesControl.highlightlinevisible=false;_pChartBasicSeriesControl.highlightpointfillstyle="";_pChartBasicSeriesControl.highlightpointlinestyle="";_pChartBasicSeriesControl.highlightpointopacity=1;_pChartBasicSeriesControl.highlightpointsize=undefined;_pChartBasicSeriesControl.highlightpointvisible=false;_pChartBasicSeriesControl.lineareafillstyle="";_pChartBasicSeriesControl.lineareaopacity=1;_pChartBasicSeriesControl.lineareavisible=false;_pChartBasicSeriesControl.lineopacity=1;_pChartBasicSeriesControl.linestyle="";_pChartBasicSeriesControl.linetype="segment";_pChartBasicSeriesControl.linevisible=false;_pChartBasicSeriesControl.shadowstyle=null;_pChartBasicSeriesControl.barradius=0;_pChartBasicSeriesControl.pointfillstyle="";_pChartBasicSeriesControl.pointlinestyle="";_pChartBasicSeriesControl.pointopacity=1;_pChartBasicSeriesControl.pointshape="circle";_pChartBasicSeriesControl.pointsize=undefined;_pChartBasicSeriesControl.pointvisible=false;_pChartBasicSeriesControl.selectbarfillstyle="";_pChartBasicSeriesControl.selectbarlinestyle="";_pChartBasicSeriesControl.selectbaropacity=1;_pChartBasicSeriesControl.selectlineareafillstyle="";_pChartBasicSeriesControl.selectlineareaopacity=1;_pChartBasicSeriesControl.selectlineopacity=1;_pChartBasicSeriesControl.selectlinestyle="";_pChartBasicSeriesControl.selectpointfillstyle="";_pChartBasicSeriesControl.selectpointlinestyle="";_pChartBasicSeriesControl.selectpointopacity=1;_pChartBasicSeriesControl.stacktype="none";_pChartBasicSeriesControl.valueaxis="";_pChartBasicSeriesControl.stackbargroup="";_pChartBasicSeriesControl.autogradation="none";_pChartBasicSeriesControl.baritemtextposition="";_pChartBasicSeriesControl.pointitemtextposition="";_pChartBasicSeriesControl.lineitemtextposition="";_pChartBasicSeriesControl.baritemtextgap=undefined;_pChartBasicSeriesControl.pointitemtextgap=undefined;_pChartBasicSeriesControl.lineitemtextgap=undefined;_pChartBasicSeriesControl._pointshape=null;_pChartBasicSeriesControl._barborderwidth=null;_pChartBasicSeriesControl._pointborderwidth=null;_pChartBasicSeriesControl._lineborderwidth=null;_pChartBasicSeriesControl._linebordercolor=null;_pChartBasicSeriesControl._color=null;_pChartBasicSeriesControl._xaxis=null;_pChartBasicSeriesControl._yaxis=null;_pChartBasicSeriesControl._changedSeriesColor=true;_pChartBasicSeriesControl._barsize=null;_pChartBasicSeriesControl._groupbarwidth=null;_pChartBasicSeriesControl._baralign="center";_pChartBasicSeriesControl._barwidth=null;_pChartBasicSeriesControl._stacktype="none";_pChartBasicSeriesControl.set_shadowstyle=function(val){if(val==""){val=null;}this.shadowstyle=val;if(val){if(this._shadowstyle==null||this._shadowstyle.value!=val){var oldValue;if(this._shadowstyle){oldValue=this._shadowstyle.value;}this._changeContentsProperty("shadowstyle",val,oldValue);var shadowstyle=nexacro.ShadowObjectNew(val);this._shadowstyle=shadowstyle;this.on_apply_shadowstyle(shadowstyle);}}else{if(this._shadowstyle){this._shadowstyle=null;this.on_apply_shadowstyle(null);}}};_pChartBasicSeriesControl.on_apply_shadowstyle=function(shadowstyle){this._redrawSeries=false;this._applyPropertySeries("Line","shadowstyle",shadowstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_autogradation=function(val){if(!val||val==""){val="none";}if(val!=this.autogradation){this._changeContentsProperty("autogradation",val,this.autogradation);this.autogradation=val;this.on_apply_autogradation(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_autogradation=function(autogradation){this._redrawSeries=false;};_pChartBasicSeriesControl.set_valueaxis=function(val){if(this.valueaxis!=val){this._changeContentsProperty("valueaxis",val,this.valueaxis);this.valueaxis=val;this.on_apply_valueaxis(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_valueaxis=function(valueaxisid){var valueaxis=this.parent.getValueaxisByID(valueaxisid);if(valueaxis){valueaxis._used=true;valueaxis._afterSetProperties();var usedxAxis=false;var usedyAxis=false;if(this._chart.seriesset){var seriesset=this._chart.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]&&seriesset[i].id!=this.id){if((seriesset[i]._yaxis&&this._yaxis&&seriesset[i]._yaxis.id==this._yaxis.id)&&!usedyAxis){usedyAxis=true;}if((seriesset[i]._xaxis&&this._xaxis&&seriesset[i]._xaxis.id==this._xaxis.id)&&!usedxAxis){usedxAxis=true;}}}}if(this._xaxis&&this._xaxis.id!=valueaxis.id&&!usedxAxis){if(this._xaxis._type!="categoryAxis"){this._xaxis._used=false;this._xaxis.on_apply_visible(false);}}if(this._yaxis&&this._yaxis.id!=valueaxis.id&&!usedyAxis){if(this._yaxis._type!="categoryAxis"){this._yaxis._used=false;this._yaxis.on_apply_visible(false);}}if(valueaxis._direction=="x"){if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._xaxis=valueaxis;}}else{if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._yaxis=valueaxis;}}this._chart._changedData=true;}};_pChartBasicSeriesControl.set_stackbargroup=function(val){if(this.stackbargroup!=val){this._changeContentsProperty("stackbargroup",val,this.stackbargroup);this.stackbargroup=val;this.on_apply_stackbargroup(val);}this._chart._reset=true;this._chart._draw();};_pChartBasicSeriesControl.on_apply_stackbargroup=function(stackbargroup){this._chart._changedData=true;};_pChartBasicSeriesControl.set_barvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.barvisible!=val){this._changeContentsProperty("barvisible",val,this.barvisible);this.barvisible=val;this.on_apply_barvisible();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_barvisible=function(){if(this._is_initprop){return;}var barvisible=this.barvisible;var selecttype=this.selecttype,bargrouping=this._chart._bargrouping,stacktype=this._stacktype=="none"?this._chart.stacktype:this._stacktype;if(barvisible){if(selecttype||bargrouping||stacktype=="normal"||stacktype=="percent"){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Bar","barvisible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{if(bargrouping||stacktype=="normal"||stacktype=="percent"){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Bar","barvisible",false);}if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_pointvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.pointvisible!=val){this._changeContentsProperty("pointvisible",val,this.pointvisible);this.pointvisible=val;this.on_apply_pointvisible(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointvisible=function(pointvisible){var barvisible=this.barvisible;if(pointvisible){var selecttype=this.selecttype;if(selecttype){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Point","pointvisible",true);}if(!barvisible&&this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._chart._changedData=true;this._applyPropertySeries("Point","pointvisible",false);if(!barvisible&&!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}};_pChartBasicSeriesControl.set_linevisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.linevisible!=val){this._changeContentsProperty("linevisible",val,this.linevisible);this.linevisible=val;this.on_apply_linevisible(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_linevisible=function(linevisible){var barvisible=this.barvisible,pointvisible=this.pointvisible,stacktype=this._stacktype||this._chart.stacktype;if(linevisible){var selecttype=this.selecttype;if(selecttype||stacktype=="normal"||stacktype=="percent"){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Line","linevisible",true);}if(!barvisible&&!pointvisible&&this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{if(stacktype=="normal"||stacktype=="percent"){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Line","linevisible",false);if(this.lineareavisible){this._applyPropertySeries("Area","lineareavisible",false);}}if(!barvisible&&!pointvisible&&!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}};_pChartBasicSeriesControl.set_stacktype=function(val){var stacktype_enum=["none","normal","percent"];if(stacktype_enum.indexOf(val)== -1){return;}if(this.stacktype!=val){this._changeContentsProperty("stacktype",val,this.stacktype);this.stacktype=val;this.on_apply_stacktype();}this._reset=true;this._draw();};_pChartBasicSeriesControl.on_apply_stacktype=function(){this._stacktype=this.stacktype;var seriesset=this._chart._visibleSeriesset;var ispercent=false;var s;var i;for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){var stacktype=s.stacktype=="none"?this._chart.stacktype:s.stacktype;if(stacktype=="percent"){ispercent=true;}}}for(i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){s._stacktype=s.stacktype=="none"?this._chart.stacktype:s.stacktype;if(s._stacktype=="percent"){ispercent=true;}if(this.stacktype=="percent"||this._chart.stacktype=="percent"||ispercent){s._stacktype="percent";}}}this._chart._changedData=true;};_pChartBasicSeriesControl.set_barsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.barsize!=val){this.barsize=val;this.on_apply_barsize(lVal);}this._chart._reset=true;this._chart._draw();};_pChartBasicSeriesControl.on_apply_barsize=function(barsize){if(!nexacro._ChartGraphicsLib.isEmpty(barsize)){this._groupbarwidth=this.barsize*0.01;this._barsize=this.barsize*0.01;}else{var chartbarsize=this._chart._barsize;if(!nexacro._isNull(chartbarsize)){this._groupbarwidth=null;this._barsize=chartbarsize;}}this._chart._changedData=true;};_pChartBasicSeriesControl.set_barlinestyle=function(val){this.barlinestyle=val;if(val){if(this._barlinestyle==null||this._barlinestyle.value!=val){var oldValue;if(this._barlinestyle){oldValue=this._barlinestyle.value;}this._changeContentsProperty("barlinestyle",val,oldValue);var barlinestyle=nexacro.BorderLineObject(val);this._barlinestyle=barlinestyle;this.on_apply_barlinestyle(barlinestyle);}}else{if(this._barlinestyle){this._barlinestyle=null;this.on_apply_barlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_barlinestyle=function(barlinestyle){if(barlinestyle){this._barborderwidth=barlinestyle._width;}this._redrawSeries=false;this._applyPropertySeries("Bar","barlinestyle",barlinestyle);};_pChartBasicSeriesControl.set_barfillstyle=function(val){this.barfillstyle=val;if(val){if(this._barfillstyle==null||this._barfillstyle.value!=val){var oldValue;if(this._barfillstyle){oldValue=this._barfillstyle.value;}this._changeContentsProperty("barfillstyle",val,oldValue);var barfillstyle=val;var arrColorList=this._spliterColor(val,true);if(!arrColorList){}else if(arrColorList.length==1){barfillstyle=arrColorList[0];}else{barfillstyle=arrColorList;}this._barfillstyle=barfillstyle;this.on_apply_barfillstyle(barfillstyle);}}else{if(this._barfillstyle){this._barfillstyle=null;this.on_apply_barfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_barfillstyle=function(barfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","barfillstyle",barfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_baropacity=function(val){this.baropacity=val;if(0===val||val){if(this._baropacity==null||this._baropacity.value!=val){var oldValue;if(this._baropacity){oldValue=this._baropacity.value;}this._changeContentsProperty("baropacity",val,oldValue);var baropacity=nexacro.OpacityObject(val);this._baropacity=baropacity;this.on_apply_baropacity(baropacity);}}else{if(this._baropacity){this._baropacity=null;this.on_apply_baropacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_baropacity=function(baropacity){this._redrawSeries=false;this._applyPropertySeries("Bar","baropacity",baropacity);};_pChartBasicSeriesControl.set_highlightbarvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightbarvisible!=val){this._changeContentsProperty("highlightbarvisible",val,this.highlightbarvisible);this.highlightbarvisible=val;this.on_apply_highlightbarvisible(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightbarvisible=function(highlightbarvisible){};_pChartBasicSeriesControl.set_highlightbarlinestyle=function(val){this.highlightbarlinestyle=val;if(val){if(this._highlightbarlinestyle==null||this._highlightbarlinestyle.value!=val){var oldValue;if(this._highlightbarlinestyle){oldValue=this._highlightbarlinestyle.value;}this._changeContentsProperty("highlightbarlinestyle",val,oldValue);var highlightbarlinestyle=nexacro.BorderLineObject(val);this._highlightbarlinestyle=highlightbarlinestyle;this.on_apply_highlightbarlinestyle(highlightbarlinestyle);}}else{if(this._pointlinestyle){this._pointlinestyle=null;this.on_apply_highlightbarlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightbarlinestyle=function(highlightbarlinestyle){};_pChartBasicSeriesControl.set_highlightbarfillstyle=function(val){this.highlightbarfillstyle=val;if(val){if(this._highlightbarfillstyle==null||this._highlightbarfillstyle.value!=val){var oldValue;if(this._highlightbarfillstyle){oldValue=this._highlightbarfillstyle.value;}this._changeContentsProperty("highlightbarfillstyle",val,oldValue);var highlightbarfillstyle=nexacro.BackgroundObject(val,this);this._highlightbarfillstyle=highlightbarfillstyle;this.on_apply_highlightbarfillstyle(highlightbarfillstyle);}}else{if(this._highlightbarfillstyle){this._highlightbarfillstyle=null;this.on_apply_highlightbarfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightbarfillstyle=function(highlightbarfillstyle){};_pChartBasicSeriesControl.set_highlightbaropacity=function(val){this.highlightbaropacity=val;if(0===val||val){if(this._highlightbaropacity==null||this._highlightbaropacity.value!=val){var oldValue;if(this._highlightbaropacity){oldValue=this._highlightbaropacity.value;}this._changeContentsProperty("highlightbaropacity",val,oldValue);var highlightbaropacity=nexacro.OpacityObject(val);this._highlightbaropacity=highlightbaropacity;this.on_apply_highlightbaropacity(highlightbaropacity);}}else{if(this._highlightbaropacity){this._highlightbaropacity=null;this.on_apply_highlightbaropacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightbaropacity=function(highlightbaropacity){};_pChartBasicSeriesControl.set_selectbarlinestyle=function(val){this.selectbarlinestyle=val;if(val){if(this._selectbarlinestyle==null||this._selectbarlinestyle.value!=val){var oldValue;if(this._selectbarlinestyle){oldValue=this._selectbarlinestyle.value;}this._changeContentsProperty("selectbarlinestyle",val,oldValue);var selectbarlinestyle=nexacro.BorderLineObject(val);this._selectbarlinestyle=selectbarlinestyle;this.on_apply_selectbarlinestyle(selectbarlinestyle);}}else{if(this._selectbarlinestyle){this._selectbarlinestyle=null;this.on_apply_selectbarlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectbarlinestyle=function(selectbarlinestyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectbarlinestyle",selectbarlinestyle,"select");};_pChartBasicSeriesControl.set_selectbarfillstyle=function(val){this.selectbarfillstyle=val;if(val){if(this._selectbarfillstyle==null||this._selectbarfillstyle.value!=val){var oldValue;if(this._selectbarfillstyle){oldValue=this._selectbarfillstyle.value;}this._changeContentsProperty("selectbarfillstyle",val,oldValue);var selectbarfillstyle=nexacro.BackgroundObject(val,this);this._selectbarfillstyle=selectbarfillstyle;this.on_apply_selectbarfillstyle(selectbarfillstyle);}}else{if(this._selectbarfillstyle){this._selectbarfillstyle=null;this.on_apply_selectbarfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectbarfillstyle=function(selectbarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectbarfillstyle",selectbarfillstyle,"select");};_pChartBasicSeriesControl.set_selectbaropacity=function(val){this.selectbaropacity=val;if(0===val||val){if(this._selectbaropacity==null||this._selectbaropacity.value!=val){var oldValue;if(this._selectbaropacity){oldValue=this._selectbaropacity.value;}this._changeContentsProperty("selectbaropacity",val,oldValue);var selectbaropacity=nexacro.OpacityObject(val);this._selectbaropacity=selectbaropacity;this.on_apply_selectbaropacity(selectbaropacity);}}else{if(this._selectbaropacity){this._selectbaropacity=null;this.on_apply_selectbaropacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectbaropacity=function(selectbaropacity){this._redrawSeries=false;this._applyPropertySeries("Bar","selectbaropacity",selectbaropacity,"select");};_pChartBasicSeriesControl.set_pointlinestyle=function(val){this.pointlinestyle=val;if(val){if(this._pointlinestyle==null||this._pointlinestyle.value!=val){var oldValue;if(this._pointlinestyle){oldValue=this._pointlinestyle.value;}this._changeContentsProperty("pointlinestyle",val,oldValue);var pointlinestyle=nexacro.BorderLineObject(val);this._pointlinestyle=pointlinestyle;this.on_apply_pointlinestyle(pointlinestyle);}}else{if(this._pointlinestyle){this._pointlinestyle=null;this.on_apply_pointlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointlinestyle=function(pointlinestyle){if(pointlinestyle){this._pointborderwidth=pointlinestyle._width;}this._redrawSeries=false;this._applyPropertySeries("Point","pointlinestyle",pointlinestyle);};_pChartBasicSeriesControl.set_pointfillstyle=function(val){this.pointfillstyle=val;if(val){if(this._pointfillstyle==null||this._pointfillstyle.value!=val){var oldValue;if(this._pointfillstyle){oldValue=this._pointfillstyle.value;}this._changeContentsProperty("pointfillstyle",val,oldValue);var pointfillstyle=nexacro.BackgroundObject(val,this);this._pointfillstyle=pointfillstyle;this.on_apply_pointfillstyle(pointfillstyle);}}else{if(this._pointfillstyle){this._pointfillstyle=null;this.on_apply_pointfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointfillstyle=function(pointfillstyle){this._redrawSeries=false;this._applyPropertySeries("Point","pointfillstyle",pointfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_pointopacity=function(val){this.pointopacity=val;if(0===val||val){if(this._pointopacity==null||this._pointopacity.value!=val){var oldValue;if(this._pointopacity){oldValue=this._pointopacity.value;}this._changeContentsProperty("pointopacity",val,oldValue);var pointopacity=nexacro.OpacityObject(val);this._pointopacity=pointopacity;this.on_apply_pointopacity(pointopacity);}}else{if(this._pointopacity){this._pointopacity=null;this.on_apply_pointopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointopacity=function(pointopacity){this._redrawSeries=false;this._applyPropertySeries("Point","pointopacity",pointopacity);};_pChartBasicSeriesControl.set_pointsize=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.pointsize!=val){this._changeContentsProperty("pointsize",val,this.pointsize);this.pointsize=val;this.on_apply_pointsize();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointsize=function(){this._chart._changedData=true;};_pChartBasicSeriesControl.set_pointshape=function(val){var pointshape_enum=["circle","square","diamond","triangle","cross"];if(pointshape_enum.indexOf(val)== -1){return;}if(this.pointshape!=val){this._changeContentsProperty("pointshape",val,this.pointshape);this.pointshape=val;this.on_apply_pointshape();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointshape=function(){this._chart._changedData=true;};_pChartBasicSeriesControl.set_highlightpointvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightpointvisible!=val){this._changeContentsProperty("highlightpointvisible",val,this.highlightpointvisible);this.highlightpointvisible=val;this.on_apply_highlightpointvisible();}};_pChartBasicSeriesControl.on_apply_highlightpointvisible=function(){};_pChartBasicSeriesControl.set_highlightpointsize=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.highlightpointsize!=val){this._changeContentsProperty("highlightpointsize",val,this.highlightpointsize);this.highlightpointsize=val;this.on_apply_highlightpointsize();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightpointsize=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBasicSeriesControl.set_highlightpointlinestyle=function(val){this.highlightpointlinestyle=val;if(val){if(this._highlightpointlinestyle==null||this._highlightpointlinestyle.value!=val){var oldValue;if(this._highlightpointlinestyle){oldValue=this._highlightpointlinestyle.value;}this._changeContentsProperty("highlightpointlinestyle",val,oldValue);var highlightpointlinestyle=nexacro.BorderLineObject(val);this._highlightpointlinestyle=highlightpointlinestyle;this.on_apply_highlightpointlinestyle(highlightpointlinestyle);}}else{if(this._highlightpointlinestyle){this._highlightpointlinestyle=null;this.on_apply_highlightpointlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightpointlinestyle=function(highlightpointlinestyle){};_pChartBasicSeriesControl.set_highlightpointfillstyle=function(val){this.highlightpointfillstyle=val;if(val){if(this._highlightpointfillstyle==null||this._highlightpointfillstyle.value!=val){var oldValue;if(this._highlightpointfillstyle){oldValue=this._highlightpointfillstyle.value;}this._changeContentsProperty("highlightpointfillstyle",val,oldValue);var highlightpointfillstyle=nexacro.BackgroundObject(val,this);this._highlightpointfillstyle=highlightpointfillstyle;this.on_apply_highlightpointfillstyle(highlightpointfillstyle);}}else{if(this._highlightpointfillstyle){this._highlightpointfillstyle=null;this.on_apply_highlightbarfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightpointfillstyle=function(highlightpointfillstyle){};_pChartBasicSeriesControl.set_highlightpointopacity=function(val){this.highlightpointopacity=val;if(0===val||val){if(this._highlightpointopacity==null||this._highlightpointopacity.value!=val){var oldValue;if(this._highlightpointopacity){oldValue=this._highlightpointopacity.value;}this._changeContentsProperty("highlightpointopacity",val,oldValue);var highlightpointopacity=nexacro.OpacityObject(val);this._highlightpointopacity=highlightpointopacity;this.on_apply_highlightpointopacity(highlightpointopacity);}}else{if(this._highlightpointopacity){this._highlightpointopacity=null;this.on_apply_highlightpointopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightpointopacity=function(highlightpointopacity){};_pChartBasicSeriesControl.set_selectpointlinestyle=function(val){this.selectpointlinestyle=val;if(val){if(this._selectpointlinestyle==null||this._selectpointlinestyle.value!=val){var oldValue;if(this._selectpointlinestyle){oldValue=this._selectpointlinestyle.value;}this._changeContentsProperty("selectpointlinestyle",val,oldValue);var selectpointlinestyle=nexacro.BorderLineObject(val);this._selectpointlinestyle=selectpointlinestyle;this.on_apply_selectpointlinestyle(selectpointlinestyle);}}else{if(this._selectpointlinestyle){this._selectpointlinestyle=null;this.on_apply_selectpointlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectpointlinestyle=function(selectpointlinestyle){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointlinestyle",selectpointlinestyle,"select");};_pChartBasicSeriesControl.set_selectpointfillstyle=function(val){this.selectpointfillstyle=val;if(val){if(this._selectpointfillstyle==null||this._selectpointfillstyle.value!=val){var oldValue;if(this._selectpointfillstyle){oldValue=this._selectpointfillstyle.value;}this._changeContentsProperty("selectpointfillstyle",val,oldValue);var selectpointfillstyle=nexacro.BackgroundObject(val,this);this._selectpointfillstyle=selectpointfillstyle;this.on_apply_selectpointfillstyle(selectpointfillstyle);}}else{if(this._selectpointfillstyle){this._selectpointfillstyle=null;this.on_apply_selectpointfillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectpointfillstyle=function(selectpointfillstyle){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointfillstyle",selectpointfillstyle,"select");};_pChartBasicSeriesControl.set_selectpointopacity=function(val){this.selectpointopacity=val;if(0===val||val){if(this._selectpointopacity==null||this._selectpointopacity.value!=val){var oldValue;if(this._selectpointopacity){oldValue=this._selectpointopacity.value;}this._changeContentsProperty("selectpointopacity",val,oldValue);var selectpointopacity=nexacro.OpacityObject(val);this._selectpointopacity=selectpointopacity;this.on_apply_selectpointopacity(selectpointopacity);}}else{if(this._selectpointopacity){this._selectpointopacity=null;this.on_apply_selectpointopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectpointopacity=function(selectpointopacity){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointopacity",selectpointopacity,"select");};_pChartBasicSeriesControl.set_linetype=function(val){var linetype_enum=["segment","step","curve"];if(linetype_enum.indexOf(val)== -1){return;}if(this.linetype!=val){this._changeContentsProperty("linetype",val,this.linetype);this.linetype=val;this.on_apply_linetype();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_linetype=function(linetype){this._chart._changedData=true;};_pChartBasicSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._lineborderwidth=linestyle._width;this._linebordercolor=linestyle.color.value;}this._redrawSeries=false;this._applyPropertySeries("Line","linestyle",linestyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_barradius=function(val){val=parseInt(val);this.barradius=val;if(val>0){if(this._barradius==null||this._barradius!=val){var oldValue;oldValue=this._barradius;this._changeContentsProperty("barradius",val,oldValue);this._barradius=val;this.on_apply_barradius(val);}}else{this._barradius=null;this.on_apply_barradius(0);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_barradius=function(barradius){this._redrawSeries=false;this._applyPropertySeries("Bar","barradius",barradius);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBasicSeriesControl.set_lineopacity=function(val){this.lineopacity=val;if(0===val||val){if(this._lineopacity==null||this._lineopacity.value!=val){var oldValue;if(this._lineopacity){oldValue=this._lineopacity.value;}this._changeContentsProperty("lineopacity",val,oldValue);var lineopacity=nexacro.OpacityObject(val);this._lineopacity=lineopacity;this.on_apply_lineopacity(lineopacity);}}else{if(this._lineopacity){this._lineopacity=null;this.on_apply_lineopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_lineopacity=function(lineopacity){this._redrawSeries=false;this._applyPropertySeries("Line","lineopacity",lineopacity);};_pChartBasicSeriesControl.set_highlightlinevisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightlinevisible!=val){this._changeContentsProperty("highlightlinevisible",val,this.highlightlinevisible);this.highlightlinevisible=val;this.on_apply_highlightlinevisible(val);}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightlinevisible=function(highlightlinevisible){};_pChartBasicSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartBasicSeriesControl.set_highlightlineopacity=function(val){this.highlightlineopacity=val;if(0===val||val){if(this._highlightlineopacity==null||this._highlightlineopacity.value!=val){var oldValue;if(this._highlightlineopacity){oldValue=this._highlightlineopacity.value;}this._changeContentsProperty("highlightlineopacity",val,oldValue);var highlightlineopacity=nexacro.OpacityObject(val);this._highlightpointopacity=highlightlineopacity;this.on_apply_highlightlineopacity(highlightlineopacity);}}else{if(this._highlightpointopacity){this._highlightpointopacity=null;this.on_apply_highlightlineopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_highlightlineopacity=function(highlightlineopacity){};_pChartBasicSeriesControl.set_lineareavisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.lineareavisible!=val){this._changeContentsProperty("lineareavisible",val,this.lineareavisible);this.lineareavisible=val;this.on_apply_lineareavisible();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_lineareavisible=function(){this._chart._changedData=true;};_pChartBasicSeriesControl.set_lineareafillstyle=function(val){this.lineareafillstyle=val;if(val){if(this._lineareafillstyle==null||this._lineareafillstyle.value!=val){var oldValue;if(this._lineareafillstyle){oldValue=this._lineareafillstyle.value;}this._changeContentsProperty("lineareafillstyle",val,oldValue);var lineareafillstyle=nexacro.BackgroundObject(val,this);this._lineareafillstyle=lineareafillstyle;this.on_apply_lineareafillstyle(lineareafillstyle);}}else{if(this._lineareafillstyle){this._lineareafillstyle=null;this.on_apply_lineareafillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_lineareafillstyle=function(lineareafillstyle){if(this.lineareavisible){this._applyPropertySeries("Area","lineareafillstyle",lineareafillstyle);if(this._chart.legend){this._chart._applyLegendItem();}this._chart._rearrange=true;this._chart._recreate=true;}};_pChartBasicSeriesControl.set_lineareaopacity=function(val){this.lineareaopacity=val;if(0===val||val){if(this._lineareaopacity==null||this._lineareaopacity.value!=val){var oldValue;if(this._lineareaopacity){oldValue=this._lineareaopacity.value;}this._changeContentsProperty("lineareaopacity",val,oldValue);var lineareaopacity=nexacro.OpacityObject(val);this._lineareaopacity=lineareaopacity;this.on_apply_lineareaopacity(lineareaopacity);}}else{if(this.lineareaopacity){this.lineareaopacity=null;this.on_apply_lineareaopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_lineareaopacity=function(lineareaopacity){this._applyPropertySeries("Area","lineareaopacity",lineareaopacity);};_pChartBasicSeriesControl.set_selectlinestyle=function(val){this.selectlinestyle=val;if(val){if(this._selectlinestyle==null||this._selectlinestyle.value!=val){var oldValue;if(this._selectlinestyle){oldValue=this._selectlinestyle.value;}this._changeContentsProperty("selectlinestyle",val,oldValue);var selectlinestyle=nexacro.BorderLineObject(val);this._selectlinestyle=selectlinestyle;this.on_apply_selectlinestyle(selectlinestyle);}}else{if(this._selectlinestyle){this._selectlinestyle=null;this.on_apply_selectlinestyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectlinestyle=function(selectlinestyle){this._redrawSeries=false;this._applyPropertySeries("Line","selectlinestyle",selectlinestyle,"select");};_pChartBasicSeriesControl.set_selectlineareafillstyle=function(val){this.selectlineareafillstyle=val;if(val){if(this._selectlineareafillstyle==null||this._selectlineareafillstyle.value!=val){var oldValue;if(this._selectlineareafillstyle){oldValue=this._selectlineareafillstyle.value;}this._changeContentsProperty("selectlineareafillstyle",val,oldValue);var selectlineareafillstyle=nexacro.BackgroundObject(val,this);this._selectlineareafillstyle=selectlineareafillstyle;this.on_apply_selectlineareafillstyle(selectlineareafillstyle);}}else{if(this._selectlineareafillstyle){this._selectlineareafillstyle=null;this.on_apply_selectlineareafillstyle(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectlineareafillstyle=function(selectlineareafillstyle){this._redrawSeries=false;this._applyPropertySeries("Area","selectlineareafillstyle",selectlineareafillstyle,"select");};_pChartBasicSeriesControl.set_selectlineopacity=function(val){this.selectlineopacity=val;if(0===val||val){if(this._selectlineopacity==null||this._selectlineopacity.value!=val){var oldValue;if(this._selectlineopacity){oldValue=this._selectlineopacity.value;}this._changeContentsProperty("selectlineopacity",val,oldValue);var selectlineopacity=nexacro.OpacityObject(val);this._selectlineopacity=selectlineopacity;this.on_apply_selectlineopacity(selectlineopacity);}}else{if(this._selectlineopacity){this._selectlineopacity=null;this.on_apply_selectlineopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectlineopacity=function(selectlineopacity){this._redrawSeries=false;this._applyPropertySeries("Line","selectlineopacity",selectlineopacity,"select");};_pChartBasicSeriesControl.set_selectlineareaopacity=function(val){this.selectlineareaopacity=val;if(0===val||val){if(this._selectlineareaopacity==null||this._selectlineareaopacity.value!=val){var oldValue;if(this._selectlineareaopacity){oldValue=this._selectlineareaopacity.value;}this._changeContentsProperty("selectlineareaopacity",val,oldValue);var selectlineareaopacity=nexacro.OpacityObject(val);this._selectlineareaopacity=selectlineareaopacity;this.on_apply_selectlineareaopacity(selectlineareaopacity);}}else{if(this._selectlineareaopacity){this._selectlineareaopacity=null;this.on_apply_selectlineareaopacity(null);}}this._chart._draw();};_pChartBasicSeriesControl.on_apply_selectlineareaopacity=function(selectlineareaopacity){this._redrawSeries=false;this._applyPropertySeries("Area","selectlineareaopacity",selectlineareaopacity,"select");};_pChartBasicSeriesControl.set_baritemtextposition=function(val){var itemtextposition_enum=["start","middle","end","outside"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.baritemtextposition!=val){this._changeContentsProperty("baritemtextposition",val,this.baritemtextposition);this.baritemtextposition=val;this.on_apply_baritemtextposition();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_baritemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartBasicSeriesControl.set_pointitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.pointitemtextposition!=val){this._changeContentsProperty("pointitemtextposition",val,this.pointitemtextposition);this.pointitemtextposition=val;this.on_apply_pointitemtextposition();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_pointitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartBasicSeriesControl.set_lineitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.lineitemtextposition!=val){this._changeContentsProperty("lineitemtextposition",val,this.lineitemtextposition);this.lineitemtextposition=val;this.on_apply_lineitemtextposition();}this._chart._draw();};_pChartBasicSeriesControl.on_apply_lineitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartBasicSeriesControl.set_baritemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.baritemtextgap!=val){this._changeContentsProperty("baritemtextgap",val,this.baritemtextgap);this.baritemtextgap=val;this.on_apply_baritemtextgap();}};_pChartBasicSeriesControl.on_apply_baritemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBasicSeriesControl.set_pointitemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.pointitemtextgap!=val){this._changeContentsProperty("pointitemtextgap",val,this.pointitemtextgap);this.pointitemtextgap=val;this.on_apply_pointitemtextgap();}};_pChartBasicSeriesControl.on_apply_pointitemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBasicSeriesControl.set_lineitemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.lineitemtextgap!=val){this._changeContentsProperty("lineitemtextgap",val,this.lineitemtextgap);this.lineitemtextgap=val;this.on_apply_lineitemtextgap();}};_pChartBasicSeriesControl.on_apply_lineitemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBasicSeriesControl.destroy=function(){if(!this._chart){return;}var seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");var itemLength=this._itemCnt;var i;var re;for(i=0;i<itemLength;i++ ){if(seriesGroup){var barvisible=this.barvisible,pointvisible=this.pointvisible,linevisible=this.linevisible,itemID,item;if(barvisible){itemID=this._configIndex+" SeriesBarItem_"+i;item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);if(item._series){if(re._series){if(re._series._seriesitems.length>0){for(i=0;i<re._series._seriesitems.length;i++ ){if(re._series._seriesitems[i]){if(re._series._seriesitems[i]){delete re._series._seriesitems[i];re._series._seriesitems[i]=null;}delete re._series._seriesitems[i];re._series._seriesitems[i]=null;}}}delete re._series;re._series=null;}delete item._series;item._series=null;}item.destroy();re.destroy();}}if(pointvisible){itemID=this._configIndex+" SeriesPointItem_"+i;item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);item.destroy();re.destroy();}}if(linevisible){var lineareavisible=this.lineareavisible,linetype=this.linetype;if(lineareavisible){if(linetype=="curve"){itemID=this._configIndex+" SeriesCurveAreaItem_0";}else{itemID=this._configIndex+" SeriesAreaItem_0";}item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);item.destroy();re.destroy();}}else{if(linetype=="curve"){itemID=this._configIndex+" SeriesCurveLineItem_0";}else{itemID=this._configIndex+" SeriesLineItem_0";}item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);item.destroy();re.destroy();}}}if(this.itemtextvisible){itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);item.destroy();re.destroy();}}}}if(this._seriesitems.length>0){for(i=0;i<this._seriesitems.length;i++ ){if(this._seriesitems[i]){if(this._seriesitems[i]._series){delete this._seriesitems[i]._series;this._seriesitems[i]._series=null;}this._seriesitems[i].destroy();delete this._seriesitems[i];this._seriesitems[i]=null;}}}delete this.valueaxis;delete this._xaxis;delete this._yaxis;delete this._pointshape;this.valueaxis=null;this.barvisible=null;this.barsize=null;this.barlinestyle=null;this.barfillstyle=null;this.baropacity=null;this.stacktype=null;this.highlightbarvisible=null;this.highlightbarlinestyle=null;this.highlightbarfillstyle=null;this.highlightbaropacity=null;this.selectbarlinestyle=null;this.selectbarfillstyle=null;this.selectbaropacity=null;this.linevisible=null;this.linetype=null;this.linestyle=null;this.lineopacity=null;this.lineareavisible=null;this.lineareafillstyle=null;this.lineareaopacity=null;this.highlightlinevisible=null;this.highlightlinestyle=null;this.highlightlineopacity=null;this.selectlinestyle=null;this.selectlineareafillstyle=null;this.selectlineopacity=null;this.selectlineareaopacity=null;this.pointvisible=null;this.pointshape=null;this.pointsize=null;this.pointopacity=null;this.pointlinestyle=null;this.pointfillstyle=null;this.highlightpointvisible=null;this.highlightpointsize=null;this.highlightpointlinestyle=null;this.highlightpointfillstyle=null;this.highlightpointopacity=null;this.selectpointlinestyle=null;this.selectpointfillstyle=null;this.selectpointopacity=null;this.stackbargroup=null;this.baritemtextposition=null;this.pointitemtextposition=null;this.lineitemtextposition=null;this.baritemtextgap=null;this.pointitemtextgap=null;this.lineitemtextgap=null;this._pointshape=null;this._barborderwidth=null;this._pointborderwidth=null;this._lineborderwidth=null;this._linebordercolor=null;this._color=null;this._xaxis=null;this._yaxis=null;this._changedSeriesColor=null;this._barsize=null;this._groupbarwidth=null;this._baralign=null;this._barwidth=null;this._seriesitems=null;this._pointshapeObj=null;this._stacktype=null;nexacro._SeriesBase.prototype.destroy.call(this);return true;};_pChartBasicSeriesControl._applyPropertySeries=function(type,style,value,select){var item=null,seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){var itemID=this._configIndex+" Series"+type+"Item_"+(i-1),isselectitem=false;item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){var length=this._selectedItem.length;if(length>0){if(type=="Line"||type=="Area"){var selecttype=this.selecttype;if(selecttype=="select"){isselectitem=true;}else if(selecttype=="unselect"){}else{var selectlinestyle=this.selectlinestyle,selectlineareafillstyle=this.selectlineareafillstyle,selectlineopacity=this.selectlineopacity,selectlineareaopacity=this.selectlineareaopacity;if(selectlinestyle||selectlineareafillstyle||selectlineopacity||selectlineareaopacity){isselectitem=true;}}}else{isselectitem=this._selectedItem[i-1];}}if(isselectitem){if(style=="selectbarfillstyle"||style=="selectpointfillstyle"||style=="selectlineareafillstyle"){item.set_fillstyle(value);}else if(style=="selectbarlinestyle"||style=="selectpointlinestyle"||style=="selectlinestyle"){item.set_strokepen(value);}else if(style=="selectbaropacity"||style=="selectpointopacity"||style=="selectlineopacity"||style=="selectlineareaopacity"){item.set_opacity(value);}else if(style=="barvisible"||style=="pointvisible"||style=="linevisible"||style=="lineareavisible"){item.set_visible(value);}}else{if(style=="barfillstyle"||style=="pointfillstyle"||style=="lineareafillstyle"){item.set_fillstyle(value);}else if(style=="barlinestyle"||style=="pointlinestyle"||style=="linestyle"){item.set_strokepen(value);}else if(style=="baropacity"||style=="pointopacity"||style=="lineopacity"||style=="lineareaopacity"){item.set_opacity(value);}else if(style=="barvisible"||style=="pointvisible"||style=="linevisible"||style=="lineareavisible"){item.set_visible(value);}}}}}};_pChartBasicSeriesControl._draw2=function(redraw){if(!redraw){return;}this._itemCnt=0;this._itemtextlist=[];if(this.barvisible){this._drawSeriesBars();}if(this.linevisible){if(this.linetype=="curve"){this._drawSeriesCurveLines();}else{this._drawSeriesLines();}}if(this.pointvisible){this._drawSeriesPoints();}};_pChartBasicSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartBasicSeriesControl._drawnow=function(){if(this.barvisible){this._drawSeriesBars();}if(this.linevisible){if(this.linetype=="curve"){this._drawSeriesCurveLines();}else{this._drawSeriesLines();}}if(this.pointvisible){this._drawSeriesPoints();}};_pChartBasicSeriesControl._drawSeriesBars=function(){var barlinestyle=this.barlinestyle||"1px solid "+this._color,barfillstyle=this._barfillstyle||this._color,baropacity=this.baropacity,barLeft,barRight,barwidth,datapoints=this._datapoints,points=datapoints.points,ps=datapoints.pointsize,selectedItem=this._selectedItem,selectbarlinestyle=this.selectbarlinestyle||"1px solid "+this._selectcolor,selectbarfillstyle=this.selectbarfillstyle||this._selectcolor,selectbaropacity=this.selectbaropacity||this.baropacity,isselectitem=false,index=0,x,y,b,effect=this._chart_aniframe_obj,rotateaxis=this._chart.rotateaxis,stacktype=this._stacktype=="none"?this._chart.stacktype:this._stacktype;if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._groupbarwidth!=null){this._barsize=this._chart._toGroupBarWidth(this._groupbarwidth);barwidth=this._barsize;}else if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._groupbarwidth==null){barwidth=this._chart._barsize;}else{this.on_apply_barsize(this.barsize);barwidth=this._barsize||this._chart._barsize;}barwidth=this._chart._getcheckTimeAxisBarWidth(barwidth);switch(this._baralign){case "left":barLeft=0;break;case "right":barLeft= -barwidth;break;default:barLeft= -barwidth/2;}barRight=barLeft+barwidth;var linetype=this.linetype;if((linetype=="step"&&this.linevisible)||this._chart._isstepline){ps+=3;}var isTagetStackTotal=false;if(this._chart.stacktotalvisible==true&&stacktype=="normal"){isTagetStackTotal=true;}var stackbargroup=this.stackbargroup;if(!stackbargroup){stackbargroup="_default_";}var objPosition;if(!this._chart._stackbargrouplist){this._chart._stackbargrouplist=[];}var stackbarlist=this._chart._stackbargrouplist;if(!stackbarlist[stackbargroup]){stackbarlist[stackbargroup]=[];}var stackbargrouplist=stackbarlist[stackbargroup];if(effect&&effect.isloadanimation){isTagetStackTotal=false;}var pLeng=points.length;for(var i=0;i<pLeng;i+=ps){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}x=points[i];y=points[i+1];b=points[i+2];if(effect&&effect.isloadanimation){isselectitem=false;if(!rotateaxis){y=this._getanimationdrawvalue(y);}else{x=this._getanimationdrawvalue(x);}b=this._getanimationdrawvalue(b);}if(isselectitem){objPosition=this._drawBar(x,y,b,barLeft,barRight,this._xaxis,this._yaxis,selectbarlinestyle,selectbarfillstyle,selectbaropacity,index);}else{if(barfillstyle instanceof Array){var barfillstyle_sv=barfillstyle[index%barfillstyle.length];objPosition=this._drawBar(x,y,b,barLeft,barRight,this._xaxis,this._yaxis,barlinestyle,barfillstyle_sv,baropacity,index);}else{objPosition=this._drawBar(x,y,b,barLeft,barRight,this._xaxis,this._yaxis,barlinestyle,barfillstyle,baropacity,index);}}if(isTagetStackTotal){if(stackbargrouplist[index]){if(rotateaxis){stackbargrouplist[index].w+=objPosition.w;if(stackbargrouplist[index].l>objPosition.l){stackbargrouplist[index].l=objPosition.l;}else{stackbargrouplist[index].r=objPosition.r;}}else{stackbargrouplist[index].h+=objPosition.h;if(stackbargrouplist[index].t>objPosition.t){stackbargrouplist[index].t=objPosition.t;}else{stackbargrouplist[index].b=objPosition.b;}}}else{stackbargrouplist[index]=objPosition;}if(isNaN(this._seriesitems[index].value)){}else{stackbargrouplist[index].v=this._seriesitems[index].value.toFixed(2);}}index++ ;}this._itemCnt=index;};_pChartBasicSeriesControl._drawSeriesCurveLines=function(){var linestyle=this.linestyle||"1px solid "+this._color,linetype=this.linetype,lineopacity=this.lineopacity,lineareavisible=this.lineareavisible,lineareafillstyle=this.lineareafillstyle||this._color,lineareaopacity=this.lineareaopacity,datapoints=this._datapoints,xaxis=this._xaxis,yaxis=this._yaxis,path,selectedItem=this._selectedItem,selectlinestyle=this.selectlinestyle||"1px solid "+this._selectcolor,selectlineareafillstyle=this.selectlineareafillstyle||this._selectcolor,selectlineopacity=this.selectlineopacity||this.lineopacity,selectlineareaopacity=this.selectlineareaopacity||this.lineareaopacity,isselectitem=false,effect=this._chart_aniframe_obj,line=[],shiftPointX=0,startPointX=0,endPointX,shiftPointY=0,startPointY=0,endPointY,rotateaxis=this._chart.rotateaxis,tickstartgap,stacktype=this._stacktype=="none"?this._chart.stacktype:this._stacktype;var cp=[],tension=0.4,idx,prevx=null,prevy=null,x1,x2,y1,y2,ps=datapoints.pointsize,points=datapoints.points.slice(0),len=points.length,pts=[];var skipmoves=[];var skipindex=0;var aline=[];var bline=[];var length=selectedItem.length;var i=0;var skipmove=false;var checkpoint=null;function checkpoints(x1,y1,x2,y2,xaxis,yaxis){if(y1<=y2&&y1<yaxis._min){if(y2<yaxis._min){return null;}x1=(yaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y1=yaxis._min;}else if(y2<=y1&&y2<yaxis._min){if(y1<yaxis._min){return null;}x2=(yaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y2=yaxis._min;}if(y1>=y2&&y1>yaxis._max){if(y2>yaxis._max){return null;}x1=(yaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y1=yaxis._max;}else if(y2>=y1&&y2>yaxis._max){if(y1>yaxis._max){return null;}x2=(yaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y2=yaxis._max;}if(x1<=x2&&x1<xaxis._min){if(x2<xaxis._min){return null;}y1=(xaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x1=xaxis._min;}else if(x2<=x1&&x2<xaxis._min){if(x1<xaxis._min){return null;}y2=(xaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x2=xaxis._min;}if(x1>=x2&&x1>xaxis._max){if(x2>xaxis._max){return null;}y1=(xaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x1=xaxis._max;}else if(x2>=x1&&x2>xaxis._max){if(x1>xaxis._max){return null;}y2=(xaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x2=xaxis._max;}var points=[];points[0]=x1;points[1]=y1;points[2]=x2;points[3]=y2;return points;}function addCurveLine(type,points,cpoints,bskipmove){if(type===void 0||(type!=='cubic'&&type!=='quadratic')){type='quadratic';}type=type+'CurveTo';if(line.length==0){line.push([points[0],points[1],cpoints.concat(points.slice(2)),type]);}else if(type=="quadraticCurveTo"&&points.length==2){cpoints=cpoints.slice(0,2).concat(points);line.push([points[0],points[1],cpoints,type]);}else{line.push([points[2],points[3],cpoints.concat(points.slice(2)),type]);}}function getControlPoints(x0,y0,x1,y1,x2,y2,tension){var pow=Math.pow,sqrt=Math.sqrt,d01,d12,fa,fb,p1x,p1y,p2x,p2y;d01=sqrt(pow(x1-x0,2)+pow(y1-y0,2));d12=sqrt(pow(x2-x1,2)+pow(y2-y1,2));fa=tension*d01/(d01+d12);fb=tension-fa;p1x=x1+fa*(x0-x2);p1y=y1+fa*(y0-y2);p2x=x1-fb*(x0-x2);p2y=y1-fb*(y0-y2);return [p1x,p1y,p2x,p2y];}for(i=0;i<length;i++ ){var isselect=selectedItem[i];if(isselect){isselectitem=true;break;}}if(effect&&effect.isloadanimation){isselectitem=false;points=this._getanimationdrawvalue(points);}if(this._chart._isstepline&&linetype!="step"){ps+=3;}for(idx=0;idx<len;idx+=ps){x1=points[idx-ps];y1=points[idx-ps+1];x2=points[idx];y2=points[idx+1];skipmove=false;if(y1==null||y2==null){if(x1!=null||x1!=null){if(lineareavisible){if(y1==null){y1=yaxis._min;}if(y2==null){y2=yaxis._min;}}else{if(y1==null){y1=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}if(y2==null){y2=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}}}}if(!skipmove){skipmoves.push(skipmove);}skipindex++ ;checkpoint=checkpoints(x1,y1,x2,y2,xaxis,yaxis);if(checkpoint==null){continue;}x1=checkpoint[0];y1=checkpoint[1];x2=checkpoint[2];y2=checkpoint[3];if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}}if(x1!=prevx||y1!=prevy){startPointX=xaxis.p2c(x1)+shiftPointX;startPointY=yaxis.p2c(y1)+shiftPointY;if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){startPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){startPointY+=tickstartgap;}}startPointY+=yaxis._tickendspace;pts.push(startPointX,startPointY);}prevx=x2;prevy=y2;if(x2<=0||y2<=0){this._chart._isnegativedata=true;}endPointX=xaxis.p2c(x2)+shiftPointX;endPointY=yaxis.p2c(y2)+shiftPointY;if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){endPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){endPointY+=tickstartgap;}}endPointY+=yaxis._tickendspace;pts.push(endPointX,endPointY);}len=pts.length;for(idx=0;idx<len-2;idx+=2){cp=cp.concat(getControlPoints.apply(this,pts.slice(idx,idx+6).concat([tension])));}addCurveLine('quadratic',pts.slice(0,4),cp.slice(0,2));for(idx=2;idx<len-3;idx+=2){addCurveLine('cubic',pts.slice(idx,idx+4),cp.slice(2*idx-2,2*idx+2));}addCurveLine('quadratic',pts.slice(len-2,len),[cp[2*len-10],cp[2*len-9],pts[len-4],pts[len-3]]);aline=line;if(isselectitem){path=this._drawCurveLine(aline,selectlinestyle,selectlineopacity,false,skipmoves);}else{path=this._drawCurveLine(aline,linestyle,lineopacity,false,skipmoves);}if(lineareavisible&&stacktype!="none"){pts=[];line=[];skipmoves=[];var reversepoints=[];len=points.length;prevx=null;prevy=null;skipindex=0;cp=[];for(i=len-1;i> -1;i-=ps){reversepoints.push(points[i-2]);reversepoints.push(points[i-1]);reversepoints.push(points[i]);}points=reversepoints;for(idx=0;idx<len;idx+=ps){if(!rotateaxis){x1=points[idx-ps];y1=points[idx-ps+2];x2=points[idx];y2=points[idx+2];}else{x1=points[idx-ps+2];y1=points[idx-ps+1];x2=points[idx+2];y2=points[idx+1];}skipmove=false;if(y1==null||y2==null){if(x1!=null||x1!=null){if(lineareavisible){if(y1==null){y1=yaxis._min;}if(y2==null){y2=yaxis._min;}}else{if(y1==null){y1=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}if(y2==null){y2=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}}}}if(!skipmove){skipmoves.push(skipmove);}skipindex++ ;checkpoint=checkpoints(x1,y1,x2,y2,xaxis,yaxis);if(checkpoint==null){continue;}x1=checkpoint[0];y1=checkpoint[1];x2=checkpoint[2];y2=checkpoint[3];if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}}if(x1!=prevx||y1!=prevy){startPointX=xaxis.p2c(x1)+shiftPointX;startPointY=yaxis.p2c(y1)+shiftPointY;if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){startPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){startPointY+=tickstartgap;}}startPointY+=yaxis._tickendspace;pts.push(startPointX,startPointY);}prevx=x2;prevy=y2;if(x2<=0||y2<=0){this._chart._isnegativedata=true;}endPointX=xaxis.p2c(x2)+shiftPointX;endPointY=yaxis.p2c(y2)+shiftPointY;if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){endPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){endPointY+=tickstartgap;}}endPointY+=yaxis._tickendspace;pts.push(endPointX,endPointY);}len=pts.length;for(idx=0;idx<len-2;idx+=2){cp=cp.concat(getControlPoints.apply(this,pts.slice(idx,idx+6).concat([tension])));}addCurveLine('quadratic',pts.slice(0,4),cp.slice(0,2));for(idx=2;idx<len-3;idx+=2){addCurveLine('cubic',pts.slice(idx,idx+4),cp.slice(2*idx-2,2*idx+2));}addCurveLine('quadratic',pts.slice(len-2,len),[cp[2*len-10],cp[2*len-9],pts[len-4],pts[len-3]]);bline=line;}if(lineareavisible){if(isselectitem){this._drawCurveArea(aline,bline,selectlineareafillstyle,selectlineareaopacity);}else{this._drawCurveArea(aline,bline,lineareafillstyle,lineareaopacity);}}var itemtextvisible=this.itemtextvisible,barvisible=this.barvisible,pointvisible=this.pointvisible;if(!barvisible&&!pointvisible&&itemtextvisible){if(path){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawLineItemText(datapoints,xaxis,yaxis,path);}}}this._chart._isnegativedata=false;};_pChartBasicSeriesControl._drawSeriesLines=function(){var linestyle=this.linestyle||"1px solid "+this._color,lineopacity=this.lineopacity,lineareavisible=this.lineareavisible,lineareafillstyle=this.lineareafillstyle||this._color,lineareaopacity=this.lineareaopacity,datapoints=this._datapoints,categoryaxis=this._xaxis,valueaxis=this._yaxis,path,area,selectedItem=this._selectedItem,selectlinestyle=this.selectlinestyle||"1px solid "+this._selectcolor,selectlineareafillstyle=this.selectlineareafillstyle||this._selectcolor,selectlineopacity=this.selectlineopacity||this.lineopacity,selectlineareaopacity=this.selectlineareaopacity||this.lineareaopacity,isselectitem=false,effect=this._chart_aniframe_obj,length=0;length=selectedItem.length;for(var i=0;i<length;i++ ){var isselect=selectedItem[i];if(isselect){isselectitem=true;break;}}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){if(lineareavisible){area=this._drawArea(datapoints,categoryaxis,valueaxis,selectlineareafillstyle,selectlineareaopacity);}path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,selectlinestyle,selectlineopacity,false);}else{if(lineareavisible){area=this._drawArea(datapoints,categoryaxis,valueaxis,lineareafillstyle,lineareaopacity);}path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,linestyle,lineopacity,false);}if(lineareavisible&&area){}var itemtextvisible=this.itemtextvisible,barvisible=this.barvisible,pointvisible=this.pointvisible;if(!barvisible&&!pointvisible&&itemtextvisible){if(path){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawLineItemText(datapoints,categoryaxis,valueaxis,path);}}}};_pChartBasicSeriesControl._drawSeriesPoints=function(){var pointlinestyle=this.pointlinestyle||"1px solid "+this._color,pointfillstyle=this.pointfillstyle||this._color,pointopacity=this.pointopacity,index=0,datapoints=this._datapoints,points=datapoints.points.slice(0),ps=datapoints.pointsize,linetype=this.linetype,selectpointlinestyle=this.selectpointlinestyle||"1px solid "+this._selectcolor,selectpointfillstyle=this.selectpointfillstyle||this._selectcolor,selectpointopacity=this.selectpointopacity||this.pointopacity,selectedItem=this._selectedItem,isselectitem=false,effect=this._chart_aniframe_obj,pointsize;if((this.pointsize==""||this.pointsize==undefined)&&this.pointsize!==0){pointsize=10;}else{pointsize=this.pointsize;}if(this._chart._isstepline&&linetype=="step"){ps+=3;}if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}for(var i=0;i<points.length;i+=ps){var curValue=points[i+1];var preValue=points[(i-ps)+1];var nextValue=points[(i+ps)+1];if(points[i]==null||(linetype=="step"&&i!=0&&curValue==preValue&&curValue!=nextValue&&nextValue!=null)||curValue==null){index++ ;continue;}var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){this._drawPoint(points[i],points[i+1],pointsize,this._xaxis,this._yaxis,this.pointshape,this._pointshape,selectpointlinestyle,selectpointfillstyle,selectpointopacity,index);}else{this._drawPoint(points[i],points[i+1],pointsize,this._xaxis,this._yaxis,this.pointshape,this._pointshape,pointlinestyle,pointfillstyle,pointopacity,index);}index++ ;}this._itemCnt=index;};_pChartBasicSeriesControl._drawBar=function(x,y,b,barLeft,barRight,axisx,axisy,barlinestyle,barfillstyle,baropacity,index,item){var left,right,bottom,top,tmp,rotateaxis=this._chart.rotateaxis,effect=this._chart_aniframe_obj,tickstartgap;if(rotateaxis&&!this._chart._isCompositeSeries){left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;}}else{left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;}}if(right<axisx._min||left>axisx._max||top<axisy._min||bottom>axisy._max){return;}if(left<axisx._min){left=axisx._min;}if(right>axisx._max){right=axisx._max;}if(bottom<axisy._min){bottom=axisy._min;}if(top>axisy._max){top=axisy._max;}if(axisx.p2c){left=axisx.p2c(left);right=axisx.p2c(right);}if(axisy.p2c){bottom=axisy.p2c(bottom);top=axisy.p2c(top);}if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){left+=tickstartgap;right+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){bottom+=tickstartgap;top+=tickstartgap;}}bottom+=axisy._tickendspace;top+=axisy._tickendspace;var rect,chart=this._chart,width=0,height=0,seriesId,points=[],seriesGroup=chart._seriesGroup,highlightGroup=chart._highlightGroup;width=right-left;height=bottom-top;if(width<0){left+=width;width=Math.abs(width);}if(height<0){top+=height;height=Math.abs(height);}if(rotateaxis){this._barwidth=height;}else{this._barwidth=width;}var sv_barfillstyle;if(barfillstyle instanceof Array){}else{if(barfillstyle&&this.autogradation!="none"){var bTarget=false;if(barfillstyle instanceof nexacro._BackgroundObject){if(!barfillstyle.gradient){bTarget=true;barfillstyle=barfillstyle.value;}}else if(barfillstyle){bTarget=(barfillstyle.indexOf("gradient")<0)?true:false;}if(bTarget){var anglePos=(this.parent.rotateaxis==true)?"bottom":"right";var darkcolor1;if(this.autogradation=="center"){var lightcolor1=this._shadeColor(barfillstyle, -30);var lightcolor2=this._shadeColor(barfillstyle, -50);darkcolor1=this._shadeColor(barfillstyle,20);sv_barfillstyle="linear-gradient(to "+anglePos+","+darkcolor1+" 0%,"+barfillstyle+" 25%,"+lightcolor1+" 40%,"+lightcolor2+" 50%,"+lightcolor1+" 60%,"+barfillstyle+" 70%,"+darkcolor1+" 100%)";}else{var darkcolor0=this._shadeColor(barfillstyle,5);darkcolor1=this._shadeColor(barfillstyle,10);var darkcolor2=this._shadeColor(barfillstyle,25);var darkcolor3=this._shadeColor(barfillstyle,40);sv_barfillstyle="linear-gradient(to "+anglePos+","+darkcolor3+" 0%,"+darkcolor1+" 10%,"+darkcolor0+" 25%,"+barfillstyle+" 50%,"+darkcolor0+" 60%,"+darkcolor1+" 80%,"+darkcolor2+" 90%,"+darkcolor3+" 100%)";}barfillstyle=sv_barfillstyle;}}}var radius={tl:0,tr:0,br:0,bl:0};if(item){var highlightitem=item._barHighlight;if(!highlightitem){rect=new nexacro.ChartGraphicsRect(left,top,width,height);if(this.shadowstyle){rect.set_shadow(this.shadowstyle);}if(this.barradius>0&&this.parent.rotateaxis==true){if(y<0.0){radius.tl=radius.bl=this.barradius;}else if(y>0.0){radius.tr=radius.br=this.barradius;}}else{if(y<0.0){radius.bl=radius.br=this.barradius;}else if(y>0.0){radius.tl=radius.tr=this.barradius;}}if(this.barradius>0){rect.set_radiusround(radius);}rect.set_strokepen(barlinestyle);if(barfillstyle instanceof Array){}else{rect.set_fillstyle(barfillstyle);}rect.set_opacity(baropacity);seriesId=this._configIndex+" SeriesHighlightBarItem";rect.set_id(seriesId);highlightGroup.addChild(rect);item._barHighlight=rect;rect._item=item;rect.index=item.index;rect.value=item.value;}else{rect=highlightitem;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesBarItem_"+index;rect=seriesGroup.getObjectByID(seriesId);if(!rect){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id(seriesId);seriesGroup.addChild(rect);}else{rect.set_x(left);rect.set_width(width);rect.set_y(top);rect.set_height(height);}if(this.shadowstyle){rect.set_shadow(this.shadowstyle);}if(this.barradius>0&&this.parent.rotateaxis==true){if(y<0.0){radius.tl=radius.bl=this.barradius;}else if(y>0.0){radius.tr=radius.br=this.barradius;}}else{if(y<0.0){radius.bl=radius.br=this.barradius;}else if(y>0.0){radius.tl=radius.tr=this.barradius;}}if(this.barradius>0){rect.set_radiusround(radius);}rect.set_strokepen(barlinestyle);if(barfillstyle instanceof Array){}else{rect.set_fillstyle(barfillstyle);}rect.set_opacity(baropacity);points[0]=x;points[1]=y;points[2]=b;rect.index=index;if(rotateaxis&&!this._chart._isCompositeSeries){points[3]=x-b;rect.value=x;}else{points[3]=y-b;rect.value=y;}rect._points=points;}}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(rect){rect._clipitems=[];rect.setClipPath(new nexacro.Rect( -left, -top,boardWidth,boardHeight));}}if(rect){rect._series=this;this._seriesitems[index]=rect;}if(rect&&!item){var itemtextvisible=this.itemtextvisible;if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){if(chart._bargrouping&&(!this.stacktype||this.stacktype=="none")&&!item){if(!chart._groupItemTextList){chart._groupItemTextList=[];}var list=chart._groupItemTextList[this._configIndex];if(!list){list=chart._groupItemTextList[this._configIndex]=[];}var pushdata={"left":left,"right":right,"bottom":bottom,"top":top,"width":width,"height":height,"rect":rect};list.push(pushdata);}else{this._drawBarItemText(left,right,bottom,top,width,height,rect);}}}}return {"l":left,"t":top,"w":width,"h":height,"r":right,"b":bottom};};_pChartBasicSeriesControl._drawStackBar=function(stackgroupname,index,left,top,width,height,right,bottom,value){var rect,seriesId,chart=this._chart,seriesGroup=chart._seriesGroup;if(!seriesGroup){return;}seriesId=stackgroupname+" SeriesStackBarItem_"+index;rect=seriesGroup.getObjectByID(seriesId);if(!rect){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id(seriesId);seriesGroup.addChild(rect);}else{rect.set_x(left);rect.set_width(width);rect.set_y(top);rect.set_height(height);}if(this._chart._stacktotalshadowstyle){rect.set_shadow(this._chart._stacktotalshadowstyle);}if(this._chart._stacktotallinestyle){rect.set_strokepen(this._chart._stacktotallinestyle||"1px solid #dddddd");}rect._index=index;rect._value=value;this._drawBarItemText(left,right,bottom,top,width,height,rect,stackgroupname);};_pChartBasicSeriesControl._drawPoint=function(x,y,radius,axisx,axisy,pointshape,_pointshape,pointlinestyle,pointfillstyle,pointopacity,index,item){var chart=this._chart,point,cx,cy,points=[],seriesId,shiftPointX=0,shiftPointY=0,seriesGroup=chart._seriesGroup,rotateaxis=chart.rotateaxis,tmp,highlightGroup=chart._highlightGroup,effect=this._chart_aniframe_obj,tickstartgap;if(x==null||y==null||x<axisx._min||x>axisx._max||y<axisy._min||y>axisy._max){return;}if(rotateaxis&&!this._chart._isCompositeSeries){tmp=y;y=x;y=tmp;}if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}cx=axisx.p2c(x)+shiftPointX;cy=axisy.p2c(y)+shiftPointY;}else{cx=axisx.p2c(x);cy=axisy.p2c(y);}if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){cx+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){cy+=tickstartgap;}}cy+=axisy._tickendspace;if(item){var highlightitem=item._pointHighlight;if(!highlightitem){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}seriesId=this._configIndex+" SeriesHighlightPointItem";point.set_id(seriesId);highlightGroup.addChild(point);item._pointHighlight=point;item.index=index;point._item=item;point.index=item.index;point.value=item.value;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesPointItem_"+index;point=seriesGroup.getObjectByID(seriesId);if(point){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius,point);}else{point.set_cx(cx);point.set_cy(cy);point.set_width(radius);point.set_height(radius);}}else{if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}point.set_id(seriesId);seriesGroup.addChild(point);}point.index=index;if(rotateaxis&&!this._chart._isCompositeSeries){point.value=x;}else{point.value=y;}points[0]=x;points[1]=y;point.radius=radius;point._points=points;}}if(point){point.set_strokepen(pointlinestyle);point.set_fillstyle(pointfillstyle);point.set_opacity(pointopacity);}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board&&point){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;point._clipitems=[];if(pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){point.setClipPath(new nexacro.Rect(0,0,boardWidth,boardHeight));}else{point.setClipPath(new nexacro.Rect( -cx, -cy,boardWidth,boardHeight));}}if(point){point._series=this;this._seriesitems[point.index]=point;}if(point&&!item){var itemtextvisible=this.itemtextvisible,barvisible=this.barvisible;if(!barvisible&&itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawPointItemText(cx,cy,point);}}}};_pChartBasicSeriesControl._setLineAreaClip=function(path){var rotateaxis=this._chart.rotateaxis,board=this._chart._boardRect,boardWidth=0,boardHeight=0,series=this,borderWidth=this._chart._boardBorderWidth||1,borderHeight=this._chart._boardBorderHeight||1;if(board){var axis;var tickstartgap=0;var tickendgap=0;var tickendspace=0;if(rotateaxis){axis=series._yaxis;if(axis){tickstartgap=axis._tickstartgap;tickendgap=axis._tickendgap;tickendspace=axis._tickendspace;}boardWidth=board.width-borderWidth;boardHeight=board.height-(borderHeight-tickstartgap-tickendgap-tickendspace);path._clipitems=[];path.setClipPath(new nexacro.Rect(0,tickstartgap,boardWidth,boardHeight+2));}else{axis=series._xaxis;if(axis){tickstartgap=axis._tickstartgap;tickendgap=axis._tickendgap;tickendspace=axis._tickendspace;}boardWidth=board.width-(borderWidth+tickstartgap+tickendgap+tickendspace);boardHeight=board.height-borderHeight;path._clipitems=[];path.setClipPath(new nexacro.Rect(tickstartgap,0,boardWidth+2,boardHeight));}}};_pChartBasicSeriesControl._drawLine=function(datapoints,xoffset,yoffset,axisx,axisy,linestyle,lineopacity,Ishighlight){var points=datapoints.points.slice(0),ps=datapoints.pointsize,prevx=null,prevy=null,path,shiftPointX=0,startPointX,endPointX,shiftPointY=0,startPointY,endPointY,tickstartgap,rotateaxis=this._chart.rotateaxis,seriesGroup=this._chart._seriesGroup,bCreate=false,effect=this._chart_aniframe_obj;if(Ishighlight){path=new nexacro.ChartGraphicsPaths();path.set_id(this._configIndex+" SeriesHighlightLineItem_0");}else{if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}var seriesid=this._configIndex+" SeriesLineItem_0";path=seriesGroup.getObjectByID(seriesid);if(!path){bCreate=true;path=new nexacro.ChartGraphicsPaths();path.set_id(seriesid);}else{path.clear();}}if(this.shadowstyle){path.set_shadow(this.shadowstyle);}path.set_strokepen(linestyle);if(!nexacro._ChartGraphicsLib.isEmpty(lineopacity)){path.set_opacity(lineopacity);}if(this._chart._isstepline&&this.linetype!="step"){ps+=3;}for(var i=ps;i<points.length;i+=ps){var x1,y1,x2,y2;if(this._chart._bargrouping&&this.linetype=="step"){if(i%6==0){x1=points[i];x2=points[i];}else{x1=points[i-ps];x2=points[i+ps];}}else{x1=points[i-ps];x2=points[i];}y1=points[i-ps+1];y2=points[i+1];if(y1==null||y2==null){if(this.lineareavisible){if(y1==null){y1=axisy._min;}if(y2==null){y2=axisy._min;}}else{continue;}}if(y1<=y2&&y1<axisy._min){if(y2<axisy._min){continue;}x1=(axisy._min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy._min;}else if(y2<=y1&&y2<axisy._min){if(y1<axisy._min){continue;}x2=(axisy._min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy._min;}if(y1>=y2&&y1>axisy._max){if(y2>axisy._max){continue;}x1=(axisy._max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy._max;}else if(y2>=y1&&y2>axisy._max){if(y1>axisy._max){continue;}x2=(axisy._max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy._max;}if(x1<=x2&&x1<axisx._min){if(x2<axisx._min){continue;}y1=(axisx._min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx._min;}else if(x2<=x1&&x2<axisx._min){if(x1<axisx._min){continue;}y2=(axisx._min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx._min;}if(x1>=x2&&x1>axisx._max){if(x2>axisx._max){continue;}y1=(axisx._max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx._max;}else if(x2>=x1&&x2>axisx._max){if(x1>axisx._max){continue;}y2=(axisx._max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx._max;}if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}}if(x1!=prevx||y1!=prevy){startPointX=axisx.p2c(x1)+xoffset+shiftPointX;startPointY=axisy.p2c(y1)+yoffset+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){startPointX+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){startPointY+=tickstartgap;}}startPointY+=axisy._tickendspace;path.moveTo(startPointX,startPointY);}prevx=x2;prevy=y2;endPointX=axisx.p2c(x2)+xoffset+shiftPointX;endPointY=axisy.p2c(y2)+yoffset+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){endPointX+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){endPointY+=tickstartgap;}}endPointY+=axisy._tickendspace;path.lineTo(endPointX,endPointY);}if(Ishighlight){}else{path._series=this;path.index=0;path.value= -1;path._points=points;if(bCreate){this._itemCnt++ ;seriesGroup.addChild(path);}}this._setLineAreaClip(path);return path;};_pChartBasicSeriesControl._drawArea=function(datapoints,axisx,axisy,lineareafillstyle,lineareaopacity){var points=datapoints.points.slice(0),ps=datapoints.pointsize,i=0,areaOpen=false,ypos=1,xpos=0,segmentStart=0,segmentEnd=0,area,tickstartgap,seriesGroup=this._chart._seriesGroup,bCreate=false,effect=this._chart_aniframe_obj,rotateaxis=this._chart.rotateaxis;var lineareavisible=this.lineareavisible;if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}var seriesid=this._configIndex+" SeriesAreaItem_0";area=seriesGroup.getObjectByID(seriesid);if(!area){bCreate=true;area=new nexacro.ChartGraphicsPaths();area.set_id(this._configIndex+" SeriesAreaItem_0");}else{area.clear();}if(!nexacro._ChartGraphicsLib.isEmpty(lineareaopacity)){area.set_opacity(lineareaopacity);}if(this._chart._isstepline&&this.linetype!="step"){ps+=3;}var stepend=false;while(true){if(ps>0&&i>points.length+ps){break;}i+=ps;var x1,y1,x2,y2;var nullDataFlag=false;if(this._chart._bargrouping&&this.linetype=="step"){if(i%6==0){x1=points[i+xpos];x2=points[i+xpos];}else{x1=points[i-ps+xpos];x2=points[i+ps+xpos];}}else{x1=points[i-ps+xpos];x2=points[i+xpos];}y1=points[i-ps+ypos];y2=points[i+ypos];if(areaOpen){if(ps>0&&x1!=null&&x2==null){segmentEnd=i;ps= -ps;if(!rotateaxis){ypos=2;}else{xpos=2;}stepend=true;continue;}if(ps<0&&i==segmentStart+ps){area.set_fillstyle(lineareafillstyle);areaOpen=false;ps= -ps;ypos=1;xpos=0;i=segmentStart=segmentEnd+ps;continue;}}if(lineareavisible){if(nexacro._isUndefined(y1)){continue;}else if(y1==null){y1=axisy._min;}if(nexacro._isUndefined(y2)){nullDataFlag=true;}else if(y2==null){y2=axisy._min;}}else{if(y1==null){continue;}if(y2==null){nullDataFlag=true;}}if(x1<=x2&&x1<axisx._min){if(x2<axisx._min){continue;}y1=(axisx._min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx._min;}else if(x2<=x1&&x2<axisx._min){if(x1<axisx._min){continue;}y2=(axisx._min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx._min;}if(x1>=x2&&x1>axisx._max){if(x2>axisx._max){continue;}y1=(axisx._max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx._max;}else if(x2>=x1&&x2>axisx._max){if(x1>axisx._max){continue;}y2=(axisx._max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx._max;}var x1Point;var y1Point;var shiftPointX=0;var shiftPointY=0;var isbargrouping=false;var startX1=0;var startX2=0;var startY1=0;var startY2=0;if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}x1Point=axisx.p2c(x1)+shiftPointX;y1Point=axisy.p2c(points[i-ps+ypos])+shiftPointY;isbargrouping=true;}else{x1Point=axisx.p2c(x1);y1Point=axisy.p2c(points[i-ps+ypos]);}if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){x1Point+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){y1Point+=tickstartgap;}}y1Point+=axisy._tickendspace;if(!areaOpen){if(!rotateaxis){area.moveTo(x1Point,y1Point);}else{area.moveTo(x1Point,y1Point);}areaOpen=true;}if(stepend){stepend=false;if(!rotateaxis){startX1=x1Point;startX2=axisx.p2c(x2)+shiftPointX;startY1=y1Point;startY2=axisy.p2c(y2)+shiftPointY;tickstartgap=axisx._tickstartgap;if(tickstartgap){startX2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}else{startX1=x1Point;startX2=axisx.p2c(x2)+shiftPointX;startY1=y1Point;startY2=axisy.p2c(y2)+shiftPointY;tickstartgap=axisy._tickstartgap;if(tickstartgap){startY2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}continue;}if(y1>=axisy._max&&y2>=axisy._max){startX1=axisx.p2c(x1)+shiftPointX;startX2=axisx.p2c(x2)+shiftPointX;startY1=axisy.p2c(axisy._max)+shiftPointY;startY2=axisy.p2c(axisy._max)+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){startX1+=tickstartgap;startX2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){startY1+=tickstartgap;startY2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}continue;}else if(y1<=axisy._min&&y2<=axisy._min){startX1=axisx.p2c(x1)+shiftPointX;startX2=axisx.p2c(x2)+shiftPointX;startY1=axisy.p2c(axisy._min)+shiftPointY;startY2=axisy.p2c(axisy._min)+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){startX1+=tickstartgap;startX2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){startY1+=tickstartgap;startY2+=tickstartgap;}area.lineTo(startX1,startY1+axisy._tickendspace);area.lineTo(startX2,startY2+axisy._tickendspace);}continue;}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy._min&&y2>=axisy._min){x1=(axisy._min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy._min;}else if(y2<=y1&&y2<axisy._min&&y1>=axisy._min){x2=(axisy._min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy._min;}if(y1>=y2&&y1>axisy._max&&y2<=axisy._max){x1=(axisy._max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy._max;}else if(y2>=y1&&y2>axisy._max&&y1<=axisy._max){x2=(axisy._max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy._max;}if(x1!=x1old){startX1=axisx.p2c(x1old)+shiftPointX;startY1=axisy.p2c(y1)+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){startX1+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){startY1+=tickstartgap;}}area.lineTo(startX1,startY1);}area.lineTo(x1Point,y1Point);if(!nullDataFlag){var x2Point;var y2Point;if(isbargrouping){x2Point=axisx.p2c(x2)+shiftPointX;y2Point=axisy.p2c(y2)+shiftPointY;}else{x2Point=axisx.p2c(x2);y2Point=axisy.p2c(y2);}if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){x2Point+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){y2Point+=tickstartgap;}}y2Point+=axisy._tickendspace;area.lineTo(x2Point,y2Point);}if(x2!=x2old){if(!nullDataFlag){startX1=axisx.p2c(x2)+shiftPointX;startX2=axisx.p2c(x2old)+shiftPointX;startY1=axisy.p2c(y2)+shiftPointY;startY2=axisy.p2c(y2)+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){startX1+=tickstartgap;startX2+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){startY1+=tickstartgap;startY2+=tickstartgap;}}area.lineTo(startX1,startY1);area.lineTo(startX2,startY2);}}}area._series=this;if(bCreate){this._itemCnt++ ;this._chart._seriesGroup.addChild(area);}area.closePath();this._setLineAreaClip(area);return area;};_pChartBasicSeriesControl._drawCurveLine=function(points,linestyle,lineopacity,Ishighlight,skipmoves){var seriesGroup=this._chart._seriesGroup;var bCreate=false;var path;if(Ishighlight){path=new nexacro.ChartGraphicsPaths();path.set_id(this._configIndex+" SeriesHighlightCurveLineItem_0");}else{var seriesid=this._configIndex+" SeriesCurveLineItem_0";path=seriesGroup.getObjectByID(seriesid);if(!path){bCreate=true;path=new nexacro.ChartGraphicsPaths();path.set_id(seriesid);}else{path.clear();}}path.set_strokepen(linestyle);path.set_opacity(lineopacity);path.moveTo(points[0][0],points[0][1]);var plength=points.length;for(var i=0;i<plength;i++ ){var x1=points[i][2][0],y1=points[i][2][1],cx=points[i][2][2],cy=points[i][2][3],x2=points[i][2][4],y2=points[i][2][5];var type=points[i][3];var skipmove=skipmoves[i];if(skipmove==true){if(y2!=null&&x2!=null){path.moveTo(x2,y2);}else{path.moveTo(cx,cy);}}else if(type=="quadraticCurveTo"){if(i==skipmoves.length&&skipmoves[skipmoves.length-1]==true){continue;}path.quadraticCurveTo(new nexacro.Point(x1,y1),new nexacro.Point(cx,cy));}else if(type!="quadraticCurveTo"&&i!=(plength-2)){path.cubicCurveTo(x1,y1,cx,cy,x2,y2);}}if(Ishighlight){}else{path._series=this;if(bCreate){this._chart._seriesGroup.addChild(path);this._itemCnt++ ;}}this._setLineAreaClip(path);return path;};_pChartBasicSeriesControl._drawCurveArea=function(points,vpoints,lineareafillstyle,lineareaopacity){var boardRect=this._chart._boardRect,borderHeight=this._chart._boardBorderHeight,boardHeight=0,boardWidth=0,zeroBase=0,xaxis=this._xaxis,yaxis=this._yaxis,rotateaxis=this._chart.rotateaxis,seriesGroup=this._chart._seriesGroup,bCreate=false,i,x1,y1,cx,cy,x2,y2,type,area;if(boardRect){boardHeight=boardRect.height-borderHeight;}var plength=points.length;var pvlength=vpoints.length;var seriesid=this._configIndex+" SeriesCurveAreaItem_0";area=seriesGroup.getObjectByID(seriesid);if(!area){bCreate=true;area=new nexacro.ChartGraphicsPaths();area.set_id(seriesid);}else{area.clear();}area.set_fillstyle(lineareafillstyle);area.set_opacity(lineareaopacity);if(plength<=0){return area;}area.moveTo(points[0][0],points[0][1]);for(i=0;i<plength;i++ ){x1=points[i][2][0];y1=points[i][2][1];cx=points[i][2][2];cy=points[i][2][3];x2=points[i][2][4];y2=points[i][2][5];type=points[i][3];if(type=="quadraticCurveTo"){area.quadraticCurveTo(new nexacro.Point(x1,y1),new nexacro.Point(cx,cy));}else if(type!="quadraticCurveTo"&&i!=(plength-2)){area.cubicCurveTo(x1,y1,cx,cy,x2,y2);}}if(!rotateaxis){if(this._chart._isnegativedata){zeroBase=yaxis.p2c(yaxis._min);boardHeight=zeroBase;boardHeight+=yaxis._tickendspace;if(pvlength>0){boardHeight=vpoints[0][1];}}area.lineTo(points[plength-1][0],boardHeight);for(i=0;i<pvlength;i++ ){x1=vpoints[i][2][0];y1=vpoints[i][2][1];cx=vpoints[i][2][2];cy=vpoints[i][2][3];x2=vpoints[i][2][4];y2=vpoints[i][2][5];type=vpoints[i][3];if(type=="quadraticCurveTo"){area.quadraticCurveTo(new nexacro.Point(x1,y1),new nexacro.Point(cx,cy));}else if(type!="quadraticCurveTo"&&i!=(pvlength-2)){area.cubicCurveTo(x1,y1,cx,cy,x2,y2);}}if(this._chart._isnegativedata){if(pvlength>0){boardHeight=vpoints[pvlength-1][1];}}area.lineTo(points[0][0],boardHeight);}else{if(this._chart._isnegativedata){zeroBase=xaxis.p2c(xaxis._min);boardWidth=zeroBase;if(pvlength>0){boardWidth=vpoints[0][1];if(pvlength>0){boardWidth=vpoints[0][0];}}}area.lineTo(boardWidth,points[plength-1][1]);for(i=0;i<pvlength;i++ ){x1=vpoints[i][2][0];y1=vpoints[i][2][1];cx=vpoints[i][2][2];cy=vpoints[i][2][3];x2=vpoints[i][2][4];y2=vpoints[i][2][5];type=vpoints[i][3];if(type=="quadraticCurveTo"){area.quadraticCurveTo(new nexacro.Point(x1,y1),new nexacro.Point(cx,cy));}else if(type!="quadraticCurveTo"&&i!=(pvlength-2)){area.cubicCurveTo(x1,y1,cx,cy,x2,y2);}}if(this._chart._isnegativedata){if(pvlength>0){boardWidth=vpoints[pvlength-1][0];}}area.lineTo(boardWidth,points[0][1]);}area.closePath();area._series=this;if(bCreate){this._chart._seriesGroup.addChild(area);this._itemCnt++ ;}this._setLineAreaClip(area);return area;};_pChartBasicSeriesControl._drawBarItemText=function(left,right,bottom,top,width,height,item,stackgroupname,index,uservalue){var seriesGroup=this._chart._seriesGroup;var itemText,itemtextPosition,itemtextGap;if(stackgroupname!==undefined&&stackgroupname!==null){var itemtextmask=this.itemtextmask,itemtextfont=this.itemtextfont,itemtextcolor=this._chart._stacktotaltextcolor,itemtextwidth=this.itemtextwidth,chart=this._chart;var index2=item._index;var uservalue2=item._value;var text=nexacro._getChartDisplayText_text(uservalue2,0,itemtextmask,chart);var textId=stackgroupname+" StackBarAllTextItem_"+index2;itemText=seriesGroup.getObjectByID(textId);if(!itemText){itemText=new nexacro.ChartGraphicsText(0,0);itemText.set_id(textId);seriesGroup.addChild(itemText);this._itemtextlist.push(textId);}itemText.set_text(text);itemText.set_font(itemtextfont?itemtextfont.value||itemtextfont:"12pt Verdana");itemText.set_color(itemtextcolor?itemtextcolor.value||itemtextcolor:"#000000");itemText.index=item.index;itemText.value=uservalue2;if(itemtextwidth>0){itemText.set_width(itemtextwidth);itemText.set_wordWrap(true);}else{itemText.set_wordWrap(false);}itemtextPosition="outside";itemtextGap=5;}else{itemText=this._createSeriesItemText(item);itemtextPosition=this.baritemtextposition;itemtextGap=this.baritemtextgap;}var rotateaxis=this._chart.rotateaxis;function positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");textTop=top+(height/2);textLeft=left+itemtextGap;}else{itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=bottom-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){textTop=top+(height/2);textLeft=left+(width/2)+itemtextGap;}else{textLeft=left+(width/2);textTop=top+(height/2)-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");textTop=top+(height/2);textLeft=right-itemtextGap;}else{itemText.set_verticalAlign("top");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=top+itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionoutside(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");textTop=top+(height/2);textLeft=right+itemtextGap;}else{itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=top-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}if(!nexacro._isNull(itemText)){if(itemtextPosition){switch(itemtextPosition){case "start":{positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "middle":{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "end":{positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "outside":{positionoutside(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;default:positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);break;}}else{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}this._chart._setChangeInBoardAreaPos(itemText);if(stackgroupname!==undefined&&stackgroupname!==null){}else{seriesGroup.addChild(itemText);itemText._series=this;}}};_pChartBasicSeriesControl._drawPointItemText=function(cx,cy,item){var seriesGroup=this._chart._seriesGroup;var itemText=this._createSeriesItemText(item);function positionlefttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}if(!nexacro._isNull(itemText)){var itemtextPosition=this.pointitemtextposition,itemtextGap=this.pointitemtextgap;if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;}};_pChartBasicSeriesControl._drawLineItemText=function(datapoints,axisx,axisy,item){var points=datapoints.points,ps=datapoints.pointsize;var itemtextPosition=this.lineitemtextposition,itemtextGap=this.lineitemtextgap;var rotateaxis=this._chart.rotateaxis;var tickstartgap;function positionlefttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}if(this._chart._isstepline&&this.linetype!="step"){ps+=3;}for(var i=0;i<points.length;i+=ps){var itemindex=points[i],preitemindex=points[i+ps],value=points[i+1],linetype=this.linetype,itemText;if(linetype=="step"&&itemindex==preitemindex){continue;}if(!rotateaxis){item.index=itemindex;item.value=value;}else{item.index=value;item.value=itemindex;}itemText=this._createSeriesItemText(item);if(!nexacro._isNull(itemText)){var cx=0,cy=0,width=this._lineborderwidth,seriesGroup=this._chart._seriesGroup;cx=axisx.p2c(itemindex);cy=axisy.p2c(value);var shiftPointX=0;var shiftPointY=0;if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}}cx=cx+shiftPointX;cy=cy+shiftPointY;if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){cx+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){cy+=tickstartgap;}}cy+=axisy._tickendspace;if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap,width);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap,width);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap,width);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap,width);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap,width);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap,width);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap,width);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap,width);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap,width);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;this._itemCnt++ ;this._seriesitems[itemindex]=itemText;}}};_pChartBasicSeriesControl._showBarHighlight=function(item){if(!this.highlightbarvisible){return;}var barHighlight=item._barHighlight;if(!barHighlight){var points=item._points,index=item.index,highlightbarlinestyle=this.highlightbarlinestyle||"1px solid "+this._highlightcolor,highlightbarfillstyle=this.highlightbarfillstyle||this._highlightcolor,highlightbaropacity=this.highlightbaropacity,barLeft,barRight,barwidth;if(this._chart.seriesset.length>1&&this._chart._bargrouping&&this._groupbarwidth!=null){this._barsize=this._chart._toGroupBarWidth(this._groupbarwidth);barwidth=this._barsize;}else if(this._chart.seriesset.length>1&&this._chart._bargrouping&&this._groupbarwidth==null){barwidth=this._chart._barsize;}else{this.on_apply_barsize(this.barsize);barwidth=this._barsize||this._chart._barsize;}barwidth=this._chart._getcheckTimeAxisBarWidth(barwidth);switch(this._baralign){case "left":barLeft=0;break;case "right":barLeft= -barwidth;break;default:barLeft= -barwidth/2;}barRight=barLeft+barwidth;this._drawBar(points[0],points[1],points[2],barLeft,barRight,this._xaxis,this._yaxis,highlightbarlinestyle,highlightbarfillstyle,highlightbaropacity,index,item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._hideBarHighlight=function(item){if(!this.highlightbarvisible){return;}var barHighlight=item._barHighlight;if(barHighlight&&!nexacro._ChartGraphicsLib.isEmpty(barHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(barHighlight);delete item._barHighlight;this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._showPointHighlight=function(item){if(!this.highlightpointvisible){return;}var pointHighlight=item._pointHighlight;if(!pointHighlight){var points=item._points,index=item.index,highlightpointlinestyle=this.highlightpointlinestyle||"1px solid "+this._highlightcolor,highlightpointfillstyle=this.highlightpointfillstyle||this._highlightcolor,highlightpointopacity=this.highlightpointopacity,highlightpointsize=this.highlightpointsize;if((highlightpointsize==""||highlightpointsize==undefined)&&highlightpointsize!==0){highlightpointsize=15;}if(!points){return false;}this._drawPoint(points[0],points[1],highlightpointsize,this._xaxis,this._yaxis,this.pointshape,this._pointshape,highlightpointlinestyle,highlightpointfillstyle,highlightpointopacity,index,item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._hidePointHighlight=function(item){if(!this.highlightpointvisible){return;}var pointHighlight=item._pointHighlight;if(pointHighlight&&!nexacro._ChartGraphicsLib.isEmpty(pointHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(pointHighlight);delete item._pointHighlight;this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._showLineHighlight=function(item){if(!this.highlightlinevisible){return;}var lineHighlight=item._lineHighlight;if(!lineHighlight){this._drawLineHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._hideLineHighlight=function(item){if(!this.highlightlinevisible){return;}var lineHighlight=item._lineHighlight;if(lineHighlight&&!nexacro._ChartGraphicsLib.isEmpty(lineHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(lineHighlight);delete item._lineHighlight;this._chart._graphicsControl.draw();}};_pChartBasicSeriesControl._drawLineHighlight=function(item){var highlightlinestyle=this.highlightlinestyle||"1px solid "+this._highlightcolor,linetype=this.linetype,highlightlineopacity=this.highlightlineopacity,datapoints=this._datapoints,xaxis=this._xaxis,yaxis=this._yaxis,path,highlightGroup=this._chart._highlightGroup,line=[],shiftPointX=0,shiftPointY=0,startPointX,startPointY,endPointX,endPointY,rotateaxis=this._chart.rotateaxis,tickstartgap;var categoryaxis;var valueaxis;function addCurveLine(type,points,cpoints){if(type===void 0||(type!=='cubic'&&type!=='quadratic')){type='quadratic';}type=type+'CurveTo';if(line.length==0){line.push([points[0],points[1],cpoints.concat(points.slice(2)),type]);}else if(type=="quadraticCurveTo"&&points.length==2){cpoints=cpoints.slice(0,2).concat(points);line.push([points[0],points[1],cpoints,type]);}else{line.push([points[2],points[3],cpoints.concat(points.slice(2)),type]);}}function getControlPoints(x0,y0,x1,y1,x2,y2,tension){var pow=Math.pow,sqrt=Math.sqrt,d01,d12,fa,fb,p1x,p1y,p2x,p2y;d01=sqrt(pow(x1-x0,2)+pow(y1-y0,2));d12=sqrt(pow(x2-x1,2)+pow(y2-y1,2));fa=tension*d01/(d01+d12);fb=tension-fa;p1x=x1+fa*(x0-x2);p1y=y1+fa*(y0-y2);p2x=x1-fb*(x0-x2);p2y=y1-fb*(y0-y2);return [p1x,p1y,p2x,p2y];}if(this.linetype=="curve"){var cp=[],tension=0.4,idx,prevx=null,prevy=null,x1,x2,y1,y2,ps=datapoints.pointsize,points=datapoints.points,len=points.length,pts=[];var lineareavisible=this.this.lineareavisible,skipmoves=[],skipindex=0;if(this._chart._isstepline&&linetype!="step"){ps+=3;}for(idx=0;idx<len;idx+=ps){x1=points[idx-ps];y1=points[idx-ps+1];x2=points[idx];y2=points[idx+1];var skipmove=false;if(y1==null||y2==null){if(x1!=null||x1!=null){if(lineareavisible){if(y1==null){y1=yaxis._min;}if(y2==null){y2=yaxis._min;}}else{if(y1==null){y1=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}if(y2==null){y2=yaxis._min;skipmove=true;skipmoves[skipindex-1]=skipmove;}}}}if(!skipmove){skipmoves.push(skipmove);}skipindex++ ;if(y1<=y2&&y1<yaxis._min){if(y2<yaxis._min){continue;}x1=(yaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y1=yaxis._min;}else if(y2<=y1&&y2<yaxis._min){if(y1<yaxis._min){continue;}x2=(yaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y2=yaxis._min;}if(y1>=y2&&y1>yaxis._max){if(y2>yaxis._max){continue;}x1=(yaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y1=yaxis._max;}else if(y2>=y1&&y2>yaxis._max){if(y1>yaxis._max){continue;}x2=(yaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y2=yaxis._max;}if(x1<=x2&&x1<xaxis._min){if(x2<xaxis._min){continue;}y1=(xaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x1=xaxis._min;}else if(x2<=x1&&x2<xaxis._min){if(x1<xaxis._min){continue;}y2=(xaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x2=xaxis._min;}if(x1>=x2&&x1>xaxis._max){if(x2>xaxis._max){continue;}y1=(xaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x1=xaxis._max;}else if(x2>=x1&&x2>xaxis._max){if(x1>xaxis._max){continue;}y2=(xaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x2=xaxis._max;}if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth&&this.barvisible){if(!rotateaxis){shiftPointX=this._barwidth/2;}else{shiftPointY=this._barwidth/2;shiftPointY= -shiftPointY;}}if(x1!=prevx||y1!=prevy){if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth){startPointX=xaxis.p2c(x1)+shiftPointX;startPointY=yaxis.p2c(y1)+shiftPointY;}else{startPointX=xaxis.p2c(x1);startPointY=yaxis.p2c(y1);}if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){startPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){startPointY+=tickstartgap;}}pts.push(startPointX,startPointY+yaxis._tickendspace);}prevx=x2;prevy=y2;if(x2<=0||y2<=0){this._chart._isnegativedata=true;}if(this._chart._getVisibleStackGroupingLength()>1&&this._chart._bargrouping&&this._barwidth){endPointX=xaxis.p2c(x2)+shiftPointX;endPointY=yaxis.p2c(y2)+shiftPointY;}else{endPointX=xaxis.p2c(x2);endPointY=yaxis.p2c(y2);}if(!rotateaxis){tickstartgap=xaxis._tickstartgap;if(tickstartgap){endPointX+=tickstartgap;}}else{tickstartgap=yaxis._tickstartgap;if(tickstartgap){endPointY+=tickstartgap;}}pts.push(endPointX,endPointY+yaxis._tickendspace);}len=pts.length;for(idx=0;idx<len-2;idx+=2){cp=cp.concat(getControlPoints.apply(this,pts.slice(idx,idx+6).concat([tension])));}addCurveLine('quadratic',pts.slice(0,4),cp.slice(0,2));for(idx=2;idx<len-3;idx+=2){addCurveLine('cubic',pts.slice(idx,idx+4),cp.slice(2*idx-2,2*idx+2));}addCurveLine('quadratic',pts.slice(len-2,len),[cp[2*len-10],cp[2*len-9],pts[len-4],pts[len-3]]);path=this._drawCurveLine(line,highlightlinestyle,highlightlineopacity,true,skipmoves);highlightGroup.addChild(path);item._lineHighlight=path;path._item=item;path._series=this;}else{highlightlinestyle=this.highlightlinestyle||"1px solid "+this._highlightcolor;highlightlineopacity=this.highlightlineopacity;datapoints=this._datapoints;categoryaxis=this._xaxis;valueaxis=this._yaxis;highlightGroup=this._chart._highlightGroup;path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,highlightlinestyle,highlightlineopacity,true);highlightGroup.addChild(path);item._lineHighlight=path;path._item=item;path._series=this;}};_pChartBasicSeriesControl._findMatchingSeries=function(stacktype){var res=null,allseries;var stackobject=this._chart._getVisibleStackGroupObject(this);allseries=stackobject._list;for(var i=0;i<allseries.length; ++i){if(this==allseries[i]){break;}res=allseries[i];}return res;};_pChartBasicSeriesControl._setStackDatapoints=function(){var datapoints=this._datapoints,stacktype,other;stacktype=this._stacktype=="none"?this._chart.stacktype:this._stacktype;other=this._findMatchingSeries(stacktype);if(!other){return;}var ps=datapoints.pointsize,points=datapoints.points,otherps=other._datapoints.pointsize,otherpoints=other._datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=this.linevisible,rotateaxis=this._chart.rotateaxis,withbottom=ps>2&&(rotateaxis?datapoints.format[2].x:datapoints.format[2].y),withsteps=(withlines&&this.linetype=="step")||this._chart._isstepline,fromgap=true,keyOffset=rotateaxis?1:0,accumulateOffset=rotateaxis?0:1,i=0,j=0,l,m;while(true){if(i>=points.length){break;}l=newpoints.length;if(points[i]==null){for(m=0;m<ps; ++m){newpoints.push(points[i+m]);}i+=ps;}else if(j>=otherpoints.length){for(m=0;m<ps; ++m){newpoints.push(points[i+m]);}i+=ps;}else if(otherpoints[j]==null){for(m=0;m<ps; ++m){newpoints.push(null);}fromgap=true;j+=otherps;}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps; ++m){newpoints.push(points[i+m]);}newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps;}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps; ++m){newpoints.push(points[i+m]);}bottom=qy;}j+=otherps;}else{if(fromgap&&withlines){i+=ps;continue;}for(m=0;m<ps; ++m){newpoints.push(points[i+m]);}if(withlines&&j>0&&otherpoints[j-otherps]!=null){bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx);}newpoints[l+accumulateOffset]+=bottom;i+=ps;}fromgap=false;if(l!=newpoints.length&&withbottom){newpoints[l+2]+=bottom;}}if(withsteps&&l!=newpoints.length&&l>0&&newpoints[l]!=null&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps; ++m){newpoints[l+ps+m]=newpoints[l+m];}newpoints[l+1]=newpoints[l-ps+1];}}datapoints.points=newpoints;};_pChartBasicSeriesControl._setStackPercentDatapoints=function(){var chart=this._chart,newPoints=[],keyIdx=0,withlines=this.linevisible,withsteps=(withlines&&this.linetype=="step")||this._chart._isstepline,valueIdx=1;if(chart.rotateaxis&&!this._chart._isCompositeSeries){keyIdx=1;valueIdx=0;}var datapoints=this._datapoints,stackPercentSums={},stackPercentBases={},pIdx=0,vIdx=0,dVal=0;var ps=datapoints.pointsize;var stackobject=chart._getVisibleStackGroupObject(this);stackPercentSums=stackobject._stackPercentSums;stackPercentBases=stackobject._stackPercentBases;if(withsteps){ps+=3;}for(var i=0;i<datapoints.points.length;i+=ps){pIdx=i+keyIdx;vIdx=i+valueIdx;dVal=datapoints.points[pIdx];if(!stackPercentBases[dVal]){stackPercentBases[dVal]=0;}newPoints[pIdx]=dVal;newPoints[vIdx]=datapoints.points[vIdx]+stackPercentBases[dVal];newPoints[i+2]=stackPercentBases[dVal];stackPercentBases[dVal]+=datapoints.points[vIdx];if(stackPercentSums[newPoints[pIdx]]>0){var val1=newPoints[vIdx]*100/stackPercentSums[newPoints[pIdx]];var val2=newPoints[i+2]*100/stackPercentSums[newPoints[pIdx]];newPoints[vIdx]=val1;newPoints[i+2]=val2;if(withsteps&&datapoints.points.length>(vIdx+3)&&datapoints.points.length>(i+2+3)){newPoints[pIdx+3]=dVal+1;newPoints[vIdx+3]=val1;newPoints[i+2+3]=val2;}}else{newPoints[vIdx]=0;newPoints[i+2]=0;if(withsteps&&datapoints.points.length>(vIdx+3)&&datapoints.points.length>(i+2+3)){newPoints[pIdx+3]=dVal+1;newPoints[vIdx+3]=0;newPoints[i+2+3]=0;}}}datapoints.points=newPoints;};_pChartBasicSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;if(changedColorset){var barvisible=this.barvisible,pointvisible=this.pointvisible,linevisible=this.linevisible,barlinestyle,barfillstyle,linestyle,lineareafillstyle,pointlinestyle,pointfillstyle;var width,style,color;if(barvisible){if(this._barlinestyle){width=this._barlinestyle.width;style=this._barlinestyle.style;color=this._barlinestyle.color;barlinestyle=width+" "+style+" "+color;this.set_barlinestyle(barlinestyle);}else{barlinestyle="1px solid "+colorset;this._applyPropertySeries("Bar","barlinestyle",barlinestyle);}if(this._barfillstyle){barfillstyle=this._barfillstyle;this.set_barfillstyle(barfillstyle);}else{barfillstyle=colorset;this._applyPropertySeries("Bar","barfillstyle",barfillstyle);}}if(linevisible){if(this._linestyle){width=this._linestyle.width;style=this._linestyle.style;color=this._linestyle.color;linestyle=width+" "+style+" "+color;this.set_linestyle(linestyle);}else{linestyle="1px solid "+colorset;this._applyPropertySeries("Line","linestyle",linestyle);this.linestyle=linestyle;}if(this.lineareavisible){if(this._lineareafillstyle){lineareafillstyle=this._lineareafillstyle;this.set_lineareafillstyle(lineareafillstyle);}else{lineareafillstyle=colorset;this._applyPropertySeries("Area","lineareafillstyle",lineareafillstyle);this.lineareafillstyle=lineareafillstyle;}}}if(pointvisible){if(this._pointlinestyle){width=this._pointlinestyle.width;style=this._pointlinestyle.style;color=this._pointlinestyle.color;pointlinestyle=width+" "+style+" "+color;this.set_pointlinestyle(pointlinestyle);}else{pointlinestyle="1px solid "+colorset;this._applyPropertySeries("Point","pointlinestyle",pointlinestyle);this.pointlinestyle=pointlinestyle;}if(this._pointfillstyle){pointfillstyle=this._pointfillstyle;this.set_pointfillstyle(pointfillstyle);}else{pointfillstyle=colorset;this._applyPropertySeries("Point","pointfillstyle",pointfillstyle);this.pointfillstyle=pointfillstyle;}}}};_pChartBasicSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};}
if(!nexacro.BubbleChart){nexacro.BubbleChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._AxisChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);};var _pBubbleChart=nexacro._createPrototype(nexacro._AxisChartBase,nexacro.BubbleChart);nexacro.BubbleChart.prototype=_pBubbleChart;_pBubbleChart._type_name="BubbleChart";_pBubbleChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._AxisChartBase.prototype.on_create_contents.call(this);}};_pBubbleChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var visible=s._orgVisible;s._orgVisible=undefined;this._drawing=true;if(visible){s.set_visible(true);}this._drawing=false;this._changedData=true;this._draw();}};_pBubbleChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgVisible===undefined||s._orgVisible===null){s._orgVisible=s.visible;}this._drawing=true;s.set_visible(false);this._drawing=false;this._changedData=true;this._draw();}};_pBubbleChart._createSeries=function(contents,id){var series=new nexacro.ChartBubbleSeriesControl(id,this,this._graphicsControl);return series;};_pBubbleChart._createValueaxes=function(o,id){var seriesset=this.seriesset;var valueaxis;var location;valueaxis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);valueaxis._type="valueAxis";if(this.valueaxes.length==0){location=o.opposite||"bottom";valueaxis._location=location;}if(this.valueaxes.length==1){location=o.opposite||"left";valueaxis._location=location;}if(seriesset){for(var i=seriesset.length-1;i> -1;i-- ){var series=seriesset[i];if(series){if(series.valueaxis==valueaxis.id){location=o.opposite?"top":"bottom";break;}if(series.value2axis==valueaxis.id){location=o.opposite?"right":"left";break;}}}}var opposite=o.opposite||valueaxis.opposite;valueaxis.on_apply_opposite(opposite);this.valueaxes.push(valueaxis);this._axes.push(valueaxis);if(location=="top"||location=="bottom"){this._xaxes.push(valueaxis);}else{this._yaxes.push(valueaxis);}return valueaxis;};_pBubbleChart._setSeries=function(){nexacro._AxisChartBase.prototype._setSeries.call(this);nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){var valueaxis;var value2axis;var valueaxes=this.valueaxes;var xaxes=this._xaxes;var yaxes=this._yaxes;var length=valueaxes.length;var i;var group;var visible;var direction;if(!length||length==0||length==1){return false;}valueaxis=this.getValueaxisByID(obj.valueaxis);value2axis=this.getValueaxisByID(obj.value2axis);if(valueaxis){valueaxis.on_apply_visible(valueaxis.visible);obj.on_apply_valueaxis(valueaxis.id);}else{for(i=0;i<xaxes.length;i++ ){valueaxis=xaxes[i];if(valueaxis){group=valueaxis._group;if(group){visible=valueaxis.visible;if(visible){if(xaxes[i].id){xaxes[i].on_apply_visible(visible);obj.on_apply_valueaxis(xaxes[i].id);}break;}}}}}if(value2axis){value2axis.on_apply_visible(value2axis.visible);obj.on_apply_value2axis(value2axis.id);}else{for(i=0;i<yaxes.length;i++ ){value2axis=yaxes[i];if(value2axis){group=value2axis._group;if(group){visible=value2axis.visible;if(visible){if(yaxes[i].id){yaxes[i].on_apply_visible(visible);obj.on_apply_value2axis(yaxes[i].id);}break;}}}}}if(!obj._xaxis||!obj._xaxis._direction){var axis;for(i=0;i<length;i++ ){axis=valueaxes[i];if(axis){direction=axis._direction;if(direction&&direction=="x"){obj.on_apply_valueaxis(axis.id);break;}}}}if(!obj._yaxis||!obj._yaxis._direction){var axis2;for(i=0;i<length;i++ ){axis2=valueaxes[i];if(axis2){direction=axis2._direction;if(direction&&direction=="y"){obj.on_apply_value2axis(axis2.id);break;}}}}},this);this._changedData=true;};_pBubbleChart._getHighlightVisible=function(){var seriesset=this.seriesset,length=seriesset.length,highlightvisible=false;for(var i=0;i<length;i++ ){var series=seriesset[i];if(series.highlightvisible){highlightvisible=true;break;}}return highlightvisible;};_pBubbleChart._deleteSeries=function(series,index){nexacro._ChartBase.prototype._deleteSeries.call(this,series,index);var valueaxes=this.valueaxes;var seriesset=this.seriesset;var serieslength=this.seriesset.length;if(valueaxes){for(var i=valueaxes.length-1;i> -1;i-- ){var valueaxis=valueaxes[i];var bused=false;if(valueaxis){for(var j=0;j<serieslength;j++ ){var s=seriesset[j];if(s){if((s._xaxis&&s._xaxis.id==valueaxis.id)||(s._yaxis&&s._yaxis.id==valueaxis.id)){bused=true;}}}if(!bused||serieslength==0){valueaxis._used=false;valueaxis.on_apply_visible(false);valueaxis.on_apply_boardlinevisible(false);}}}}if(this.seriesset.length==0){if(this.hrangebar){this.hrangebar.on_apply_visible(false);}if(this.vrangebar){this.vrangebar.on_apply_visible(false);}}};}if(!nexacro.ChartBubbleSeriesControl){nexacro.ChartBubbleSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this.value2column=new nexacro.BindableValue("");this.value3column=new nexacro.BindableValue("");};var _pChartBubbleSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartBubbleSeriesControl);nexacro.ChartBubbleSeriesControl.prototype=_pChartBubbleSeriesControl;_pChartBubbleSeriesControl._type_name="ChartBubbleSeriesControl";_pChartBubbleSeriesControl.fillstyle="";_pChartBubbleSeriesControl.highlightfillstyle="";_pChartBubbleSeriesControl.highlightlinestyle="";_pChartBubbleSeriesControl.highlightopacity=1;_pChartBubbleSeriesControl.highlightsize=undefined;_pChartBubbleSeriesControl.highlightvisible=false;_pChartBubbleSeriesControl.linestyle="";_pChartBubbleSeriesControl.maxsize=undefined;_pChartBubbleSeriesControl.minsize=undefined;_pChartBubbleSeriesControl.opacity=1;_pChartBubbleSeriesControl.selectfillstyle="";_pChartBubbleSeriesControl.selectlinestyle="";_pChartBubbleSeriesControl.selectopacity=1;_pChartBubbleSeriesControl.valueaxis="";_pChartBubbleSeriesControl.value2axis="";_pChartBubbleSeriesControl.visible=true;_pChartBubbleSeriesControl.size=undefined;_pChartBubbleSeriesControl.pointshape="circle";_pChartBubbleSeriesControl.itemtextposition="";_pChartBubbleSeriesControl.itemtextgap=undefined;_pChartBubbleSeriesControl._color=null;_pChartBubbleSeriesControl._mindata=null;_pChartBubbleSeriesControl._maxdata=null;_pChartBubbleSeriesControl._borderwidth=null;_pChartBubbleSeriesControl._maxsize=0.3;_pChartBubbleSeriesControl._minsize=0.03;_pChartBubbleSeriesControl._invalidvalue2column=false;_pChartBubbleSeriesControl._invalidvalue3column=false;_pChartBubbleSeriesControl._isBubbleSeries=false;_pChartBubbleSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};_pChartBubbleSeriesControl.set_valueaxis=function(val){if(this.valueaxis!=val){this._changeContentsProperty("valueaxis",val,this.valueaxis);this.valueaxis=val;this.on_apply_valueaxis(val);}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_valueaxis=function(valueaxisId){var valueaxis=this.parent.getValueaxisByID(valueaxisId);if(valueaxis){valueaxis._used=true;valueaxis._afterSetProperties();var usedAxis=false;if(this._chart.seriesset){var seriesset=this._chart.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]&&seriesset[i].id!=this.id){if((seriesset[i]._yaxis&&this._xaxis&&seriesset[i]._yaxis.id==this._xaxis.id)||(seriesset[i]._xaxis&&this._xaxis&&seriesset[i]._xaxis.id==this._xaxis.id)&&!usedAxis){usedAxis=true;}}}}if(this._xaxis&&!usedAxis&&this._xaxis.id!=valueaxis.id){this._xaxis._used=false;this._xaxis.on_apply_visible(false);}this._xaxis=valueaxis;this._xaxis._direction="x";this._xaxis.on_apply_opposite(this._xaxis.opposite);this._chart._changedData=true;}};_pChartBubbleSeriesControl.set_value2axis=function(val){if(this.value2axis!=val){this._changeContentsProperty("value2axis",val,this.value2axis);this.value2axis=val;this.on_apply_value2axis(val);}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_value2axis=function(value2axisId){var value2axis=this.parent.getValueaxisByID(value2axisId);if(value2axis){value2axis._used=true;value2axis._afterSetProperties();var usedAxis=false;if(this._chart.seriesset){var seriesset=this._chart.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]&&seriesset[i].id!=this.id){if((seriesset[i]._yaxis&&this._yaxis&&seriesset[i]._yaxis.id==this._yaxis.id)||(seriesset[i]._xaxis&&this._yaxis&&seriesset[i]._xaxis.id==this._yaxis.id)&&!usedAxis){usedAxis=true;}}}}if(this._yaxis&&!usedAxis&&this._yaxis.id!=value2axis.id){this._yaxis._used=false;this._yaxis.on_apply_visible(false);}this._yaxis=value2axis;this._yaxis._direction="y";this._yaxis.on_apply_opposite(this._yaxis.opposite);this._chart._changedData=true;}};_pChartBubbleSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_visible=function(visible){if(this._is_initprop){return;}if(visible){var selecttype=this.selecttype;if(selecttype){this._chart._changedData=true;}else{this._redrawSeries=false;this._applyPropertySeries("visible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._redrawSeries=false;this._applyPropertySeries("visible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBubbleSeriesControl.set_value2column=function(v){if(this.value2column._value!=v){this._changeContentsProperty("value2column",v,this.value2column);this.value2column._set(v);this.on_apply_value2column();}if(this._chart._changedData==true){this._chart._reset=true;this._chart._draw();}else{this._chart._draw();}};_pChartBubbleSeriesControl.on_apply_value2column=function(){var bindtype=this.value2column._bindtype;if(bindtype==0){this._invalidvalue2column=true;}else{var value2column=this._getBindableValue("value2column");var binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(value2column);if(!coltype){this._invalidvalue2column=true;}else{this._invalidvalue2column=false;}}}this._chart._changedData=true;};_pChartBubbleSeriesControl.set_value3column=function(v){if(this.value3column._value!=v){this._changeContentsProperty("value3column",v,this.value3column);this.value3column._set(v);this.on_apply_value3column();}if(this._chart._changedData==true){this._chart._reset=true;this._chart._draw();}else{this._chart._draw();}};_pChartBubbleSeriesControl.on_apply_value3column=function(){var bindtype=this.value3column._bindtype;if(bindtype==0){this._invalidvalue3column=true;}else{var value3column=this._getBindableValue("value3column");var binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(value3column);if(!coltype){this._invalidvalue3column=true;}else{this._invalidvalue3column=false;}}}this._isBubbleSeries=true;this._chart._changedData=true;};_pChartBubbleSeriesControl.set_maxsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}if(lVal<0||lVal>100){return;}}if(this.maxsize!=val){this._changeContentsProperty("maxsize",val,this.maxsize);this.maxsize=val;this.on_apply_maxsize(lVal);}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_maxsize=function(maxsize){if(!nexacro._ChartGraphicsLib.isEmpty(maxsize)){var _maxsize=maxsize*0.01;if(_maxsize<this._minsize){this._maxsize=this._minsize;this._minsize=_maxsize;}else{this._maxsize=_maxsize;}}this._chart._changedData=true;};_pChartBubbleSeriesControl.set_minsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}if(lVal<0||lVal>100){return;}}if(this.minsize!=val){this._changeContentsProperty("minsize",val,this.minsize);this.minsize=val;this.on_apply_minsize(lVal);}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_minsize=function(minsize){if(!nexacro._ChartGraphicsLib.isEmpty(minsize)){var _minsize=minsize*0.01;if(this._maxsize<_minsize){this._minsize=this._maxsize;this._maxsize=_minsize;}else{this._minsize=_minsize;}}this._chart._changedData=true;};_pChartBubbleSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;}this._redrawSeries=false;this._applyPropertySeries("linestyle",linestyle.value);};_pChartBubbleSeriesControl.set_fillstyle=function(val){this.fillstyle=val;if(val){if(this._fillstyle==null||this._fillstyle.value!=val){var oldValue;if(this._fillstyle){oldValue=this._fillstyle.value;}this._changeContentsProperty("fillstyle",val,oldValue);var fillstyle=nexacro.BackgroundObject(val,this);this._fillstyle=fillstyle;this.on_apply_fillstyle(fillstyle);}}else{if(this._fillstyle){this._fillstyle=null;this.on_apply_fillstyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_fillstyle=function(fillstyle){this._redrawSeries=false;this._applyPropertySeries("fillstyle",fillstyle.value);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartBubbleSeriesControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_opacity=function(opacity){this._redrawSeries=false;this._applyPropertySeries("opacity",opacity.value);};_pChartBubbleSeriesControl.set_highlightvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightvisible!=val){this._changeContentsProperty("highlightvisible",val,this.highlightvisible);this.highlightvisible=val;this.on_apply_highlightvisible(val);}this._chart._draw();};_pChartBubbleSeriesControl.set_size=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.size!=val){this._changeContentsProperty("size",val,this.size);this.size=val;this.on_apply_size();}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_size=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBubbleSeriesControl.set_pointshape=function(val){var pointshape_enum=["circle","square","diamond","triangle","cross"];if(pointshape_enum.indexOf(val)== -1){return;}if(this.pointshape!=val){this._changeContentsProperty("pointshape",val,this.pointshape);this.pointshape=val;this.on_apply_pointshape();}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_pointshape=function(){this._chart._changedData=true;};_pChartBubbleSeriesControl.on_apply_highlightvisible=function(highlightvisible){};_pChartBubbleSeriesControl.set_highlightsize=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.highlightsize!=val){this._changeContentsProperty("highlightsize",val,this.highlightsize);this.highlightsize=val;this.on_apply_highlightsize();}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_highlightsize=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBubbleSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartBubbleSeriesControl.set_highlightfillstyle=function(val){this.highlightfillstyle=val;if(val){if(this._highlightfillstyle==null||this._highlightfillstyle.value!=val){var oldValue;if(this._highlightfillstyle){oldValue=this._highlightfillstyle.value;}this._changeContentsProperty("highlightfillstyle",val,oldValue);var highlightfillstyle=nexacro.BackgroundObject(val,this);this._highlightfillstyle=highlightfillstyle;this.on_apply_highlightfillstyle(highlightfillstyle);}}else{if(this._highlightfillstyle){this._highlightfillstyle=null;this.on_apply_highlightfillstyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_highlightfillstyle=function(highlightfillstyle){};_pChartBubbleSeriesControl.set_highlightopacity=function(val){this.highlightopacity=val;if(0===val||val){if(this._highlightopacity==null||this._highlightopacity.value!=val){var oldValue;if(this._highlightopacity){oldValue=this._highlightopacity.value;}this._changeContentsProperty("highlightopacity",val,oldValue);var highlightopacity=nexacro.OpacityObject(val);this._highlightopacity=highlightopacity;this.on_apply_highlightopacity(highlightopacity);}}else{if(this._highlightopacity){this._highlightopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_highlightopacity=function(highlightopacity){};_pChartBubbleSeriesControl.set_selectlinestyle=function(val){this.selectlinestyle=val;if(val){if(this._selectlinestyle==null||this._selectlinestyle.value!=val){var oldValue;if(this._selectlinestyle){oldValue=this._selectlinestyle.value;}this._changeContentsProperty("selectlinestyle",val,oldValue);var selectlinestyle=nexacro.BorderLineObject(val);this._selectlinestyle=selectlinestyle;this.on_apply_selectlinestyle(selectlinestyle);}}else{if(this._selectlinestyle){this._selectlinestyle=null;this.on_apply_selectlinestyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_selectlinestyle=function(selectlinestyle){this._redrawSeries=false;this._applyPropertySeries("selectlinestyle",selectlinestyle,"select");};_pChartBubbleSeriesControl.set_selectfillstyle=function(val){this.selectfillstyle=val;if(val){if(this._selectfillstyle==null||this._selectfillstyle.value!=val){var oldValue;if(this._selectfillstyle){oldValue=this._selectfillstyle.value;}this._changeContentsProperty("selectfillstyle",val,oldValue);var selectfillstyle=nexacro.BackgroundObject(val,this);this._selectfillstyle=selectfillstyle;this.on_apply_selectfillstyle(selectfillstyle);}}else{if(this._selectfillstyle){this._selectfillstyle=null;this.on_apply_selectfillstyle(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_selectfillstyle=function(selectfillstyle){this._redrawSeries=false;this._applyPropertySeries("selectfillstyle",selectfillstyle,"select");};_pChartBubbleSeriesControl.set_selectopacity=function(val){this.selectopacity=val;if(0===val||val){if(this._selectopacity==null||this._selectopacity.value!=val){var oldValue;if(this._selectopacity){oldValue=this._selectopacity.value;}this._changeContentsProperty("selectopacity",val,oldValue);var selectopacity=nexacro.OpacityObject(val);this._selectopacity=selectopacity;this.on_apply_selectopacity(selectopacity);}}else{if(this._selectopacity){this._selectopacity=null;this.on_apply_selectopacity(null);}}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_selectopacity=function(selectopacity){this._redrawSeries=false;this._applyPropertySeries("selectopacity",selectopacity,"select");};_pChartBubbleSeriesControl.set_itemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.itemtextposition!=val){this._changeContentsProperty("itemtextposition",val,this.itemtextposition);this.itemtextposition=val;this.on_apply_itemtextposition();}this._chart._draw();};_pChartBubbleSeriesControl.on_apply_itemtextposition=function(){this._chart._changedData=true;};_pChartBubbleSeriesControl.set_itemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.itemtextgap!=val){this._changeContentsProperty("itemtextgap",val,this.itemtextgap);this.itemtextgap=val;this.on_apply_itemtextgap();}};_pChartBubbleSeriesControl.on_apply_itemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartBubbleSeriesControl.destroy=function(){};_pChartBubbleSeriesControl._applyPropertySeries=function(style,value,select){var item,seriesGroup,itemID,isselectitem=false;seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");for(var i=1;i<=this._itemCnt;i++ ){itemID=this._configIndex+" SeriesBubble"+"Item_"+(i-1);item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){var length=this._selectedItem.length;if(length>0){isselectitem=this._selectedItem[i-1];}if(isselectitem){if(style=="selectlinestyle"){item.set_strokepen(value);}else if(style=="selectfillstyle"){item.set_fillstyle(value);}else if(style=="selectopacity"){item.set_opacity(value);}else if(style=="visible"){item.set_visible(value);}}else{if(style=="linestyle"){item.set_strokepen(value);}else if(style=="fillstyle"){item.set_fillstyle(value);}else if(style=="opacity"){item.set_opacity(value);}else if(style=="visible"){item.set_visible(value);}}}}};_pChartBubbleSeriesControl._draw2=function(redraw){if(!redraw){return;}this._itemtextlist=[];if(this.visible){if(this._isBubbleSeries){this._drawSeriesBubbles();}else{this._drawSeriesScatterPlot();}}};_pChartBubbleSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartBubbleSeriesControl._drawnow=function(){if(this.visible){if(this._isBubbleSeries){this._drawSeriesBubbles();}else{this._drawSeriesScatterPlot();}}};_pChartBubbleSeriesControl._drawSeriesScatterPlot=function(){var linestyle=this.linestyle||"1px solid "+this._color,fillstyle=this.fillstyle||this._color,opacity=this.opacity,index=0,datapoints=this._datapoints,points=datapoints.points,ps=datapoints.pointsize,selectlinestyle=this.selectlinestyle||"1px solid "+this._selectcolor,selectfillstyle=this.selectfillstyle||this._selectcolor,selectopacity=this.selectopacity||this.opacity,selectedItem=this._selectedItem,isselectitem=false,effect=this._chart_aniframe_obj,size;if((this.size==""||this.size==undefined)&&this.size!==0){size=10;}else{size=this.size;}for(var i=0;i<points.length;i+=ps){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){this._drawScatterPlot(points[i],points[i+1],size,this._xaxis,this._yaxis,this.pointshape,this._pointshape,selectlinestyle,selectfillstyle,selectopacity,index);}else{this._drawScatterPlot(points[i],points[i+1],size,this._xaxis,this._yaxis,this.pointshape,this._pointshape,linestyle,fillstyle,opacity,index);}index++ ;}this._itemCnt=index;};_pChartBubbleSeriesControl._drawSeriesBubbles=function(){var valuecolumn,value2column,value3column,linestyle=this.linestyle||"1px solid "+this._color,fillstyle=this.fillstyle||this._color,opacity=this.opacity,radius,index=0,maxsize=0,minsize=0,bubbleData=[],data=this._data,datapoint=[],bubbleMinWidth=0,bubbleMaxWidth=0,selectedItem=this._selectedItem,selectlinestyle=this.selectlinestyle||"1px solid "+this._selectcolor,selectfillstyle=this.selectfillstyle||this._selectcolor,selectopacity=this.selectopacity||this.opacity,isselectitem=false,board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight,effect=this._chart_aniframe_obj;maxsize=this._maxsize;minsize=this._minsize;var i=0;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;}bubbleMinWidth=(Math.min(boardHeight,boardWidth)*minsize);bubbleMaxWidth=(Math.min(boardHeight,boardWidth)*maxsize);for(i=0;i<data.length;i++ ){var valuedata=data[i][2];if(!valuedata){valuedata=0;}bubbleData[i]=valuedata;}this._mindata=nexacro._ChartGraphicsLibArray.min(bubbleData);this._maxdata=nexacro._ChartGraphicsLibArray.max(bubbleData);for(i=0;i<data.length;i++ ){valuecolumn=data[i][0];value2column=data[i][1];value3column=data[i][2];if(valuecolumn==null||value2column==null||value3column==null){continue;}datapoint=data[i];var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}if(effect&&effect.isloadanimation){isselectitem=false;}if(value3column==this._mindata){radius=bubbleMinWidth;}else if(value3column==this._maxdata){radius=bubbleMaxWidth;}else{radius=((value3column-this._mindata)/(this._maxdata-this._mindata)*bubbleMaxWidth)+bubbleMinWidth;}if(!nexacro._ChartGraphicsLib.isEmpty(radius)){if(radius<bubbleMinWidth){radius=bubbleMinWidth;}if(radius>bubbleMaxWidth){radius=bubbleMaxWidth;}}if(isselectitem){this._drawBubble(valuecolumn,value2column,datapoint,radius,selectlinestyle,selectfillstyle,selectopacity,index);}else{this._drawBubble(valuecolumn,value2column,datapoint,radius,linestyle,fillstyle,opacity,index);}index++ ;}this._itemCnt=index;};_pChartBubbleSeriesControl._drawScatterPlot=function(x,y,radius,axisx,axisy,pointshape,_pointshape,linestyle,fillstyle,opacity,index,item){var chart=this._chart,point,cx,cy,points=[],seriesId,seriesGroup=chart._seriesGroup,effect=this._chart_aniframe_obj,banimationclip=false,highlightGroup=chart._highlightGroup;x= +x;y= +y;if(x<axisx._min||x>axisx._max||y<axisy._min||y>axisy._max){return;}cx=axisx.p2c(x);cy=axisy.p2c(y)+axisy._tickendspace;if(isNaN(cx)||isNaN(cy)||cx==0||cy==0){return;}if(item){var highlightitem=item._highlight;if(!highlightitem){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}seriesId=this._configIndex+" SeriesScatterHighlightItem";point.set_id(seriesId);highlightGroup.addChild(point);item._highlight=point;item.index=index;point._item=item;point.index=item.index;point.value=item.value;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesScatterItem_"+index;point=seriesGroup.getObjectByID(seriesId);if(point){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius,point);}else{point.set_cx(cx);point.set_cy(cy);point.set_width(radius);point.set_height(radius);}}else{if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}point.set_id(seriesId);seriesGroup.addChild(point);}if(effect&&effect.isloadanimation){banimationclip=true;this._getanimationdrawclip(cx,cy,point,pointshape);}point.index=index;point.value=y;points[0]=x;points[1]=y;point.radius=radius;point._points=points;}}if(point){point.set_strokepen(linestyle);point.set_fillstyle(fillstyle);point.set_opacity(opacity);}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(!banimationclip&&point){point._clipitems=[];if(pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){point.setClipPath(new nexacro.Rect(0,0,boardWidth,boardHeight));}else{point.setClipPath(new nexacro.Rect( -cx, -cy,boardWidth,boardHeight));}}}if(point){point._series=this;this._seriesitems[point.index]=point;}if(point&&!item){var itemtextvisible=this.itemtextvisible;if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawItemText(cx,cy,point);}}}};_pChartBubbleSeriesControl._drawBubble=function(x,y,data,radius,linestyle,fillstyle,opacity,index,item){var circle=null,cx,cy,points=[],axisx=this._xaxis,axisy=this._yaxis,seriesId,seriesGroup=this._chart._seriesGroup,effect=this._chart_aniframe_obj,highlightGroup=this._chart._highlightGroup;x= +x;y= +y;if(!axisx||!axisy||x<axisx._min||x>axisx._max||y<axisy._min||y>axisy._max){return;}cx=axisx.p2c(x);cy=axisy.p2c(y)+axisy._tickendspace;if(isNaN(cx)||isNaN(cy)){return;}if(item){var highlightitem=item._highlight;if(!highlightitem){circle=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);seriesId=this._configIndex+" SeriesHighlightBubbleItem";circle.set_id(seriesId);item._highlight=circle;circle._item=item;highlightGroup.addChild(circle);}}else{seriesId=this._configIndex+" SeriesBubbleItem_"+index;circle=seriesGroup.getObjectByID(seriesId);if(effect&&effect.isloadanimation){radius=this._getanimationdrawvalue(radius);}if(!circle){circle=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);circle.set_id(seriesId);seriesGroup.addChild(circle);}else{circle.set_cx(cx);circle.set_cy(cy);circle.set_width(radius);circle.set_height(radius);}circle.index=index;circle.value=data[2];circle.radius=radius;points[0]=x;points[1]=y;points[2]= +data[2];circle._points=points;}if(circle){circle.set_strokepen(linestyle);circle.set_fillstyle(fillstyle);circle.set_opacity(opacity);}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(circle){circle._clipitems=[];circle.setClipPath(new nexacro.Rect( -cx, -cy,boardWidth,boardHeight));}}if(circle){circle._series=this;this._seriesitems[index]=circle;}if(!item){var visible=this.visible,itemtextvisible=this.itemtextvisible;if(visible&&itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawItemText(cx,cy,circle);}}}};_pChartBubbleSeriesControl._drawItemText=function(cx,cy,item){var seriesGroup=this._chart._seriesGroup;var itemText=this._createSeriesItemText(item);function positionlefttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}if(!nexacro._isNull(itemText)){var itemtextPosition=this.itemtextposition,itemtextGap=this.itemtextgap;if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;itemText._points=item._points;}};_pChartBubbleSeriesControl._showHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(!highlight){var points=item._points,highlightlinestyle=this.highlightlinestyle||"1px solid "+this._highlightcolor,highlightfillstyle=this.highlightfillstyle||this._highlightcolor,highlightopacity=this.highlightopacity,radius=item.radius,highlightsize=item._series.highlightsize;if(!points){return false;}if((highlightsize==""||highlightsize==undefined)&&highlightsize!==0){highlightsize=10;}if(radius){radius+=highlightsize;}if(this._isBubbleSeries){this._drawBubble(points[0],points[1],points,radius,highlightlinestyle,highlightfillstyle,highlightopacity,0,item);}else{this._drawScatterPlot(points[0],points[1],radius,this._xaxis,this._yaxis,this.pointshape,this._pointshape,highlightlinestyle,highlightfillstyle,highlightopacity,0,item);}this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartBubbleSeriesControl._hideHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(highlight&&!nexacro._ChartGraphicsLib.isEmpty(highlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(highlight);delete item._highlight;this._chart._graphicsControl.draw();}};_pChartBubbleSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;var width,style,color;if(changedColorset){var visible=this.visible,linestyle,fillstyle;if(visible){if(this._linestyle){width=this._linestyle.width;style=this._linestyle.style;color=this._linestyle.color;linestyle=width+" "+style+" "+color;this.set_linestyle(linestyle);}else{linestyle="1px solid "+colorset;this._applyPropertySeries("linestyle",linestyle);this.linestyle=linestyle;}if(this._fillstyle){fillstyle=this._fillstyle;this.set_fillstyle(fillstyle);}else{this.fillstyle=colorset;this._applyPropertySeries("fillstyle",colorset);}}}};}
if(!nexacro.PieChart){nexacro.PieChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._ChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");};var _pPieChart=nexacro._createPrototype(nexacro._ChartBase,nexacro.PieChart);nexacro.PieChart.prototype=_pPieChart;_pPieChart._type_name="PieChart";_pPieChart.categorycolumn="";_pPieChart._boardWidth=0;_pPieChart._boardHeight=0;_pPieChart._centerLeft=0;_pPieChart._centerTop=0;_pPieChart._invalidcategorycolumn=false;_pPieChart.on_destroy_contents=function(){this.categorycolumn=null;this._boardWidth=null;this._boardHeight=null;this._centerLeft=null;this._centerTop=null;nexacro._ChartBase.prototype.on_destroy_contents.call(this);return true;};_pPieChart.set_categorycolumn=function(v){if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}this._draw();};_pPieChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pPieChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pPieChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var visible=s._orgVisible;s._orgVisible=undefined;if(visible){s.set_visible(true);}}};_pPieChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgVisible===undefined||s._orgVisible===null){s._orgVisible=s.visible;}s.set_visible(false);}};_pPieChart._arrange=function(){nexacro._ChartBase.prototype._arrange.call(this);if(this._rearrange){this._arrangeBoard();}var s=this.seriesset[0];if(s){s._rearrangeProcessItemData();}this._arrangeSeries();};_pPieChart._createSeriesset=function(o,id){if(!this._seriesGroup){return false;}var seriesset=this.seriesset,series,seriesLength= -1;if(seriesset){seriesLength=seriesset.length;if(seriesLength>0){return;}}var s=seriesset[0],seriesId;if(s){seriesId=s.id;if(seriesId==id){throw nexacro.MakeNativeError(this,"native_exist_id",seriesId);}}series=this._appendSeries(o);return series;};_pPieChart._createSeries=function(contents,id){var series=new nexacro.ChartPieSeriesControl(id,this,this._graphicsControl);return series;};_pPieChart._setSeries=function(){var series=this.seriesset,length=series.length,items;for(var i=0;i<length;i++ ){var s=series[i];if(s){if(this._changedData){s._setData();if(nexacro._isNull(s._data)){return false;}items=s._setItemData();this._seriesitems=items;this._changedColorset=true;}if(this._changedColorset&&!s._changedFillStyle){items=this._seriesitems;if(items){s._setItemColor(items);}this._changedColorset=false;}else{items=this._seriesitems;if(items){s.on_apply_fillstyle();}}}}};_pPieChart._getHighlightVisible=function(){var series=this.seriesset,length=series.length,highlightvisible=false;for(var i=0;i<length;i++ ){var s=series[i];if(s.highlightvisible){highlightvisible=true;break;}}return highlightvisible;};_pPieChart._showSeriesItem=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=true;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pPieChart._hideSeriesItem=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=false;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pPieChart._GetSeriesItemIndex=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){return i;}}}};_pPieChart._GetSeriesItemFromId=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){return item;}}}};_pPieChart._GetSeriesItemFromIndex=function(index){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i];if(i==index){return item;}}}};_pPieChart._GetSeriesItemIndexFromSlice=function(_slice){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i];var itemslice=item._slice;if(itemslice){if(_slice==itemslice){return i;}else if(itemslice.highlightvisible==true){if(itemslice._highlight){if(itemslice._highlight==_slice){return i;}}}else if(s.valuelineblurangle!=undefined&&s.valuelineblurangle!=null){if(item._sliceborder){if(item._sliceborder==_slice){return i;}}}}}}};_pPieChart._setDataset=function(){nexacro._ChartBase.prototype._setDataset.call(this);};}if(!nexacro.ChartPieSeriesControl){nexacro.ChartPieSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this._clickItemIndex=[];this._clickShow=false;};var _pChartPieSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartPieSeriesControl);nexacro.ChartPieSeriesControl.prototype=_pChartPieSeriesControl;_pChartPieSeriesControl._type_name="ChartPieSeriesControl";_pChartPieSeriesControl.highlightfillstyle="";_pChartPieSeriesControl.highlightlinestyle="";_pChartPieSeriesControl.highlightopacity=1;_pChartPieSeriesControl.highlightfilltype=true;_pChartPieSeriesControl.autogradation="none";_pChartPieSeriesControl.highlightradius=undefined;_pChartPieSeriesControl.highlightvisible=false;_pChartPieSeriesControl.innerradius=undefined;_pChartPieSeriesControl.itemtextguidelineopacity=1;_pChartPieSeriesControl.itemtextguidelinestyle="";_pChartPieSeriesControl.itemtextguidesize=undefined;_pChartPieSeriesControl.fillstyle="";_pChartPieSeriesControl.linestyle="";_pChartPieSeriesControl.opacity=1;_pChartPieSeriesControl.radius=undefined;_pChartPieSeriesControl.selectfillstyle="";_pChartPieSeriesControl.selectindent=undefined;_pChartPieSeriesControl.selectlinestyle="";_pChartPieSeriesControl.selectopacity=1;_pChartPieSeriesControl.startangle=undefined;_pChartPieSeriesControl.endangle=undefined;_pChartPieSeriesControl.valuelineblurangle=undefined;_pChartPieSeriesControl.visible=true;_pChartPieSeriesControl._itemtextguidelocation="out";_pChartPieSeriesControl._itemtextguidesize=null;_pChartPieSeriesControl._borderwidth=null;_pChartPieSeriesControl._startangle=null;_pChartPieSeriesControl._endangle=null;_pChartPieSeriesControl._valuelineblurangle=null;_pChartPieSeriesControl._itemtextguidelinestyle=null;_pChartPieSeriesControl._changedFillStyle=false;_pChartPieSeriesControl._fillstyle=null;_pChartPieSeriesControl._radius=0.8;_pChartPieSeriesControl._innerradius=0;_pChartPieSeriesControl._highlightradius=null;_pChartPieSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_visible=function(visible){if(visible){this._applyPropertySeries("visible",true);this._setItemTextGuideLineVisible(true);if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._applyPropertySeries("visible",false);this._setItemTextGuideLineVisible(false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}this._chart._seriesGroup.set_visible(visible);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartPieSeriesControl.set_radius=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.radius!=val){this._changeContentsProperty("radius",val,this.radius);this.radius=val;this.on_apply_radius(lVal);}this._chart._draw();};_pChartPieSeriesControl.on_apply_radius=function(radius){if(!nexacro._ChartGraphicsLib.isEmpty(radius)){this._radius=radius*0.01;}this._chart._recreate=true;};_pChartPieSeriesControl.set_innerradius=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(val<0||val>100){return;}if(this.innerradius!=val){this._changeContentsProperty("innerradius",val,this.innerradius);this.innerradius=val;this.on_apply_innerradius(lVal);}this._chart._draw();};_pChartPieSeriesControl.on_apply_innerradius=function(innerradius){if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)){this._innerradius=innerradius*0.01;}this._chart._recreate=true;};_pChartPieSeriesControl.set_startangle=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.startangle!=val){this._changeContentsProperty("startangle",val,this.startangle);this.startangle=val;this.on_apply_startangle(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_startangle=function(startangle){if(startangle>360){startangle=0;}var radian;radian=startangle*Math.PI/180;this._startangle=radian;this._chart._changedData=true;};_pChartPieSeriesControl.set_endangle=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.endangle!=val){this._changeContentsProperty("endangle",val,this.endangle);this.endangle=val;this.on_apply_endangle(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_endangle=function(endangle){if(endangle>360){endangle=360;}var radian;radian=endangle*Math.PI/180;this._endangle=radian;this._chart._changedData=true;};_pChartPieSeriesControl.set_valuelineblurangle=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.valuelineblurangle!=val){if(val>this.endangle){val=0;}this._changeContentsProperty("valuelineblurangle",val,this.valuelineblurangle);this.valuelineblurangle=val;this.on_apply_valuelineblurangle(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_valuelineblurangle=function(valuelineblurangle){var radian;radian=valuelineblurangle*Math.PI/180;this._valuelineblurangle=radian;this._chart._changedData=true;};_pChartPieSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;}this._redrawSeries=false;this._applyPropertySeries("linestyle",linestyle);};_pChartPieSeriesControl.set_fillstyle=function(v){this.fillstyle=v;if(v&&(typeof (v)=="string")){var val=v.trim();if(val){var fillarr=this._spliterColor(val,false);this._fillstyle=fillarr;this._changedFillStyle=true;this._chart._changedColorset=false;this.on_apply_fillstyle();}}else{this._changedFillStyle=false;this._chart._changedColorset=true;this._chart.on_apply_colorset(this._chart._colorset);this._fillstyle=null;this.on_apply_fillstyle();}this._chart._draw();};_pChartPieSeriesControl.on_apply_fillstyle=function(){if(!this._fillstyle){this._redrawSeries=false;if(this._chart.legend){this._chart._applyLegendItem();}return false;}var colors=this._fillstyle;var seriesitems=this._chart._seriesitems;var colorcnt=0;var color;if(seriesitems){for(var i=0;i<seriesitems.length;i++ ){var item=seriesitems[i];if(item&&item._isShow){color=colors[colorcnt];if(color){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){color=colors[colorcnt];colorcnt++ ;}seriesitems[i].color=color;var slice=item._slice;if(slice){slice.set_fillstyle(color);}}}}this._redrawSeries=false;if(this._chart.legend){this._chart._applyLegendItem();}};_pChartPieSeriesControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_opacity=function(opacity){this._redrawSeries=false;this._applyPropertySeries("opacity",opacity);};_pChartPieSeriesControl.set_itemtextguidesize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(this.itemtextguidesize!=val){this._changeContentsProperty("itemtextguidesize",val,this.itemtextguidesize);this.itemtextguidesize=val;this.on_apply_itemtextguidesize(lVal);}this._chart._draw();};_pChartPieSeriesControl.on_apply_itemtextguidesize=function(itemtextguidesize){if(itemtextguidesize>0){this._itemtextguidelocation="out";}else{itemtextguidesize=Math.abs(itemtextguidesize);this._itemtextguidelocation="in";}this._itemtextguidesize=itemtextguidesize;this._chart._recreate=true;};_pChartPieSeriesControl.set_itemtextguidelinestyle=function(val){this.itemtextguidelinestyle=val;if(val){if(this._itemtextguidelinestyle==null||this._itemtextguidelinestyle.value!=val){var oldValue;if(this._itemtextguidelinestyle){oldValue=this._itemtextguidelinestyle.value;}this._changeContentsProperty("itemtextguidelinestyle",val,oldValue);var itemtextguidelinestyle=nexacro.BorderLineObject(val);this._itemtextguidelinestyle=itemtextguidelinestyle;this.on_apply_itemtextguidelinestyle(itemtextguidelinestyle);}}else{if(this._itemtextguidelinestyle){this._itemtextguidelinestyle=null;this.on_apply_itemtextguidelinestyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_itemtextguidelinestyle=function(itemtextguidelinestyle){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPieItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_strokepen(itemtextguidelinestyle?itemtextguidelinestyle.value||itemtextguidelinestyle:"1px solid #717a8380");}else{this._chart._recreate=true;}}}};_pChartPieSeriesControl.set_itemtextguidelineopacity=function(val){this.itemtextguidelineopacity=val;if(0===val||val){if(this._itemtextguidelineopacity==null||this._itemtextguidelineopacity.value!=val){var oldValue;if(this._itemtextguidelineopacity){oldValue=this._itemtextguidelineopacity.value;}this._changeContentsProperty("itemtextguidelineopacity",val,oldValue);var itemtextguidelineopacity=nexacro.OpacityObject(val);this._itemtextguidelineopacity=itemtextguidelineopacity;this.on_apply_itemtextguidelineopacity(itemtextguidelineopacity);}}else{if(this._itemtextguidelineopacity){this._itemtextguidelineopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_itemtextguidelineopacity=function(itemtextguidelineopacity){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPieItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_opacity(itemtextguidelineopacity);}else{this._chart._recreate=true;}}}};_pChartPieSeriesControl.set_highlightvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightvisible!=val){this._changeContentsProperty("highlightvisible",val,this.highlightvisible);this.highlightvisible=val;this.on_apply_highlightvisible(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightvisible=function(highlightvisible){this._chart._recreate=true;};_pChartPieSeriesControl.set_highlightradius=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}else{return;}}}if(val<0||val>100){return;}if(this.highlightradius!=val){this._changeContentsProperty("highlightradius",val,this.highlightradius);this.highlightradius=val;this.on_apply_highlightradius(lVal);}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightradius=function(highlightradius){if(!nexacro._ChartGraphicsLib.isEmpty(highlightradius)){this._highlightradius=highlightradius*0.01;}this._chart._recreate=true;};_pChartPieSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartPieSeriesControl.set_highlightfillstyle=function(val){this.highlightfillstyle=val;if(val){if(this._highlightfillstyle==null||this._highlightfillstyle.value!=val){var oldValue;if(this._highlightfillstyle){oldValue=this._highlightfillstyle.value;}this._changeContentsProperty("highlightfillstyle",val,oldValue);var highlightfillstyle=nexacro.BackgroundObject(val,this);this._highlightfillstyle=highlightfillstyle;this.on_apply_highlightfillstyle(highlightfillstyle);}}else{if(this._highlightfillstyle){this._highlightfillstyle=null;this.on_apply_highlightfillstyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightfillstyle=function(highlightfillstyle){};_pChartPieSeriesControl.set_highlightopacity=function(val){this.highlightopacity=val;if(0===val||val){if(this._highlightopacity==null||this._highlightopacity.value!=val){var oldValue;if(this._highlightopacity){oldValue=this._highlightopacity.value;}this._changeContentsProperty("highlightopacity",val,oldValue);var highlightopacity=nexacro.OpacityObject(val);this._highlightopacity=highlightopacity;this.on_apply_highlightopacity(highlightopacity);}}else{if(this._highlightopacity){this._highlightopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightopacity=function(highlightopacity){};_pChartPieSeriesControl.set_highlightfilltype=function(val){if(val===undefined||val===null){val=true;}val=nexacro._toBoolean(val);if(this.highlightfilltype!=val){this._changeContentsProperty("highlightfilltype",val,this.highlightfilltype);this.highlightfilltype=val;this.on_apply_highlightfilltype(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_highlightfilltype=function(highlightfilltype){};_pChartPieSeriesControl.set_autogradation=function(val){if(val===undefined||val===null){val="none";}if(this.autogradation!=val){this._changeContentsProperty("autogradation",val,this.autogradation);this.autogradation=val;this.on_apply_autogradation(val);}this._chart._draw();};_pChartPieSeriesControl.on_apply_autogradation=function(autogradation){this._redrawSeries=false;};_pChartPieSeriesControl.set_selectlinestyle=function(val){this.selectlinestyle=val;if(val){if(this._selectlinestyle==null||this._selectlinestyle.value!=val){var oldValue;if(this._selectlinestyle){oldValue=this._selectlinestyle.value;}this._changeContentsProperty("selectlinestyle",val,oldValue);var selectlinestyle=nexacro.BorderLineObject(val);this._selectlinestyle=selectlinestyle;this.on_apply_selectlinestyle(selectlinestyle);}}else{if(this._selectlinestyle){this._selectlinestyle=null;this.on_apply_selectlinestyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_selectlinestyle=function(selectlinestyle){this._redrawSeries=false;this._applyPropertySeries("selectlinestyle",selectlinestyle,"select");};_pChartPieSeriesControl.set_selectfillstyle=function(val){this.selectfillstyle=val;if(val){if(this._selectfillstyle==null||this._selectfillstyle.value!=val){var oldValue;if(this._selectfillstyle){oldValue=this._selectfillstyle.value;}this._changeContentsProperty("selectfillstyle",val,oldValue);var selectfillstyle=nexacro.BackgroundObject(val,this);this._selectfillstyle=selectfillstyle;this.on_apply_selectfillstyle(selectfillstyle);}}else{if(this._selectfillstyle){this._selectfillstyle=null;this.on_apply_selectfillstyle(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_selectfillstyle=function(selectfillstyle){this._redrawSeries=false;this._applyPropertySeries("selectfillstyle",selectfillstyle,"select");};_pChartPieSeriesControl.set_selectopacity=function(val){this.selectopacity=val;if(0===val||val){if(this._selectopacity==null||this._selectopacity.value!=val){var oldValue;if(this._selectopacity){oldValue=this._selectopacity.value;}this._changeContentsProperty("selectopacity",val,oldValue);var selectopacity=nexacro.OpacityObject(val);this._selectopacity=selectopacity;this.on_apply_selectopacity(selectopacity);}}else{if(this._selectopacity){this._selectopacity=null;this.on_apply_selectopacity(null);}}this._chart._draw();};_pChartPieSeriesControl.on_apply_selectopacity=function(selectopacity){this._redrawSeries=false;this._applyPropertySeries("selectopacity",selectopacity,"select");};_pChartPieSeriesControl.set_selectindent=function(val){if(val!==undefined){if(isNaN(val= +val)){return;}}if(this.selectindent!=val){this._changeContentsProperty("selectindent",val,this.selectindent);this.selectindent=val;this.on_apply_selectindent();}this._chart._draw();};_pChartPieSeriesControl.on_apply_selectindent=function(){this._chart._recreate=true;};_pChartPieSeriesControl._applyPropertySeries=function(style,value,select){var item,seriesGroup,itemID,isselectitem=false;seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){itemID=this._configIndex+" SeriesPie"+"Item_"+i;item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){var length=this._selectedItem.length;if(length>0){isselectitem=this._selectedItem[i-1];}if(isselectitem){if(style=="selectlinestyle"){item.set_strokepen(value);}else if(style=="selectfillstyle"){item.set_fillstyle(value);}else if(style=="selectopacity"){item.set_opacity(value);}}else{if(style=="visible"){item.set_visible(value);}else if(style=="linestyle"){item.set_strokepen(value);}else if(style=="opacity"){item.set_opacity(value);}}}}}};_pChartPieSeriesControl._setItemTextGuideLineVisible=function(visible){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPieItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_visible(visible);}else{this._chart._recreate=true;}}}};_pChartPieSeriesControl._draw2=function(redraw){if(!redraw){return;}this._drawPieSeries();};_pChartPieSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartPieSeriesControl._drawnow=function(){this._itemCnt=0;this._itemtextlist=[];this._drawPieSeries();};_pChartPieSeriesControl._setItemData=function(){var data=this._data,itemdata;if(data){itemdata=this._processItemData(data);}return itemdata;};_pChartPieSeriesControl._setItemColor=function(items){var colorcnt=0;var colorset=this._chart._colorset;var item;for(var i=0;i<items.length;i++ ){item=items[i];if(item._isShow&&item.value){var itemColor=colorset[colorcnt];if(itemColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){itemColor=colorset[colorcnt];colorcnt++ ;}items[i].color=itemColor;var slice=items[i]._slice;if(slice){slice.set_fillstyle(itemColor);}}}};_pChartPieSeriesControl._rearrangeProcessItemData=function(arritems,drawpercentangle){var total=0;var items=arritems||this._seriesitems;var i;var value;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){var percent=0;var angle=0;var endangle=drawpercentangle||this._endangle||Math.PI*2;value=items[i].value;angle=value*endangle/total;percent=(value/(total/100)).toFixed(2);items[i].angle=angle;items[i].percent=nexacro.toNumber(percent);}return items;};_pChartPieSeriesControl._processItemData=function(data){var length=data.length,slice=[],i,value,total=0;for(i=0;i<length;i++ ){var seriesItems={};var showFlag=true;if(data[i]!=null&&data[i][0]!=undefined){if(!this._clickShow&&(this._clickItemIndex.length>0)){for(var j=0;j<this._clickItemIndex.length;j++ ){var index=this._clickItemIndex[j];if(i==index){showFlag=false;}}}if(!showFlag){seriesItems._isShow=false;}else{seriesItems._isShow=true;}seriesItems.index=i;seriesItems.category=data[i][0];seriesItems.value=parseFloat(data[i][1])||0;slice.push(seriesItems);}}this._seriesitems=slice;var items=this._seriesitems;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){var percent=0;var angle=0;var endangle=this._endangle||Math.PI*2;value=items[i].value;angle=value*endangle/total;percent=(value/(total/100)).toFixed(2);items[i].angle=angle;items[i].percent=nexacro.toNumber(percent);}return items;};_pChartPieSeriesControl._drawPieSeries=function(){var items=this._seriesitems,isNullData=false,board=this._chart._boardRect,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight,effect=this._chart_aniframe_obj,itemtextvisible=this.itemtextvisible;if(!items){return false;}if(board){this._chart._boardWidth=board.width-borderWidth;this._chart._boardHeight=board.height-borderHeight;this._chart._centerLeft=this._chart._boardWidth/2;this._chart._centerTop=this._chart._boardHeight/2;}for(var i=0;i<items.length;i++ ){var item=items[i];if(item&&item._isShow){var category=item.category,value=item.value;if(category==null||value===undefined||value===null){isNullData=true;break;}}}if(items.length<=0||isNullData){return;}this._drawPie();if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawLabels();}}};_pChartPieSeriesControl._drawPie=function(){var chart=this._chart,rEndAngle=this._endangle||6.28319,rStartAngle=this._startangle||0,rHighlightStartAngle=this._startangle||0,rHighlightEndAngle=0,maxRadius=Math.min(this._chart._boardWidth,this._chart._boardHeight)/2,radius=0,innerradius=0,total=0,centerX,centerY,linestyle=this.linestyle,opacity=this.opacity,selectlinestyle=this.selectlinestyle||this._chart._selectcolorset[0],selectfillstyle=this.selectfillstyle||this._chart._selectcolorset[0],selectopacity=this.selectopacity||this.opacity,selectedallItem=this._selectedItem,selectedItem=[],isselectitem=false,allitems=this._seriesitems.slice(0),items=[],innerw,innerh,seriesGroup=chart._seriesGroup,slice,itemId,currentAngle=this._startangle||0,endangle=this._endangle||6.28319,drawitemCnt=0,effect=this._chart_aniframe_obj,i=0,selectlength=0,angles,valuedata,pThis=this;if(effect&&effect.isloadanimation){angles=pThis._getanimationdrawvalue(rEndAngle);rStartAngle=angles[0];rEndAngle=angles[1];endangle=angles[1];allitems=pThis._rearrangeProcessItemData(allitems,rEndAngle);}if(nexacro._ChartGraphicsLib.isEmpty(this.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*this._radius;}if(nexacro._ChartGraphicsLib.isEmpty(this.innerradius)){}else{innerradius=maxRadius*this._innerradius;}if(radius<=innerradius){innerradius=0;}for(i in allitems){if(allitems[i]._isShow){total+=allitems[i].value;}}for(i=0;i<allitems.length;i++ ){selectlength=selectedItem.length;if(selectlength>0){isselectitem=selectedItem[i];}if(effect&&effect.isloadanimation){isselectitem=false;}valuedata=allitems[i].value;if(valuedata&&allitems[i]._isShow){selectlength=selectedallItem.length;if(selectlength>0){selectedItem.push(selectedallItem[i]);}items.push(allitems[i]);}this._itemCnt++ ;}function drawSlice(pThis,i){if(items[i]._isShow){var angle=items[i].angle;var curAngle=items[i].angle*180/Math.PI;var valuelineblurangle=pThis._valuelineblurangle||0;if(items.length==1){rStartAngle=0;rHighlightStartAngle=0;rHighlightEndAngle=rEndAngle;}else{items[i].isskip=true;items[i].nextskip=true;var _valuelineblurangle=pThis._valuelineblurangle||0;var valuelineblurhalfangle=_valuelineblurangle/2;var nextAngle=0;var next2Angle=0;var prevAngle=0;if(valuelineblurangle<=curAngle){if(i==0){nextAngle=items[i+1].angle*180/Math.PI;prevAngle=items[items.length-1].angle*180/Math.PI;if(items.length>3){next2Angle=items[i+2].angle*180/Math.PI;}else{next2Angle=items[i+1].angle*180/Math.PI;}if(valuelineblurangle<=nextAngle){if(valuelineblurangle<=prevAngle){items[i].isskip=false;if(valuelineblurangle<=next2Angle){items[i].nextskip=false;}}}}else{if(i==items.length-1){nextAngle=items[0].angle*180/Math.PI;prevAngle=items[items.length-2].angle*180/Math.PI;next2Angle=items[i].angle*180/Math.PI;}else{nextAngle=items[i+1].angle*180/Math.PI;prevAngle=items[i-1].angle*180/Math.PI;next2Angle=i<items.length-2?items[i+2].angle*180/Math.PI:items[items.length%(i+2)].angle*180/Math.PI;}if(valuelineblurangle<=nextAngle){if(valuelineblurangle<=prevAngle){items[i].isskip=false;}if(valuelineblurangle<=next2Angle){items[i].nextskip=false;}}}}if(!items[i].isskip){if(!items[i].nextskip){if(i==0){rStartAngle+=valuelineblurhalfangle;}rEndAngle=rStartAngle+(endangle*(items[i].value/total))-_valuelineblurangle;}else{rEndAngle=rStartAngle+(endangle*(items[i].value/total));}}else{rEndAngle=rStartAngle+(endangle*(items[i].value/total));}items[i].rStartAngle=rStartAngle;items[i].rEndAngle=rEndAngle;rHighlightEndAngle=rHighlightStartAngle+(endangle*(items[i].value/total));}var startAngle=Math.round(rStartAngle*180/Math.PI),endAngle=Math.round(rEndAngle*180/Math.PI),highlightStartAngle=rHighlightStartAngle*180/Math.PI,highlightEndAngle=rHighlightEndAngle*180/Math.PI,w=radius,h=radius,p0,p1,p2,p3,la,pathData,index=0,dx=0,dy=0,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop,selectindent=0,startangle=pThis._startangle||0;if(pThis.selectindent<0||nexacro._ChartGraphicsLib.isEmpty(pThis.selectindent)){}else{selectindent=pThis.selectindent/100;}items[i].startAngle=startAngle;items[i].endAngle=endAngle;items[i].angle=angle;if(drawitemCnt==0){currentAngle=4.71238898038469;}else{currentAngle+=items[drawitemCnt-1].angle;}if(isselectitem){selectindent=radius*selectindent;dx=Math.cos(currentAngle+angle/2+startangle)*selectindent;dy=Math.sin(currentAngle+angle/2+startangle)*selectindent;centerX=centerX+dx;centerY=centerY+dy;items[i].selectindentX=centerX;items[i].selectindentY=centerY;}p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);la=Math.abs(startAngle-endAngle)>180?" 1":" 0";if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)&&innerradius>0){if(items.length==1){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 0 "+p1;}else{pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;}innerw=innerh=innerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);if(items.length==1){pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 1 "+p2+" Z";}else{pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}}else{if(items.length==1){pathData="M"+p0+" A"+w+" "+h+" 1 1 0 "+p1+" L"+centerX+" "+centerY+"Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+" L"+p0+"Z";}}items[i].pathData=pathData;index=i+1;itemId=pThis._configIndex+" SeriesPieItem_"+index;slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice._seriesItem=items[i];slice._series=pThis;slice.setPathData(pathData);items[i]._slice=slice;if(pThis.highlightvisible){var highlightradius=pThis.highlightradius,hRadius=0,maxRadius=Math.min(pThis._chart._boardWidth,pThis._chart._boardHeight)/2,highlightPathData;w=h=0;if((highlightradius==""||highlightradius==undefined)&&highlightradius!==0){if(radius){hRadius=radius+5;}}else{if(innerradius>0&&innerradius>=highlightradius){hRadius=innerradius;}else{hRadius=pThis._highlightradius*maxRadius;}}if(pThis.highlightfilltype){w=h=hRadius;p0=(Math.sin(rHighlightStartAngle)*w+centerX)+" "+( -Math.cos(rHighlightStartAngle)*h+centerY);p1=(Math.sin(rHighlightEndAngle)*w+centerX)+" "+( -Math.cos(rHighlightEndAngle)*h+centerY);la=Math.abs(highlightStartAngle-highlightEndAngle)>180?" 1":" 0";if(innerradius>0){if(items.length==1){highlightPathData="M"+p0+" A"+w+" "+h+" 1"+la+" 0 "+p1;}else{highlightPathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;}innerw=innerh=innerradius;p2=(Math.sin(rHighlightStartAngle)*innerw+centerX)+" "+( -Math.cos(rHighlightStartAngle)*innerh+centerY);p3=(Math.sin(rHighlightEndAngle)*innerw+centerX)+" "+( -Math.cos(rHighlightEndAngle)*innerh+centerY);if(items.length==1){highlightPathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 1 "+p2+" Z";}else{highlightPathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}}else{if(items.length==1){highlightPathData="M"+p0+" A"+w+" "+h+" 1 1 0 "+p1+" L"+centerX+" "+centerY;}else{highlightPathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+" L"+p0+"Z";}}}else{w=h=(radius+2);p0=(Math.sin(rHighlightStartAngle)*w+centerX)+" "+( -Math.cos(rHighlightStartAngle)*h+centerY);p1=(Math.sin(rHighlightEndAngle)*w+centerX)+" "+( -Math.cos(rHighlightEndAngle)*h+centerY);la=Math.abs(highlightStartAngle-highlightEndAngle)>180?" 1":" 0";if(items.length==1){highlightPathData="M"+p0+" A"+w+" "+h+" 1"+la+" 0 "+p1;}else{highlightPathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;}innerw=innerh=hRadius+3;p2=(Math.sin(rHighlightStartAngle)*innerw+centerX)+" "+( -Math.cos(rHighlightStartAngle)*innerh+centerY);p3=(Math.sin(rHighlightEndAngle)*innerw+centerX)+" "+( -Math.cos(rHighlightEndAngle)*innerh+centerY);if(items.length==1){highlightPathData+=" L"+p3+" A"+innerw+" "+innerw+" 1"+la+" 1 "+p2+" Z";}else{highlightPathData+=" L"+p3+" A"+innerw+" "+innerw+" 1"+la+" 0 "+p2+" Z";}}slice.highlightPathData=highlightPathData;slice.highlightvisible=true;}var fillColor=items[i].color;if(isselectitem){if(nexacro._isNull(selectfillstyle)){selectfillstyle=items[i].color;}slice.set_strokepen(selectlinestyle);fillColor=selectfillstyle;slice.set_opacity(selectopacity);}else{if(!valuelineblurangle){slice.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");}slice.set_opacity(opacity);}var bTarget=false;if(nexacro._Browser!="Runtime"&&(pThis.autogradation!="none")){var sv_fillColor=fillColor;if(fillColor instanceof nexacro._BackgroundObject){if(!fillColor.gradient){bTarget=true;sv_fillColor=fillColor.value;}}else if(fillColor){bTarget=(fillColor.indexOf("gradient")<0)?true:false;}if(bTarget){fillColor=sv_fillColor;var gColor="";if(pThis.autogradation=="center"){var lightcolor=pThis._shadeColor(fillColor, -80);gColor="linear-gradient(to left,"+fillColor+" 20%,"+lightcolor+" 50%,"+fillColor+" 80%)";}else{var darkcolor=pThis._shadeColor(fillColor,40);gColor="linear-gradient(to left,"+darkcolor+" 0%,"+fillColor+" 50%,"+darkcolor+" 100%)";}slice.set_fillstyle(gColor);var gColorObj=slice.fillstyle=slice._style.fillstyle;var gradient=gColorObj.gradient;var point=gradient.point;point.centerX=centerX;point.centerY=centerY;point.radius=radius;point.innerRadius=innerradius;gradient.style="radial";slice._highlightcolor=fillColor;}else{slice.set_fillstyle(fillColor);}}else{slice.set_fillstyle(fillColor);}slice.set_strokejoin("round");slice._series=pThis;rStartAngle+=endangle*(items[i].value/total);rHighlightStartAngle+=endangle*(items[i].value/total);}}function drawSliceBorder(pThis,i){if(items[i]._isShow){var angle=items[i].angle;var valuelineblurangle=pThis._valuelineblurangle||0;var rStartAngle;var rEndAngle;var rStartAngle1;var isskip=false;if(items.length==1){rStartAngle=0;rEndAngle=this._endangle||6.28319;if(effect&&effect.isloadanimation){var angles=pThis._getanimationdrawvalue(rEndAngle);rStartAngle=angles[0];rEndAngle=angles[1];}}else{isskip=items[i].isskip;if(!isskip){if((i!=0)&&(i==items.length-1)){rStartAngle1=items[items.length-1].rEndAngle;rStartAngle=items[items.length-1].rEndAngle-0.08;rEndAngle=rStartAngle+valuelineblurangle+0.15;}else{rStartAngle1=items[i].rEndAngle;rStartAngle=items[i].rEndAngle-0.08;rEndAngle=items[i+1].rStartAngle+0.08;}}}var startAngle=Math.round(rStartAngle*180/Math.PI),endAngle=Math.round(rEndAngle*180/Math.PI),w=radius,h=radius,p0,p1,p2,p3,la,pathData,index=0,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop;items[i].startAngle=startAngle;items[i].endAngle=endAngle;items[i].angle=angle;if(drawitemCnt==0){currentAngle=4.71238898038469;}else{currentAngle+=items[drawitemCnt-1].angle;}p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);la=Math.abs(startAngle-endAngle)>180?" 1":" 0";if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)&&innerradius>0){if(items.length==1){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 0 "+p1;}else{pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;}innerw=innerh=innerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);if(items.length==1){pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 1 "+p2+" Z";}else{pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}}else{if(items.length==1){pathData="M"+p0+" A"+w+" "+h+" 1 1 0 "+p1+" L"+centerX+" "+centerY+"Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+" L"+p0+"Z";}}items[i].pathData=pathData;index=i;itemId=pThis._configIndex+" SeriesPieItemBorder_"+index;slice=seriesGroup.getObjectByID(itemId);if(slice){slice.setPathData(pathData);}else{slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);slice.setPathData(pathData);if(!isskip){seriesGroup.addChild(slice);}}slice._seriesItem=items[i];slice._series=pThis;items[i]._sliceborder=slice;var firstcolor;var secondcolor;var endindex=items.length-1;if(i==endindex){firstcolor=items[i].color;secondcolor=items[0].color;}else{firstcolor=items[i].color;secondcolor=items[i+1].color;}var startAngle1=Math.round(rStartAngle1*180/Math.PI);if(startAngle1>=0&&startAngle1<45){angle="to right";}else if(startAngle1>=45&&startAngle1<90){angle="to bottom";}else if(startAngle1>=90&&startAngle1<135){angle="to bottom";}else if(startAngle1>=135&&startAngle1<180){angle="to left";}else if(startAngle1>=180&&startAngle1<225){angle="to left";}else if(startAngle1>=225&&startAngle1<270){angle="to top";}else if(startAngle1>=270&&startAngle1<315){angle="to top";}else if(startAngle1>=315&&startAngle1<360){angle="to right";}var gradation="linear-gradient("+angle+","+firstcolor+","+secondcolor+")";if(slice){slice.set_fillstyle(gradation);slice.set_opacity(opacity);slice.set_strokejoin("round");}}}for(i=0;i<items.length;i++ ){selectlength=selectedItem.length;if(selectlength>0){isselectitem=selectedItem[i];}if(effect&&effect.isloadanimation){isselectitem=false;}drawSlice(this,i);drawitemCnt++ ;}var valuelineblurangle=this.valuelineblurangle;if(valuelineblurangle){drawitemCnt=0;rStartAngle=this._startangle||0;rEndAngle=this._endangle||6.28319;if(effect&&effect.isloadanimation){angles=pThis._getanimationdrawvalue(rEndAngle);rStartAngle=angles[0];rEndAngle=angles[1];}for(i=0;i<items.length;i++ ){valuedata=items[i].value;var isskip=items[i].isskip;if(!isskip){if(valuedata){drawSliceBorder(this,i);}}drawitemCnt++ ;}}};_pChartPieSeriesControl._drawLabels=function(){var startAngle=this._startangle||0,items,selectedItem=this._selectedItem,isselectitem=false,pThis=this;items=this._seriesitems;function getDistance(x1,y1,x2,y2){var nLen=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));return nLen;}function getUnitVector(ptAnchor,ptPos){var pt={x:0,y:0};if(ptAnchor.x-ptPos.x==0&&ptAnchor.y-ptPos.y==0){return pt;}var dx=ptAnchor.x-ptPos.x;var dy=ptAnchor.y-ptPos.y;var len=getDistance(ptAnchor.x,ptAnchor.y,ptPos.x,ptPos.y);pt.x=dx/len;pt.y=dy/len;return pt;}function drawLabel(item,startangle,index,pThis){var halfAngle=0,maxRadius=Math.min(pThis._chart._boardWidth,pThis._chart._boardHeight)/2,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop,itemText,itemtextguidesize=pThis._itemtextguidesize,textX=0,textY=0,itempointsize,pointx,pointy,itemtextguidelinestyle=pThis.itemtextguidelinestyle,itemtextguidelineopacity=pThis.itemtextguidelineopacity,guideline,seriesGroup=pThis._chart._seriesGroup,itemtextguidelocation=pThis._itemtextguidelocation,itemId,radius,targetX=0,targetY=0,borderwidth=pThis._borderwidth;if(nexacro._ChartGraphicsLib.isEmpty(pThis.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*pThis._radius;}if(isselectitem){var selectindentX=item.selectindentX;var selectindentY=item.selectindentY;centerX=selectindentX;centerY=selectindentY;}halfAngle=((startangle+item.angle)+startangle)/2;if(itemtextguidelocation=="in"){if(radius>maxRadius){itempointsize=maxRadius+(borderwidth/2);}else{itempointsize=radius+(borderwidth/2);}itemtextguidesize=itempointsize-itemtextguidesize;if(itemtextguidesize<=0){textX=centerX+Math.round(Math.sin(halfAngle)*(itempointsize));textY=centerY-Math.round(Math.cos(halfAngle)*(itempointsize));}else{textX=centerX+Math.round(Math.sin(halfAngle)*(itemtextguidesize));textY=centerY-Math.round(Math.cos(halfAngle)*(itemtextguidesize));}}else{itemtextguidesize=itemtextguidesize/2;textX=centerX+Math.round(Math.sin(halfAngle)*(itemtextguidesize));textY=centerY-Math.round(Math.cos(halfAngle)*(itemtextguidesize));if(radius>maxRadius){itempointsize=maxRadius+(borderwidth/2);}else{itempointsize=radius+(borderwidth/2);}pointx=centerX+Math.round(Math.sin(halfAngle)*(itempointsize));pointy=centerY-Math.round(Math.cos(halfAngle)*(itempointsize));}itemText=pThis._createSeriesItemText(item);if(!nexacro._isNull(itemText)){var items=pThis._seriesitems;if(itemtextguidelocation=="out"){if(items.length==1){itemText.set_verticalAlign("top");itemText.set_textAlign("right");}else{if(textY>centerY){itemText.set_verticalAlign("top");}else if(textY==centerY){itemText.set_verticalAlign("middle");}else if(textY<centerY){itemText.set_verticalAlign("bottom");}if(textX>centerX){itemText.set_textAlign("left");}else if(textX==centerX){itemText.set_textAlign("center");}else if(textX<centerX){itemText.set_textAlign("right");}}}else{itemText.set_verticalAlign("middle");itemText.set_textAlign("center");}if(itemtextguidelocation=="out"){var centerAngle=halfAngle*180/Math.PI,ptPos={x:pointx,y:pointy},originpoint={x:centerX,y:centerY},vUnit,rotateX=0,rotateY=0,targetX,targetY;vUnit=getUnitVector(ptPos,originpoint);rotateX=ptPos.x+vUnit.x*itemtextguidesize;rotateY=ptPos.y+vUnit.y*itemtextguidesize;if((0<=Number(centerAngle)&&Number(centerAngle)<90)||(360<=Number(centerAngle)&&Number(centerAngle)<450)){targetX=rotateX+itemtextguidesize;}else if((90<=Number(centerAngle)&&Number(centerAngle)<180)||(450<=Number(centerAngle)&&Number(centerAngle)<540)){targetX=rotateX+itemtextguidesize;}else if((180<=Number(centerAngle)&&Number(centerAngle)<270)||(540<=Number(centerAngle)&&Number(centerAngle)<630)){targetX=rotateX-itemtextguidesize;}else{targetX=rotateX-itemtextguidesize;}targetY=rotateY;guideline=new nexacro.ChartGraphicsPath();itemId=pThis._configIndex+" SeriesPieItemLine_"+index;guideline.set_id(itemId);guideline.set_strokepen(itemtextguidelinestyle?itemtextguidelinestyle.value||itemtextguidelinestyle:"1px solid #717a8380");guideline.set_opacity(itemtextguidelineopacity);guideline.moveTo(ptPos.x,ptPos.y);guideline.lineTo(rotateX,rotateY);guideline.lineTo(targetX,targetY);seriesGroup.addChild(guideline);guideline._series=pThis;guideline._seriesItem=item;guideline.index=itemText.index;guideline.value=itemText.value;}if(itemtextguidelocation=="out"){textX=targetX;textY=targetY;}itemText.set_x(textX);itemText.set_y(textY);seriesGroup.addChild(itemText);itemText._series=pThis;itemText._seriesItem=item;pThis._chart._setChangeInBoardAreaPos(itemText);}}for(var i=0;i<this._itemCnt;i++ ){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[i];}var valuedata=items[i].value;if(valuedata&&items[i]._isShow){drawLabel(items[i],startAngle,i,pThis);startAngle+=items[i].angle;}}};_pChartPieSeriesControl._showHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(!highlight){this._drawHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,false);this._chart._graphicsControl.draw();}};_pChartPieSeriesControl._hideHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(highlight&&!nexacro._ChartGraphicsLib.isEmpty(highlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,true);this._chart._highlightGroup.removeChild(highlight);delete item._highlight;this._chart._graphicsControl.draw();}};_pChartPieSeriesControl._drawHighlight=function(item){var highlightlinestyle=this.highlightlinestyle||"1px solid "+this._chart._highlightcolorset[0],highlightfillstyle=this.highlightfillstyle||this._chart._highlightcolorset[0],highlightopacity=this.highlightopacity,slice,highlightPathData,highlightGroup=this._chart._highlightGroup;if(item){highlightPathData=item.highlightPathData;if(highlightPathData){slice=new nexacro.ChartGraphicsPath();slice.setPathData(highlightPathData);slice.set_id("SeriesHighlightPieItem");slice.set_strokepen(highlightlinestyle);if(this.highlightfilltype==true){slice.set_fillstyle(highlightfillstyle);}else{if(item._highlightcolor){slice.set_fillstyle(item._highlightcolor);}else{slice.set_fillstyle(item._style.fillstyle);}}slice.set_strokejoin("round");slice.set_opacity(highlightopacity);highlightGroup.addChild(slice);item._highlight=slice;slice._item=item;slice._series=this;}}};_pChartPieSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};}
if(!nexacro.RadarChart){nexacro.RadarChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._ChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");this._visibleSeriesset=[];this._radarangleinfo=[];this.valueaxes=[];};var _pRadarChart=nexacro._createPrototype(nexacro._ChartBase,nexacro.RadarChart);nexacro.RadarChart.prototype=_pRadarChart;_pRadarChart._type_name="RadarChart";_pRadarChart.categoryaxis=null;_pRadarChart.valueaxes=null;_pRadarChart.radius=undefined;_pRadarChart.radartype="polygon";_pRadarChart._boardWidth=0;_pRadarChart._boardHeight=0;_pRadarChart._centerLeft=0;_pRadarChart._centerTop=0;_pRadarChart._drawing=false;_pRadarChart._isnegativedata=false;_pRadarChart._invalidcategorycolumn=false;_pRadarChart._startangle=null;_pRadarChart._endangle=null;_pRadarChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._ChartBase.prototype.on_create_contents.call(this);}};_pRadarChart.on_destroy_contents=function(){this.categorycolumn=null;this._boardWidth=null;this._boardHeight=null;this._centerLeft=null;this._centerTop=null;this._drawing=null;this._isnegativedata=null;this._invalidcategorycolumn=null;this._visibleSeriesset=null;this._radarangleinfo=null;if(this.valueaxes.length){this.deleteAllValueaxis();}if(this.categoryaxis){this._deleteCategoryaxis();}this.valueaxes=null;this.categoryaxis=null;nexacro._ChartBase.prototype.on_destroy_contents.call(this);return true;};_pRadarChart.set_categoryaxis=function(){};_pRadarChart.set_valueaxes=function(){};_pRadarChart.set_radius=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.radius!=val){this.radius=val;this.on_apply_radius(lVal);}this._draw();};_pRadarChart.on_apply_radius=function(radius){if(!nexacro._ChartGraphicsLib.isEmpty(radius)){this._radius=radius*0.01;}this._changedData=true;};_pRadarChart.set_radartype=function(val){var axislinetype_enum=["polygon","circle"];if(axislinetype_enum.indexOf(val)== -1){return;}if(this.radartype!=val){this.radartype=val;this.on_apply_radartype();this._draw();}};_pRadarChart.on_apply_radartype=function(){this._rearrange=true;};_pRadarChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pRadarChart.getValueaxisByID=function(id){var index=nexacro._ChartGraphicsLibArray.indexOfProp(this.valueaxes,"id",id);if(index> -1){return this.valueaxes[index];}return null;};_pRadarChart._appendValueaxis=function(contents){var axis,id,axisContents={},valueaxesLeng= -1;if(this.valueaxes.length>0){return null;}if(!this._isApplyContents&&nexacro._ChartGraphicsLib.isEmpty(contents)){return valueaxesLeng;}if(typeof (contents)=="object"){axisContents=contents;id=contents.id;}if(!id){valueaxesLeng=this.valueaxes.length+1;id="Valueaxis"+valueaxesLeng;contents.id=id;}if(!this._isApplyContents){this.contents.valueaxes.push(axisContents);}axis=new nexacro.ChartRadarValueAxisControl(id,this,this._graphicsControl);axis._type_name="ChartRadarValueAxisControl";axis._type="valueAxis";this._drawing=true;this._setProperties(axisContents,axis);this._drawing=false;this.valueaxes.push(axis);return axis;};_pRadarChart.deleteValueaxis=function(val){var re=false;if(typeof (val)=="string"){var axis=this.getValueaxisByID(val);if(axis){var index=nexacro._ChartGraphicsLibArray.indexOf(this.valueaxes,axis);if(index> -1){this._deleteAxis(axis,false,index);re=true;}}}if(re){this._changedData=true;}this._draw();return re;};_pRadarChart.deleteAllValueaxis=function(){var length=this.valueaxes.length,valueaxis;for(var i=0;i<length;i++ ){var index=length-i-1;valueaxis=this.valueaxes[index];if(valueaxis){this.deleteValueaxis(valueaxis.id);}}if(length>0){this._rearrange=true;}this._draw();return length;};_pRadarChart.showCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(true);}};_pRadarChart.hideCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(false);}};_pRadarChart.showValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis!=this.valueaxes[0]){return;}if(axis){axis.set_visible(true);}this._draw();};_pRadarChart.hideValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis!=this.valueaxes[0]){return;}if(axis){axis.set_visible(false);}this._draw();};_pRadarChart.set_categorycolumn=function(v){if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}this._draw();};_pRadarChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pRadarChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var visible=s._orgVisible;s._orgVisible=undefined;if(visible){s.set_visible(true);}}};_pRadarChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgVisible===undefined||s._orgVisible===null){s._orgVisible=s.visible;}s.set_visible(false);}};_pRadarChart._createSeriesset=function(o,id){if(!this._seriesGroup){return false;}var series,seriesLength=0;if(this.seriesset){seriesLength=this.seriesset.length;}for(var i=0;i<seriesLength;i++ ){var s=this.seriesset[i];if(s){var seriesId=s.id;if(seriesId==id){throw nexacro.MakeNativeError(this,"native_exist_id",seriesId);}}}series=this._appendSeries(o);return series;};_pRadarChart._measure=function(){nexacro._ChartBase.prototype._measure.call(this);if(this._recreate){this._initAxis();this._setDatapointFormat();this._setDatapoint();this._setDataMinMax();this._resetAxis();}this._setAxis();};_pRadarChart._arrange=function(){nexacro._ChartBase.prototype._arrange.call(this);if(this._rearrange){this._arrangeBoard();}if(this._rearrange){this._arrangeAxisRect();}this._arrangeAxis();this._arrangeSeries();};_pRadarChart._createSeries=function(contents,id){var series=new nexacro.ChartRadarSeriesControl(id,this,this._graphicsControl);return series;};_pRadarChart._setSeries=function(){var colorset=this._colorset;var highlightcolorset=this._highlightcolorset;var selectcolorset=this._selectcolorset;var colorcnt=0;var categoryaxis,valueaxis,angleitems;if(this._changedData){this._radarangleinfo=[];}nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){if(obj){if(this._changedData){obj._setData();if(!nexacro._isNull(obj._data)||(obj._data&&obj._data.length>2)){angleitems=obj._setItemData();if(this._radarangleinfo.length<=0&&angleitems.length>0){this._radarangleinfo=angleitems;}}}if(nexacro._isNull(obj._data)||(obj._data&&obj._data.length<=2)){return false;}if(this._changedColorset||obj._changedSeriesColor){if(nexacro._isString(colorset)){obj._setDefault(colorset);}else{var seriesColor=colorset[colorcnt];var highlightColor=highlightcolorset[colorcnt];var selectColor=selectcolorset[colorcnt];if(seriesColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){seriesColor=colorset[colorcnt];colorcnt++ ;}obj._setDefault(seriesColor,highlightColor,selectColor);}obj._changedSeriesColor=false;}categoryaxis=this.categoryaxis;valueaxis=this.valueaxes[0];if(categoryaxis){categoryaxis._afterSetProperties();categoryaxis.on_apply_visible(categoryaxis.visible);}if(valueaxis){valueaxis._afterSetProperties();valueaxis.on_apply_visible(valueaxis.visible);}if(!categoryaxis&&!valueaxis){return false;}}},this);};_pRadarChart._initAxis=function(){var axis=this.valueaxes[0];if(axis){axis._initData();}};_pRadarChart._resetAxis=function(){var axis=this.valueaxes[0];if(axis){axis._resetData();}};_pRadarChart._getHighlightVisible=function(){var seriesset=this.seriesset;if(seriesset){var length=seriesset.length,highlightvisible=false;for(var i=0;i<length;i++ ){var s=seriesset[i];if(s){if(s.highlightpointvisible||s.highlightlinevisible||s.highlightlineareavisible){highlightvisible=true;break;}}}return highlightvisible;}};_pRadarChart._setDatapointFormat=function(){var series=this.seriesset;var s;for(var i=0;i<series.length;i++ ){s=series[i];if(s){if(nexacro._isNull(s._data)){break;}this._initSeriesDatapoints(s);this._setSeriesDatapointsFormat(s);}}this._getVisibleSeries();};_pRadarChart._getVisibleSeries=function(){var length=this.seriesset.length,pointvisible=false,linevisible=false,visibleSeriesset=[];for(var i=0;i<length;i++ ){var series=this.seriesset[i];if(series){var data=series._data;if(data){if(data.length<=2){continue;}}linevisible=series.linevisible;pointvisible=series.pointvisible;if(linevisible||pointvisible){visibleSeriesset.push(series);}}}this._visibleSeriesset=visibleSeriesset;};_pRadarChart._deleteSeries=function(series_,index){nexacro._ChartBase.prototype._deleteSeries.call(this,series_,index);var serieslength=this.seriesset.length;var valueaxis;if(this.valueaxes){valueaxis=this.valueaxes[0];}if(serieslength==0){if(this.categoryaxis){this.categoryaxis.on_apply_visible(false);this.categoryaxis.on_apply_boardlinevisible(false);}if(valueaxis){valueaxis.on_apply_visible(false);valueaxis.on_apply_boardlinevisible(false);}}};_pRadarChart._setDatapoint=function(){var seriesset=this.seriesset,s,categoryaxis,pointshape;categoryaxis=this.categoryaxis;for(var i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){var data=s._data;if(nexacro._isNull(data)){break;}if(s._datapoints.pointsize!=null){continue;}if(!s._datapoints.format){continue;}pointshape=s.pointshape;this._setSeriesDatapoints(s);categoryaxis.ticks=categoryaxis._categoriesTickGenerator;categoryaxis._setCategoriesData(s._datapoints);if((pointshape=="square")||(pointshape=="diamond")||(pointshape=="triangle")||(pointshape=="cross")){if(s._pointshapeObj[pointshape]){seriesset[i]._pointshape=s._pointshapeObj[pointshape];}}}}};_pRadarChart._initSeriesDatapoints=function(series){series._datapoints={points:[]};};_pRadarChart._setSeriesDatapointsFormat=function(series){var format=series._datapoints.format;if(!format){format=[];format.push({x:true,category:true,required:true});format.push({y:true,category:false,required:true,defaultvalue:null});if(series.linevisible||(series.linevisible&&series.lineareavisible)||series.pointvisible){format.push({angle:true,category:false,required:true});}series._datapoints.format=format;}};_pRadarChart._setSeriesDatapoints=function(series){var datapoints,format,pointsize,points,data,p,val,f;datapoints=series._datapoints;format=datapoints.format;datapoints.pointsize=format.length;pointsize=datapoints.pointsize;points=datapoints.points;data=series._data;var i,j;for(i=j=0;i<data.length;i++ ,j+=pointsize){p=data[i];var nullify=p==null;if(!nullify){for(var k=0;k<pointsize;k++ ){val=p[k];f=format[k];if(f){if(f.category==false&&val!=null){val= +val;if(isNaN(val)){val=null;}else if(val==Infinity){val=Number.MAX_VALUE;}else if(val== -Infinity){val= -Number.MAX_VALUE;}}if(val==null&&p.length>k){if(f.defaultValue!=null){val=f.defaultValue;}else{val=null;}}else if(val===undefined&&(p.length-1)<k){if(f.required&&f.angle){val=this._radarangleinfo[i];}}}points[j+k]=val;}}}};_pRadarChart._setDataMinMax=function(){var series=this.seriesset;for(var i=0;i<series.length;i++ ){var s=series[i],data;if(s){data=s._data;if(nexacro._isNull(data)){s._redrawSeries=false;break;}this._setSeriesDataMinMax(s);}}};_pRadarChart._setSeriesDataMinMax=function(series){var datapoints=series._datapoints,xmin=Number.POSITIVE_INFINITY,ymin=Number.POSITIVE_INFINITY,xmax=Number.NEGATIVE_INFINITY,ymax=Number.NEGATIVE_INFINITY,points,pointsize,val,f,categoryaxis=this.categoryaxis,valueaxis=this.valueaxes[0],format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){continue;}for(var j=0;j<pointsize;j++ ){val=points[i+j];f=format[j];if(!f||val==Number.MAX_VALUE||val== -Number.MAX_VALUE){continue;}if(f.x){if(val<xmin){xmin=val;}if(val>xmax){xmax=val;}}if(f.y){if(val<ymin){ymin=val;}if(val>ymax){ymax=val;}}}}if(categoryaxis._tickmin){xmin=categoryaxis._tickmin;}if(categoryaxis._tickmax){xmax=categoryaxis._tickmax;}if(valueaxis._tickmin){ymin=valueaxis._tickmin;}if(valueaxis._tickmax){ymax=valueaxis._tickmax;}if(categoryaxis&&categoryaxis._updateMinMax){categoryaxis._updateMinMax(xmin,xmax);}if(valueaxis&&valueaxis._updateMinMax){valueaxis._updateMinMax(ymin,ymax);}};_pRadarChart._setAxis=function(){var categoryaxis=this.categoryaxis,valueaxis=this.valueaxes[0],clientWidth=this._getClientWidth(),clientHeight=this._getClientHeight(),changedData=this._changedData,arrange=this._rearrange;if(categoryaxis){if(changedData||arrange){categoryaxis._changedTicks=true;}categoryaxis._setData(clientWidth,clientHeight);}if(valueaxis){if(changedData||arrange){valueaxis._changedTicks=true;}valueaxis._setData(clientWidth,clientHeight);}if(this._reset==true){this._reset=false;}};_pRadarChart._arrangeAxisRect=function(){};_pRadarChart._arrangeAxis=function(){var boardRect=this._boardRect,left=0,top=0,width=0,height=0,rearrange=this._rearrange,categoryaxis=this.categoryaxis,valueaxis=this.valueaxes[0];if(rearrange||(categoryaxis&&categoryaxis._rearrange)||(valueaxis&&valueaxis._rearrange)){if(boardRect){left=this._boardRectLeft;top=this._boardRectTop;width=this._boardWidth;height=this._boardHeight;}if(categoryaxis){if(rearrange||categoryaxis._rearrange){categoryaxis._setTransformationHelpers();}}if(valueaxis){if(rearrange||valueaxis._rearrange){valueaxis._setTransformationHelpers();}}if(categoryaxis){if(rearrange||categoryaxis._rearrange){categoryaxis._arrange(left,top,width,height);}}if(valueaxis){if(rearrange||valueaxis._rearrange){valueaxis._arrange(left,top,width,height);}}}};_pRadarChart._destroySubControl=function(){nexacro._ChartBase.prototype._destroySubControl.call(this);var valueaxes=this.valueaxes;if(valueaxes&&valueaxes.length>0){this.deleteAllValueaxis();}if(this.categoryaxis){this._deleteCategoryaxis();}};_pRadarChart._deleteCategoryaxis=function(){var categoryaxis=this.categoryaxis;if(categoryaxis){this._deleteAxis(categoryaxis,true);this._changedData=true;}};_pRadarChart._deleteAxis=function(axis,isCategory,index){if(isCategory){this.categoryaxis=null;this._deleteContentsProp("categoryaxis");}else{if(this.valueaxes.length>0){this._deleteContentsProp("valueaxes",index);nexacro._ChartGraphicsLibArray.remove(this.valueaxes,axis);}}axis._destroy(false);};_pRadarChart._createCategoryaxis=function(o,id){if(this.categoryaxis){return false;}var axis;if(!id){id="Categoryaxis";}axis=new nexacro.ChartRadarCategoryAxisControl(id,this,this._graphicsControl);axis._type_name="ChartRadarCategoryAxisControl";axis._type="categoryAxis";this.categoryaxis=axis;return axis;};_pRadarChart._createValueaxes=function(o,id){if(this.valueaxes.length>0){return null;}var valueaxis;if(!id){id="Valueaxis"+this.valueaxes.length;}valueaxis=new nexacro.ChartRadarValueAxisControl(id,this,this._graphicsControl);valueaxis._type_name="ChartRadarValueAxisControl";valueaxis._type="valueAxis";this.valueaxes.push(valueaxis);return valueaxis;};_pRadarChart._setDataset=function(){nexacro._ChartBase.prototype._setDataset.call(this);};_pRadarChart._setAxislabelChangeInBoardAreaPos=function(item){if(item&&item._type_name=="GraphicsText"){var labelBoundRect=item.getGlobalBoundRect(),rectx=this._boardRectLeft,recty=this._boardRectTop,rectwidth=this._boardWidth+rectx,rectheight=this._boardHeight+recty,textW=labelBoundRect.width,textH=labelBoundRect.height,pos=item.getCenter();var cx=pos.x;var cy=pos.y;var _txtWidthHalf=(item._txtSize[0]||textW)/2;var _txtHeightHalf=(item._txtSize[1]||textH)/2;if(cx-(_txtWidthHalf)<rectx){item.set_textAlign("center");item.set_x(rectx+_txtWidthHalf+1);}else if(cx+(_txtWidthHalf)>rectwidth){item.set_textAlign("center");item.set_x(rectwidth-_txtWidthHalf-1);}if(cy-(_txtHeightHalf)<recty){item.set_verticalAlign("middle");item.set_y(recty+_txtHeightHalf+1);}else if(cy+(_txtHeightHalf)>rectheight){item.set_verticalAlign("middle");item.set_y(rectheight-_txtHeightHalf-1);}}};}if(!nexacro.ChartRadarCategoryAxisControl){nexacro.ChartRadarCategoryAxisControl=function(id,parent,graphicsControl){nexacro.ChartAxisControl.call(this,id,parent,graphicsControl);this._direction="x";};var _pChartRadarCategoryAxisControl=nexacro._createPrototype(nexacro.ChartAxisControl,nexacro.ChartRadarCategoryAxisControl);nexacro.ChartRadarCategoryAxisControl.prototype=_pChartRadarCategoryAxisControl;_pChartRadarCategoryAxisControl._type_name="ChartRadarCategoryAxisControl";_pChartRadarCategoryAxisControl.boardlinevisible=true;_pChartRadarCategoryAxisControl.set_labelgap=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(this.labelgap!=val){this._changeContentsProperty("labelgap",val,this.labelgap);this.labelgap=val;this._labelgap= +val;this.on_apply_labelgap();}this.parent._draw();};_pChartRadarCategoryAxisControl.destroy=function(){this._destroy(true);};_pChartRadarCategoryAxisControl._destroy=function(parent_clear){if(parent_clear){if(this.parent){this.parent.categoryaxis=null;this.parent._deleteContentsProp("categoryaxis");}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();}var tickline=tick.lineElement;if(tickline){tickline.destroy();}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();}this._ticks[i]=null;}}this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;this._axislineindex=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartRadarCategoryAxisControl._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id(this.id+"_ChartAxisGroup");this._labelGroup=new nexacro.ChartGraphicsGroup();this._labelGroup.set_id("ChartAxisLabelGroup");this._group.addChild(this._labelGroup);this._boardLineGroup=new nexacro.ChartGraphicsGroup();this._boardLineGroup.set_id(this.id+"_ChartAxisBoardLineGroup");this._group.addChild(this._boardLineGroup);this._createAxisLine();if(this.parent._seriesGroup){this._graphicsControl.insertChild(this._group,this.parent._seriesGroup);}else{this._graphicsControl.addChild(this._group);}};_pChartRadarCategoryAxisControl._createAxisLine=function(){if(!this._axisLine){this._axisLine=new nexacro.ChartGraphicsPaths();this._axisLine.set_id("ChartAxisLine");this._group.addChild(this._axisLine);this._axisLine._axis=this;}};_pChartRadarCategoryAxisControl._arrange=function(left,top,width,height){if(this.parent._rearrange||this._rearrange){this._arrangeTickGroup(width,height);this._boardLineGroup.setTransform("translate("+0+","+0+")");this._arrangeLabelGroup();}this._rearrange=false;};_pChartRadarCategoryAxisControl._setData=function(clientWidth,clientHeight){var changedTicks=this._changedTicks,axislinestyle=this._axislinestyle,axislineopacity=this._axislineopacity,boardlinestyle=this._boardlinestyle,boardlineopacity=this._boardlineopacity;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();this._setTicks();this._labelGroup.clear();this._boardLineGroup.clear();if(this._axisLine){this._axisLine.clear();}}var ticks=this._ticks,tick,value,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"10pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth,axisLine;if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedBoardLineStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._min||value>this._max){continue;}if(changedTicks){axisLine=new nexacro.ChartGraphicsPaths();axisLine.set_id("ChartAxisTickBoardLine"+i);this._boardLineGroup.addChild(axisLine);tick.boardlineElement=axisLine;axisLine._axis=this;axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}else{if(this._changedBoardLineStyle){axisLine=tick.boardlineElement;if(axisLine){axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}}}if(changedTicks||this._changedTickLabelRotate){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel"+i);tickLabel.set_text(tick.label);this._labelGroup.addChild(tickLabel);tick.labelElement=tickLabel;tickLabel._axis=this;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");}else{if(this._changedTickLabelStyle){tickLabel=tick.labelElement;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}}}}}if(changedTicks||this._changedTickStyle){this._axisLine.set_strokepen(axislinestyle?axislinestyle.value||axislinestyle:"1px solid #d0d0d0");this._axisLine.set_opacity(axislineopacity?axislineopacity._sysvalue:1);}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);this._labelHeight=info.height;this._labelWidth=info.width;};_pChartRadarCategoryAxisControl._getTickLabelAlign=function(labelrotate,labelangle){return;};_pChartRadarCategoryAxisControl._arrangeTickGroup=function(width,height){var chart=this.parent,ticks=this._ticks,value,tickmin=this._min,tickmax=this._max,axisLine,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=this,axislinetype=chart.radartype||"polygon",categoryaxislinewidth=1,valueaxis=chart.valueaxes[0];var max=Math.max(valueaxis._max,0);var startX=centerX;var startY=centerY;var endX;var endY;var range;var bstartline=false;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;var polygonstartx=categoryaxislinewidth/8;for(var i=0;i<ticks.length;i++ ){axisLine=ticks[i].boardlineElement;value=ticks[i].v;if(isNaN(value)||value<tickmin||value>tickmax){continue;}endX=this.p2c(value,max);endY=valueaxis.p2c(max,value);if(axisLine){axisLine.moveTo(startX,startY);axisLine.lineTo(endX,endY);ticks[i]._point={"x":endX,"y":endY};}}var categorylength=0;if(chart._radarangleinfo){categorylength=chart._radarangleinfo.length;}if(this._axisLine&&ticks.length>0){for(var j=0;j<categorylength;j++ ){if(j==0){startX=categoryaxis.p2c(j,max);startY=valueaxis.p2c(max,j);if(axislinetype=="polygon"){this._axisLine.moveTo(startX-polygonstartx,startY);}else{this._axisLine.moveTo(startX,startY);}bstartline=true;}else{endX=categoryaxis.p2c(j,max);endY=valueaxis.p2c(max,j);if(bstartline){if(axislinetype=="polygon"){this._axisLine.lineTo(endX,endY);}else{range=valueaxis.p2range(max,j);this._axisLine.arcTo(new nexacro.Point(endX,endY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}}}if(bstartline){if(axislinetype=="polygon"){this._axisLine.lineTo(startX+polygonstartx,startY);}else{this._axisLine.arcTo(new nexacro.Point(startX,startY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}}};_pChartRadarCategoryAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,chart=this.parent,tick,labelEle,textW=0,textH=0,x=0,y=0,value,labelgap= +this._labelgap,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=this,valueaxis=chart.valueaxes[0],startangle,ptPos,originpoint,vPoint={x:0,y:0},vUnit,rotateX=0,rotateY=0,targetX=0,targetY=0,categoryaxislinewidth=1,valueaxisboardlinewidth=1,axislinetype=chart.radartype||"polygon",labelBoundRect;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;valueaxisboardlinewidth=(valueaxis&&valueaxis._boardlinestyle)?valueaxis._boardlinestyle._getBorderLeftWidth():1;var linewidth=Math.max(categoryaxislinewidth,valueaxisboardlinewidth);function getDistance(x1,y1,x2,y2){var nLen=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));return nLen;}function getUnitVector(ptAnchor,ptPos){var pt={x:0,y:0};if(ptAnchor.x-ptPos.x==0&&ptAnchor.y-ptPos.y==0){return pt;}var dx=ptAnchor.x-ptPos.x;var dy=ptAnchor.y-ptPos.y;var len=getDistance(ptAnchor.x,ptAnchor.y,ptPos.x,ptPos.y);pt.x=dx/len;pt.y=dy/len;return pt;}if(labelgap&&(axislinetype=="circle")){if(labelgap>0){labelgap++ ;}}labelgap+=(linewidth/2);for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max){continue;}var angledata=chart._radarangleinfo[value];if(angledata){x=Math.floor(tick._point.x*1000)/1000;y=Math.floor(tick._point.y*1000)/1000;labelBoundRect=labelEle.getGlobalBoundRect();textW=labelBoundRect.width;textH=labelBoundRect.height;var textAlign="center";var verticalAlign="middle";if(y>centerY){verticalAlign="top";}else if(y<centerY){verticalAlign="bottom";}if(x>centerX){textAlign="left";}else if(x<centerX){textAlign="right";}if(labelEle._lines&&labelEle._lines.length>1){verticalAlign="middle";}labelEle.set_verticalAlign(verticalAlign);labelEle.set_textAlign(textAlign);startangle=angledata.startangle*180/Math.PI;ptPos={x:x,y:y};originpoint={x:centerX,y:centerY};vPoint={x:0,y:0};vUnit=getUnitVector(ptPos,originpoint);labelEle.set_x(x);labelEle.set_y(y);if(labelgap!=0){rotateX=ptPos.x+vUnit.x*labelgap;rotateY=ptPos.y+vUnit.y*labelgap;if((0<=Number(startangle)&&Number(startangle)<90)||(360<=Number(startangle)&&Number(startangle)<450)){targetX=rotateX+labelgap;}else if((90<=Number(startangle)&&Number(startangle)<180)||(450<=Number(startangle)&&Number(startangle)<540)){targetX=rotateX+labelgap;}else if((180<=Number(startangle)&&Number(startangle)<270)||(540<=Number(startangle)&&Number(startangle)<630)){targetX=rotateX-labelgap;}else{targetX=rotateX-labelgap;}targetY=rotateY;labelEle.set_x(targetX);labelEle.set_y(targetY);}chart._setAxislabelChangeInBoardAreaPos(labelEle);}}function positionlefttop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="right";var labelBoundRect=itemText.getGlobalBoundRect(),textW=labelBoundRect.width,textH=labelBoundRect.height;itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncentertop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="center";itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrighttop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionleftmiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="right";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncentermiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="center";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrightmiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionleftbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="right";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncenterbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="center";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrightbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}};_pChartRadarCategoryAxisControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.categoryaxis){contents.categoryaxis[nm]=newVal;}};_pChartRadarCategoryAxisControl._setTransformationHelpers=function(){var chart=this.parent,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,radius=0,w=0,centerX=chart._centerLeft,s,m,range,tickmin=chart.valueaxes[0]._min,tickmax=chart.valueaxes[0]._max;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}w=radius;s=this._scale=w/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);this.p2c=function(p,y){var angledata=chart._radarangleinfo[p];if(angledata){range=(y-m)*s;return (Math.sin(angledata.startangle)*range+centerX);}else{return centerX;}};this.p2range=function(p,y){var angledata=chart._radarangleinfo[p];if(angledata){range=(y-m)*s;return range;}else{return radius;}};};_pChartRadarCategoryAxisControl._setupTickGeneration=function(width,height){};_pChartRadarCategoryAxisControl._afterSetProperties=function(){this.on_apply_boardlinevisible(this.boardlinevisible);this.on_apply_axislinestyle(this._axislinestyle);this.on_apply_labeltextfont(this._labeltextfont);this.on_apply_labeltextcolor(this._labeltextcolor);};}if(!nexacro.ChartRadarValueAxisControl){nexacro.ChartRadarValueAxisControl=function(id,parent,graphicsControl){nexacro.ChartAxisControl.call(this,id,parent,graphicsControl);this._direction="y";};var _pChartRadarValueAxisControl=nexacro._createPrototype(nexacro.ChartAxisControl,nexacro.ChartRadarValueAxisControl);nexacro.ChartRadarValueAxisControl.prototype=_pChartRadarValueAxisControl;_pChartRadarValueAxisControl._type_name="ChartRadarValueAxisControl";_pChartRadarValueAxisControl.axislineindex="0";_pChartRadarValueAxisControl._axislineindex=0;_pChartRadarValueAxisControl.labelgapangle="0";_pChartRadarValueAxisControl.boardlinevisible=true;_pChartRadarValueAxisControl.set_axislineindex=function(v){if(isNaN(v= +v)||v< -1){return;}if(this.axislineindex!=v){this._changeContentsProperty("axislineindex",v,this.axislineindex);this.axislineindex=v;this._axislineindex= +v;this.on_apply_axislineindex(v);this.parent._draw();}};_pChartRadarValueAxisControl.on_apply_axislineindex=function(axislineindex){if(axislineindex>=0){this._changedTicks=true;this._rearrange=true;}};_pChartRadarValueAxisControl.destroy=function(){this._destroy(true);};_pChartRadarValueAxisControl._destroy=function(parent_clear){if(parent_clear){var axisId=this.id;if(this.parent){var index= -1;nexacro._ChartGraphicsLibArray.forEach(this.parent.valueaxes,function(axis,i){if(axis instanceof nexacro.ChartAxisControl&&axis.id==axisId){axis.parent._deleteContentsProp("valueaxes",i);index=i;}});nexacro._ChartGraphicsLibArray.removeAt(this.parent.valueaxes,index);}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();}var tickline=tick.lineElement;if(tickline){tickline.destroy();}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();}this._ticks[i]=null;}}this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartRadarValueAxisControl._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id(this.id+"_ChartAxisGroup");this._boardLineGroup=new nexacro.ChartGraphicsGroup();this._boardLineGroup.set_id(this.id+"_ChartAxisBoardLineGroup");this._group.addChild(this._boardLineGroup);this._labelGroup=new nexacro.ChartGraphicsGroup();this._labelGroup.set_id("ChartAxisLabelGroup");this._group.addChild(this._labelGroup);this._createAxisLine();if(this.parent._seriesGroup){this._graphicsControl.insertChild(this._group,this.parent._seriesGroup);}else{this._graphicsControl.addChild(this._group);}};_pChartRadarValueAxisControl._createAxisLine=function(){if(!this._axisLine){this._axisLine=new nexacro.ChartGraphicsPaths();this._axisLine.set_id("ChartAxisLine");this._group.addChild(this._axisLine);this._axisLine._axis=this;}};_pChartRadarValueAxisControl._arrange=function(left,top,width,height){if(this.parent._rearrange||this._rearrange){this._arrangeTickGroup(width,height);this._boardLineGroup.setTransform("translate("+0+","+0+")");this._arrangeLabelGroup();}this._rearrange=false;};_pChartRadarValueAxisControl._setData=function(clientWidth,clientHeight){var changedTicks=this._changedTicks,axislinestyle=this._axislinestyle,axislineopacity=this._axislineopacity,boardlinestyle=this._boardlinestyle,boardlineopacity=this._boardlineopacity;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();this._setTicks();this._labelGroup.clear();this._boardLineGroup.clear();if(this._axisLine){this._axisLine.clear();}}var ticks=this._ticks,tick,value,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"10pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth,axisLine;if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedBoardLineStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._min||value>this._max){continue;}if(changedTicks){axisLine=new nexacro.ChartGraphicsPaths();axisLine.set_id("ChartAxisTickBoardLine"+i);this._boardLineGroup.addChild(axisLine);tick.boardlineElement=axisLine;axisLine._axis=this;axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}else{if(this._changedBoardLineStyle){axisLine=tick.boardlineElement;if(axisLine){axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}}}if(changedTicks||this._changedTickLabelRotate){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel"+i);tickLabel.set_text(tick.label);this._labelGroup.addChild(tickLabel);tick.labelElement=tickLabel;tickLabel._axis=this;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");}else{if(this._changedTickLabelStyle){tickLabel=tick.labelElement;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}}}}}if(changedTicks||this._changedTickStyle){this._axisLine.set_strokepen(axislinestyle?axislinestyle.value||axislinestyle:"1px solid #d0d0d0");this._axisLine.set_opacity(axislineopacity?axislineopacity._sysvalue:1);}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);this._labelHeight=info.height;this._labelWidth=info.width;};_pChartRadarValueAxisControl._getTickLabelAlign=function(labelrotate,index){return;};_pChartRadarValueAxisControl._arrangeTickGroup=function(){var chart=this.parent,ticks=this._ticks,value,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,tickmin=this._min,tickmax=this._max,axisLine,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=chart.categoryaxis,range,axislinetype=chart.radartype||"polygon",tickposition=this._axislineindex||0,categoryaxislinewidth=1,valueaxislinewidth=1,valueaxisboardlinewidth=1,angledata,valueaxis=this;var startX=centerX;var startY=centerY;var endX;var endY;var bstartline=false;var categorylength=0;valueaxisboardlinewidth=(valueaxis&&valueaxis._boardlinestyle)?valueaxis._boardlinestyle._getBorderLeftWidth():1;var polygonstartx=valueaxisboardlinewidth/8;if(chart._radarangleinfo){categorylength=chart._radarangleinfo.length;}var tickspointarr=[];for(var i=0;i<ticks.length;i++ ){axisLine=ticks[i].boardlineElement;value=ticks[i].v;tickspointarr=[];if(isNaN(value)||value<tickmin||value>tickmax){continue;}for(var j=0;j<categorylength;j++ ){var _point;range=valueaxis.p2range(value,j);if(j==0){startX=categoryaxis.p2c(j,value);startY=valueaxis.p2c(value,j);if(axislinetype=="polygon"){axisLine.moveTo(startX-polygonstartx,startY);}else{axisLine.moveTo(startX,startY);}angledata=chart._radarangleinfo[j];_point={"x":startX,"y":startY,"startangle":angledata.startangle,"range":range};bstartline=true;}else{endX=categoryaxis.p2c(j,value);endY=valueaxis.p2c(value,j);if(bstartline){if(axislinetype=="polygon"){axisLine.lineTo(endX,endY);}else{axisLine.arcTo(new nexacro.Point(endX,endY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}angledata=chart._radarangleinfo[j];_point={"x":endX,"y":endY,"startangle":angledata.startangle,"range":range};}tickspointarr.push(_point);}if(bstartline){if(axislinetype=="polygon"){axisLine.lineTo(startX+polygonstartx,startY);}else{axisLine.arcTo(new nexacro.Point(startX,startY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}ticks[i]._point=tickspointarr;}if(this._axisLine&&ticks.length>0&&categorylength>0){startX=centerX;startY=centerY;if(tickposition>categorylength-1){tickposition=0;}ticks=categoryaxis._ticks;var indextick=tickposition;value=ticks[indextick].v;endX=categoryaxis.p2c(value,this._max);endY=this.p2c(this._max,value);this._axisLine.moveTo(startX,startY);this._axisLine.lineTo(endX,endY);}};_pChartRadarValueAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,chart=this.parent,tick,labelEle,value,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,labelgap= +this._labelgap,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=chart.categoryaxis,startangle,range,originpoint,targetX=0,targetY=0,tickposition=this._axislineindex||0,valueaxislinewidth=1;valueaxislinewidth=this._axislinestyle?this._axislinestyle._getBorderLeftWidth():1;function getDistance(x1,y1,x2,y2){var nLen=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));return nLen;}function getUnitVector(ptAnchor,ptPos){var pt={x:0,y:0};if(ptAnchor.x-ptPos.x==0&&ptAnchor.y-ptPos.y==0){return pt;}var dx=ptAnchor.x-ptPos.x;var dy=ptAnchor.y-ptPos.y;var len=getDistance(ptAnchor.x,ptAnchor.y,ptPos.x,ptPos.y);pt.x=dx/len;pt.y=dy/len;return pt;}for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max||tick._point.length<=0){continue;}if(tick._point&&tick._point.length-1<tickposition){tickposition=0;}targetX=tick._point[tickposition].x;targetY=tick._point[tickposition].y;startangle=tick._point[tickposition].startangle*180/Math.PI;range=tick._point[tickposition].range;var textAlign="center";var verticalAlign="middle";labelEle.set_verticalAlign(verticalAlign);labelEle.set_textAlign(textAlign);if(labelgap!=0){startangle=startangle+labelgap;var radian=startangle*Math.PI/180;targetX=(Math.sin(radian)*(range)+centerX);targetY=( -Math.cos(radian)*(range)+centerY);}targetY=targetY-(valueaxislinewidth/2);labelEle.set_x(targetX);labelEle.set_y(targetY);chart._setAxislabelChangeInBoardAreaPos(labelEle);}};_pChartRadarValueAxisControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.categoryaxis){contents.categoryaxis[nm]=newVal;}};_pChartRadarValueAxisControl._afterSetProperties=function(){this.on_apply_boardlinevisible(this.boardlinevisible);this.on_apply_axislinestyle(this._axislinestyle);this.on_apply_labeltextfont(this._labeltextfont);this.on_apply_labeltextcolor(this._labeltextcolor);};_pChartRadarValueAxisControl._setTransformationHelpers=function(){var chart=this.parent,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,radius=0,h=0,centerY=chart._centerTop,s,m,tickmin=this._min,range,tickmax=this._max;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}h=radius;s=this._scale=h/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);this.p2c=function(p,x){var angledata=chart._radarangleinfo[x];if(angledata){range=(p-m)*s;return ( -Math.cos(angledata.startangle)*range+centerY);}else{return centerY;}};this.p2range=function(p,x){var angledata=chart._radarangleinfo[x];if(angledata){range=(p-m)*s;return range;}else{return radius;}};};_pChartRadarValueAxisControl._checkinterval=function(width,height){var chart=this.parent,ticks,maxRadius=Math.min(width,height)/2,radius=0,range=0;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}range=radius;if(typeof this.ticks=="number"&&this.ticks>0){ticks=this.ticks;}else{ticks=(0.3*Math.sqrt(range));}var delta=(this._max-this._min)/ticks,dec= -Math.floor(Math.log(delta)/Math.LN10),maxDec,magn=Math.pow(10, -dec),norm=delta/magn,tickinterval;if(norm<1.5){tickinterval=1;}else if(norm<3){tickinterval=2;if(norm>2.25){tickinterval=2.5; ++dec;}}else if(norm<7.5){tickinterval=5;}else{tickinterval=10;}tickinterval*=magn;return tickinterval;};_pChartRadarValueAxisControl._setupTickGeneration=function(width,height){var chart=this.parent,ticks,maxRadius=Math.min(width,height)/2,radius=0,range=0;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}range=radius;if(typeof this.ticks=="number"&&this.ticks>0){ticks=this.ticks;}else{ticks=(0.3*Math.sqrt(range));}var delta=(this._max-this._min)/ticks,dec= -Math.floor(Math.log(delta)/Math.LN10),maxDec,magn=Math.pow(10, -dec),norm=delta/magn,tickinterval;if(norm<1.5){tickinterval=1;}else if(norm<3){tickinterval=2;if(norm>2.25){tickinterval=2.5; ++dec;}}else if(norm<7.5){tickinterval=5;}else{tickinterval=10;}tickinterval*=magn;this._delta=delta;var tickintervalchk=this.tickinterval;if(!tickintervalchk&&!this._tickmax&&range>0){ticks=[];var start=this._floorInBase(this._min,tickinterval),i=0,v=Number.NaN,prev;var min= -1,max= -1;min=this._min;max=this._max;do{prev=v;v=start+i*tickinterval;ticks.push(v); ++i;}while(v<max&&v!=prev)if(ticks.length>0){var old=this._max;this._tickmax=this._max=Math.max(this._max,ticks[ticks.length-1]);if(ticks[ticks.length-1]>old){tickinterval=this._checkinterval(width,height);}}}this._tickinterval=tickintervalchk||tickinterval;if(!this._tickGenerator){this._tickGenerator=function(axis,istotal){var ticks=[],start=axis._floorInBase(axis._min,axis._tickinterval),i=0,v=Number.NaN,prev;var min= -1,max= -1;if(istotal){min=axis._tickmin||axis._datamin;max=axis._tickmax||axis._datamax;}else{min=axis._min;max=axis._max;}if(min== -1){return false;}do{prev=v;v=start+i*axis._tickinterval;ticks.push(v); ++i;}while(v<max&&v!=prev)return ticks;};}};}if(!nexacro.ChartRadarSeriesControl){nexacro.ChartRadarSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this._clickItemIndex=[];this._clickShow=false;};var _pChartRadarSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartRadarSeriesControl);nexacro.ChartRadarSeriesControl.prototype=_pChartRadarSeriesControl;_pChartRadarSeriesControl._type_name="ChartRadarSeriesControl";_pChartRadarSeriesControl.visible=true;_pChartRadarSeriesControl.lineopacity=1;_pChartRadarSeriesControl.linestyle="";_pChartRadarSeriesControl.linevisible=true;_pChartRadarSeriesControl.highlightlinestyle="";_pChartRadarSeriesControl.highlightlineopacity=1;_pChartRadarSeriesControl.highlightlinevisible=false;_pChartRadarSeriesControl.highlightlineopacity=1;_pChartRadarSeriesControl.highlightlinestyle="";_pChartRadarSeriesControl.selectlineopacity=1;_pChartRadarSeriesControl.selectlinestyle="";_pChartRadarSeriesControl.pointfillstyle="";_pChartRadarSeriesControl.pointlinestyle="";_pChartRadarSeriesControl.pointopacity=1;_pChartRadarSeriesControl.pointshape="circle";_pChartRadarSeriesControl.pointsize=undefined;_pChartRadarSeriesControl.pointvisible=false;_pChartRadarSeriesControl.highlightpointfillstyle="";_pChartRadarSeriesControl.highlightpointlinestyle="";_pChartRadarSeriesControl.highlightpointopacity=1;_pChartRadarSeriesControl.highlightpointsize=undefined;_pChartRadarSeriesControl.highlightpointvisible=false;_pChartRadarSeriesControl.selectpointfillstyle="";_pChartRadarSeriesControl.selectpointlinestyle="";_pChartRadarSeriesControl.selectpointopacity=1;_pChartRadarSeriesControl.lineareafillstyle="";_pChartRadarSeriesControl.lineareaopacity=0.5;_pChartRadarSeriesControl.lineareavisible=false;_pChartRadarSeriesControl.highlightlineareafillstyle="";_pChartRadarSeriesControl.highlightlineareavisible=false;_pChartRadarSeriesControl.highlightlineareaopacity=1;_pChartRadarSeriesControl.selectlineareafillstyle="";_pChartRadarSeriesControl.selectlineareaopacity=1;_pChartRadarSeriesControl.pointitemtextposition="";_pChartRadarSeriesControl.lineitemtextposition="";_pChartRadarSeriesControl._pointshape=null;_pChartRadarSeriesControl._pointborderwidth=null;_pChartRadarSeriesControl._lineborderwidth=null;_pChartRadarSeriesControl._linebordercolor=null;_pChartRadarSeriesControl._color=null;_pChartRadarSeriesControl._changedSeriesColor=true;_pChartRadarSeriesControl.destroy=function(){if(!this._chart){return;}if(this._seriesitems.length>0){for(var i=0;i<this._seriesitems.length;i++ ){if(this._seriesitems[i]){if(this._seriesitems[i]._series){delete this._seriesitems[i]._series;this._seriesitems[i]._series=null;}this._seriesitems[i].destroy();delete this._seriesitems[i];this._seriesitems[i]=null;}}}this.visible=true;this.lineopacity=null;this.linestyle=null;this.linevisible=null;this.highlightlinestyle=null;this.highlightlineopacity=null;this.highlightlinevisible=null;this.highlightlineopacity=null;this.highlightlinestyle=null;this.selectlineopacity=null;this.selectlinestyle=null;this.pointfillstyle=null;this.pointlinestyle=null;this.pointopacity=null;this.pointshape=null;this.pointsize=null;this.pointvisible=null;this.highlightpointfillstyle=null;this.highlightpointlinestyle=null;this.highlightpointopacity=null;this.highlightpointsize=null;this.highlightpointvisible=null;this.selectpointfillstyle=null;this.selectpointlinestyle=null;this.selectpointopacity=null;this.lineareafillstyle=null;this.lineareaopacity=null;this.lineareavisible=null;this.highlightlineareafillstyle=null;this.highlightlineareavisible=null;this.highlightlineareaopacity=null;this.selectlineareafillstyle=null;this.selectlineareaopacity=null;this.pointitemtextposition=null;this.lineitemtextposition=null;this._pointshape=null;this._pointborderwidth=null;this._lineborderwidth=null;this._linebordercolor=null;this._color=null;this._changedSeriesColor=null;return true;};_pChartRadarSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartRadarSeriesControl.on_apply_visible=function(visible){if(this._is_initprop){return;}if(visible){var selecttype=this.selecttype;if(selecttype){this._chart._changedData=true;}else{this._redrawSeries=false;this._applyPropertySeries("visible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._redrawSeries=false;this._applyPropertySeries("visible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}if(this._chart.legend){this._chart._applyLegendItem();}};_pChartRadarSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;this._linebordercolor=linestyle.color.value;}this._redrawSeries=false;this._applyPropertySeries("Line","linestyle",linestyle);};_pChartRadarSeriesControl.set_lineopacity=function(val){this.lineopacity=val;if(0===val||val){if(this._lineopacity==null||this._lineopacity.value!=val){var oldValue;if(this._lineopacity){oldValue=this._lineopacity.value;}this._changeContentsProperty("lineopacity",val,oldValue);var lineopacity=nexacro.OpacityObject(val);this._lineopacity=lineopacity;this.on_apply_lineopacity(lineopacity);}}else{if(this._lineopacity){this._lineopacity=null;this.on_apply_lineopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_lineopacity=function(lineopacity){this._redrawSeries=false;this._applyPropertySeries("Line","lineopacity",lineopacity);};_pChartRadarSeriesControl.set_linevisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.linevisible!=val){this._changeContentsProperty("linevisible",val,this.linevisible);this.linevisible=val;this.on_apply_linevisible(val);}this._chart._draw();};_pChartRadarSeriesControl.on_apply_linevisible=function(linevisible){var pointvisible=this.pointvisible;if(linevisible){this._chart._changedData=true;this._applyPropertySeries("Line","linevisible",true);if(!pointvisible&&this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._chart._changedData=true;this._applyPropertySeries("Line","linevisible",false);if(this.lineareavisible){this._applyPropertySeries("Area","lineareavisible",false);}if(!pointvisible&&!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}};_pChartRadarSeriesControl.set_highlightlinevisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightlinevisible!=val){this._changeContentsProperty("highlightlinevisible",val,this.highlightlinevisible);this.highlightlinevisible=val;this.on_apply_highlightlinevisible(val);}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlinevisible=function(highlightlinevisible){};_pChartRadarSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartRadarSeriesControl.set_highlightlineopacity=function(val){this.highlightlineopacity=val;if(0===val||val){if(this._highlightlineopacity==null||this._highlightlineopacity.value!=val){var oldValue;if(this._highlightlineopacity){oldValue=this._highlightlineopacity.value;}this._changeContentsProperty("highlightlineopacity",val,oldValue);var highlightlineopacity=nexacro.OpacityObject(val);this._highlightpointopacity=highlightlineopacity;this.on_apply_highlightlineopacity(highlightlineopacity);}}else{if(this._highlightpointopacity){this._highlightpointopacity=null;this.on_apply_highlightlineopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlineopacity=function(highlightlineopacity){};_pChartRadarSeriesControl.set_selectlineopacity=function(val){this.selectlineopacity=val;if(0===val||val){if(this._selectlineopacity==null||this._selectlineopacity.value!=val){var oldValue;if(this._selectlineopacity){oldValue=this._selectlineopacity.value;}this._changeContentsProperty("selectlineopacity",val,oldValue);var selectlineopacity=nexacro.OpacityObject(val);this._selectlineopacity=selectlineopacity;this.on_apply_selectlineopacity(selectlineopacity);}}else{if(this._selectlineopacity){this._selectlineopacity=null;this.on_apply_selectlineopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectlineopacity=function(selectlineopacity){this._redrawSeries=false;this._applyPropertySeries("Line","selectlineopacity",selectlineopacity,"select");};_pChartRadarSeriesControl.set_selectlinestyle=function(val){this.selectlinestyle=val;if(val){if(this._selectlinestyle==null||this._selectlinestyle.value!=val){var oldValue;if(this._selectlinestyle){oldValue=this._selectlinestyle.value;}this._changeContentsProperty("selectlinestyle",val,oldValue);var selectlinestyle=nexacro.BorderLineObject(val);this._selectlinestyle=selectlinestyle;this.on_apply_selectlinestyle(selectlinestyle);}}else{if(this._selectlinestyle){this._selectlinestyle=null;this.on_apply_selectlinestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectlinestyle=function(selectlinestyle){this._redrawSeries=false;this._applyPropertySeries("Line","selectlinestyle",selectlinestyle,"select");};_pChartRadarSeriesControl.set_pointlinestyle=function(val){this.pointlinestyle=val;if(val){if(this._pointlinestyle==null||this._pointlinestyle.value!=val){var oldValue;if(this._pointlinestyle){oldValue=this._pointlinestyle.value;}this._changeContentsProperty("pointlinestyle",val,oldValue);var pointlinestyle=nexacro.BorderLineObject(val);this._pointlinestyle=pointlinestyle;this.on_apply_pointlinestyle(pointlinestyle);}}else{if(this._pointlinestyle){this._pointlinestyle=null;this.on_apply_pointlinestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointlinestyle=function(pointlinestyle){if(pointlinestyle){this._pointborderwidth=pointlinestyle._width;}this._redrawSeries=false;this._applyPropertySeries("Point","pointlinestyle",pointlinestyle);};_pChartRadarSeriesControl.set_pointfillstyle=function(val){this.pointfillstyle=val;if(val){if(this._pointfillstyle==null||this._pointfillstyle.value!=val){var oldValue;if(this._pointfillstyle){oldValue=this._pointfillstyle.value;}this._changeContentsProperty("pointfillstyle",val,oldValue);var pointfillstyle=nexacro.BackgroundObject(val,this);this._pointfillstyle=pointfillstyle;this.on_apply_pointfillstyle(pointfillstyle);}}else{if(this._pointfillstyle){this._pointfillstyle=null;this.on_apply_pointfillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointfillstyle=function(pointfillstyle){this._redrawSeries=false;this._applyPropertySeries("Point","pointfillstyle",pointfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartRadarSeriesControl.set_pointopacity=function(val){this.pointopacity=val;if(0===val||val){if(this._pointopacity==null||this._pointopacity.value!=val){var oldValue;if(this._pointopacity){oldValue=this._pointopacity.value;}this._changeContentsProperty("pointopacity",val,oldValue);var pointopacity=nexacro.OpacityObject(val);this._pointopacity=pointopacity;this.on_apply_pointopacity(pointopacity);}}else{if(this._pointopacity){this._pointopacity=null;this.on_apply_pointopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointopacity=function(pointopacity){this._redrawSeries=false;this._applyPropertySeries("Point","pointopacity",pointopacity);};_pChartRadarSeriesControl.set_pointsize=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.pointsize!=val){this._changeContentsProperty("pointsize",val,this.pointsize);this.pointsize=val;this.on_apply_pointsize();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointsize=function(){this._chart._changedData=true;};_pChartRadarSeriesControl.set_pointshape=function(val){var pointshape_enum=["circle","square","diamond","triangle","cross"];if(pointshape_enum.indexOf(val)== -1){return;}if(this.pointshape!=val){this._changeContentsProperty("pointshape",val,this.pointshape);this.pointshape=val;this.on_apply_pointshape();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointshape=function(){this._chart._changedData=true;};_pChartRadarSeriesControl.set_pointvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.pointvisible!=val){this._changeContentsProperty("pointvisible",val,this.pointvisible);this.pointvisible=val;this.on_apply_pointvisible(val);}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointvisible=function(pointvisible){if(pointvisible){var selecttype=this.selecttype;if(selecttype){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Point","pointvisible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._chart._changedData=true;this._applyPropertySeries("Point","pointvisible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}};_pChartRadarSeriesControl.set_highlightpointvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightpointvisible!=val){this._changeContentsProperty("highlightpointvisible",val,this.highlightpointvisible);this.highlightpointvisible=val;this.on_apply_highlightpointvisible();}};_pChartRadarSeriesControl.on_apply_highlightpointvisible=function(){};_pChartRadarSeriesControl.set_highlightpointsize=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)||val<0){return;}val=parseInt(val);}if(this.highlightpointsize!=val){this._changeContentsProperty("highlightpointsize",val,this.highlightpointsize);this.highlightpointsize=val;this.on_apply_highlightpointsize();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightpointsize=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartRadarSeriesControl.set_highlightpointlinestyle=function(val){this.highlightpointlinestyle=val;if(val){if(this._highlightpointlinestyle==null||this._highlightpointlinestyle.value!=val){var oldValue;if(this._highlightpointlinestyle){oldValue=this._highlightpointlinestyle.value;}this._changeContentsProperty("highlightpointlinestyle",val,oldValue);var highlightpointlinestyle=nexacro.BorderLineObject(val);this._highlightpointlinestyle=highlightpointlinestyle;this.on_apply_highlightpointlinestyle(highlightpointlinestyle);}}else{if(this._highlightpointlinestyle){this._highlightpointlinestyle=null;this.on_apply_highlightpointlinestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightpointlinestyle=function(highlightpointlinestyle){};_pChartRadarSeriesControl.set_highlightpointfillstyle=function(val){this.highlightpointfillstyle=val;if(val){if(this._highlightpointfillstyle==null||this._highlightpointfillstyle.value!=val){var oldValue;if(this._highlightpointfillstyle){oldValue=this._highlightpointfillstyle.value;}this._changeContentsProperty("highlightpointfillstyle",val,oldValue);var highlightpointfillstyle=nexacro.BackgroundObject(val,this);this._highlightpointfillstyle=highlightpointfillstyle;this.on_apply_highlightpointfillstyle(highlightpointfillstyle);}}else{if(this._highlightpointfillstyle){this._highlightpointfillstyle=null;this.on_apply_highlightpointfillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightpointfillstyle=function(highlightpointfillstyle){};_pChartRadarSeriesControl.set_highlightpointopacity=function(val){this.highlightpointopacity=val;if(0===val||val){if(this._highlightpointopacity==null||this._highlightpointopacity.value!=val){var oldValue;if(this._highlightpointopacity){oldValue=this._highlightpointopacity.value;}this._changeContentsProperty("highlightpointopacity",val,oldValue);var highlightpointopacity=nexacro.OpacityObject(val);this._highlightpointopacity=highlightpointopacity;this.on_apply_highlightpointopacity(highlightpointopacity);}}else{if(this._highlightpointopacity){this._highlightpointopacity=null;this.on_apply_highlightpointopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightpointopacity=function(highlightpointopacity){};_pChartRadarSeriesControl.set_selectpointlinestyle=function(val){this.selectpointlinestyle=val;if(val){if(this._selectpointlinestyle==null||this._selectpointlinestyle.value!=val){var oldValue;if(this._selectpointlinestyle){oldValue=this._selectpointlinestyle.value;}this._changeContentsProperty("selectpointlinestyle",val,oldValue);var selectpointlinestyle=nexacro.BorderLineObject(val);this._selectpointlinestyle=selectpointlinestyle;this.on_apply_selectpointlinestyle(selectpointlinestyle);}}else{if(this._selectpointlinestyle){this._selectpointlinestyle=null;this.on_apply_selectpointlinestyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectpointlinestyle=function(selectpointlinestyle){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointlinestyle",selectpointlinestyle,"select");};_pChartRadarSeriesControl.set_selectpointfillstyle=function(val){this.selectpointfillstyle=val;if(val){if(this._selectpointfillstyle==null||this._selectpointfillstyle.value!=val){var oldValue;if(this._selectpointfillstyle){oldValue=this._selectpointfillstyle.value;}this._changeContentsProperty("selectpointfillstyle",val,oldValue);var selectpointfillstyle=nexacro.BackgroundObject(val,this);this._selectpointfillstyle=selectpointfillstyle;this.on_apply_selectpointfillstyle(selectpointfillstyle);}}else{if(this._selectpointfillstyle){this._selectpointfillstyle=null;this.on_apply_selectpointfillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectpointfillstyle=function(selectpointfillstyle){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointfillstyle",selectpointfillstyle,"select");};_pChartRadarSeriesControl.set_selectpointopacity=function(val){this.selectpointopacity=val;if(0===val||val){if(this._selectpointopacity==null||this._selectpointopacity.value!=val){var oldValue;if(this._selectpointopacity){oldValue=this._selectpointopacity.value;}this._changeContentsProperty("selectpointopacity",val,oldValue);var selectpointopacity=nexacro.OpacityObject(val);this._selectpointopacity=selectpointopacity;this.on_apply_selectpointopacity(selectpointopacity);}}else{if(this._selectpointopacity){this._selectpointopacity=null;this.on_apply_selectpointopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectpointopacity=function(selectpointopacity){this._redrawSeries=false;this._applyPropertySeries("Point","selectpointopacity",selectpointopacity,"select");};_pChartRadarSeriesControl.set_lineareavisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.lineareavisible!=val){this._changeContentsProperty("lineareavisible",val,this.lineareavisible);this.lineareavisible=val;this.on_apply_lineareavisible();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_lineareavisible=function(){this._chart._changedData=true;};_pChartRadarSeriesControl.set_lineareafillstyle=function(val){this.lineareafillstyle=val;if(val){if(this._lineareafillstyle==null||this._lineareafillstyle.value!=val){var oldValue;if(this._lineareafillstyle){oldValue=this._lineareafillstyle.value;}this._changeContentsProperty("lineareafillstyle",val,oldValue);var lineareafillstyle=nexacro.BackgroundObject(val,this);this._lineareafillstyle=lineareafillstyle;this.on_apply_lineareafillstyle(lineareafillstyle);}}else{if(this._lineareafillstyle){this._lineareafillstyle=null;this.on_apply_lineareafillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_lineareafillstyle=function(lineareafillstyle){if(this.lineareavisible){this._applyPropertySeries("Area","lineareafillstyle",lineareafillstyle);if(this._chart.legend){this._chart._applyLegendItem();}this._chart._rearrange=true;this._chart._recreate=true;}};_pChartRadarSeriesControl.set_lineareaopacity=function(val){this.lineareaopacity=val;if(0===val||val){if(this._lineareaopacity==null||this._lineareaopacity.value!=val){var oldValue;if(this._lineareaopacity){oldValue=this._lineareaopacity.value;}this._changeContentsProperty("lineareaopacity",val,oldValue);var lineareaopacity=nexacro.OpacityObject(val);this._lineareaopacity=lineareaopacity;this.on_apply_lineareaopacity(lineareaopacity);}}else{if(this.lineareaopacity){this.lineareaopacity=null;this.on_apply_lineareaopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_lineareaopacity=function(lineareaopacity){this._applyPropertySeries("Area","lineareaopacity",lineareaopacity);};_pChartRadarSeriesControl.set_highlightlineareavisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightlineareavisible!=val){this._changeContentsProperty("highlightlineareavisible",val,this.highlightlineareavisible);this.highlightlineareavisible=val;this.on_apply_highlightlineareavisible(val);}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlineareavisible=function(highlightlinevisible){};_pChartRadarSeriesControl.set_highlightlineareafillstyle=function(val){this.highlightlineareafillstyle=val;if(val){if(this._highlightlineareafillstyle==null||this._highlightlineareafillstyle.value!=val){var oldValue;if(this._highlightlineareafillstyle){oldValue=this._highlightlineareafillstyle.value;}this._changeContentsProperty("highlightlineareafillstyle",val,oldValue);var highlightlineareafillstyle=nexacro.BackgroundObject(val,this);this._highlightlineareafillstyle=highlightlineareafillstyle;this.on_apply_highlightlineareafillstyle(highlightlineareafillstyle);}}else{if(this._highlightlineareafillstyle){this._highlightlineareafillstyle=null;this.on_apply_highlightlineareafillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlineareafillstyle=function(highlightpointfillstyle){};_pChartRadarSeriesControl.set_highlightlineareaopacity=function(val){this.highlightlineareaopacity=val;if(0===val||val){if(this._highlightlineareaopacity==null||this._highlightlineareaopacity.value!=val){var oldValue;if(this._highlightlineareaopacity){oldValue=this._highlightlineareaopacity.value;}this._changeContentsProperty("highlightlineareaopacity",val,oldValue);var highlightlineareaopacity=nexacro.OpacityObject(val);this._highlightlineareaopacity=highlightlineareaopacity;this.on_apply_highlightpointopacity(highlightlineareaopacity);}}else{if(this._highlightlineareaopacity){this._highlightlineareaopacity=null;this.on_apply_highlightpointopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_highlightlineareaopacity=function(highlightlineareaopacity){};_pChartRadarSeriesControl.set_selectlineareafillstyle=function(val){this.selectlineareafillstyle=val;if(val){if(this._selectlineareafillstyle==null||this._selectlineareafillstyle.value!=val){var oldValue;if(this._selectlineareafillstyle){oldValue=this._selectlineareafillstyle.value;}this._changeContentsProperty("selectlineareafillstyle",val,oldValue);var selectlineareafillstyle=nexacro.BackgroundObject(val,this);this._selectlineareafillstyle=selectlineareafillstyle;this.on_apply_selectlineareafillstyle(selectlineareafillstyle);}}else{if(this._selectlineareafillstyle){this._selectlineareafillstyle=null;this.on_apply_selectlineareafillstyle(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectlineareafillstyle=function(selectlineareafillstyle){this._redrawSeries=false;this._applyPropertySeries("Area","selectlineareafillstyle",selectlineareafillstyle,"select");};_pChartRadarSeriesControl.set_selectlineareaopacity=function(val){this.selectlineareaopacity=val;if(0===val||val){if(this._selectlineareaopacity==null||this._selectlineareaopacity.value!=val){var oldValue;if(this._selectlineareaopacity){oldValue=this._selectlineareaopacity.value;}this._changeContentsProperty("selectlineareaopacity",val,oldValue);var selectlineareaopacity=nexacro.OpacityObject(val);this._selectlineareaopacity=selectlineareaopacity;this.on_apply_selectlineareaopacity(selectlineareaopacity);}}else{if(this._selectlineareaopacity){this._selectlineareaopacity=null;this.on_apply_selectlineareaopacity(null);}}this._chart._draw();};_pChartRadarSeriesControl.on_apply_selectlineareaopacity=function(selectlineareaopacity){this._redrawSeries=false;this._applyPropertySeries("Area","selectlineareaopacity",selectlineareaopacity,"select");};_pChartRadarSeriesControl.set_pointitemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.pointitemtextgap!=val){this._changeContentsProperty("pointitemtextgap",val,this.pointitemtextgap);this.pointitemtextgap=val;this.on_apply_pointitemtextgap();}};_pChartRadarSeriesControl.on_apply_pointitemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartRadarSeriesControl.set_lineitemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.lineitemtextgap!=val){this._changeContentsProperty("lineitemtextgap",val,this.lineitemtextgap);this.lineitemtextgap=val;this.on_apply_lineitemtextgap();}};_pChartRadarSeriesControl.on_apply_lineitemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartRadarSeriesControl.set_pointitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.pointitemtextposition!=val){this._changeContentsProperty("pointitemtextposition",val,this.pointitemtextposition);this.pointitemtextposition=val;this.on_apply_pointitemtextposition();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_pointitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartRadarSeriesControl.set_lineitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.lineitemtextposition!=val){this._changeContentsProperty("lineitemtextposition",val,this.lineitemtextposition);this.lineitemtextposition=val;this.on_apply_lineitemtextposition();}this._chart._draw();};_pChartRadarSeriesControl.on_apply_lineitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartRadarSeriesControl._applyPropertySeries=function(type,style,value,select){var item=null,seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){if(type=="Line"&&this.lineareavisible==true){type="Area";}var itemID=this._configIndex+" Series"+type+"Item_"+(i-1),isselectitem=false;item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){var length=this._selectedItem.length;if(length>0){if(type=="Line"||type=="Area"){var selecttype=this.selecttype;if(selecttype=="select"){isselectitem=true;}else if(selecttype=="unselect"){isselectitem=false;}else{var selectlinestyle=this.selectlinestyle,selectlineareafillstyle=this.selectlineareafillstyle,selectlineopacity=this.selectlineopacity,selectlineareaopacity=this.selectlineareaopacity;if(selectlinestyle||selectlineareafillstyle||selectlineopacity||selectlineareaopacity){isselectitem=true;}}}else{isselectitem=this._selectedItem[i-1];}}if(isselectitem){if(style=="selectpointfillstyle"||style=="selectlineareafillstyle"){item.set_fillstyle(value);}else if(style=="selectpointlinestyle"||style=="selectlinestyle"){item.set_strokepen(value);}else if(style=="selectpointopacity"||style=="selectlineopacity"||style=="selectlineareaopacity"){item.set_opacity(value);}else if(style=="pointvisible"||style=="linevisible"||style=="lineareavisible"){item.set_visible(value);}}else{if(style=="pointfillstyle"||style=="lineareafillstyle"){item.set_fillstyle(value);}else if(style=="pointlinestyle"||style=="linestyle"){item.set_strokepen(value);}else if(style=="pointopacity"||style=="lineopacity"||style=="lineareaopacity"){item.set_opacity(value);}else if(style=="pointvisible"||style=="linevisible"||style=="lineareavisible"){item.set_visible(value);}}}}}};_pChartRadarSeriesControl._draw2=function(redraw){if(!redraw){return;}this._itemCnt=0;this._itemtextlist=[];if(this.linevisible){this._drawSeriesLines();}if(this.pointvisible){this._drawSeriesPoints();}};_pChartRadarSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartRadarSeriesControl._drawnow=function(){if(this.linevisible){this._drawSeriesLines();}if(this.pointvisible){this._drawSeriesPoints();}};_pChartRadarSeriesControl._drawSeriesLines=function(){var linestyle=this.linestyle||"1px solid "+this._color,lineopacity=this.lineopacity,lineareavisible=this.lineareavisible,lineareafillstyle=this.lineareafillstyle||this._color,lineareaopacity=this.lineareaopacity,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],path,area,datapoints=this._datapoints,seriesGroup=this._chart._seriesGroup,selectedItem=this._selectedItem,selectlinestyle=this.selectlinestyle||"1px solid "+this._selectcolor,selectlineareafillstyle=this.selectlineareafillstyle||this._selectcolor,selectlineopacity=this.selectlineopacity||this.lineopacity,selectlineareaopacity=this.selectlineareaopacity||this.lineareaopacity,isselectitem=false,effect=this._chart_aniframe_obj,length=0;length=selectedItem.length;for(var i=0;i<length;i++ ){var isselect=selectedItem[i];if(isselect){isselectitem=true;break;}}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,selectlinestyle,selectlineopacity,false,false);if(lineareavisible){area=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,"1px solid "+selectlineareafillstyle,selectlineopacity,lineareavisible,false);}if(area){if(lineareavisible){area.set_fillstyle(selectlineareafillstyle);if(!nexacro._ChartGraphicsLib.isEmpty(selectlineareaopacity)){area.set_opacity(selectlineareaopacity);}area.closePath();}}}else{path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,linestyle,lineopacity,false,false);if(lineareavisible){area=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,"1px solid "+lineareafillstyle,lineopacity,lineareavisible,false);}if(area){if(lineareavisible){area.set_fillstyle(lineareafillstyle);if(!nexacro._ChartGraphicsLib.isEmpty(lineareaopacity)){area.set_opacity( +lineareaopacity);}area.closePath();}}}var itemtextvisible=this.itemtextvisible,pointvisible=this.pointvisible;if(!pointvisible&&itemtextvisible){if(path){if(effect&&effect.isloadanimation){}else{this._drawLineItemText(datapoints,categoryaxis,valueaxis,path);}}}};_pChartRadarSeriesControl._drawSeriesPoints=function(){var pointlinestyle=this.pointlinestyle||"1px solid "+this._color,pointfillstyle=this.pointfillstyle||this._color,pointopacity=this.pointopacity,index=0,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],datapoints=this._datapoints,points=datapoints.points.slice(0),ps=datapoints.pointsize,selectitem,selectpointlinestyle=this.selectpointlinestyle||"1px solid "+this._selectcolor,selectpointfillstyle=this.selectpointfillstyle||this._selectcolor,selectpointopacity=this.selectpointopacity||this.pointopacity,selectedItem=this._selectedItem,isselectitem=false,effect=this._chart_aniframe_obj,pointsize;if((this.pointsize==""||this.pointsize==undefined)&&this.pointsize!==0){pointsize=5;}else{pointsize=this.pointsize;}if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}for(var i=0;i<points.length;i+=ps){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){this._drawPoint(points[i],points[i+1],pointsize,categoryaxis,valueaxis,this.pointshape,this._pointshape,selectpointlinestyle,selectpointfillstyle,selectpointopacity,index);}else{this._drawPoint(points[i],points[i+1],pointsize,categoryaxis,valueaxis,this.pointshape,this._pointshape,pointlinestyle,pointfillstyle,pointopacity,index);}index++ ;}this._itemCnt+=index;};_pChartRadarSeriesControl._showPointHighlight=function(item){if(!this.highlightpointvisible){return;}var pointHighlight=item._pointHighlight;if(!pointHighlight){var points=item._points,index=item.index,highlightpointlinestyle=this.highlightpointlinestyle||"1px solid "+this._highlightcolor,highlightpointfillstyle=this.highlightpointfillstyle||this._highlightcolor,highlightpointopacity=this.highlightpointopacity,highlightpointsize=this.highlightpointsize,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],highlightGroup=this._chart._highlightGroup;if((highlightpointsize==""||highlightpointsize==undefined)&&highlightpointsize!==0){highlightpointsize=15;}if(!points){return false;}this._drawPoint(points[0],points[1],highlightpointsize,categoryaxis,valueaxis,this.pointshape,this._pointshape,highlightpointlinestyle,highlightpointfillstyle,highlightpointopacity,index,item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._hidePointHighlight=function(item){if(!this.highlightpointvisible){return;}var pointHighlight=item._pointHighlight;if(pointHighlight&&!nexacro._ChartGraphicsLib.isEmpty(pointHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(pointHighlight);delete item._pointHighlight;item._pointHighlight=null;this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._showLineHighlight=function(item){if(!this.highlightlinevisible){return;}var lineHighlight=item._lineHighlight;if(!lineHighlight){this._drawLineHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._hideLineHighlight=function(item){if(!this.highlightlinevisible){return;}var lineHighlight=item._lineHighlight;if(lineHighlight&&!nexacro._ChartGraphicsLib.isEmpty(lineHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(lineHighlight);delete item._lineHighlight;item._lineHighlight=null;this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._showLineAreaHighlight=function(item){if(!this.highlightlineareavisible){return;}var lineareaHighlight=item._lineareaHighlight;if(!lineareaHighlight){this._drawLineAreaHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._hideLineAreaHighlight=function(item){if(!this.highlightlineareavisible){return;}var lineareaHighlight=item._lineareaHighlight;if(lineareaHighlight&&!nexacro._ChartGraphicsLib.isEmpty(lineareaHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(lineareaHighlight);delete item._lineareaHighlight;item._lineareaHighlight=null;this._chart._graphicsControl.draw();}};_pChartRadarSeriesControl._drawLineHighlight=function(item){var highlightlinestyle=this.highlightlinestyle||"1px solid "+this._highlightcolor,highlightlineopacity=this.highlightlineopacity,datapoints=this._datapoints,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],path,highlightGroup=this._chart._highlightGroup;path=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,highlightlinestyle,highlightlineopacity,false,true);highlightGroup.addChild(path);item._lineHighlight=path;path._item=item;path._series=this;};_pChartRadarSeriesControl._drawLineAreaHighlight=function(item){var highlightlineareafillstyle=this.highlightlineareafillstyle||this._highlightcolor,highlightlineareaopacity=this.highlightlineareaopacity,highlightlinestyle="1px solid "+highlightlineareafillstyle,highlightlineopacity=this.highlightlineopacity,datapoints=this._datapoints,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],area,highlightGroup=this._chart._highlightGroup;area=this._drawLine(datapoints,0,0,categoryaxis,valueaxis,highlightlinestyle,highlightlineopacity,true,true);highlightGroup.addChild(area);area.set_fillstyle(highlightlineareafillstyle);if(!nexacro._ChartGraphicsLib.isEmpty(highlightlineareaopacity)){area.set_opacity(highlightlineareaopacity);}area.closePath();item._lineareaHighlight=area;area._item=item;area._series=this;};_pChartRadarSeriesControl._drawPoint=function(x,y,radius,categoryaxis,valueaxis,pointshape,_pointshape,pointlinestyle,pointfillstyle,pointopacity,index,item){var chart=this._chart,point,cx,cy,points=[],evtInfo,seriesId,shiftPointX=0,shiftPointY=0,seriesGroup=chart._seriesGroup,tmp,xoffset=0,yoffset=0,effect=this._chart_aniframe_obj,highlightGroup=chart._highlightGroup;if(x==null||y==null||x<categoryaxis._min||x>categoryaxis._max||y<valueaxis._min||y>valueaxis._max){return;}xoffset+= -this._chart._boardRectLeft;yoffset+= -this._chart._boardRectTop;cx=categoryaxis.p2c(x,y)+xoffset;cy=valueaxis.p2c(y,x)+yoffset;if(item){var highlightitem=item._pointHighlight;if(!highlightitem){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}seriesId=this._configIndex+" SeriesHighlightPointItem";point.set_id(seriesId);highlightGroup.addChild(point);item._pointHighlight=point;item.index=index;point._item=item;point.index=item.index;point.value=item.value;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesPointItem_"+index;point=seriesGroup.getObjectByID(seriesId);if(point){if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius,point);}else{point.set_cx(cx);point.set_cy(cy);point.set_width(radius);point.set_height(radius);}}else{if(pointshape=="square"||pointshape=="diamond"||pointshape=="triangle"||pointshape=="cross"){radius=radius/2;point=_pointshape(cx,cy,radius);}else{point=new nexacro.ChartGraphicsEllipse(cx,cy,radius,radius);}point.set_id(seriesId);seriesGroup.addChild(point);}point.index=index;point.value=y;points[0]=x;points[1]=y;point.radius=radius;point._points=points;}}if(point){point.set_strokepen(pointlinestyle);point.set_fillstyle(pointfillstyle);point.set_opacity(pointopacity);point._series=this;this._seriesitems[point.index]=point;}if(point&&!item){var itemtextvisible=this.itemtextvisible;if(itemtextvisible&&point){if(effect&&effect.isloadanimation){}else{this._drawPointItemText(cx,cy,point);}}}};_pChartRadarSeriesControl._drawLine=function(datapoints,xoffset,yoffset,categoryaxis,valueaxis,linestyle,lineopacity,Islineareavisible,Ishighlight){var points=datapoints.points.slice(0),ps=datapoints.pointsize,prevx=null,prevy=null,path,startPointX,endPointX,startPointY,endPointY,ypos=1,xpos=0,effect=this._chart_aniframe_obj,seriesid,bcreate=false,seriesGroup=this._chart._seriesGroup,lineareavisible=Islineareavisible,bstartline=false;xoffset+= -this._chart._boardRectLeft;yoffset+= -this._chart._boardRectTop;if(points.length<=0){return;}if(Ishighlight){path=new nexacro.ChartGraphicsPaths();if(!lineareavisible){path.set_id(this._configIndex+" SeriesHighlightLineItem_0");}else{path.set_id(this._configIndex+" SeriesHighlightAreaItem_0");}}else{if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}if(!lineareavisible){seriesid=this._configIndex+" SeriesLineItem_0";}else{seriesid=this._configIndex+" SeriesAreaItem_0";}path=seriesGroup.getObjectByID(seriesid);if(path){path.clear();}else{path=new nexacro.ChartGraphicsPaths();path.set_id(seriesid);bcreate=true;}}path.set_strokepen(linestyle);path.set_opacity(lineopacity);if(!nexacro._ChartGraphicsLib.isEmpty(lineopacity)){path.set_opacity(lineopacity);}for(var i=ps;i<points.length;i+=ps){var x1,y1,x2,y2;x1=points[i-ps];x2=points[i];y1=points[i-ps+1];y2=points[i+1];if(y1==null||y2==null){continue;}if(y1<=y2&&y1<valueaxis._min){if(y2<valueaxis._min){continue;}x1=(valueaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y1=valueaxis._min;}else if(y2<=y1&&y2<valueaxis._min){if(y1<valueaxis._min){continue;}x2=(valueaxis._min-y1)/(y2-y1)*(x2-x1)+x1;y2=valueaxis._min;}if(y1>=y2&&y1>valueaxis._max){if(y2>valueaxis._max){continue;}x1=(valueaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y1=valueaxis._max;}else if(y2>=y1&&y2>valueaxis._max){if(y1>valueaxis._max){continue;}x2=(valueaxis._max-y1)/(y2-y1)*(x2-x1)+x1;y2=valueaxis._max;}if(x1<=x2&&x1<categoryaxis._min){if(x2<categoryaxis._min){continue;}y1=(categoryaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x1=categoryaxis._min;}else if(x2<=x1&&x2<categoryaxis._min){if(x1<categoryaxis._min){continue;}y2=(categoryaxis._min-x1)/(x2-x1)*(y2-y1)+y1;x2=categoryaxis._min;}if(x1>=x2&&x1>categoryaxis._max){if(x2>categoryaxis._max){continue;}y1=(categoryaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x1=categoryaxis._max;}else if(x2>=x1&&x2>categoryaxis._max){if(x1>categoryaxis._max){continue;}y2=(categoryaxis._max-x1)/(x2-x1)*(y2-y1)+y1;x2=categoryaxis._max;}if(x1!=prevx||y1!=prevy){startPointX=categoryaxis.p2c(x1,y1)+xoffset;startPointY=valueaxis.p2c(y1,x1)+yoffset;path.moveTo(startPointX,startPointY);bstartline=true;}prevx=x2;prevy=y2;endPointX=categoryaxis.p2c(x2,y2)+xoffset;endPointY=valueaxis.p2c(y2,x2)+yoffset;if(bstartline){path.lineTo(endPointX,endPointY);}}if(Ishighlight){if(!lineareavisible){if(bstartline){path.lineTo(startPointX,startPointY);}}}else{path._series=this;path.index=0;path.value= -1;path._points=points;if(bcreate){this._itemCnt++ ;this._chart._seriesGroup.addChild(path);}if(!lineareavisible){if(bstartline){path.lineTo(startPointX,startPointY);}}}return path;};_pChartRadarSeriesControl._drawPointItemText=function(cx,cy,item){var seriesGroup=this._chart._seriesGroup;var itemText=this._createSeriesItemText(item);var textRect=null,textWidth=0,textHeight=0,textLeft=0,textTop=0,radius=item.radius,width=this._pointborderwidth,itemtextPosition=this.pointitemtextposition,itemtextGap=this.pointitemtextgap;function positionlefttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy;if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}if(!nexacro._isNull(itemText)){if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;}};_pChartRadarSeriesControl._drawLineItemText=function(datapoints,axisx,axisy,item){var points=datapoints.points,xoffset=0,yoffset=0,ps=datapoints.pointsize;var itemtextPosition=this.lineitemtextposition,itemtextGap=this.lineitemtextgap;var rotateaxis=this._chart.rotateaxis;xoffset+= -this._chart._boardRectLeft;yoffset+= -this._chart._boardRectTop;function positionlefttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}for(var i=0;i<points.length;i+=ps){var itemindex=points[i],preitemindex=points[i+ps],value=points[i+1],point=[],linetype=this.linetype,itemText;item.index=itemindex;item.value=value;itemText=this._createSeriesItemText(item);if(!nexacro._isNull(itemText)){var textRect=null,textWidth=0,textHeight=0,textLeft=0,textTop=0,cx=0,cy=0,width=this._lineborderwidth,seriesGroup=this._chart._seriesGroup;cx=axisx.p2c(itemindex,value)+xoffset;cy=axisy.p2c(value,itemindex)+yoffset;if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap,width);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap,width);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap,width);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap,width);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap,width);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap,width);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap,width);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap,width);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap,width);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;this._itemCnt++ ;this._seriesitems[itemindex]=itemText;}}};_pChartRadarSeriesControl._setItemData=function(){var data=this._data,itemdata;if(data){itemdata=this._processItemData(data);}return itemdata;};_pChartRadarSeriesControl._setItemColor=function(items){var colorcnt=0;var colorset=this._chart._colorset;var item;for(var i=0;i<items.length;i++ ){item=items[i];if(item._isShow&&item.value){var itemColor=colorset[colorcnt];if(itemColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){itemColor=colorset[colorcnt];colorcnt++ ;}items[i].color=itemColor;var slice=items[i]._slice;if(slice){slice.set_fillstyle(itemColor);}}}};_pChartRadarSeriesControl._processItemData=function(data){var length=data.length,slice=[],i=0,total=0;if(length<=2){return slice;}for(i=0;i<length;i++ ){var angleItems={};if(data[i]!=null&&data[i][0]!=undefined){angleItems.index=i;slice.push(angleItems);}}var items=slice;var checkangleval=10;for(i=0;i<items.length; ++i){total+=checkangleval;}var startangle=0;for(i=0;i<items.length; ++i){var value=0;var percent=0;var angle=0;var endangle=Math.PI*2;angle=checkangleval*endangle/total;percent=(checkangleval/(total/100)).toFixed(2);items[i].startangle=0;items[i].angle=angle;items[i].startangle+=startangle;startangle+=angle;items[i].endangle=startangle;items[i].percent=nexacro.toNumber(percent);}return items;};_pChartRadarSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};_pChartRadarSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;var width,style,color;if(changedColorset){var pointvisible=this.pointvisible,linevisible=this.linevisible,lineareavisible=this.lineareavisible,linestyle,lineareafillstyle,pointlinestyle,pointfillstyle;if(linevisible){if(this._linestyle){width=this._linestyle.width;style=this._linestyle.style;color=this._linestyle.color;linestyle=width+" "+style+" "+color;this.set_linestyle(linestyle);}else{linestyle="1px solid "+colorset;this._applyPropertySeries("Line","linestyle",linestyle);this.linestyle=linestyle;}if(this.lineareavisible){if(this._lineareafillstyle){lineareafillstyle=this._lineareafillstyle;this.set_lineareafillstyle(lineareafillstyle);}else{lineareafillstyle=colorset;this._applyPropertySeries("Area","lineareafillstyle",lineareafillstyle);this.lineareafillstyle=lineareafillstyle;}}}if(pointvisible){if(this._pointlinestyle){width=this._pointlinestyle.width;style=this._pointlinestyle.style;color=this._pointlinestyle.color;pointlinestyle=width+" "+style+" "+color;this.set_pointlinestyle(pointlinestyle);}else{pointlinestyle="1px solid "+colorset;this._applyPropertySeries("Point","pointlinestyle",pointlinestyle);this.pointlinestyle=pointlinestyle;}if(this._pointfillstyle){pointfillstyle=this._pointfillstyle;this.set_pointfillstyle(pointfillstyle);}else{pointfillstyle=colorset;this._applyPropertySeries("Point","pointfillstyle",pointfillstyle);this.pointfillstyle=pointfillstyle;}}}};_pChartRadarSeriesControl.on_apply_itemtextfont=function(itemtextfont){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_font(itemtextfont?itemtextfont.value||itemtextfont:"6pt Verdana");}}}};}
if(!nexacro.RoseChart){nexacro.RoseChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro.RadarChart.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");this._visibleSeriesset=[];this._radarangleinfo=[];this.valueaxes=[];};var _pRoseChart=nexacro._createPrototype(nexacro.RadarChart,nexacro.RoseChart);nexacro.RoseChart.prototype=_pRoseChart;_pRoseChart._type_name="RoseChart";_pRoseChart.categoryaxis=null;_pRoseChart.valueaxes=null;_pRoseChart.radius=undefined;_pRoseChart.rosesize=80;_pRoseChart.radartype="circle";_pRoseChart._boardWidth=0;_pRoseChart._boardHeight=0;_pRoseChart._centerLeft=0;_pRoseChart._centerTop=0;_pRoseChart._drawing=false;_pRoseChart._isnegativedata=false;_pRoseChart._invalidcategorycolumn=false;_pRoseChart._startangle=null;_pRoseChart._endangle=null;_pRoseChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._ChartBase.prototype.on_create_contents.call(this);}};_pRoseChart.on_destroy_contents=function(){this.rosesize=null;return nexacro.RadarChart.prototype.on_destroy_contents.call(this);};_pRoseChart.set_rosesize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.rosesize!=val){this.rosesize=val;this.on_apply_rosesize(lVal);}this._draw();};_pRoseChart.on_apply_rosesize=function(rosesize){this._changedData=true;};_pRoseChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pRoseChart._appendValueaxis=function(contents){var axis,id,axisContents={},valueaxesLeng= -1;if(this.valueaxes.length>0){return null;}if(!this._isApplyContents&&nexacro._ChartGraphicsLib.isEmpty(contents)){return valueaxesLeng;}if(typeof (contents)=="object"){axisContents=contents;id=contents.id;}if(!id){valueaxesLeng=this.valueaxes.length+1;id="Valueaxis"+valueaxesLeng;contents.id=id;}if(!this._isApplyContents){this.contents.valueaxes.push(axisContents);}axis=new nexacro.ChartRoseValueAxisControl(id,this,this._graphicsControl);axis._type_name="ChartRoseValueAxisControl";axis._type="valueAxis";this._drawing=true;this._setProperties(axisContents,axis);this._drawing=false;this.valueaxes.push(axis);valueaxesLeng=this.valueaxes.length-1;return axis;};_pRoseChart._createSeries=function(contents,id){var series=new nexacro.ChartRoseSeriesControl(id,this,this._graphicsControl);return series;};_pRoseChart._getHighlightVisible=function(){var seriesset=this.seriesset;if(seriesset){var length=seriesset.length,highlightvisible=false;for(var i=0;i<length;i++ ){var s=seriesset[i];if(s){if(s.highlightvisible){highlightvisible=true;break;}}}return highlightvisible;}};_pRoseChart._getVisibleSeries=function(){var length=this.seriesset.length,pointvisible=false,linevisible=false,visibleSeriesset=[];for(var i=0;i<length;i++ ){var series=this.seriesset[i];if(series){var data=series._data;if(data){if(data.length<=2){continue;}}linevisible=series.visible;if(linevisible){visibleSeriesset.push(series);}}}this._visibleSeriesset=visibleSeriesset;};_pRoseChart._setSeriesDatapointsFormat=function(series){var format=series._datapoints.format;if(!format){format=[];format.push({x:true,category:true,required:true});format.push({y:true,category:false,required:true,defaultvalue:null});if(series.visible){format.push({angle:true,category:false,required:true});}series._datapoints.format=format;}};_pRoseChart._setSeriesDataMinMax=function(series){var datapoints=series._datapoints,xmin=Number.POSITIVE_INFINITY,ymin=Number.POSITIVE_INFINITY,xmax=Number.NEGATIVE_INFINITY,ymax=Number.NEGATIVE_INFINITY,points,pointsize,val,f,categoryaxis=this.categoryaxis,valueaxis=this.valueaxes[0],format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;var series_ymax=(valueaxis._datamax==Number.NEGATIVE_INFINITY?0:valueaxis._datamax);var cum_val=0;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){continue;}for(var j=0;j<pointsize;j++ ){val=points[i+j];cum_val=val+series_ymax;f=format[j];if(!f||val==Number.MAX_VALUE||val== -Number.MAX_VALUE){continue;}if(f.x){if(val<xmin){xmin=val;}if(val>xmax){xmax=val;}}if(f.y){if(val<ymin){ymin=val;}if(cum_val>ymax){ymax=cum_val;}}}}if(categoryaxis._tickmin){xmin=categoryaxis._tickmin;}if(categoryaxis._tickmax){xmax=categoryaxis._tickmax;}if(valueaxis._tickmin){ymin=valueaxis._tickmin;}if(valueaxis._tickmax){ymax=valueaxis._tickmax;}if(categoryaxis&&categoryaxis._updateMinMax){categoryaxis._updateMinMax(xmin,xmax);}if(valueaxis&&valueaxis._updateMinMax){valueaxis._updateMinMax(ymin,ymax);}};_pRoseChart._createCategoryaxis=function(o,id){if(this.categoryaxis){return false;}var axis;if(!id){id="Categoryaxis";}axis=new nexacro.ChartRoseCategoryAxisControl(id,this,this._graphicsControl);axis._type_name="ChartRoseCategoryAxisControl";axis._type="categoryAxis";this.categoryaxis=axis;return axis;};_pRoseChart._createValueaxes=function(o,id){if(this.valueaxes.length>0){return null;}var valueaxis;if(!id){id="Valueaxis"+this.valueaxes.length;}valueaxis=new nexacro.ChartRoseValueAxisControl(id,this,this._graphicsControl);valueaxis._type_name="ChartRoseValueAxisControl";valueaxis._type="valueAxis";this.valueaxes.push(valueaxis);return valueaxis;};_pRoseChart._setDataset=function(){nexacro._ChartBase.prototype._setDataset.call(this);};}if(!nexacro.ChartRoseCategoryAxisControl){nexacro.ChartRoseCategoryAxisControl=function(id,parent,graphicsControl){nexacro.ChartRadarCategoryAxisControl.call(this,id,parent,graphicsControl);this._direction="x";};var _pChartRoseCategoryAxisControl=nexacro._createPrototype(nexacro.ChartRadarCategoryAxisControl,nexacro.ChartRoseCategoryAxisControl);nexacro.ChartRoseCategoryAxisControl.prototype=_pChartRoseCategoryAxisControl;_pChartRoseCategoryAxisControl._type_name="ChartRoseCategoryAxisControl";_pChartRoseCategoryAxisControl.boardlinevisible=true;_pChartRoseCategoryAxisControl.destroy=function(){this._destroy(true);};_pChartRoseCategoryAxisControl._destroy=function(parent_clear){if(parent_clear){if(this.parent){this.parent.categoryaxis=null;this.parent._deleteContentsProp("categoryaxis");}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();ticktext=null;}var tickline=tick.lineElement;if(tickline){tickline.destroy();tickline=null;}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();tickboardline=null;}tick=null;}}this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;this._axislineindex=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartRoseCategoryAxisControl._getTickLabelAlign=function(labelrotate,labelangle){return;};_pChartRoseCategoryAxisControl._arrangeTickGroup=function(width,height){var chart=this.parent,ticks=this._ticks,value,tickmin=this._min,tickmax=this._max,axisLine,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=this,categoryaxislinewidth=1,valueaxis=chart.valueaxes[0];var max=Math.max(valueaxis._max,0);var startX=centerX;var startY=centerY;var endX=centerX;var endY=centerY;var range;var bstartline=false;var halfX=endX;var halfy;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;for(var i=0;i<ticks.length;i++ ){axisLine=ticks[i].boardlineElement;value=ticks[i].v;if(isNaN(value)||value<tickmin||value>tickmax){continue;}endX=this.p2c(value,max);endY=valueaxis.p2c(max,value);halfX=this.p2chalf(value,max);halfY=valueaxis.p2chalf(max,value);if(axisLine){axisLine.moveTo(startX,startY);axisLine.lineTo(endX,endY);ticks[i]._point={"x":endX,"y":endY,"hx":halfX,"hy":halfY};}}var categorylength=0;if(chart._radarangleinfo){categorylength=chart._radarangleinfo.length;}if(this._axisLine&&ticks.length>0){for(var j=0;j<categorylength;j++ ){if(j==0){startX=categoryaxis.p2c(j,max);startY=valueaxis.p2c(max,j);this._axisLine.moveTo(startX,startY);bstartline=true;}else{endX=categoryaxis.p2c(j,max);endY=valueaxis.p2c(max,j);if(bstartline){range=valueaxis.p2range(max,j);this._axisLine.arcTo(new nexacro.Point(endX,endY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}}if(bstartline){this._axisLine.arcTo(new nexacro.Point(startX,startY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}}};_pChartRoseCategoryAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,chart=this.parent,tick,labelEle,textW=0,textH=0,x=0,y=0,value,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,labelgap= +this._labelgap,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=this,valueaxis=chart.valueaxes[0],radius,startangle,ptPos,originpoint,vPoint={x:0,y:0},vUnit,rotateX=0,rotateY=0,targetX=0,targetY=0,categoryaxislinewidth=1,valueaxislinewidth=1,valueaxisboardlinewidth=1,labelBoundRect;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;valueaxislinewidth=(valueaxis&&valueaxis._axislinestyle)?valueaxis._axislinestyle._getBorderLeftWidth():1;valueaxisboardlinewidth=(valueaxis&&valueaxis._boardlinestyle)?valueaxis._boardlinestyle._getBorderLeftWidth():1;var linewidth=Math.max(categoryaxislinewidth,valueaxisboardlinewidth);function getDistance(x1,y1,x2,y2){var nLen=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));return nLen;}function getUnitVector(ptAnchor,ptPos){var pt={x:0,y:0};if(ptAnchor.x-ptPos.x==0&&ptAnchor.y-ptPos.y==0){return pt;}var dx=ptAnchor.x-ptPos.x;var dy=ptAnchor.y-ptPos.y;var len=getDistance(ptAnchor.x,ptAnchor.y,ptPos.x,ptPos.y);pt.x=dx/len;pt.y=dy/len;return pt;}if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}if(labelgap){if(labelgap>0){labelgap++ ;}}labelgap+=(linewidth/2);for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max){continue;}var angledata=chart._radarangleinfo[value];if(angledata){x=Math.floor(tick._point.hx*1000)/1000;y=Math.floor(tick._point.hy*1000)/1000;labelBoundRect=labelEle.getGlobalBoundRect(),textW=labelBoundRect.width,textH=labelBoundRect.height;var _txtHeight=(labelEle._txtSize[1]||textH),_txtWidth=(labelEle._txtSize[0]||textW);var textAlign="center";var verticalAlign="middle";if(y>centerY){verticalAlign="top";}else if(y<centerY){verticalAlign="bottom";}if(x>centerX){textAlign="left";}else if(x<centerX){textAlign="right";}if(labelEle._lines&&labelEle._lines.length>1){verticalAlign="middle";}labelEle.set_verticalAlign(verticalAlign);labelEle.set_textAlign(textAlign);startangle=angledata.halfangle*180/Math.PI;ptPos={x:x,y:y};originpoint={x:centerX,y:centerY};vPoint={x:0,y:0};vUnit=getUnitVector(ptPos,originpoint);labelEle.set_x(x);labelEle.set_y(y);if(labelgap!=0){rotateX=ptPos.x+vUnit.x*labelgap;rotateY=ptPos.y+vUnit.y*labelgap;if((0<=Number(startangle)&&Number(startangle)<90)||(360<=Number(startangle)&&Number(startangle)<450)){targetX=rotateX+labelgap;}else if((90<=Number(startangle)&&Number(startangle)<180)||(450<=Number(startangle)&&Number(startangle)<540)){targetX=rotateX+labelgap;}else if((180<=Number(startangle)&&Number(startangle)<270)||(540<=Number(startangle)&&Number(startangle)<630)){targetX=rotateX-labelgap;}else{targetX=rotateX-labelgap;}targetY=rotateY;labelEle.set_x(targetX);labelEle.set_y(targetY);}chart._setAxislabelChangeInBoardAreaPos(labelEle);}}function positionlefttop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="right";var labelBoundRect=itemText.getGlobalBoundRect(),textW=labelBoundRect.width,textH=labelBoundRect.height,_txtHeight=(itemText._txtSize[1]||textH),_txtWidth=(itemText._txtSize[0]||textW);itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncentertop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="center";itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrighttop(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="bottom";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionleftmiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="right";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncentermiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="center";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrightmiddle(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="middle";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionleftbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="right";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positioncenterbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="center";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}function positionrightbottom(itemText,cx,cy,rotate,width){var vPoint={x:0,y:0};var verticalAlign="top";var textAlign="left";itemText.set_verticalAlign(verticalAlign);itemText.set_textAlign(textAlign);var textLeft=cx;var textTop=cy-(width/2);vPoint.x=textLeft;vPoint.y=textTop;return vPoint;}};_pChartRoseCategoryAxisControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.categoryaxis){contents.categoryaxis[nm]=newVal;}};_pChartRoseCategoryAxisControl._setTransformationHelpers=function(){var chart=this.parent,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,radius=0,w=0,centerX=chart._centerLeft,centerY=chart._centerTop,s,m,range,tickmin=chart.valueaxes[0]._min,tickmax=chart.valueaxes[0]._max;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}w=radius;s=this._scale=w/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);this.p2c=function(p,y){var angledata=chart._radarangleinfo[p];if(angledata){range=(y-m)*s;return ((Math.sin(angledata.startangle)*range+centerX));}else{return centerX;}};this.p2chalf=function(p,y){var angledata=chart._radarangleinfo[p];if(angledata){if((y-m)<m){range=(y-(m/2))*s;}else{range=(y-m)*s;}return ((Math.sin(angledata.halfangle)*range+centerX));}else{return centerX;}};this.p2range=function(p,y){var angledata=chart._radarangleinfo[p];if(angledata){range=(y-m)*s;return range;}else{return radius;}};};_pChartRoseCategoryAxisControl._setupTickGeneration=function(width,height){};}if(!nexacro.ChartRoseValueAxisControl){nexacro.ChartRoseValueAxisControl=function(id,parent,graphicsControl){nexacro.ChartRadarValueAxisControl.call(this,id,parent,graphicsControl);this._direction="y";};var _pChartRoseValueAxisControl=nexacro._createPrototype(nexacro.ChartRadarValueAxisControl,nexacro.ChartRoseValueAxisControl);nexacro.ChartRoseValueAxisControl.prototype=_pChartRoseValueAxisControl;_pChartRoseValueAxisControl._type_name="ChartRoseValueAxisControl";_pChartRoseValueAxisControl.axislineindex="0";_pChartRoseValueAxisControl._axislineindex=0;_pChartRoseValueAxisControl.labelgapangle="0";_pChartRoseValueAxisControl.boardlinevisible=true;_pChartRoseValueAxisControl.destroy=function(){this._destroy(true);};_pChartRoseValueAxisControl._destroy=function(parent_clear){if(parent_clear){var axisId=this.id;if(this.parent){var index= -1;nexacro._ChartGraphicsLibArray.forEach(this.parent.valueaxes,function(axis,i){if(axis instanceof nexacro.ChartAxisControl&&axis.id==axisId){axis.parent._deleteContentsProp("valueaxes",i);index=i;}});nexacro._ChartGraphicsLibArray.removeAt(this.parent.valueaxes,index);}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){var ticktextitem;for(var j=0;j<2;j++ ){ticktextitem=ticktext[j];ticktextitem.destroy();ticktextitem=null;}ticktext=null;}var tickline=tick.lineElement;if(tickline){tickline.destroy();tickline=null;}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();tickboardline=null;}tick=null;}}this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartRoseValueAxisControl._setData=function(clientWidth,clientHeight){var changedTicks=this._changedTicks,axislinestyle=this._axislinestyle,axislineopacity=this._axislineopacity,boardlinestyle=this._boardlinestyle,boardlinevisible=this.boardlinevisible,boardlineopacity=this._boardlineopacity,boardlineWidth=0,axislineWidth=0;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();this._setTicks();this._labelGroup.clear();this._boardLineGroup.clear();if(this._axisLine){this._axisLine.clear();}}var ticks=this._ticks,tick,value,chart=this.parent,align,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"10pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth,checkmaxvalue,axisLine;this.labeltextposition="both";var labelPos=this.labeltextposition;var arrtickIDPrefix=["ChartAxisLabelX","ChartAxisLabelY"];if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedBoardLineStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._min||value>this._max){continue;}checkmaxvalue=value;if(changedTicks){axisLine=new nexacro.ChartGraphicsPaths();axisLine.set_id("ChartAxisTickBoardLine"+i);this._boardLineGroup.addChild(axisLine);tick.boardlineElement=axisLine;axisLine._axis=this;axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}else{if(this._changedBoardLineStyle){axisLine=tick.boardlineElement;if(axisLine){axisLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #d0d0d0");axisLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}}}if(changedTicks||this._changedTickLabelRotate){if(!tick.labelElement){tick.labelElement=[];}for(var k=0;k<2;k++ ){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel_"+k+"_"+i);tickLabel.set_text(tick.label);this._labelGroup.addChild(tickLabel);tick.labelElement[k]=tickLabel;tickLabel._axis=this;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");}}else{if(this._changedTickLabelStyle){for(var k=0;k<2;k++ ){tickLabel=tick.labelElement[k];tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}}}}}}if(changedTicks||this._changedTickStyle){this._axisLine.set_strokepen(axislinestyle?axislinestyle.value||axislinestyle:"1px solid #d0d0d0");this._axisLine.set_opacity(axislineopacity?axislineopacity._sysvalue:1);}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);this._labelHeight=info.height;this._labelWidth=info.width;};_pChartRoseValueAxisControl._getTickLabelAlign=function(labelrotate,index){return;};_pChartRoseValueAxisControl._arrangeTickGroup=function(){var x=0,y=0,chart=this.parent,ticks=this._ticks,tick,value,index,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,tickmin=this._min,tickmax=this._max,axisLine,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=chart.categoryaxis,range,radius,tickposition=this._axislineindex||0,categoryaxislinewidth=1,valueaxislinewidth=1,valueaxisboardlinewidth=1,angledata,valueaxis=this;var startX=centerX;var startY=centerY;var endX=centerX;var endY=centerY;var bstartline=false;var categorylength=0;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;valueaxislinewidth=(valueaxis&&valueaxis._axislinestyle)?valueaxis._axislinestyle._getBorderLeftWidth():1;valueaxisboardlinewidth=(valueaxis&&valueaxis._boardlinestyle)?valueaxis._boardlinestyle._getBorderLeftWidth():1;var polygonstartx=valueaxisboardlinewidth/8;if(chart._radarangleinfo){categorylength=chart._radarangleinfo.length;}var tickspointarr=[];if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}for(var i=0;i<ticks.length;i++ ){axisLine=ticks[i].boardlineElement;value=ticks[i].v;tickspointarr=[];if(isNaN(value)||value<tickmin||value>tickmax){continue;}for(var j=0;j<categorylength;j++ ){var _point;range=valueaxis.p2range(value,j);if(j==0){startX=categoryaxis.p2c(j,value);startY=valueaxis.p2c(value,j);axisLine.moveTo(startX,startY);angledata=chart._radarangleinfo[j];_point={"x":startX,"y":startY,"startangle":angledata.startangle,"range":range};bstartline=true;}else{endX=categoryaxis.p2c(j,value);endY=valueaxis.p2c(value,j);if(bstartline){axisLine.arcTo(new nexacro.Point(endX,endY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}angledata=chart._radarangleinfo[j];_point={"x":endX,"y":endY,"startangle":angledata.startangle,"range":range};}tickspointarr.push(_point);}if(bstartline){axisLine.arcTo(new nexacro.Point(startX,startY),new nexacro._ChartGraphicsSize(range,range),0,1,0);}ticks[i]._point=tickspointarr;}if(this._axisLine&&ticks.length>0&&categorylength>0){startX=centerX;startY=centerY;if(tickposition>categorylength-1){tickposition=0;}ticks=categoryaxis._ticks;var indextick=tickposition;value=ticks[indextick].v;endX=categoryaxis.p2c(value,this._max);endY=this.p2c(this._max,value);this._axisLine.moveTo(startX,startY);chart._centerx=startX;chart._centery=startY;this._axisLine.lineTo(endX,endY);}};_pChartRoseValueAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,chart=this.parent,tick,labelEle,labelEleItm,dX=0,textW=0,textH=0,x=0,y=0,value,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,labelrotate=this.labelrotate,location=this._location,labelgap= +this._labelgap,centerX=chart._centerLeft,centerY=chart._centerTop,categoryaxis=chart.categoryaxis,valueaxis=this,radius,startangle,range,ptPos,originpoint,vPoint={x:0,y:0},vUnit,rotateX=0,rotateY=0,targetX=0,targetY=0,tickposition=this._axislineindex||0,labelposition=this._labelposition,categoryaxislinewidth=1,valueaxislinewidth=1,labelBoundRect;categoryaxislinewidth=(categoryaxis&&categoryaxis._axislinestyle)?categoryaxis._axislinestyle._getBorderLeftWidth():1;valueaxislinewidth=this._axislinestyle?this._axislinestyle._getBorderLeftWidth():1;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}var tickpos=[0,((Math.PI*0.5)*180/Math.PI)];for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max||tick._point.length<=0){continue;}var textAlign="center";var verticalAlign="middle";if(tick._point&&tick._point.length-1<tickposition){tickposition=0;}for(var j=0;j<2;j++ ){labelEleItm=labelEle[j];if(nexacro._ChartGraphicsLib.isEmpty(labelEleItm)){continue;}range=tick._point[tickposition].range;labelEleItm.set_verticalAlign(verticalAlign);labelEleItm.set_textAlign(textAlign);labelgap=1;startangle=tickpos[j];startangle=startangle+labelgap;var radian=startangle*Math.PI/180;targetX=((Math.sin(radian)*(range)+centerX));targetY=(( -Math.cos(radian)*(range)+centerY));targetY=targetY-(valueaxislinewidth/2);labelEleItm.set_x(targetX);labelEleItm.set_y(targetY);chart._setAxislabelChangeInBoardAreaPos(labelEleItm);}}};_pChartRoseValueAxisControl._setTransformationHelpers=function(){var chart=this.parent,maxRadius=Math.min(chart._boardWidth,chart._boardHeight)/2,radius=0,h=0,centerX=chart._centerLeft,centerY=chart._centerTop,s,m,tickmin=this._min,range,tickmax=this._max;if(nexacro._ChartGraphicsLib.isEmpty(chart.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart._radius;}h=radius;s=this._scale=h/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);this.p2c=function(p,x){var angledata=chart._radarangleinfo[x];if(angledata){range=(p-m)*s;return (( -Math.cos(angledata.startangle)*range+centerY));}else{return centerY;}};this.p2chalf=function(p,x){var angledata=chart._radarangleinfo[x];if(angledata){if((p-m)<m){range=(p-(m/2))*s;}else{range=(p-m)*s;}return (( -Math.cos(angledata.halfangle)*range+centerY));}else{return centerY;}};this.p2range=function(p,x,effect){var angledata=chart._radarangleinfo[x];if(angledata){if(effect&&effect.isloadanimation){range=(p-m)*s;}else{if((p-m)<m){range=(p-(m/2))*s;}else{range=(p-m)*s;}}range=(p-m)*s;return range;}else{return radius;}};};}if(!nexacro.ChartRoseSeriesControl){nexacro.ChartRoseSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this._clickItemIndex=[];this._clickShow=false;};var _pChartRoseSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartRoseSeriesControl);nexacro.ChartRoseSeriesControl.prototype=_pChartRoseSeriesControl;_pChartRoseSeriesControl._type_name="ChartRoseSeriesControl";_pChartRoseSeriesControl.visible=true;_pChartRoseSeriesControl.lineopacity=1;_pChartRoseSeriesControl.linestyle="";_pChartRoseSeriesControl.highlightlinestyle="";_pChartRoseSeriesControl.highlightlineopacity=1;_pChartRoseSeriesControl.highlightfillstyle="";_pChartRoseSeriesControl.fillstyle="";_pChartRoseSeriesControl.roseopacity=1;_pChartRoseSeriesControl._roseopacity=null;_pChartRoseSeriesControl.highlightvisible=false;_pChartRoseSeriesControl.highlightopacity=1;_pChartRoseSeriesControl._highlightopacity=null;_pChartRoseSeriesControl.lineitemtextposition="";_pChartRoseSeriesControl._pointshape=null;_pChartRoseSeriesControl._pointborderwidth=null;_pChartRoseSeriesControl._lineborderwidth=null;_pChartRoseSeriesControl._linebordercolor=null;_pChartRoseSeriesControl._highlightfillstyle=null;_pChartRoseSeriesControl._fillstyle=null;_pChartRoseSeriesControl._highlightlinestyle=null;_pChartRoseSeriesControl._color=null;_pChartRoseSeriesControl._changedSeriesColor=true;_pChartRoseSeriesControl.destroy=function(){if(!this._chart){return;}if(this._seriesitems.length>0){for(var i=0;i<this._seriesitems.length;i++ ){if(this._seriesitems[i]){if(this._seriesitems[i]._series){delete this._seriesitems[i]._series;this._seriesitems[i]._series=null;}this._seriesitems[i].destroy();delete this._seriesitems[i];this._seriesitems[i]=null;}}}this.visible=true;this.highlightfillstyle=null;this.fillstyle=null;this.highlightlinestyle=null;this._highlightfillstyle=null;this._fillstyle=null;this._highlightlinestyle=null;this.lineopacity=null;this.linestyle=null;this.highlightlinestyle=null;this.highlightlineopacity=null;this.roseopacity=null;this._roseopacity=null;this.highlightvisible=null;this.highlightopacity=null;this._highlightopacity=null;this.pointitemtextposition=null;this.lineitemtextposition=null;this._pointshape=null;this._pointborderwidth=null;this._lineborderwidth=null;this._linebordercolor=null;this._color=null;this._changedSeriesColor=null;return true;};_pChartRoseSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartRoseSeriesControl.on_apply_visible=function(visible){if(this._is_initprop){return;}if(visible){var selecttype=this.selecttype;if(selecttype){this._chart._changedData=true;}else{this._redrawSeries=false;this._applyPropertySeries("visible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._redrawSeries=false;this._applyPropertySeries("visible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}if(this._chart.legend){this._chart._applyLegendItem();}};_pChartRoseSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;this._linebordercolor=linestyle.color.value;}this._redrawSeries=false;this._applyPropertySeries("Line","linestyle",linestyle);};_pChartRoseSeriesControl.set_lineopacity=function(val){this.lineopacity=val;if(0===val||val){if(this._lineopacity==null||this._lineopacity.value!=val){var oldValue;if(this._lineopacity){oldValue=this._lineopacity.value;}this._changeContentsProperty("lineopacity",val,oldValue);var lineopacity=nexacro.OpacityObject(val);this._lineopacity=lineopacity;this.on_apply_lineopacity(lineopacity);}}else{if(this._lineopacity){this._lineopacity=null;this.on_apply_lineopacity(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_lineopacity=function(lineopacity){this._redrawSeries=false;this._applyPropertySeries("Line","lineopacity",lineopacity);};_pChartRoseSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartRoseSeriesControl.set_highlightlineopacity=function(val){this.highlightlineopacity=val;if(0===val||val){if(this._highlightlineopacity==null||this._highlightlineopacity.value!=val){var oldValue;if(this._highlightlineopacity){oldValue=this._highlightlineopacity.value;}this._changeContentsProperty("highlightlineopacity",val,oldValue);var highlightlineopacity=nexacro.OpacityObject(val);this._highlightpointopacity=highlightlineopacity;this.on_apply_highlightlineopacity(highlightlineopacity);}}else{if(this._highlightpointopacity){this._highlightpointopacity=null;this.on_apply_highlightlineopacity(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_highlightlineopacity=function(highlightlineopacity){};_pChartRoseSeriesControl.set_fillstyle=function(val){this.fillstyle=val;if(val){if(this._fillstyle==null||this._fillstyle.value!=val){var oldValue;if(this._fillstyle){oldValue=this._fillstyle.value;}this._changeContentsProperty("fillstyle",val,oldValue);var fillstyle=val;var arrColorList=this._spliterColor(val,true);if(!arrColorList){}else if(arrColorList.length==1){fillstyle=arrColorList[0];}else{fillstyle=arrColorList;}this._fillstyle=fillstyle;this.on_apply_fillstyle(fillstyle);}}else{if(this._fillstyle){this._fillstyle=null;this.on_apply_fillstyle(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_fillstyle=function(fillstyle){this._redrawSeries=false;this._applyPropertySeries("Area","fillstyle",fillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartRoseSeriesControl.set_highlightfillstyle=function(val){this.highlightfillstyle=val;if(val){if(this._highlightfillstyle==null||this._highlightfillstyle.value!=val){var oldValue;if(this._highlightfillstyle){oldValue=this._highlightfillstyle.value;}this._changeContentsProperty("highlightfillstyle",val,oldValue);var highlightfillstyle=val;var arrColorList=this._spliterColor(val,true);if(!arrColorList){}else if(arrColorList.length==1){highlightfillstyle=arrColorList[0];}else{highlightfillstyle=arrColorList;}this._highlightfillstyle=highlightfillstyle;this.on_apply_highlightfillstyle(highlightfillstyle);}}else{if(this._highlightfillstyle){this._highlightfillstyle=null;this.on_apply_highlightfillstyle(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_highlightfillstyle=function(highlightfillstyle){this._redrawSeries=false;this._applyPropertySeries("Area","highlightfillstyle",highlightfillstyle);};_pChartRoseSeriesControl.set_roseopacity=function(val){this.roseopacity=val;if(0===val||val){if(this._roseopacity==null||this._roseopacity.value!=val){var oldValue;if(this._roseopacity){oldValue=this._roseopacity.value;}this._changeContentsProperty("roseopacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._roseopacity=opacity;this.on_apply_roseopacity(opacity);}}else{if(this.roseopacity){this._roseopacity=null;this.on_apply_roseopacity(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_roseopacity=function(opacity){this._applyPropertySeries("Area","roseopacity",opacity);};_pChartRoseSeriesControl.set_highlightvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightvisible!=val){this._changeContentsProperty("highlightvisible",val,this.highlightvisible);this.highlightvisible=val;this.on_apply_highlightvisible(val);}this._chart._draw();};_pChartRoseSeriesControl.on_apply_highlightvisible=function(highlightvisible){};_pChartRoseSeriesControl.set_highlightopacity=function(val){this.highlightopacity=val;if(0===val||val){if(this._highlightopacity==null||this._highlightopacity.value!=val){var oldValue;if(this._highlightopacity){oldValue=this._highlightopacity.value;}this._changeContentsProperty("highlightopacity",val,oldValue);var highlightopacity=nexacro.OpacityObject(val);this._highlightopacity=highlightopacity;this.on_apply_highlightopacity(highlightopacity);}}else{if(this._highlightopacity){this._highlightopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartRoseSeriesControl.on_apply_highlightopacity=function(highlightopacity){};_pChartRoseSeriesControl.set_lineitemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.lineitemtextgap!=val){this._changeContentsProperty("lineitemtextgap",val,this.lineitemtextgap);this.lineitemtextgap=val;this.on_apply_lineitemtextgap();}};_pChartRoseSeriesControl.on_apply_lineitemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartRoseSeriesControl.set_pointitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.pointitemtextposition!=val){this._changeContentsProperty("pointitemtextposition",val,this.pointitemtextposition);this.pointitemtextposition=val;this.on_apply_pointitemtextposition();}this._chart._draw();};_pChartRoseSeriesControl.on_apply_pointitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartRoseSeriesControl.set_lineitemtextposition=function(val){var itemtextposition_enum=["lefttop","centertop","righttop","leftmiddle","centermiddle","rightmiddle","leftbottom","centerbottom","rightbottom"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.lineitemtextposition!=val){this._changeContentsProperty("lineitemtextposition",val,this.lineitemtextposition);this.lineitemtextposition=val;this.on_apply_lineitemtextposition();}this._chart._draw();};_pChartRoseSeriesControl.on_apply_lineitemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartRoseSeriesControl._applyPropertySeries=function(type,style,value,select){var item=null,seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){var itemID=this._configIndex+" SeriesRoseItem_"+(i-1),isselectitem=false;item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){if(style=="fillstyle"){item.set_fillstyle(value);}else if(style=="linestyle"){item.set_strokepen(value);}else if(style=="roseopacity"||style=="lineopacity"||style=="highlightopacity"){item.set_opacity(value);}}}}};_pChartRoseSeriesControl._draw2=function(redraw){if(!redraw){return;}this._itemCnt=0;this._itemtextlist=[];if(this.visible){this._drawSeriesLines();}};_pChartRoseSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartRoseSeriesControl._drawnow=function(){if(this.visible){this._drawSeriesLines();}};_pChartRoseSeriesControl._drawSeriesLines=function(){var linestyle=this.linestyle||"1px solid "+this._color,categoryaxis=this._chart.categoryaxis,valueaxis=this._chart.valueaxes[0],path,area,datapoints=this._datapoints,seriesGroup=this._chart._seriesGroup,effect=this._chart_aniframe_obj,length=0;path=this._drawRose(datapoints,0,0,categoryaxis,valueaxis);var itemtextvisible=this.itemtextvisible,pointvisible=this.pointvisible;if(itemtextvisible){if(path){if(effect&&effect.isloadanimation){}else{this._drawRoseItemText(datapoints,categoryaxis,valueaxis,path);}}}};_pChartRoseSeriesControl._drawHighlight=function(item){var highlightlinestyle=this._highlightlinestyle||"1px solid "+this._chart._highlightcolorset[0],highlightfillstyle=this._highlightfillstyle,highlightopacity=this.highlightopacity,slice,highlightPathData,highlightGroup=this._chart._highlightGroup;if(item){highlightPathData=item._pathdata;if(highlightPathData){slice=new nexacro.ChartGraphicsPath();slice.setPathData(highlightPathData);slice.set_id("SeriesHighlightRoseItem");slice.set_strokepen(highlightlinestyle);if(highlightfillstyle){if(highlightfillstyle instanceof Array){var fillstyle_sv=highlightfillstyle[item.index%highlightfillstyle.length];slice.set_fillstyle(fillstyle_sv);}else{slice.set_fillstyle(highlightfillstyle);}}slice.set_strokejoin("round");if(highlightopacity){slice.set_opacity(highlightopacity);}slice.set_strokepen(highlightlinestyle);highlightGroup.addChild(slice);item._highlight=slice;slice._item=item;slice._series=this;}}};_pChartRoseSeriesControl._showRoseHighlight=function(item){if(!this.highlightvisible){return;}if(!item||(item.id.search("RoseItem")<0)){return;}var highlight=item._highlight;if(!highlight){this._drawHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartRoseSeriesControl._hideRoseHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(highlight&&!nexacro._ChartGraphicsLib.isEmpty(highlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(highlight);highlight.destroy();delete item._highlight;this._chart._graphicsControl.draw();}};_pChartRoseSeriesControl._drawRose=function(datapoints,xoffset,yoffset,categoryaxis,valueaxis){var points=datapoints.points.slice(0),ps=datapoints.pointsize,path,effect=this._chart_aniframe_obj,seriesid,seriesGroup=this._chart._seriesGroup;xoffset+= -this._chart._boardRectLeft;yoffset+= -this._chart._boardRectTop;var centerX=this._chart._centerLeft,centerY=this._chart._centerTop;centerX+=xoffset;centerY+=yoffset;if(points.length<=0){return;}if(effect&&effect.isloadanimation){points=this._getanimationdrawvalue(points);}else{}var index= -1;var pathData,la,p0,p1,p2,p3,range;var angleitem;var valueaxis=this._chart.valueaxes[0];var preSeries,preDatapoint,prePoints,innerw;if(this._configIndex>0){preSeries=this._chart.seriesset[this._configIndex-1];preDatapoint=preSeries._datapoints;prePoints=preDatapoint.points.slice(0);if(effect&&effect.isloadanimation){prePoints=this._getanimationdrawvalue(prePoints);}}var startangle,endangle;var fillstyle=this._fillstyle;var linestyle=this._linestyle;var opacity=this.roseopacity;for(var i=0;i<points.length;i+=ps){var x1,y1,x2,y2;index++ ;if(!points[i+1]){continue;}seriesId=this._configIndex+" SeriesRoseItem_"+index;path=seriesGroup.getObjectByID(seriesId);if(!path){path=new nexacro.ChartGraphicsPaths();path.set_id(seriesId);seriesGroup.addChild(path);}angleitem=points[i+2];startangle=angleitem.startanglerose;endangle=angleitem.endanglerose;if(preSeries){range=valueaxis.p2range(points[i+1]+prePoints[i+1],index,effect);}else{range=valueaxis.p2range(points[i+1],index,effect);}p0=(Math.sin(startangle)*range+centerX)+" "+( -Math.cos(startangle)*range+centerY);p1=(Math.sin(endangle)*range+centerX)+" "+( -Math.cos(endangle)*range+centerY);if(preSeries){la=" 0";pathData="M"+p0+" A"+range+" "+range+" 1"+la+" 1 "+p1;innerw=valueaxis.p2range(prePoints[i+1],index,effect);p2=(Math.sin(startangle)*innerw+centerX)+" "+( -Math.cos(startangle)*innerw+centerY);p3=(Math.sin(endangle)*innerw+centerX)+" "+( -Math.cos(endangle)*innerw+centerY);pathData+=" L"+p3+" A"+innerw+" "+innerw+" 1"+la+" 0 "+p2+" Z";}else{la=" 0";pathData="M"+p0+" A"+range+" "+range+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+" Z";}path.setPathData(pathData);if(fillstyle instanceof Array){var fillstyle_sv=fillstyle[index%fillstyle.length];path.set_fillstyle(fillstyle_sv);}else{if(fillstyle){path.set_fillstyle(fillstyle);}else{path.set_fillstyle(nexacro._ChartColorset.color20[this._configIndex]);}}if(linestyle&&linestyle!=""){path.set_strokepen(linestyle);}if(opacity!==null&&opacity!==undefined&&opacity!==""){path.set_opacity(opacity);}path.set_strokejoin("round");path._pathdata=pathData;path._series=this;path.index=index;path.value=points[i+1];this._itemCnt++ ;}return path;};_pChartRoseSeriesControl._drawRoseItemText=function(datapoints,axisx,axisy,item){var points=datapoints.points,xoffset=0,yoffset=0,ps=datapoints.pointsize;var itemtextPosition=this.lineitemtextposition,itemtextGap=this.lineitemtextgap;var rotateaxis=this._chart.rotateaxis;xoffset+= -this._chart._boardRectLeft;yoffset+= -this._chart._boardRectTop;function positionlefttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop-itemtextGap);}function positioncentertop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrighttop(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("bottom");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop-itemtextGap);}function positionleftmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop);}function positioncentermiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop-itemtextGap);}function positionrightmiddle(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop);}function positionleftbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("right");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft-itemtextGap);itemText.set_y(textTop+itemtextGap);}function positioncenterbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("center");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft);itemText.set_y(textTop+itemtextGap);}function positionrightbottom(itemText,cx,cy,itemtextGap,width){itemText.set_verticalAlign("top");itemText.set_textAlign("left");var textLeft=cx;var textTop=cy-(width/2);if(!itemtextGap){itemtextGap=0;}itemText.set_x(textLeft+itemtextGap);itemText.set_y(textTop+itemtextGap);}var valueaxis=this._chart.valueaxes[0];var preSeries,preDatapoint,prePoints,innerw;if(this._configIndex>0){preSeries=this._chart.seriesset[this._configIndex-1];preDatapoint=preSeries._datapoints;prePoints=preDatapoint.points.slice(0);}var startangle,endangle;for(var i=0;i<points.length;i+=ps){var itemindex=points[i],preitemindex=points[i+ps],value=points[i+1],point=[],linetype=this.linetype,itemText;item.index=itemindex;item.value=value;itemText=this._createSeriesItemText(item);if(!nexacro._isNull(itemText)){var textRect=null,textWidth=0,textHeight=0,textLeft=0,textTop=0,cx=0,cy=0,width=this._lineborderwidth,seriesGroup=this._chart._seriesGroup;if(preSeries){cx=axisx.p2chalf(itemindex,value+prePoints[i+1])+xoffset;cy=axisy.p2chalf(value+prePoints[i+1],itemindex)+yoffset;}else{cx=axisx.p2chalf(itemindex,value)+xoffset;cy=axisy.p2chalf(value,itemindex)+yoffset;}if(itemtextPosition){switch(itemtextPosition){case "lefttop":positionlefttop(itemText,cx,cy,itemtextGap,width);break;case "centertop":positioncentertop(itemText,cx,cy,itemtextGap,width);break;case "righttop":positionrighttop(itemText,cx,cy,itemtextGap,width);break;case "leftmiddle":positionleftmiddle(itemText,cx,cy,itemtextGap,width);break;case "centermiddle":positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;case "rightmiddle":positionrightmiddle(itemText,cx,cy,itemtextGap,width);break;case "leftbottom":positionleftbottom(itemText,cx,cy,itemtextGap,width);break;case "centerbottom":positioncenterbottom(itemText,cx,cy,itemtextGap,width);break;case "rightbottom":positionrightbottom(itemText,cx,cy,itemtextGap,width);break;default:positioncentermiddle(itemText,cx,cy,itemtextGap,width);break;}}else{positioncentermiddle(itemText,cx,cy,itemtextGap,width);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;this._itemCnt++ ;this._seriesitems[itemindex]=itemText;}}};_pChartRoseSeriesControl._setItemData=function(){var data=this._data,itemdata;if(data){itemdata=this._processItemData(data);}return itemdata;};_pChartRoseSeriesControl._setItemColor=function(items){var colorcnt=0;var colorset=this._chart._colorset;var item;for(var i=0;i<items.length;i++ ){item=items[i];if(item._isShow&&item.value){var itemColor=colorset[colorcnt];if(itemColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){itemColor=colorset[colorcnt];colorcnt++ ;}items[i].color=itemColor;var slice=items[i]._slice;if(slice){slice.set_fillstyle(itemColor);}}}};_pChartRoseSeriesControl._processItemData=function(data){var length=data.length,slice=[],i=0,total=0;if(length<=2){return slice;}for(i=0;i<length;i++ ){var angleItems={};if(data[i]!=null&&data[i][0]!=undefined){angleItems.index=i;slice.push(angleItems);}}var items=slice;var checkangleval=10;for(i=0;i<items.length; ++i){total+=checkangleval;}var startangle=0;var percent=0;var angle=0;var endangle=Math.PI*2;angle=checkangleval*endangle/total;percent=(checkangleval/(total/100)).toFixed(2);var angle_ea=angle;var rosesize=this._chart.rosesize*0.01;if(rosesize<1){angle_ea=angle*((1-rosesize)/2);}for(i=0;i<items.length; ++i){items[i].startangle=0;items[i].angle=angle;items[i].startangle=startangle;items[i].startanglerose=(startangle+angle_ea);startangle+=angle;items[i].endangle=startangle;items[i].endanglerose=(startangle-angle_ea);items[i].halfangle=items[i].startangle+((items[i].endangle-items[i].startangle)/2);items[i].percent=nexacro.toNumber(percent);}return items;};_pChartRoseSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};_pChartRoseSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;var width,style,color;if(changedColorset){var linevisible=this._linestyle,linestyle;if(this.fillstyle){this.set_fillstyle(this.fillstyle);}else{this.set_fillstyle(colorset);}}};_pChartRoseSeriesControl.on_apply_itemtextfont=function(itemtextfont){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&this._itemCnt>0){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_font(itemtextfont?itemtextfont.value||itemtextfont:"6pt Verdana");}}}};}
if(!nexacro.GaugeChart){nexacro.GaugeChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._ChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");this.valueaxes=[];this.indicator=null;};var _pGaugeChart=nexacro._createPrototype(nexacro._ChartBase,nexacro.GaugeChart);nexacro.GaugeChart.prototype=_pGaugeChart;_pGaugeChart._type_name="GaugeChart";_pGaugeChart.categorycolumn="";_pGaugeChart.gaugetype="vertical";_pGaugeChart.valueaxes=null;_pGaugeChart.indicator=null;_pGaugeChart._boardWidth=0;_pGaugeChart._boardHeight=0;_pGaugeChart._centerLeft=0;_pGaugeChart._centerTop=0;_pGaugeChart._barWidth=0;_pGaugeChart._gaugeradius=0;_pGaugeChart._gaugeinnerradius=0;_pGaugeChart.indicator=null;_pGaugeChart._invalidcategorycolumn=false;_pGaugeChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._ChartBase.prototype.on_create_contents.call(this);}};_pGaugeChart.on_destroy_contents=function(){this.categorycolumn=null;this.gaugetype=null;this.valueaxes=null;this._boardWidth=null;this._boardHeight=null;this._centerLeft=null;this._centerTop=null;this._barWidth=null;this._gaugeradius=null;this._gaugeinnerradius=null;this.indicator=null;this._invalidcategorycolumn=null;nexacro._ChartBase.prototype.on_destroy_contents.call(this);return true;};_pGaugeChart.set_valueaxes=function(){};_pGaugeChart.set_gaugetype=function(val){var type_enum=["circular","vertical","horizontal"];if(type_enum.indexOf(val)== -1){return;}if(this.gaugetype!=val){this.gaugetype=val;this.on_apply_gaugetype();this._draw();}};_pGaugeChart.on_apply_gaugetype=function(type){this._changedData=true;if(this.valueaxes&&this.valueaxes[0]){this.valueaxes[0].on_apply_opposite(this.valueaxes[0].opposite);}};_pGaugeChart.set_categorycolumn=function(v){if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}this._draw();};_pGaugeChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pGaugeChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var visible=s._orgVisible;s._orgVisible=undefined;if(visible){s.set_visible(true);}}};_pGaugeChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgVisible===undefined||s._orgVisible===null){s._orgVisible=s.visible;}s.set_visible(false);}};_pGaugeChart.showIndicator=function(){if(this.indicator){this.indicator.set_visible(true);}this._draw();};_pGaugeChart.hideIndicator=function(){if(this.indicator){this.indicator.set_visible(false);}this._draw();};_pGaugeChart.getValueaxisByID=function(id){var index=nexacro._ChartGraphicsLibArray.indexOfProp(this.valueaxes,"id",id);if(index> -1){return this.valueaxes[index];}return null;};_pGaugeChart.showValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis!=this.valueaxes[0]){return;}if(axis){axis.set_visible(true);}this._draw();};_pGaugeChart.hideValueaxis=function(id){var axis=this.getValueaxisByID(id);if(axis!=this.valueaxes[0]){return;}if(axis){axis.set_visible(false);}this._draw();};_pGaugeChart._destroySubControl=function(){nexacro._ChartBase.prototype._destroySubControl.call(this);if(this.valueaxes&&this.valueaxes.length>0){this.deleteAllValueaxes();}if(this.indicator){this.indicator.destroy();this.indicator=null;}};_pGaugeChart.deleteAllValueaxes=function(){var length=this.valueaxes.length,valueaxis;for(var i=0;i<length;i++ ){var index=length-i-1;valueaxis=this.valueaxes[index];if(valueaxis){this.deleteValueaxis(valueaxis.id);}}if(length>0){this._rearrange=true;}this._draw();return length;};_pGaugeChart.deleteValueaxis=function(val){var ret=false;if(typeof (val)=="string"){var axis=this.getValueaxisByID(val);if(axis){var index=nexacro._ChartGraphicsLibArray.indexOf(this.valueaxes,axis);if(index> -1){this._deleteAxis(axis,index);ret=true;}}}if(ret){this._changedData=true;}this._draw();return ret;};_pGaugeChart._measure=function(){nexacro._ChartBase.prototype._measure.call(this);if(this._recreate){this._initAxes();this._setDatapointFormat();this._setDatapoint();this._setDataMinMax();this._resetAxes();}this._setAxes();};_pGaugeChart._initAxes=function(){var axis=this.valueaxes[0];if(axis){axis._initData();}};_pGaugeChart._resetAxes=function(){var axis=this.valueaxes[0];if(axis){axis._resetData();}};_pGaugeChart._setDatapointFormat=function(){var series=this.seriesset;var s;for(var i=0;i<series.length;i++ ){s=series[i];if(s){if(nexacro._isNull(s._data)){break;}this._initSeriesDatapoints(s);this._setSeriesDatapointsFormat(s);}}this._getVisibleSeries();};_pGaugeChart._getVisibleSeries=function(){var length=this.seriesset.length,visible=false,visibleSeriesset=[];for(var i=0;i<length;i++ ){var series=this.seriesset[i];if(series){var data=series._data;if(data){if(data.length<=2){continue;}}visible=series.visible;if(visible){visibleSeriesset.push(series);}}}this._visibleSeriesset=visibleSeriesset;};_pGaugeChart._setDatapoint=function(){var seriesset=this.seriesset,s,valueaxis;for(var i=0;i<seriesset.length;i++ ){s=seriesset[i];if(s){var data=s._data;if(nexacro._isNull(data)){break;}if(s._datapoints.pointsize!=null){continue;}if(!s._datapoints.format){continue;}this._setSeriesDatapoints(s);valueaxis=s.axis;if(s.visible){valueaxis._used=true;}}}};_pGaugeChart._setSeriesDatapoints=function(series){var datapoints,format,pointsize,points,data,p,val,f;datapoints=series._datapoints;format=datapoints.format;datapoints.pointsize=format.length;pointsize=datapoints.pointsize;points=datapoints.points;data=series._data;var i=0,j=0;i=this._rowposition;{p=data[i];var nullify=p==null;if(!nullify){for(var k=0;k<pointsize;k++ ){val=p[k];f=format[k];if(f){if(f.category==false&&val!=null){val= +val;if(isNaN(val)){val=null;}else if(val==Infinity){val=Number.MAX_VALUE;}else if(val== -Infinity){val= -Number.MAX_VALUE;}}if(val==null&&p.length>k){if(f.defaultValue!=null){val=f.defaultValue;}else{val=null;}}}points[j+k]=val;}}}};_pGaugeChart._initSeriesDatapoints=function(series){series._datapoints={points:[]};};_pGaugeChart._setSeriesDatapointsFormat=function(series){var format=series._datapoints.format;if(!format){format=[];format.push({x:true,category:false,required:true});format.push({y:true,category:false,required:true,defaultvalue:null});if(series.visible){format.push({category:false,required:true});}series._datapoints.format=format;}};_pGaugeChart._setDataMinMax=function(){var series=this.seriesset;for(var i=0;i<series.length;i++ ){var s=series[i],data;if(s){data=s._data;if(nexacro._isNull(data)){s._redrawSeries=false;break;}this._setSeriesDataMinMax(s);}}};_pGaugeChart._setSeriesDataMinMax=function(series){var datapoints=series._datapoints,min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY,points,pointsize,val,f,valueaxis=this.valueaxes[0],format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){continue;}for(var j=0;j<pointsize;j++ ){val=points[i+j];f=format[j];if(!f||val==Number.MAX_VALUE||val== -Number.MAX_VALUE){continue;}if(f.x){if(val<min){min=val;}if(val>max){max=val;}}if(f.y){if(val<min){min=val;}if(val>max){max=val;}}}}if(valueaxis){val=points[1];if(valueaxis._tickmin){min=valueaxis._tickmin;}else{if(val>0){min=0;}else if(val<0){min=val;}}if(valueaxis._tickmax){max=valueaxis._tickmax;}else{if(val>0){max=val;}else if(val<0){max=0;}}if(valueaxis._updateMinMax){valueaxis._updateMinMax(min,max);}}};_pGaugeChart._setAxes=function(){var valueaxis=this.valueaxes[0],clientWidth=this._getClientWidth(),clientHeight=this._getClientHeight(),changedData=this._changedData;if(valueaxis){if(!valueaxis._used){return;}if(changedData){valueaxis._changedTicks=true;}valueaxis._setData(clientWidth,clientHeight);if(this._reset==true){this._reset=false;}}};_pGaugeChart._arrange=function(){nexacro._ChartBase.prototype._arrange.call(this);if(this._rearrange){this._arrangeBoard();}this._arrangeAxes();var s=this.seriesset[0];if(s){s._rearrangeProcessItemData();}this._arrangeSeries();};_pGaugeChart._arrangeAxesRect=function(){var valueaxis=this.valueaxes;var axes=valueaxis;if(axes){var boardRect=this._boardRect,axis,axisRect,axisRectLeft=0,axisRectTop=0,gap=0;for(var i=axes.length-1;i>=0; --i){axis=axes[i];if(axis){if(!axis._used){axis.on_apply_visible(false);axis.on_apply_boardlinevisible(false);continue;}axisRect=axis._axisRect._getRect(false,true);gap=axis.gap||0;if(axis._direction=="x"){if(axis._location=="top"){axisRectTop=boardRect.top;boardRect.set_top(boardRect.top+axisRect.height+gap);boardRect.set_height(boardRect.height-gap-axisRect.height);}else{boardRect.set_top(boardRect.top);boardRect.set_height(boardRect.height-gap-axisRect.height);axisRectTop=boardRect.bottom+gap;}axis._axisRect.set_y(axisRectTop);}else{if(axis._location=="left"){axisRectLeft=boardRect.left;boardRect.set_left(boardRect.left+axisRect.width+gap);boardRect.set_width(boardRect.width-gap-axisRect.width);}else{boardRect.set_left(boardRect.left);boardRect.set_width(boardRect.width-gap-axisRect.width);axisRectLeft=boardRect.left+boardRect.width+gap;}axis._axisRect.set_x(axisRectLeft);}}}}};_pGaugeChart._arrangeAxes=function(){if(this.valueaxes[0]){var boardRect=this._boardRect,boardBorderSize=this._boardBorderSize,boardBorderWidth=this._boardBorderWidth,boardBorderHeight=this._boardBorderHeight,boardspacing=this._boardspacing||this._nullspacing,left=0,top=0,width=0,height=0,rearrange=this._rearrange,valueaxis=this.valueaxes[0],axissize=valueaxis._axissize,axisLine=valueaxis._axisLine,axislinestyle=valueaxis._axislinestyle,axislinewidth=0;if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;axislinewidth*=0.5;}var tickendspace=0;if(valueaxis){tickendspace=valueaxis._tickendspace;}if(this.gaugetype=="circular"){if(rearrange||valueaxis._rearrange||valueaxis._rearrangeTitle){left=this._boardRectLeft;top=this._boardRectTop;width=this._boardWidth;height=this._boardHeight;valueaxis._processItemData(valueaxis._ticks);valueaxis._arrange(left,top,width,height);}}else{var rotateaxis=this.gaugetype=="horizontal"?true:false;if(!rotateaxis){left=boardRect.left+boardBorderSize.left+boardspacing.left+valueaxis._tickstartgap;width=axislinewidth;top=boardRect.top+boardBorderSize.top+boardspacing.top;height=boardRect.height-boardBorderHeight;}else{left=boardRect.left+boardBorderSize.left+boardspacing.left;width=boardRect.width-boardBorderWidth;top=boardRect.top+boardBorderSize.top+boardspacing.top+valueaxis._tickstartgap;height=axislinewidth;}if(rearrange){if(valueaxis._direction=="y"){width=width-tickendspace;valueaxis._axisRect.set_x(left);valueaxis._axisRect.set_width(width);valueaxis._axisRect.set_y(top);valueaxis._axisRect.set_height(height);}else if(valueaxis._direction=="x"){top=top+tickendspace;height=height-tickendspace;valueaxis._axisRect.set_x(left);valueaxis._axisRect.set_height(height);valueaxis._axisRect.set_y(top);valueaxis._axisRect.set_width(width);}valueaxis._setTransformationHelpers(width,height);}if(rearrange||valueaxis._rearrange){if(axissize){axissize.x=left;axissize.y=top;axissize.width=width;axissize.height=height;}valueaxis._arrange(left,top,width,height);}}}};_pGaugeChart._arrangeSeries=function(){var seriesset=this.seriesset;var useanimation=false;var starttimestamp=null;var loadanimation=false;if(seriesset){var seriesLength=seriesset.length,rearrange=this._rearrange,recreate=this._recreate;if(rearrange||recreate){if(this.contents!=null){this._setSeriesGroup();}}if(seriesLength>0){if(!nexacro._isNull(this._seriesGroup)){if(rearrange){this._seriesGroup.setTransform("translate("+this._boardRectLeft+","+this._boardRectTop+")");this._highlightGroup.setTransform("translate("+this._boardRectLeft+","+this._boardRectTop+")");var axis=this.valueaxes[0];if(axis){var axissize=axis._axissize;var location=axis._location;var top=this._boardRectTop;var left=this._boardRectLeft;var gap=axis.gap?axis.gap:0;var boardhalfwidth=0;var barwidth=0;if(location=="top"){boardhalfwidth=this._boardRect.height/2;barwidth=this._barWidth=boardhalfwidth-axissize.height;top=boardhalfwidth-((barwidth+axissize.height)/2);top+=(axissize.height-gap);top-=3;left=0;}else if(location=="bottom"){boardhalfwidth=this._boardRect.height/2;barwidth=this._barWidth=boardhalfwidth-axissize.height;top=boardhalfwidth-((barwidth+axissize.height)/2);top+=(barwidth+gap);left=0;}else if(location=="left"){top=0;boardhalfwidth=this._boardRect.width/2;barwidth=this._barWidth=boardhalfwidth-axissize.width;left=boardhalfwidth-((barwidth+axissize.width)/2);left+=(axissize.width-gap-3);}else if(location=="right"){top=0;boardhalfwidth=this._boardRect.width/2;barwidth=this._barWidth=boardhalfwidth-axissize.width;left=boardhalfwidth-((barwidth+axissize.width)/2);left+=(barwidth+gap+1);}else{top-=this._boardRectTop;left-=this._boardRectLeft;}axis._group.setTransform("translate("+left+","+top+")");}}}}if((this._runanimation||(this.enableanimation&&(rearrange||recreate)))&&!this._ani_exception&&!nexacro.isDesignMode&&!this._iscontents_editor){if(this._loadanimation==true){useanimation=true;starttimestamp= +new Date();}}var i;var series;var effect;for(i=0;i<seriesLength;i++ ){series=seriesset[i];if(series){var redrawSeries=series._redrawSeries;if(rearrange||recreate){redrawSeries=true;}if(useanimation&&series._chart_aniframe_obj){effect=series._chart_aniframe_obj;effect.enableanimation=useanimation;effect.starttime=starttimestamp;}series._draw(redrawSeries);}}for(i=0;i<seriesLength;i++ ){series=seriesset[i];if(series){effect=series._chart_aniframe_obj;if(effect.isloadanimation){loadanimation=true;}}}if(loadanimation){if(!this._isanimationloading){this._isanimationloading=true;}}}};_pGaugeChart._createSeriesset=function(o,id){if(!this._seriesGroup){return false;}var seriesset=this.seriesset,series,seriesLength= -1;if(seriesset){seriesLength=seriesset.length;if(seriesLength>0){return;}}var s=seriesset[0],seriesId;if(s){seriesId=s.id;if(seriesId==id){throw nexacro.MakeNativeError(this,"native_exist_id",seriesId);}}series=this._appendSeries(o);return series;};_pGaugeChart._createSeries=function(contents,id){var series=new nexacro.ChartGaugeSeriesControl(id,this,this._graphicsControl);return series;};_pGaugeChart._setSeries=function(){var colorset=this._colorset;var highlightcolorset=this._highlightcolorset;var selectcolorset=this._selectcolorset;var colorcnt=0;var valueaxis;var items;nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){if(obj){if(this._changedData){obj._setData();if(nexacro._isNull(obj._data)){return false;}items=obj._setItemData();this._seriesitems=items;this._changedColorset=true;}if(this._changedColorset||obj._changedSeriesColor){if(nexacro._isString(colorset)){obj._setDefault(colorset);}else{var seriesColor=colorset[colorcnt];var highlightColor=highlightcolorset[colorcnt];var selectColor=selectcolorset[colorcnt];if(seriesColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){seriesColor=colorset[colorcnt];colorcnt++ ;}obj._setDefault(seriesColor,highlightColor,selectColor);}obj._changedSeriesColor=false;}valueaxis=this.valueaxes[0];if(valueaxis){valueaxis._afterSetProperties();valueaxis.on_apply_visible(valueaxis.visible);}if(!valueaxis){return false;}obj.axis=valueaxis;}},this);};_pGaugeChart._getHighlightVisible=function(){var series=this.seriesset,length=series.length,highlightbarvisible=false;for(var i=0;i<length;i++ ){var s=series[i];if(s.highlightbarvisible){highlightbarvisible=true;break;}}return highlightbarvisible;};_pGaugeChart._showSeriesItem=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=true;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pGaugeChart._hideSeriesItem=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=false;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pGaugeChart._createValueaxes=function(o,id){if(this.valueaxes.length>0){return null;}var valueaxis;valueaxis=new nexacro.ChartGaugeValueAxisControl(id,this,this._graphicsControl);valueaxis._type_name="ChartGaugeValueAxisControl";valueaxis._type="valueAxis";var opposite=o.opposite||valueaxis.opposite;valueaxis.on_apply_opposite(opposite);this.valueaxes.push(valueaxis);return valueaxis;};_pGaugeChart._deleteValueaxes=function(){var valueaxis=this.valueaxis;if(valueaxis){this._deleteAxis(valueaxis);this._changedData=true;}};_pGaugeChart._deleteAxis=function(axis,index){if(this.valueaxes.length>0){this._deleteContentsProp("valueaxes",index);nexacro._ChartGraphicsLibArray.remove(this.valueaxes,axis);}axis._destroy(false);};_pGaugeChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pGaugeChart._createIndicator=function(o,id){if(!this.indicator){this.indicator=new nexacro.ChartGaugeIndicatorControl(id||"ChartGaugeIndicatorControl",this,this._graphicsControl);}return this.indicator;};_pGaugeChart._GetSeriesItemFromIndex=function(index){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i];if(i==index){return item;}}}};_pGaugeChart._GetSeriesItemIndexFromSlice=function(_slice){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i];var itemslice=item._slice;if(itemslice){if(_slice==itemslice){return i;}else if(itemslice.highlightbarvisible==true){if(itemslice._highlight){if(itemslice._highlight==_slice){return i;}}}else if(s.valuelineblurangle!=undefined&&s.valuelineblurangle!=null){if(item._sliceborder){if(item._sliceborder==_slice){return i;}}}}}}};}if(!nexacro.ChartGaugeSeriesControl){nexacro.ChartGaugeSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this._clickItemIndex=[];};var _pChartGaugeSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartGaugeSeriesControl);nexacro.ChartGaugeSeriesControl.prototype=_pChartGaugeSeriesControl;_pChartGaugeSeriesControl._type_name="ChartGaugeSeriesControl";_pChartGaugeSeriesControl.highlightbarfillstyle="";_pChartGaugeSeriesControl.highlightbarlinestyle="";_pChartGaugeSeriesControl.highlightbaropacity=1;_pChartGaugeSeriesControl.highlightbarvisible=false;_pChartGaugeSeriesControl.fillstyle="";_pChartGaugeSeriesControl.linestyle="";_pChartGaugeSeriesControl.opacity=0.5;_pChartGaugeSeriesControl.barfillstyle="";_pChartGaugeSeriesControl.barlinestyle="";_pChartGaugeSeriesControl.baropacity=1;_pChartGaugeSeriesControl.boardouterstyle="";_pChartGaugeSeriesControl.boardinnerstyle="";_pChartGaugeSeriesControl.boardouterlinestyle="";_pChartGaugeSeriesControl._boardouterstyle="";_pChartGaugeSeriesControl._boardinnerstyle="";_pChartGaugeSeriesControl._boardouterlinestyle="";_pChartGaugeSeriesControl.userrange=null;_pChartGaugeSeriesControl._userrange=null;_pChartGaugeSeriesControl.userrangeinnerradius=80;_pChartGaugeSeriesControl.userrangeradius=95;_pChartGaugeSeriesControl.selectbarfillstyle="";_pChartGaugeSeriesControl.selectbarlinestyle="";_pChartGaugeSeriesControl.selectbaropacity=1;_pChartGaugeSeriesControl.visible=true;_pChartGaugeSeriesControl.itemtextposition="";_pChartGaugeSeriesControl.itemtextgap=undefined;_pChartGaugeSeriesControl.barsize=80;_pChartGaugeSeriesControl.radius=undefined;_pChartGaugeSeriesControl.innerradius=undefined;_pChartGaugeSeriesControl.startangle=undefined;_pChartGaugeSeriesControl.endangle=undefined;_pChartGaugeSeriesControl._startangle=0;_pChartGaugeSeriesControl._endangle=6.28319;_pChartGaugeSeriesControl._barsize=0.8;_pChartGaugeSeriesControl._itemtextgap_h=0;_pChartGaugeSeriesControl._itemtextgap_v=0;_pChartGaugeSeriesControl._gaugerect=null;_pChartGaugeSeriesControl._radius=0.8;_pChartGaugeSeriesControl._innerradius=0;_pChartGaugeSeriesControl._borderwidth=1;_pChartGaugeSeriesControl._barborderwidth=1;_pChartGaugeSeriesControl.destroy=function(){if(!this._chart){return;}if(this._seriesitems.length>0){for(var i=0;i<this._seriesitems.length;i++ ){if(this._seriesitems[i]){if(this._seriesitems[i]._series){delete this._seriesitems[i]._series;this._seriesitems[i]._series=null;}this._seriesitems[i].destroy();delete this._seriesitems[i];this._seriesitems[i]=null;}}}this._seriesitems=null;this._clickItemIndex=null;this._pointshape=null;this._pointborderwidth=null;this._lineborderwidth=null;this._linebordercolor=null;this._color=null;this._changedSeriesColor=null;this.highlightbarfillstyle=null;this.highlightbarlinestyle=null;this.highlightbaropacity=null;this.highlightbarvisible=null;this.boardouterstyle=null;this.boardinnerstyle=null;this.boardouterlinestyle=null;this._boardouterstyle=null;this._boardinnerstyle=null;this._boardouterlinestyle=null;this.userrange=null;this._userrange=null;this.userrangeinnerradius=null;this.userrangeradius=null;this.fillstyle=null;this.linestyle=null;this.opacity=null;this.barfillstyle=null;this.barlinestyle=null;this.baropacity=null;this.selectbarfillstyle=null;this.selectbarlinestyle=null;this.selectbaropacity=null;this.visible=null;this.itemtextposition=null;this.itemtextgap=null;this.barsize=null;this.radius=null;this.innerradius=null;this.startangle=null;this.endangle=null;this._barsize=null;this._itemtextgap_h=null;this._itemtextgap_v=null;this._gaugerect=null;this._radius=null;this._innerradius=null;this._borderwidth=null;this._barborderwidth=null;return true;};_pChartGaugeSeriesControl.set_highlightbarfillstyle=function(val){this.highlightbarfillstyle=val;if(val){if(this._highlightbarfillstyle==null||this._highlightbarfillstyle.value!=val){var oldValue;if(this._highlightbarfillstyle){oldValue=this._highlightbarfillstyle.value;}this._changeContentsProperty("highlightbarfillstyle",val,oldValue);var highlightbarfillstyle=nexacro.BackgroundObject(val,this);this._highlightbarfillstyle=highlightbarfillstyle;this.on_apply_highlightbarfillstyle(highlightbarfillstyle);}}else{if(this._highlightbarfillstyle){this._highlightbarfillstyle=null;this.on_apply_highlightbarfillstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_highlightbarfillstyle=function(highlightbarfillstyle){};_pChartGaugeSeriesControl.set_highlightbarlinestyle=function(val){this.highlightbarlinestyle=val;if(val){if(this._highlightbarlinestyle==null||this._highlightbarlinestyle.value!=val){var oldValue;if(this._highlightbarlinestyle){oldValue=this._highlightbarlinestyle.value;}this._changeContentsProperty("highlightbarlinestyle",val,oldValue);var highlightbarlinestyle=nexacro.BorderLineObject(val);this._highlightbarlinestyle=highlightbarlinestyle;this.on_apply_highlightbarlinestyle(highlightbarlinestyle);}}else{if(this._highlightbarlinestyle){this._highlightbarlinestyle=null;this.on_apply_highlightbarlinestyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_highlightbarlinestyle=function(){};_pChartGaugeSeriesControl.set_highlightbaropacity=function(val){this.highlightbaropacity=val;if(val===0||val){if(this._highlightbaropacity==null||this._highlightbaropacity.value!=val){var oldValue;if(this._highlightbaropacity){oldValue=this._highlightbaropacity.value;}this._changeContentsProperty("highlightbaropacity",val,oldValue);var highlightbaropacity=nexacro.OpacityObject(val);this._highlightbaropacity=highlightbaropacity;this.on_apply_highlightbaropacity(highlightbaropacity);}}else{if(this._highlightbaropacity){this._highlightbaropacity=null;this.on_apply_highlightbaropacity(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_highlightbaropacity=function(highlightbaropacity){};_pChartGaugeSeriesControl.set_highlightbarvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightbarvisible!=val){this._changeContentsProperty("highlightbarvisible",val,this.highlightbarvisible);this.highlightbarvisible=val;this.on_apply_highlightbarvisible(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_highlightbarvisible=function(highlightbarvisible){};_pChartGaugeSeriesControl.set_fillstyle=function(val){this.fillstyle=val;if(val){if(this._fillstyle==null||this._fillstyle.value!=val){var oldValue;if(this._fillstyle){oldValue=this._fillstyle.value;}this._changeContentsProperty("fillstyle",val,oldValue);var fillstyle=nexacro.BackgroundObject(val,this);this._fillstyle=fillstyle;this.on_apply_fillstyle(fillstyle);}}else{if(this._fillstyle){this._fillstyle=null;this.on_apply_fillstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_fillstyle=function(fillstyle){this._redrawSeries=false;this._applyPropertySeries("fillstyle",fillstyle);};_pChartGaugeSeriesControl.set_barfillstyle=function(val){this.barfillstyle=val;if(val){if(this._barfillstyle==null||this._barfillstyle.value!=val){var oldValue;if(this._barfillstyle){oldValue=this._barfillstyle.value;}this._changeContentsProperty("barfillstyle",val,oldValue);var barfillstyle=nexacro.BackgroundObject(val,this);this._barfillstyle=barfillstyle;this.on_apply_barfillstyle(barfillstyle);}}else{if(this._barfillstyle){this._barfillstyle=null;this.on_apply_barfillstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_barfillstyle=function(barfillstyle){this._redrawSeries=false;this._applyPropertySeries("barfillstyle",barfillstyle,"Bar");if(this._chart.legend){this._chart._applyLegendItem();}};_pChartGaugeSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;}else{this._borderwidth=1;}this._redrawSeries=false;this._applyPropertySeries("linestyle",linestyle);};_pChartGaugeSeriesControl.set_barlinestyle=function(val){this.barlinestyle=val;if(val){if(this._barlinestyle==null||this._barlinestyle.value!=val){var oldValue;if(this._barlinestyle){oldValue=this._barlinestyle.value;}this._changeContentsProperty("barlinestyle",val,oldValue);var barlinestyle=nexacro.BorderLineObject(val);this._barlinestyle=barlinestyle;this.on_apply_barlinestyle(barlinestyle);}}else{if(this._barlinestyle){this._barlinestyle=null;this.on_apply_barlinestyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_barlinestyle=function(barlinestyle){if(barlinestyle){this._barborderwidth=barlinestyle._width;}else{this._barborderwidth=1;}this._redrawSeries=false;this._applyPropertySeries("barlinestyle",barlinestyle,"Bar");};_pChartGaugeSeriesControl.set_boardouterstyle=function(val){this.boardouterstyle=val;if(val){if(this._boardouterstyle==null||this._boardouterstyle.value!=val){var oldValue;if(this._boardouterstyle){oldValue=this._boardouterstyle.value;}this._changeContentsProperty("boardouterstyle",val,oldValue);var boardouterstyle=nexacro.BorderLineObject(val);this._boardouterstyle=boardouterstyle;this.on_apply_boardouterstyle(boardouterstyle);}}else{if(this._boardouterstyle){this._boardouterstyle=null;this.on_apply_boardouterstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_boardouterstyle=function(boardouterstyle){this._redrawSeries=false;this._applyPropertySeries("boardouterstyle",boardouterstyle,"Bar");};_pChartGaugeSeriesControl.set_boardinnerstyle=function(val){this.boardinnerstyle=val;if(val){if(this._boardinnerstyle==null||this._boardinnerstyle.value!=val){var oldValue;if(this._boardinnerstyle){oldValue=this._boardinnerstyle.value;}this._changeContentsProperty("boardinnerstyle",val,oldValue);var boardinnerstyle=nexacro.BorderLineObject(val);this._boardinnerstyle=boardinnerstyle;this.on_apply_boardinnerstyle(boardinnerstyle);}}else{if(this._boardinnerstyle){this._boardinnerstyle=null;this.on_apply_boardinnerstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_boardinnerstyle=function(boardinnerstyle){this._redrawSeries=false;this._applyPropertySeries("boardinnerstyle",boardinnerstyle,"Bar");};_pChartGaugeSeriesControl.set_boardouterlinestyle=function(val){this.boardouterlinestyle=val;if(val){if(this._boardouterlinestyle==null||this._boardouterlinestyle.value!=val){var oldValue;if(this._boardouterlinestyle){oldValue=this._boardouterlinestyle.value;}this._changeContentsProperty("boardouterlinestyle",val,oldValue);var boardouterlinestyle=nexacro.BorderLineObject(val);this._boardouterlinestyle=boardouterlinestyle;this.on_apply_boardouterlinestyle(boardouterlinestyle);}}else{if(this._boardouterlinestyle){this._boardouterlinestyle=null;this.on_apply_boardouterlinestyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_boardouterlinestyle=function(boardouterlinestyle){this._redrawSeries=false;this._applyPropertySeries("boardouterlinestyle",boardouterlinestyle,"Bar");};_pChartGaugeSeriesControl.set_userrange=function(val){if(val==""){val=null;}if(val){var oldValue=this.userrange;this.userrange=val=val.toString();var oVal;var newval=nexacro.replaceAll(val,"'","\"");var svVal='{ "userval" : ['+newval+'] }';try{var oJsn=JSON.parse(svVal);oVal=oJsn.userval;if(oVal[0].length==0){oVal=null;}oJsn=null;}catch(e){oVal=null;}this._changeContentsProperty("userrange",val,oldValue);this._userrange=oVal;this.on_apply_userrange(oVal);}else{this._userrange=null;this.on_apply_userrange(null);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_userrange=function(oVal){this._redrawSeries=false;};_pChartGaugeSeriesControl.set_userrangeinnerradius=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(IVal<0||IVal>100){return;}if(this.userrangeinnerradius!=val){this._changeContentsProperty("userrangeinnerradius",val,this.userrangeinnerradius);this.userrangeinnerradius=val;this.on_apply_userrangeinnerradius(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_userrangeinnerradius=function(innerradius){this._redrawSeries=false;this._applyPropertySeries("userrangeinnerradius",innerradius);};_pChartGaugeSeriesControl.set_userrangeradius=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(val<0||val>100){return;}if(this.userrangeradius!=val){this._changeContentsProperty("userrangeradius",val,this.userrangeradius);this.userrangeradius=val;this.on_apply_userrangeradius(IVal);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_userrangeradius=function(innerradius){this._redrawSeries=false;this._applyPropertySeries("userrangeradius",innerradius);};_pChartGaugeSeriesControl.set_opacity=function(val){this.opacity=val;if(val===0||val){if(this._opacity==null||this._opacity.value){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_opacity=function(opacity){this._redrawSeries=false;this._applyPropertySeries("opacity",opacity);};_pChartGaugeSeriesControl.set_baropacity=function(val){this.baropacity=val;if(val===0||val){if(this._baropacity==null||this._baropacity.value){var oldValue;if(this._baropacity){oldValue=this._baropacity.value;}this._changeContentsProperty("baropacity",val,oldValue);var baropacity=nexacro.OpacityObject(val);this._baropacity=baropacity;this.on_apply_baropacity(baropacity);}}else{if(this._baropacity){this._baropacity=null;this.on_apply_baropacity(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_baropacity=function(baropacity){this._redrawSeries=false;this._applyPropertySeries("baropacity",baropacity,"Bar");};_pChartGaugeSeriesControl.set_selectbarfillstyle=function(val){this.selectbarfillstyle=val;if(val){if(this._selectbarfillstyle==null||this._selectbarfillstyle.value!=val){var oldValue;if(this._selectbarfillstyle){oldValue=this._selectbarfillstyle.value;}this._changeContentsProperty("selectbarfillstyle",val,oldValue);var selectbarfillstyle=nexacro.BackgroundObject(val,this);this._selectbarfillstyle=selectbarfillstyle;this.on_apply_selectbarfillstyle(selectbarfillstyle);}}else{if(this._selectbarfillstyle){this._selectbarfillstyle=null;this.on_apply_selectbarfillstyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_selectbarfillstyle=function(selectbarfillstyle){this._redrawSeries=false;this._applyPropertySeries("selectbarfillstyle",selectbarfillstyle,"Bar");};_pChartGaugeSeriesControl.set_selectbarlinestyle=function(val){this.selectbarlinestyle=val;if(val){if(this._selectbarlinestyle==null||this._selectlinestyle.value!=val){var oldValue;if(this._selectbarlinestyle){oldValue=this._selectbarlinestyle.value;}this._changeContentsProperty("selectbarlinestyle",val,oldValue);var selectbarlinestyle=nexacro.BorderLineObject(val);this._selectbarlinestyle=selectbarlinestyle;this.on_apply_selectbarlinestyle(selectbarlinestyle);}}else{if(this._selectbarlinestyle){this._selectbarlinestyle=null;this.on_apply_selectbarlinestyle(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_selectbarlinestyle=function(selectbarlinestyle){this._redrawSeries=false;this._applyPropertySeries("selectbarlinestyle",selectbarlinestyle,"Bar");};_pChartGaugeSeriesControl.set_selectbaropacity=function(val){this.selectbaropacity=val;if(val===0||val){if(this._selectbaropacity==null||this._selectbaropacity.value!=val){var oldValue;if(this._selectbaropacity){oldValue=this._selectbaropacity.value;}this._changeContentsProperty("selectbaropacity",val,oldValue);var selectbaropacity=nexacro.OpacityObject(val);this._selectbaropacity=selectbaropacity;this.on_apply_selectbaropacity(selectbaropacity);}}else{if(this._selectbaropacity){this._selectbaropacity=null;this.on_apply_selectopacity(null);}}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_selectbaropacity=function(selectbaropacity){this._redrawSeries=false;this._applyPropertySeries("selectbaropacity",selectbaropacity,"Bar");};_pChartGaugeSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_visible=function(visible){if(visible){this._applyPropertySeries("visible",true);if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._applyPropertySeries("visible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}this._chart._seriesGroup.set_visible(visible);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartGaugeSeriesControl.set_itemtextposition=function(val){var itemtextposition_enum=["start","middle","end","gaugecenter"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.itemtextposition!=val){this._changeContentsProperty("itemtextposition",val,this.itemtextposition);this.itemtextposition=val;this.on_apply_itemtextposition();}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_itemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartGaugeSeriesControl.set_barsize=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!=""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(IVal<0||IVal>100){return;}if(this.barsize!=val){this._changeContentsProperty("barsize",val,this.barsize);this.barsize=val;this.on_apply_barsize(IVal);}this._chart._reset=true;this._chart._draw();};_pChartGaugeSeriesControl.on_apply_barsize=function(barsize){if(!nexacro._ChartGraphicsLib.isEmpty(barsize)){this._barsize=this.barsize*0.01;}else{this._barsize=1;}this._chart._changedData=true;};_pChartGaugeSeriesControl.set_itemtextgap=function(val){if(this.itemtextgap!=val){this._changeContentsProperty("itemtextgap",val,this.itemtextgap);this.itemtextgap=val;this.on_apply_itemtextgap(val);}this._chart._reset=true;this._chart._draw();};_pChartGaugeSeriesControl.on_apply_itemtextgap=function(itemtextgap){if(itemtextgap){if(typeof (itemtextgap)=="number"){this._itemtext_h=this._itemtext_v=itemtextgap;}else{itemtextgap=itemtextgap.split(" ");this._itemtextgap_h= +itemtextgap[0];this._itemtextgap_v=(itemtextgap[1])? +itemtextgap[1]: +itemtextgap[0];}this._chart._changedData=true;}};_pChartGaugeSeriesControl.set_radius=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(IVal<0||IVal>100){return;}if(this.radius!=val){this._changeContentsProperty("radius",val,this.radius);this.radius=val;this.on_apply_radius(IVal);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_radius=function(radius){if(!nexacro._ChartGraphicsLib.isEmpty(radius)){this._radius=radius*0.01;}this._chart._changedData=true;this._chart._recreate=true;};_pChartGaugeSeriesControl.set_innerradius=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(val<0||val>100){return;}if(this.innerradius!=val){this._changeContentsProperty("innerradius",val,this.innerradius);this.innerradius=val;this.on_apply_innerradius(IVal);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_innerradius=function(innerradius){if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)){this._innerradius=innerradius*0.01;}if(this._chart.valueaxes[0]&&this._chart.valueaxes[0]._location=="inside"){this._chart.valueaxes[0]._location="outside";}this._chart._changedData=true;this._chart._recreate=true;};_pChartGaugeSeriesControl.set_startangle=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.startangle!=val){this._changeContentsProperty("startangle",val,this.startangle);this.startangle=val;this.on_apply_startangle(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_startangle=function(startangle){if(startangle>360){startangle=0;}var radian;radian=startangle*Math.PI/180;this._startangle=radian;if(this.endangle){this.on_apply_endangle(this.endangle);}this._chart._changedData=true;};_pChartGaugeSeriesControl.set_endangle=function(val){if(val!==undefined){if(isNaN(val= +val)||val<0){return;}}if(this.endangle!=val){this._changeContentsProperty("endangle",val,this.endangle);this.endangle=val;this.on_apply_endangle(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_endangle=function(endangle){var startangle=this.startangle||0;if(endangle>360){endangle=360;}endangle=startangle+endangle;if(endangle>360){endangle=endangle-360;}var radian;radian=endangle*Math.PI/180;this._endangle=radian;this._chart._changedData=true;};_pChartGaugeSeriesControl.set_valueaxis=function(val){if(this.valueaxis!=val){this._changeContentsProperty("valueaxis",val,this.valueaxis);this.valueaxis=val;this.on_apply_valueaxis(val);}this._chart._draw();};_pChartGaugeSeriesControl.on_apply_valueaxis=function(valueaxisid){var valueaxis=this.parent.getValueaxisByID(valueaxisid);if(valueaxis){valueaxis._used=true;valueaxis._afterSetProperties();var usedxAxis=false;var usedyAxis=false;if(this._chart.seriesset){var seriesset=this._chart.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]&&seriesset[i].id!=this.id){if((seriesset[i]._yaxis&&this._yaxis&&seriesset[i]._yaxis.id==this._yaxis.id)&&!usedyAxis){usedyAxis=true;}if((seriesset[i]._xaxis&&this._xaxis&&seriesset[i]._xaxis.id==this._xaxis.id)&&!usedxAxis){usedxAxis=true;}}}}if(this._xaxis&&this._xaxis.id!=valueaxis.id&&!usedxAxis){if(this._xaxis._type!="categoryAxis"){this._xaxis._used=false;this._xaxis.on_apply_visible(false);}}if(this._yaxis&&this._yaxis.id!=valueaxis.id&&!usedyAxis){if(this._yaxis._type!="categoryAxis"){this._yaxis._used=false;this._yaxis.on_apply_visible(false);}}if(valueaxis._direction=="x"){if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._xaxis=valueaxis;}}else{if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._yaxis=valueaxis;}}this._chart._changedData=true;}};_pChartGaugeSeriesControl._setItemData=function(){var data=this._data,itemdata;if(data){itemdata=this._processItemData(data);}return itemdata;};_pChartGaugeSeriesControl._processItemData=function(data){var slice=[],total=0,i=0,value;i=this.parent._rowposition;{var seriesItems={};var showFlag=true;if(data[i]!=null&&data[i][0]!=undefined){if(!this._clickShow&&(this._clickItemIndex.length>0)){for(var j=0;j<this._clickItemIndex.length;j++ ){var index=this._clickItemIndex[j];if(i==index){showFlag=false;}}}if(!showFlag){seriesItems._isShow=false;}else{seriesItems._isShow=true;}seriesItems.index=i;this.set_titletext(data[i][0]);seriesItems.category=data[i][0];seriesItems.value=parseFloat(data[i][1])||0;slice.push(seriesItems);}}this._seriesitems=slice;var items=this._seriesitems;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){var percent=0;var angle=0;var endangle=this._endangle||Math.PI*2;value=items[i].value;angle=value*endangle/total;percent=(value/(total/100)).toFixed(2);items[i].angle=angle;items[i].percent=nexacro.toNumber(percent);}return items;};_pChartGaugeSeriesControl._applyPropertySeries=function(style,value,type){var item,seriesGroup,itemID,effect=this._chart_aniframe_obj,isselectitem=false;seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){if(type===undefined){type="";}itemID=this._configIndex+" Series"+type+"GaugeItem_"+(i-1);item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){var length=this._selectedItem.length;if(length>0){isselectitem=this._selectedItem[i-1];}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){if(style=="selectbarlinestyle"){item.set_strokepen(value);}else if(style=="selectbarfillstyle"){item.set_fillstyle(value);}else if(style=="selectbaropacity"){item.set_opacity(value);}}else{if(style=="visible"){item.set_visible(value);}else if(style=="linestyle"||style=="barlinestyle"||style=="boardinnerstyle"||style=="boardouterlinestyle"||style=="boardouterstyle"){item.set_strokepen(value);}else if(style=="fillstyle"||style=="barfillstyle"){item.set_fillstyle(value);}else if(style=="opacity"||style=="baropacity"){item.set_opacity(value);}}}}}};_pChartGaugeSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{if(this._chart.indicator){this._chart.indicator._clear();}this._drawnow();}};_pChartGaugeSeriesControl._drawnow=function(redraw){this._drawSeriesGauge();};_pChartGaugeSeriesControl._drawSeriesGauge=function(){var items=this._seriesitems,isNullData=false,board=this._chart._boardRect,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight,effect=this._chart_aniframe_obj,itemtextvisible=this.itemtextvisible;if(!items){return false;}if(board){this._chart._boardWidth=board.width-borderWidth;this._chart._boardHeight=board.height-borderHeight;this._chart._centerLeft=this._chart._boardWidth/2;this._chart._centerTop=this._chart._boardHeight/2;}for(var i=0;i<items.length;i++ ){var item=items[i];if(item&&item._isShow){var value=item.value;if(value===undefined||value===null){isNullData=true;break;}}}if(items.length<=0||isNullData){return;}if(this._chart.gaugetype=="circular"){this._itemCnt=0;this._itemtextlist=[];this._drawCircle();}else{this._drawSeriesBar();}if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawLabels();}}};_pChartGaugeSeriesControl._drawCircle=function(){var chart=this._chart,rEndAngle=this._endangle||6.28319,rStartAngle=this._startangle||0,rHighlightStartAngle,rHighlightEndAngle=0,boardborderWidth=this._chart._boardBorderWidth?this._chart._boardBorderWidth:0,boardborderHeight=this._chart._boardBorderHeight?this._chart._boardBorderHeight:0,maxRadius=Math.min((this._chart._boardWidth-(boardborderWidth*2)),(this._chart._boardHeight-(boardborderHeight*2)))/2,radius=0,innerradius=0,gaugeradius=0,gaugeinnerradius,total=0,fillstyle=this.fillstyle||this._color,linestyle=this.linestyle||"1px solid "+this._color,opacity=this.opacity||0.5,barfillstyle=this.barfillstyle||this._color,barlinestyle=this.barlinestyle||"1px solid "+this._color,baropacity=this.baropacity||1,selectlinestyle=this.selectlinestyle||this._chart._selectcolorset[0],selectfillstyle=this.selectfillstyle||this._chart._selectcolorset[0],selectopacity=this.selectopacity||this.opacity,selectedallItem=this._selectedItem,selectedItem=[],isselectitem=false,allitems=this._seriesitems.slice(0),items=[],innerw,innerh,seriesGroup=chart._seriesGroup,slice,itemId,currentAngle=this._startangle||0,drawitemCnt=0,effect=this._chart_aniframe_obj,i=0,selectlength;var linewidth=this._linestyle?this._linestyle._width:1;maxRadius-=(chart.valueaxes[0]?chart.valueaxes[0]._allaxisgapsize:0);if(maxRadius<=0){return;}if(nexacro._ChartGraphicsLib.isEmpty(this.radius)){radius=maxRadius*0.8;}else{radius=maxRadius*this._radius;}radius-=linewidth;if(nexacro._ChartGraphicsLib.isEmpty(this.innerradius)==false){innerradius=maxRadius*this._innerradius;}innerradius-=linewidth;if(innerradius!=0&&this._radius>this._innerradius){gaugeradius=radius-((radius-innerradius)*(1-this._barsize)/2);gaugeinnerradius=innerradius+((radius-innerradius)*(1-this._barsize)/2);this._chart._gaugeradius=gaugeradius;this._chart._gaugeinnerradius=gaugeinnerradius;}else if(innerradius<=0){gaugeradius=radius*this._barsize;gaugeinnerradius=0;this._chart._gaugeradius=gaugeradius;this._chart._gaugeinnerradius=gaugeinnerradius;}if(radius<=innerradius){innerradius=0;}for(i in allitems){if(allitems[i]._isShow){total+=allitems[i].value;}}for(i=0;i<allitems.length;i++ ){selectlength=selectedItem.length;if(selectlength>0){isselectitem=selectedItem[i];}var valuedata=allitems[i].value;if(valuedata&&allitems[i]._isShow){selectlength=selectedallItem.length;if(selectlength>0){selectedItem.push(selectedallItem[i]);}items.push(allitems[i]);}this._itemCnt++ ;}function drawCircleGauge(pThis,i){if(items[i]._isShow){var angle=items[i].angle;var drawvalue=items[i].value;if(effect&&effect.isloadanimation){drawvalue=pThis._getanimationdrawvalue(drawvalue);}rEndAngle=pThis._calcValueradian(drawvalue,rStartAngle,rEndAngle);var startAngle=Math.round(rStartAngle*180/Math.PI),endAngle=Math.round(rEndAngle*180/Math.PI),rMiddleAngle=rEndAngle,bEllipse=false,w=gaugeradius,h=gaugeradius,p0,p1,p2,p3,pM0,pM1,la,pathData,index=0,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop;items[i].startAngle=startAngle;items[i].endAngle=endAngle;items[i].angle=angle;items[i].rStartAngle=rStartAngle;items[i].rEndAngle=rEndAngle;if(rStartAngle==rEndAngle||Math.floor((rStartAngle*180/Math.PI))==0&&Math.floor((rEndAngle*180/Math.PI))>=360||Math.floor((rStartAngle*180/Math.PI))>=360&&Math.floor((rEndAngle*180/Math.PI))==0){bEllipse=true;if(startAngle==0){rMiddleAngle=rEndAngle/2;}else{if(rStartAngle>(6.28319/2)){rMiddleAngle=rStartAngle-3.141595;}else{rMiddleAngle=rStartAngle+3.141595;}}}if(drawitemCnt==0){currentAngle=4.71238898038469;}else{currentAngle+=items[drawitemCnt-1].angle;}if(bEllipse){p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";if(!nexacro._ChartGraphicsLib.isEmpty(gaugeinnerradius)&&gaugeinnerradius>0){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 1"+la+" 1 "+p1;innerw=innerh=gaugeinnerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);pM1=(Math.sin(rMiddleAngle)*innerw+centerX)+" "+( -Math.cos(rMiddleAngle)*innerh+centerY);pathData+=" L"+p3;pathData+=" A"+innerw+" "+innerh+" 1"+la+" 0 "+pM1;pathData+=" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";}}else{p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);la=Math.abs(pThis._valangle)>180?" 1":" 0";if(!nexacro._ChartGraphicsLib.isEmpty(gaugeinnerradius)&&gaugeinnerradius>0){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;innerw=innerh=gaugeinnerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+"Z";}}if(pThis._chart.indicator){pThis._chart.indicator._drawindicator(null,null,rEndAngle,0);}items[i].pathData=pathData;index=i+1;itemId=pThis._configIndex+" SeriesCircleGaugeItem_"+index;slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.setPathData(pathData);slice._seriesItem=items[i];slice._series=pThis;items[i]._slice=slice;if(pThis.highlightbarvisible){slice.highlightPathData=pathData;slice.highlightbarvisible=true;}if(effect&&effect.isloadanimation){isselectitem=false;}if(isselectitem){if(nexacro._isNull(selectfillstyle)){selectfillstyle=items[i].color;}slice.set_strokepen(selectlinestyle);slice.set_fillstyle(selectfillstyle);slice.set_opacity(selectopacity);}else{slice.set_strokepen(barlinestyle?barlinestyle.value||barlinestyle:"1px solid #717a8380");slice.set_fillstyle(barfillstyle);slice.set_opacity(baropacity);}slice.set_strokejoin("round");slice._series=pThis;}}function drawCircle(pThis,i){if(items[i]._isShow){var angle=items[i].angle;var startAngle=Math.round(rStartAngle*180/Math.PI),endAngle=Math.round(rEndAngle*180/Math.PI),rMiddleAngle=rEndAngle,bEllipse=false,w=radius,h=radius,p0,p1,p2,p3,pM0,pM1,la,pathData,index=0,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop;items[i].startAngle=startAngle;items[i].endAngle=endAngle;items[i].angle=angle;if(pThis.endangle==360||pThis.endangle===undefined){bEllipse=true;if(startAngle==0){rMiddleAngle=rEndAngle/2;}else{if(rStartAngle>(6.28319/2)){rMiddleAngle=rStartAngle-3.141595;}else{rMiddleAngle=rStartAngle+3.141595;}}}if(drawitemCnt==0){currentAngle=4.71238898038469;}else{currentAngle+=items[drawitemCnt-1].angle;}if(bEllipse){p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)&&innerradius>0){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 1"+la+" 1 "+p1;innerw=innerh=innerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);pM1=(Math.sin(rMiddleAngle)*innerw+centerX)+" "+( -Math.cos(rMiddleAngle)*innerh+centerY);pathData+=" L"+p3;pathData+=" A"+innerw+" "+innerh+" 1"+la+" 0 "+pM1;pathData+=" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";}}else{p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);la=Math.abs(pThis.endangle)>180?" 1":" 0";if(!nexacro._ChartGraphicsLib.isEmpty(innerradius)&&innerradius>0){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;innerw=innerh=innerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+"Z";}}items[i].pathData=pathData;index=i+1;itemId=pThis._configIndex+" SeriesCircleItem_"+index;slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.set_id(itemId);slice._seriesItem=items[i];items[i]._slice=slice;slice.setPathData(pathData);slice.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");slice.set_fillstyle(fillstyle);slice.set_opacity(opacity);slice.set_strokejoin("round");}}function drawColorBand(pThis,i,ii,colRange,svradius,svinnerradius){var bEllipse=false;var rStartAngle;var rEndAngle;var rMiddleAngle;if(colRange[0]==colRange[1]){bEllipse=true;rStartAngle=0;rEndAngle=360*Math.PI/180;rMiddleAngle=rEndAngle/2;svinnerradius=0;}else{var ticks=chart.valueaxes[0]._ticks;var s1=0;var e1=0;for(var cnt=0;cnt<ticks.length;cnt++ ){if(ticks[cnt].v==colRange[0]){s1=cnt;}if(ticks[cnt].v==colRange[1]){e1=cnt;break;}}rStartAngle=ticks[s1].axisangleitems.startangle;rEndAngle=ticks[e1].axisangleitems.startangle;rMiddleAngle=rEndAngle;}var fillstyle=nexacro.BackgroundObject(colRange[2],pThis);if(items[i]._isShow){var w=svradius,h=svradius,p0,p1,p2,p3,pM0,la,pathData,index=0,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop;if(bEllipse==false){p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);p1=(Math.sin(rEndAngle)*w+centerX)+" "+( -Math.cos(rEndAngle)*h+centerY);if(rEndAngle<rStartAngle){la=" 1";}else{la=" 0";}if(svinnerradius<50&&la==" 1"){la=" 0";}if(!nexacro._ChartGraphicsLib.isEmpty(svinnerradius)&&svinnerradius>0){pathData="M"+p0+" A"+w+" "+h+" 1"+la+" 1 "+p1;innerw=innerh=svinnerradius;p2=(Math.sin(rStartAngle)*innerw+centerX)+" "+( -Math.cos(rStartAngle)*innerh+centerY);p3=(Math.sin(rEndAngle)*innerw+centerX)+" "+( -Math.cos(rEndAngle)*innerh+centerY);pathData+=" L"+p3+" A"+innerw+" "+innerh+" 1"+la+" 0 "+p2+" Z";}else{pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+p1+" L"+centerX+" "+centerY+"Z";}}else{p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+=" Z";}index=ii+1;itemId=pThis._configIndex+" SeriesCircleColorItem_"+index;slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.set_id(itemId);slice.setPathData(pathData);slice.set_fillstyle(fillstyle);slice.set_opacity(opacity);slice.set_strokejoin("round");}}function drawBoard(pThis){var outerstyle=pThis._boardouterstyle;var innerstyle=pThis._boardinnerstyle;var outerline=pThis._boardouterlinestyle;var rStartAngle=0;var rEndAngle=6.28319;var svradius=maxRadius;var useBoard=false;var rMiddleAngle,w,h,w1=svradius,p0,pM0,la,pathData,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop;rMiddleAngle=rEndAngle/2;if(outerstyle&&outerstyle.value){useBoard=true;w=h=(w1-parseInt(outerstyle._width/2.0));if(outerline&&outerline.value){w=h=(w-parseInt(outerline._width/2.0));}p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";itemId=pThis._configIndex+" SeriesBoardItem_1";slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.set_id(itemId);slice.setPathData(pathData);slice.set_strokepen(outerstyle);slice.set_strokejoin("round");}if(innerstyle&&innerstyle.value){useBoard=true;w=w1;if(outerline&&outerline.value){w=(w-outerline._width);}if(outerstyle&&outerstyle.value){w=(w-outerstyle._width);}w=(w-parseInt(innerstyle._width/2.0));h=w;p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";itemId=pThis._configIndex+" SeriesBoardItem_2";slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.set_id(itemId);slice.setPathData(pathData);slice.set_strokepen(innerstyle);slice.set_strokejoin("round");}if(outerline&&outerline.value){w=h=(w1-parseInt(outerline._width/2.0));p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";itemId=pThis._configIndex+" SeriesBoardItem_3";slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice.set_id(itemId);slice.setPathData(pathData);slice.set_strokepen(outerline);slice.set_strokejoin("round");}return useBoard;}var useBoard=drawBoard(this);var colorRange=this._userrange;if(items.length>0&&(colorRange instanceof Array)){var colorRangeLeng=colorRange.length;var svradius,svinnerradius;if(nexacro._ChartGraphicsLib.isEmpty(this.userrangeradius)){svradius=maxRadius*0.8;}else{svradius=maxRadius*(this.userrangeradius*0.01);}if(nexacro._ChartGraphicsLib.isEmpty(this.userrangeinnerradius)){svinnerradius=0;}else{svinnerradius=maxRadius*(this.userrangeinnerradius*0.01);}if(svradius<=svinnerradius){svinnerradius=0;}for(i=0;i<colorRangeLeng;i++ ){drawColorBand(this,0,i,colorRange[i],svradius,svinnerradius);}useBoard=true;}for(i=0;i<items.length;i++ ){selectlength=selectedItem.length;if(selectlength>0){isselectitem=selectedItem[i];}if(useBoard==false){drawCircle(this,i);}drawCircleGauge(this,i);drawitemCnt++ ;}};_pChartGaugeSeriesControl._drawSeriesBar=function(){var barlinestyle=this.barlinestyle||"1px solid "+this._color,barfillstyle=this.barfillstyle||this._color,baropacity=this.baropacity,linestyle=this.linestyle||"1px solid"+this._color,fillstyle=this.fillstyle||this._color,opacity=this.opacity,barLeft,barRight,barGaugewidth,barGaugeLeft,barGaugeRight,barwidth,datapoints=this._datapoints,points=datapoints.points,ps=datapoints.pointsize,selectedItem=this._selectedItem,selectbarlinestyle=this.selectbarlinestyle||"1px solid "+this._selectcolor,selectbarfillstyle=this.selectbarfillstyle||this._selectcolor,selectbaropacity=this.selectbaropacity||this.baropacity,location=this._chart.valueaxes[0]?this._chart.valueaxes[0]._location:undefined,axissize=this._chart.valueaxes[0]?this._chart.valueaxes[0]._axissize:undefined,effect=this._chart_aniframe_obj,axissizewidth=0,axissizeheight=0,isselectitem=false,index=0;var rotateaxis=this._chart.gaugetype=="horizontal"?true:false;if(axissize&&this._chart.valueaxes&&this._chart.valueaxes[0].visible){axissizewidth=axissize.width;axissizeheight=axissize.height;}if(rotateaxis){if(location=="top"){barGaugewidth=this._barsize*((this._chart._boardHeight/2)-axissizeheight);barGaugeLeft=(this._chart._boardHeight/2)-((barGaugewidth+axissizeheight)/2)+axissizeheight;barGaugeRight=barGaugeLeft+barGaugewidth;barwidth=(this._chart._boardHeight/2)-axissizeheight;barLeft=(this._chart._boardHeight/2)-((barwidth+axissizeheight)/2)+axissizeheight;barRight=barLeft+barwidth;}else{barGaugewidth=this._barsize*((this._chart._boardHeight/2)-axissizeheight);barGaugeLeft=(this._chart._boardHeight/2)-((barGaugewidth+axissizeheight)/2);barGaugeRight=barGaugeLeft+barGaugewidth;barwidth=(this._chart._boardHeight/2)-axissizeheight;barLeft=(this._chart._boardHeight/2)-((barwidth+axissizeheight)/2);barRight=barLeft+barwidth;}}else{if(location=="right"){barGaugewidth=this._barsize*((this._chart._boardWidth/2)-axissizewidth);barGaugeLeft=this._chart._centerLeft-((barGaugewidth+axissizewidth)/2);barGaugeRight=barGaugeLeft+barGaugewidth;barwidth=(this._chart._boardWidth/2)-axissizewidth;barLeft=this._chart._centerLeft-((barwidth+axissizewidth)/2);barRight=barLeft+barwidth;}else{barGaugewidth=this._barsize*((this._chart._boardWidth/2)-axissizewidth);barGaugeLeft=this._chart._centerLeft-((barGaugewidth+axissizewidth)/2)+axissizewidth;barGaugeRight=barGaugeLeft+barGaugewidth;barwidth=(this._chart._boardWidth/2)-axissizewidth;barLeft=this._chart._centerLeft-((barwidth+axissizewidth)/2)+axissizewidth;barRight=barLeft+barwidth;}}var bottom=rotateaxis?this._chart._boardWidth:this._chart._boardHeight;var gaugebottom=rotateaxis?this._chart._boardRectLeft:this._chart._boardHeight;for(var i=0;i<points.length;i+=ps){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}if(effect&&effect.isloadanimation){isselectitem=false;}this._drawBar(0,0,bottom,barLeft,barRight,this._chart.valueaxes[0],this._chart.valueaxes[0],linestyle,fillstyle,opacity,index);if(isselectitem){this._drawBarGauge(0,points[i+1],gaugebottom,barGaugeLeft,barGaugeRight,this._chart.valueaxes[0],this._chart.valueaxes[0],selectbarlinestyle,selectbarfillstyle,selectbaropacity,index);}else{this._drawBarGauge(0,points[i+1],gaugebottom,barGaugeLeft,barGaugeRight,this._chart.valueaxes[0],this._chart.valueaxes[0],barlinestyle,barfillstyle,baropacity,index);}index++ ;}this._itemCnt=index;};_pChartGaugeSeriesControl._drawBar=function(x,y,b,barLeft,barRight,axisx,axisy,linestyle,fillstyle,opacity,index,item){var left,right,bottom,top,rotateaxis=this._chart.gaugetype=="horizontal"?true:false,tickstartgap;if(rotateaxis){left=y;right=b;top=x+barLeft;bottom=x+barRight;}else{left=x+barLeft;right=x+barRight;bottom=b;top=y;}if(rotateaxis){tickstartgap=axisy?axisy._tickstartgap:0;if(tickstartgap){bottom+=tickstartgap;top+=tickstartgap;}}else{tickstartgap=axisx?axisx._tickstartgap:0;if(tickstartgap){left+=tickstartgap;right+=tickstartgap;}}var rect,chart=this._chart,width=0,height=0,seriesId,points=[],seriesGroup=chart._seriesGroup,highlightGroup=chart._highlightGroup;width=right-left;height=bottom-top;if(width<0){left+=width;width=Math.abs(width);}if(height<0){top+=height;height=Math.abs(height);}if(rotateaxis){this._barwidth=height;if(this.parent.indicator){this.parent.indicator._calcpos=top;}}else{this._barwidth=width;if(this.parent.indicator){this.parent.indicator._calcpos=left;}}if(item){var highlightitem=item._barHighlight;if(!highlightitem){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_strokepen(linestyle);rect.set_fillstyle(fillstyle);rect.set_opacity(opacity);seriesId=this._configIndex+" SeriesHighlightGaugeItem";rect.set_id(seriesId);highlightGroup.addChild(rect);item._barHighlight=rect;rect._item=item;rect.index=item.index;rect.value=item.value;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesGaugeItem_"+index;rect=seriesGroup.getObjectByID(seriesId);if(!rect){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id(seriesId);seriesGroup.addChild(rect);}else{rect.set_x(left);rect.set_width(width);rect.set_y(top);rect.set_height(height);}rect.set_strokepen(linestyle);rect.set_fillstyle(fillstyle);rect.set_opacity(opacity);points[0]=x;points[1]=y;points[2]=b;rect.index=index;if(rotateaxis){points[3]=x-b;rect.value=x;}else{points[3]=y-b;rect.value=y;}rect._points=points;}}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(rect){rect._clipitems=[];rect.setClipPath(new nexacro.Rect( -left, -top,boardWidth,boardHeight));}}};_pChartGaugeSeriesControl._drawBarGauge=function(x,y,b,barLeft,barRight,axisx,axisy,barlinestyle,barfillstyle,baropacity,index,item){var left,right,bottom,top,rotateaxis=this._chart.gaugetype=="horizontal"?true:false,effect=this._chart_aniframe_obj,tickstartgap;if(effect&&effect.isloadanimation){y=this._getanimationdrawvalue(y);}y=this._calcValueposition(y);if(rotateaxis){left=b;right=y;top=x+barLeft;bottom=x+barRight;}else{left=x+barLeft;right=x+barRight;bottom=b;top=y;}if(!rotateaxis){tickstartgap=axisx?axisx._tickstartgap:0;if(tickstartgap){left+=tickstartgap;right+=tickstartgap;}}else{tickstartgap=axisy?axisy._tickstartgap:0;if(tickstartgap){bottom+=tickstartgap;top+=tickstartgap;}}var rect,chart=this._chart,width=0,height=0,seriesId,points=[],seriesGroup=chart._seriesGroup,highlightGroup=chart._highlightGroup;width=right-left;height=bottom-top;if(width<0){left+=width;width=Math.abs(width);}if(height<0){top+=height;height=Math.abs(height);}if(rotateaxis){this._barwidth=height;}else{this._barwidth=width;}if(this._chart.indicator){var barborderdecimal=this._barborderwidth;if(barborderdecimal%2==0){barborderdecimal=0;}else{barborderdecimal=1;}this._chart.indicator._drawindicator(left+barborderdecimal,top,width,height);}if(item){var highlightitem=item._barHighlight;if(!highlightitem){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_strokepen(barlinestyle);rect.set_fillstyle(barfillstyle);rect.set_opacity(baropacity);seriesId=this._configIndex+" SeriesHighlightGaugeItem";rect.set_id(seriesId);highlightGroup.addChild(rect);item._barHighlight=rect;rect._item=item;rect.index=item.index;rect.value=item.value;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesBarGaugeItem_"+index;rect=seriesGroup.getObjectByID(seriesId);if(!rect){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id(seriesId);seriesGroup.addChild(rect);}else{rect.set_x(left);rect.set_width(width);rect.set_y(top);rect.set_height(height);}rect.set_strokepen(barlinestyle);rect.set_fillstyle(barfillstyle);rect.set_opacity(baropacity);points[0]=x;points[1]=y;points[2]=b;rect.index=index;if(rotateaxis){points[3]=x-b;rect.value=x;}else{points[3]=y-b;rect.value=y;}rect._points=points;}}this._gaugerect=rect;var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(rect){rect._clipitems=[];rect.setClipPath(new nexacro.Rect( -left, -top,boardWidth,boardHeight));}}if(rect){rect._series=this;this._seriesitems[index]=rect;}if(!item){var itemtextvisible=this.itemtextvisible;if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawBarItemText(left,right,bottom,top,width,height,rect);}}}};_pChartGaugeSeriesControl._drawBarItemText=function(left,right,bottom,top,width,height,item){var seriesGroup=this._chart._seriesGroup;var itemText=this._createSeriesItemText(item);function positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");textTop=top+(height/2);textLeft=left+itemtextGap;}else{itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=bottom-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){textTop=top+(height/2);textLeft=left+(width/2)+itemtextGap;}else{textLeft=left+(width/2);textTop=top+(height/2)-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");textTop=top+(height/2);textLeft=right-itemtextGap;}else{itemText.set_verticalAlign("top");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=top+itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}if(!nexacro._isNull(itemText)){var rotateaxis=this._chart.gaugetype=="horizontal"?true:false,itemtextPosition=this.itemtextposition,itemtextGap=this.baritemtextgap;if(itemtextPosition){switch(itemtextPosition){case "start":{positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "middle":{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "end":{positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;default:positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);break;}}else{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}this._chart._setChangeInBoardAreaPos(itemText);seriesGroup.addChild(itemText);itemText._series=this;}};_pChartGaugeSeriesControl._drawLabels=function(){var startAngle=this._startangle||0,items,pThis=this;items=this._seriesitems;function drawLabel(item,startangle,index,pThis){var halfAngle=0,chart=pThis._chart,itemtextposition=pThis.itemtextposition,boardborderWidth=pThis._chart._boardBorderWidth?pThis._chart._boardBorderWidth:1.5,boardborderHeight=pThis._chart._boardBorderHeight?pThis._chart._boardBorderHeight:1.5,maxRadius=Math.min((pThis._chart._boardWidth-(boardborderWidth*2)),(pThis._chart._boardHeight-(boardborderHeight)))/2,centerX=pThis._chart._centerLeft,centerY=pThis._chart._centerTop,itemText,textX=0,textY=0,itempointsize,seriesGroup=pThis._chart._seriesGroup,radius,itemtextgap_h=pThis._itemtextgap_h,itemtextgap_v=pThis._itemtextgap_v,borderwidth=pThis._borderwidth;maxRadius-=(chart.valueaxes[0]?chart.valueaxes[0]._allaxisgapsize:0);if(maxRadius<=0){return;}var linewidth=this._linestyle?this._linestyle._width:1;if(nexacro._ChartGraphicsLib.isEmpty(pThis._chart._gaugeradius)||nexacro._ChartGraphicsLib.isEmpty(pThis._chart._gaugeinnerradius)){radius=maxRadius*0.8;}else{radius=pThis._chart._gaugeradius-(pThis._chart._gaugeradius-pThis._chart._gaugeinnerradius)/2;}radius-=linewidth;var rStartAngle=item.rStartAngle,rEndAngle=item.rEndAngle;if(itemtextposition){switch(itemtextposition){case "start":{halfAngle=rStartAngle;if(radius>maxRadius){itempointsize=maxRadius+(borderwidth/2);}else{itempointsize=radius+(borderwidth/2);}textX=centerX+Math.round(Math.sin(halfAngle)*(itempointsize));textY=centerY-Math.round(Math.cos(halfAngle)*(itempointsize));}break;case "middle":{var temp=rEndAngle-rStartAngle;if(temp<0){halfAngle=6.28319+temp;}else{halfAngle=temp;}halfAngle=(halfAngle/2)+rStartAngle;if(radius>maxRadius){itempointsize=maxRadius+(borderwidth/2);}else{itempointsize=radius+(borderwidth/2);}textX=centerX+Math.round(Math.sin(halfAngle)*(itempointsize));textY=centerY-Math.round(Math.cos(halfAngle)*(itempointsize));}break;case "end":{halfAngle=rEndAngle;if(radius>maxRadius){itempointsize=maxRadius+(borderwidth/2);}else{itempointsize=radius+(borderwidth/2);}textX=centerX+Math.round(Math.sin(halfAngle)*(itempointsize));textY=centerY-Math.round(Math.cos(halfAngle)*(itempointsize));}break;default:{textX=centerX;textY=centerY;}break;}}else{textX=centerX;textY=centerY;}itemText=pThis._createSeriesItemText(item);if(!nexacro._isNull(itemText)){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");itemText.set_x(textX+itemtextgap_h);itemText.set_y(textY+itemtextgap_v);seriesGroup.addChild(itemText);itemText._series=pThis;itemText._seriesItem=item;pThis._chart._setChangeInBoardAreaPos(itemText);}}for(var i=0;i<this._itemCnt;i++ ){var valuedata=items[i].value;if(valuedata&&items[i]._isShow){drawLabel(items[i],startAngle,i,pThis);startAngle+=items[i].angle;}}};_pChartGaugeSeriesControl._calcValueradian=function(val,rStartAngle,rEndAngle){var rValue;if(this._chart){var axis=this._chart.valueaxes[0];var nmin=axis?axis._min:0;var nmax=axis?axis._max:val;var startangle=this.startangle>=0?this.startangle:Math.floor(rStartAngle*180/Math.PI);var endangle=this.endangle>=0?this.endangle:Math.floor(rEndAngle*180/Math.PI);var maxAngle=360;if(startangle===undefined){startangle=0;}if(endangle===undefined){endangle=360;}if(nmax===undefined||nmax==null){nmax=0;if(val>=0){nmax=val>nmax?val:nmax;}}if(nmin===undefined||nmin==null){if(val>=0){nmin=0;}else{nmin=val;}}var valrange=(val-nmin)/(nmax-nmin);if(valrange>1){valrange=1;}else if(valrange<0){valrange=0;}var valdegree=0;valdegree=endangle*valrange;this._valangle=valdegree;var gapdegree=startangle+valdegree;if(gapdegree>maxAngle){gapdegree-=maxAngle;}valdegree=gapdegree;if(valdegree==startangle){valdegree=startangle;}rValue=valdegree*Math.PI/180;}return rValue;};_pChartGaugeSeriesControl._calcValueposition=function(val){if(this._chart.gaugetype=="circular"){return;}var rotateaxis=this._chart.gaugetype=="horizontal"?true:false;var range=1;if(this._chart.valueaxes[0]){range=this._chart.valueaxes[0]._max-this._chart.valueaxes[0]._min;}if(rotateaxis){if(range>0){return this.axis.p2c(val);}else if(range==0){return 0;}}else{if(range>0){return this.axis.p2c(val);}else if(range==0){return this._chart._boardHeight;}}};_pChartGaugeSeriesControl._createSeriesItemText=function(item){var index=this.parent._rowposition,itemtext=this.itemtext,itemtexttype=this.itemtexttype,itemtextmask=this.itemtextmask,itemtextfont=this.itemtextfont,itemtextcolor=this.itemtextcolor,itemtextwidth=this.itemtextwidth,locale=this.locale,chart=this._chart,text,itemtextvalue;itemtextvalue=itemtext._value;if(itemtext&&itemtextvalue==""){itemtext=this.valuecolumn;}if(itemtext){text=nexacro._getChartDisplaytText(index,itemtext,locale,itemtexttype,itemtextmask,chart,this);}if(!nexacro._isNull(text)){this._itemtext=text;var itemId=this._configIndex+" SeriesItemText_"+index;this._itemtextObj=chart._seriesGroup.getObjectByID(itemId);if(this._itemtextObj){chart._seriesGroup.removeChild(this._itemtextObj);this._itemtextObj.destroy();}this._itemtextObj=new nexacro.ChartGraphicsText(0,0);this._itemtextObj.set_id(itemId);this._itemtextObj.set_text(this._itemtext);this._itemtextObj.set_font(itemtextfont?itemtextfont.value||itemtextfont:"12pt Verdana");this._itemtextObj.set_color(itemtextcolor?itemtextcolor.value||itemtextcolor:"#000000");this._itemtextObj.index=item.index;this._itemtextObj.value=item.value;if(itemtextwidth>0){this._itemtextObj.set_width(itemtextwidth);this._itemtextObj.set_wordWrap(true);}else{this._itemtextObj.set_wordWrap(false);}this._itemtextlist.push(itemId);return this._itemtextObj;}};_pChartGaugeSeriesControl._setItemColor=function(items){var colorcnt=0;var colorset=this._chart._colorset;var item;for(var i=0;i<items.length;i++ ){item=items[i];if(item._isShow&&item.value){var itemColor=colorset[colorcnt];if(itemColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){itemColor=colorset[colorcnt];colorcnt++ ;}items[i].color=itemColor;this._color=itemColor;var slice=items[i]._slice;if(slice){slice.set_fillstyle(itemColor);}}}};_pChartGaugeSeriesControl._rearrangeProcessItemData=function(){var total=0;var items=this._seriesitems;var i,value;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){var percent=0;var angle=0;var endangle=this._endangle||Math.PI*2;value=items[i].value;angle=value*endangle/total;percent=(value/(total/100)).toFixed(2);items[i].angle=angle;items[i].percent=nexacro.toNumber(percent);}};_pChartGaugeSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;if(changedColorset){var visible=this.visible,linestyle,fillstyle,barlinestyle,barfillstyle,width,style,color;if(visible){if(this._linestyle){width=this._linestyle.width;style=this._linestyle.style;color=this._linestyle.color;linestyle=width+" "+style+" "+color;this.set_linestyle(linestyle);}else{linestyle="1px solid "+colorset;this._applyPropertySeries("linestyle",linestyle);}if(this._fillstyle){fillstyle=this._fillstyle;this.set_fillstyle(fillstyle);}else{fillstyle=colorset;this._applyPropertySeries("fillstyle",fillstyle);}if(this._barlinestyle){width=this._barlinestyle.width;style=this._barlinestyle.style;color=this._barlinestyle.color;barlinestyle=width+" "+style+" "+color;this.set_barlinestyle(barlinestyle);}else{barlinestyle="1px solid "+colorset;this._applyPropertySeries("barlinestyle",barlinestyle);}if(this._barfillstyle){barfillstyle=this._barfillstyle;this.set_barfillstyle(barfillstyle);}else{barfillstyle=colorset;this._applyPropertySeries("barfillstyle",barfillstyle);}}}};_pChartGaugeSeriesControl._showHighlight=function(item){if(!this.highlightbarvisible){return;}var highlight=item._highlight;if(!highlight){this._drawHighlight(item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartGaugeSeriesControl._hideHighlight=function(item){if(!this.highlightbarvisible){return;}var highlight=item._highlight;if(highlight&&!nexacro._ChartGraphicsLib.isEmpty(highlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(highlight);delete item._highlight;this._chart._graphicsControl.draw();}};_pChartGaugeSeriesControl._drawHighlight=function(item){var highlightbarlinestyle=this.highlightbarlinestyle||"1px solid "+this._chart._highlightcolorset[0],highlightbarfillstyle=this.highlightbarfillstyle||this._chart._highlightcolorset[0],highlightbaropacity=this.highlightbaropacity,gaugetype=this.parent.gaugetype,slice,rect,highlightPathData,highlightGroup=this._chart._highlightGroup;if(item){if(gaugetype=="circular"){highlightPathData=item.highlightPathData;if(highlightPathData){slice=new nexacro.ChartGraphicsPath();slice.setPathData(highlightPathData);slice.set_id("SeriesHighlightGaugeItem");slice.set_strokepen(highlightbarlinestyle);slice.set_fillstyle(highlightbarfillstyle);slice.set_strokejoin("round");slice.set_opacity(highlightbaropacity);highlightGroup.addChild(slice);item._highlight=slice;slice._item=item;slice._series=this;}}else{var gaugerect=this._gaugerect?this._gaugerect._rect:null;if(!gaugerect){return;}var left=this._gaugerect.x,top=this._gaugerect.y,width=gaugerect.width,height=gaugerect.height;rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id("SeriesHighlightGaugeItem");rect.set_strokepen(highlightbarlinestyle);rect.set_fillstyle(highlightbarfillstyle);rect.set_opacity(highlightbaropacity);highlightGroup.addChild(rect);item._highlight=rect;rect._item=item;rect._series=this;}}};}if(!nexacro.ChartGaugeValueAxisControl){nexacro.ChartGaugeValueAxisControl=function(id,parent,graphicsControl){nexacro.ChartAxisControl.call(this,id,parent,graphicsControl);this._direction="";};var _pChartGaugeValueAxisControl=nexacro._createPrototype(nexacro.ChartAxisControl,nexacro.ChartGaugeValueAxisControl);nexacro.ChartGaugeValueAxisControl.prototype=_pChartGaugeValueAxisControl;_pChartGaugeValueAxisControl._type_name="ChartGaugeValueAxisControl";_pChartGaugeValueAxisControl._axissize={"x":0,"y":0,"width":0,"height":0};_pChartGaugeValueAxisControl._allaxisgapsize=0;_pChartGaugeValueAxisControl._allaxislinegapsize=0;_pChartGaugeValueAxisControl.smalltickcount=0;_pChartGaugeValueAxisControl.smallticklinestyle="";_pChartGaugeValueAxisControl._smallticklinestyle=null;_pChartGaugeValueAxisControl.opposite=false;_pChartGaugeValueAxisControl.set_opposite=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.opposite!=val){this._changeContentsProperty("opposite",val,this.opposite);this.opposite=val;this.on_apply_opposite(val);}this.parent._draw();};_pChartGaugeValueAxisControl.on_apply_opposite=function(opposite){if(this._is_initprop){return;}if(opposite){opposite=nexacro._toBoolean(opposite);}var type=this.parent.gaugetype;if(opposite){if(type=="circular"){if(this.parent.seriesset[0]&&(this.parent.seriesset[0].innerradius===undefined||this.parent.seriesset[0].innerradius<=0)){this._location="outside";}else{this._location="inside";}}else if(type=="vertical"){this._location="right";}else{this._location="top";}}else{if(type=="circular"){this._location="outside";}else if(type=="vertical"){this._location="left";}else{this._location="bottom";}}var direction;if(this._location=="left"||this._location=="right"){direction="y";}else if(this._location=="top"||this._location=="bottom"){direction="x";}else{direction="circular";}this._direction=direction;this.parent._rearrange=true;this.parent._changedData=true;this._getTickLabelAlign(this.labelrotate);};_pChartGaugeValueAxisControl.set_smalltickcount=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(this.smalltickcount!=IVal){this._changeContentsProperty("smalltickcount",IVal,this.smalltickcount);this.smalltickcount=IVal;this.on_apply_smalltickcount(IVal);}this.parent._draw();};_pChartGaugeValueAxisControl.on_apply_smalltickcount=function(smalltickcount){this._changedTicks=true;this.parent._rearrange=true;};_pChartGaugeValueAxisControl.set_smallticklinestyle=function(val){this.smallticklinestyle=val;if(val){if(this._smallticklinestyle==null||this._smallticklinestyle.value!=val){var oldValue;if(this._smallticklinestyle){oldValue=this._smallticklinestyle.value;}this._changeContentsProperty("smallticklinestyle",val,oldValue);var smallticklinestyle=nexacro.BorderObject(val);this._smallticklinestyle=smallticklinestyle;this.on_apply_smallticklinestyle();}}else{if(this._smallticklinestyle){this._smallticklinestyle=null;this.on_apply_smallticklinestyle();}}this.parent._draw();};_pChartAxisControl.on_apply_smallticklinestyle=function(){if(this._is_initprop){return;}this._changedTickStyle=true;};_pChartGaugeValueAxisControl._afterSetProperties=function(){this.on_apply_axislinestyle(this._axislinestyle);this.on_apply_ticklinestyle(this._ticklinestyle);this.on_apply_labeltextfont(this._labeltextfont);this.on_apply_labeltextcolor(this._labeltextcolor);this.on_apply_axistype();};_pChartGaugeValueAxisControl.destroy=function(){this._destroy(true);};_pChartGaugeValueAxisControl._destroy=function(parent_clear){if(parent_clear){if(this.parent){this.parent.valueaxis=null;this.parent._deleteContentsProp("valueaxis");}}delete this.locale;delete this.labeltype;delete this.labelmask;delete this._axisLine;delete this._axisRect;if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();}var tickline=tick.lineElement;if(tickline){tickline.destroy();}}}this._direction=null;this._axissize=null;this.id=null;this.locale=null;this.opposite=null;this.datetickunit=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.labelmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._datetickunit=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisLine=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._isTimeAxis=null;this._timeUnitSize=null;this._specMonths=null;this._axislineindex=null;this.smalltickcount=null;this.smallticklinestyle=null;this._smallticklinestyle=null;this._allaxisgapsize=null;this._allaxislinegapsize=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartGaugeValueAxisControl._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id(this.id+"_ChartAxisGroup");this._graphicsControl.addChild(this._group);this._tickGroup=new nexacro.ChartGraphicsGroup();this._tickGroup.set_id("ChartAxisTickGroup");this._group.addChild(this._tickGroup);this._labelGroup=new nexacro.ChartGraphicsGroup();this._labelGroup.set_id("ChartAxisLabelGroup");this._group.addChild(this._labelGroup);this._axisRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._axisRect.set_id("ChartAxisRect");this._group.addChild(this._axisRect);this._axisRect._axis=this;};_pChartGaugeValueAxisControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.valueaxis){contents.valueaxis[nm]=newVal;}};_pChartGaugeValueAxisControl._processItemData=function(ticks){var length=ticks.length,chart=this.parent,rStartangle=chart.seriesset[0].startangle*Math.PI/180||0,rEndangle=chart.seriesset[0].endangle*Math.PI/180||6.28319,i,axisgap= +this.gap||0,labelgap= +this._labelgap||0,ticksize= +this.ticksize||10,location=this._location,label,labelBoundRect,maxtextsize=0,textsize=0,w=0,h=0,total=0;var anglegap=rEndangle;if(length<=2){return;}for(i=0;i<length;i++ ){var axisangleitems={};axisangleitems.index=i;ticks[i].axisangleitems=axisangleitems;label=ticks[i].labelElement;if(label){labelBoundRect=label.getGlobalBoundRect();w=labelBoundRect.width;h=labelBoundRect.height;textsize=Math.max(w,h);maxtextsize=Math.max(textsize,maxtextsize);}}if(this.labeltextwidth){maxtextsize=Math.max( +this.labeltextwidth,maxtextsize);}var checkangleval=ticks[1].v-ticks[0].v;total=this._max-this._min;var startangle=rStartangle;for(i=0;i<length; ++i){var percent=0;var angle=0;var endangle=anglegap;var items=ticks[i].axisangleitems;if(i==0&&this._min<checkangleval){angle=(checkangleval-this._min)*endangle/total;percent=((checkangleval-this._min)/(total/100)).toFixed(2);}else if(i==0&&this._min>checkangleval){angle=(this._min-checkangleval)*endangle/total;percent=((this._min-checkangleval)/(total/100)).toFixed(2);}else{angle=checkangleval*endangle/total;percent=(checkangleval/(total/100)).toFixed(2);}items.startangle=0;items.angle=angle;items.startangle+=startangle;startangle+=angle;items.endangle=startangle;if(items.startangle>=6.28319){items.startangle=items.startangle-6.28319;}if(items.endangle>=6.28319){items.endangle=items.endangle-6.28319;}if(startangle>=6.28319){startangle=startangle-6.28319;}items.percent=nexacro.toNumber(percent);items.textsize=maxtextsize;items.axisgap=axisgap;items.labelgap=labelgap;items.ticksize=ticksize;}if(location=="outside"){this._allaxisgapsize=maxtextsize+axisgap+labelgap+ticksize;this._allaxislinegapsize=maxtextsize+labelgap+ticksize;}else{this._allaxisgapsize=0;this._allaxislinegapsize=0;}};_pChartGaugeValueAxisControl._setData=function(clientWidth,clientHeight){var changedTicks=this._changedTicks,ticklinestyle=this._ticklinestyle,ticklineopacity=this._ticklineopacity;var smallticklinestyle=this._smallticklinestyle;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();this._setTicks();if(this._labelGroup){this._labelGroup.clear();}if(this._tickGroup){this._tickGroup.clear();}if(this._axisLine){this._axisLine.clear();}}var ticks=this._ticks,tick,value,tickLine,tickLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"10pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth;if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||value<this._min||value>this._max){continue;}if(changedTicks){tickLine=new nexacro.ChartGraphicsLine();tickLine.set_id("ChartTickLineTick"+i+"_"+tick.subindex);this._tickGroup.addChild(tickLine);tick.lineElement=tickLine;tickLine._axis=this;if(tick.subindex&&tick.subindex>0){tickLine.set_strokepen(smallticklinestyle?smallticklinestyle.value||smallticklinestyle:"1px solid #d0d0d0");}else{tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #d0d0d0");}tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);}else{if(this._changedTickStyle){tickLine=tick.lineElement;if(tickLine){if(tick.subindex&&tick.subindex>0){tickLine.set_strokepen(smallticklinestyle?smallticklinestyle.value||smallticklinestyle:"1px solid #d0d0d0");}else{tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #d0d0d0");}tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);}}}if(changedTicks||this._changedTickLabelRotate){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel"+i+"_"+tick.subindex);this._labelGroup.addChild(tickLabel);tick.labelElement=tickLabel;tickLabel._axis=this;if(tick.subindex&&tick.subindex>0){tickLabel.visible=false;tickLabel.set_text("");}else{tickLabel.set_text(tick.label);tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");}}else{if(this._changedTickLabelStyle&&!tick.subindex){tickLabel=tick.labelElement;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}}}}}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);this._labelHeight=info.height;this._labelWidth=info.width;};_pChartGaugeValueAxisControl._setTransformationHelpers=function(width,height){var s,m,tickmin=this._min,tickmax=this._max;if(this.parent){if(this.parent.gaugetype=="horizontal"){s=this._scale=width/Math.abs(tickmax-tickmin);m=Math.min(tickmax,tickmin);}else if(this.parent.gaugetype=="vertical"){s=this._scale=height/Math.abs(tickmax-tickmin);s= -s;m=Math.max(tickmax,tickmin);}}this.p2c=function(p){return (p-m)*s;};this.c2p=function(c){return m+c/s;};};_pChartGaugeValueAxisControl._createAxisLine=function(){if(!this._axisLine){this._axisLine=new nexacro.ChartGraphicsPaths();this._axisLine.set_id("ChartAxisLine");if(this._group){this._group.addChild(this._axisLine);}this._axisLine._axis=this;}};_pChartGaugeValueAxisControl._arrange=function(left,top,width,height){if(this.parent&&this.parent._rearrange||this._rearrange){this._tickgroupHelpers();this._arrangeTickGroup(width,height);this._arrangeLabelGroup();}this._rearrange=false;};_pChartGaugeValueAxisControl._tickgroupHelpers=function(){if(this.parent.gaugetype=="circular"){var chart=this.parent,boardborderWidth=chart._boardBorderWidth?chart._boardBorderWidth:1.5,boardborderHeight=chart._boardBorderHeight?chart._boardBorderHeight:1.5,maxRadius=Math.min((chart._boardWidth-(boardborderWidth*2)),(chart._boardHeight-(boardborderHeight*2)))/2,radius=0,w=0,centerX=chart._centerLeft,centerY=chart._centerTop,location=this._location,axisgap= +this.gap||0,range;maxRadius-=this._allaxislinegapsize;var linewidth=this._linestyle?this._linestyle._width:1;if(location=="inside"){var colorRange=this._userrange;if(colorRange instanceof Array){if(nexacro._ChartGraphicsLib.isEmpty(chart.userrangeinnerradius)){radius=maxRadius*0.8;}else{radius=maxRadius*(chart.userrangeinnerradius*0.01);}}else{if(nexacro._ChartGraphicsLib.isEmpty(chart.seriesset[0]._innerradius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart.seriesset[0]._innerradius;}}}else{if(nexacro._ChartGraphicsLib.isEmpty(chart.seriesset[0]._radius)){radius=maxRadius*0.8;}else{radius=maxRadius*chart.seriesset[0]._radius;}}radius-=linewidth;if(location=="inside"){w=radius-axisgap;}else{w=radius;}this.angletox=function(startangle,btickend,binside,baxis){range=w;if(btickend){var ticksize= +this.ticksize||10;if(!baxis){if(binside){range-=ticksize;}else{range+=ticksize;}}}return (Math.sin(startangle)*range+centerX);};this.angletoy=function(startangle,btickend,binside,baxis){range=w;if(btickend){var ticksize= +this.ticksize||10;if(!baxis){if(binside){range-=ticksize;}else{range+=ticksize;}}}return (( -Math.cos(startangle)*range+centerY));};this.range=function(){return w;};}};_pChartGaugeValueAxisControl._arrangeTickGroup=function(width,height){var axisLine=this._axisLine,ticks=this._ticks,direction=this._direction,location=this._location,axislinestyle=this._axislinestyle,axislinewidth=0,x=0,y=0,x2=0,y2=0,axisRectWidth=0,axisRectHeight=0,tickendspace=this._tickendspace;var axisRect=new nexacro.Rect(this._axisRect.x,this._axisRect.y,this._axisRect.width,this._axisRect.height);if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;axislinewidth*=0.5;}var bstartline=false;var binside=location=="inside"?true:false;if(direction=="x"){x=axisRect.left;axisRectWidth=axisRect.width+tickendspace;if(location=="top"){y=axisRect.bottom-axislinewidth;}else{y=axisRect.top+axislinewidth;}if(axisLine){axisLine.clear();axisLine.moveTo(x,y);axisLine.lineTo(x+axisRectWidth,y);}this._calcaxisSize(x,y,axisRectWidth,0);}else if(direction=="y"){y=axisRect.top-tickendspace;tickendspace=0;axisRectHeight=axisRect.height+tickendspace;if(location=="left"){x=axisRect.right-axislinewidth;}else{x=axisRect.left+axislinewidth;}if(axisLine){axisLine.clear();axisLine.moveTo(x,y);axisLine.lineTo(x,y+axisRectHeight);}this._calcaxisSize(x,y,0,axisRectHeight);}else{var j=0,startX,startY,endX,endY;if(axisLine){axisLine.clear();for(j=0;j<ticks.length;j++ ){if(!ticks[j].axisangleitems){continue;}if(j==0){startX=this.angletox(ticks[j].axisangleitems.startangle,undefined,binside,true);startY=this.angletoy(ticks[j].axisangleitems.startangle,undefined,binside,true);axisLine.moveTo(startX,startY);ticks[j].axisangleitems.tickstartX=startX;ticks[j].axisangleitems.tickstartY=startY;bstartline=true;}else{if(bstartline){endX=this.angletox(ticks[j].axisangleitems.startangle,undefined,binside,true);endY=this.angletoy(ticks[j].axisangleitems.startangle,undefined,binside,true);ticks[j].axisangleitems.tickstartX=endX;ticks[j].axisangleitems.tickstartY=endY;var range=this.range();axisLine.arcTo(new nexacro.Point(endX,endY),new nexacro._ChartGraphicsSize(range,range),1,1,0);}}}}this._calcaxisSize(axisLine.x1,axisLine.y1,axisLine.x2-axisLine.x1,axisLine.y2-axisLine.y1);}var tick,value,ticksize,tickXoff=0,tickYoff=0,tickmin=this._min,tickmax=this._max,tickminx= -1,tickminy= -1,tickmaxwidth= -1,tickmaxheight= -1,vc=0,is_circle=false;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){ticksize=10;}else{ticksize=this.ticksize;}if(ticksize>0){if(location=="top"){tickYoff= -ticksize;y-=axislinewidth;}else if(location=="bottom"){tickYoff=ticksize;y+=axislinewidth;}else if(location=="left"){tickXoff= -ticksize;x-=axislinewidth;}else if(location=="right"){tickXoff=ticksize;x+=axislinewidth;}}for(var i=0;i<ticks.length;i++ ){tick=ticks[i].lineElement;value=ticks[i].v;if(isNaN(value)||value<tickmin||value>tickmax){continue;}if(this._direction=="x"){vc=this.p2c(value);x=vc+axisRect.left;if(x==axisRect.left){}else if(Math.floor(x)==Math.floor(axisRect.right)){x-=tick._strokewidth;}ticks[i]._point={"x1":x,"y1":y,"x2":x+tickXoff,"y2":y+tickYoff};}else if(this._direction=="y"){vc=this.p2c(value);y=vc+axisRect.top;ticks[i]._point={"x1":x,"y1":y,"x2":x+tickXoff,"y2":y+tickYoff};}else{if(!ticks[i].axisangleitems){continue;}if(i==0&&this.parent.seriesset[0]&&this.parent.seriesset[0]._endangle&&Math.floor(this.parent.seriesset[0]._endangle*180/Math.PI)==360){is_circle=true;}x=ticks[i].axisangleitems.tickstartX;y=ticks[i].axisangleitems.tickstartY;x2=this.angletox(ticks[i].axisangleitems.startangle,true,binside);y2=this.angletoy(ticks[i].axisangleitems.startangle,true,binside);ticks[i]._point={"x1":x,"y1":y,"x2":x2,"y2":y2};}if(tick){if(this._direction=="x"){tick.set_x1(x);tick.set_y1(y);tick.set_x2(x);tick.set_y2(y+tickYoff);}else if(this._direction=="y"){tick.set_x1(x);tick.set_y1(y);tick.set_x2(x+tickXoff);tick.set_y2(y);}else{if(!is_circle){tick.set_x1(ticks[i]._point.x1);tick.set_y1(ticks[i]._point.y1);tick.set_x2(ticks[i]._point.x2);tick.set_y2(ticks[i]._point.y2);}}if(i==0&&is_circle){x=ticks[i]._point.x1;x2=ticks[i]._point.x2;y=ticks[i]._point.y1;y2=ticks[i]._point.y2;if(tickminx== -1){tickminx=x;}if(tickminy== -1){tickminy=y;}if(tickmaxwidth== -1){tickmaxwidth=x2-x;}if(tickmaxheight== -1){tickmaxheight=y2-y;}tickminx=Math.min(tickminx,x);tickminy=Math.min(tickminy,y);tickmaxwidth=Math.max(tickmaxwidth,x2-x);tickmaxheight=Math.max(tickmaxheight,y2-y);}else{if(tickminx== -1){tickminx=tick.x1;}if(tickminy== -1){tickminy=tick.y1;}if(tickmaxwidth== -1){tickmaxwidth=tick.x2-tick.x1;}if(tickmaxheight== -1){tickmaxheight=tick.y2-tick.y1;}tickminx=Math.min(tickminx,tick.x1);tickminy=Math.min(tickminy,tick.y1);tickmaxwidth=Math.max(tickmaxwidth,tick.x2-tick.x1);tickmaxheight=Math.max(tickmaxheight,tick.y2-tick.y1);}}if(is_circle){is_circle=false;}}this._calcaxisSize(tickminx,tickminy,tickmaxwidth,tickmaxheight);};_pChartGaugeValueAxisControl._arrangeLabelGroup=function(){var ticks=this._ticks,tick,labelEle,textW=0,textH=0,x=0,y=0,value,labelrotate=this.labelrotate,location=this._location,labelgap= +this._labelgap,labelBoundRect,axislinestyle=this._axislinestyle,axislinewidth=0,ticksize,_ticksize,tickGroupSize=0,ticklinestyle=this._ticklinestyle,ticklinewidth=0,labelminx= -1,labelminy= -1,labelmaxwidth= -1,labelmaxheight= -1,axisRect=new nexacro.Rect(this._axisRect.x,this._axisRect.y,this._axisRect.width,this._axisRect.height),is_circle=false;axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():1;ticklinewidth=ticklinestyle?ticklinestyle._getBorderLeftWidth():1;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){_ticksize=10;}else{_ticksize=this.ticksize;}ticksize= +_ticksize;if(ticklinewidth<1){ticksize=0;}tickGroupSize=axislinewidth+ticksize;var chart=this.parent;var _centerX=chart._centerLeft;var _centerY=chart._centerTop;var boardborderWidth=chart._boardBorderWidth?chart._boardBorderWidth:0;var boardborderHeight=chart._boardBorderHeight?chart._boardBorderHeight:0;var maxRadius=Math.min((chart._boardWidth-(boardborderWidth*2)),(chart._boardHeight-(boardborderHeight*2)))/2;var seriesset=chart.seriesset[0];maxRadius-=(seriesset._allaxisgapsize?seriesset._allaxisgapsize:0);var _startangle=seriesset.startangle;var _endangle=seriesset.endangle;var divOne=0;if(ticks.length>0){divOne=_endangle/(ticks[0].total-1);}var svMaxRadius=maxRadius;if(location=="inside"){var innerradius=(seriesset._innerradius?seriesset._innerradius:1);var userrangeradius=(seriesset.userrangeinnerradius?(seriesset.userrangeinnerradius*0.01):1);if(!seriesset.userrange||seriesset.userrange==""){userrangeradius=1;}if(innerradius>=userrangeradius){svMaxRadius=maxRadius*userrangeradius;}else if(innerradius<userrangeradius){svMaxRadius=maxRadius*innerradius;}svMaxRadius=svMaxRadius-(this.gap?this.gap:1)-(this.labelgap?this.labelgap:1);}else{if(nexacro._ChartGraphicsLib.isEmpty(chart.seriesset[0]._radius)){svMaxRadius=maxRadius*0.8;}else{svMaxRadius=maxRadius*chart.seriesset[0]._radius;}svMaxRadius=svMaxRadius-ticksize-(seriesset.gap?seriesset.gap:1)-10+(seriesset.labelgap?seriesset.labelgap:1);}for(var i=0;i<ticks.length;i++ ){tick=ticks[i];if(!tick){continue;}if(!tick._point){continue;}labelEle=tick.labelElement;value=tick.v;if(nexacro._ChartGraphicsLib.isEmpty(tick.label)||nexacro._ChartGraphicsLib.isEmpty(labelEle)||value<this._min||value>this._max){continue;}labelBoundRect=labelEle.getGlobalBoundRect();textW=labelBoundRect.width;textH=labelBoundRect.height;var pos=labelEle.getCenter();if(this._direction=="x"){x=tick._point.x1;labelEle.set_x(x);var cx=pos.x;var _txtWidthHalf=(labelEle._txtSize[0]||textW)/2;if(x<=axisRect.left){if(cx-(_txtWidthHalf)<0){labelEle.set_x(axisRect.left+(x+_txtWidthHalf));}}else if(cx>=Math.floor(axisRect.right)){var rectwidth=this.parent._getClientWidth();if(cx+(_txtWidthHalf)>rectwidth){labelEle.set_x(axisRect.right-((cx+_txtWidthHalf)-rectwidth));}}if(location=="bottom"){y=axisRect.top+tickGroupSize+labelgap;}else{y=axisRect.top+axisRect.height-tickGroupSize-labelgap;if(labelrotate==0){y=y-textH;}}labelEle.set_textAlign(this._tickLabelTextAlign);labelEle.set_verticalAlign(this._tickLabelVerticalAlign);labelEle.set_y(y);}else if(this._direction=="y"){y=tick._point.y1;labelEle.set_y(y);var cy=pos.y;var _txtHeightHalf=(labelEle._txtSize[1]||textH)/2;if(y<=axisRect.top){if(y-_txtHeightHalf<0){labelEle.set_y(axisRect.top+Math.abs(y-_txtHeightHalf));}}else if(y==axisRect.bottom){var rectheight=this.parent._getClientHeight();if(cy+_txtHeightHalf>rectheight){labelEle.set_y(axisRect.bottom-((cy+_txtHeightHalf)-rectheight));}}if(location=="right"){x=axisRect.left+tickGroupSize+labelgap;}else{x=axisRect.left+axisRect.width-tickGroupSize-labelgap;if(labelrotate==0){x=x-textW;}}labelEle.set_textAlign(this._tickLabelTextAlign);labelEle.set_verticalAlign(this._tickLabelVerticalAlign);labelEle.set_x(x);}else{var angleitem=tick.axisangleitems;var tickpos=tick._point;if(i==0&&this.parent.seriesset[0]&&this.parent.seriesset[0]._endangle&&Math.floor(this.parent.seriesset[0]._endangle*180/Math.PI)==360){is_circle=true;}if(angleitem&&!tick.subindex){x=Math.floor(tickpos.x2*1000)/1000;y=Math.floor(tickpos.y2*1000)/1000;labelBoundRect=labelEle.getGlobalBoundRect();textW=labelBoundRect.width;textH=labelBoundRect.height;var textAlign="center";var verticalAlign="middle";labelEle.set_verticalAlign(verticalAlign);labelEle.set_textAlign(textAlign);var _startAngle=(_startangle+(tick.index*divOne));if(_startAngle>360){_startAngle=_startAngle-360;}_startAngle=_startAngle*Math.PI/180;var _x=Math.sin(_startAngle)*svMaxRadius+_centerX;var _y= -Math.cos(_startAngle)*svMaxRadius+_centerY;labelEle.set_x(_x);labelEle.set_y(_y);if(labelgap!=0){}}}if(!tick.subindex){if(labelminx== -1){labelminx=x;}if(labelminy== -1){labelminy=y;}if(labelmaxwidth== -1){labelmaxwidth=textW;}if(labelmaxheight== -1){labelmaxheight=textH;}labelminx=Math.min(labelminx,tick._point.x1);labelminy=Math.min(labelminy,tick._point.y1);labelmaxwidth=Math.max(labelmaxwidth,textW);labelmaxheight=Math.max(labelmaxheight,textH);}if(is_circle){is_circle=false;}}this._calcaxisSize(labelminx,labelminy,labelmaxwidth,labelmaxheight);};_pChartGaugeValueAxisControl._calcaxisSize=function(x,y,width,height){var size=this._axissize,old_x=size.x,old_y=size.y,old_width=size.width,old_height=size.height;if(old_x!=x){if(x>=0){size.x=Math.min(old_x,x);}}if(old_y!=y){if(y>=0){size.y=Math.min(old_y,y);}}if(old_width!=width){if(width<0){width=Math.abs(width);}size.width=size.width+width;}if(old_height!=height){if(height<0){height=Math.abs(height);}size.height=size.height+height;}};_pChartGaugeValueAxisControl._setRange=function(){var tickmin,tickmax,delta;tickmin= +(this._tickmin!=null?this._tickmin:this._datamin);tickmax= +(this._tickmax!=null?this._tickmax:this._datamax);if(this._scrollMin||this._scrollMax){tickmin=this._scrollMin;tickmax=this._scrollMax;this._scrollMin=null;this._scrollMax=null;}delta=tickmax-tickmin;if(delta==0.0){var val=0;if(this.parent.seriesset[0]&&this.parent.seriesset[0]._datapoints&&this.parent.seriesset[0]._datapoints.points[1]){val=this.parent.seriesset[0]._datapoints.points[1];}if(tickmax==0){tickmax=0;if(val>=0){tickmax=val>tickmax?val:tickmax;}}if(tickmin==0){if(val>=0){tickmin=0;}else{tickmin=val;}}}else{var tickscale=this.autotickscale?this.autotickscale*0.01:0;if(this._tickmin==null){tickmin-=delta*tickscale;if(tickmin<0&&this._datamin!=null&&this._datamin>=0){tickmin=0;}}if(this._tickmax==null){tickmax+=delta*tickscale;if(tickmax>0&&this._datamax!=null&&this._datamax<=0){tickmax=0;}}}this._min=tickmin;this._max=tickmax;};}if(!nexacro.ChartGaugeIndicatorControl){nexacro.ChartGaugeIndicatorControl=function(id,parent,graphicsControl){this.id=id;this.parent=parent;this._graphicsControl=graphicsControl;this._src=null;this.linetype=true;this._createGroup();};var _pChartGaugeIndicatorControl=nexacro.ChartGaugeIndicatorControl.prototype=nexacro._createPrototype(nexacro.Object,nexacro.ChartGaugeIndicatorControl);_pChartGaugeIndicatorControl._type_name="ChartGaugeIndicatorControl";_pChartGaugeIndicatorControl._group=null;_pChartGaugeIndicatorControl._indicatorBarRect=null;_pChartGaugeIndicatorControl._indicatorBarAngle=null;_pChartGaugeIndicatorControl._indicatorCenterPin=null;_pChartGaugeIndicatorControl._calcpos=0;_pChartGaugeIndicatorControl._indent=0;_pChartGaugeIndicatorControl._indentouter=0;_pChartGaugeIndicatorControl._image="";_pChartGaugeIndicatorControl._imagewidth=undefined;_pChartGaugeIndicatorControl._imageheight=undefined;_pChartGaugeIndicatorControl._imageloaded=false;_pChartGaugeIndicatorControl._oldrotate=0;_pChartGaugeIndicatorControl.visible=false;_pChartGaugeIndicatorControl.fillstyle="";_pChartGaugeIndicatorControl.centerpinstyle="";_pChartGaugeIndicatorControl.centerpinradius=0;_pChartGaugeIndicatorControl.centerpinautogradation="none";_pChartGaugeIndicatorControl.linestyle="";_pChartGaugeIndicatorControl.opacity=1;_pChartGaugeIndicatorControl.size=0;_pChartGaugeIndicatorControl.indent=0;_pChartGaugeIndicatorControl.indentouter=0;_pChartGaugeIndicatorControl.image="";_pChartGaugeIndicatorControl.imagewidth=undefined;_pChartGaugeIndicatorControl.imageheight=undefined;_pChartGaugeIndicatorControl.destroy=function(){var group=this._graphicsControl.getObjectByID("ChartIndicatorGroup");if(group){this._graphicsControl.removeChild(group);group.clear();this._group.destroy();}this._group=null;this._indicatorBarRect=null;this._indicatorBarAngle=null;this._indicatorCenterPin=null;this._calcpos=null;this._indent=null;this._indentouter=null;this._image=null;this._imagewidth=null;this._imageheight=null;this._imageloaded=null;this._oldrotate=null;this.visible=null;this.fillstyle=null;this.linetype=null;this.centerpinstyle=null;this.centerpinradius=null;this.centerpinautogradation=null;this.linestyle=null;this.opacity=null;this.size=null;this.indent=null;this.indentouter=null;this.image=null;this.imagewidth=null;this.imageheight=null;if(this.parent){if(this.parent.indicator){this.parent._deleteContentsProp("indicator");this.parent.indicator=null;}this.parent._changedData=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartGaugeIndicatorControl._clear=function(){if(this._oldrotate){var items=[this._indicatorBarRect,this._indicatorBarAngle,this._indicatorCenterPin,this._image];for(var i=0;i<items.length;i++ ){items[i]._matrix.reset();items[i]._matrix.set_translateX(0);items[i]._matrix.set_translateY(0);items[i].setTransform("translate("+0+","+0+")");}this._oldrotate=0;}};_pChartGaugeIndicatorControl.set_centerpinautogradation=function(val){if(val===undefined||val===null){val="none";}if(this.centerpinautogradation!=val){this._changeContentsProperty("centerpinautogradation",val,this.centerpinautogradation);this.centerpinautogradation=val;this.on_apply_centerpinautogradation(val);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_centerpinautogradation=function(on_apply_centerpinautogradation){};_pChartGaugeIndicatorControl.set_linetype=function(val){if(this.parent.gaugetype=="vertical"||this.parent.gaugetype=="horizontal"){return;}if(val==="false"){val=false;}if(val===undefined||val===null||val===""){val=true;}val=nexacro._toBoolean(val);if(this.linetype!=val){this._changeContentsProperty("linetype",val,this.linetype);this.linetype=val;this.on_apply_linetype(val);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_linetype=function(val){if(this._group){if(val==true){this._indicatorBarRect.set_visible(true);this._indicatorBarAngle.set_visible(false);}else{this._indicatorBarRect.set_visible(false);this._indicatorBarAngle.set_visible(true);}if(this.centerpinradius==0){this._indicatorCenterPin.set_visible(false);}else{this._indicatorCenterPin.set_visible(true);}this.parent._rearrange=true;}};_pChartGaugeIndicatorControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_visible=function(visible){if(this._group){this._group.set_visible(visible);this.parent._rearrange=true;}};_pChartGaugeIndicatorControl.set_centerpinradius=function(val){if(val!==undefined){if(isNaN(val)||val<0){val=10;}if(val!=""){val=parseInt(val);}}else{val=10;}if(this.centerpinradius!==val){this._changeContentsProperty("centerpinradius",val,this.centerpinradius);this.centerpinradius=val;this.on_apply_centerpinradius(val);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_centerpinradius=function(centerpinradius){if(this.parent.gaugetype!="vertical"&&this.parent.gaugetype!="horizontal"){if(centerpinradius==0){this._indicatorBarRect.set_visible(false);}else{this._indicatorBarRect.set_visible(true);}}this.parent._rearrange=true;};_pChartGaugeIndicatorControl.set_size=function(val){if(val!==undefined){if(isNaN(val)||val<0){return;}if(val!=""){val=parseInt(val);}}if(this.size!==val){this._changeContentsProperty("size",val,this.size);this.size=val;this.on_apply_size(val);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_size=function(size){if(!nexacro._ChartGraphicsLib.isEmpty(size)){this._size=this.size;}else{this._size=5;}this.parent._rearrange=true;};_pChartGaugeIndicatorControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;this._indicatorBarRect.set_strokepen(linestyle);this._indicatorBarAngle.set_strokepen(linestyle);}else{this._borderwidth=1;}};_pChartGaugeIndicatorControl.set_fillstyle=function(val){this.fillstyle=val;if(val){if(this._fillstyle==null||this._fillstyle.value!=val){var oldValue;if(this._fillstyle){oldValue=this._fillstyle.value;}this._changeContentsProperty("fillstyle",val,oldValue);var fillstyle=nexacro.BackgroundObject(val,this);this._fillstyle=fillstyle;this.on_apply_fillstyle(fillstyle);}}else{if(this._fillstyle){this._fillstyle=null;this.on_apply_fillstyle(null);}}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_fillstyle=function(fillstyle){this._indicatorBarRect.set_fillstyle(fillstyle?fillstyle.value||fillstyle:"");this._indicatorBarAngle.set_fillstyle(fillstyle?fillstyle.value||fillstyle:"");};_pChartGaugeIndicatorControl.set_centerpinstyle=function(val){if(val==""){val=null;}this.centerpinstyle=val;if(val){if(this._centerpinstyle==null||this._centerpinstyle.value!=val){var oldValue;if(this._centerpinstyle){oldValue=this.centerpinstyle.value;}this._changeContentsProperty("centerpinstyle",val,oldValue);var fillstyle=nexacro.BackgroundObject(val,this);this._centerpinstyle=fillstyle;this.on_apply_centerpinstyle(fillstyle);}}else{if(this._centerpinstyle){this._centerpinstyle=null;this.on_apply_centerpinstyle(null);}}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_centerpinstyle=function(fillstyle){this._indicatorCenterPin.set_fillstyle(fillstyle?fillstyle.value||fillstyle:"");};_pChartGaugeIndicatorControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}};_pChartGaugeIndicatorControl.on_apply_opacity=function(opacity){this._indicatorBarRect.set_opacity(opacity?opacity._sysvalue||opacity:1);this._indicatorBarAngle.set_opacity(opacity?opacity._sysvalue||opacity:1);};_pChartGaugeIndicatorControl.set_indent=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!=""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(IVal<0||IVal>100){return;}if(this.indent!=val){this._changeContentsProperty("indent",val,this.indent);this.indent=val;this.on_apply_indent(IVal);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_indent=function(indent){if(indent){this._indent=indent;this.parent._rearrange=true;}};_pChartGaugeIndicatorControl.set_indentouter=function(val){var IVal=null;if(val!==undefined&&val!==null&&val!=""){if(nexacro._isNumber(val)){IVal=val;}else{if(val.length>0){IVal= +val;if(isNaN(IVal)){return;}}}}if(IVal<0||IVal>100){return;}if(this.indentouter!=val){this._changeContentsProperty("indentouter",val,this.indentouter);this.indentouter=val;this.on_apply_indentouter(IVal);}this.parent._draw();};_pChartGaugeIndicatorControl.on_apply_indentouter=function(indent){this._indentouter=indent;this.parent._rearrange=true;};_pChartGaugeIndicatorControl.set_image=function(val){if(this.image!=val){this._changeContentsProperty("image",val,this.image);this.image=val;this._image._redrawparent=this;this._image._redrawcallback=this.onloadedindicatorimgs;this.on_apply_image(val);if(this._image){if(this._image.width>0){this.on_apply_imagewidth(this._image.width);}if(this._image.height>0){this.on_apply_imageheight(this._image.height);}}}};_pChartGaugeIndicatorControl.on_apply_image=function(image){if(image){this._image.set_src(image);}};_pChartGaugeIndicatorControl.on_apply_imagewidth=function(imagewidth){this._image.set_width(imagewidth);this._rearrange=true;};_pChartGaugeIndicatorControl.on_apply_imageheight=function(imageheight){this._image.set_height(imageheight);this._rearrange=true;};_pChartGaugeIndicatorControl.onloadedindicatorimgs=function(){if(this._image){this._imageloaded=true;}this.parent._rearrange=true;this.parent._draw();};_pChartGaugeIndicatorControl._changeContentsProperty=function(nm,newVal,oldVal){var contents=this.parent.contents;if(contents&&contents.indicator){contents.indicator[nm]=newVal;}};_pChartGaugeIndicatorControl._createGroup=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id("ChartIndicatorGroup");this._graphicsControl.addChild(this._group);this._indicatorBarRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._indicatorBarRect.set_id("ChartindicatorBarRect");this._group.addChild(this._indicatorBarRect);this._indicatorBarAngle=new nexacro.ChartGraphicsPath();this._indicatorBarAngle.set_id("ChartindicatorBarAngle");this._group.addChild(this._indicatorBarAngle);this._indicatorCenterPin=new nexacro.ChartGraphicsPath();this._indicatorCenterPin.set_id("ChartindicatorCenterPin");this._group.addChild(this._indicatorCenterPin);if(this.parent.gaugetype=="vertical"||this.parent.gaugetype=="horizontal"){this._indicatorBarAngle.visible=false;this._indicatorCenterPin.visible=false;}this._createImage();};_pChartGaugeIndicatorControl._createImage=function(){this._image=new nexacro.ChartGraphicsImage(0,0);this._image.set_id("ChartChangeIndicatorImage");this._image._owner=this;this._group.addChild(this._image);};_pChartGaugeIndicatorControl._afterSetProperties=function(){this.on_apply_size(this._size);this.on_apply_linestyle(this._linestyle);this.on_apply_fillstyle(this._fillstyle);this.on_apply_opacity(this._opacity);this.on_apply_indent(this._indent);this.on_apply_indentouter(this._indentouter);this.on_apply_image(this.image);};_pChartGaugeIndicatorControl._drawindicator=function(left,top,width,height){if(!this.visible){return;}var linestyle=this._linestyle||"1px solid green";var fillstyle=this._fillstyle||"green";var opacity=this._opacity||0.5;var indentouter=this._indentouter;var size,indent=this._indent,indicatorBarRect=null;if((this._size==""||this._size==undefined)&&this._size!==0){size=5;}else{size=this._size;}if(this.parent){var chart=this.parent;if(!chart.seriesset[0]||this.image&&!this._imageloaded){return;}if(this.image&&this._image){this._image.visible=true;indicatorBarRect=this._image;this._indicatorBarRect.visible=false;this._indicatorBarAngle.visible=false;}else{indicatorBarRect=this._indicatorBarRect;if(this.parent.gaugetype=="vertical"||this.parent.gaugetype=="horizontal"){this._indicatorBarAngle.visible=false;this._indicatorCenterPin.visible=false;}else{if(this.centerpinradius>0){this._indicatorCenterPin.visible=true;}else{this._indicatorCenterPin.visible=false;}if(this.linetype==true){this._indicatorBarRect.visible=true;this._indicatorBarAngle.visible=false;}else{this._indicatorBarRect.visible=false;this._indicatorBarAngle.visible=true;indicatorBarRect=this._indicatorBarAngle;}}this._image.visible=false;}if(chart.gaugetype=="vertical"){indicatorBarRect.set_x(left+chart._boardRectLeft);indicatorBarRect.set_y(top-(size/2)+chart._boardRectTop);indicatorBarRect.set_width(width);indicatorBarRect.set_height(size);}else if(chart.gaugetype=="horizontal"){indicatorBarRect.set_x(left-(size/2)+width-1);indicatorBarRect.set_y(top+chart._boardRectTop);indicatorBarRect.set_width(size);indicatorBarRect.set_height(height);}else{var pos=width;var centerX=chart._centerLeft+chart._boardRectLeft;var centerY=chart._centerTop+chart._boardRectTop;var posX=Math.sin(pos)*chart._gaugeradius+centerX;var posY=( -Math.cos(pos)*chart._gaugeradius)+centerY;var disX=posX-centerX;var disY=posY-centerY;var distance=Math.sqrt((Math.abs(disX*disX)+Math.abs(disY*disY)));var barrotate;if(this.linetype==true||this.centerpinradius<=0){indicatorBarRect.set_x(centerX-(size/2));indicatorBarRect.set_y(centerY-distance+indentouter);indicatorBarRect.set_width(size);indicatorBarRect.set_height(distance-indent-indentouter);barrotate=pos*(180/Math.PI);if(this._oldrotate){indicatorBarRect.rotate(barrotate-this._oldrotate,centerX,centerY);}else{indicatorBarRect.rotate(barrotate,centerX,centerY);}}else{var centerraduis=parseInt(chart._gaugeradius*(this.centerpinradius*0.005));var p0=(centerX-centerraduis)+" "+centerY;var l0=" L"+centerX+" "+(centerY-(distance-indent-indentouter));var l1=" L"+(centerX+centerraduis)+" "+centerY;var pathData="M"+p0+" L"+l0+" L"+l1+" Z";indicatorBarRect.setPathData(pathData);barrotate=pos*(180/Math.PI);if(this._oldrotate){indicatorBarRect.rotate(barrotate-this._oldrotate,centerX,centerY);}else{indicatorBarRect.rotate(barrotate,centerX,centerY);}}if(this.centerpinradius>0){this._drawCenterPin(centerX,centerY);}this._oldrotate=barrotate;}indicatorBarRect.set_strokepen(linestyle);indicatorBarRect.set_fillstyle(fillstyle);indicatorBarRect.set_opacity(opacity);}};_pChartGaugeIndicatorControl._drawCenterPin=function(centerX,centerY){var chart=this.parent;var boardborderWidth=chart._boardBorderWidth?chart._boardBorderWidth:0;var boardborderHeight=chart._boardBorderHeight?chart._boardBorderHeight:0;var maxRadius=Math.min((chart._boardWidth-(boardborderWidth*2)),(chart._boardHeight-(boardborderHeight*2)))/2;maxRadius-=(chart.valueaxes[0]?chart.valueaxes[0]._allaxisgapsize:0);var centerpinstyle=this._centerpinstyle||nexacro.BackgroundObject("linear-gradient(to bottom,#ddffff 50%, #000000 100%)",this);var rStartAngle=0;var rEndAngle=6.28319;var svradius=maxRadius*(this.centerpinradius*0.01);var slice=this._indicatorCenterPin,itemId;var rMiddleAngle,w=svradius,h=svradius,p0,pM0,la,pathData;rMiddleAngle=rEndAngle/2;p0=(Math.sin(rStartAngle)*w+centerX)+" "+( -Math.cos(rStartAngle)*h+centerY);pM0=(Math.sin(rMiddleAngle)*w+centerX)+" "+( -Math.cos(rMiddleAngle)*h+centerY);la=" 1";pathData="M"+p0+" A"+w+" "+h+" 0"+la+" 1 "+pM0;pathData+=" A"+w+" "+h+" 0"+la+" 1 "+p0;pathData+="Z";slice.set_id(itemId);slice.setPathData(pathData);var sv_fillColor=centerpinstyle;var bTarget=false;if(nexacro._Browser!="Runtime"&&(this.centerpinautogradation!="none")){if(centerpinstyle instanceof nexacro._BackgroundObject){if(!centerpinstyle.gradient){bTarget=true;sv_fillColor=centerpinstyle.value;}}else if(centerpinstyle){if(centerpinstyle.indexOf("gradient")<0){bTarget=true;}}if(!this.parent.seriesset||!this.parent.seriesset[0]){bTarget=false;}if(bTarget){var series=this.parent.seriesset[0];var lightcolor=series._shadeColor(sv_fillColor, -70);var darkcolor=series._shadeColor(sv_fillColor,30);if(this.centerpinautogradation=="center"){sv_fillColor=nexacro.BackgroundObject("linear-gradient(to bottom,"+lightcolor+" 50%, "+centerpinstyle.value+" 100%)");}else{sv_fillColor=nexacro.BackgroundObject("linear-gradient(to bottom,"+centerpinstyle.value+" 50%, "+darkcolor+" 100%)");}}}slice.set_fillstyle(sv_fillColor);if(bTarget){var offset=6;var gradient=sv_fillColor.gradient;gradient.style="radial";var point=gradient.point;point.startX=point.endX=50+offset;point.startY=point.endY=50-offset;gradient.startradius=0;gradient.endradius=0.5;}slice._jobDrawflags=slice._drawflags=2;};}
if(!nexacro.FloatChart){nexacro.FloatChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._AxisChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");this._visibleSeriesset=[];};var _pFloatChart=nexacro._createPrototype(nexacro._AxisChartBase,nexacro.FloatChart);nexacro.FloatChart.prototype=_pFloatChart;_pFloatChart._type_name="FloatChart";_pFloatChart.categoryaxis=null;_pFloatChart.barsize=undefined;_pFloatChart.rotateaxis=true;_pFloatChart.waterfall=false;_pFloatChart.waterfallsumtext="Gross";_pFloatChart._drawing=false;_pFloatChart._isnegativedata=false;_pFloatChart._barsize=0.8;_pFloatChart._chartbarsize=0.8;_pFloatChart._barVisibleSeriesCnt=0;_pFloatChart.isdatetimevalue=false;_pFloatChart._isCompositeSeries=false;_pFloatChart._rotateaxisX=null;_pFloatChart._rotateaxisY=null;_pFloatChart._invalidcategorycolumn=false;_pFloatChart.on_create_contents=function(){var control=this.getElement();if(control){nexacro._AxisChartBase.prototype.on_create_contents.call(this);}};_pFloatChart.on_destroy_contents=function(){this.categorycolumn=null;this.barsize=null;this._drawing=null;this._isnegativedata=null;this._barsize=null;this._chartbarsize=null;this._barVisibleSeriesCnt=null;this.isdatetimevalue=null;if(this.categoryaxis){this._deleteCategoryaxis();}nexacro._AxisChartBase.prototype.on_destroy_contents.call(this);return true;};_pFloatChart.set_categoryaxis=function(){};_pFloatChart._measure=function(){nexacro._ChartBase.prototype._measure.call(this);if(this._recreate){this._initAxes();this._setDatapointFormat();this._setDatapoint();this._setDataMinMax();this._resetAxes();}this._setAxes();};_pFloatChart._appendValueaxis=function(contents){if(!this.isdatetimevalue){nexacro._ChartBase.prototype._appendValueaxis.call(this,contents);return;}var axis,id,axisContents={},valueaxesLeng= -1,location;if(!this._isApplyContents&&nexacro._ChartGraphicsLib.isEmpty(contents)){return valueaxesLeng;}if(typeof (contents)=="object"){axisContents=contents;id=contents.id;}if(!id){valueaxesLeng=this.valueaxes.length+1;id="Valueaxis"+valueaxesLeng;contents.id=id;}if(!this._isApplyContents){this.contents.valueaxes.push(axisContents);}if(this.isdatetimevalue){axis=new nexacro.ChartFloatValueAxisControl(id,this,this._graphicsControl);}else{axis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);}axis._type_name="ChartFloatValueAxisControl";axis._type="valueAxis";if(this.isdatetimevalue){location="top";if(!contents.opposite){contents.opposite=true;}}else{location=contents.opposite||"left";}axis._location=location;this._drawing=true;this._setProperties(axisContents,axis);this._drawing=false;axis.on_apply_opposite(contents.opposite);this.valueaxes.push(axis);this._axes.push(axis);if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}return axis;};_pFloatChart.set_isdatetimevalue=function(v){v=nexacro._toBoolean(v);if(v){this.set_rotateaxis(true);this.set_waterfall(false);}this.isdatetimevalue=v;this._reset=true;this._draw();};_pFloatChart.set_categorycolumn=function(v){if(v===undefined||v===null){v="";}if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}if(this._changedData==true){this._reset=true;this._draw();}else{this._draw();}};_pFloatChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pFloatChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pFloatChart.on_apply_binddataset=function(){var dsObj=this._binddataset;if(this._dataMap){this._dataMap.clear();this._dataMap=null;}if(dsObj){this._checkcategorycolumn();this._dataMap=new nexacro._DatasetMap(false);if(this.isdatetimevalue){this._dataMap.buildDataWithDataset(dsObj,"",this._createObjectItem,this);}else{this._dataMap.buildDataWithDataset(dsObj,this._getBindableValue("categorycolumn"),this._createObjectItem,this);}this._setDatasetEventHandlers(dsObj);}this._changedData=true;};_pFloatChart.set_barsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.barsize!=val){this.barsize=val;this.on_apply_barsize(lVal);}this._reset=true;this._draw();};_pFloatChart.on_apply_barsize=function(barsize){if(!nexacro._ChartGraphicsLib.isEmpty(barsize)){this._barsize=barsize*0.01;this._chartbarsize=barsize*0.01;}else{this._barsize=0.8;this._chartbarsize=0.8;}this._changedData=true;};_pFloatChart.set_rotateaxis=function(val){if(val===undefined||val===null){return;}if(this.isdatetimevalue==true){val=true;}val=nexacro._toBoolean(val);if(this.rotateaxis!=val){this.rotateaxis=val;this.on_apply_rotateaxis();}this._drawing=false;this._reset=true;this._draw();};_pFloatChart.on_apply_rotateaxis=function(){var categoryaxis=this.categoryaxis;var valueaxes=this.valueaxes;var rotateaxis=this.rotateaxis;var i;if(categoryaxis){categoryaxis.on_apply_opposite(categoryaxis.opposite);categoryaxis.on_apply_titlerotate(categoryaxis.titlerotate);}else{if(rotateaxis){this._rotateaxisX=true;}else{this._rotateaxisX=false;}}if(valueaxes.length>0){for(i=0;i<valueaxes.length;i++ ){var valueaxis=valueaxes[i];if(valueaxis){if(this.isdatetimevalue){valueaxis.opposite=true;}valueaxis.on_apply_opposite(valueaxis.opposite);valueaxis.on_apply_titlerotate(valueaxis.titlerotate);}}}else{if(rotateaxis){this._rotateaxisY=true;}else{this._rotateaxisY=false;}}this._xaxes=[];this._yaxes=[];for(i=0;i<this._axes.length;i++ ){var axis=this._axes[i];var location=axis._location;if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}}this._rearrange=true;this._changedData=true;};_pFloatChart.set_waterfallsumtext=function(val){if(this.waterfallsumtext!=val){this.waterfallsumtext=val;this.on_apply_waterfallsumtext(val);}this._drawing=false;this._reset=true;this._draw();};_pFloatChart.on_apply_waterfallsumtext=function(waterfallsumtext){this._rearrange=true;this._changedData=true;};_pFloatChart.set_waterfall=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.waterfall!=val){this.waterfall=val;this.on_apply_waterfall();}this._drawing=false;this._reset=true;this._draw();};_pFloatChart.on_apply_waterfall=function(){this._rearrange=true;this._changedData=true;};_pFloatChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){this._drawing=true;this._drawing=false;this._changedData=true;this._reset=true;this._draw();}};_pFloatChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){this._drawing=true;this._drawing=false;this._changedData=true;this._reset=true;this._draw();}};_pFloatChart.showCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(true);}};_pFloatChart.hideCategoryaxis=function(){if(this.categoryaxis){this.categoryaxis.set_visible(false);}};_pFloatChart._destroySubControl=function(){nexacro._AxisChartBase.prototype._destroySubControl.call(this);if(this.categoryaxis){this._deleteCategoryaxis();}};_pFloatChart._deleteCategoryaxis=function(){var categoryaxis=this.categoryaxis;if(categoryaxis){this._deleteAxis(categoryaxis,true);this._changedData=true;}};_pFloatChart._createSeries=function(id){var series=new nexacro.ChartFloatSeriesControl(id,this,this._graphicsControl);return series;};_pFloatChart._setSeries=function(){var categoryaxis,valueaxis;nexacro._AxisChartBase.prototype._setSeries.call(this);nexacro._ChartGraphicsLibArray.forEach(this.seriesset,function(obj,index){if(obj){categoryaxis=this.categoryaxis;valueaxis=this.getValueaxisByID(obj.valueaxis);if(categoryaxis){if(this.valueaxes.length==0){categoryaxis.on_apply_visible(false);categoryaxis.on_apply_boardlinevisible(false);}else{categoryaxis._afterSetProperties();categoryaxis.on_apply_visible(categoryaxis.visible);}}if(valueaxis){valueaxis.on_apply_visible(valueaxis.visible);obj.on_apply_valueaxis(valueaxis.id);}else{var length=this.valueaxes.length;if(length<=0){return false;}for(var i=0;i<length;i++ ){valueaxis=this.valueaxes[i];if(valueaxis){var group=valueaxis._group;if(group){var visible=valueaxis.visible;if(visible){valueaxis.on_apply_visible(visible);obj.on_apply_valueaxis(valueaxis.id);break;}}}}}if(!categoryaxis){return false;}if(categoryaxis._direction=="x"){obj._xaxis=categoryaxis;obj._yaxis=valueaxis;}else{obj._xaxis=valueaxis;obj._yaxis=categoryaxis;}}},this);};_pFloatChart._createCategoryaxis=function(o,id){if(this.categoryaxis){return false;}var axis,location;if(!id){id="Categoryaxis";}if(this.isdatetimevalue){axis=new nexacro.ChartFloatCategoryAxisControl(id,this,this._graphicsControl);}else{axis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);}axis._type_name="ChartCategoryAxisControl";axis._type="categoryAxis";if(this.isdatetimevalue){location="left";if(o&&o.opposite){o.opposite=true;}}else{if(o){location=o.opposite?"top":"bottom";}if(this.rotateaxis&&this._rotateaxisX){location="left";}}var opposite=o?o.opposite:axis.opposite;axis.on_apply_opposite(opposite);axis.location=location;this.categoryaxis=axis;this._axes.push(axis);if(location=="top"||location=="bottom"){this._xaxes.push(axis);}else{this._yaxes.push(axis);}return axis;};_pFloatChart._createValueaxes=function(o,id){var location;var valueaxis;if(this.isdatetimevalue){valueaxis=new nexacro.ChartFloatValueAxisControl(id,this,this._graphicsControl);}else{valueaxis=new nexacro.ChartAxisControl(id,this,this._graphicsControl);}valueaxis._type="valueAxis";if(this.isdatetimevalue){location="top";o.opposite=true;}else{if(o){location=o.opposite?"right":"left";}if(this.rotateaxis&&this._rotateaxisY){location="bottom";}}var opposite=o.opposite||valueaxis.opposite;valueaxis.on_apply_opposite(opposite);this.valueaxes.push(valueaxis);this._axes.push(valueaxis);if(location=="top"||location=="bottom"){this._xaxes.push(valueaxis);}else{this._yaxes.push(valueaxis);}return valueaxis;};_pFloatChart._setSeriesDataMinMax=function(series){if(!this.isdatetimevalue){nexacro._AxisChartBase.prototype._setSeriesDataMinMax.call(this,series);return;}var datapoints=series._datapoints,xaxis=series._xaxis,yaxis=series._yaxis,xmin=Number.POSITIVE_INFINITY,ymin=Number.POSITIVE_INFINITY,xmax=Number.NEGATIVE_INFINITY,ymax=Number.NEGATIVE_INFINITY,points,pointsize,val,f,format;points=datapoints.points;pointsize=datapoints.pointsize;format=datapoints.format;var valmin,valmax,valcat;for(var i=0;i<points.length;i+=pointsize){if(points[i]==null){}valmin=points[i];valcat=points[i+1];valmax=points[i+2];if(valmin==null){valmin=xmin;}if(valmax==null){valmax=xmax;}valmin=this._checkDateValue(valmin);valmax=this._checkDateValue(valmax);f=format[2];if(!f||valmax==Number.MAX_VALUE||valmax== -Number.MAX_VALUE){continue;}if(f.x){if(valmin<xmin){xmin=valmin;}if(valmax>xmax){xmax=valmax;}}f=format[1];if(!f||valcat==Number.MAX_VALUE||valcat== -Number.MAX_VALUE){continue;}if(f.y){if(valcat<ymin){ymin=valcat;}if(valcat>ymax){ymax=valcat;}}}if(xaxis._tickmin){xmin=xaxis._tickmin;}if(xaxis._tickmax){xmax=xaxis._tickmax;}if(yaxis._tickmin){ymin=yaxis._tickmin;}if(yaxis._tickmax){ymax=yaxis._tickmax;}if(series.barvisible){var delta,barwidth;series.on_apply_barsize(series.barsize);barwidth=series._barsize||this._barsize;barwidth=this._getcheckTimeAxisBarWidth(barwidth);switch(series._baralign){case "left":delta=0;break;case "right":delta= -barwidth;break;default:delta= -barwidth/2;}if(this.rotateaxis){ymin+=delta;ymax+=delta+barwidth;}else{xmin+=delta;xmax+=delta+barwidth;}}if(xaxis&&xaxis._updateMinMax){xaxis._updateMinMax(xmin,xmax);}if(yaxis&&yaxis._updateMinMax){yaxis._updateMinMax(ymin,ymax);}};_pFloatChart._setSeriesDatapointsFormat=function(series){var format=series._datapoints.format,isXCategory=false,isYCategory=false;if(!series._xaxis||!series._yaxis){return false;}if(series._xaxis._type=="categoryAxis"){isXCategory=true;}if(series._yaxis._type=="categoryAxis"){isYCategory=true;}if(!format){format=[];format.push({x:true,category:isXCategory,required:true});format.push({y:true,category:isYCategory,required:true});if(this.rotateaxis){format.push({x:true,category:isXCategory,required:true});format.push({x:true,category:isXCategory,required:false});}else{format.push({y:true,category:isYCategory,required:true,defaultValue:0});format.push({y:true,category:isYCategory,required:false,defaultValue:0});}series._datapoints.format=format;}};_pFloatChart._setDatapointFormat=function(){nexacro._AxisChartBase.prototype._setDatapointFormat.call(this);};_pFloatChart._setSeriesDatapoints=function(series){var datapoints,format,pointsize,points,insertSteps,data,p,val,f,xaxis=series._xaxis,yaxis=series._yaxis;datapoints=series._datapoints;format=datapoints.format;datapoints.pointsize=format.length;pointsize=datapoints.pointsize;points=datapoints.points;data=series._data;var i,j,k;for(i=j=0;i<data.length;i++ ,j+=pointsize){p=data[i];var nullify=p==null;if(!nullify){for(k=0;k<pointsize;k++ ){val=p[k];f=format[k];if(f){if(f.category==false&&val!=null){if(!this.isdatetimevalue){val= +val;}if(isNaN(val)){if(this.isdatetimevalue){}else{val=null;}}else if(val==Infinity){val=Number.MAX_VALUE;}else if(val== -Infinity){val= -Number.MAX_VALUE;}}if(val==null){if(f.required){nullify=true;}if(f.defaultValue!=null){val=f.defaultValue;}}}points[j+k]=val;}}if(nullify){for(k=0;k<pointsize;k++ ){val=points[j+k];if(val!=null){}else{points[j+k]=null;}}}}};_pFloatChart._setDatapoint=function(){nexacro._AxisChartBase.prototype._setDatapoint.call(this);var seriesset=this.seriesset;this._barsize=this._chartbarsize;var visibleSeriesCnt=this.seriesset.length;var i;var series;for(i=0;i<visibleSeriesCnt;i++ ){series=seriesset[i];if(series){series._baralign="center";}}};_pFloatChart._getHighlightVisible=function(){var seriesset=this.seriesset;if(seriesset){var length=seriesset.length,highlightbarvisible=false;for(var i=0;i<length;i++ ){var s=seriesset[i];if(s){if(s.highlightbarvisible||s.highlightpointvisible||s.highlightlinevisible){highlightbarvisible=true;break;}}}return highlightbarvisible;}};_pFloatChart._deleteSeries=function(series_,index){nexacro._ChartBase.prototype._deleteSeries.call(this,series_,index);var serieslength=this.seriesset.length;var series=this.seriesset;if(this.valueaxes){var valueaxes=this.valueaxes;for(var i=valueaxes.length-1;i> -1;i-- ){var bused=false;var valueaxis=valueaxes[i];if(valueaxis){for(var j=0;j<serieslength;j++ ){var s=series[j];if(s){if(s._yaxis&&s._yaxis.id==valueaxis.id){bused=true;}}}}if(!bused||serieslength==0){valueaxis._used=false;valueaxis.on_apply_visible(false);valueaxis.on_apply_boardlinevisible(false);}}}if(serieslength==0){if(this.categoryaxis){this.categoryaxis.on_apply_visible(false);this.categoryaxis.on_apply_boardlinevisible(false);}if(this.hrangebar){this.hrangebar.on_apply_visible(false);}if(this.vrangebar){this.vrangebar.on_apply_visible(false);}}};_pFloatChart._checkDateValue=function(v){var val=v;if(v==undefined||v==null){val=null;}else{var new_obj=null;var val=v;if(val instanceof nexacro.Date){val=val.getTime();}else if(val instanceof Date){val=val.getTime();}else{if(typeof val=="string"){new_obj=new nexacro.Date(val);val=new_obj.getTime();}else if(typeof val=="number"&&val>0){val=new Date(val);new_obj=new nexacro.Date();new_obj.setTime(val.getTime());val=new_obj.getTime();}}if(val!==undefined){if(isNaN(val)){val=null;}}}return val;};}if(!nexacro.ChartFloatCategoryAxisControl){nexacro.ChartFloatCategoryAxisControl=function(id,parent,graphicsControl){nexacro.ChartAxisControl.call(this,id,parent,graphicsControl);if(parent.isdatetimevalue){this._direction="y";}this._chart=parent;};var _pChartFloatCategoryAxisControl=nexacro._createPrototype(nexacro.ChartAxisControl,nexacro.ChartFloatCategoryAxisControl);nexacro.ChartFloatCategoryAxisControl.prototype=_pChartFloatCategoryAxisControl;_pChartFloatCategoryAxisControl._type_name="ChartFloatCategoryAxisControl";_pChartFloatCategoryAxisControl.boardlinevisible=false;_pChartFloatCategoryAxisControl.set_boardlinevisible=function(val){nexacro.ChartAxisControl.prototype.set_boardlinevisible.call(this,val);};_pChartFloatCategoryAxisControl._arrangeTickGroup=function(width,height){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._arrangeTickGroup.call(this,width,height);return;}var axisLine=this._axisLine,direction=this._direction,location=this._location,axislinestyle=this._axislinestyle,axislinewidth=0,x=0,y=0,axisRectWidth=0,axisRectHeight=0,tickendspace=this._tickendspace,axisRect=this._axisRect.getGlobalBoundRect(false,true);if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;axislinewidth*=0.5;}var tickstartgap=0;var tickendgap=0;var charttype=this.parent._type_name;var type=this._type;y=axisRect.top-tickstartgap-tickendspace;axisRectHeight=axisRect.height+tickstartgap+tickendgap+tickendspace;if(location=="left"){x=axisRect.right-axislinewidth;}else{x=axisRect.left+axislinewidth;}if(axisLine){axisLine.set_x1(x);axisLine.set_y1(y);axisLine.set_x2(x);axisLine.set_y2(y+axisRectHeight);}var ticks=this._ticks,tick,value,ticksize,tickXoff=0,tickYoff=0,tickmin=this._min,tickmax=this._max,tickboardLine,vc=0;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){ticksize=10;}else{ticksize=this.ticksize;}if(ticksize>0){if(location=="left"){tickXoff= -ticksize;x-=axislinewidth;}else if(location=="right"){tickXoff=ticksize;x+=axislinewidth;}}var xtickendspace=this.parent._xaxes[0]._tickendspace;var ytickendspace=this.parent._yaxes[0]._tickendspace;var tickgap=0;var yGap;for(var i=0;i<ticks.length;i++ ){tick=ticks[i].lineElement;tickboardLine=ticks[i].boardlineElement;value=ticks[i].v;if(isNaN(value)||value<tickmin||value>tickmax){continue;}vc=this.p2c(value);y=vc+axisRect.top;ticks[i]._point={"x1":x,"y1":y,"x2":x+tickXoff,"y2":y+tickYoff,"vc":vc};if(tick){tick.set_x1(x);tick.set_y1(y);tick.set_x2(x+tickXoff);tick.set_y2(y+tickYoff);}if(tickboardLine){tickboardLine.set_x1(0);tickboardLine.set_x2(width+xtickendspace);if(i>0){yGap=(ticks[i-1]._point.vc-vc)/2;tickboardLine.set_y1(vc+yGap);tickboardLine.set_y2(vc+yGap);}else{tickboardLine.set_visible(false);}}}this.on_apply_boardlinevisible(this.boardlinevisible);};}if(!nexacro.ChartFloatValueAxisControl){nexacro.ChartFloatValueAxisControl=function(id,parent,graphicsControl){nexacro.ChartAxisControl.call(this,id,parent,graphicsControl);if(parent.isdatetimevalue){this._direction="x";this.axistype=="";}this._chart=parent;};var _pChartFloatValueAxisControl=nexacro._createPrototype(nexacro.ChartAxisControl,nexacro.ChartFloatValueAxisControl);nexacro.ChartFloatValueAxisControl.prototype=_pChartFloatValueAxisControl;_pChartFloatValueAxisControl._type_name="ChartFloatValueAxisControl";_pChartFloatValueAxisControl.timelabelgroupmask="";_pChartFloatValueAxisControl.timelabelgroupborderlinestyle="";_pChartFloatValueAxisControl._timelabelgroupborderlinestyle="";_pChartFloatValueAxisControl.timelabelunitmask="dd";_pChartFloatValueAxisControl._timemaintickformat="";_pChartFloatValueAxisControl._timesubtickformat="";_pChartFloatValueAxisControl.timeboardgrouplinestyle="";_pChartFloatValueAxisControl.tickinterval=3;_pChartFloatValueAxisControl.timelabelareafillstyle="";_pChartFloatValueAxisControl._timelabelareafillstyle="";_pChartFloatValueAxisControl.set_opposite=function(val){if(this._chart.isdatetimevalue){val=true;}nexacro.ChartAxisControl.prototype.set_opposite.call(this,val);};_pChartFloatValueAxisControl.set_timelabelareafillstyle=function(val){this.timelabelareafillstyle=val;if(val){if(this._timelabelareafillstyle==null||this._timelabelareafillstyle.value!=val){var oldValue;if(this._timelabelareafillstyle){oldValue=this._timelabelareafillstyle.value;}this._changeContentsProperty("timelabelareafillstyle",val,oldValue);var timelabelareafillstyle=nexacro.BackgroundObject(val,this);this._timelabelareafillstyle=timelabelareafillstyle;this.on_apply_timelabelareafillstyle(timelabelareafillstyle);}}else{if(this._timelabelareafillstyle){this._timelabelareafillstyle=null;this.on_apply_timelabelareafillstyle(null);}}this._chart._draw();};_pChartFloatValueAxisControl.on_apply_timelabelareafillstyle=function(highlightfillstyle){};_pChartFloatValueAxisControl.set_timelabelgroupborderlinestyle=function(val){this.timelabelgroupborderlinestyle=val;if(val){if(this._timelabelgroupborderlinestyle==null||!this._timelabelgroupborderlinestyle._single||this._timelabelgroupborderlinestyle.value!=val){var oldValue;if(this._boardlinestyle){oldValue=this._timelabelgroupborderlinestyle.value;}this._changeContentsProperty("timelabelgroupborderlinestyle",val,oldValue);var timelabelgroupborderlinestyle=nexacro.BorderObject(val);this._timelabelgroupborderlinestyle=timelabelgroupborderlinestyle;this.on_apply_boardlinestyle();}}else{if(this._timelabelgroupborderlinestyle){this._timelabelgroupborderlinestyle=null;this.on_apply_boardlinestyle();}}this.parent._draw();};_pChartFloatValueAxisControl.set_timelabelgroupmask=function(val){if(this.timelabelgroupmask!=val){this._changeContentsProperty("timelabelgroupmask",val,this.timelabelgroupmask);this.timelabelgroupmask=val;this.on_apply_timelabelgroupmask();}this.parent._draw();};_pChartFloatValueAxisControl.on_apply_timelabelgroupmask=function(){this.parent._rearrange=true;};_pChartFloatValueAxisControl.set_timelabelunitmask=function(val){if(this.timelabelunitmask!=val){this._changeContentsProperty("timelabelunitmask",val,this.timelabelunitmask);this.timelabelunitmask=val;this.on_apply_timelabelgroupmask();}this.parent._draw();};_pChartFloatValueAxisControl.set_timeboardgrouplinestyle=function(val){this.timeboardgrouplinestyle=val;if(val){if(this._timeboardgrouplinestyle==null||!this._timeboardgrouplinestyle._single||this._timeboardgrouplinestyle.value!=val){var oldValue;if(this._timeboardgrouplinestyle){oldValue=this._timeboardgrouplinestyle.value;}this._changeContentsProperty("timeboardgrouplinestyle",val,oldValue);var timeboardgrouplinestyle=nexacro.BorderObject(val);this._timeboardgrouplinestyle=timeboardgrouplinestyle;this.on_apply_timeboardgrouplinestyle();}}else{if(this._timeboardgrouplinestyle){this._timeboardgrouplinestyle=null;this.on_apply_boardlinestyle();}}this.parent._draw();};_pChartFloatValueAxisControl.destroy=function(){this._destroy(true);};_pChartFloatValueAxisControl._destroy=function(parent_clear){if(parent_clear){var axisId=this.id;if(this.parent){var index= -1;nexacro._ChartGraphicsLibArray.forEach(this.parent.valueaxes,function(axis,i){if(axis instanceof nexacro.ChartAxisControl&&axis.id==axisId){axis.parent._deleteContentsProp("valueaxes",i);index=i;}});nexacro._ChartGraphicsLibArray.removeAt(this.parent.valueaxes,index);}}delete this.locale;delete this.labeltype;delete this.timelabelunitmask;delete this._axisMainLine;delete this._axisLine;delete this._axisLineRect;delete this._axisRect;if(this._title){this._title.destroy();delete this._title;this._title=null;}if(this._ticks){for(var i=0;i<this._ticks.length;i++ ){var tick=this._ticks[i];var ticktext=tick.labelElement;if(ticktext){ticktext.destroy();}ticktext=tick.labelgroupElement;if(ticktext){ticktext.destroy();}var tickline=tick.lineElement;if(tickline){tickline.destroy();}var tickboardline=tick.boardlineElement;if(tickboardline){tickboardline.destroy();}this._ticks[i]=null;}}this.id=null;this.locale=null;this.opposite=null;this.tickinterval=null;this.ticks=null;this.autotickscale=null;this.tickstartgap=null;this.tickendgap=null;this.tickmin=null;this.tickmax=null;this.gap=null;this.boardlinevisible=null;this.boardlinestyle=null;this.boardlineopacity=null;this.axislinestyle=null;this.axislineopacity=null;this.ticksize=null;this.ticklinestyle=null;this.ticklineopacity=null;this.labeltype=null;this.timelabelgroupmask=null;this.timelabelunitmask=null;this.labeltextfont=null;this.labeltextcolor=null;this.labelrotate=null;this.labeltextwidth=null;this.labelgap=null;this.titletext=null;this.titletextfont=null;this.titletextcolor=null;this.titlegap=null;this.titletextalign=null;this.titlerotate=null;this.id=null;this._axisRect=null;this._type=null;this._used=null;this._direction=null;this._location=null;this._datamin=null;this._datamax=null;this._min=null;this._max=null;this._tickstartgap=null;this._tickendgap=null;this._delta=null;this._tickinterval=null;this._tickmax=null;this._tickmin=null;this._ticks=null;this._labeltextfont=null;this._labelWidth=null;this._labelHeight=null;this._tickendspace=null;this._labeltextcolor=null;this._title=null;this._titleHeight=null;this._titleWidth=null;this._titletextfont=null;this._titletextcolor=null;this._halign=null;this._valign=null;this._boardlinestyle=null;this._axislinestyle=null;this._axisMainLine=null;this._axisLine=null;this._axisLineRect=null;this._axislineopacity=null;this._ticklinestyle=null;this._ticklineopacity=null;this._scale=null;this._categories=null;this._titlerotate=null;this._changedTicks=null;this._changedTickStyle=null;this._changedBoardLineStyle=null;this._changedTickLabelStyle=null;this._changedTickLabelRotate=null;this._rearrange=null;this._tickLabelTextAlign=null;this._tickLabelVerticalAlign=null;this._selectionMin=null;this._selectionMax=null;this._timeUnitSize=null;this._specMonths=null;if(this._boardLineGroup){this._boardLineGroup.destroy();this._boardLineGroup=null;}if(this._tickRectGroup){this._tickRectGroup.destroy();this._tickRectGroup=null;}if(this._tickMainGroup){this._tickMainGroup.destroy();this._tickMainGroup=null;}if(this._tickGroup){this._tickGroup.destroy();this._tickGroup=null;}if(this._labelgroupGroup){this._labelgroupGroup.destroy();this._labelgroupGroup=null;}if(this._labelGroup){this._labelGroup.destroy();this._labelGroup=null;}if(this._group){var itemID=this._group.id;var item=this._graphicsControl.getObjectByID(itemID);if(item){this._graphicsControl.removeChild(item);}this._group.destroy();this._group=null;}if(this._chart){this._chart=null;}if(this.parent){this.parent._rearrange=true;this.parent._recreate=true;this.parent=null;}nexacro.Object.prototype.destroy.call(this);return true;};_pChartFloatValueAxisControl._create=function(){this._group=new nexacro.ChartGraphicsGroup();this._group.set_id(this.id+"_ChartAxisGroup");this._graphicsControl.addChild(this._group);this._tickRectGroup=new nexacro.ChartGraphicsGroup();this._tickRectGroup.set_id("ChartAxisTickRectGroup");this._group.addChild(this._tickRectGroup);if(!this._axisLineRect){this._axisLineRect=new nexacro.ChartGraphicsRect();this._axisLineRect.set_id("ChartAxisLineRect");this._tickRectGroup.addChild(this._axisLineRect);this._axisLineRect._axis=this;}this._tickMainGroup=new nexacro.ChartGraphicsGroup();this._tickMainGroup.set_id("ChartAxisTickMainGroup");this._group.addChild(this._tickMainGroup);this._tickGroup=new nexacro.ChartGraphicsGroup();this._tickGroup.set_id("ChartAxisTickGroup");this._group.addChild(this._tickGroup);this._labelgroupGroup=new nexacro.ChartGraphicsGroup();this._labelgroupGroup.set_id("ChartAxislabelgroupGroup");this._group.addChild(this._labelgroupGroup);this._labelGroup=new nexacro.ChartGraphicsGroup();this._labelGroup.set_id("ChartAxisLabelGroup");this._group.addChild(this._labelGroup);this._axisRect=new nexacro.ChartGraphicsRect(0,0,0,0);this._axisRect.set_id("ChartAxisRect");this._group.addChild(this._axisRect);this._axisRect._axis=this;this._boardLineGroup=new nexacro.ChartGraphicsGroup();this._boardLineGroup.set_id(this.id+"_ChartAxisBoardLineGroup");if(this.parent.board){this._graphicsControl.insertChild(this._boardLineGroup,this.parent._seriesGroup);}};_pChartFloatValueAxisControl._measureAxisRect=function(){nexacro.ChartAxisControl.prototype._measureAxisRect.call(this);if(this._chart.isdatetimevalue){var h=this._axisRect.height;this._axisRect.set_height(h*2);}};_pChartFloatValueAxisControl.set_tickmax=function(val){nexacro.ChartAxisControl.prototype.set_tickmax.call(this,val);};_pChartFloatValueAxisControl.set_tickmin=function(val){nexacro.ChartAxisControl.prototype.set_tickmin.call(this,val);};_pChartFloatValueAxisControl.on_apply_axistype=function(){nexacro.ChartAxisControl.prototype.on_apply_axistype.call(this);};_pChartFloatValueAxisControl._setRange=function(){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._setRange.call(this);return;}var tickmin,tickmax,delta;tickmin=(this._tickmin!=null?this._tickmin:this._datamin);tickmax=(this._tickmax!=null?this._tickmax:this._datamax);if(this._scrollMin||this._scrollMax){tickmin=this._scrollMin;tickmax=this._scrollMax;this._scrollMin=null;this._scrollMax=null;}tickmin=this._chart._checkDateValue(tickmin);tickmax=this._chart._checkDateValue(tickmax);tickmin= +(tickmin);tickmax= +(tickmax);delta=tickmax-tickmin;if(delta==0.0){var widen=tickmax==0?1:0.01;if(this._tickmin==null){tickmin-=widen;}if(this._tickmax==null||this._tickmin!=null){tickmax+=widen;}}else{var tickscale=this.autotickscale?this.autotickscale*0.01:0;if(this._tickmin==null){tickmin-=delta*tickscale;if(tickmin<0&&this._datamin!=null&&this._datamin>=0){tickmin=0;}}if(this._tickmax==null){tickmax+=delta*tickscale;if(tickmax>0&&this._datamax!=null&&this._datamax<=0){tickmax=0;}}}this._min=tickmin;this._max=tickmax;};_pChartFloatValueAxisControl._setupTickGeneration=function(width,height){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._setupTickGeneration.call(this,width,height);return;}var ticks;if(typeof this.ticks=="number"&&this.ticks>0){ticks=this.ticks;}else{ticks=0.3*Math.sqrt(width);}var delta=(this._max-this._min)/ticks,dec= -Math.floor(Math.log(delta)/Math.LN10),magn=Math.pow(10, -dec),norm=delta/magn,tickinterval;if(norm<1.5){tickinterval=1;}else if(norm<3){tickinterval=2;if(norm>2.25){tickinterval=2.5;}}else if(norm<7.5){tickinterval=5;}else{tickinterval=10;}tickinterval*=magn;this._delta=delta;var tickintervalchk=this.tickinterval;this._tickinterval=tickintervalchk||tickinterval;};_pChartFloatValueAxisControl._generateTimeTick=function(istotal){var ticks=[],spec,d,min;if(this._tickmin){min=this._min;}else{min=this._datamin;}d=new Date();d.setTime(min);var interval=1;var unit=this._timesubtickformat;d.setMilliseconds(0);d.setSeconds(0);d.setMinutes(0);if(unit=="DAY"){d.setHours(1);}if(unit=="MONTH"){d.setDate(1);}if(unit=="YEAR"){d.setMonth(1);}var carry=0;var v=Number.NaN;var prev;var max=this._max;if(!this.tickinterval||this.tickinterval==1){var maxDate=new Date();maxDate.setTime(max);if(unit=="HOUR"){maxDate.setMinutes(maxDate.getMinutes()+30);}else if(unit=="MONTH"){maxDate.setDate(maxDate.getDate()+15);}else if(unit=="YEAR"){maxDate.setMonth(maxDate.getMonth()+6);}else{maxDate.setHours(maxDate.getHours()+12);}max=this._max=maxDate.getTime();}do{prev=v;v=d.getTime();ticks.push(v);if(unit=="HOUR"){d.setHours(d.getHours()+interval);}else if(unit=="MONTH"){d.setMonth(d.getMonth()+interval);}else if(unit=="YEAR"){d.setFullYear(d.getFullYear()+interval);}else{d.setDate(d.getDate()+interval);}}while(v<max&&v!=prev)return ticks;};_pChartFloatValueAxisControl._getTextDate=function(date,mask){var dateStr;var format;var yyyy=date.getFullYear();if(yyyy==0){yyyy="0000";}else{yyyy=yyyy.toString().padLeft(4,"0");}var MM=date.getMonth()+1;MM=(MM<10?" ":"")+MM;var dd=date.getDate();dd=(dd<10?" ":"")+dd;var yy=date.getYear()%100;var M= +MM;var d= +dd;var hour=date.getHours();hour=(hour<10?"0":"")+hour;var h= +hour;format=mask;if(format.length==0||!format.match(/[yMdHhms]/)){format="yyyy-MM-dd ddd";}dateStr=format.replace("yyyy",yyyy);dateStr=dateStr.replace("MM",MM);dateStr=dateStr.replace("dd",dd);dateStr=dateStr.replace("yy",yy);dateStr=dateStr.replace("M",M);dateStr=dateStr.replace("d",d);var hh=hour;dateStr=dateStr.replace("HH",hour);dateStr=dateStr.replace("hh",hh);dateStr=dateStr.replace("H",h);dateStr=dateStr.replace("h",h);if(dateStr.indexOf(":")<0){dateStr=nexacro.replaceAll(dateStr,":","");}if(dateStr.indexOf("-")<0){dateStr=nexacro.replaceAll(dateStr,"-","");}if(dateStr.indexOf("/")<0){dateStr=nexacro.replaceAll(dateStr,"/","");}return {"str":dateStr,"y":yyyy,"m":M,"d":d,"h":h};};_pChartFloatValueAxisControl._getDateFormat=function(mask){if(mask.indexOf("h")>=0){return "HOUR";}if(mask.indexOf("ddd")>=0){return "DAYOFWEEK";}if(mask.indexOf("d")>=0){return "DAY";}if(mask.indexOf("M")>=0){return "MONTH";}if(mask.indexOf("y")>=0){return "YEAR";}};_pChartFloatValueAxisControl._setTicks=function(istotal){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._setTicks.call(this,istotal);return;}var ticks=this.ticks,tickGen=[];var v,date,labeltype=this.labeltype,timelabelunitmask=this.timelabelunitmask,timelabelgroupmask=this.timelabelgroupmask,locale=this.locale;this._timemaintickformat=this._getDateFormat(timelabelgroupmask);this._timesubtickformat=this._getDateFormat(timelabelunitmask);this.on_apply_axistype();tickGen=this._generateTimeTick(istotal);this._ticks=[];var tickLength=tickGen.length;var interval=this.tickinterval?this.tickinterval:1;var labelgroup;var addCount=0;for(var i=0;i<tickLength;i++ ){var label=null;var t=tickGen[i];if(typeof t=="object"){v= +t[0];if(t.length>1){label=t[1];}}else{v= +t;label=v;}date=new nexacro.Date();date.setTime(label);label=date;label=this._getTextDate(label,timelabelunitmask);labelgroup=this._getTextDate(date,timelabelgroupmask);if(interval==addCount){addCount=0;}if(!isNaN(v)){this._ticks.push({v:v,label:label.str,labelgroup:labelgroup.str,index:i,total:tickLength,y:label.y,m:label.m,d:label.d,h:label.h,subindex:addCount});}addCount++ ;}};_pChartFloatValueAxisControl._setData=function(clientWidth,clientHeight){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._setData.call(this,clientWidth,clientHeight);return;}var changedTicks=this._changedTicks,ticklinestyle=this._ticklinestyle,boardlinestyle=this._boardlinestyle,pixedlabelheight=0,pixedlabelwidth=0;if(changedTicks||this._changedTickLabelRotate){this._setRange();this._setupTickGeneration(clientWidth,clientHeight);this._setMinMaxTicks();var returnsize=this._setPixedLabelHeight(clientWidth,clientHeight);pixedlabelheight=returnsize[1];pixedlabelwidth=returnsize[0];this._setTicks();this._tickGroup.clear();this._tickMainGroup.clear();this._boardLineGroup.clear();this._labelGroup.clear();this._labelgroupGroup.clear();}var ticks=this._ticks,tick,value,tickLine,tickMainLine,ticklineopacity=this._ticklineopacity,boardlineopacity=this._boardlineopacity,tickLabel,tickMainLabel,labeltextfont=this.labeltextfont?this.labeltextfont.value||this.labeltextfont:"12pt Verdana",labeltextcolor=this.labeltextcolor?this.labeltextcolor.value||this.labeltextcolor:"#000000",labelrotate=this.labelrotate,textAlign=this._tickLabelTextAlign,verticalAlign=this._tickLabelVerticalAlign,labelmaxwidth=this.labeltextwidth,tickboardLine;var bTarget=true;if(changedTicks&&(nexacro._isNull(textAlign)||nexacro._isNull(verticalAlign))){this._getTickLabelAlign(labelrotate);textAlign=this._tickLabelTextAlign;verticalAlign=this._tickLabelVerticalAlign;}if(changedTicks||this._changedTickStyle||this._changedBoardLineStyle||this._changedTickLabelRotate||this._changedTickLabelStyle){for(var i=0;i<ticks.length;i++ ){tick=ticks[i];value=tick.v;{}if(changedTicks){tickLine=new nexacro.ChartGraphicsLine();tickLine.set_id("ChartAxisLineTick"+i);this._tickGroup.addChild(tickLine);tick.lineElement=tickLine;tickLine._axis=this;tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);tickMainLine=new nexacro.ChartGraphicsLine();tickMainLine.set_id("ChartAxisLineMainTick"+i);this._tickMainGroup.addChild(tickMainLine);tick.lineMainElement=tickMainLine;tickMainLine._axis=this;tickMainLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickMainLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);tickboardLine=new nexacro.ChartGraphicsLine();tickboardLine.set_id("ChartAxisTickBoardLine"+i);this._boardLineGroup.addChild(tickboardLine);tick.boardlineElement=tickboardLine;tickboardLine._axis=this;tickboardLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #717a8380");tickboardLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}else{if(this._changedTickStyle){tickLine=tick.lineElement;if(tickLine){tickLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);}tickMainLine=tick.lineMainElement;if(tickMainLine){tickMainLine.set_strokepen(ticklinestyle?ticklinestyle.value||ticklinestyle:"1px solid #717a8380");tickMainLine.set_opacity(ticklineopacity?ticklineopacity._sysvalue:1);}}if(this._changedBoardLineStyle){tickboardLine=tick.boardlineElement;if(tickboardLine){tickboardLine.set_strokepen(boardlinestyle?boardlinestyle.value||boardlinestyle:"1px solid #717a8380");tickboardLine.set_opacity(boardlineopacity?boardlineopacity._sysvalue:1);}}}if(this._tickintervalcategory>0){bTarget=((i%this._tickintervalcategory)==0?true:false);}if(!bTarget){continue;}if(changedTicks||this._changedTickLabelRotate){tickLabel=new nexacro.ChartGraphicsText(0,0);tickLabel.set_id("ChartAxisLabel"+i);tickLabel.set_text(tick.label);this._labelGroup.addChild(tickLabel);tick.labelElement=tickLabel;tickLabel._axis=this;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickLabel.set_textAlign(textAlign);tickLabel.set_verticalAlign(verticalAlign);tickLabel.setTransform("rotate("+labelrotate+",0,0)");tickMainLabel=new nexacro.ChartGraphicsText(0,0);tickMainLabel.set_id("ChartAxisMainLabel"+i);tickMainLabel.set_text(tick.labelgroup);this._labelgroupGroup.addChild(tickMainLabel);tick.labelgroupElement=tickMainLabel;tickMainLabel._axis=this;tickMainLabel.set_font(labeltextfont);tickMainLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickMainLabel.set_wordWrap(true);tickMainLabel.set_width(labelmaxwidth);}else{tickMainLabel.set_wordWrap(false);}tickMainLabel.set_textAlign(textAlign);tickMainLabel.set_verticalAlign(verticalAlign);tickMainLabel.setTransform("rotate("+labelrotate+",0,0)");}else{if(this._changedTickLabelStyle){tickLabel=tick.labelElement;tickLabel.set_font(labeltextfont);tickLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickLabel.set_wordWrap(true);tickLabel.set_width(labelmaxwidth);}else{tickLabel.set_wordWrap(false);}tickMainLabel=tick.labelgroupElement;tickMainLabel.set_font(labeltextfont);tickMainLabel.set_color(labeltextcolor);if(labelmaxwidth>0){tickMainLabel.set_wordWrap(true);tickMainLabel.set_width(labelmaxwidth);}else{tickMainLabel.set_wordWrap(false);}}}}}this._changedTicks=false;this._changedTickStyle=false;this._changedBoardLineStyle=false;this._changedTickLabelStyle=false;this._changedTickLabelRotate=false;var info=this._labelGroup.getGlobalBoundRect(false,true);if(changedTicks||this._changedTickLabelRotate){this._labelHeight=pixedlabelheight;this._labelWidth=pixedlabelwidth;}else{this._labelHeight=info.height;this._labelWidth=info.width;}if(this._direction=="x"){this._tickendspace=this._labelWidth/2;if(this.parent._chartxtickspace<this._tickendspace){this.parent._chartxtickspace=this._tickendspace;}}else{this._tickendspace=this._labelHeight/2;if(this.parent._chartytickspace<this._tickendspace){this.parent._chartytickspace=this._tickendspace;}}this._tickendspace=0;};_pChartFloatValueAxisControl._arrange=function(left,top,width,height){nexacro.ChartAxisControl.prototype._arrange.call(this,left,top,width,height);};_pChartFloatValueAxisControl._getTickLabelAlign=function(labelrotate,index){nexacro.ChartAxisControl.prototype._getTickLabelAlign.call(this,labelrotate,index);};_pChartFloatValueAxisControl._createAxisLine=function(){if(!this._axisLine){this._axisLine=new nexacro.ChartGraphicsLine();this._axisLine.set_id("ChartAxisLine");this._group.addChild(this._axisLine);this._axisLine._axis=this;}if(!this._axisMainLine){this._axisMainLine=new nexacro.ChartGraphicsLine();this._axisMainLine.set_id("ChartAxisMainLine");this._group.addChild(this._axisMainLine);this._axisMainLine._axis=this;}};_pChartFloatValueAxisControl._arrangeTickGroup=function(width,height){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._arrangeTickGroup.call(this,width,height);return;}var axisLine=this._axisLine,axisMainLine=this._axisMainLine,direction=this._direction,location=this._location,axislinestyle=this._axislinestyle,axislinewidth=0,x=0,y=0,axisRectWidth=0,axisRectHeight=0,tickendspace=this._tickendspace,axisRect=this._axisRect.getGlobalBoundRect(false,true);if(axisLine){axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():0;axislinewidth*=0.5;}var tickstartgap=0;var tickendgap=0;var charttype=this.parent._type_name;var type=this._type;var timelabelgroupmask=this.timelabelgroupmask;if(timelabelgroupmask==""){timelabelgroupmask=null;}var tickinterval=this.tickinterval?this.tickinterval:1;x=axisRect.left;axisRectWidth=axisRect.width+tickendspace;if(location=="top"){y=axisRect.bottom-axislinewidth;}else{y=axisRect.top+axislinewidth;}if(axisLine){axisLine.set_x1(x);axisLine.set_y1(y);axisLine.set_x2(x+axisRectWidth);axisLine.set_y2(y);}var ticks=this._ticks,tick,value,ticksize,tickXoff=0,tickYoff=0,tickmin=this._min,tickmax=this._max,tickboardLine,vc=0;if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){ticksize=10;}else{ticksize=this.ticksize;}var ticksizehalf=(ticksize/2);if(ticksize>0){if(location=="top"){tickYoff= -ticksize;y-=axislinewidth;}else if(location=="bottom"){tickYoff=ticksize;y+=axislinewidth;}}var y_half;if(location=="top"){y_half=y+ticksizehalf;}else{y_half=y=ticksizehalf;}axisMainLine.set_visible(false);var mainLineY,textH;if(ticks&&ticks[0]){var ticklabel=ticks[0].labelElement;var labelBoundRect=ticklabel.getGlobalBoundRect();textH=labelBoundRect.height;if(timelabelgroupmask){if(tickinterval==1){mainLineY=y-textH;}else{mainLineY=y-ticksize-textH;}axisMainLine.set_x1(x);axisMainLine.set_y1(mainLineY);axisMainLine.set_x2(x+axisRectWidth);axisMainLine.set_y2(mainLineY);axisMainLine.set_visible(true);}}var timelabelareafillstyle=this._timelabelareafillstyle;if(timelabelareafillstyle&&timelabelareafillstyle!=""){var axisLineRect=this._axisLineRect;axisLineRect.set_x(x);axisLineRect.set_width((x+axisRectWidth)-x);axisLineRect.set_y(mainLineY-textH);axisLineRect.set_height(textH+(y-mainLineY));axisLineRect.set_fillstyle(timelabelareafillstyle);}var xtickendspace=this.parent._xaxes[0]._tickendspace;var ytickendspace=this.parent._yaxes[0]._tickendspace;var tickgap=0;var tickMain;var sv_y,sv_m,sv_d,sv_h;if(ticks.length>1){sv_y=ticks[1].y;sv_m=ticks[1].m;sv_d=ticks[1].d;sv_h=ticks[1].h;}var newi;for(var i=0;i<ticks.length;i++ ){if(!ticks[i]){continue;}tick=ticks[i].lineElement;tickboardLine=ticks[i].boardlineElement;tickMain=ticks[i].lineMainElement;value=ticks[i].v;if(isNaN(value)){continue;}vc=this.p2c(value);x=vc+axisRect.left;if(ticks[i].subindex==0){ticks[i]._point={"x1":x,"y1":y,"x2":x+tickXoff,"y2":y+tickYoff};}else{ticks[i]._point={"x1":x,"y1":y_half,"x2":x+tickXoff,"y2":y_half+tickYoff};}if(tick&&i>0){if(ticks[i].subindex==0){tick.set_y1(y);if(timelabelgroupmask&&tickinterval==1){tick.set_y2(mainLineY-1);}else{tick.set_y2(y+tickYoff);}}else{tick.set_y1(y);tick.set_y2(y_half+tickYoff);}tick.set_x1(x);tick.set_x2(x+tickXoff);}if(tickinterval==1){newi=i-1;}else{newi=i+1;}if(timelabelgroupmask&&tickMain&&ticks[newi]){sv_y=ticks[newi].y;sv_m=ticks[newi].m;sv_d=ticks[newi].d;sv_h=ticks[newi].h;tickMain.set_x1(x);tickMain.set_x2(x+tickXoff);if(this._timelabelgroupborderlinestyle){var nGap=y-mainLineY;tickMain.set_strokepen(this._timelabelgroupborderlinestyle);tickMain.set_y1(mainLineY);tickMain.set_y2(mainLineY+height+nGap);}else{tickMain.set_y1(mainLineY);tickMain.set_y2(mainLineY+tickYoff);}if(this._timemaintickformat=="YEAR"){if(ticks[i].y==sv_y){tickMain.set_visible(false);}else{tickMain.set_visible(true);}}if(this._timemaintickformat=="MONTH"){if(ticks[i].m==sv_m){tickMain.set_visible(false);}else{tickMain.set_visible(true);}}if(this._timemaintickformat=="DAY"){if(ticks[i].d==sv_d){tickMain.set_visible(false);}else{tickMain.set_visible(true);}}}else if(tickMain){tickMain.set_visible(false);}if(i>0&&ticks[i].subindex==0&&tickboardLine){tickboardLine.set_x1(vc);tickboardLine.set_y1(0);tickboardLine.set_x2(vc);tickgap=0;if(this.parent.vrangebar&&this.parent.vrangebar._group.visible){tickgap=tickstartgap+tickendgap;}tickboardLine.set_y2(height+tickgap+ytickendspace);}}};_pChartFloatValueAxisControl._arrangeLabelGroup=function(){if(!this._chart.isdatetimevalue){nexacro.ChartAxisControl.prototype._arrangeLabelGroup.call(this);return;}var ticks=this._ticks,tick,labelEle,textW=0,textH=0,x=0,y=0,value,labelrotate=this.labelrotate,location=this._location,labelgap= +this._labelgap,labelBoundRect,axislinestyle=this._axislinestyle,axislinewidth=0,ticksize,_ticksize,tickGroupSize=0,ticklinestyle=this._ticklinestyle,ticklinewidth=0,pos,axisRect=this._axisRect.getGlobalBoundRect(false,true);axislinewidth=axislinestyle?axislinestyle._getBorderLeftWidth():1;ticklinewidth=ticklinestyle?ticklinestyle._getBorderLeftWidth():1;var timelabelgroupmask=this.timelabelgroupmask;if(timelabelgroupmask==""){timelabelgroupmask=null;}var tickinterval=this.tickinterval?this.tickinterval:1;var axisLine=this._axisLine;var axisMainLine=this._axisMainLine;var nMainLineY,nSubLineY,nLineGap=0,nLineGapHalf=0;if(axisLine){nSubLineY=axisLine.y1;}if(axisMainLine&&timelabelgroupmask){nMainLineY=axisMainLine.y1;nLineGap=nSubLineY-nMainLineY;nLineGapHalf=(nLineGap/2);}if(!timelabelgroupmask){this._labelgroupGroup.set_visible(false);}if((this.ticksize==""||this.ticksize==undefined)&&this.ticksize!==0){_ticksize=10;}else{_ticksize=this.ticksize;}ticksize= +_ticksize;if(ticklinewidth<1){ticksize=0;}if(nLineGapHalf==0){nLineGapHalf=ticksize;}tickGroupSize=(ticksize*2);var tickGap,tickGapHalf;if(ticks[0]&&ticks[1]){tickGap=ticks[1]._point.x1-ticks[0]._point.x1;}else if(ticks[0]){var axisRect=this._axisRect.getGlobalBoundRect(false,true);tickGap=ticks[0]._point.x1-axisRect.left;}tickGapHalf=(tickGap/2);var sv_y,sv_m,sv_d,sv_h;var txtX;var labelgroupEle;var addMainGap=0;for(var i=0;i<ticks.length;i++ ){tick=ticks[i];labelEle=tick.labelElement;labelgroupEle=tick.labelgroupElement;value=tick.v;if(!tick._point||nexacro._ChartGraphicsLib.isEmpty(tick.label)){continue;}labelBoundRect=labelEle.getGlobalBoundRect();textW=labelBoundRect.width;textH=labelBoundRect.height;x=txtX=tick._point.x1;pos=labelEle.getCenter();var cx=pos.x;var _txtWidthHalf=(labelEle._txtSize[0]||textW)/2;if(x==axisRect.left){if(cx-(_txtWidthHalf)<0){txtX=axisRect.left+(Math.abs(cx-_txtWidthHalf));}}else if(x==axisRect.right){var rectwidth=this.parent._getClientWidth();if(cx+(_txtWidthHalf)>rectwidth){txtX=axisRect.right-((cx+_txtWidthHalf)-rectwidth);}}y=tick._point.y1;if(labelEle&&tick.subindex==0){labelEle.set_textAlign(this._tickLabelTextAlign?this._tickLabelTextAlign:"center");labelEle.set_verticalAlign(this._tickLabelVerticalAlign?this._tickLabelVerticalAlign:"top");if(tickinterval>1){labelEle.set_x(txtX);}else{labelEle.set_x(txtX+tickGapHalf);}labelEle.set_y(y-nLineGapHalf);labelEle.set_verticalAlign("middle");}else{labelEle.set_visible(false);}if(timelabelgroupmask&&labelgroupEle){if(ticks[i+1]){sv_y=ticks[i+1].y;sv_m=ticks[i+1].m;sv_d=ticks[i+1].d;sv_h=ticks[i+1].h;}else{sv_y="9999";sv_m="99";sv_d="99";sv_h="99";}if(this._timemaintickformat=="YEAR"){if(tick.y==sv_y){labelgroupEle.set_visible(false);}else{labelgroupEle.set_visible(true);}}if(this._timemaintickformat=="MONTH"){if(tick.m==sv_m){labelgroupEle.set_visible(false);}else{labelgroupEle.set_visible(true);}}if(this._timemaintickformat=="DAY"){if(tick.d==sv_d){labelgroupEle.set_visible(false);}else{labelgroupEle.set_visible(true);}}addMainGap+=tickGap;if(labelgroupEle.visible){labelgroupEle.set_x(x-(addMainGap/2));labelgroupEle.set_y(nMainLineY-_ticksize);labelgroupEle.set_textAlign("center");labelgroupEle.set_verticalAlign("middle");addMainGap=0;}}}};_pChartFloatValueAxisControl.on_apply_axislinestyle=function(axislinestyle){nexacro.ChartAxisControl.prototype.on_apply_axislinestyle.call(this,axislinestyle);if(this._chart.isdatetimevalue){if(this._axisMainLine){axislinestyle=this._timeboardgrouplinestyle?this._timeboardgrouplinestyle:axislinestyle;this._axisMainLine.set_strokepen(axislinestyle?axislinestyle.value||axislinestyle:"1px solid #717a8380");}}};_pChartFloatValueAxisControl._afterSetProperties=function(){this.on_apply_boardlinevisible(this.boardlinevisible);this.on_apply_axislinestyle(this._axislinestyle);this.on_apply_ticklinestyle(this._ticklinestyle);this.on_apply_labeltextfont(this._labeltextfont);this.on_apply_labeltextcolor(this._labeltextcolor);this.on_apply_titletext(this.titletext);this.on_apply_titletextfont(this._titletextfont);this.on_apply_titletextcolor(this._titletextcolor);this.on_apply_axistype();};}if(!nexacro.ChartFloatSeriesControl){nexacro.ChartFloatSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this.value2column=new nexacro.BindableValue("");this.value3column=new nexacro.BindableValue("");};var _pChartFloatSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartFloatSeriesControl);nexacro.ChartFloatSeriesControl.prototype=_pChartFloatSeriesControl;_pChartFloatSeriesControl._type_name="ChartFloatSeriesControl";_pChartFloatSeriesControl.waterfallsumbarfillstyle="";_pChartFloatSeriesControl.positivebarfillstyle="";_pChartFloatSeriesControl.negativebarfillstyle="";_pChartFloatSeriesControl.baropacity=1;_pChartFloatSeriesControl.barsize=undefined;_pChartFloatSeriesControl.barvisible=true;_pChartFloatSeriesControl.highlightpositivebarfillstyle="";_pChartFloatSeriesControl.highlightnegativebarfillstyle="";_pChartFloatSeriesControl.highlightbaropacity=1;_pChartFloatSeriesControl.highlightbarvisible=false;_pChartFloatSeriesControl.shadowstyle=null;_pChartFloatSeriesControl.barradius=0;_pChartFloatSeriesControl.selectpositivebarfillstyle="";_pChartFloatSeriesControl.selectnegativebarfillstyle="";_pChartFloatSeriesControl.selectbaropacity=1;_pChartFloatSeriesControl.valueaxis="";_pChartFloatSeriesControl.autogradation="none";_pChartFloatSeriesControl.waterfallsumbarlinestyle=null;_pChartFloatSeriesControl.positivebarlinestyle=null;_pChartFloatSeriesControl.negativebarlinestyle=null;_pChartFloatSeriesControl.visible=true;_pChartFloatSeriesControl.linevisible=false;_pChartFloatSeriesControl.itemtextposition="";_pChartFloatSeriesControl.itemtextgap=undefined;_pChartFloatSeriesControl._pointshape=null;_pChartFloatSeriesControl._borderwidth=null;_pChartFloatSeriesControl._color=null;_pChartFloatSeriesControl._xaxis=null;_pChartFloatSeriesControl._yaxis=null;_pChartFloatSeriesControl._changedSeriesColor=true;_pChartFloatSeriesControl._barsize=null;_pChartFloatSeriesControl._baralign="center";_pChartFloatSeriesControl._barwidth=null;_pChartFloatSeriesControl._waterfallsumbarfillstyle=null;_pChartFloatSeriesControl._waterfallsumbarlinestyle=null;_pChartFloatSeriesControl._positivebarlinestyle=null;_pChartFloatSeriesControl._positivebarfillstyle=null;_pChartFloatSeriesControl._negativebarlinestyle=null;_pChartFloatSeriesControl._negativebarfillstyle=null;_pChartFloatSeriesControl._invalidvalue2column=false;_pChartFloatSeriesControl._invalidvalue3column=false;_pChartFloatSeriesControl._baropacity=null;_pChartFloatSeriesControl.waterfalllinestyle=null;_pChartFloatSeriesControl._waterfalllinestyle=null;_pChartFloatSeriesControl.set_shadowstyle=function(val){if(val==""){val=null;}this.shadowstyle=val;if(val){if(this._shadowstyle==null||this._shadowstyle.value!=val){var oldValue;if(this._shadowstyle){oldValue=this._shadowstyle.value;}this._changeContentsProperty("shadowstyle",val,oldValue);var shadowstyle=nexacro.ShadowObjectNew(val);this._shadowstyle=shadowstyle;this.on_apply_shadowstyle(shadowstyle);}}else{if(this._shadowstyle){this._shadowstyle=null;this.on_apply_shadowstyle(null);}}};_pChartFloatSeriesControl.on_apply_shadowstyle=function(shadowstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","shadowstyle",shadowstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_autogradation=function(val){if(!val||val==""){val="none";}if(val!=this.autogradation){this._changeContentsProperty("autogradation",val,this.autogradation);this.autogradation=val;this.on_apply_autogradation(val);}this._chart._draw();};_pChartFloatSeriesControl.on_apply_autogradation=function(autogradation){this._redrawSeries=false;};_pChartFloatSeriesControl.set_valueaxis=function(val){if(this.valueaxis!=val){this._changeContentsProperty("valueaxis",val,this.valueaxis);this.valueaxis=val;this.on_apply_valueaxis(val);}this._chart._draw();};_pChartFloatSeriesControl.set_value2column=function(v){if(this.value2column._value!=v){this._changeContentsProperty("value2column",v,this.value2column);this.value2column._set(v);this.on_apply_value2column();}this._chart._recreate=true;this._chart._reset=true;this._chart._draw();};_pChartFloatSeriesControl.on_apply_value2column=function(){var bindtype=this.value2column._bindtype;if(bindtype==0){this._invalidvalue2column=true;}else{var value2column=this._getBindableValue("value2column");var binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(value2column);if(!coltype){this._invalidvalue2column=true;}else{this._invalidvalue2column=false;}if(coltype>=5&&coltype<8){}else{}}}this._chart._changedData=true;};_pChartFloatSeriesControl.set_value3column=function(v){if(this.value3column._value!=v){this._changeContentsProperty("value3column",v,this.value3column);this.value3column._set(v);this.on_apply_value3column();}if(this._chart._changedData==true){this._chart._reset=true;this._chart._draw();}else{this._chart._draw();}};_pChartFloatSeriesControl.on_apply_value3column=function(){var bindtype=this.value3column._bindtype;if(bindtype==0){this._invalidvalue3column=true;}else{var value3column=this._getBindableValue("value3column");var binddataset=this._chart._binddataset;if(binddataset){var coltype=binddataset._getColumnType(value3column);if(!coltype){this._invalidvalue3column=true;}else{this._invalidvalue3column=false;}}}this._chart._changedData=true;};_pChartFloatSeriesControl.on_apply_valueaxis=function(valueaxisid){var valueaxis=this.parent.getValueaxisByID(valueaxisid);if(valueaxis){valueaxis._used=true;valueaxis._afterSetProperties();var usedxAxis=false;var usedyAxis=false;if(this._chart.seriesset){var seriesset=this._chart.seriesset;for(var i=seriesset.length-1;i> -1;i-- ){if(seriesset[i]&&seriesset[i].id!=this.id){if((seriesset[i]._yaxis&&this._yaxis&&seriesset[i]._yaxis.id==this._yaxis.id)&&!usedyAxis){usedyAxis=true;}if((seriesset[i]._xaxis&&this._xaxis&&seriesset[i]._xaxis.id==this._xaxis.id)&&!usedxAxis){usedxAxis=true;}}}}if(this._xaxis&&this._xaxis.id!=valueaxis.id&&!usedxAxis){if(this._xaxis._type!="categoryAxis"){this._xaxis._used=false;this._xaxis.on_apply_visible(false);}}if(this._yaxis&&this._yaxis.id!=valueaxis.id&&!usedyAxis){if(this._yaxis._type!="categoryAxis"){this._yaxis._used=false;this._yaxis.on_apply_visible(false);}}if(valueaxis._direction=="x"){if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._xaxis=valueaxis;}}else{if(this.categoryaxis){if(this.categoryaxis._direction=="x"){this._xaxis=this.categoryaxis;this._yaxis=valueaxis;}else{this._xaxis=valueaxis;this._yaxis=this.categoryaxis;}}else{this._yaxis=valueaxis;}}this._chart._changedData=true;}};_pChartFloatSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible();}this._chart._draw();};_pChartFloatSeriesControl.on_apply_visible=function(){if(this._is_initprop){return;}var visible=this.visible;var selecttype=this.selecttype;if(visible){if(selecttype){this._chart._changedData=true;}else{this._chart._changedData=true;this._applyPropertySeries("Bar","visible",true);}if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._chart._changedData=true;this._applyPropertySeries("Bar","visible",false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_barsize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(lVal<0||lVal>100){return;}if(this.barsize!=val){this.barsize=val;this.on_apply_barsize(lVal);}this._chart._reset=true;this._chart._draw();};_pChartFloatSeriesControl.on_apply_barsize=function(barsize){if(!nexacro._ChartGraphicsLib.isEmpty(barsize)){this._barsize=this.barsize*0.01;}else{var chartbarsize=this._chart._barsize;if(!nexacro._isNull(chartbarsize)){this._barsize=chartbarsize;}}this._chart._changedData=true;};_pChartFloatSeriesControl.set_waterfalllinestyle=function(val){this.waterfalllinestyle=val;if(val){if(this._waterfalllinestyle==null||this._waterfalllinestyle.value!=val){var oldValue;if(this._waterfalllinestyle){oldValue=this._waterfalllinestyle.value;}this._changeContentsProperty("waterfalllinestyle",val,oldValue);var waterfalllinestyle=nexacro.BorderLineObject(val);this._waterfalllinestyle=waterfalllinestyle;this.on_apply_waterfalllinestyle(waterfalllinestyle);}}else{if(this._waterfalllinestyle){this._waterfalllinestyle=null;this.on_apply_waterfalllinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_waterfalllinestyle=function(waterfalllinestyle){this._redrawSeries=false;this._applyPropertySeries("Bar","waterfalllinestyle",waterfalllinestyle);};_pChartFloatSeriesControl.set_positivebarlinestyle=function(val){this.positivebarlinestyle=val;if(val){if(this._positivebarlinestyle==null||this._positivebarlinestyle.value!=val){var oldValue;if(this._positivebarlinestyle){oldValue=this._positivebarlinestyle.value;}this._changeContentsProperty("positivebarlinestyle",val,oldValue);var positivebarlinestyle=nexacro.BorderLineObject(val);this._positivebarlinestyle=positivebarlinestyle;this.on_apply_positivebarlinestyle(positivebarlinestyle);}}else{if(this._positivebarlinestyle){this._positivebarlinestyle=null;this.on_apply_positivebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_positivebarlinestyle=function(positivebarlinestyle){if(positivebarlinestyle){}this._redrawSeries=false;this._applyPropertySeries("Bar","positivebarlinestyle",positivebarlinestyle);};_pChartFloatSeriesControl.set_negativebarlinestyle=function(val){this.negativebarlinestyle=val;if(val){if(this._negativebarlinestyle==null||this._negativebarlinestyle.value!=val){var oldValue;if(this._negativebarlinestyle){oldValue=this._negativebarlinestyle.value;}this._changeContentsProperty("negativebarlinestyle",val,oldValue);var negativebarlinestyle=nexacro.BorderLineObject(val);this._negativebarlinestyle=negativebarlinestyle;this.on_apply_negativebarlinestyle(negativebarlinestyle);}}else{if(this._negativebarlinestyle){this._negativebarlinestyle=null;this.on_apply_negativebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_negativebarlinestyle=function(negativebarlinestyle){if(negativebarlinestyle){}this._redrawSeries=false;this._applyPropertySeries("Bar","negativebarlinestyle",negativebarlinestyle);};_pChartFloatSeriesControl.set_waterfallsumbarlinestyle=function(val){this.waterfallsumbarlinestyle=val;if(val){if(this._waterfallsumbarlinestyle==null||this._waterfallsumbarlinestyle.value!=val){var oldValue;if(this._waterfallsumbarlinestyle){oldValue=this._waterfallsumbarlinestyle.value;}this._changeContentsProperty("waterfallsumbarlinestyle",val,oldValue);var waterfallsumbarlinestyle=nexacro.BorderLineObject(val);this._waterfallsumbarlinestyle=waterfallsumbarlinestyle;this.on_apply_waterfallsumbarlinestyle(waterfallsumbarlinestyle);}}else{if(this._waterfallsumbarlinestyle){this._waterfallsumbarlinestyle=null;this.on_apply_waterfallsumbarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_waterfallsumbarlinestyle=function(waterfallsumbarlinestyle){this._redrawSeries=false;this._applyPropertySeries("Bar","waterfallsumbarlinestyle",waterfallsumbarlinestyle);};_pChartFloatSeriesControl.set_positivebarfillstyle=function(val){this.positivebarfillstyle=val;if(val){if(this._positivebarfillstyle==null||this._positivebarfillstyle.value!=val){var oldValue;if(this._positivebarfillstyle){oldValue=this._positivebarfillstyle.value;}this._changeContentsProperty("positivebarfillstyle",val,oldValue);var positivebarfillstyle=val;var arrColorList=this._spliterColor(val,true);if(!arrColorList){}else if(arrColorList.length==1){positivebarfillstyle=arrColorList[0];}else{positivebarfillstyle=arrColorList;}this._positivebarfillstyle=positivebarfillstyle;this.on_apply_positivebarfillstyle(positivebarfillstyle);}}else{if(this._positivebarfillstyle){this._positivebarfillstyle=null;this.on_apply_positivebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_positivebarfillstyle=function(positivebarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","positivebarfillstyle",positivebarfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_negativebarfillstyle=function(val){this.negativebarfillstyle=val;if(val){if(this._negativebarfillstyle==null||this._negativebarfillstyle.value!=val){var oldValue;if(this._negativebarfillstyle){oldValue=this._negativebarfillstyle.value;}this._changeContentsProperty("negativebarfillstyle",val,oldValue);var negativebarfillstyle=val;var arrColorList=this._spliterColor(val,true);if(!arrColorList){}else if(arrColorList.length==1){negativebarfillstyle=arrColorList[0];}else{negativebarfillstyle=arrColorList;}this._negativebarfillstyle=negativebarfillstyle;this.on_apply_negativebarfillstyle(negativebarfillstyle);}}else{if(this._negativebarfillstyle){this._negativebarfillstyle=null;this.on_apply_negativebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_negativebarfillstyle=function(negativebarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","negativebarfillstyle",negativebarfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_waterfallsumbarfillstyle=function(val){this.waterfallsumbarfillstyle=val;if(val){if(this._waterfallsumbarfillstyle==null||this._waterfallsumbarfillstyle.value!=val){var oldValue;if(this._waterfallsumbarfillstyle){oldValue=this._waterfallsumbarfillstyle.value;}this._changeContentsProperty("waterfallsumbarfillstyle",val,oldValue);var waterfallsumbarfillstyle=nexacro.BackgroundObject(val,this);this._waterfallsumbarfillstyle=waterfallsumbarfillstyle;this.on_apply_waterfallsumbarfillstyle(waterfallsumbarfillstyle);}}else{if(this._waterfallsumbarfillstyle){this._waterfallsumbarfillstyle=null;this.on_apply_waterfallsumbarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_waterfallsumbarfillstyle=function(waterfallsumbarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","waterfallsumbarfillstyle",waterfallsumbarfillstyle);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_baropacity=function(val){this.baropacity=val;if(0===val||val){if(this._baropacity==null||this._baropacity.value!=val){var oldValue;if(this._baropacity){oldValue=this._baropacity.value;}this._changeContentsProperty("baropacity",val,oldValue);var baropacity=nexacro.OpacityObject(val);this._baropacity=baropacity;this.on_apply_baropacity(baropacity);}}else{if(this._baropacity){this._baropacity=null;this.on_apply_baropacity(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_baropacity=function(opacity){this._redrawSeries=false;this._applyPropertySeries("Bar","baropacity",opacity);};_pChartFloatSeriesControl.set_highlightbarvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightbarvisible!=val){this._changeContentsProperty("highlightbarvisible",val,this.highlightbarvisible);this.highlightbarvisible=val;this.on_apply_highlightbarvisible(val);}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightbarvisible=function(highlightbarvisible){};_pChartFloatSeriesControl.set_highlightpositivebarlinestyle=function(val){this.highlightpositivebarlinestyle=val;if(val){if(this._highlightpositivebarlinestyle==null||this._highlightpositivebarlinestyle.value!=val){var oldValue;if(this._highlightpositivebarlinestyle){oldValue=this._highlightpositivebarlinestyle.value;}this._changeContentsProperty("highlightpositivebarlinestyle",val,oldValue);var highlightpositivebarlinestyle=nexacro.BorderLineObject(val);this._highlightpositivebarlinestyle=highlightpositivebarlinestyle;this.on_apply_highlightpositivebarlinestyle(highlightpositivebarlinestyle);}}else{if(this._pointlinestyle){this._pointlinestyle=null;this.on_apply_highlightpositivebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightpositivebarlinestyle=function(highlightpositivebarlinestyle){};_pChartFloatSeriesControl.set_highlightnegativebarlinestyle=function(val){this.highlightnegativebarlinestyle=val;if(val){if(this._highlightnegativebarlinestyle==null||this._highlightnegativebarlinestyle.value!=val){var oldValue;if(this._highlightnegativebarlinestyle){oldValue=this._highlightnegativebarlinestyle.value;}this._changeContentsProperty("highlightnegativebarlinestyle",val,oldValue);var highlightnegativebarlinestyle=nexacro.BorderLineObject(val);this._highlightnegativebarlinestyle=highlightnegativebarlinestyle;this.on_apply_highlightnegativebarlinestyle(highlightnegativebarlinestyle);}}else{if(this._pointlinestyle){this._pointlinestyle=null;this.on_apply_highlightnegativebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightnegativebarlinestyle=function(highlightnegativebarlinestyle){};_pChartFloatSeriesControl.set_highlightpositivebarfillstyle=function(val){this.highlightpositivebarfillstyle=val;if(val){if(this._highlightpositivebarfillstyle==null||this._highlightpositivebarfillstyle.value!=val){var oldValue;if(this._highlightpositivebarfillstyle){oldValue=this._highlightpositivebarfillstyle.value;}this._changeContentsProperty("highlightpositivebarfillstyle",val,oldValue);var highlightpositivebarfillstyle=nexacro.BackgroundObject(val,this);this._highlightpositivebarfillstyle=highlightpositivebarfillstyle;this.on_apply_highlightpositivebarfillstyle(highlightpositivebarfillstyle);}}else{if(this._highlightpositivebarfillstyle){this._highlightpositivebarfillstyle=null;this.on_apply_highlightpositivebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightpositivebarfillstyle=function(highlightpositivebarfillstyle){};_pChartFloatSeriesControl.set_highlightnegativebarfillstyle=function(val){this.highlightnegativebarfillstyle=val;if(val){if(this._highlightnegativebarfillstyle==null||this._highlightnegativebarfillstyle.value!=val){var oldValue;if(this._highlightnegativebarfillstyle){oldValue=this._highlightnegativebarfillstyle.value;}this._changeContentsProperty("highlightnegativebarfillstyle",val,oldValue);var highlightnegativebarfillstyle=nexacro.BackgroundObject(val,this);this._highlightnegativebarfillstyle=highlightnegativebarfillstyle;this.on_apply_highlightnegativebarfillstyle(highlightnegativebarfillstyle);}}else{if(this._highlightnegativebarfillstyle){this._highlightnegativebarfillstyle=null;this.on_apply_highlightnegativebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightnegativebarfillstyle=function(highlightnegativebarfillstyle){};_pChartFloatSeriesControl.set_highlightbaropacity=function(val){this.highlightbaropacity=val;if(0===val||val){if(this._highlightbaropacity==null||this._highlightbaropacity.value!=val){var oldValue;if(this._highlightbaropacity){oldValue=this._highlightbaropacity.value;}this._changeContentsProperty("highlightbaropacity",val,oldValue);var highlightbaropacity=nexacro.OpacityObject(val);this._highlightbaropacity=highlightbaropacity;this.on_apply_highlightbaropacity(highlightbaropacity);}}else{if(this._highlightbaropacity){this._highlightbaropacity=null;this.on_apply_highlightbaropacity(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_highlightbaropacity=function(highlightbaropacity){};_pChartFloatSeriesControl.set_selectpositivebarlinestyle=function(val){this.selectpositivebarlinestyle=val;if(val){if(this._selectpositivebarlinestyle==null||this._selectpositivebarlinestyle.value!=val){var oldValue;if(this._selectpositivebarlinestyle){oldValue=this._selectpositivebarlinestyle.value;}this._changeContentsProperty("selectpositivebarlinestyle",val,oldValue);var selectpositivebarlinestyle=nexacro.BorderLineObject(val);this._selectpositivebarlinestyle=selectpositivebarlinestyle;this.on_apply_selectpositivebarlinestyle(selectpositivebarlinestyle);}}else{if(this._selectpositivebarlinestyle){this._selectpositivebarlinestyle=null;this.on_apply_selectpositivebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_selectpositivebarlinestyle=function(selectpositivebarlinestyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectpositivebarlinestyle",selectpositivebarlinestyle,"select");};_pChartFloatSeriesControl.set_selectnegativebarlinestyle=function(val){this.selectnegativebarlinestyle=val;if(val){if(this._selectnegativebarlinestyle==null||this._selectnegativebarlinestyle.value!=val){var oldValue;if(this._selectnegativebarlinestyle){oldValue=this._selectnegativebarlinestyle.value;}this._changeContentsProperty("selectnegativebarlinestyle",val,oldValue);var selectnegativebarlinestyle=nexacro.BorderLineObject(val);this._selectnegativebarlinestyle=selectnegativebarlinestyle;this.on_apply_selectnegativebarlinestyle(selectnegativebarlinestyle);}}else{if(this._selectnegativebarlinestyle){this._selectnegativebarlinestyle=null;this.on_apply_selectnegativebarlinestyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_selectnegativebarlinestyle=function(selectnegativebarlinestyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectnegativebarlinestyle",selectnegativebarlinestyle,"select");};_pChartFloatSeriesControl.set_selectpositivebarfillstyle=function(val){this.selectpositivebarfillstyle=val;if(val){if(this._selectpositivebarfillstyle==null||this._selectpositivebarfillstyle.value!=val){var oldValue;if(this._selectpositivebarfillstyle){oldValue=this._selectpositivebarfillstyle.value;}this._changeContentsProperty("selectpositivebarfillstyle",val,oldValue);var selectpositivebarfillstyle=nexacro.BackgroundObject(val,this);this._selectpositivebarfillstyle=selectpositivebarfillstyle;this.on_apply_selectpositivebarfillstyle(selectpositivebarfillstyle);}}else{if(this._selectpositivebarfillstyle){this._selectpositivebarfillstyle=null;this.on_apply_selectpositivebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_selectpositivebarfillstyle=function(selectpositivebarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectpositivebarfillstyle",selectpositivebarfillstyle,"select");};_pChartFloatSeriesControl.set_selectnegativebarfillstyle=function(val){this.selectnegativebarfillstyle=val;if(val){if(this._selectnegativebarfillstyle==null||this._selectnegativebarfillstyle.value!=val){var oldValue;if(this._selectnegativebarfillstyle){oldValue=this._selectnegativebarfillstyle.value;}this._changeContentsProperty("selectnegativebarfillstyle",val,oldValue);var selectnegativebarfillstyle=nexacro.BackgroundObject(val,this);this._selectnegativebarfillstyle=selectnegativebarfillstyle;this.on_apply_selectnegativebarfillstyle(selectnegativebarfillstyle);}}else{if(this._selectnegativebarfillstyle){this._selectnegativebarfillstyle=null;this.on_apply_selectnegativebarfillstyle(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_selectnegativebarfillstyle=function(selectnegativebarfillstyle){this._redrawSeries=false;this._applyPropertySeries("Bar","selectnegativebarfillstyle",selectnegativebarfillstyle,"select");};_pChartFloatSeriesControl.set_selectbaropacity=function(val){this.selectbaropacity=val;if(0===val||val){if(this._selectbaropacity==null||this._selectbaropacity.value!=val){var oldValue;if(this._selectbaropacity){oldValue=this._selectbaropacity.value;}this._changeContentsProperty("selectbaropacity",val,oldValue);var selectbaropacity=nexacro.OpacityObject(val);this._selectbaropacity=selectbaropacity;this.on_apply_selectbaropacity(selectbaropacity);}}else{if(this._selectbaropacity){this._selectbaropacity=null;this.on_apply_selectbaropacity(null);}}this._chart._draw();};_pChartFloatSeriesControl.on_apply_selectbaropacity=function(selectbaropacity){this._redrawSeries=false;this._applyPropertySeries("Bar","selectbaropacity",selectbaropacity,"select");};_pChartFloatSeriesControl.set_barradius=function(val){val=parseInt(val);this.barradius=val;if(val>0){if(this._barradius==null||this._barradius!=val){var oldValue;oldValue=this._barradius;this._changeContentsProperty("barradius",val,oldValue);this._barradius=val;this.on_apply_barradius(val);}}else{this._barradius=null;this.on_apply_barradius(0);}this._chart._draw();};_pChartFloatSeriesControl.on_apply_barradius=function(barradius){this._redrawSeries=false;this._applyPropertySeries("Bar","barradius",barradius);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartFloatSeriesControl.set_itemtextposition=function(val){var itemtextposition_enum=["start","middle","end","outside"];if(itemtextposition_enum.indexOf(val)== -1){return;}if(this.itemtextposition!=val){this._changeContentsProperty("itemtextposition",val,this.itemtextposition);this.itemtextposition=val;this.on_apply_itemtextposition();}this._chart._draw();};_pChartFloatSeriesControl.on_apply_itemtextposition=function(){this._chart._recreate=true;this._chart._rearrange=true;};_pChartFloatSeriesControl.set_itemtextgap=function(val){if(val!==undefined&&val!==null&&val!==""){if(isNaN(val)){return;}val=parseInt(val);}if(this.itemtextgap!=val){this._changeContentsProperty("itemtextgap",val,this.itemtextgap);this.itemtextgap=val;this.on_apply_itemtextgap();}};_pChartFloatSeriesControl._setData=function(){var chart=this._chart;if(chart){var obj;var data=[];var pThis=this;var selectedindex=0;var invaliddata=false;var charttype=chart._type_name;var selecttype=this.selecttype;var categorycolumn=chart._getBindableValue("categorycolumn");var valuecolumn=this._getBindableValue("valuecolumn");var value2column=this._getBindableValue("value2column");var value3column=this._getBindableValue("value3column");var selectcolumn=this._getBindableValue("selectcolumn");var rotateaxis=chart.rotateaxis;var binddataset=chart._binddataset;var coltype;var invalidcategorycolumn=chart._invalidcategorycolumn;var invalidvaluecolumn=this._invalidvaluecolumn;var invalidselectcolumn=this._invalidselectcolumn;var invalidvalue2column=this._invalidvalue2column;var invalidvalue3column=this._invalidvalue3column;if(binddataset){if(!categorycolumn){invaliddata=true;}else{coltype=binddataset._getColumnType(categorycolumn);if(!coltype||invalidcategorycolumn){invaliddata=true;}}if(valuecolumn){coltype=binddataset._getColumnType(valuecolumn);if(!coltype||invalidvaluecolumn){invaliddata=true;}}if(value2column){coltype=binddataset._getColumnType(value2column);if(!coltype||invalidvalue2column){invaliddata=true;}}if(value3column){coltype=binddataset._getColumnType(value3column);if(!coltype||invalidvalue3column){invaliddata=true;}}if(selectcolumn){coltype=binddataset._getColumnType(selectcolumn);if(!coltype||invalidselectcolumn){selectcolumn=null;}}if(invaliddata){this._data=[];this._chart._changedData=true;return false;}}var dataMap=chart._dataMap;if(dataMap){if(valuecolumn){var waterfallSum=0;var waterfallIndex;var waterfallPreData;dataMap.forEach(function(key){if(nexacro._isString(key)){obj=dataMap.getByKey(key);if(obj){var xdata=obj[valuecolumn];var ydata=obj[value2column];var valuedata=null;var categorydata=obj[categorycolumn];if(value3column){valuedata=obj[value3column];}if(chart.isdatetimevalue){data.push([xdata,categorydata,ydata,valuedata]);}else{if(rotateaxis){if(chart.waterfall){waterfallSum+=xdata;if(waterfallPreData){data.push([xdata+waterfallPreData[0],categorydata,waterfallPreData[0],0]);}else{data.push([xdata,categorydata,0,0]);}}else{data.push([xdata,categorydata,ydata,0]);}}else{if(chart.waterfall){waterfallSum+=xdata;if(waterfallPreData){data.push([categorydata,xdata+waterfallPreData[1],waterfallPreData[1],0]);}else{data.push([categorydata,xdata,0,0]);}}else{data.push([categorydata,xdata,ydata,0]);}}waterfallPreData=data[data.length-1];}}}},this);}}if(chart.waterfall&&data.length>0){if(rotateaxis){data.push([waterfallSum,chart.waterfallsumtext,0,0]);}else{data.push([chart.waterfallsumtext,waterfallSum,0,0]);}}this._data=data;this._chart._dataMap=dataMap;}};_pChartFloatSeriesControl.on_apply_itemtextgap=function(){this._chart._rearrange=true;this._chart._recreate=true;};_pChartFloatSeriesControl.destroy=function(){if(!this._chart){return;}var seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");var itemLength=this._itemCnt;var i;var re;for(i=0;i<itemLength;i++ ){if(seriesGroup){var visible=this.visible,itemID,item;if(visible){itemID=this._configIndex+" SeriesBarItem_"+i;item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);if(item._series){if(re._series){if(re._series._seriesitems.length>0){for(i=0;i<re._series._seriesitems.length;i++ ){if(re._series._seriesitems[i]){if(re._series._seriesitems[i]){delete re._series._seriesitems[i];re._series._seriesitems[i]=null;}delete re._series._seriesitems[i];re._series._seriesitems[i]=null;}}}delete re._series;re._series=null;}delete item._series;item._series=null;}item.destroy();re.destroy();}}if(this.itemtextvisible){itemID=this._configIndex+" SeriesItemText_"+i;item=seriesGroup.getObjectByID(itemID);if(item){re=seriesGroup.removeChild(item);item.destroy();re.destroy();}}}}if(this._seriesitems.length>0){for(i=0;i<this._seriesitems.length;i++ ){if(this._seriesitems[i]){if(this._seriesitems[i]._series){delete this._seriesitems[i]._series;this._seriesitems[i]._series=null;}this._seriesitems[i].destroy();delete this._seriesitems[i];this._seriesitems[i]=null;}}}delete this.valueaxis;delete this._xaxis;delete this._yaxis;delete this._pointshape;this.valueaxis=null;this.visible=null;this.barsize=null;this.positivebarlinestyle=null;this.positivebarfillstyle=null;this.negativebarlinestyle=null;this.negativebarfillstyle=null;this._positivebarlinestyle=null;this._positivebarfillstyle=null;this._negativebarlinestyle=null;this._negativebarfillstyle=null;this.waterfalllinestyle=null;this._waterfalllinestyle=null;this._baropacity=null;this.highlightbarvisible=null;this.highlightpositivebarlinestyle=null;this.highlightpositivebarfillstyle=null;this.highlightnegativebarlinestyle=null;this.highlightnegativebarfillstyle=null;this._highlightpositivebarlinestyle=null;this._highlightpositivebarfillstyle=null;this._highlightnegativebarlinestyle=null;this._highlightnegativebarfillstyle=null;this.highlightbaropacity=null;this._highlightbaropacity=null;this.selectpositivebarlinestyle=null;this.selectpositivebarfillstyle=null;this._selectnegativebarlinestyle=null;this._selectnegativebarfillstyle=null;this.selectbaropacity=null;this._selectbaropacity=null;this.pointshape=null;this.itemtextposition=null;this.itemtextgap=null;this._pointshape=null;this._borderwidth=null;this._color=null;this._xaxis=null;this._yaxis=null;this._changedSeriesColor=null;this._barsize=null;this._groupbarwidth=null;this._baralign=null;this._barwidth=null;this._seriesitems=null;this._pointshapeObj=null;this._stacktype=null;nexacro._SeriesBase.prototype.destroy.call(this);return true;};_pChartFloatSeriesControl._applyPropertySeries=function(type,style,value,select){var item=null,seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){var itemID=this._configIndex+" Series"+type+"Item_"+(i-1);item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){if(style=="fillstyle"||style=="pointfillstyle"||style=="lineareafillstyle"){item.set_fillstyle(value);}else if(style=="positivebarlinestyle"||style=="pointlinestyle"||style=="linestyle"){item.set_strokepen(value);}else if(style=="opacity"||style=="pointopacity"||style=="lineopacity"||style=="lineareaopacity"){item.set_opacity(value);}else if(style=="visible"||style=="pointvisible"||style=="linevisible"||style=="lineareavisible"){item.set_visible(value);}}}}};_pChartFloatSeriesControl._draw2=function(redraw){if(!redraw){return;}this._itemCnt=0;this._itemtextlist=[];if(this.visible){}};_pChartFloatSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartFloatSeriesControl._drawnow=function(){if(this.visible){this._drawSeriesBars();}};_pChartFloatSeriesControl._drawSeriesBars=function(){var positivebarlinestyle=this.positivebarlinestyle||"1px solid red",negativebarlinestyle=this.negativebarlinestyle||"1px solid blue",positivefillstyle=this._positivebarfillstyle||"#eb495c",negativefillstyle=this._negativebarfillstyle||"#5058eb",opacity=this.baropacity,barLeft,barRight,barwidth,datapoints=this._datapoints,points=datapoints.points,ps=datapoints.pointsize,selectedItem=this._selectedItem,selectpositivebarlinestyle=this.selectpositivebarlinestyle||"1px solid "+this._selectcolor,selectpositivebarfillstyle=this.selectpositivebarfillstyle||this._selectcolor,selectnegativebarlinestyle=this.selectnegativebarlinestyle||"1px solid "+this._selectcolor,selectnegativebarfillstyle=this.selectnegativebarfillstyle||this._selectcolor,selectbaropacity=this.selectbaropacity||this.opacity,isselectitem=false,index=0,x,y,b,effect=this._chart_aniframe_obj,rotateaxis=this._chart.rotateaxis;this.on_apply_barsize(this.barsize);barwidth=this._barsize||this._chart._barsize;barwidth=this._chart._getcheckTimeAxisBarWidth(barwidth);switch(this._baralign){case "left":barLeft=0;break;case "right":barLeft= -barwidth;break;default:barLeft= -barwidth/2;}barRight=barLeft+barwidth;var paintlinecolor,paintfillcolor,isPositive;var pLeng=points.length;var nullitem=null;var p,copyb;var interval=this._xaxis.tickinterval?this._xaxis.tickinterval:1;var lastIndex=0;if(this._chart.waterfall){for(var i=0;i<pLeng;i+=ps){lastIndex++ ;}lastIndex=lastIndex-1;}var orgb;for(var i=0;i<pLeng;i+=ps){var length=selectedItem.length;if(length>0){isselectitem=selectedItem[index];}x=points[i];y=points[i+1];orgb=b=points[i+2];isPositive=true;if(this._chart.isdatetimevalue){if(x==null||y==null){continue;}p=points[i+3];copyb=new Date();if(!orgb||orgb==0){b=new Date();b.setTime(this._xaxis._min);}copyb.setTime(b.getTime());if(interval==1){if(this._xaxis._timesubtickformat=="HOUR"){if(orgb||orgb!==0){copyb.setHours(b.getHours()+1);}}else{copyb.setDate(b.getDate()+1);}}x=this._chart._checkDateValue(x);copyb=this._chart._checkDateValue(copyb);}else{copyb=b;if(rotateaxis){if(x<b){isPositive=false;}}else{if(y<b){isPositive=false;}}}if(effect&&effect.isloadanimation){isselectitem=false;if(!rotateaxis){y=this._getanimationdrawvalue(y);}else{x=this._getanimationdrawvalue(x);}b=this._getanimationdrawvalue(b);}if(isselectitem){if(isPositive){paintlinecolor=selectpositivebarlinestyle;paintfillcolor=selectpositivebarfillstyle;}else{paintlinecolor=selectnegativebarlinestyle;paintfillcolor=selectnegativebarfillstyle;}this._drawBar(x,y,copyb,p,barLeft,barRight,this._xaxis,this._yaxis,paintlinecolor,paintfillcolor,selectbaropacity,index,nullitem,isPositive,lastIndex);}else{if(this._chart.waterfall&&(lastIndex==index)){paintfillcolor=this._waterfallsumbarfillstyle||"green";paintlinecolor=this._waterfallsumbarlinestyle||"1px solid #000000";}else{if(isPositive){if(positivefillstyle instanceof Array){paintfillcolor=positivefillstyle[index%positivefillstyle.length];}else{paintfillcolor=positivefillstyle;}paintlinecolor=positivebarlinestyle;}else{if(negativefillstyle instanceof Array){paintfillcolor=negativefillstyle[index%negativefillstyle.length];}else{paintfillcolor=negativefillstyle;}paintlinecolor=negativebarlinestyle;}}this._drawBar(x,y,copyb,p,barLeft,barRight,this._xaxis,this._yaxis,paintlinecolor,paintfillcolor,opacity,index,nullitem,isPositive,lastIndex);}index++ ;}this._itemCnt=index;};_pChartFloatSeriesControl._drawBar=function(x,y,b,p,barLeft,barRight,axisx,axisy,positivebarlinestyle,fillstyle,opacity,index,item,isPositive,lastIndex){var left,right,bottom,top,tmp,rotateaxis=this._chart.rotateaxis,effect=this._chart_aniframe_obj,tickstartgap;var waterfall=this._chart.waterfall;this.percentbarheightratio=80;var heightpercent=1-(this.percentbarheightratio*0.01);var pctbar_top,pctbar_bottom,pctbar_right,pctbar_width,pctbar_height;if(rotateaxis){left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;}}else{left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;}}if(left<axisx._min){left=axisx._min;}if(right>axisx._max){right=axisx._max;}if(bottom<axisy._min){bottom=axisy._min;}if(top>axisy._max){top=axisy._max;}if(p&&!isNaN(p)&&p>0&&p<=100){var gap=right-left;pctbar_right=(left+(gap*(p*0.01)));}if(axisx.p2c){left=axisx.p2c(left);right=axisx.p2c(right);pctbar_right=axisx.p2c(pctbar_right);}if(axisy.p2c){bottom=axisy.p2c(bottom);top=axisy.p2c(top);var heightgap=Math.abs(((bottom-top)*heightpercent/2));pctbar_top=top-heightgap;pctbar_bottom=bottom+heightgap;}if(!rotateaxis){tickstartgap=axisx._tickstartgap;if(tickstartgap){left+=tickstartgap;right+=tickstartgap;}}else{tickstartgap=axisy._tickstartgap;if(tickstartgap){bottom+=tickstartgap;top+=tickstartgap;pctbar_top+=tickstartgap;pctbar_bottom+=tickstartgap;}}bottom+=axisy._tickendspace;top+=axisy._tickendspace;pctbar_bottom+=axisy._tickendspace;pctbar_top+=axisy._tickendspace;var rect,chart=this._chart,width=0,height=0,seriesId,points=[],seriesGroup=chart._seriesGroup,highlightGroup=chart._highlightGroup;var waterfalleline;width=right-left;height=bottom-top;pctbar_width=pctbar_right-left;pctbar_height=pctbar_bottom-pctbar_top;if(width<0){left+=width;width=Math.abs(width);pctbar_width=Math.abs(pctbar_width);}if(height<0){top+=height;height=Math.abs(height);pctbar_top+=pctbar_height;pctbar_height=Math.abs(pctbar_height);}if(rotateaxis){this._barwidth=height;}else{this._barwidth=width;}var sv_fillstyle;var prevRectId,prevRect;var rectpct,pointspct=[];if(fillstyle instanceof Array){}else{if(fillstyle&&this.autogradation!="none"){var bTarget=false;if(fillstyle instanceof nexacro._BackgroundObject){if(!fillstyle.gradient){bTarget=true;fillstyle=fillstyle.value;}}else{bTarget=(fillstyle.indexOf("gradient")<0)?true:false;}if(bTarget){var anglePos=(this.parent.rotateaxis==true)?"bottom":"right";var darkcolor1;if(this.autogradation=="center"){var lightcolor1=this._shadeColor(fillstyle, -30);var lightcolor2=this._shadeColor(fillstyle, -50);darkcolor1=this._shadeColor(fillstyle,20);sv_fillstyle="linear-gradient(to "+anglePos+","+darkcolor1+" 0%,"+fillstyle+" 25%,"+lightcolor1+" 40%,"+lightcolor2+" 50%,"+lightcolor1+" 60%,"+fillstyle+" 70%,"+darkcolor1+" 100%)";}else{var darkcolor0=this._shadeColor(fillstyle,5);darkcolor1=this._shadeColor(fillstyle,10);var darkcolor2=this._shadeColor(fillstyle,25);var darkcolor3=this._shadeColor(fillstyle,40);sv_fillstyle="linear-gradient(to "+anglePos+","+darkcolor3+" 0%,"+darkcolor1+" 10%,"+darkcolor0+" 25%,"+fillstyle+" 50%,"+darkcolor0+" 60%,"+darkcolor1+" 80%,"+darkcolor2+" 90%,"+darkcolor3+" 100%)";}fillstyle=sv_fillstyle;}}}var radius={tl:0,tr:0,br:0,bl:0};if(item){var highlightitem=item._barHighlight;if(!highlightitem){rect=new nexacro.ChartGraphicsRect(left,top,width,height);if(this.shadowstyle){rect.set_shadow(this.shadowstyle);}if(this.barradius>0&&this.parent.rotateaxis==true){radius.tl=radius.bl=this.barradius;radius.tr=radius.br=this.barradius;}else{radius.bl=radius.br=this.barradius;radius.tl=radius.tr=this.barradius;}if(this.barradius>0){rect.set_radiusround(radius);}rect.set_strokepen(positivebarlinestyle);if(fillstyle instanceof Array){}else{rect.set_fillstyle(fillstyle);}rect.set_opacity(opacity);seriesId=this._configIndex+" SeriesHighlightBarItem";rect.set_id(seriesId);highlightGroup.addChild(rect);item._barHighlight=rect;rect._item=item;rect.index=item.index;rect.value=item.value;}else{rect=highlightitem;}}else{if(seriesGroup){seriesId=this._configIndex+" SeriesBarItem_"+index;rect=seriesGroup.getObjectByID(seriesId);if(!rect){rect=new nexacro.ChartGraphicsRect(left,top,width,height);rect.set_id(seriesId);seriesGroup.addChild(rect);}else{rect.set_x(left);rect.set_width(width);rect.set_y(top);rect.set_height(height);}rect._ispositive=isPositive;if(this.shadowstyle){rect.set_shadow(this.shadowstyle);}if(this.barradius>0&&this.parent.rotateaxis==true){radius.tl=radius.bl=this.barradius;radius.tr=radius.br=this.barradius;}else{radius.bl=radius.br=this.barradius;radius.tl=radius.tr=this.barradius;}if(this.barradius>0){rect.set_radiusround(radius);}rect.set_strokepen(positivebarlinestyle);if(fillstyle instanceof Array){}else{rect.set_fillstyle(fillstyle);}rect.set_opacity(opacity);points[0]=x;points[1]=y;points[2]=b;rect.index=index;if(rotateaxis){points[3]=x-b;rect.value=x-b;}else{points[3]=y-b;rect.value=y-b;}rect._points=points;if(waterfall&&index>0&&(index!=lastIndex)){seriesId=this._configIndex+" SerieswaterfallItem_"+index;waterfalleline=seriesGroup.getObjectByID(seriesId);if(!waterfalleline){waterfalleline=new nexacro.ChartGraphicsLine();waterfalleline.set_id(seriesId);seriesGroup.addChild(waterfalleline);}prevRectId=this._configIndex+" SeriesBarItem_"+(index-1);prevRect=seriesGroup.getObjectByID(prevRectId);if(prevRect){var px,py,pw,ph,sx1,sx2,sy1,sy2;px=prevRect.x;py=prevRect.y;pw=prevRect._size.width;ph=prevRect._size.height;if(!rotateaxis){sx1=px+pw;sx2=left;if(prevRect._ispositive){sy1=py;}else{sy1=py+ph;}if(isPositive){sy2=top+height;}else{sy2=top;}}else{sy1=py;sy2=top+height;if(prevRect._ispositive){sx1=px+pw;}else{sx1=px;}if(isPositive){sx2=left;}else{sx2=left+width;}}waterfalleline.set_x1(sx1);waterfalleline.set_y1(sy1);waterfalleline.set_x2(sx2);waterfalleline.set_y2(sy2);waterfalleline.set_strokepen(this._waterfalllinestyle||"1px solid #000000");}}if(waterfall&&(index==lastIndex)){rect._issum=true;}if(this._chart.isdatetimevalue){var progressbarlinestyle=this.negativebarlinestyle||"1px solid blue";var progressfillstyle=this._negativebarfillstyle||"green";if(progressfillstyle instanceof Array){progressfillstyle=progressfillstyle[index%progressfillstyle.length];}seriesId=this._configIndex+" SeriesPercentBarItem_"+index;rectpct=seriesGroup.getObjectByID(seriesId);if(!rectpct){rectpct=new nexacro.ChartGraphicsRect(left,pctbar_top,pctbar_width,pctbar_height);rectpct.set_id(seriesId);seriesGroup.addChild(rectpct);}else{rectpct.set_x(left);rectpct.set_width(pctbar_width);rectpct.set_y(pctbar_top);rectpct.set_height(pctbar_height);}if(this.shadowstyle){rectpct.set_shadow(this.shadowstyle);}if(this.barradius>0){rectpct.set_radiusround(radius);}rectpct.set_strokepen(progressbarlinestyle);if(fillstyle instanceof Array){}else{rectpct.set_fillstyle(progressfillstyle);}rectpct.set_opacity(opacity);pointspct[0]=x;pointspct[1]=y;pointspct[2]=b;rectpct.index=index;points[3]=x-b;rectpct.value=x-b;rectpct._points=pointspct;}}}var board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight;if(board){boardWidth=board.width-borderWidth;boardHeight=board.height-borderHeight;if(rect){rect._clipitems=[];rect.setClipPath(new nexacro.Rect( -left, -top,boardWidth,boardHeight));}}if(rect){rect._series=this;this._seriesitems[index]=rect;}if(rect&&!item){var itemtextvisible=this.itemtextvisible;if(itemtextvisible){var isEffect=(effect&&effect.isloadanimation);if(!isEffect){this._drawBarItemText(left,right,bottom,top,width,height,rect);}}}return {"l":left,"t":top,"w":width,"h":height,"r":right,"b":bottom};};_pChartFloatSeriesControl._drawBarItemText=function(left,right,bottom,top,width,height,item,stackgroupname,index,uservalue){var seriesGroup=this._chart._seriesGroup;var itemText,itemtextPosition,itemtextGap;itemText=this._createSeriesItemText(item);itemtextPosition=this.itemtextposition;itemtextGap=this.itemtextgap;var rotateaxis=this._chart.rotateaxis;function positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");textTop=top+(height/2);textLeft=left+itemtextGap;}else{itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=bottom-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("center");var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){textTop=top+(height/2);textLeft=left+(width/2)+itemtextGap;}else{textLeft=left+(width/2);textTop=top+(height/2)-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("right");textTop=top+(height/2);textLeft=right-itemtextGap;}else{itemText.set_verticalAlign("top");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=top+itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}function positionoutside(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis){var textTop=0;var textLeft=0;if(!itemtextGap){itemtextGap=0;}if(rotateaxis){itemText.set_verticalAlign("middle");itemText.set_textAlign("left");textTop=top+(height/2);textLeft=right+itemtextGap;}else{itemText.set_verticalAlign("bottom");itemText.set_textAlign("center");textLeft=left+(width/2);textTop=top-itemtextGap;}itemText.set_x(textLeft);itemText.set_y(textTop);}if(!nexacro._isNull(itemText)){if(itemtextPosition){switch(itemtextPosition){case "start":{positionstart(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "middle":{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "end":{positionend(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;case "outside":{positionoutside(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}break;default:positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);break;}}else{positionmiddle(itemText,left,right,bottom,top,width,height,itemtextGap,rotateaxis);}this._chart._setChangeInBoardAreaPos(itemText);if(stackgroupname!==undefined&&stackgroupname!==null){}else{seriesGroup.addChild(itemText);itemText._series=this;}}};_pChartFloatSeriesControl._showHighlight=function(){};_pChartFloatSeriesControl._showBarHighlight=function(item){if(!this.highlightbarvisible){return;}var barHighlight=item._barHighlight;if(!barHighlight){var points=item._points,index=item.index,positivebarlinestyle=this.highlightpositivebarlinestyle||"1px solid #eb495c",positivebarfillstyle=this.highlightpositivebarfillstyle||"#ff0000",negativebarlinestyle=this.highlightnegativebarlinestyle||"1px solid #5058eb",negativebarfillstyle=this.highlightnegativebarfillstyle||"#0000ff",baropacity=this.highlightbaropacity,barLeft,barRight;var barwidth;var x,y,b,isPositive;var rotateaxis=this._chart.rotateaxis;var paintfillcolor,paintlinecolor;x=points[0];y=points[1];b=points[2];isPositive=true;if(rotateaxis){if(x<b){isPositive=false;}}else{if(y<b){isPositive=false;}}if(isPositive){if(positivebarfillstyle instanceof Array){paintfillcolor=positivebarfillstyle[index%positivebarfillstyle.length];}else{paintfillcolor=positivebarfillstyle;}paintlinecolor=positivebarlinestyle;}else{if(negativebarfillstyle instanceof Array){paintfillcolor=negativebarfillstyle[index%negativebarfillstyle.length];}else{paintfillcolor=negativebarfillstyle;}paintlinecolor=negativebarlinestyle;}this.on_apply_barsize(this.barsize);barwidth=this._barsize||this._chart._barsize;barwidth=this._chart._getcheckTimeAxisBarWidth(barwidth);switch(this._baralign){case "left":barLeft=0;break;case "right":barLeft= -barwidth;break;default:barLeft= -barwidth/2;}barRight=barLeft+barwidth;this._drawBar(points[0],points[1],points[2],points[3],barLeft,barRight,this._xaxis,this._yaxis,paintlinecolor,paintfillcolor,baropacity,index,item);this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);this._chart._graphicsControl.draw();}};_pChartFloatSeriesControl._hideBarHighlight=function(item){if(!this.highlightbarvisible){return;}var barHighlight=item._barHighlight;if(barHighlight&&!nexacro._ChartGraphicsLib.isEmpty(barHighlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(barHighlight);delete item._barHighlight;this._chart._graphicsControl.draw();}};_pChartFloatSeriesControl._findMatchingSeries=function(stacktype){var res=null,allseries;var stackobject=this._chart._getVisibleStackGroupObject(this);allseries=stackobject._list;for(var i=0;i<allseries.length; ++i){if(this==allseries[i]){break;}res=allseries[i];}return res;};_pChartFloatSeriesControl._setColor=function(colorset){this._color=colorset;this._changedSeriesColor=true;var changedColorset=this._chart._changedColorset;if(changedColorset){var visible=this.visible,pointvisible=this.pointvisible,linevisible=this.linevisible,positivebarlinestyle,fillstyle,linestyle,lineareafillstyle,pointlinestyle,pointfillstyle;var width,style,color;if(visible){if(this._positivebarlinestyle){width=this._positivebarlinestyle.width;style=this._positivebarlinestyle.style;color=this._positivebarlinestyle.color;positivebarlinestyle=width+" "+style+" "+color;this.set_positivebarlinestyle(positivebarlinestyle);}else{positivebarlinestyle="1px solid "+colorset;this._applyPropertySeries("Bar","positivebarlinestyle",positivebarlinestyle);}if(this._fillstyle){fillstyle=this._fillstyle;this.set_fillstyle(fillstyle);}else{fillstyle=colorset;this._applyPropertySeries("Bar","fillstyle",fillstyle);}}if(linevisible){if(this._linestyle){width=this._linestyle.width;style=this._linestyle.style;color=this._linestyle.color;linestyle=width+" "+style+" "+color;this.set_linestyle(linestyle);}else{linestyle="1px solid "+colorset;this._applyPropertySeries("Line","linestyle",linestyle);this.linestyle=linestyle;}if(this.lineareavisible){if(this._lineareafillstyle){lineareafillstyle=this._lineareafillstyle;this.set_lineareafillstyle(lineareafillstyle);}else{lineareafillstyle=colorset;this._applyPropertySeries("Area","lineareafillstyle",lineareafillstyle);this.lineareafillstyle=lineareafillstyle;}}}if(pointvisible){if(this._pointlinestyle){width=this._pointlinestyle.width;style=this._pointlinestyle.style;color=this._pointlinestyle.color;pointlinestyle=width+" "+style+" "+color;this.set_pointlinestyle(pointlinestyle);}else{pointlinestyle="1px solid "+colorset;this._applyPropertySeries("Point","pointlinestyle",pointlinestyle);this.pointlinestyle=pointlinestyle;}if(this._pointfillstyle){pointfillstyle=this._pointfillstyle;this.set_pointfillstyle(pointfillstyle);}else{pointfillstyle=colorset;this._applyPropertySeries("Point","pointfillstyle",pointfillstyle);this.pointfillstyle=pointfillstyle;}}}};_pChartFloatSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};}
if(!nexacro.PyramidChart){nexacro.PyramidChart=function(id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent){nexacro._ChartBase.call(this,id,left,top,width,height,right,bottom,minwidth,maxwidth,minheight,maxheight,parent);this.categorycolumn=new nexacro.BindableValue("");};var _pPyramidChart=nexacro._createPrototype(nexacro._ChartBase,nexacro.PyramidChart);nexacro.PyramidChart.prototype=_pPyramidChart;_pPyramidChart._type_name="PyramidChart";_pPyramidChart.categorycolumn="";_pPyramidChart._boardWidth=0;_pPyramidChart._boardHeight=0;_pPyramidChart._centerLeft=0;_pPyramidChart._centerTop=0;_pPyramidChart.graphtype="pyramid";_pPyramidChart.invertchart=false;_pPyramidChart._invalidcategorycolumn=false;_pPyramidChart.on_destroy_contents=function(){this.categorycolumn=null;this._boardWidth=null;this._boardHeight=null;this._centerLeft=null;this._centerTop=null;this.graphtype=null;this.invertchart=null;nexacro._ChartBase.prototype.on_destroy_contents.call(this);return true;};_pPyramidChart.set_graphtype=function(v){if(v!="pyramid"&&v!="funnel"){v="pyramid";}if(this.graphtype!=v){this.graphtype=v;this.on_apply_graphtype(v);}this._draw();};_pPyramidChart.on_apply_graphtype=function(v){};_pPyramidChart.set_invertchart=function(v){if(v!==true){v=false;}if(this.graphtype!=v){this.invertchart=v;this.on_apply_invertchart(v);}this._draw();};_pPyramidChart.on_apply_invertchart=function(v){};_pPyramidChart.set_graphtype=function(v){if(v!="pyramid"&&v!="funnel"){v="pyramid";}if(this.graphtype!=v){this.graphtype=v;this.on_apply_graphtype(v);}this._draw();};_pPyramidChart.on_apply_graphtype=function(v){};_pPyramidChart.set_categorycolumn=function(v){if(this.categorycolumn._value!=v){this.categorycolumn._set(v);this.on_apply_categorycolumn();}this._draw();};_pPyramidChart._checkcategorycolumn=function(){var categorycolumn=this.categorycolumn;var bindtype=categorycolumn._bindtype;if(bindtype==0){this._invalidcategorycolumn=true;}else{categorycolumn=this._getBindableValue("categorycolumn");var binddataset=this._binddataset;if(binddataset){var coltype=binddataset._getColumnType(categorycolumn);if(!coltype){this._invalidcategorycolumn=true;}else{this._invalidcategorycolumn=false;}}}};_pPyramidChart.on_apply_categorycolumn=function(){this.on_apply_binddataset();};_pPyramidChart.setSeries=function(id,contents){var series,seriesId,seriesIndex= -1;if(id&&typeof (id)=="string"){seriesId=id;}else{if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){seriesId=contents.id;}});}}if(seriesId){series=this.getSeriesByID(seriesId);seriesIndex=nexacro._ChartGraphicsLibArray.indexOf(this.seriesset,series);}if(series){var seriesContents={};if(typeof (contents)=="object"){if(!nexacro._ChartGraphicsLib.isEmpty(contents)){nexacro._ChartGraphicsLibObject.Each(contents,function(name,val,object){if(name=="id"){seriesId=contents.id;}});}seriesContents=contents;}else{seriesIndex= -1;}if(seriesIndex!= -1){this.contents.seriesset[seriesIndex]=this._mergeContents(true,this.contents.seriesset[seriesIndex],seriesContents);this._drawing=true;this._setProperties(seriesContents,series);this._drawing=false;}if(seriesIndex!= -1&&this.contents.seriesset[seriesIndex]){seriesIndex=series._configIndex;}}else{if(this.seriesset.length>0){seriesIndex= -1;}else{series=this._appendSeries(contents);if(series&&series!= -1){seriesIndex=series._configIndex;}}}this._draw();return seriesIndex;};_pPyramidChart.showSeries=function(id){var s=this.getSeriesByID(id);if(s){var visible=s._orgVisible;s._orgVisible=undefined;if(visible){s.set_visible(true);}}};_pPyramidChart.hideSeries=function(id){var s=this.getSeriesByID(id);if(s){if(s._orgVisible===undefined||s._orgVisible===null){s._orgVisible=s.visible;}s.set_visible(false);}};_pPyramidChart._arrange=function(){nexacro._ChartBase.prototype._arrange.call(this);if(this._rearrange){this._arrangeBoard();}var s=this.seriesset[0];if(s){s._rearrangeProcessItemData();}this._arrangeSeries();};_pPyramidChart._createSeriesset=function(o,id){if(!this._seriesGroup){return false;}var seriesset=this.seriesset,series,seriesLength= -1;if(seriesset){seriesLength=seriesset.length;if(seriesLength>0){return;}}var s=seriesset[0],seriesId;if(s){seriesId=s.id;if(seriesId==id){throw nexacro.MakeNativeError(this,"native_exist_id",seriesId);return;}}series=this._appendSeries(o);return series;};_pPyramidChart._createSeries=function(contents,id){var series=new nexacro.ChartPyramidSeriesControl(id,this,this._graphicsControl);if(series){return series;}};_pPyramidChart._setSeries=function(){var series=this.seriesset,length=series.length,items;for(var i=0;i<length;i++ ){var s=series[i];if(s){if(this._changedData){s._setData();if(nexacro._isNull(s._data)){return false;}items=s._setItemData();this._seriesitems=items;this._changedColorset=true;}if(this._changedColorset&&!s._changedFillStyle){items=this._seriesitems;if(items){s._setItemColor(items);}this._changedColorset=false;}else{items=this._seriesitems;if(items){s.on_apply_fillstyle();}}}}};_pPyramidChart._getHighlightVisible=function(){var series=this.seriesset,length=series.length,highlightvisible=false;for(var i=0;i<length;i++ ){var s=series[i];if(s.highlightvisible){highlightvisible=true;break;}}return highlightvisible;};_pPyramidChart._showSeriesItem=function(id){var s=this.seriesset[0];var seriesGroup=this._seriesGroup;if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=true;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pPyramidChart._hideSeriesItem=function(id){var s=this.seriesset[0];var seriesGroup=this._seriesGroup;if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){item._isShow=false;this._rearrange=true;if(this.legend){this._applyLegendItem();}}}}this._draw();};_pPyramidChart._GetSeriesItemIndex=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){return i;}}}};_pPyramidChart._GetSeriesItemFromId=function(id){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(name==id){return item;}}}};_pPyramidChart._GetSeriesItemFromIndex=function(index){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item.category;if(i==index){return item;}}}};_pPyramidChart._GetSeriesItemIndexFromSlice=function(_slice){var s=this.seriesset[0];if(s){var seriesitems=s._seriesitems,length=seriesitems.length;for(var i=0;i<length;i++ ){var item=seriesitems[i],name=item._slice;var itemslice=item._slice;if(itemslice){if(_slice==itemslice){return i;}else if(itemslice.highlightvisible==true){if(itemslice._highlight){if(itemslice._highlight==_slice){return i;}}}}}}};_pPyramidChart._setDataset=function(){nexacro._ChartBase.prototype._setDataset.call(this);};delete _pPyramidChart;}if(!nexacro.ChartPyramidSeriesControl){nexacro.ChartPyramidSeriesControl=function(id,parent,graphicsControl){nexacro._SeriesBase.prototype.constructor.apply(this,arguments);this._seriesitems=[];this._clickItemIndex=[];this._clickShow=false;};var _pChartPyramidSeriesControl=nexacro._createPrototype(nexacro._SeriesBase,nexacro.ChartPyramidSeriesControl);nexacro.ChartPyramidSeriesControl.prototype=_pChartPyramidSeriesControl;_pChartPyramidSeriesControl._type_name="ChartPyramidSeriesControl";_pChartPyramidSeriesControl.highlightfillstyle="";_pChartPyramidSeriesControl.highlightlinestyle="";_pChartPyramidSeriesControl.highlightopacity=1;_pChartPyramidSeriesControl.autogradation="none";_pChartPyramidSeriesControl.highlightvisible=false;_pChartPyramidSeriesControl.itemtextguidelineopacity=1;_pChartPyramidSeriesControl.itemtextguidelinestyle="";_pChartPyramidSeriesControl.itemtextguidesize=undefined;_pChartPyramidSeriesControl.fillstyle="";_pChartPyramidSeriesControl.linestyle="";_pChartPyramidSeriesControl.opacity=1;_pChartPyramidSeriesControl.visible=true;_pChartPyramidSeriesControl.graphratio=60;_pChartPyramidSeriesControl.marginleftright=10;_pChartPyramidSeriesControl.margintopdown=10;_pChartPyramidSeriesControl.graphhalign="center";_pChartPyramidSeriesControl._itemtextguidesize=null;_pChartPyramidSeriesControl._borderwidth=null;_pChartPyramidSeriesControl._itemtextguidelinestyle=null;_pChartPyramidSeriesControl._changedFillStyle=false;_pChartPyramidSeriesControl._fillstyle=null;_pChartPyramidSeriesControl.set_visible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.visible!=val){this._changeContentsProperty("visible",val,this.visible);this.visible=val;this.on_apply_visible(val);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_visible=function(visible){if(visible){this._applyPropertySeries("visible",true);this._setItemTextGuideLineVisible(true);if(this.itemtextvisible){this.on_apply_itemtextvisible(true);}}else{this._applyPropertySeries("visible",false);this._setItemTextGuideLineVisible(false);if(!this._itemtextvisible){this.on_apply_itemtextvisible(false);}}this._chart._seriesGroup.set_visible(visible);if(this._chart.legend){this._chart._applyLegendItem();}};_pChartPyramidSeriesControl.set_graphhalign=function(val){var halign_enum=["left","right","center"];if(halign_enum.indexOf(val)== -1){val="center";}if(this.graphhalign!=val){this._changeContentsProperty("graphhalign",val,this.graphhalign);this.graphhalign=val;this.on_apply_graphhalign(val);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_graphhalign=function(val){this._chart._recreate=true;};_pChartPyramidSeriesControl.set_graphratio=function(val){var lVal=nexacro.toNumber(val);if(lVal<0||lVal>100){return;}if(this.graphratio!=val){this._changeContentsProperty("graphratio",lVal,this.graphratio);this.graphratio=lVal;this.on_apply_graphratio(lVal);}this._chart._draw();};_pChartPyramidSeriesControl.set_marginleftright=function(val){var lVal=nexacro.toNumber(val);if(this.marginleftright!=lVal){this._changeContentsProperty("marginleftright",lVal,this.marginleftright);this.marginleftright=lVal;this.on_apply_marginleftright(lVal);}this._chart._draw();};_pChartPyramidSeriesControl.set_margintopdown=function(val){var lVal=nexacro.toNumber(val);if(this.margintopdown!=lVal){this._changeContentsProperty("margintopdown",lVal,this.margintopdown);this.margintopdown=lVal;this.on_apply_margintopdown(lVal);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_graphratio=_pChartPyramidSeriesControl.on_apply_margintopdown=_pChartPyramidSeriesControl.on_apply_marginleftright=function(margin){this._chart._recreate=true;};_pChartPyramidSeriesControl.set_linestyle=function(val){this.linestyle=val;if(val){if(this._linestyle==null||this._linestyle.value!=val){var oldValue;if(this._linestyle){oldValue=this._linestyle.value;}this._changeContentsProperty("linestyle",val,oldValue);var linestyle=nexacro.BorderLineObject(val);this._linestyle=linestyle;this.on_apply_linestyle(linestyle);}}else{if(this._linestyle){this._linestyle=null;this.on_apply_linestyle(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_linestyle=function(linestyle){if(linestyle){this._borderwidth=linestyle._width;}this._redrawSeries=false;this._applyPropertySeries("linestyle",linestyle);};_pChartPyramidSeriesControl.set_fillstyle=function(v){this.fillstyle=v;var i=0;if(v&&(typeof (v)=="string")){var val=v.trim();if(val){var fillarr=this._spliterColor(val,false);this._fillstyle=fillarr;this._changedFillStyle=true;this._chart._changedColorset=false;this.on_apply_fillstyle();}}else{this._changedFillStyle=false;this._chart._changedColorset=true;this._chart.on_apply_colorset(this._chart._colorset);this._fillstyle=null;this.on_apply_fillstyle();}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_fillstyle=function(){if(!this._fillstyle){this._redrawSeries=false;if(this._chart.legend){this._chart._applyLegendItem();}return false;}var colors=this._fillstyle;var seriesitems=this._chart._seriesitems;var colorcnt=0;var color;if(seriesitems){for(var i=0;i<seriesitems.length;i++ ){var item=seriesitems[i];if(item&&item._isShow){color=colors[colorcnt];if(color){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){color=colors[colorcnt];colorcnt++ ;}seriesitems[i].color=color;var slice=item._slice;if(slice){slice.set_fillstyle(color);}}}}this._redrawSeries=false;if(this._chart.legend){this._chart._applyLegendItem();}};_pChartPyramidSeriesControl.set_opacity=function(val){this.opacity=val;if(0===val||val){if(this._opacity==null||this._opacity.value!=val){var oldValue;if(this._opacity){oldValue=this._opacity.value;}this._changeContentsProperty("opacity",val,oldValue);var opacity=nexacro.OpacityObject(val);this._opacity=opacity;this.on_apply_opacity(opacity);}}else{if(this._opacity){this._opacity=null;this.on_apply_opacity(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_opacity=function(opacity){this._redrawSeries=false;this._applyPropertySeries("opacity",opacity);};_pChartPyramidSeriesControl.set_itemtextguidesize=function(val){var lVal=null;if(val!==undefined&&val!==null&&val!==""){if(nexacro._isNumber(val)){lVal=val;}else{if(val.length>0){lVal= +val;if(isNaN(lVal)){return;}}}}if(this.itemtextguidesize!=val){this._changeContentsProperty("itemtextguidesize",val,this.itemtextguidesize);this.itemtextguidesize=val;this.on_apply_itemtextguidesize(lVal);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_itemtextguidesize=function(itemtextguidesize){itemtextguidesize=Math.abs(itemtextguidesize);this._itemtextguidesize=itemtextguidesize;this._chart._recreate=true;};_pChartPyramidSeriesControl.set_itemtextguidelinestyle=function(val){this.itemtextguidelinestyle=val;if(val){if(this._itemtextguidelinestyle==null||this._itemtextguidelinestyle.value!=val){var oldValue;if(this._itemtextguidelinestyle){oldValue=this._itemtextguidelinestyle.value;}this._changeContentsProperty("itemtextguidelinestyle",val,oldValue);var itemtextguidelinestyle=nexacro.BorderLineObject(val);this._itemtextguidelinestyle=itemtextguidelinestyle;this.on_apply_itemtextguidelinestyle(itemtextguidelinestyle);}}else{if(this._itemtextguidelinestyle){this._itemtextguidelinestyle=null;this.on_apply_itemtextguidelinestyle(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_itemtextguidelinestyle=function(itemtextguidelinestyle){if(this._is_initprop){return;}var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPyramidItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_strokepen(itemtextguidelinestyle?itemtextguidelinestyle.value||itemtextguidelinestyle:"1px solid #717a8380");}else{this._chart._recreate=true;}}}};_pChartPyramidSeriesControl.set_itemtextguidelineopacity=function(val){this.itemtextguidelineopacity=val;if(0===val||val){if(this._itemtextguidelineopacity==null||this._itemtextguidelineopacity.value!=val){var oldValue;if(this._itemtextguidelineopacity){oldValue=this._itemtextguidelineopacity.value;}this._changeContentsProperty("itemtextguidelineopacity",val,oldValue);var itemtextguidelineopacity=nexacro.OpacityObject(val);this._itemtextguidelineopacity=itemtextguidelineopacity;this.on_apply_itemtextguidelineopacity(itemtextguidelineopacity);}}else{if(this._itemtextguidelineopacity){this._itemtextguidelineopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_itemtextguidelineopacity=function(itemtextguidelineopacity){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPyramidItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_opacity(itemtextguidelineopacity);}else{this._chart._recreate=true;}}}};_pChartPyramidSeriesControl.set_highlightvisible=function(val){if(val===undefined||val===null){return;}val=nexacro._toBoolean(val);if(this.highlightvisible!=val){this._changeContentsProperty("highlightvisible",val,this.highlightvisible);this.highlightvisible=val;this.on_apply_highlightvisible(val);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_highlightvisible=function(highlightvisible){this._chart._recreate=true;};_pChartPyramidSeriesControl.set_highlightlinestyle=function(val){this.highlightlinestyle=val;if(val){if(this._highlightlinestyle==null||this._highlightlinestyle.value!=val){var oldValue;if(this._highlightlinestyle){oldValue=this._highlightlinestyle.value;}this._changeContentsProperty("highlightlinestyle",val,oldValue);var highlightlinestyle=nexacro.BorderLineObject(val);this._highlightlinestyle=highlightlinestyle;this.on_apply_highlightlinestyle(highlightlinestyle);}}else{if(this._highlightlinestyle){this._highlightlinestyle=null;this.on_apply_highlightlinestyle(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_highlightlinestyle=function(highlightlinestyle){};_pChartPyramidSeriesControl.set_highlightfillstyle=function(val){this.highlightfillstyle=val;if(val){if(this._highlightfillstyle==null||this._highlightfillstyle.value!=val){var oldValue;if(this._highlightfillstyle){oldValue=this._highlightfillstyle.value;}this._changeContentsProperty("highlightfillstyle",val,oldValue);var highlightfillstyle=nexacro.BackgroundObject(val,this);this._highlightfillstyle=highlightfillstyle;this.on_apply_highlightfillstyle(highlightfillstyle);}}else{if(this._highlightfillstyle){this._highlightfillstyle=null;this.on_apply_highlightfillstyle(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_highlightfillstyle=function(highlightfillstyle){};_pChartPyramidSeriesControl.set_highlightopacity=function(val){this.highlightopacity=val;if(0===val||val){if(this._highlightopacity==null||this._highlightopacity.value!=val){var oldValue;if(this._highlightopacity){oldValue=this._highlightopacity.value;}this._changeContentsProperty("highlightopacity",val,oldValue);var highlightopacity=nexacro.OpacityObject(val);this._highlightopacity=highlightopacity;this.on_apply_highlightopacity(highlightopacity);}}else{if(this._highlightopacity){this._highlightopacity=null;this.on_apply_highlightopacity(null);}}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_highlightopacity=function(highlightopacity){};_pChartPyramidSeriesControl.set_autogradation=function(val){if(val===undefined||val===null){val="none";}if(this.autogradation!=val){this._changeContentsProperty("autogradation",val,this.autogradation);this.autogradation=val;this.on_apply_autogradation(val);}this._chart._draw();};_pChartPyramidSeriesControl.on_apply_autogradation=function(autogradation){this._redrawSeries=false;};_pChartPyramidSeriesControl._applyPropertySeries=function(style,value,select){var item,seriesGroup,itemID;seriesGroup=this._chart._graphicsControl.getObjectByID("ChartSeriesGroup");if(seriesGroup){for(var i=1;i<=this._itemCnt;i++ ){itemID=this._configIndex+" SeriesPyramid"+"Item_"+i;item=seriesGroup.getObjectByID(itemID);if(!nexacro._isNull(item)){if(style=="visible"){item.set_visible(value);}else if(style=="linestyle"){item.set_strokepen(value);}else if(style=="opacity"){item.set_opacity(value);}}}}};_pChartPyramidSeriesControl._setItemTextGuideLineVisible=function(visible){var chart=this._chart,seriesGroup=chart._seriesGroup,items=this._seriesitems;if(seriesGroup&&!nexacro._isNull(items)){var length=items.length,item;for(var i=0;i<length;i++ ){var itemID=this._configIndex+" SeriesPyramidItemLine_"+i;item=seriesGroup.getObjectByID(itemID);if(item){item.set_visible(visible);}else{this._chart._recreate=true;}}}};_pChartPyramidSeriesControl._draw=function(redraw){nexacro._SeriesBase.prototype._draw.call(this);var effect=this._chart_aniframe_obj;if(!redraw){if(this._chart._isanimationloading){this._end_animation_series_callback();}return;}this._itemCnt=0;this._itemtextlist=[];if(effect.enableanimation){if(this._chart._isanimationloading){this._end_animation_series_callback();}else{this._start_animate();}}else{this._drawnow();}};_pChartPyramidSeriesControl._drawnow=function(){this._itemCnt=0;this._itemtextlist=[];this._drawPyramidSeries();};_pChartPyramidSeriesControl._setItemData=function(){var data=this._data,itemdata;if(data){itemdata=this._processItemData(data);}return itemdata;};_pChartPyramidSeriesControl._setItemColor=function(items){var colorcnt=0;var colorset=this._chart._colorset;var item;for(var i=0;i<items.length;i++ ){item=items[i];if(item._isShow&&item.value){var itemColor=colorset[colorcnt];if(itemColor){colorcnt++ ;}else{colorcnt=0;}if(colorcnt==0){itemColor=colorset[colorcnt];colorcnt++ ;}items[i].color=itemColor;var slice=items[i]._slice;if(slice){slice.set_fillstyle(itemColor);}}}};_pChartPyramidSeriesControl._rearrangeProcessItemData=function(arritems){var total=0;var items=arritems||this._seriesitems;var i=0;var value;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){value=0;value=items[i].value;var percent=(value/total).toFixed(2);items[i].percent=nexacro.toNumber(percent);}return items;};_pChartPyramidSeriesControl._processItemData=function(data){var length=data.length,slice=[],i=0,value,total=0;for(i=0;i<length;i++ ){var seriesItems={};var showFlag=true;if(data[i]!=null&&data[i][0]!=undefined){if(!this._clickShow&&(this._clickItemIndex.length>0)){for(var j=0;j<this._clickItemIndex.length;j++ ){var index=this._clickItemIndex[j];if(i==index){showFlag=false;}}}if(!showFlag){seriesItems._isShow=false;}else{seriesItems._isShow=true;}seriesItems.index=data[i][2];seriesItems.rowindex=data[i][2];seriesItems.category=data[i][0];seriesItems.value=parseFloat(data[i][1])||0;slice.push(seriesItems);}}this._seriesitems=slice;var items=this._seriesitems;for(i=0;i<items.length; ++i){if(items[i]._isShow){value=items[i].value;if(value){total+=items[i].value;}}}for(i=0;i<items.length; ++i){value=0;var percent=0;var angle=0;var endangle=this._endangle||Math.PI*2;value=items[i].value;percent=(value/total).toFixed(2);items[i].percent=nexacro.toNumber(percent);}return items;};_pChartPyramidSeriesControl._drawPyramidSeries=function(){var items=this._seriesitems,isNullData=false,board=this._chart._boardRect,boardWidth=0,boardHeight=0,borderWidth=this._chart._boardBorderWidth,borderHeight=this._chart._boardBorderHeight,effect=this._chart_aniframe_obj,itemtextvisible=this.itemtextvisible;if(!items){return false;}if(board){this._chart._boardWidth=board.width-borderWidth;this._chart._boardHeight=board.height-borderHeight;this._chart._centerLeft=this._chart._boardWidth/2;this._chart._centerTop=this._chart._boardHeight/2;}for(var i=0;i<items.length;i++ ){var item=items[i];if(item&&item._isShow){var category=item.category,value=item.value;if(category==null||value===undefined||value===null){isNullData=true;break;}}}if(items.length<=0||isNullData){return;}this.marginleftright=nexacro.toNumber(this.marginleftright);this.margintopdown=nexacro.toNumber(this.margintopdown);var chartWidth=this._chart._boardWidth;var chartHeight=this._chart._boardHeight;var graphleft;var graphtop=this.margintopdown;var graphheight=chartHeight-(this.margintopdown*2);var graphwidth;var graphratio=this.graphratio;if(graphratio>30&&graphratio<100){graphwidth=chartWidth*(this.graphratio*0.01);}else{graphwidth=chartWidth;}switch(this.graphhalign){case "left":graphleft=this.marginleftright;break;case "right":graphleft=chartWidth-graphwidth-this.marginleftright;break;case "center":graphleft=(chartWidth/2)-(graphwidth/2);break;default:}var graphCenterX=graphleft+(graphwidth/2);var graphCenterY=graphtop+(graphheight/2);this._drawPyramid(graphleft,graphtop,graphwidth,graphheight,graphCenterX,graphCenterY);if(itemtextvisible){if(effect&&effect.isloadanimation){}else{this._drawLabels(graphleft,graphtop,graphwidth,graphheight,graphCenterX,graphCenterY);}}};_pChartPyramidSeriesControl._drawPyramid=function(graphleft,graphtop,graphwidth,graphheight,graphCenterX,graphCenterY){var chart=this._chart,total=0,linestyle=this.linestyle,opacity=this.opacity,allitems=this._seriesitems.slice(0),items=[],seriesGroup=chart._seriesGroup,slice,itemId,drawitemCnt=0,effect=this._chart_aniframe_obj,i=0;var maxvalue=0;var itemvalue;for(i in allitems){if(allitems[i]._isShow){itemvalue=allitems[i].value;total+=itemvalue;if(itemvalue>maxvalue){maxvalue=itemvalue;}}}var isAscending=!chart.invertchart;for(i=0;i<allitems.length;i++ ){valuedata=allitems[i].value;if(valuedata>=0&&allitems[i]._isShow){items.push(allitems[i]);}this._itemCnt++ ;}var sumvalue=0;function addItem(pThis,index,item,pathData){var itemId=pThis._configIndex+" SeriesPyramidItem_"+index;var slice=seriesGroup.getObjectByID(itemId);if(!slice){slice=new nexacro.ChartGraphicsPath();slice.set_id(itemId);seriesGroup.addChild(slice);}slice._seriesItem=item;slice._series=pThis;slice.setPathData(pathData);item._slice=slice;slice.index=item.rowindex;if(pThis.highlightvisible){slice.highlightPathData=pathData;slice.highlightvisible=true;}var fillColor=item.color;slice.set_strokepen(linestyle?linestyle.value||linestyle:"1px solid #717a8380");slice.set_opacity(opacity);var bTarget=false;if(pThis.autogradation!="none"){var sv_fillColor=fillColor;if(fillColor instanceof nexacro._BackgroundObject){if(!fillColor.gradient){bTarget=true;sv_fillColor=fillColor.value;}}else if(fillColor){bTarget=(fillColor.indexOf("gradient")<0)?true:false;}if(bTarget){fillColor=sv_fillColor;var gColor="";if(pThis.autogradation=="center"){var lightcolor=pThis._shadeColor(fillColor, -80);gColor="linear-gradient(to left,"+fillColor+" 20%,"+lightcolor+" 50%,"+fillColor+" 80%)";}else{var darkcolor=pThis._shadeColor(fillColor,40);gColor="linear-gradient(to left,"+darkcolor+" 0%,"+fillColor+" 50%,"+darkcolor+" 100%)";}slice.set_fillstyle(gColor);slice._highlightcolor=fillColor;}else{slice.set_fillstyle(fillColor);}}else{slice.set_fillstyle(fillColor);}slice._series=pThis;}function drawPyramidSlice(pThis,i){var item=items[i];var value=item.value;var curpercent;var itemwidth,itemheight;var nextwidth,nextheight;var nextitem=items[i+1];if(effect&&effect.isloadanimation){value=pThis._getanimationdrawvalue(value);}curpercent=(sumvalue/total);itemheight=curpercent*graphheight;if(isAscending){itemwidth=curpercent*graphwidth;}else{itemwidth=((total-sumvalue)/total)*graphwidth;}curpercent=((sumvalue+value)/total);nextheight=curpercent*graphheight;if(isAscending){nextwidth=curpercent*graphwidth;}else{nextwidth=((total-(sumvalue+value))/total)*graphwidth;}sumvalue+=value;var x1=graphCenterX-(itemwidth/2),y1=itemheight+graphtop,x2=graphCenterX+(itemwidth/2),y2=itemheight+graphtop,x3=graphCenterX+(nextwidth/2),y3=nextheight+graphtop,x4=graphCenterX-(nextwidth/2),y4=y3;var p1=x1+" "+y1;var p2=x2+" "+y2;var p3=x3+" "+y3;var p4=x4+" "+y4;var pathData="M"+p1+" L"+p2+" L"+p3+" L"+p4+" Z";item.pathData=pathData;var posinfo={"x1":x1,"x2":x2,"x3":x3,"x4":x4,"y1":y1,"y2":y2,"y3":y3,"y4":y4};item._posinfo=posinfo;addItem(pThis,(i+1),item,pathData);}var lastY=graphtop;function drawFunnelSlice(pThis,i){var item=items[i];var value=item.value;var itemwidth=(value/maxvalue)*graphwidth;var itemheight=graphheight*item.percent;var itemnext=items[i+1];var itemnextwidth,itemnextwidthhalf;if(!isAscending&&i==1){itemwidth=(items[0].value/maxvalue)*graphwidth;}var itemwidthhalf=(itemwidth/2);if(itemnext){if(!isAscending&&i==0){itemnextwidth=itemwidth;}else{itemnextwidth=(itemnext.value/maxvalue)*graphwidth;}}else{if(isAscending){itemnextwidth=itemwidth;}else{itemnextwidth=graphwidth;}}if(effect&&effect.isloadanimation){itemwidth=pThis._getanimationdrawvalue(itemwidth);itemnextwidth=pThis._getanimationdrawvalue(itemnextwidth);}itemnextwidthhalf=(itemnextwidth/2);var x1=graphCenterX-itemwidthhalf,y1=lastY,x2=graphCenterX+itemwidthhalf,y2=lastY,x3=graphCenterX+itemnextwidthhalf,y3=lastY+itemheight,x4=graphCenterX-itemnextwidthhalf,y4=lastY+itemheight;var p1=x1+" "+y1;var p2=x2+" "+y2;var p3=x3+" "+y3;var p4=x4+" "+y4;var pathData="M"+p1+" L"+p2+" L"+p3+" L"+p4+" Z";item.pathData=pathData;var posinfo={"x1":x1,"x2":x2,"x3":x3,"x4":x4,"y1":y1,"y2":y2,"y3":y3,"y4":y4};item._posinfo=posinfo;addItem(pThis,(i+1),item,pathData);lastY=lastY+itemheight;}for(i=0;i<items.length;i++ ){if(chart.graphtype=="funnel"){drawFunnelSlice(this,i);}else{drawPyramidSlice(this,i);}}};_pChartPyramidSeriesControl._drawLabels=function(graphleft,graphtop,graphwidth,graphheight,graphCenterX,graphCenterY){var seriesGroup=this._chart._seriesGroup;var items;items=this._seriesitems;var itemtextguidelinestyle=this.itemtextguidelinestyle,itemtextguidelineopacity=this.itemtextguidelineopacity;var itemtextguidesize=this._itemtextguidesize;var guidesize=(itemtextguidesize?itemtextguidesize:10);var textgapsize=5;function addGuideLine(pThis,item,itemText,index,x1,y1,x2,y2){var itemId=pThis._configIndex+" SeriesPyramidItemLine_"+index;var guideline=seriesGroup.getObjectByID(itemId);if(!guideline){guideline=new nexacro.ChartGraphicsPath();guideline.set_id(itemId);seriesGroup.addChild(guideline);}guideline.set_strokepen(itemtextguidelinestyle?itemtextguidelinestyle.value||itemtextguidelinestyle:"1px solid #717a8380");guideline.set_opacity(itemtextguidelineopacity);guideline.moveTo(x1,y1);guideline.lineTo(x2,y2);guideline._series=pThis;guideline._seriesItem=item;guideline.index=itemText.index;guideline.value=itemText.value;}function drawLabel(pThis,item,index){var itemText=pThis._createSeriesItemText(item);if(nexacro._isNull(itemText)){return;}var posinfo=item._posinfo;var txtsize=itemText._txtSize;if(!txtsize){itemText._updateText();txtsize=itemText._txtSize;}var textX,textY;var linex1,liney1,linex2,liney2;var itemheight=Math.abs(posinfo.y4-posinfo.y1);var itemcentery=posinfo.y4-(itemheight/2);if(pThis.graphhalign=="center"){if(itemheight<=txtsize[1]){textX=posinfo.x3+guidesize+textgapsize;textY=posinfo.y1;if(itemtextguidesize){if(posinfo.x3>posinfo.x2){linex1=posinfo.x3-(Math.abs(posinfo.x3-posinfo.x2)/2);}else{linex1=posinfo.x2-(Math.abs(posinfo.x2-posinfo.x3)/2);}liney1=liney2=posinfo.y1+5;linex2=linex1+itemtextguidesize;addGuideLine(pThis,item,itemText,index,linex1,liney1,linex2,liney2);itemText.set_textAlign("left");itemText.set_verticalAlign("top");}}else{textX=graphCenterX;textY=itemcentery;itemText.set_textAlign("center");itemText.set_verticalAlign("middle");}}else if(pThis.graphhalign=="left"){var itemcenterx;if(posinfo.x3>posinfo.x2){itemcenterx=posinfo.x3-(Math.abs(posinfo.x3-posinfo.x2)/2);}else{itemcenterx=posinfo.x2-(Math.abs(posinfo.x2-posinfo.x3)/2);}textX=itemcenterx+guidesize+textgapsize;textY=itemcentery;if(itemtextguidesize){addGuideLine(pThis,item,itemText,index,itemcenterx,itemcentery,itemcenterx+guidesize,itemcentery);}itemText.set_textAlign("left");itemText.set_verticalAlign("middle");}else if(pThis.graphhalign=="right"){var itemcenterx;if(posinfo.x4>posinfo.x1){itemcenterx=posinfo.x4-(Math.abs(posinfo.x4-posinfo.x1)/2);}else{itemcenterx=posinfo.x1-(Math.abs(posinfo.x1-posinfo.x4)/2);}textX=itemcenterx-guidesize-textgapsize;textY=itemcentery;if(itemtextguidesize){addGuideLine(pThis,item,itemText,index,itemcenterx,itemcentery,itemcenterx-guidesize,itemcentery);}itemText.set_textAlign("right");itemText.set_verticalAlign("middle");}itemText.set_x(textX);itemText.set_y(textY);seriesGroup.addChild(itemText);itemText._series=pThis;itemText._seriesItem=item;pThis._chart._setChangeInBoardAreaPos(itemText);}for(var i=0;i<this._itemCnt;i++ ){if(items[i]._isShow){drawLabel(this,items[i],i);}}};_pChartPyramidSeriesControl._showHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(!highlight){this._drawHighlight(item);if(this._chart.graphhalign=="center"){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,false);}else{this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,false);}this._chart._graphicsControl.draw();}};_pChartPyramidSeriesControl._hideHighlight=function(item){if(!this.highlightvisible){return;}var highlight=item._highlight;if(highlight&&!nexacro._ChartGraphicsLib.isEmpty(highlight.parent)){this._chart._chageGroupObject(this._chart._seriesGroup,this._chart._highlightGroup,this._itemtextlist,true);this._chart._highlightGroup.removeChild(highlight);delete item._highlight;this._chart._graphicsControl.draw();}};_pChartPyramidSeriesControl._drawHighlight=function(item){var highlightlinestyle=this.highlightlinestyle||"1px solid "+this._chart._highlightcolorset[0],highlightfillstyle=this.highlightfillstyle||this._chart._highlightcolorset[0],highlightopacity=this.highlightopacity,slice,highlightPathData,highlightGroup=this._chart._highlightGroup;if(item){highlightPathData=item.highlightPathData;if(highlightPathData){slice=new nexacro.ChartGraphicsPath();slice.setPathData(highlightPathData);slice.set_id("SeriesHighlightPyramidItem");slice.set_strokepen(highlightlinestyle);if(item._highlightcolor){slice.set_fillstyle(item._highlightcolor);}else{slice.set_fillstyle(item._style.fillstyle);}slice.set_strokejoin("round");slice.set_opacity(highlightopacity);highlightGroup.addChild(slice);item._highlight=slice;slice._item=item;slice._series=this;}}};_pChartPyramidSeriesControl._afterSetProperties=function(){var legend=this._chart.legend;if(legend){this._chart._applyLegendItem();}};delete _pChartPyramidSeriesControl;}
var pForm=nexacro.Form.prototype;pForm.gfnGetServerUrl=function(){var urlPath="";urlPath=nexacro.getProjectPath();trace("urlPath : "+urlPath);return urlPath;};pForm.gfnIsNull=function(sValue){if(new String(sValue).valueOf()=="undefined"){return true;}if(sValue==null){return true;}var ChkStr=new String(sValue);if(ChkStr==null){return true;}if(ChkStr.toString().length==0){return true;}return false;};pForm.gfnTrim=function(sValue){if(this.gfnIsNull(sValue)){return "";}return nexacro.trim(sValue);};pForm.gfnLastIndexOfProp=function(array,prop,item,from,strict){var i,obj,propValue;if(from==null){from=array.length-1;}else if(from<0){from=Math.max(0,array.length+from);}var strict=strict||false;if(strict){for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue===item){return i;}}}}else{for(i=from;i>=0;i-- ){if(i in array&&array[i]){obj=array[i],propValue=obj[prop];if(propValue==item){return i;}}}}return  -1;};pForm.gfnRemoveAt=function(array,index){array.splice(index,1);};pForm._ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];pForm.gfnGetUniqueId=function(prefix,separator){if(this.gfnIsNull(prefix)){prefix="";}if(this.gfnIsNull(separator)){separator=45;}else{separator=separator.charCodeAt(0);}var pThis=this,charcode=this._ALPHA_CHAR_CODES,math=Math;var seq=0;var seq0;var tmpArray=new Array(36);var idx= -1;while(seq<8){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}seq=0;while(seq<3){tmpArray[ ++idx]=separator;seq0=0;while(seq0<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq0++ ;}seq++ ;}tmpArray[ ++idx]=separator;var tmpStr=(new Date()).getTime();tmpStr=("0000000"+tmpStr.toString(16)).substr( -8);seq=0;while(seq<8){tmpArray[ ++idx]=tmpStr.charCodeAt(seq);seq++ ;}seq=0;while(seq<4){tmpArray[ ++idx]=charcode[math.random()*16|0];seq++ ;}return prefix+String.fromCharCode.apply(null,tmpArray);};pForm.gfnConvertXY=function(XCompA,xy,XCompB){var tempX,tempY;var x,y;if(XCompB){tempX=system.clientToScreenX(XCompB,xy[0]);tempY=system.clientToScreenY(XCompB,xy[1]);x=system.screenToClientX(XCompA,tempX)+this.gfnGetScrollLeft(XCompA);y=system.screenToClientY(XCompA,tempY)+this.gfnGetScrollTop(XCompA);}else{x=xy[0];y=xy[1];}return [x,y];};pForm.gfnGetScrollLeft=function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.hscrollbar&&XComp.hscrollbar.visible?XComp.hscrollbar.pos:0);};pForm.gfnGetScrollTop=function(XComp){if(XComp instanceof nexacro.Div){XComp=XComp.form;}return (XComp.vscrollbar&&XComp.vscrollbar.visible?XComp.vscrollbar.pos:0);};pForm.gfnCopyProperties=function(tarobject,srcobject){if(tarobject&&srcobject){var p,value;for(p in srcobject){if(srcobject.hasOwnProperty(p)){value=srcobject[p];tarobject[p]=value;}}}};pForm.gfnGetSequenceId=function(form,prefix){if(this.gfnIsNull(form)){trace("getSequenceId :: 1st argument doesn't exist !!");return null;}if(this.gfnIsNull(prefix)){trace("getSequenceId :: 2nd argument doesn't exist !!");return null;}if(!(form instanceof Form)){trace("getSequenceId :: 1st argument must be a Form !!");return null;}var cache=form._sequenceIdCache;if(this.gfnIsNull(cache)){cache=form._sequenceIdCache={};}var sequence=cache[prefix];if(this.gfnIsNull(sequence)){sequence= -1;}sequence++ ;cache[prefix]=sequence;return prefix+sequence;};pForm.gfnEach=function(object,func,scope){var p,scope=scope||object;for(p in object){if(object.hasOwnProperty(p)){if(func.call(scope,p,object[p],object)===false){return;}}}};pForm.gfnGetTopLevelForm=function(curForm){var p=curForm;while(p&&!(p instanceof ChildFrame)){p=p.parent;}return p.form;};pForm.gfnContains=function(array,item,strict){if(this.gfnIndexOf(array,item,null,strict)=== -1){return false;}else{return true;}};pForm.gfnIndexOf=function(array,item,from,strict){var len=array.length;if(from==null){from=0;};strict==!!strict;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}if(strict){for(;from<len;from++ ){if(array[from]===item){return from;}}}else{for(;from<len;from++ ){if(array[from]==item){return from;}}}return  -1;};
if(!nexacro.ExtFileUploadChangeEventInfo){nexacro.ExtFileUploadChangeEventInfo=function(obj,id){this.id=this.eventid=id||"onchange";this.fromobject=this.fromreferenceobject=obj;this.index;this.files;};var _pEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExtFileUploadChangeEventInfo);nexacro.ExtFileUploadChangeEventInfo.prototype=_pEventInfo;_pEventInfo._type_name="ExtFileUploadChangeEventInfo";delete _pEventInfo;nexacro.ExtFileLoadEventInfo=function(obj,id){this.id=this.eventid=id||"onsuccess";this.fromobject=this.fromreferenceobject=obj;this.datasets;this.type;this.errorcode;this.errormsg;this.url;};var _pExtFileLoadEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileLoadEventInfo.prototype=_pExtFileLoadEventInfo;_pExtFileLoadEventInfo._type="ExtFileLoadEventInfo";_pExtFileLoadEventInfo._type_name="ExtFileLoadEventInfo";delete _pExtFileLoadEventInfo;nexacro.ExtFileErrorEventInfo=function(obj,id){this.id=this.eventid=id||"onerror";this.fromobject=this.fromreferenceobject=obj;this.errorcode;this.errormsg;this.errorobj;this.errortype;this.statuscode;this.requesturi;this.locationuri;this.index= -1;};var _pExtFileErrorEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileErrorEventInfo.prototype=_pExtFileErrorEventInfo;_pExtFileErrorEventInfo._type="ExtFileErrorEventInfo";_pExtFileErrorEventInfo._type_name="ExtFileErrorEventInfo";delete _pExtFileErrorEventInfo;}if(system.navigatorname!="nexacro DesignMode"&&system.navigatorname!="nexacro"){nexacro._ExtFileUpDownloadSupport={FileAPI:(window.File&&window.FileList&&window.Blob&&window.FileReader)?true:false,XHR2:(((function(){try{var xhr=new XMLHttpRequest();return !!(xhr&&('upload' in xhr)&&('onprogress' in xhr.upload));}catch(e){return false;}})())&&(('max' in document.createElement("progress"))?true:false)&&((window.FormData)?true:false))?true:false,MultipleInput:('multiple' in document.createElement("input"))?true:false,Download:('download' in document.createElement("a"))?true:false,MSSave:(window.navigator.msSaveOrOpenBlob)?true:false,Draggable:(function(){var div=document.createElement("div");return ('draggable' in div)||('ondragstart' in div&&'ondrop' in div);})(),SelectorsAPI:(system.navigatorname=="IE")?((system.navigatorversion>=9)&&!!document.querySelector):!!document.querySelector};nexacro.ExtFileReadystateChangEventInfo=function(obj,id,readyState,status){this.id=this.eventid=id||"onreadystatechange";this.fromobject=this.fromreferenceobject=obj;this.readyState=readyState;this.status=status;};var _pExtFileLoadEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileLoadEventInfo.prototype=_pExtFileLoadEventInfo;_pExtFileLoadEventInfo._type="ExtFileLoadEventInfo";_pExtFileLoadEventInfo._type_name="ExtFileLoadEventInfo";delete _pExtFileLoadEventInfo;nexacro.ExtFileUpDownloadChangeEventInfo=function(obj,id,type,files){this.id=this.eventid=id||"onchange";this.fromobject=this.fromreferenceobject=obj;this.type=type;this.files=files;};var _pExtFileUploadChangeEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileUpDownloadChangeEventInfo.prototype=_pExtFileUploadChangeEventInfo;_pExtFileUploadChangeEventInfo._type="ExtFileUploadChangeEventInfo";_pExtFileUploadChangeEventInfo._type_name="ExtFileUploadChangeEventInfo";delete _pExtFileUploadChangeEventInfo;nexacro.Event.ExtFileProgress=function(obj,id,type,lengthComputable,loaded,total,fileId){this.id=this.eventid=id||"onuploadprogress";this.fileId=fileId;this.fromobject=this.fromreferenceobject=obj;this.type=type;this.lengthComputable=lengthComputable;this.loaded=loaded;this.total=total;};var _pEventExtFileProgress=nexacro._createPrototype(nexacro.Event);nexacro.Event.ExtFileProgress.prototype=_pEventExtFileProgress;_pEventExtFileProgress._type="ExtFileProgress";_pEventExtFileProgress._type_name="ExtFileProgress";delete _pEventExtFileProgress;if(!nexacro.ExtFileUpload){nexacro.ExtFileUpload=function(id,parent){if(arguments.length==9){parent=arguments[8];}nexacro.Component.call(this,id,0,0,0,0,null,null,parent);this.filebutton=null;this.multiselect=false;this.uploadurl="";this.downloadurl="";this.helpMessage=undefined;this.guideComp=undefined;this.fileListComp=undefined;this.support=nexacro._ExtFileUpDownloadSupport;this._autoDeleteItem=true;this._form=parent;this._inputfiles=[];this._addedfiles=[];this._pExtFileItem;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onmove":1,"onsize":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onrbuttondown":1,"onrbuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ontap":1,"ondbltap":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"onloadstart":1,"onprogress":1,"onload":1,"onloadend":1,"onsuccess":1,"onerror":1,"onchange":1,"onreadystatechange":1};};var _pExtFileUpload=nexacro._createPrototype(nexacro.Component);nexacro.ExtFileUpload.prototype=_pExtFileUpload;_pExtFileUpload._type="ExtFileUpload";_pExtFileUpload._type_name="ExtFileUpload";_pExtFileUpload._changeFiles=function(){};_pExtFileUpload.addEventHandler=function(evt_id,func,target){if(evt_id=="onsuccess"){evt_id="onload";}if(this._is_loading){if(!this._loading_event_list){this._loading_event_list=[];}this._loading_event_list.push({id:evt_id,func:func,target:target});}var listener=this[evt_id];var idx= -1;if(listener){if(target){idx=listener._addHandler(target,func,true);}else{idx=listener._addHandler(this,func,true);}}else if(evt_id in this._event_list){listener=new nexacro.EventListener(evt_id);this[evt_id]=listener;if(this._created_event_list){this._created_event_list.push(evt_id);}else{this._created_event_list=[];this._created_event_list.push(evt_id);}if(target){idx=listener._addHandler(target,func,true);}else{idx=listener._addHandler(this,func,true);}}return idx;};_pExtFileUpload.on_create_contents=function(){var control_elem=this.getElement();if(control_elem){this.filebutton=new nexacro.ExtFileButtonCtrl("ExtFileButtonCtrl",0,0,0,0,null,null,this);this.filebutton.createComponent();}};_pExtFileUpload.on_created_contents=function(){this.addResponseZone();var ranid=new Date().valueOf().toString();nexacro._create_hidden_frame(this._unique_id,ranid,this.on_load,this);var callback_fn=this.on_fileinput_onchange;if(this.support.MultipleInput){callback_fn=this.on_filesinput_onchange;}var name=this._unique_id+"_"+ranid+"_inputFile";nexacro._append_hidden_item(this._unique_id,name,callback_fn,this);var infile=this._input_node;infile._inputname=name;this._inputfiles.push(infile);this.on_apply_multiselect();this.filebutton._setEventHandler("onclick",this.on_notify_filebutton_onclick,this);this.filebutton.set_visible(false);this.filebutton.on_created();this.on_apply_prop_enable(this._isEnable());};_pExtFileUpload.on_destroy_contents=function(){if(this.filebutton){this.filebutton.destroy();this.filebutton=null;}nexacro._destroy_hidden_frame(this._unique_id,this);};_pExtFileUpload.on_change_containerRect=function(){var filebutton=this.filebutton;var btn_size=0;var client_width=this._client_width;var client_height=this._client_height;var client_left=this._client_left;var client_top=this._client_top;var style_btnsize=this.on_find_CurrentStyle_buttonsize("normal");if(!style_btnsize||style_btnsize._is_empty){btn_size=client_height;}else if(parseInt(style_btnsize._value,10)>client_width){btn_size=client_width;}else{btn_size=parseInt(style_btnsize._value,10)|0;if(btn_size<0){btn_size=client_height;}}if(filebutton){var btn_left=client_left;var btn_top=client_top;var btn_width=btn_size;var btn_height=client_height;var btn_margin=filebutton.on_find_CurrentStyle_margin("normal");if(btn_margin&&!btn_margin._is_empty){btn_left=btn_left+btn_margin.left;btn_top=btn_margin.top;btn_width=btn_size-btn_margin.left-btn_margin.right;btn_height=client_height-btn_margin.top-btn_margin.bottom;}filebutton.move(btn_left,btn_top,btn_width,btn_height,null,null);}};_pExtFileUpload.on_apply_prop_enable=function(v){nexacro.Component.prototype.on_apply_prop_enable.call(this,v);var enable=v;if(v==undefined){enable=this.enable;}if(this.filebutton){this.filebutton._setEnable(enable);}};_pExtFileUpload.addFiles=function(){this._input_node.value=null;this.filebutton.click();};_pExtFileUpload.set_multiselect=function(v){v=nexacro._toBoolean(v);if(v!=this.multiselect){this.multiselect=v;}return this.multiselect;};_pExtFileUpload.on_apply_multiselect=function(){if(this._inputfiles){if(this.support.MultipleInput){if(this.multiselect){this._inputfiles[this._inputfiles.length-1].multiple=this.multiselect;}else{if(this._inputfiles[this._inputfiles.length-1].hasAttribute("multiple")){this._inputfiles[this._inputfiles.length-1].removeAttribute("multiple");}}}}};_pExtFileUpload.set_uploadurl=function(v){if(v!=this.uploadurl){this.uploadurl=v;}};_pExtFileUpload.set_downloadurl=function(v){if(v!=this.downloadurl){this.downloadurl=v;}};_pExtFileUpload.setAutoDeleteItem=function(value){this._autoDeleteItem=value;};_pExtFileUpload.upload=function(path,inDatasetsParam,outDatasetsParam,transferType,datatype){transferType=transferType||"all";this.set_uploadurl(path);if(transferType=="all"){return this.uploadAll(path,inDatasetsParam,outDatasetsParam,datatype);}else if(transferType=="each"){if(this.support.XHR2){return this.uploadEach(path,inDatasetsParam,outDatasetsParam,datatype);}else{return this.uploadAll(path,inDatasetsParam,outDatasetsParam,datatype);}}return false;};_pExtFileUpload.uploadAll=function(path,inDatasetsParam,outDatasetsParam,datatype){var uploadurl;var rtn=false;if(!path){uploadurl=nexacro._getServiceLocation(this.uploadurl);}else{uploadurl=nexacro._getServiceLocation(path);}if(uploadurl){var loadItem=new nexacro.ExtFileTransaction(uploadurl,"upload",this._form,inDatasetsParam,outDatasetsParam,datatype);loadItem.scope=this.parent;loadItem.parent=this;if(this.support.XHR2){var formData=this._appendFormData();if(formData){loadItem.appendCallback(this,this.on_load_filemodule);this._appendInputDatasetsToFormData(loadItem,"inputDatasets",formData);this._startCommunication(loadItem,uploadurl,formData);rtn=true;}}else{loadItem.appendCallback(this,this.on_loadframe_filemodule);this._pExtFileItem=loadItem;nexacro._submit(this._unique_id,uploadurl);rtn=true;}}return rtn;};_pExtFileUpload.uploadEach=function(path,inDatasetsParam,outDatasetsParam,datatype){var uploadurl;var rtn=false;if(!path){uploadurl=nexacro._getServiceLocation(this.uploadurl);}else{uploadurl=nexacro._getServiceLocation(path);}if(uploadurl){var formDataList=this._getFormDataList();var formDataCount=formDataList.length;for(var i=0;i<formDataCount;i++ ){var loadItem=new nexacro.ExtFileTransaction(uploadurl,"upload",this._form,inDatasetsParam,outDatasetsParam,datatype);loadItem.scope=this.parent;loadItem.parent=this;if(this.support.XHR2){var formData=formDataList[i];if(formData){loadItem.appendCallback(this,this._makeLoadFileModule(this,formData.fileName));this._appendInputDatasetsToFormData(loadItem,"inputDatasets",formData);this._startCommunication(loadItem,uploadurl,formData,formData.fileName);rtn=true;}}else{loadItem.appendCallback(this,this.on_loadframe_filemodule);this._pExtFileItem=loadItem;nexacro._submit(this._unique_id,uploadurl);rtn=true;}}}return rtn;};_pExtFileUpload._getFormDataList=function(){var formData,transferLen=0,i=0,file,fileName,transferFiles,formDataList=[];transferFiles=this._addedfiles;if(transferFiles){transferLen=transferFiles.length;for(i=0;i<transferLen;i++ ){formData=new FormData();file=transferFiles[i].file;if(file){fileName=file.name;formData.append(fileName,file);formData["fileName"]=fileName;formDataList.push(formData);}}}return formDataList;};_pExtFileUpload._appendInputDatasetsToFormData=function(loadItem,name,formData){return formData.append(name,loadItem._sendData);};_pExtFileUpload.addDropZone=function(comp){var rtn=false;if(this.support.XHR2&&this.isDraggable()){var node=comp._control_element._client_element._handle;if(node){node._pExtFileUploadTarget=this;rtn=true;}}return rtn;};_pExtFileUpload.setResponseZone=function(guideComp,helpMessageComp,fileListComp){this.guideComp=guideComp;this.helpMessage=helpMessageComp;this.fileListComp=fileListComp;};_pExtFileUpload.addResponseZone=function(){var guideComp=this.guideComp;var helpMessageComp=this.helpMessage;if(this.parent.gfnIsNull(guideComp)||this.parent.gfnIsNull(helpMessageComp)){return;}var rtn=false;var node=guideComp._control_element.handle;var helpNode=helpMessageComp._control_element.handle;if(this.support.XHR2&&this.isDraggable()){if(node){node._pExtFileUploadTarget=this;nexacro._observeSysEvent(node,"dragover","ondragover",this._dragOverGuide);nexacro._observeSysEvent(node,"dragleave","ondragleave",this._dragLeaveGuide);nexacro._observeSysEvent(node,"drop","ondrop",this._dropGuide);if(helpNode){helpNode._pExtFileUploadTarget=this;nexacro._observeSysEvent(helpNode,"dragover","ondragover",this._dragOverHelpMessage);nexacro._observeSysEvent(helpNode,"drop","ondrop",this._dropFiles);}rtn=true;}}return rtn;};_pExtFileUpload.isProgressbar=function(){return this.support.XHR2;};_pExtFileUpload.isDraggable=function(){return (this.support.Draggable&&this.support.FileAPI);};_pExtFileUpload.isMultipleInput=function(){return this.support.MultipleInput;};_pExtFileUpload.getAddedFile=function(){if(this._addedfiles){return this._addedfiles;}};_pExtFileUpload.getAddedFileLength=function(){if(this._addedfiles){return this._addedfiles.length;}};_pExtFileUpload.resetAddedFile=function(){this._addedfiles=[];};_pExtFileUpload.addFile=function(file){if(this._addedfiles){var info={"id":file.id,"file":file};this._addedfiles.push(info);}};_pExtFileUpload.removeFile=function(fileid){var index=this.parent.gfnLastIndexOfProp(this._addedfiles,"id",fileid);if(index> -1){this._addedfiles[index]=null;this.parent.gfnRemoveAt(this._addedfiles,index);}if(!this.support.XHR2||!this.support.FileAPI){if(index> -1){fileid=this._inputfiles[index]["_inputname"];index=this.parent.gfnLastIndexOfProp(this._inputfiles,"name",fileid);nexacro._remove_hidden_item(this._unique_id,fileid);this._inputfiles[index]=null;this.parent.gfnRemoveAt(this._inputfiles,index);}}else{this._resetInputFile();}};_pExtFileUpload.removeAll=function(){var addFiles=this._addedfiles;var count=addFiles.length;var fileId;var fileList=[];for(var i=0;i<count;i++ ){fileId=addFiles[0]["id"];fileList.push(fileId);index=this.parent.gfnLastIndexOfProp(this._addedfiles,"id",fileId);if(index> -1){addFiles[index]=null;this.parent.gfnRemoveAt(addFiles,index);}}this._addedfiles=[];if(!this.support.XHR2||!this.support.FileAPI){var inputFiles=this._inputfiles;var count=fileList.length;for(var i=count-1;i> -1;i-- ){fileId=this._inputfiles[i]["_inputname"];index=this.parent.gfnLastIndexOfProp(this._inputfiles,"name",fileId);if(index> -1){nexacro._remove_hidden_item(this._unique_id,fileId);this._inputfiles[index]=null;this.parent.gfnRemoveAt(this._inputfiles,index);}}}else{this._resetInputFile();}};_pExtFileUpload._resetInputFile=function(){var tempInputFileName=this._inputfiles[0]._inputname;nexacro._remove_hidden_item(this._unique_id,tempInputFileName);this._inputfiles=[];var ranid=new Date().valueOf().toString();var name=this._unique_id+"_"+ranid+"_inputFile";var callback_fn=this.on_fileinput_onchange;if(this.support.MultipleInput){callback_fn=this.on_filesinput_onchange;}nexacro._append_hidden_item(this._unique_id,name,callback_fn,this);var infile=this._input_node;infile._inputname=name;this._inputfiles.push(infile);this.on_apply_multiselect();this.filebutton._setEventHandler("onclick",this.on_notify_filebutton_onclick,this);this.filebutton.on_created();};_pExtFileUpload.on_fire_onreadystatechange=function(obj,readyState,status,fileId,type){if(this.onreadystatechange&&this.onreadystatechange._has_handlers){var evt=new nexacro.ExtFileReadystateChangEventInfo(obj,"readystatechange",readyState,status);evt["fileId"]=fileId;evt["type"]=type;this.onreadystatechange._fireEvent(this,evt);}};_pExtFileUpload.on_fire_onerror=function(obj,errorcode,errormsg,errorobj,fileId,type){var errormsg=nexacro._GetSystemErrorMsg(this,errorcode);if(this.parent.gfnIsNull(errormsg)){errorcode=errorobj.status;errormsg=errorobj.statusText;}if(this.onerror&&this.onerror._has_handlers){var evt=new nexacro.ExtFileErrorEventInfo(obj,"onerror",errorcode,errormsg,errorobj);evt["fileId"]=fileId;evt["type"]=type;return this.onerror._fireEvent(this,evt);}return true;};_pExtFileUpload.on_fire_onchange=function(obj,type,files){if(this.onchange&&this.onchange._has_handlers){var evt=new nexacro.ExtFileUploadChangeEventInfo(obj,"onchange");evt["index"]= -1;evt["files"]=this.convertFileInfo(files);return this.onchange._fireEvent(this,evt);}};_pExtFileUpload.convertFileInfo=function(files){var fileCount=files.length;var fileInfoList=[];var fileName,fileId,fileSize,fileType;for(var i=0;i<fileCount;i++ ){var file=files[i];fileName=file.name;fileSize=file.size;fileType=file.type;fileId=this.parent.gfnGetUniqueId("file_");var info={id:fileId,fullpath:"",name:fileName,size:fileSize,type:fileType};fileInfoList.push(info);file.id=fileId;this.addFile(file);}return fileInfoList;};_pExtFileUpload.on_fileinput_onchange=function(value){var filePath=value;if(filePath){var ranid=new Date().valueOf().toString();var name=this._unique_id+"_"+ranid+"_inputFile";var callback_fn=this.on_fileinput_onchange;nexacro._append_hidden_item(this._unique_id,name,callback_fn,this);var infile=this._input_node;infile._inputname=name;this._inputfiles.push(infile);var fileTemp=filePath.split('\\');var fileName=fileTemp[fileTemp.length-1];var files=[];files.push({"id":this._inputfiles[this._inputfiles.length-2]._inputname,"name":fileName});this.on_fire_onchange(this,"HtmlInputElement",files);}};_pExtFileUpload.on_filesinput_onchange=function(value){if(this._inputfiles){var infile=this._inputfiles[this._inputfiles.length-1];this.on_fire_onchange(this,infile.type,infile.files);}};_pExtFileUpload.on_notify_filebutton_onclick=function(obj,e){if(this._inputfiles&&this.visible&&this._isEnable()&&this.enableevent){try{var infile=this._inputfiles[this._inputfiles.length-1];var name=infile._inputname;nexacro._findclick(this._unique_id,name,obj);}catch(e){var errormsg=nexacro._GetSystemErrorMsg(this,"0x8100000E");this.on_fire_onerror(this,"0x8100000E",errormsg,obj);}}return false;};_pExtFileUpload.on_fire_onloadstart=function(obj,type,evt,fileId){if(this.onloadstart&&this.onloadstart._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onloadstart",type,evt.lengthComputable,evt.loaded,evt.total,fileId);this.onloadstart._fireEvent(this,evt);}};_pExtFileUpload.on_fire_onprogress=function(obj,type,evt,fileId){if(this.onprogress&&this.onprogress._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onprogress",type,evt.lengthComputable,evt.loaded,evt.total,fileId);this.onprogress._fireEvent(this,evt);}};_pExtFileUpload.on_fire_onload=function(type,code,msg,url,fileId,datasets){if(this.onload&&this.onload._has_handlers&&url!="about:blank"){if(this._autoDeleteItem&&code> -1){this.removeAll();}var evt=new nexacro.ExtFileLoadEventInfo(this,"onsuccess",type,code,msg,url);evt["fileId"]=fileId;evt["type"]="upload";evt["errorcode"]=code;evt["errormsg"]=msg;evt["url"]=url;evt["datasets"]=datasets||[];return this.onload._fireEvent(this,evt);}};_pExtFileUpload.on_fire_onloadend=function(obj,type,evt,fileId){if(this.onloadend&&this.onloadend._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onloadend",type,evt.lengthComputable,evt.loaded,evt.total);evt["fileId"]=fileId;this.onloadend._fireEvent(this,evt);}};_pExtFileUpload._appendFormData=function(){var formData,transferLen=0,i=0,file,fileName,transferFiles;if(this._addedfiles){transferFiles=this._addedfiles;formData=new FormData();transferLen=transferFiles.length;for(i=0;i<transferLen;i++ ){file=transferFiles[i].file;if(file){fileName=file.name;formData.append(fileName,file);}}}return formData;};_pExtFileUpload._startCommunication=function(loadItem,url,data,fileId){var path=url;var senddata=data;if(loadItem._protocol<0||loadItem._protocol=="undefined"||loadItem._protocol==null){var createadaptor=false;var protocoladp=nexacro._getProtocol(loadItem._protocol);if(!protocoladp){var adptorclass=nexacro._executeEvalStr(loadItem._protocol);if(adptorclass){protocoladp=new adptorclass;createadaptor=true;}}if(protocoladp){if(createadaptor&&protocoladp.initialize){protocoladp.initialize(url);nexacro.getApplication()._addProtocol(loadItem.protocol,protocoladp);}var protocol=protocoladp.getUsingProtocol(url);var sep=path.split("://");if(sep){path=protocol+"://"+sep[1];}if(data&&protocoladp.encrypt){senddata=loadItem.on_encrypt(data);}if(protocoladp.getCommunicationHeaders){var headers=protocoladp.getCommunicationHeaders(url);if(headers){loadItem._addCookieFromVariables(headers);}}}}this.__startCommunication(loadItem,path,senddata,fileId);};_pExtFileUpload.__startCommunication=function(loadItem,path,senddata,fileId){var _ajax=nexacro.__createHttpRequest();var ajax_handle=_ajax.handle;if(path.indexOf("://")> -1){var ar=path.split("://");var protocol=ar[0];switch(protocol){case "http":_ajax._protocol=0;break;case "https":_ajax._protocol=1;break;case "file":_ajax._protocol=2;break;default:_ajax._protocol= -1;break;}}var method="GET";var mime_xml=false;ajax_handle._pExtFileTarget=this;ajax_handle._pExtFileItem=loadItem;ajax_handle.upload._pExtFileTarget=this;ajax_handle.upload._pExtFileItem=loadItem;nexacro._observeSysEvent(ajax_handle,"loadstart","onloadstart",this._makeLoadstartHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle.upload,"progress","onprogress",this._makeProcessHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"load","onload",this._makeLoadHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"loadend","onloadend",this._makeLoadendHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"error","onerror",this._makeErrorHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"readystatechange","onreadystatechange",this._makeReadystateChangeHandler(this,fileId,loadItem.type));nexacro._observeSysEvent(ajax_handle,"abort","onabort",this._makeTransferCanceledHandler(this,fileId));method="POST";mime_xml=true;try{ajax_handle.open(method,path,true);}catch(e){this.on_fire_onerror(this,e.number,e.message,ajax_handle,fileId,loadItem.type);}if(mime_xml){ajax_handle.setRequestHeader("X-Requested-With","XMLHttpRequest");ajax_handle.setRequestHeader("Accept","application/xml, text/xml, */*");}try{ajax_handle.send(senddata?senddata:null);}catch(e){this.on_fire_onerror(this,e.number,e.message,ajax_handle,fileId,loadItem.type);}_ajax=null;};_pExtFileUpload._makeLoadFileModule=function(pThis,pFileId){return function(type,code,msg,url,datasets){pThis.on_fire_onload(type,code,msg,url,pFileId,datasets);};};_pExtFileUpload._makeProcessHandler=function(pThis,pFileId,pLoadItem){return function(evt){pThis.on_fire_onprogress(pThis,pLoadItem.type,evt,pFileId);};};_pExtFileUpload._makeLoadstartHandler=function(pThis,pFileId,pLoadItem){return function(evt){pThis.on_fire_onloadstart(pThis,pLoadItem.type,evt,pFileId);};};_pExtFileUpload._makeLoadHandler=function(pThis,pFileId,pLoadItem){return function(evt){var itemType=pLoadItem.type;if(this.readyState==4&&this.status==200){var cookie="";if(pLoadItem.context){cookie=pLoadItem.context._getWindow()._doc.cookie;}var data;if(itemType=="upload"){data=this.responseText||"";if(pThis.parent.gfnIsNull(data)){var errormsg="response data is empty!";pThis.on_fire_onerror(pThis,"ObjectError",errormsg,this,9901,null,null, -1);return;}pLoadItem.on_load_file(data,cookie,this.status,this.statusText);}else if(itemType=="download"){if(this.responseType=="blob"){data=this.response;pLoadItem.on_down_file(data,pThis._unique_id,cookie,this.status,this.statusText);}else{var errormsg=nexacro._GetSystemErrorMsg(this,"0x80010040");pThis.on_fire_onerror(pThis,"0x80010040",errormsg,this,pFileId,pLoadItem.type);}}}else{var errormsg=nexacro._GetSystemErrorMsg(this,"0x80010040");pThis.on_fire_onerror(pThis,"0x80010040",errormsg,this,pFileId,pLoadItem.type);}};};_pExtFileUpload._makeLoadendHandler=function(pThis,pFileId,pLoadItem){return function(evt){var itemType=pLoadItem.type;if(itemType=="download"){if(this.responseType=="blob"){pLoadItem.on_downend_file();}}pThis.on_fire_onloadend(pThis,itemType,evt,pFileId);pLoadItem=null;pthis=null;if(this.upload._pExtFileTarget){this.upload._pExtFileTarget=null;}if(this.upload._pExtFileItem){this.upload._pExtFileItem=null;}};};_pExtFileUpload._makeErrorHandler=function(pThis,pFileId,pLoadItem,type){return function(evt){if(pLoadItem._usewaitcursor){pLoadItem._hideWaitCursor();}pThis.on_fire_onerror(pThis, -1,"File transfer was failure.",pThis,pFileId,pLoadItem.type);};};_pExtFileUpload._makeReadystateChangeHandler=function(pThis,pFileId,pType){return function(evt){var xhrUpload=evt.target;pThis.on_fire_onreadystatechange(pThis,xhrUpload.readyState,xhrUpload.status,pFileId,pType);};};_pExtFileUpload._makeTransferCanceledHandler=function(pThis,pFileId){return function(evt){alert(pFileId+". 사용자에 의해 전송이 취소되었습니다.");};};_pExtFileUpload.on_load_filemodule=function(type,code,msg,url,datasets){trace("\n★ on_load_filemodule type:"+type+",code:"+code+",msg:"+msg+",url:"+url+",datasets:"+datasets);var fileId="";this.on_fire_onload(type,code,msg,url,fileId,datasets);};_pExtFileUpload.on_loadframe_filemodule=function(type,code,msg,url,datasets){trace("\n\n★★on_loadframe_filemodule type:"+type+",code:"+code+",msg:"+msg+",url:"+url+",datasets:"+datasets);this.on_fire_onload(type,code,msg,url,"",datasets);};_pExtFileUpload.on_load=function(target){var pLoadItem=this._pExtFileItem;if(pLoadItem){pLoadItem.on_loadframe_file(this._unique_id,target);pLoadItem=null;}};_pExtFileUpload._dropGuide=function(evt){var pThis=this._pExtFileUploadTarget;pThis.helpMessage.set_visible(false);evt.stopPropagation();evt.preventDefault();return false;};_pExtFileUpload._dropFiles=function(evt){var files=evt.dataTransfer.files;evt.stopPropagation();evt.preventDefault();if(evt.dataTransfer){var pThis=this._pExtFileUploadTarget;if(pThis){pThis.helpMessage.set_visible(false);pThis.on_fire_onchange(pThis,evt.type,files);}}};_pExtFileUpload._dragOverGuide=function(evt){var pThis=this._pExtFileUploadTarget;pThis.helpMessage.set_visible(true);evt.stopPropagation();evt.preventDefault();evt.dataTransfer.dropEffect="none";return false;};_pExtFileUpload._dragOverHelpMessage=function(evt){evt.stopPropagation();evt.preventDefault();evt.dataTransfer.dropEffect="move";return false;};_pExtFileUpload._dragLeaveGuide=function(evt){var cx=evt.clientX;var cy=evt.clientY;var pThis=this._pExtFileUploadTarget;var guideComp=pThis.guideComp;var convertXY=pThis.parent.gfnConvertXY(nexacro.getApplication().mainframe,[0,0],guideComp);var convertX=convertXY[0];var convertY=convertXY[1];var leftWidth=0,topWidth=0,rightWidth=0,bottomWidth=0;var maxWidth=guideComp.getOffsetWidth()+convertX;var maxHeight=guideComp.getOffsetHeight()+convertY;var vscrollbarWidth=0;var hscrollbarHeight=0;var vscrollbar=guideComp["vscrollbar"];var hscrollbar=guideComp["hscrollbar"];if(vscrollbar&&vscrollbar.visible){vscrollbarWidth=vscrollbar.width;}if(hscrollbar&&hscrollbar.visible){hscrollbarHeight=hscrollbar.height;}if(((cx-leftWidth)<=convertX||(cx+rightWidth+vscrollbarWidth)>=maxWidth)||(cy<=(convertY+topWidth)||(cy+bottomWidth+hscrollbarHeight)>=maxHeight)){evt.stopPropagation();evt.preventDefault();pThis.helpMessage.set_visible(false);return;}evt.stopPropagation();evt.preventDefault();};_pExtFileUpload._dragEnterAddFiles=function(evt){evt.stopPropagation();evt.preventDefault();};_pExtFileUpload._dragLeaveAddFiles=function(evt){evt.stopPropagation();evt.preventDefault();};_pExtFileUpload._dropAddFiles=function(evt){evt.stopPropagation();evt.preventDefault();if(evt.dataTransfer){var pThis=this._pExtFileUploadTarget;if(pThis){pThis.on_fire_onchange(pThis,evt.type,evt.dataTransfer.files);}}};delete _pExtFileUpload;};if(!nexacro.ExtFileDownload){nexacro.ExtFileDownload=function(id,parent){if(arguments.length==9){parent=arguments[8];}nexacro.Component.call(this,id,0,0,0,0,null,null,parent);this.downloadurl="";this.support={};this.downloadfilename="";parent.gfnCopyProperties(this.support,nexacro._ExtFileUpDownloadSupport);this._form=parent;this._pExtFileItem;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onmove":1,"onsize":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onrbuttondown":1,"onrbuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ontap":1,"ondbltap":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"onloadstart":1,"onprogress":1,"onload":1,"onloadend":1,"onsuccess":1,"onerror":1,"onchange":1,"onreadystatechange":1};};var _pExtFileDownload=nexacro._createPrototype(nexacro.Component);nexacro.ExtFileDownload.prototype=_pExtFileDownload;_pExtFileDownload._type="ExtFileDownload";_pExtFileDownload._type_name="ExtFileDownload";_pExtFileDownload.on_create_contents=function(){};_pExtFileDownload.on_created_contents=function(){var ranid=new Date().valueOf().toString();nexacro._create_hidden_frame(this._unique_id,ranid,this.on_load,this);};_pExtFileDownload.on_destroy_contents=function(){nexacro._destroy_hidden_frame(this._unique_id,this);};_pExtFileDownload.set_downloadurl=function(v){if(v!=this.downloadurl){this.downloadurl=v;}};_pExtFileDownload.set_downloadfilename=function(v){if(v!=this.downloadfilename){this.downloadfilename=v;}};_pExtFileDownload.download=function(url,filename){if(this.parent.gfnIsNull(filename)){alert("file name required.");return false;}this.set_downloadfilename(filename);var downloadurl;var rtn=false;if(!url){downloadurl=nexacro._getServiceLocation(this.downloadurl);}else{downloadurl=nexacro._getServiceLocation(url);}if(downloadurl){trace("\n다운로드 시작");var loadItem=new nexacro.ExtFileTransaction(downloadurl,"download",this._form);loadItem._downfilename=filename;if(this.support.XHR2&&(this.support.Download||this.support.MSSave)){trace("ExtFileUploadSupport.XHR2 지원");loadItem.appendCallback(this,this.on_load_filemodule);this._startCommunication(loadItem,downloadurl,"",filename);rtn=true;}else{trace("ExtFileUploadSupport.XHR2 미지원");nexacro._download(downloadurl);rtn=true;if(loadItem._usewaitcursor){loadItem._hideWaitCursor();}}}return rtn;};_pExtFileDownload._startCommunication=function(loadItem,url,data,fileId){var path=url;var senddata=data;if(loadItem._protocol<0){var createadaptor=false;var protocoladp=nexacro._getProtocol(loadItem.protocol);if(!protocoladp){var adptorclass=nexacro._executeEvalStr(loadItem.protocol);if(adptorclass){protocoladp=new adptorclass;createadaptor=true;}}if(protocoladp){if(createadaptor&&protocoladp.initialize){protocoladp.initialize(url);nexacro._addProtocol(loadItem.protocol,protocoladp);}var protocol=protocoladp.getUsingProtocol(url);var sep=path.split("://");if(sep){path=protocol+"://"+sep[1];}if(data&&protocoladp.encrypt){senddata=loadItem.on_encrypt(data);}if(protocoladp.getCommunicationHeaders){var headers=protocoladp.getCommunicationHeaders(url);if(headers){loadItem._addCookieFromVariables(headers);}}}}this.__startCommunication(loadItem,path,senddata,fileId);};_pExtFileDownload.__startCommunication=function(loadItem,path,senddata,fileId){var _ajax=nexacro.__createHttpRequest();var ajax_handle=_ajax.handle;if(path.indexOf("://")> -1){var ar=path.split("://");var protocol=ar[0];switch(protocol){case "http":_ajax._protocol=0;break;case "https":_ajax._protocol=1;break;case "file":_ajax._protocol=2;break;default:_ajax._protocol= -1;break;}}var method="GET";var mime_xml=false;ajax_handle._pExtFileTarget=this;ajax_handle._pExtFileItem=loadItem;nexacro._observeSysEvent(ajax_handle,"loadstart","onloadstart",this._makeLoadstartHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"progress","onprogress",this._makeProcessHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"load","onload",this._makeLoadHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"loadend","onloadend",this._makeLoadendHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"error","onerror",this._makeErrorHandler(this,fileId,loadItem));nexacro._observeSysEvent(ajax_handle,"readystatechange","onreadystatechange",this._makeReadystateChangeHandler(this,fileId,loadItem.type));nexacro._observeSysEvent(ajax_handle,"abort","onabort",this._makeTransferCanceledHandler(this,fileId));try{ajax_handle.open(method,path,true);ajax_handle.responseType="blob";}catch(e){this.on_fire_onerror(this,e.number,e.message,ajax_handle,fileId,loadItem.type);}if(mime_xml){ajax_handle.setRequestHeader("X-Requested-With","XMLHttpRequest");ajax_handle.setRequestHeader("Accept","application/xml, text/xml, */*");}try{ajax_handle.send(senddata?senddata:null);}catch(e){this.on_fire_onerror(this,e.number,e.message,ajax_handle,fileId,loadItem.type);}_ajax=null;};_pExtFileDownload._makeLoadFileModule=function(pThis,pFileId){return function(type,code,msg,url){pThis.on_fire_onload(type,code,msg,url,pFileId);};};_pExtFileDownload._makeProcessHandler=function(pThis,pFileId,pLoadItem){return function(evt){pThis.on_fire_onprogress(pThis,pLoadItem.type,evt,pFileId);};};_pExtFileDownload._makeLoadstartHandler=function(pThis,pFileId,pLoadItem){return function(evt){pThis.on_fire_onloadstart(pThis,pLoadItem.type,evt,pFileId);};};_pExtFileDownload._makeLoadHandler=function(pThis,pFileId,pLoadItem){return function(evt){var itemType=pLoadItem.type;if(this.readyState==4&&this.status==200){var cookie="";if(pLoadItem.context){cookie=pLoadItem.context._getWindow()._doc.cookie;}var data;if(itemType=="upload"){data=this.responseText||"";pLoadItem.on_load_file(data,cookie,this.status,this.statusText);}else if(itemType=="download"){if(this.responseType=="blob"){data=this.response;pLoadItem.on_down_file(data,pThis._unique_id,cookie,this.status,this.statusText);}else{var errormsg=nexacro._GetSystemErrorMsg(this,"0x80010040");pThis.on_fire_onerror(pThis,"0x80010040",errormsg,this,pFileId,pLoadItem.type);}}}else{var errormsg=nexacro._GetSystemErrorMsg(this,"0x80010040");pThis.on_fire_onerror(pThis,"0x80010040",errormsg,this,pFileId,pLoadItem.type);}};};_pExtFileDownload._makeLoadendHandler=function(pThis,pFileId,pLoadItem){return function(evt){var itemType=pLoadItem.type;if(itemType=="download"){if(this.responseType=="blob"){pLoadItem.on_downend_file();}}pThis.on_fire_onloadend(pThis,itemType,evt,pFileId);pLoadItem=null;pthis=null;if(this.upload._pExtFileTarget){this.upload._pExtFileTarget=null;}if(this.upload._pExtFileItem){this.upload._pExtFileItem=null;}};};_pExtFileDownload._makeErrorHandler=function(pThis,pFileId,pLoadItem,type){return function(evt){if(pLoadItem._usewaitcursor){pLoadItem._hideWaitCursor();}pThis.on_fire_onerror(pThis, -1,"File transfer was failure.",pThis,pFileId,pLoadItem.type);};};_pExtFileDownload._makeReadystateChangeHandler=function(pThis,pFileId,pType){return function(evt){var xhrUpload=evt.target;pThis.on_fire_onreadystatechange(pThis,xhrUpload.readyState,xhrUpload.status,pFileId,pType);};};_pExtFileDownload._makeTransferCanceledHandler=function(pThis,pFileId){return function(evt){alert(pFileId+". 사용자에 의해 전송이 취소되었습니다.");};};_pExtFileDownload.on_load_filemodule=function(type,code,msg,url){this.on_fire_onload(type,code,msg,url);};_pExtFileDownload.on_loadframe_filemodule=function(type,code,msg,url){this.on_fire_onload(type,code,msg,url);};_pExtFileDownload.on_load=function(target){var pLoadItem=this._pExtFileItem;if(pLoadItem){pLoadItem.on_loadframe_file(this._unique_id,target);pLoadItem=null;}};_pExtFileDownload.on_fire_onreadystatechange=function(obj,readyState,status,fileId,type){if(this.onreadystatechange&&this.onreadystatechange._has_handlers){var evt=new nexacro.ExtFileReadystateChangEventInfo(obj,"readystatechange",readyState,status);evt["fileId"]=fileId;evt["type"]=type;this.onreadystatechange._fireEvent(this,evt);}};_pExtFileDownload.on_fire_onloadstart=function(obj,type,evt,fileId){if(this.onloadstart&&this.onloadstart._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onloadstart",type,evt.lengthComputable,evt.loaded,evt.total,fileId);this.onloadstart._fireEvent(this,evt);}};_pExtFileDownload.on_fire_onerror=function(obj,errorcode,errormsg,errorobj,fileId,type){var errormsg=nexacro._GetSystemErrorMsg(this,errorcode);if(this.parent.gfnIsNull(errormsg)){errorcode=errorobj.status;errormsg=errorobj.statusText;}if(this.onerror&&this.onerror._has_handlers){var evt=new nexacro.ExtFileErrorEventInfo(obj,"onerror",errorcode,errormsg,errorobj);evt["fileId"]=fileId;evt["type"]=type;return this.onerror._fireEvent(this,evt);}return true;};_pExtFileDownload.on_fire_onprogress=function(obj,type,evt,fileId){if(this.onprogress&&this.onprogress._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onprogress",type,evt.lengthComputable,evt.loaded,evt.total,fileId);this.onprogress._fireEvent(this,evt);}};_pExtFileDownload.on_fire_onload=function(type,code,msg,url,fileId){if(this.onload&&this.onload._has_handlers&&url!="about:blank"){var evt=new nexacro.ExtFileLoadEventInfo(this,"onsuccess");evt["fileId"]=fileId;evt["type"]="download";evt["errorcode"]=code;evt["errormsg"]=msg;evt["url"]=url;return this.onload._fireEvent(this,evt);}};_pExtFileDownload.on_fire_onloadend=function(obj,type,evt,fileId){if(this.onloadend&&this.onloadend._has_handlers){var evt=new nexacro.Event.ExtFileProgress(obj,"onloadend",type,evt.lengthComputable,evt.loaded,evt.total);evt["fileId"]=fileId;this.onloadend._fireEvent(this,evt);}};delete _pExtFileDownload;};nexacro.ExtFileTransaction=function(path,type,context,inDatasetsParam,outDatasetsParam,datatype){nexacro._CommunicationItem.call(this,path,type,false);this.context=context;this.inputDatasets=this._parseDSParam(inDatasetsParam);this.outputDatasets=this._parseDSParam(outDatasetsParam);this.datatype=(!datatype?0:datatype);this._sendData=this._serializeData();this.callbackList=[];this._usewaitcursor=nexacro._usewaitcursor;this._remain_data=null;if(system.navigatorname=="IE"&&system.navigatorversion<9){this._check_responseXML=true;}else{this._check_responseXML=false;}};var _pFileTransaction=nexacro._createPrototype(nexacro._CommunicationItem,nexacro.ExtFileTransaction);nexacro.ExtFileTransaction.prototype=_pFileTransaction;_pFileTransaction._type="ExtFileTransaction";_pFileTransaction._type_name="ExtFileTransaction";_pFileTransaction._serializeData=function(){if(this.datatype==1){return this.__serializeBIN();}else if(this.datatype==2){return this.__serializeSSV();}else{return this.__serializeXML();}};_pFileTransaction._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t"];_pFileTransaction._writeData=function(list,str,depth){list[list.length]=this._TABS[depth]+str;};_pFileTransaction.__serializeXML=function(){var depth=0;var list=[];var cookievar=nexacro.getApplication()._cookie_variables;this._writeData(list,"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",depth);this._writeData(list,"<!DOCTYPE p_nexacro [ <!ENTITY nbsp '&#160;'> <!ENTITY quot '&#34;'>"+" <!ENTITY amp '&#38;'> <!ENTITY lt '&#60;'> <!ENTITY gt '&#62;'> ]>",depth);this._writeData(list,"<Root xmlns=\"http://www.nexacroplatform.com/platform/dataset\">",depth++ );var argParamsCnt=0;var cookievarCnt=0;var argParams=this.parameters;if(argParams){argParamsCnt=argParams.length;}if(cookievar){cookievarCnt=cookievar.length;}if(argParamsCnt>0||cookievarCnt>0){this._writeData(list,"<Parameters>",depth++ );if(argParamsCnt>0){for(var i=0;i<argParamsCnt;i++ ){var id=argParams[i].lval;var val=argParams[i].rval;if(val&&val.length){val=nexacro._encodeXml(val);this._writeData(list,"<Parameter id=\""+id+"\">"+val+"</Parameter>",depth);}else{this._writeData(list,"<Parameter id=\""+id+"\" />",depth);}}}this._writeData(list,"</Parameters>", --depth);}else{this._writeData(list,"<Parameters />",depth);}var datasetParams=this.inputDatasets;if(datasetParams&&datasetParams.length){var datasetCnt=datasetParams.length;for(i=0;i<datasetCnt;i++ ){var id=datasetParams[i].rval;var ds=this.context._getDatasetObject(id);if(ds){list.push(ds._saveXML(datasetParams[i].lval,datasetParams[i].saveType,depth,false));}}}this._writeData(list,"</Root>", --depth);var rntVal;if(argParamsCnt==0&&cookievarCnt==0&&(!datasetParams||datasetParams.length==0)){rntVal="";}else{rntVal=list.join("\n");}return rntVal;};_pFileTransaction.__serializeSSV=function(){var _rs_=String.fromCharCode(30);var _cs_=String.fromCharCode(31);var depth=0;var list=[];var cookievar=nexacro.getApplication()._cookie_variables;var id,val,ds;var listLength=0;list.push("SSV:utf-8"+_rs_);var argParamsCnt=0;var cookievarCnt=0;var argParams=this.parameters;if(argParams){argParamsCnt=argParams.length;}if(cookievar){cookievarCnt=cookievar.length;}if(cookievarCnt>0){for(i=0;i<cookievarCnt;i++ ){id=cookievar[i];val=application[id];if(val&&val.length){val=val;list.push(id+"="+val+_rs_);}else{list.push(id+"="+_rs_);}}}if(argParamsCnt>0){for(i=0;i<argParamsCnt;i++ ){id=argParams[i].lval;val=argParams[i].rval;if(val){val=val;list.push(id+"="+val+_rs_);}else{list.push(id+"="+_rs_);}}}var datasetParams=this.inputDatasets;if(datasetParams&&datasetParams.length){var datasetCnt=datasetParams.length;for(var i=0;i<datasetCnt;i++ ){var id=datasetParams[i].rval;var ds=this.context._getDatasetObject(id);if(ds){list.push(ds.saveSSV(datasetParams[i].lval,datasetParams[i].saveType));}}}var rtnVal=list.join("");return rtnVal;};_pFileTransaction.__serializeBIN=function(){var ssvdata=this.__serializeSSV();if(ssvdata){return nexacro._convertStreamSSVToBIN(ssvdata);}return "";};_pFileTransaction.on_start=function(){if(this._usewaitcursor){this._showWaitCursor();}};_pFileTransaction.on_load_file=function(data,cookie,status,statusText){if(this._usewaitcursor){this._hideWaitCursor();}if(!data){return [ -1,"Stream Data is null!"];}data=data.trim();var fstr=data.substring(0,3);var result,i,id,val,code=0,msg="";var scope=this.scope;if(!scope["_extFileDsPool"]){scope["_extFileDsPool"]=[];}var datasetPool=scope["_extFileDsPool"];if(fstr=="SSV"){result=this.__deserializeSSV(data);code=result[0];msg=result[1]+"["+status+","+statusText+"]";}else{result=this._deserializeXMLFromStr(data);code=result[0];msg=result[1]+"["+status+","+statusText+"]";}var datasets=[];var len=datasetPool.length;var ds;for(var i=0;i<len;i++ ){ds=datasetPool[i];if(ds["_used"]){datasets.push(ds);}}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){data=this.on_decrypt(data);}this._addCookieToCookieVariable(cookie);var callbackList=this.callbackList;var n=callbackList.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){item.callback.call(target,this.type,code,msg,this.path,datasets);}}callbackList.splice(0,n);this.releaseResponseDataset(scope);}};_pFileTransaction.on_loadframe_file=function(unique_id,target){if(this._usewaitcursor){this._hideWaitCursor();}var i,id,val,xmldoc,result,variables,datasets,form,code=0,msg="";form=this.context;xmldoc=nexacro._getXMLDocument(unique_id);result=nexacro._getDataFromDOM(xmldoc,this);variables=result[0];for(i=0;i<variables.length;i++ ){id=variables[i]["id"];if(id&&id.length){val=variables[i]["val"];if(id=="ErrorCode"){code=parseInt(val,10);if(!isFinite(code)){code= -1;}}else if(id=="ErrorMsg"){msg=val;}}}delete nexacro._CommunicationManager[this.path];var callbackList=this.callbackList;var n=callbackList.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){item.callback.call(target,this.type,code,msg,this.path,result[1]);}}callbackList.splice(0,n);}};_pFileTransaction.on_down_file=function(data,unique_id,cookie,status,statusText){var url,saveFilename=this._downfilename;if(nexacro._ExtFileUpDownloadSupport.Download){url=this._createObjectURL(data);this._downfileblob=url;var manager=nexacro._IframeManager;var form=manager.search_form(unique_id);if(form&&form.node){var node=form.node;var doc=nexacro._managerFrameDoc;var ahref=doc.createElement("a");ahref.href=url;ahref.download=saveFilename;nexacro.__appendDOMNode(node,ahref);ahref.click();nexacro.__removeDOMNode(node,ahref);ahref=null;}}else if(nexacro._ExtFileUpDownloadSupport.MSSave){window.navigator.msSaveOrOpenBlob(data,saveFilename);}else{nexacro._download(this.path);}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){data=this.on_decrypt(data);}this._addCookieToCookieVariable(cookie);var callbackList=this.callbackList;var n=callbackList.length;if(n>0){for(var i=0;i<n;i++ ){var item=callbackList[i];var target=item.target;if(target._is_alive!=false){item.callback.call(target,this.type,status,statusText,this.path);}}callbackList.splice(0,n);}};_pFileTransaction.on_downend_file=function(){var url=this._downfileblob,pThis=this;if(nexacro._ExtFileUpDownloadSupport.Download&&url){setTimeout(function(){pThis._revokeObjectURL(url);},250);}if(this._usewaitcursor){this._hideWaitCursor();}this._downfileblob=null;this._downfilename=null;};_pFileTransaction._createObjectURL=function(blob){return window.URL.createObjectURL(blob);};_pFileTransaction._revokeObjectURL=function(url){if(window.webkitURL){window.webkitURL.revokeObjectURL(url);}else if(window.URL&&window.URL.revokeObjectURL){window.URL.revokeObjectURL(url);}};_pFileTransaction.__deserializeSSV=function(strRecvData){var _rs_=String.fromCharCode(30);var _cs_=String.fromCharCode(31);var code=0;var message="SUCCESS";if(!strRecvData){return [ -1,"Stream Data is null!"];}var form=this.context;var ssvLines=strRecvData.split(_rs_);var lineCnt=ssvLines.length;var curIdx=0;curIdx++ ;var curStr;for(;curIdx<lineCnt;curIdx++ ){curStr=ssvLines[curIdx];if(curStr.substring(0,7)!="Dataset"){var paramArr=curStr.split(_cs_);var paramCnt=paramArr.length;for(var i=0;i<paramCnt;i++ ){var paramStr=paramArr[i];var varInfo=paramStr;var val=undefined;var sep_pos=paramStr.indexOf("=");if(sep_pos>=0){varInfo=paramStr.substring(0,sep_pos);val=paramStr.substring(sep_pos+1);}if(varInfo){var id=varInfo;var sep_pos=varInfo.indexOf(":");if(sep_pos>=0){id=varInfo.substring(0,sep_pos);}if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}}else if(id=="ErrorMsg"){message=val;}else if(id in form){if(typeof (form[id])!="object"){form[id]=val;}}else{if(nexacro.getApplication()._existVariable(id)){application[id]=val;}}}}}else{break;}}if(code<= -1){return [code,message];}var inDatasets=this.inputDatasets;if(inDatasets&&inDatasets.length){var inDataCnt=inDatasets.length;for(var i=0;i<inDataCnt;i++ ){var param=inDatasets[i];var ds=form._getDatasetObject(param.rval);if(ds){ds.applyChange();}}}var dsIds={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(var i=0;i<outDataCnt;i++ ){var param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;}}}function find_next_dataset_loop(){if(curIdx<lineCnt){curStr=ssvLines[curIdx];if(curStr.substring(0,7)=="Dataset"){return true;}curIdx++ ;return false;}return true;}while(curIdx<lineCnt){while(true){if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}}if(curIdx<lineCnt){var sep_pos=curStr.indexOf(":");if(sep_pos>=0){var remoteId=curStr.substring(sep_pos+1);if(remoteId&&remoteId.length){var ds=this.getResponseDataset(form);if(ds){ds.rowposition= -1;curIdx=ds.loadFromSSVArray(ssvLines,lineCnt,curIdx,true);}else{curIdx++ ;}}else{curIdx++ ;}}else{curIdx++ ;}}}return [code,message];};_pFileTransaction.getResponseDataset=function(scope){var datasetPool=scope["_extFileDsPool"];var size=datasetPool.length;var ds;var tempDs;var isUsed;var uidPrefix="_ds_extResponse_";for(var i=0;i<size;i++ ){tempDs=datasetPool[i];isUsed=tempDs["_used"];if(!isUsed){ds=tempDs;ds["_used"]=true;break;}}if(!ds){var uid=this.context.gfnGetSequenceId(scope,uidPrefix);ds=new Dataset(uid);ds["_used"]=true;datasetPool.push(ds);}return ds;};_pFileTransaction.releaseResponseDataset=function(scope){var datasetPool=scope["_extFileDsPool"];var size=datasetPool.length;var tempDs;var isUsed;for(var i=0;i<size;i++ ){tempDs=datasetPool[i];tempDs.clear();tempDs["_used"]=false;}};_pFileTransaction._deserializeXMLFromStr=function(strRecvData){var code=0;var message="SUCCESS";if(!strRecvData){return [ -1,"Stream Data is null!"];}var form=this.context;var xml_parse_pos=strRecvData.indexOf("<Dataset ");var headerData;if(xml_parse_pos> -1){headerData=strRecvData.substring(0,xml_parse_pos);}else{headerData=strRecvData;}var head_parse_pos=0;var paramsInfo=nexacro._getXMLTagData(headerData,head_parse_pos,"<Parameters>","</Parameters>");if(paramsInfo){var paramsData=paramsInfo[0];head_parse_pos=paramsInfo[3];var param_parse_pos=0;var varInfo=nexacro._getXMLTagData2(paramsData,param_parse_pos,"<Parameter ","</Parameter>");while(varInfo){param_parse_pos=varInfo[3];var attrStr=varInfo[1];var id=nexacro._getXMLAttributeID(attrStr);if(id&&id.length){var val=varInfo[0];if(id=="ErrorCode"){code=parseInt(val)|0;if(isFinite(code)==false){code= -1;}}else if(id=="ErrorMsg"){message=val;}else{this._setParamter(id,val);}}varInfo=nexacro._getXMLTagData2(paramsData,param_parse_pos,"<Parameter ","</Parameter>");}}if(code<= -1){return [code,message];}var dsIds={};var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(var i=0;i<outDataCnt;i++ ){var param=outDatasets[i];if(dsIds[param.rval]==undefined){dsIds[param.rval]=param.lval;}}}if(xml_parse_pos>= -1){var datasetInfo=nexacro._getXMLTagData2(strRecvData,xml_parse_pos,"<Dataset ","</Dataset>");while(datasetInfo){xml_parse_pos=datasetInfo[3];var attrStr=datasetInfo[1];var remoteId=nexacro._getXMLAttributeID(attrStr);if(remoteId&&remoteId.length){var ds=this.getResponseDataset(form);if(ds){ds.loadFromXMLStr(datasetInfo[0]);}}datasetInfo=nexacro._getXMLTagData2(strRecvData,xml_parse_pos,"<Dataset ","</Dataset>");}}dsIds=null;return [code,message];};_pFileTransaction._parseVarParam=function(paramStr){if(!paramStr){return;}paramStr=paramStr.replace(/^\s*|\s*$/g,'');if(paramStr.length==0){return undefined;}var list=[];var expr=/([a-zA-Z_][a-zA-Z0-9_]*)\s*="([^"]*)"|([a-zA-Z_][a-zA-Z0-9_]*)\s*='([^']*)'|([a-zA-Z_][a-zA-Z0-9_]*)\s*=([^ ]*)/g;var splitedParams=paramStr.match(expr);var splitedParamCnt=splitedParams.length;for(var i=0;i<splitedParamCnt;i++ ){var param=splitedParams[i].split("=");var len=param.length;var key=param[0].trim();var value=param[1].trim();for(var j=2;j<len;j++ ){value=value+"="+param[j].trim();}var type="N";var len=value.length;if(len>0){if((value.charAt(0)=="\""&&value.charAt(len-1)=="\"")||(value.charAt(0)=="\'"&&value.charAt(len-1)=="\'")){value=value.substring(1,len-1);}}var paramObj={lval:key,rval:value,saveType:type};list.push(paramObj);}return list;};_pFileTransaction._parseDSParam=function(paramStr){if(!paramStr){return undefined;}var list=[];var expr=/([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\:[aAuUnN])?)/g;var splitedParams=paramStr.match(expr);if(!splitedParams||splitedParams.length==0){return undefined;}var splitedParamCnt=splitedParams.length;var listLength=0;for(var i=0;i<splitedParamCnt;i++ ){var param=splitedParams[i].split("=");var key=param[0].trim();var value=param[1].trim();var bduplicate=false;for(var j=0;j<i;j++ ){var checkparam=splitedParams[j].split("=");var checkkey=checkparam[0].trim();if(key==checkkey){bduplicate=true;}}if(bduplicate){i++ ;return false;}var type="N";var index=value.indexOf(":");if(index> -1){type=value.substring(index+1);value=value.substring(0,index);}var paramObj={lval:key,rval:value,saveType:type};list.push(paramObj);}return list;};_pFileTransaction._setParamter=function(id,val){var form=this.context;if(id in form){if(typeof (form[id])!="object"){form[id]=val;}}else{if(nexacro.getApplication()._existVariable(id)){application[id]=val;}}};_pFileTransaction._getDataset=function(id){var form=this.context;var outDatasets=this.outputDatasets;if(outDatasets&&outDatasets.length){var outDataCnt=outDatasets.length;for(var i=0;i<outDataCnt;i++ ){var param=outDatasets[i];if(param.rval==id){return form._getDatasetObject(param.lval);}}}};_pFileTransaction._showWaitCursor=function(){return;var form=this.context;if(form){form._waitCursor(true,form);}};_pFileTransaction._hideWaitCursor=function(){return;var form=this.context;if(form){form._waitCursor(false,form);}};delete _pFileTransaction;nexacro.ExtFileButtonCtrl=function(id,position,left,top,width,height,right,bottom,parent){nexacro.Button.call(this,id,position,left,top,width,height,right,bottom,parent);this._is_subcontrol=true;};var _pExtFileButtonCtrl=nexacro._createPrototype(nexacro.Button);nexacro.ExtFileButtonCtrl.prototype=_pExtFileButtonCtrl;_pExtFileButtonCtrl._type="ExtFileButtonCtrl";_pExtFileButtonCtrl._type_name="ExtFileButtonCtrl";_pExtFileButtonCtrl._isPopupFrame=function(){return false;};delete _pExtFileButtonCtrl;}
var pForm=nexacro.Form.prototype;pForm.gfnCreateChart=function(objChart){var svc_url=nexacro.getApplication().webRootURL;var htmlUrl=svc_url+"rMateChartH5/nexacroChartH5Sample.html";var scriptRootUrl=svc_url+"rMateChartH5/rMateChartH5";this.rMateChartCreate(objChart,scriptRootUrl,htmlUrl,this.gfnMakeChartVars());};pForm.gfnMakeChartVars=function(){var chartVars="";var rMateOnLoadCallFunction="rMateChartOnLoad";chartVars+="rMateOnLoadCallFunction="+rMateOnLoadCallFunction;return chartVars;};pForm.gfnSetChart=function(objChart,objDs,sLayoutType,arrOption){var sLayout="";if(sLayoutType=="Line"){sLayout+="<rMateChart backgroundColor='0xFFFFFF' cornerRadius='12' borderThickness='1' borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Line2DChart showDataTips='true' dataTipDisplayMode='axis' paddingTop='0' fontFamily='Dotum' color='#555555'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.xfield+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"' />\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";sLayout+="<Line2DSeries yField='"+arrOption.yfield+"' displayName='"+arrOption.displayName+"'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Line2DSeries>\n";sLayout+="</series>\n";sLayout+="</Line2DChart>\n";sLayout+="</rMateChart>\n";}else if(sLayoutType=="Bar"){sLayout+="<rMateChart backgroundColor='#FFFFFF'  borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Bar2DChart showDataTips='true'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.yfield+"'/>\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";sLayout+="<Bar2DSeries labelPosition='outside' xField='"+arrOption.xfield+"' displayName='"+arrOption.xfielddisplayname+"' itemRenderer='SemiCircleBarItemRenderer' color='#ffffff'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Bar2DSeries>\n";sLayout+="</series>\n";sLayout+="</Bar2DChart>\n";sLayout+="</rMateChart>\n";}else if(sLayoutType=="Column"){sLayout+="<rMateChart backgroundColor='0xFFFFFF' cornerRadius='12' borderThickness='1' borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Column2DChart showDataTips='true' dataTipDisplayMode='axis' paddingTop='0' fontFamily='Dotum' color='#555555'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.xfield+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"' />\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";sLayout+="<Column2DSeries yField='"+arrOption.yfield+"' displayName='"+arrOption.displayName+"'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Column2DSeries>\n";sLayout+="</series>\n";sLayout+="</Column2DChart>\n";sLayout+="</rMateChart>\n";}else if(sLayoutType=="Pie"){sLayout+="<rMateChart backgroundColor='0xFFFFFF' borderStyle='none' cornerRadius='5'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"'/>\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"'/>\n";sLayout+="<Legend position='right' direction='vertical' labelPlacement='right'/>\n";sLayout+="</Options>\n";sLayout+="<Pie2DChart showDataTips='true'>\n";sLayout+="<series>\n";sLayout+="<Pie2DSeries nameField='"+arrOption.fieldname+"' field='"+arrOption.field+"' labelPosition='callout' startAngle='90' fontFamily='Dotum' color='#555555'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate duration='500'/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Pie2DSeries>\n";sLayout+="</series>\n";sLayout+="</Pie2DChart>\n";sLayout+="</rMateChart>\n";}this.rMateChartSetLayout(objChart,sLayout);this.rMateChartSetData(objChart,this.rMateChartDataSetToXml(objDs));};pForm.gfnSetMultiChart=function(objChart,objDs,sLayoutType,arrOption){var sLayout="";if(sLayoutType=="Line"){var arrYfield=arrOption.yfield.split(",");var arrDisplayName=arrOption.displayName.split(",");sLayout+="<rMateChart backgroundColor='0xFFFFFF' cornerRadius='12' borderThickness='1' borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Line2DChart showDataTips='true'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.xfield+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"' />\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";for(var i=0;i<arrYfield.length;i++ ){sLayout+="<Line2DSeries yField='"+arrYfield[i]+"' displayName='"+arrDisplayName[i]+"'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Line2DSeries>\n";}sLayout+="</series>\n";sLayout+="</Line2DChart>\n";sLayout+="</rMateChart>\n";}else if(sLayoutType=="Bar"){var arrXfield=arrOption.xfield.split(",");var arrXfieldDisplayName=arrOption.xfielddisplayname.split(",");sLayout+="<rMateChart backgroundColor='#FFFFFF'  borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Bar2DChart showDataTips='true'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.yfield+"'/>\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";for(var i=0;i<arrXfield.length;i++ ){sLayout+="<Bar2DSeries labelPosition='outside' xField='"+arrXfield[i]+"' displayName='"+arrXfieldDisplayName[i]+"' itemRenderer='SemiCircleBarItemRenderer'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Bar2DSeries>\"n";}sLayout+="</series>\n";sLayout+="</Bar2DChart>\n";sLayout+="</rMateChart>\n";}else if(sLayoutType=="Column"){var arrYfield=arrOption.yfield.split(",");var arrDisplayName=arrOption.displayName.split(",");sLayout+="<rMateChart backgroundColor='0xFFFFFF' cornerRadius='12' borderThickness='1' borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='"+arrOption.title+"' />\n";sLayout+="<SubCaption text='"+arrOption.subtitle+"' textAlign='right' />\n";sLayout+="<Legend />\n";sLayout+="</Options>\n";sLayout+="<Column2DChart showDataTips='true'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<CategoryAxis categoryField='"+arrOption.xfield+"'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis minimum='"+arrOption.minimum+"' maximum='"+arrOption.maximum+"' interval='"+arrOption.interval+"' />\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";for(var i=0;i<arrYfield.length;i++ ){sLayout+="<Column2DSeries yField='"+arrYfield[i]+"' displayName='"+arrDisplayName[i]+"'>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Column2DSeries>\n";}sLayout+="</series>\n";sLayout+="</Column2DChart>\n";sLayout+="</rMateChart>\n";}this.rMateChartSetLayout(objChart,sLayout);this.rMateChartSetData(objChart,this.rMateChartDataSetToXml(objDs));};pForm.gfnSetCombinationChart=function(objChart,objDs,arrOption){var sLayout="";var arrYfield=arrOption.yfield.split(",");var arrDisplayName=arrOption.displayName.split(",");sLayout+="<rMateChart backgroundColor='#FFFFFF'  borderStyle='none'>\n";sLayout+="<Options>\n";sLayout+="<Caption text='Annual Report'/>\n";sLayout+="</Options>\n";sLayout+="<NumberFormatter id='numfmt' useThousandsSeparator='true'/>\n";sLayout+="<Combination2DChart showDataTips='true'>\n";sLayout+="<horizontalAxis>\n";sLayout+="<CategoryAxis categoryField='Month' padding='1'/>\n";sLayout+="</horizontalAxis>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis id='vAxis1' formatter='{numfmt}' maximum='100' interval='10'/>\n";sLayout+="</verticalAxis>\n";sLayout+="<series>\n";sLayout+="<Column2DSeries labelPosition='outside' yField='"+arrYfield[0]+"' displayName='"+arrDisplayName[0]+"'>\n";sLayout+="<fill>\n";sLayout+="<SolidColor color='#41b2e6'/>\n";sLayout+="</fill>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="</Column2DSeries>\n";sLayout+="<Line2DSeries radius='6' yField='"+arrYfield[1]+"' displayName='"+arrDisplayName[1]+"'>\n";sLayout+="<verticalAxis>\n";sLayout+="<LinearAxis id='vAxis2'/>\n";sLayout+="</verticalAxis>\n";sLayout+="<showDataEffect>\n";sLayout+="<SeriesInterpolate/>\n";sLayout+="</showDataEffect>\n";sLayout+="<lineStroke>\n";sLayout+="<Stroke color='#f9bd03' weight='4'/>\n";sLayout+="</lineStroke>\n";sLayout+="<stroke>\n";sLayout+="<Stroke color='#f9bd03' weight='3'/>\n";sLayout+="</stroke>\n";sLayout+="</Line2DSeries>\n";sLayout+="</series>\n";sLayout+="<verticalAxisRenderers>\n";sLayout+="<Axis2DRenderer axis='{vAxis1}' showLine='false'/>\n";sLayout+="<Axis2DRenderer axis='{vAxis2}' showLine='false'/>\n";sLayout+="</verticalAxisRenderers>\n";sLayout+="</Combination2DChart>\n";sLayout+="</rMateChart>\n";this.rMateChartSetLayout(objChart,sLayout);this.rMateChartSetData(objChart,this.rMateChartDataSetToXml(objDs));};
